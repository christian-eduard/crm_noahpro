var RS=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var rQ=RS((cQ,id)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var cr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function LS(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var Lb={exports:{}},Qd={},Ab={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _l=Symbol.for("react.element"),AS=Symbol.for("react.portal"),zS=Symbol.for("react.fragment"),IS=Symbol.for("react.strict_mode"),FS=Symbol.for("react.profiler"),HS=Symbol.for("react.provider"),WS=Symbol.for("react.context"),BS=Symbol.for("react.forward_ref"),US=Symbol.for("react.suspense"),qS=Symbol.for("react.memo"),YS=Symbol.for("react.lazy"),ux=Symbol.iterator;function VS(e){return e===null||typeof e!="object"?null:(e=ux&&e[ux]||e["@@iterator"],typeof e=="function"?e:null)}var zb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ib=Object.assign,Fb={};function Oi(e,t,r){this.props=e,this.context=t,this.refs=Fb,this.updater=r||zb}Oi.prototype.isReactComponent={};Oi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Oi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Hb(){}Hb.prototype=Oi.prototype;function lp(e,t,r){this.props=e,this.context=t,this.refs=Fb,this.updater=r||zb}var cp=lp.prototype=new Hb;cp.constructor=lp;Ib(cp,Oi.prototype);cp.isPureReactComponent=!0;var hx=Array.isArray,Wb=Object.prototype.hasOwnProperty,dp={current:null},Bb={key:!0,ref:!0,__self:!0,__source:!0};function Ub(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Wb.call(t,n)&&!Bb.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:_l,type:e,key:i,ref:o,props:s,_owner:dp.current}}function GS(e,t){return{$$typeof:_l,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function up(e){return typeof e=="object"&&e!==null&&e.$$typeof===_l}function KS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var fx=/\/+/g;function jh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?KS(""+e.key):t.toString(36)}function Rc(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case _l:case AS:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+jh(o,0):n,hx(s)?(r="",e!=null&&(r=e.replace(fx,"$&/")+"/"),Rc(s,t,r,"",function(d){return d})):s!=null&&(up(s)&&(s=GS(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(fx,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",hx(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+jh(i,l);o+=Rc(i,t,r,c,s)}else if(c=VS(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+jh(i,l++),o+=Rc(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function sc(e,t,r){if(e==null)return e;var n=[],s=0;return Rc(e,n,"","",function(i){return t.call(r,i,s++)}),n}function XS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var nr={current:null},Lc={transition:null},JS={ReactCurrentDispatcher:nr,ReactCurrentBatchConfig:Lc,ReactCurrentOwner:dp};function qb(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:sc,forEach:function(e,t,r){sc(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return sc(e,function(){t++}),t},toArray:function(e){return sc(e,function(t){return t})||[]},only:function(e){if(!up(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Pe.Component=Oi;Pe.Fragment=zS;Pe.Profiler=FS;Pe.PureComponent=lp;Pe.StrictMode=IS;Pe.Suspense=US;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JS;Pe.act=qb;Pe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Ib({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=dp.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Wb.call(t,c)&&!Bb.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:_l,type:e.type,key:s,ref:i,props:n,_owner:o}};Pe.createContext=function(e){return e={$$typeof:WS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:HS,_context:e},e.Consumer=e};Pe.createElement=Ub;Pe.createFactory=function(e){var t=Ub.bind(null,e);return t.type=e,t};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(e){return{$$typeof:BS,render:e}};Pe.isValidElement=up;Pe.lazy=function(e){return{$$typeof:YS,_payload:{_status:-1,_result:e},_init:XS}};Pe.memo=function(e,t){return{$$typeof:qS,type:e,compare:t===void 0?null:t}};Pe.startTransition=function(e){var t=Lc.transition;Lc.transition={};try{e()}finally{Lc.transition=t}};Pe.unstable_act=qb;Pe.useCallback=function(e,t){return nr.current.useCallback(e,t)};Pe.useContext=function(e){return nr.current.useContext(e)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(e){return nr.current.useDeferredValue(e)};Pe.useEffect=function(e,t){return nr.current.useEffect(e,t)};Pe.useId=function(){return nr.current.useId()};Pe.useImperativeHandle=function(e,t,r){return nr.current.useImperativeHandle(e,t,r)};Pe.useInsertionEffect=function(e,t){return nr.current.useInsertionEffect(e,t)};Pe.useLayoutEffect=function(e,t){return nr.current.useLayoutEffect(e,t)};Pe.useMemo=function(e,t){return nr.current.useMemo(e,t)};Pe.useReducer=function(e,t,r){return nr.current.useReducer(e,t,r)};Pe.useRef=function(e){return nr.current.useRef(e)};Pe.useState=function(e){return nr.current.useState(e)};Pe.useSyncExternalStore=function(e,t,r){return nr.current.useSyncExternalStore(e,t,r)};Pe.useTransition=function(){return nr.current.useTransition()};Pe.version="18.3.1";Ab.exports=Pe;var S=Ab.exports;const $=Xt(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QS=S,ZS=Symbol.for("react.element"),eC=Symbol.for("react.fragment"),tC=Object.prototype.hasOwnProperty,rC=QS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nC={key:!0,ref:!0,__self:!0,__source:!0};function Yb(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)tC.call(t,n)&&!nC.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:ZS,type:e,key:i,ref:o,props:s,_owner:rC.current}}Qd.Fragment=eC;Qd.jsx=Yb;Qd.jsxs=Yb;Lb.exports=Qd;var a=Lb.exports,jf={},Vb={exports:{}},Cr={},Gb={exports:{}},Kb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(G,Z){var ie=G.length;G.push(Z);e:for(;0<ie;){var I=ie-1>>>1,F=G[I];if(0<s(F,Z))G[I]=Z,G[ie]=F,ie=I;else break e}}function r(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var Z=G[0],ie=G.pop();if(ie!==Z){G[0]=ie;e:for(var I=0,F=G.length,Y=F>>>1;I<Y;){var ae=2*(I+1)-1,V=G[ae],le=ae+1,xe=G[le];if(0>s(V,ie))le<F&&0>s(xe,V)?(G[I]=xe,G[le]=ie,I=le):(G[I]=V,G[ae]=ie,I=ae);else if(le<F&&0>s(xe,ie))G[I]=xe,G[le]=ie,I=le;else break e}}return Z}function s(G,Z){var ie=G.sortIndex-Z.sortIndex;return ie!==0?ie:G.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,f=null,h=3,x=!1,v=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(G){for(var Z=r(d);Z!==null;){if(Z.callback===null)n(d);else if(Z.startTime<=G)n(d),Z.sortIndex=Z.expirationTime,t(c,Z);else break;Z=r(d)}}function b(G){if(y=!1,j(G),!v)if(r(c)!==null)v=!0,te(N);else{var Z=r(d);Z!==null&&he(b,Z.startTime-G)}}function N(G,Z){v=!1,y&&(y=!1,g(T),T=-1),x=!0;var ie=h;try{for(j(Z),f=r(c);f!==null&&(!(f.expirationTime>Z)||G&&!R());){var I=f.callback;if(typeof I=="function"){f.callback=null,h=f.priorityLevel;var F=I(f.expirationTime<=Z);Z=e.unstable_now(),typeof F=="function"?f.callback=F:f===r(c)&&n(c),j(Z)}else n(c);f=r(c)}if(f!==null)var Y=!0;else{var ae=r(d);ae!==null&&he(b,ae.startTime-Z),Y=!1}return Y}finally{f=null,h=ie,x=!1}}var C=!1,E=null,T=-1,O=5,M=-1;function R(){return!(e.unstable_now()-M<O)}function H(){if(E!==null){var G=e.unstable_now();M=G;var Z=!0;try{Z=E(!0,G)}finally{Z?A():(C=!1,E=null)}}else C=!1}var A;if(typeof p=="function")A=function(){p(H)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,ee=L.port2;L.port1.onmessage=H,A=function(){ee.postMessage(null)}}else A=function(){w(H,0)};function te(G){E=G,C||(C=!0,A())}function he(G,Z){T=w(function(){G(e.unstable_now())},Z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_continueExecution=function(){v||x||(v=!0,te(N))},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(G){switch(h){case 1:case 2:case 3:var Z=3;break;default:Z=h}var ie=h;h=Z;try{return G()}finally{h=ie}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(G,Z){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ie=h;h=G;try{return Z()}finally{h=ie}},e.unstable_scheduleCallback=function(G,Z,ie){var I=e.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?I+ie:I):ie=I,G){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=ie+F,G={id:u++,callback:Z,priorityLevel:G,startTime:ie,expirationTime:F,sortIndex:-1},ie>I?(G.sortIndex=ie,t(d,G),r(c)===null&&G===r(d)&&(y?(g(T),T=-1):y=!0,he(b,ie-I))):(G.sortIndex=F,t(c,G),v||x||(v=!0,te(N))),G},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(G){var Z=h;return function(){var ie=h;h=Z;try{return G.apply(this,arguments)}finally{h=ie}}}})(Kb);Gb.exports=Kb;var aC=Gb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sC=S,kr=aC;function J(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xb=new Set,Io={};function Es(e,t){fi(e,t),fi(e+"Capture",t)}function fi(e,t){for(Io[e]=t,e=0;e<t.length;e++)Xb.add(t[e])}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kf=Object.prototype.hasOwnProperty,iC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mx={},px={};function oC(e){return kf.call(px,e)?!0:kf.call(mx,e)?!1:iC.test(e)?px[e]=!0:(mx[e]=!0,!1)}function lC(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function cC(e,t,r,n){if(t===null||typeof t>"u"||lC(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ar(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var It={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){It[e]=new ar(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];It[t]=new ar(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){It[e]=new ar(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){It[e]=new ar(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){It[e]=new ar(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){It[e]=new ar(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){It[e]=new ar(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){It[e]=new ar(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){It[e]=new ar(e,5,!1,e.toLowerCase(),null,!1,!1)});var hp=/[\-:]([a-z])/g;function fp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(hp,fp);It[t]=new ar(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(hp,fp);It[t]=new ar(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(hp,fp);It[t]=new ar(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){It[e]=new ar(e,1,!1,e.toLowerCase(),null,!1,!1)});It.xlinkHref=new ar("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){It[e]=new ar(e,1,!1,e.toLowerCase(),null,!0,!0)});function mp(e,t,r,n){var s=It.hasOwnProperty(t)?It[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(cC(t,r,s,n)&&(r=null),n||s===null?oC(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var aa=sC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ic=Symbol.for("react.element"),Ws=Symbol.for("react.portal"),Bs=Symbol.for("react.fragment"),pp=Symbol.for("react.strict_mode"),Nf=Symbol.for("react.profiler"),Jb=Symbol.for("react.provider"),Qb=Symbol.for("react.context"),gp=Symbol.for("react.forward_ref"),_f=Symbol.for("react.suspense"),Sf=Symbol.for("react.suspense_list"),xp=Symbol.for("react.memo"),ma=Symbol.for("react.lazy"),Zb=Symbol.for("react.offscreen"),gx=Symbol.iterator;function Zi(e){return e===null||typeof e!="object"?null:(e=gx&&e[gx]||e["@@iterator"],typeof e=="function"?e:null)}var dt=Object.assign,kh;function xo(e){if(kh===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);kh=t&&t[1]||""}return`
`+kh+e}var Nh=!1;function _h(e,t){if(!e||Nh)return"";Nh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Nh=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?xo(e):""}function dC(e){switch(e.tag){case 5:return xo(e.type);case 16:return xo("Lazy");case 13:return xo("Suspense");case 19:return xo("SuspenseList");case 0:case 2:case 15:return e=_h(e.type,!1),e;case 11:return e=_h(e.type.render,!1),e;case 1:return e=_h(e.type,!0),e;default:return""}}function Cf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Bs:return"Fragment";case Ws:return"Portal";case Nf:return"Profiler";case pp:return"StrictMode";case _f:return"Suspense";case Sf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Qb:return(e.displayName||"Context")+".Consumer";case Jb:return(e._context.displayName||"Context")+".Provider";case gp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xp:return t=e.displayName||null,t!==null?t:Cf(e.type)||"Memo";case ma:t=e._payload,e=e._init;try{return Cf(e(t))}catch{}}return null}function uC(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cf(t);case 8:return t===pp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ra(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ew(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function hC(e){var t=ew(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function oc(e){e._valueTracker||(e._valueTracker=hC(e))}function tw(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=ew(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function od(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ef(e,t){var r=t.checked;return dt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function xx(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Ra(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function rw(e,t){t=t.checked,t!=null&&mp(e,"checked",t,!1)}function Df(e,t){rw(e,t);var r=Ra(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Tf(e,t.type,r):t.hasOwnProperty("defaultValue")&&Tf(e,t.type,Ra(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function yx(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Tf(e,t,r){(t!=="number"||od(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var yo=Array.isArray;function ri(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Ra(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Pf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(J(91));return dt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function vx(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(J(92));if(yo(r)){if(1<r.length)throw Error(J(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ra(r)}}function nw(e,t){var r=Ra(t.value),n=Ra(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function bx(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function aw(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Of(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?aw(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var lc,sw=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(lc=lc||document.createElement("div"),lc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=lc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Fo(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var _o={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fC=["Webkit","ms","Moz","O"];Object.keys(_o).forEach(function(e){fC.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),_o[t]=_o[e]})});function iw(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||_o.hasOwnProperty(e)&&_o[e]?(""+t).trim():t+"px"}function ow(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=iw(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var mC=dt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mf(e,t){if(t){if(mC[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(J(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(J(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(J(61))}if(t.style!=null&&typeof t.style!="object")throw Error(J(62))}}function $f(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rf=null;function yp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Lf=null,ni=null,ai=null;function wx(e){if(e=El(e)){if(typeof Lf!="function")throw Error(J(280));var t=e.stateNode;t&&(t=nu(t),Lf(e.stateNode,e.type,t))}}function lw(e){ni?ai?ai.push(e):ai=[e]:ni=e}function cw(){if(ni){var e=ni,t=ai;if(ai=ni=null,wx(e),t)for(e=0;e<t.length;e++)wx(t[e])}}function dw(e,t){return e(t)}function uw(){}var Sh=!1;function hw(e,t,r){if(Sh)return e(t,r);Sh=!0;try{return dw(e,t,r)}finally{Sh=!1,(ni!==null||ai!==null)&&(uw(),cw())}}function Ho(e,t){var r=e.stateNode;if(r===null)return null;var n=nu(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(J(231,t,typeof r));return r}var Af=!1;if(Xn)try{var eo={};Object.defineProperty(eo,"passive",{get:function(){Af=!0}}),window.addEventListener("test",eo,eo),window.removeEventListener("test",eo,eo)}catch{Af=!1}function pC(e,t,r,n,s,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var So=!1,ld=null,cd=!1,zf=null,gC={onError:function(e){So=!0,ld=e}};function xC(e,t,r,n,s,i,o,l,c){So=!1,ld=null,pC.apply(gC,arguments)}function yC(e,t,r,n,s,i,o,l,c){if(xC.apply(this,arguments),So){if(So){var d=ld;So=!1,ld=null}else throw Error(J(198));cd||(cd=!0,zf=d)}}function Ds(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function fw(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function jx(e){if(Ds(e)!==e)throw Error(J(188))}function vC(e){var t=e.alternate;if(!t){if(t=Ds(e),t===null)throw Error(J(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return jx(s),e;if(i===n)return jx(s),t;i=i.sibling}throw Error(J(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(J(189))}}if(r.alternate!==n)throw Error(J(190))}if(r.tag!==3)throw Error(J(188));return r.stateNode.current===r?e:t}function mw(e){return e=vC(e),e!==null?pw(e):null}function pw(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=pw(e);if(t!==null)return t;e=e.sibling}return null}var gw=kr.unstable_scheduleCallback,kx=kr.unstable_cancelCallback,bC=kr.unstable_shouldYield,wC=kr.unstable_requestPaint,xt=kr.unstable_now,jC=kr.unstable_getCurrentPriorityLevel,vp=kr.unstable_ImmediatePriority,xw=kr.unstable_UserBlockingPriority,dd=kr.unstable_NormalPriority,kC=kr.unstable_LowPriority,yw=kr.unstable_IdlePriority,Zd=null,jn=null;function NC(e){if(jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(Zd,e,void 0,(e.current.flags&128)===128)}catch{}}var nn=Math.clz32?Math.clz32:CC,_C=Math.log,SC=Math.LN2;function CC(e){return e>>>=0,e===0?32:31-(_C(e)/SC|0)|0}var cc=64,dc=4194304;function vo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ud(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=vo(l):(i&=o,i!==0&&(n=vo(i)))}else o=r&~s,o!==0?n=vo(o):i!==0&&(n=vo(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-nn(t),s=1<<r,n|=e[r],t&=~s;return n}function EC(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DC(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-nn(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=EC(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function If(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function vw(){var e=cc;return cc<<=1,!(cc&4194240)&&(cc=64),e}function Ch(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Sl(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-nn(t),e[t]=r}function TC(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-nn(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function bp(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-nn(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var qe=0;function bw(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ww,wp,jw,kw,Nw,Ff=!1,uc=[],ka=null,Na=null,_a=null,Wo=new Map,Bo=new Map,ga=[],PC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nx(e,t){switch(e){case"focusin":case"focusout":ka=null;break;case"dragenter":case"dragleave":Na=null;break;case"mouseover":case"mouseout":_a=null;break;case"pointerover":case"pointerout":Wo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bo.delete(t.pointerId)}}function to(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=El(t),t!==null&&wp(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function OC(e,t,r,n,s){switch(t){case"focusin":return ka=to(ka,e,t,r,n,s),!0;case"dragenter":return Na=to(Na,e,t,r,n,s),!0;case"mouseover":return _a=to(_a,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Wo.set(i,to(Wo.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Bo.set(i,to(Bo.get(i)||null,e,t,r,n,s)),!0}return!1}function _w(e){var t=ts(e.target);if(t!==null){var r=Ds(t);if(r!==null){if(t=r.tag,t===13){if(t=fw(r),t!==null){e.blockedOn=t,Nw(e.priority,function(){jw(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ac(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Hf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Rf=n,r.target.dispatchEvent(n),Rf=null}else return t=El(r),t!==null&&wp(t),e.blockedOn=r,!1;t.shift()}return!0}function _x(e,t,r){Ac(e)&&r.delete(t)}function MC(){Ff=!1,ka!==null&&Ac(ka)&&(ka=null),Na!==null&&Ac(Na)&&(Na=null),_a!==null&&Ac(_a)&&(_a=null),Wo.forEach(_x),Bo.forEach(_x)}function ro(e,t){e.blockedOn===t&&(e.blockedOn=null,Ff||(Ff=!0,kr.unstable_scheduleCallback(kr.unstable_NormalPriority,MC)))}function Uo(e){function t(s){return ro(s,e)}if(0<uc.length){ro(uc[0],e);for(var r=1;r<uc.length;r++){var n=uc[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ka!==null&&ro(ka,e),Na!==null&&ro(Na,e),_a!==null&&ro(_a,e),Wo.forEach(t),Bo.forEach(t),r=0;r<ga.length;r++)n=ga[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<ga.length&&(r=ga[0],r.blockedOn===null);)_w(r),r.blockedOn===null&&ga.shift()}var si=aa.ReactCurrentBatchConfig,hd=!0;function $C(e,t,r,n){var s=qe,i=si.transition;si.transition=null;try{qe=1,jp(e,t,r,n)}finally{qe=s,si.transition=i}}function RC(e,t,r,n){var s=qe,i=si.transition;si.transition=null;try{qe=4,jp(e,t,r,n)}finally{qe=s,si.transition=i}}function jp(e,t,r,n){if(hd){var s=Hf(e,t,r,n);if(s===null)Ah(e,t,n,fd,r),Nx(e,n);else if(OC(s,e,t,r,n))n.stopPropagation();else if(Nx(e,n),t&4&&-1<PC.indexOf(e)){for(;s!==null;){var i=El(s);if(i!==null&&ww(i),i=Hf(e,t,r,n),i===null&&Ah(e,t,n,fd,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Ah(e,t,n,null,r)}}var fd=null;function Hf(e,t,r,n){if(fd=null,e=yp(n),e=ts(e),e!==null)if(t=Ds(e),t===null)e=null;else if(r=t.tag,r===13){if(e=fw(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return fd=e,null}function Sw(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jC()){case vp:return 1;case xw:return 4;case dd:case kC:return 16;case yw:return 536870912;default:return 16}default:return 16}}var ya=null,kp=null,zc=null;function Cw(){if(zc)return zc;var e,t=kp,r=t.length,n,s="value"in ya?ya.value:ya.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return zc=s.slice(e,1<n?1-n:void 0)}function Ic(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function hc(){return!0}function Sx(){return!1}function Er(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?hc:Sx,this.isPropagationStopped=Sx,this}return dt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=hc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=hc)},persist:function(){},isPersistent:hc}),t}var Mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Np=Er(Mi),Cl=dt({},Mi,{view:0,detail:0}),LC=Er(Cl),Eh,Dh,no,eu=dt({},Cl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_p,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==no&&(no&&e.type==="mousemove"?(Eh=e.screenX-no.screenX,Dh=e.screenY-no.screenY):Dh=Eh=0,no=e),Eh)},movementY:function(e){return"movementY"in e?e.movementY:Dh}}),Cx=Er(eu),AC=dt({},eu,{dataTransfer:0}),zC=Er(AC),IC=dt({},Cl,{relatedTarget:0}),Th=Er(IC),FC=dt({},Mi,{animationName:0,elapsedTime:0,pseudoElement:0}),HC=Er(FC),WC=dt({},Mi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),BC=Er(WC),UC=dt({},Mi,{data:0}),Ex=Er(UC),qC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GC(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=VC[e])?!!t[e]:!1}function _p(){return GC}var KC=dt({},Cl,{key:function(e){if(e.key){var t=qC[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ic(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?YC[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_p,charCode:function(e){return e.type==="keypress"?Ic(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ic(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),XC=Er(KC),JC=dt({},eu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dx=Er(JC),QC=dt({},Cl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_p}),ZC=Er(QC),eE=dt({},Mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),tE=Er(eE),rE=dt({},eu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),nE=Er(rE),aE=[9,13,27,32],Sp=Xn&&"CompositionEvent"in window,Co=null;Xn&&"documentMode"in document&&(Co=document.documentMode);var sE=Xn&&"TextEvent"in window&&!Co,Ew=Xn&&(!Sp||Co&&8<Co&&11>=Co),Tx=" ",Px=!1;function Dw(e,t){switch(e){case"keyup":return aE.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tw(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Us=!1;function iE(e,t){switch(e){case"compositionend":return Tw(t);case"keypress":return t.which!==32?null:(Px=!0,Tx);case"textInput":return e=t.data,e===Tx&&Px?null:e;default:return null}}function oE(e,t){if(Us)return e==="compositionend"||!Sp&&Dw(e,t)?(e=Cw(),zc=kp=ya=null,Us=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ew&&t.locale!=="ko"?null:t.data;default:return null}}var lE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ox(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!lE[e.type]:t==="textarea"}function Pw(e,t,r,n){lw(n),t=md(t,"onChange"),0<t.length&&(r=new Np("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Eo=null,qo=null;function cE(e){Ww(e,0)}function tu(e){var t=Vs(e);if(tw(t))return e}function dE(e,t){if(e==="change")return t}var Ow=!1;if(Xn){var Ph;if(Xn){var Oh="oninput"in document;if(!Oh){var Mx=document.createElement("div");Mx.setAttribute("oninput","return;"),Oh=typeof Mx.oninput=="function"}Ph=Oh}else Ph=!1;Ow=Ph&&(!document.documentMode||9<document.documentMode)}function $x(){Eo&&(Eo.detachEvent("onpropertychange",Mw),qo=Eo=null)}function Mw(e){if(e.propertyName==="value"&&tu(qo)){var t=[];Pw(t,qo,e,yp(e)),hw(cE,t)}}function uE(e,t,r){e==="focusin"?($x(),Eo=t,qo=r,Eo.attachEvent("onpropertychange",Mw)):e==="focusout"&&$x()}function hE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return tu(qo)}function fE(e,t){if(e==="click")return tu(t)}function mE(e,t){if(e==="input"||e==="change")return tu(t)}function pE(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var on=typeof Object.is=="function"?Object.is:pE;function Yo(e,t){if(on(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!kf.call(t,s)||!on(e[s],t[s]))return!1}return!0}function Rx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Lx(e,t){var r=Rx(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Rx(r)}}function $w(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?$w(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Rw(){for(var e=window,t=od();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=od(e.document)}return t}function Cp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function gE(e){var t=Rw(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&$w(r.ownerDocument.documentElement,r)){if(n!==null&&Cp(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Lx(r,i);var o=Lx(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var xE=Xn&&"documentMode"in document&&11>=document.documentMode,qs=null,Wf=null,Do=null,Bf=!1;function Ax(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Bf||qs==null||qs!==od(n)||(n=qs,"selectionStart"in n&&Cp(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Do&&Yo(Do,n)||(Do=n,n=md(Wf,"onSelect"),0<n.length&&(t=new Np("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=qs)))}function fc(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ys={animationend:fc("Animation","AnimationEnd"),animationiteration:fc("Animation","AnimationIteration"),animationstart:fc("Animation","AnimationStart"),transitionend:fc("Transition","TransitionEnd")},Mh={},Lw={};Xn&&(Lw=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function ru(e){if(Mh[e])return Mh[e];if(!Ys[e])return e;var t=Ys[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Lw)return Mh[e]=t[r];return e}var Aw=ru("animationend"),zw=ru("animationiteration"),Iw=ru("animationstart"),Fw=ru("transitionend"),Hw=new Map,zx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ia(e,t){Hw.set(e,t),Es(t,[e])}for(var $h=0;$h<zx.length;$h++){var Rh=zx[$h],yE=Rh.toLowerCase(),vE=Rh[0].toUpperCase()+Rh.slice(1);Ia(yE,"on"+vE)}Ia(Aw,"onAnimationEnd");Ia(zw,"onAnimationIteration");Ia(Iw,"onAnimationStart");Ia("dblclick","onDoubleClick");Ia("focusin","onFocus");Ia("focusout","onBlur");Ia(Fw,"onTransitionEnd");fi("onMouseEnter",["mouseout","mouseover"]);fi("onMouseLeave",["mouseout","mouseover"]);fi("onPointerEnter",["pointerout","pointerover"]);fi("onPointerLeave",["pointerout","pointerover"]);Es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Es("onBeforeInput",["compositionend","keypress","textInput","paste"]);Es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bE=new Set("cancel close invalid load scroll toggle".split(" ").concat(bo));function Ix(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,yC(n,t,void 0,e),e.currentTarget=null}function Ww(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Ix(s,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Ix(s,l,d),i=c}}}if(cd)throw e=zf,cd=!1,zf=null,e}function Je(e,t){var r=t[Gf];r===void 0&&(r=t[Gf]=new Set);var n=e+"__bubble";r.has(n)||(Bw(t,e,2,!1),r.add(n))}function Lh(e,t,r){var n=0;t&&(n|=4),Bw(r,e,n,t)}var mc="_reactListening"+Math.random().toString(36).slice(2);function Vo(e){if(!e[mc]){e[mc]=!0,Xb.forEach(function(r){r!=="selectionchange"&&(bE.has(r)||Lh(r,!1,e),Lh(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[mc]||(t[mc]=!0,Lh("selectionchange",!1,t))}}function Bw(e,t,r,n){switch(Sw(t)){case 1:var s=$C;break;case 4:s=RC;break;default:s=jp}r=s.bind(null,t,r,e),s=void 0,!Af||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Ah(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ts(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}hw(function(){var d=i,u=yp(r),f=[];e:{var h=Hw.get(e);if(h!==void 0){var x=Np,v=e;switch(e){case"keypress":if(Ic(r)===0)break e;case"keydown":case"keyup":x=XC;break;case"focusin":v="focus",x=Th;break;case"focusout":v="blur",x=Th;break;case"beforeblur":case"afterblur":x=Th;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Cx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=zC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=ZC;break;case Aw:case zw:case Iw:x=HC;break;case Fw:x=tE;break;case"scroll":x=LC;break;case"wheel":x=nE;break;case"copy":case"cut":case"paste":x=BC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Dx}var y=(t&4)!==0,w=!y&&e==="scroll",g=y?h!==null?h+"Capture":null:h;y=[];for(var p=d,j;p!==null;){j=p;var b=j.stateNode;if(j.tag===5&&b!==null&&(j=b,g!==null&&(b=Ho(p,g),b!=null&&y.push(Go(p,b,j)))),w)break;p=p.return}0<y.length&&(h=new x(h,v,null,r,u),f.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",h&&r!==Rf&&(v=r.relatedTarget||r.fromElement)&&(ts(v)||v[Jn]))break e;if((x||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,x?(v=r.relatedTarget||r.toElement,x=d,v=v?ts(v):null,v!==null&&(w=Ds(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(x=null,v=d),x!==v)){if(y=Cx,b="onMouseLeave",g="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(y=Dx,b="onPointerLeave",g="onPointerEnter",p="pointer"),w=x==null?h:Vs(x),j=v==null?h:Vs(v),h=new y(b,p+"leave",x,r,u),h.target=w,h.relatedTarget=j,b=null,ts(u)===d&&(y=new y(g,p+"enter",v,r,u),y.target=j,y.relatedTarget=w,b=y),w=b,x&&v)t:{for(y=x,g=v,p=0,j=y;j;j=Rs(j))p++;for(j=0,b=g;b;b=Rs(b))j++;for(;0<p-j;)y=Rs(y),p--;for(;0<j-p;)g=Rs(g),j--;for(;p--;){if(y===g||g!==null&&y===g.alternate)break t;y=Rs(y),g=Rs(g)}y=null}else y=null;x!==null&&Fx(f,h,x,y,!1),v!==null&&w!==null&&Fx(f,w,v,y,!0)}}e:{if(h=d?Vs(d):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var N=dE;else if(Ox(h))if(Ow)N=mE;else{N=hE;var C=uE}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(N=fE);if(N&&(N=N(e,d))){Pw(f,N,r,u);break e}C&&C(e,h,d),e==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&Tf(h,"number",h.value)}switch(C=d?Vs(d):window,e){case"focusin":(Ox(C)||C.contentEditable==="true")&&(qs=C,Wf=d,Do=null);break;case"focusout":Do=Wf=qs=null;break;case"mousedown":Bf=!0;break;case"contextmenu":case"mouseup":case"dragend":Bf=!1,Ax(f,r,u);break;case"selectionchange":if(xE)break;case"keydown":case"keyup":Ax(f,r,u)}var E;if(Sp)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Us?Dw(e,r)&&(T="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(Ew&&r.locale!=="ko"&&(Us||T!=="onCompositionStart"?T==="onCompositionEnd"&&Us&&(E=Cw()):(ya=u,kp="value"in ya?ya.value:ya.textContent,Us=!0)),C=md(d,T),0<C.length&&(T=new Ex(T,e,null,r,u),f.push({event:T,listeners:C}),E?T.data=E:(E=Tw(r),E!==null&&(T.data=E)))),(E=sE?iE(e,r):oE(e,r))&&(d=md(d,"onBeforeInput"),0<d.length&&(u=new Ex("onBeforeInput","beforeinput",null,r,u),f.push({event:u,listeners:d}),u.data=E))}Ww(f,t)})}function Go(e,t,r){return{instance:e,listener:t,currentTarget:r}}function md(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ho(e,r),i!=null&&n.unshift(Go(e,i,s)),i=Ho(e,t),i!=null&&n.push(Go(e,i,s))),e=e.return}return n}function Rs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Fx(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,s?(c=Ho(r,i),c!=null&&o.unshift(Go(r,c,l))):s||(c=Ho(r,i),c!=null&&o.push(Go(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var wE=/\r\n?/g,jE=/\u0000|\uFFFD/g;function Hx(e){return(typeof e=="string"?e:""+e).replace(wE,`
`).replace(jE,"")}function pc(e,t,r){if(t=Hx(t),Hx(e)!==t&&r)throw Error(J(425))}function pd(){}var Uf=null,qf=null;function Yf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Vf=typeof setTimeout=="function"?setTimeout:void 0,kE=typeof clearTimeout=="function"?clearTimeout:void 0,Wx=typeof Promise=="function"?Promise:void 0,NE=typeof queueMicrotask=="function"?queueMicrotask:typeof Wx<"u"?function(e){return Wx.resolve(null).then(e).catch(_E)}:Vf;function _E(e){setTimeout(function(){throw e})}function zh(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Uo(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Uo(t)}function Sa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Bx(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var $i=Math.random().toString(36).slice(2),bn="__reactFiber$"+$i,Ko="__reactProps$"+$i,Jn="__reactContainer$"+$i,Gf="__reactEvents$"+$i,SE="__reactListeners$"+$i,CE="__reactHandles$"+$i;function ts(e){var t=e[bn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Jn]||r[bn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Bx(e);e!==null;){if(r=e[bn])return r;e=Bx(e)}return t}e=r,r=e.parentNode}return null}function El(e){return e=e[bn]||e[Jn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Vs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(J(33))}function nu(e){return e[Ko]||null}var Kf=[],Gs=-1;function Fa(e){return{current:e}}function et(e){0>Gs||(e.current=Kf[Gs],Kf[Gs]=null,Gs--)}function Xe(e,t){Gs++,Kf[Gs]=e.current,e.current=t}var La={},Kt=Fa(La),ur=Fa(!1),ps=La;function mi(e,t){var r=e.type.contextTypes;if(!r)return La;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function hr(e){return e=e.childContextTypes,e!=null}function gd(){et(ur),et(Kt)}function Ux(e,t,r){if(Kt.current!==La)throw Error(J(168));Xe(Kt,t),Xe(ur,r)}function Uw(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(J(108,uC(e)||"Unknown",s));return dt({},r,n)}function xd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||La,ps=Kt.current,Xe(Kt,e),Xe(ur,ur.current),!0}function qx(e,t,r){var n=e.stateNode;if(!n)throw Error(J(169));r?(e=Uw(e,t,ps),n.__reactInternalMemoizedMergedChildContext=e,et(ur),et(Kt),Xe(Kt,e)):et(ur),Xe(ur,r)}var Hn=null,au=!1,Ih=!1;function qw(e){Hn===null?Hn=[e]:Hn.push(e)}function EE(e){au=!0,qw(e)}function Ha(){if(!Ih&&Hn!==null){Ih=!0;var e=0,t=qe;try{var r=Hn;for(qe=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Hn=null,au=!1}catch(s){throw Hn!==null&&(Hn=Hn.slice(e+1)),gw(vp,Ha),s}finally{qe=t,Ih=!1}}return null}var Ks=[],Xs=0,yd=null,vd=0,Or=[],Mr=0,gs=null,Wn=1,Bn="";function Ja(e,t){Ks[Xs++]=vd,Ks[Xs++]=yd,yd=e,vd=t}function Yw(e,t,r){Or[Mr++]=Wn,Or[Mr++]=Bn,Or[Mr++]=gs,gs=e;var n=Wn;e=Bn;var s=32-nn(n)-1;n&=~(1<<s),r+=1;var i=32-nn(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Wn=1<<32-nn(t)+s|r<<s|n,Bn=i+e}else Wn=1<<i|r<<s|n,Bn=e}function Ep(e){e.return!==null&&(Ja(e,1),Yw(e,1,0))}function Dp(e){for(;e===yd;)yd=Ks[--Xs],Ks[Xs]=null,vd=Ks[--Xs],Ks[Xs]=null;for(;e===gs;)gs=Or[--Mr],Or[Mr]=null,Bn=Or[--Mr],Or[Mr]=null,Wn=Or[--Mr],Or[Mr]=null}var wr=null,br=null,st=!1,en=null;function Vw(e,t){var r=Ar(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Yx(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,wr=e,br=Sa(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,wr=e,br=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=gs!==null?{id:Wn,overflow:Bn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ar(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,wr=e,br=null,!0):!1;default:return!1}}function Xf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Jf(e){if(st){var t=br;if(t){var r=t;if(!Yx(e,t)){if(Xf(e))throw Error(J(418));t=Sa(r.nextSibling);var n=wr;t&&Yx(e,t)?Vw(n,r):(e.flags=e.flags&-4097|2,st=!1,wr=e)}}else{if(Xf(e))throw Error(J(418));e.flags=e.flags&-4097|2,st=!1,wr=e}}}function Vx(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;wr=e}function gc(e){if(e!==wr)return!1;if(!st)return Vx(e),st=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Yf(e.type,e.memoizedProps)),t&&(t=br)){if(Xf(e))throw Gw(),Error(J(418));for(;t;)Vw(e,t),t=Sa(t.nextSibling)}if(Vx(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(J(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){br=Sa(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}br=null}}else br=wr?Sa(e.stateNode.nextSibling):null;return!0}function Gw(){for(var e=br;e;)e=Sa(e.nextSibling)}function pi(){br=wr=null,st=!1}function Tp(e){en===null?en=[e]:en.push(e)}var DE=aa.ReactCurrentBatchConfig;function ao(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(J(309));var n=r.stateNode}if(!n)throw Error(J(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(J(284));if(!r._owner)throw Error(J(290,e))}return e}function xc(e,t){throw e=Object.prototype.toString.call(t),Error(J(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Gx(e){var t=e._init;return t(e._payload)}function Kw(e){function t(g,p){if(e){var j=g.deletions;j===null?(g.deletions=[p],g.flags|=16):j.push(p)}}function r(g,p){if(!e)return null;for(;p!==null;)t(g,p),p=p.sibling;return null}function n(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function s(g,p){return g=Ta(g,p),g.index=0,g.sibling=null,g}function i(g,p,j){return g.index=j,e?(j=g.alternate,j!==null?(j=j.index,j<p?(g.flags|=2,p):j):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,p,j,b){return p===null||p.tag!==6?(p=Yh(j,g.mode,b),p.return=g,p):(p=s(p,j),p.return=g,p)}function c(g,p,j,b){var N=j.type;return N===Bs?u(g,p,j.props.children,b,j.key):p!==null&&(p.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ma&&Gx(N)===p.type)?(b=s(p,j.props),b.ref=ao(g,p,j),b.return=g,b):(b=Yc(j.type,j.key,j.props,null,g.mode,b),b.ref=ao(g,p,j),b.return=g,b)}function d(g,p,j,b){return p===null||p.tag!==4||p.stateNode.containerInfo!==j.containerInfo||p.stateNode.implementation!==j.implementation?(p=Vh(j,g.mode,b),p.return=g,p):(p=s(p,j.children||[]),p.return=g,p)}function u(g,p,j,b,N){return p===null||p.tag!==7?(p=ls(j,g.mode,b,N),p.return=g,p):(p=s(p,j),p.return=g,p)}function f(g,p,j){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Yh(""+p,g.mode,j),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ic:return j=Yc(p.type,p.key,p.props,null,g.mode,j),j.ref=ao(g,null,p),j.return=g,j;case Ws:return p=Vh(p,g.mode,j),p.return=g,p;case ma:var b=p._init;return f(g,b(p._payload),j)}if(yo(p)||Zi(p))return p=ls(p,g.mode,j,null),p.return=g,p;xc(g,p)}return null}function h(g,p,j,b){var N=p!==null?p.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return N!==null?null:l(g,p,""+j,b);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ic:return j.key===N?c(g,p,j,b):null;case Ws:return j.key===N?d(g,p,j,b):null;case ma:return N=j._init,h(g,p,N(j._payload),b)}if(yo(j)||Zi(j))return N!==null?null:u(g,p,j,b,null);xc(g,j)}return null}function x(g,p,j,b,N){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(j)||null,l(p,g,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ic:return g=g.get(b.key===null?j:b.key)||null,c(p,g,b,N);case Ws:return g=g.get(b.key===null?j:b.key)||null,d(p,g,b,N);case ma:var C=b._init;return x(g,p,j,C(b._payload),N)}if(yo(b)||Zi(b))return g=g.get(j)||null,u(p,g,b,N,null);xc(p,b)}return null}function v(g,p,j,b){for(var N=null,C=null,E=p,T=p=0,O=null;E!==null&&T<j.length;T++){E.index>T?(O=E,E=null):O=E.sibling;var M=h(g,E,j[T],b);if(M===null){E===null&&(E=O);break}e&&E&&M.alternate===null&&t(g,E),p=i(M,p,T),C===null?N=M:C.sibling=M,C=M,E=O}if(T===j.length)return r(g,E),st&&Ja(g,T),N;if(E===null){for(;T<j.length;T++)E=f(g,j[T],b),E!==null&&(p=i(E,p,T),C===null?N=E:C.sibling=E,C=E);return st&&Ja(g,T),N}for(E=n(g,E);T<j.length;T++)O=x(E,g,T,j[T],b),O!==null&&(e&&O.alternate!==null&&E.delete(O.key===null?T:O.key),p=i(O,p,T),C===null?N=O:C.sibling=O,C=O);return e&&E.forEach(function(R){return t(g,R)}),st&&Ja(g,T),N}function y(g,p,j,b){var N=Zi(j);if(typeof N!="function")throw Error(J(150));if(j=N.call(j),j==null)throw Error(J(151));for(var C=N=null,E=p,T=p=0,O=null,M=j.next();E!==null&&!M.done;T++,M=j.next()){E.index>T?(O=E,E=null):O=E.sibling;var R=h(g,E,M.value,b);if(R===null){E===null&&(E=O);break}e&&E&&R.alternate===null&&t(g,E),p=i(R,p,T),C===null?N=R:C.sibling=R,C=R,E=O}if(M.done)return r(g,E),st&&Ja(g,T),N;if(E===null){for(;!M.done;T++,M=j.next())M=f(g,M.value,b),M!==null&&(p=i(M,p,T),C===null?N=M:C.sibling=M,C=M);return st&&Ja(g,T),N}for(E=n(g,E);!M.done;T++,M=j.next())M=x(E,g,T,M.value,b),M!==null&&(e&&M.alternate!==null&&E.delete(M.key===null?T:M.key),p=i(M,p,T),C===null?N=M:C.sibling=M,C=M);return e&&E.forEach(function(H){return t(g,H)}),st&&Ja(g,T),N}function w(g,p,j,b){if(typeof j=="object"&&j!==null&&j.type===Bs&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case ic:e:{for(var N=j.key,C=p;C!==null;){if(C.key===N){if(N=j.type,N===Bs){if(C.tag===7){r(g,C.sibling),p=s(C,j.props.children),p.return=g,g=p;break e}}else if(C.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ma&&Gx(N)===C.type){r(g,C.sibling),p=s(C,j.props),p.ref=ao(g,C,j),p.return=g,g=p;break e}r(g,C);break}else t(g,C);C=C.sibling}j.type===Bs?(p=ls(j.props.children,g.mode,b,j.key),p.return=g,g=p):(b=Yc(j.type,j.key,j.props,null,g.mode,b),b.ref=ao(g,p,j),b.return=g,g=b)}return o(g);case Ws:e:{for(C=j.key;p!==null;){if(p.key===C)if(p.tag===4&&p.stateNode.containerInfo===j.containerInfo&&p.stateNode.implementation===j.implementation){r(g,p.sibling),p=s(p,j.children||[]),p.return=g,g=p;break e}else{r(g,p);break}else t(g,p);p=p.sibling}p=Vh(j,g.mode,b),p.return=g,g=p}return o(g);case ma:return C=j._init,w(g,p,C(j._payload),b)}if(yo(j))return v(g,p,j,b);if(Zi(j))return y(g,p,j,b);xc(g,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,p!==null&&p.tag===6?(r(g,p.sibling),p=s(p,j),p.return=g,g=p):(r(g,p),p=Yh(j,g.mode,b),p.return=g,g=p),o(g)):r(g,p)}return w}var gi=Kw(!0),Xw=Kw(!1),bd=Fa(null),wd=null,Js=null,Pp=null;function Op(){Pp=Js=wd=null}function Mp(e){var t=bd.current;et(bd),e._currentValue=t}function Qf(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function ii(e,t){wd=e,Pp=Js=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(dr=!0),e.firstContext=null)}function Fr(e){var t=e._currentValue;if(Pp!==e)if(e={context:e,memoizedValue:t,next:null},Js===null){if(wd===null)throw Error(J(308));Js=e,wd.dependencies={lanes:0,firstContext:e}}else Js=Js.next=e;return t}var rs=null;function $p(e){rs===null?rs=[e]:rs.push(e)}function Jw(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,$p(t)):(r.next=s.next,s.next=r),t.interleaved=r,Qn(e,n)}function Qn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var pa=!1;function Rp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qw(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Yn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ca(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Le&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Qn(e,r)}return s=n.interleaved,s===null?(t.next=t,$p(n)):(t.next=s.next,s.next=t),n.interleaved=t,Qn(e,r)}function Fc(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,bp(e,r)}}function Kx(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function jd(e,t,r,n){var s=e.updateQueue;pa=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,u=d=c=null,l=i;do{var h=l.lane,x=l.eventTime;if((n&h)===h){u!==null&&(u=u.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,y=l;switch(h=t,x=r,y.tag){case 1:if(v=y.payload,typeof v=="function"){f=v.call(x,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,h=typeof v=="function"?v.call(x,f,h):v,h==null)break e;f=dt({},f,h);break e;case 2:pa=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[l]:h.push(l))}else x={eventTime:x,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=x,c=f):u=u.next=x,o|=h;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;h=l,l=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=u,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);ys|=o,e.lanes=o,e.memoizedState=f}}function Xx(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(J(191,s));s.call(n)}}}var Dl={},kn=Fa(Dl),Xo=Fa(Dl),Jo=Fa(Dl);function ns(e){if(e===Dl)throw Error(J(174));return e}function Lp(e,t){switch(Xe(Jo,t),Xe(Xo,e),Xe(kn,Dl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Of(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Of(t,e)}et(kn),Xe(kn,t)}function xi(){et(kn),et(Xo),et(Jo)}function Zw(e){ns(Jo.current);var t=ns(kn.current),r=Of(t,e.type);t!==r&&(Xe(Xo,e),Xe(kn,r))}function Ap(e){Xo.current===e&&(et(kn),et(Xo))}var ot=Fa(0);function kd(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fh=[];function zp(){for(var e=0;e<Fh.length;e++)Fh[e]._workInProgressVersionPrimary=null;Fh.length=0}var Hc=aa.ReactCurrentDispatcher,Hh=aa.ReactCurrentBatchConfig,xs=0,ct=null,_t=null,Pt=null,Nd=!1,To=!1,Qo=0,TE=0;function Wt(){throw Error(J(321))}function Ip(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!on(e[r],t[r]))return!1;return!0}function Fp(e,t,r,n,s,i){if(xs=i,ct=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Hc.current=e===null||e.memoizedState===null?$E:RE,e=r(n,s),To){i=0;do{if(To=!1,Qo=0,25<=i)throw Error(J(301));i+=1,Pt=_t=null,t.updateQueue=null,Hc.current=LE,e=r(n,s)}while(To)}if(Hc.current=_d,t=_t!==null&&_t.next!==null,xs=0,Pt=_t=ct=null,Nd=!1,t)throw Error(J(300));return e}function Hp(){var e=Qo!==0;return Qo=0,e}function xn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?ct.memoizedState=Pt=e:Pt=Pt.next=e,Pt}function Hr(){if(_t===null){var e=ct.alternate;e=e!==null?e.memoizedState:null}else e=_t.next;var t=Pt===null?ct.memoizedState:Pt.next;if(t!==null)Pt=t,_t=e;else{if(e===null)throw Error(J(310));_t=e,e={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Pt===null?ct.memoizedState=Pt=e:Pt=Pt.next=e}return Pt}function Zo(e,t){return typeof t=="function"?t(e):t}function Wh(e){var t=Hr(),r=t.queue;if(r===null)throw Error(J(311));r.lastRenderedReducer=e;var n=_t,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((xs&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var f={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,ct.lanes|=u,ys|=u}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,on(n,t.memoizedState)||(dr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,ct.lanes|=i,ys|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Bh(e){var t=Hr(),r=t.queue;if(r===null)throw Error(J(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);on(i,t.memoizedState)||(dr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function e1(){}function t1(e,t){var r=ct,n=Hr(),s=t(),i=!on(n.memoizedState,s);if(i&&(n.memoizedState=s,dr=!0),n=n.queue,Wp(a1.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Pt!==null&&Pt.memoizedState.tag&1){if(r.flags|=2048,el(9,n1.bind(null,r,n,s,t),void 0,null),Ot===null)throw Error(J(349));xs&30||r1(r,t,s)}return s}function r1(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ct.updateQueue,t===null?(t={lastEffect:null,stores:null},ct.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function n1(e,t,r,n){t.value=r,t.getSnapshot=n,s1(t)&&i1(e)}function a1(e,t,r){return r(function(){s1(t)&&i1(e)})}function s1(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!on(e,r)}catch{return!0}}function i1(e){var t=Qn(e,1);t!==null&&an(t,e,1,-1)}function Jx(e){var t=xn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zo,lastRenderedState:e},t.queue=e,e=e.dispatch=ME.bind(null,ct,e),[t.memoizedState,e]}function el(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ct.updateQueue,t===null?(t={lastEffect:null,stores:null},ct.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function o1(){return Hr().memoizedState}function Wc(e,t,r,n){var s=xn();ct.flags|=e,s.memoizedState=el(1|t,r,void 0,n===void 0?null:n)}function su(e,t,r,n){var s=Hr();n=n===void 0?null:n;var i=void 0;if(_t!==null){var o=_t.memoizedState;if(i=o.destroy,n!==null&&Ip(n,o.deps)){s.memoizedState=el(t,r,i,n);return}}ct.flags|=e,s.memoizedState=el(1|t,r,i,n)}function Qx(e,t){return Wc(8390656,8,e,t)}function Wp(e,t){return su(2048,8,e,t)}function l1(e,t){return su(4,2,e,t)}function c1(e,t){return su(4,4,e,t)}function d1(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function u1(e,t,r){return r=r!=null?r.concat([e]):null,su(4,4,d1.bind(null,t,e),r)}function Bp(){}function h1(e,t){var r=Hr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ip(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function f1(e,t){var r=Hr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ip(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function m1(e,t,r){return xs&21?(on(r,t)||(r=vw(),ct.lanes|=r,ys|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,dr=!0),e.memoizedState=r)}function PE(e,t){var r=qe;qe=r!==0&&4>r?r:4,e(!0);var n=Hh.transition;Hh.transition={};try{e(!1),t()}finally{qe=r,Hh.transition=n}}function p1(){return Hr().memoizedState}function OE(e,t,r){var n=Da(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},g1(e))x1(t,r);else if(r=Jw(e,t,r,n),r!==null){var s=rr();an(r,e,n,s),y1(r,t,n)}}function ME(e,t,r){var n=Da(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(g1(e))x1(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,on(l,o)){var c=t.interleaved;c===null?(s.next=s,$p(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=Jw(e,t,s,n),r!==null&&(s=rr(),an(r,e,n,s),y1(r,t,n))}}function g1(e){var t=e.alternate;return e===ct||t!==null&&t===ct}function x1(e,t){To=Nd=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function y1(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,bp(e,r)}}var _d={readContext:Fr,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},$E={readContext:Fr,useCallback:function(e,t){return xn().memoizedState=[e,t===void 0?null:t],e},useContext:Fr,useEffect:Qx,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Wc(4194308,4,d1.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Wc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Wc(4,2,e,t)},useMemo:function(e,t){var r=xn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=xn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=OE.bind(null,ct,e),[n.memoizedState,e]},useRef:function(e){var t=xn();return e={current:e},t.memoizedState=e},useState:Jx,useDebugValue:Bp,useDeferredValue:function(e){return xn().memoizedState=e},useTransition:function(){var e=Jx(!1),t=e[0];return e=PE.bind(null,e[1]),xn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ct,s=xn();if(st){if(r===void 0)throw Error(J(407));r=r()}else{if(r=t(),Ot===null)throw Error(J(349));xs&30||r1(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Qx(a1.bind(null,n,i,e),[e]),n.flags|=2048,el(9,n1.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=xn(),t=Ot.identifierPrefix;if(st){var r=Bn,n=Wn;r=(n&~(1<<32-nn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Qo++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=TE++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},RE={readContext:Fr,useCallback:h1,useContext:Fr,useEffect:Wp,useImperativeHandle:u1,useInsertionEffect:l1,useLayoutEffect:c1,useMemo:f1,useReducer:Wh,useRef:o1,useState:function(){return Wh(Zo)},useDebugValue:Bp,useDeferredValue:function(e){var t=Hr();return m1(t,_t.memoizedState,e)},useTransition:function(){var e=Wh(Zo)[0],t=Hr().memoizedState;return[e,t]},useMutableSource:e1,useSyncExternalStore:t1,useId:p1,unstable_isNewReconciler:!1},LE={readContext:Fr,useCallback:h1,useContext:Fr,useEffect:Wp,useImperativeHandle:u1,useInsertionEffect:l1,useLayoutEffect:c1,useMemo:f1,useReducer:Bh,useRef:o1,useState:function(){return Bh(Zo)},useDebugValue:Bp,useDeferredValue:function(e){var t=Hr();return _t===null?t.memoizedState=e:m1(t,_t.memoizedState,e)},useTransition:function(){var e=Bh(Zo)[0],t=Hr().memoizedState;return[e,t]},useMutableSource:e1,useSyncExternalStore:t1,useId:p1,unstable_isNewReconciler:!1};function Jr(e,t){if(e&&e.defaultProps){t=dt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Zf(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:dt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var iu={isMounted:function(e){return(e=e._reactInternals)?Ds(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=rr(),s=Da(e),i=Yn(n,s);i.payload=t,r!=null&&(i.callback=r),t=Ca(e,i,s),t!==null&&(an(t,e,s,n),Fc(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=rr(),s=Da(e),i=Yn(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Ca(e,i,s),t!==null&&(an(t,e,s,n),Fc(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=rr(),n=Da(e),s=Yn(r,n);s.tag=2,t!=null&&(s.callback=t),t=Ca(e,s,n),t!==null&&(an(t,e,n,r),Fc(t,e,n))}};function Zx(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Yo(r,n)||!Yo(s,i):!0}function v1(e,t,r){var n=!1,s=La,i=t.contextType;return typeof i=="object"&&i!==null?i=Fr(i):(s=hr(t)?ps:Kt.current,n=t.contextTypes,i=(n=n!=null)?mi(e,s):La),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=iu,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function ey(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&iu.enqueueReplaceState(t,t.state,null)}function em(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Rp(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Fr(i):(i=hr(t)?ps:Kt.current,s.context=mi(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Zf(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&iu.enqueueReplaceState(s,s.state,null),jd(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function yi(e,t){try{var r="",n=t;do r+=dC(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Uh(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function tm(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var AE=typeof WeakMap=="function"?WeakMap:Map;function b1(e,t,r){r=Yn(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Cd||(Cd=!0,um=n),tm(e,t)},r}function w1(e,t,r){r=Yn(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){tm(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){tm(e,t),typeof n!="function"&&(Ea===null?Ea=new Set([this]):Ea.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function ty(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new AE;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=JE.bind(null,e,t,r),t.then(e,e))}function ry(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ny(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Yn(-1,1),t.tag=2,Ca(r,t,1))),r.lanes|=1),e)}var zE=aa.ReactCurrentOwner,dr=!1;function er(e,t,r,n){t.child=e===null?Xw(t,null,r,n):gi(t,e.child,r,n)}function ay(e,t,r,n,s){r=r.render;var i=t.ref;return ii(t,s),n=Fp(e,t,r,n,i,s),r=Hp(),e!==null&&!dr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Zn(e,t,s)):(st&&r&&Ep(t),t.flags|=1,er(e,t,n,s),t.child)}function sy(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!Jp(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,j1(e,t,i,n,s)):(e=Yc(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Yo,r(o,n)&&e.ref===t.ref)return Zn(e,t,s)}return t.flags|=1,e=Ta(i,n),e.ref=t.ref,e.return=t,t.child=e}function j1(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Yo(i,n)&&e.ref===t.ref)if(dr=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(dr=!0);else return t.lanes=e.lanes,Zn(e,t,s)}return rm(e,t,r,n,s)}function k1(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(Zs,vr),vr|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Xe(Zs,vr),vr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Xe(Zs,vr),vr|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Xe(Zs,vr),vr|=n;return er(e,t,s,r),t.child}function N1(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function rm(e,t,r,n,s){var i=hr(r)?ps:Kt.current;return i=mi(t,i),ii(t,s),r=Fp(e,t,r,n,i,s),n=Hp(),e!==null&&!dr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Zn(e,t,s)):(st&&n&&Ep(t),t.flags|=1,er(e,t,r,s),t.child)}function iy(e,t,r,n,s){if(hr(r)){var i=!0;xd(t)}else i=!1;if(ii(t,s),t.stateNode===null)Bc(e,t),v1(t,r,n),em(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=Fr(d):(d=hr(r)?ps:Kt.current,d=mi(t,d));var u=r.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&ey(t,o,n,d),pa=!1;var h=t.memoizedState;o.state=h,jd(t,n,o,s),c=t.memoizedState,l!==n||h!==c||ur.current||pa?(typeof u=="function"&&(Zf(t,r,u,n),c=t.memoizedState),(l=pa||Zx(t,r,l,n,h,c,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Qw(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Jr(t.type,l),o.props=d,f=t.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Fr(c):(c=hr(r)?ps:Kt.current,c=mi(t,c));var x=r.getDerivedStateFromProps;(u=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==c)&&ey(t,o,n,c),pa=!1,h=t.memoizedState,o.state=h,jd(t,n,o,s);var v=t.memoizedState;l!==f||h!==v||ur.current||pa?(typeof x=="function"&&(Zf(t,r,x,n),v=t.memoizedState),(d=pa||Zx(t,r,d,n,h,v,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),o.props=n,o.state=v,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return nm(e,t,r,n,i,s)}function nm(e,t,r,n,s,i){N1(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&qx(t,r,!1),Zn(e,t,i);n=t.stateNode,zE.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=gi(t,e.child,null,i),t.child=gi(t,null,l,i)):er(e,t,l,i),t.memoizedState=n.state,s&&qx(t,r,!0),t.child}function _1(e){var t=e.stateNode;t.pendingContext?Ux(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ux(e,t.context,!1),Lp(e,t.containerInfo)}function oy(e,t,r,n,s){return pi(),Tp(s),t.flags|=256,er(e,t,r,n),t.child}var am={dehydrated:null,treeContext:null,retryLane:0};function sm(e){return{baseLanes:e,cachePool:null,transitions:null}}function S1(e,t,r){var n=t.pendingProps,s=ot.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Xe(ot,s&1),e===null)return Jf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=cu(o,n,0,null),e=ls(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=sm(r),t.memoizedState=am,e):Up(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return IE(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Ta(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ta(l,i):(i=ls(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?sm(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=am,n}return i=e.child,e=i.sibling,n=Ta(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Up(e,t){return t=cu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function yc(e,t,r,n){return n!==null&&Tp(n),gi(t,e.child,null,r),e=Up(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function IE(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Uh(Error(J(422))),yc(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=cu({mode:"visible",children:n.children},s,0,null),i=ls(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&gi(t,e.child,null,o),t.child.memoizedState=sm(o),t.memoizedState=am,i);if(!(t.mode&1))return yc(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(J(419)),n=Uh(i,n,void 0),yc(e,t,o,n)}if(l=(o&e.childLanes)!==0,dr||l){if(n=Ot,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Qn(e,s),an(n,e,s,-1))}return Xp(),n=Uh(Error(J(421))),yc(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=QE.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,br=Sa(s.nextSibling),wr=t,st=!0,en=null,e!==null&&(Or[Mr++]=Wn,Or[Mr++]=Bn,Or[Mr++]=gs,Wn=e.id,Bn=e.overflow,gs=t),t=Up(t,n.children),t.flags|=4096,t)}function ly(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Qf(e.return,t,r)}function qh(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function C1(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(er(e,t,n.children,r),n=ot.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ly(e,r,t);else if(e.tag===19)ly(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Xe(ot,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&kd(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),qh(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&kd(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}qh(t,!0,r,null,i);break;case"together":qh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ys|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(J(153));if(t.child!==null){for(e=t.child,r=Ta(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ta(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function FE(e,t,r){switch(t.tag){case 3:_1(t),pi();break;case 5:Zw(t);break;case 1:hr(t.type)&&xd(t);break;case 4:Lp(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Xe(bd,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Xe(ot,ot.current&1),t.flags|=128,null):r&t.child.childLanes?S1(e,t,r):(Xe(ot,ot.current&1),e=Zn(e,t,r),e!==null?e.sibling:null);Xe(ot,ot.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return C1(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Xe(ot,ot.current),n)break;return null;case 22:case 23:return t.lanes=0,k1(e,t,r)}return Zn(e,t,r)}var E1,im,D1,T1;E1=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};im=function(){};D1=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,ns(kn.current);var i=null;switch(r){case"input":s=Ef(e,s),n=Ef(e,n),i=[];break;case"select":s=dt({},s,{value:void 0}),n=dt({},n,{value:void 0}),i=[];break;case"textarea":s=Pf(e,s),n=Pf(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=pd)}Mf(r,n);var o;r=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Io.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=s!=null?s[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Io.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Je("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};T1=function(e,t,r,n){r!==n&&(t.flags|=4)};function so(e,t){if(!st)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Bt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function HE(e,t,r){var n=t.pendingProps;switch(Dp(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(t),null;case 1:return hr(t.type)&&gd(),Bt(t),null;case 3:return n=t.stateNode,xi(),et(ur),et(Kt),zp(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(gc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,en!==null&&(mm(en),en=null))),im(e,t),Bt(t),null;case 5:Ap(t);var s=ns(Jo.current);if(r=t.type,e!==null&&t.stateNode!=null)D1(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(J(166));return Bt(t),null}if(e=ns(kn.current),gc(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[bn]=t,n[Ko]=i,e=(t.mode&1)!==0,r){case"dialog":Je("cancel",n),Je("close",n);break;case"iframe":case"object":case"embed":Je("load",n);break;case"video":case"audio":for(s=0;s<bo.length;s++)Je(bo[s],n);break;case"source":Je("error",n);break;case"img":case"image":case"link":Je("error",n),Je("load",n);break;case"details":Je("toggle",n);break;case"input":xx(n,i),Je("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Je("invalid",n);break;case"textarea":vx(n,i),Je("invalid",n)}Mf(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&pc(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&pc(n.textContent,l,e),s=["children",""+l]):Io.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Je("scroll",n)}switch(r){case"input":oc(n),yx(n,i,!0);break;case"textarea":oc(n),bx(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=pd)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=aw(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[bn]=t,e[Ko]=n,E1(e,t,!1,!1),t.stateNode=e;e:{switch(o=$f(r,n),r){case"dialog":Je("cancel",e),Je("close",e),s=n;break;case"iframe":case"object":case"embed":Je("load",e),s=n;break;case"video":case"audio":for(s=0;s<bo.length;s++)Je(bo[s],e);s=n;break;case"source":Je("error",e),s=n;break;case"img":case"image":case"link":Je("error",e),Je("load",e),s=n;break;case"details":Je("toggle",e),s=n;break;case"input":xx(e,n),s=Ef(e,n),Je("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=dt({},n,{value:void 0}),Je("invalid",e);break;case"textarea":vx(e,n),s=Pf(e,n),Je("invalid",e);break;default:s=n}Mf(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?ow(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&sw(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Fo(e,c):typeof c=="number"&&Fo(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Io.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Je("scroll",e):c!=null&&mp(e,i,c,o))}switch(r){case"input":oc(e),yx(e,n,!1);break;case"textarea":oc(e),bx(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Ra(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?ri(e,!!n.multiple,i,!1):n.defaultValue!=null&&ri(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=pd)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Bt(t),null;case 6:if(e&&t.stateNode!=null)T1(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(J(166));if(r=ns(Jo.current),ns(kn.current),gc(t)){if(n=t.stateNode,r=t.memoizedProps,n[bn]=t,(i=n.nodeValue!==r)&&(e=wr,e!==null))switch(e.tag){case 3:pc(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&pc(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[bn]=t,t.stateNode=n}return Bt(t),null;case 13:if(et(ot),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(st&&br!==null&&t.mode&1&&!(t.flags&128))Gw(),pi(),t.flags|=98560,i=!1;else if(i=gc(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(J(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(J(317));i[bn]=t}else pi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Bt(t),i=!1}else en!==null&&(mm(en),en=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ot.current&1?St===0&&(St=3):Xp())),t.updateQueue!==null&&(t.flags|=4),Bt(t),null);case 4:return xi(),im(e,t),e===null&&Vo(t.stateNode.containerInfo),Bt(t),null;case 10:return Mp(t.type._context),Bt(t),null;case 17:return hr(t.type)&&gd(),Bt(t),null;case 19:if(et(ot),i=t.memoizedState,i===null)return Bt(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)so(i,!1);else{if(St!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=kd(e),o!==null){for(t.flags|=128,so(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Xe(ot,ot.current&1|2),t.child}e=e.sibling}i.tail!==null&&xt()>vi&&(t.flags|=128,n=!0,so(i,!1),t.lanes=4194304)}else{if(!n)if(e=kd(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),so(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!st)return Bt(t),null}else 2*xt()-i.renderingStartTime>vi&&r!==1073741824&&(t.flags|=128,n=!0,so(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=xt(),t.sibling=null,r=ot.current,Xe(ot,n?r&1|2:r&1),t):(Bt(t),null);case 22:case 23:return Kp(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?vr&1073741824&&(Bt(t),t.subtreeFlags&6&&(t.flags|=8192)):Bt(t),null;case 24:return null;case 25:return null}throw Error(J(156,t.tag))}function WE(e,t){switch(Dp(t),t.tag){case 1:return hr(t.type)&&gd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return xi(),et(ur),et(Kt),zp(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ap(t),null;case 13:if(et(ot),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(J(340));pi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return et(ot),null;case 4:return xi(),null;case 10:return Mp(t.type._context),null;case 22:case 23:return Kp(),null;case 24:return null;default:return null}}var vc=!1,Vt=!1,BE=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Qs(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ut(e,t,n)}else r.current=null}function om(e,t,r){try{r()}catch(n){ut(e,t,n)}}var cy=!1;function UE(e,t){if(Uf=hd,e=Rw(),Cp(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,f=e,h=null;t:for(;;){for(var x;f!==r||s!==0&&f.nodeType!==3||(l=o+s),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(x=f.firstChild)!==null;)h=f,f=x;for(;;){if(f===e)break t;if(h===r&&++d===s&&(l=o),h===i&&++u===n&&(c=o),(x=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=x}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(qf={focusedElem:e,selectionRange:r},hd=!1,ue=t;ue!==null;)if(t=ue,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ue=e;else for(;ue!==null;){t=ue;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,w=v.memoizedState,g=t.stateNode,p=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:Jr(t.type,y),w);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var j=t.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(b){ut(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,ue=e;break}ue=t.return}return v=cy,cy=!1,v}function Po(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&om(t,r,i)}s=s.next}while(s!==n)}}function ou(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function lm(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function P1(e){var t=e.alternate;t!==null&&(e.alternate=null,P1(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[bn],delete t[Ko],delete t[Gf],delete t[SE],delete t[CE])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function O1(e){return e.tag===5||e.tag===3||e.tag===4}function dy(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||O1(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=pd));else if(n!==4&&(e=e.child,e!==null))for(cm(e,t,r),e=e.sibling;e!==null;)cm(e,t,r),e=e.sibling}function dm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(dm(e,t,r),e=e.sibling;e!==null;)dm(e,t,r),e=e.sibling}var At=null,Qr=!1;function da(e,t,r){for(r=r.child;r!==null;)M1(e,t,r),r=r.sibling}function M1(e,t,r){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(Zd,r)}catch{}switch(r.tag){case 5:Vt||Qs(r,t);case 6:var n=At,s=Qr;At=null,da(e,t,r),At=n,Qr=s,At!==null&&(Qr?(e=At,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):At.removeChild(r.stateNode));break;case 18:At!==null&&(Qr?(e=At,r=r.stateNode,e.nodeType===8?zh(e.parentNode,r):e.nodeType===1&&zh(e,r),Uo(e)):zh(At,r.stateNode));break;case 4:n=At,s=Qr,At=r.stateNode.containerInfo,Qr=!0,da(e,t,r),At=n,Qr=s;break;case 0:case 11:case 14:case 15:if(!Vt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&om(r,t,o),s=s.next}while(s!==n)}da(e,t,r);break;case 1:if(!Vt&&(Qs(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ut(r,t,l)}da(e,t,r);break;case 21:da(e,t,r);break;case 22:r.mode&1?(Vt=(n=Vt)||r.memoizedState!==null,da(e,t,r),Vt=n):da(e,t,r);break;default:da(e,t,r)}}function uy(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new BE),t.forEach(function(n){var s=ZE.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Kr(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:At=l.stateNode,Qr=!1;break e;case 3:At=l.stateNode.containerInfo,Qr=!0;break e;case 4:At=l.stateNode.containerInfo,Qr=!0;break e}l=l.return}if(At===null)throw Error(J(160));M1(i,o,s),At=null,Qr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){ut(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)$1(t,e),t=t.sibling}function $1(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Kr(t,e),gn(e),n&4){try{Po(3,e,e.return),ou(3,e)}catch(y){ut(e,e.return,y)}try{Po(5,e,e.return)}catch(y){ut(e,e.return,y)}}break;case 1:Kr(t,e),gn(e),n&512&&r!==null&&Qs(r,r.return);break;case 5:if(Kr(t,e),gn(e),n&512&&r!==null&&Qs(r,r.return),e.flags&32){var s=e.stateNode;try{Fo(s,"")}catch(y){ut(e,e.return,y)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&rw(s,i),$f(l,o);var d=$f(l,i);for(o=0;o<c.length;o+=2){var u=c[o],f=c[o+1];u==="style"?ow(s,f):u==="dangerouslySetInnerHTML"?sw(s,f):u==="children"?Fo(s,f):mp(s,u,f,d)}switch(l){case"input":Df(s,i);break;case"textarea":nw(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?ri(s,!!i.multiple,x,!1):h!==!!i.multiple&&(i.defaultValue!=null?ri(s,!!i.multiple,i.defaultValue,!0):ri(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ko]=i}catch(y){ut(e,e.return,y)}}break;case 6:if(Kr(t,e),gn(e),n&4){if(e.stateNode===null)throw Error(J(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(y){ut(e,e.return,y)}}break;case 3:if(Kr(t,e),gn(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Uo(t.containerInfo)}catch(y){ut(e,e.return,y)}break;case 4:Kr(t,e),gn(e);break;case 13:Kr(t,e),gn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Vp=xt())),n&4&&uy(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Vt=(d=Vt)||u,Kr(t,e),Vt=d):Kr(t,e),gn(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(ue=e,u=e.child;u!==null;){for(f=ue=u;ue!==null;){switch(h=ue,x=h.child,h.tag){case 0:case 11:case 14:case 15:Po(4,h,h.return);break;case 1:Qs(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){ut(n,r,y)}}break;case 5:Qs(h,h.return);break;case 22:if(h.memoizedState!==null){fy(f);continue}}x!==null?(x.return=h,ue=x):fy(f)}u=u.sibling}e:for(u=null,f=e;;){if(f.tag===5){if(u===null){u=f;try{s=f.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=iw("display",o))}catch(y){ut(e,e.return,y)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(y){ut(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Kr(t,e),gn(e),n&4&&uy(e);break;case 21:break;default:Kr(t,e),gn(e)}}function gn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(O1(r)){var n=r;break e}r=r.return}throw Error(J(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Fo(s,""),n.flags&=-33);var i=dy(e);dm(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=dy(e);cm(e,l,o);break;default:throw Error(J(161))}}catch(c){ut(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function qE(e,t,r){ue=e,R1(e)}function R1(e,t,r){for(var n=(e.mode&1)!==0;ue!==null;){var s=ue,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||vc;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Vt;l=vc;var d=Vt;if(vc=o,(Vt=c)&&!d)for(ue=s;ue!==null;)o=ue,c=o.child,o.tag===22&&o.memoizedState!==null?my(s):c!==null?(c.return=o,ue=c):my(s);for(;i!==null;)ue=i,R1(i),i=i.sibling;ue=s,vc=l,Vt=d}hy(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ue=i):hy(e)}}function hy(e){for(;ue!==null;){var t=ue;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Vt||ou(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Vt)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Jr(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Xx(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Xx(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Uo(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Vt||t.flags&512&&lm(t)}catch(h){ut(t,t.return,h)}}if(t===e){ue=null;break}if(r=t.sibling,r!==null){r.return=t.return,ue=r;break}ue=t.return}}function fy(e){for(;ue!==null;){var t=ue;if(t===e){ue=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ue=r;break}ue=t.return}}function my(e){for(;ue!==null;){var t=ue;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ou(4,t)}catch(c){ut(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){ut(t,s,c)}}var i=t.return;try{lm(t)}catch(c){ut(t,i,c)}break;case 5:var o=t.return;try{lm(t)}catch(c){ut(t,o,c)}}}catch(c){ut(t,t.return,c)}if(t===e){ue=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ue=l;break}ue=t.return}}var YE=Math.ceil,Sd=aa.ReactCurrentDispatcher,qp=aa.ReactCurrentOwner,Ir=aa.ReactCurrentBatchConfig,Le=0,Ot=null,bt=null,zt=0,vr=0,Zs=Fa(0),St=0,tl=null,ys=0,lu=0,Yp=0,Oo=null,lr=null,Vp=0,vi=1/0,In=null,Cd=!1,um=null,Ea=null,bc=!1,va=null,Ed=0,Mo=0,hm=null,Uc=-1,qc=0;function rr(){return Le&6?xt():Uc!==-1?Uc:Uc=xt()}function Da(e){return e.mode&1?Le&2&&zt!==0?zt&-zt:DE.transition!==null?(qc===0&&(qc=vw()),qc):(e=qe,e!==0||(e=window.event,e=e===void 0?16:Sw(e.type)),e):1}function an(e,t,r,n){if(50<Mo)throw Mo=0,hm=null,Error(J(185));Sl(e,r,n),(!(Le&2)||e!==Ot)&&(e===Ot&&(!(Le&2)&&(lu|=r),St===4&&xa(e,zt)),fr(e,n),r===1&&Le===0&&!(t.mode&1)&&(vi=xt()+500,au&&Ha()))}function fr(e,t){var r=e.callbackNode;DC(e,t);var n=ud(e,e===Ot?zt:0);if(n===0)r!==null&&kx(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&kx(r),t===1)e.tag===0?EE(py.bind(null,e)):qw(py.bind(null,e)),NE(function(){!(Le&6)&&Ha()}),r=null;else{switch(bw(n)){case 1:r=vp;break;case 4:r=xw;break;case 16:r=dd;break;case 536870912:r=yw;break;default:r=dd}r=B1(r,L1.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function L1(e,t){if(Uc=-1,qc=0,Le&6)throw Error(J(327));var r=e.callbackNode;if(oi()&&e.callbackNode!==r)return null;var n=ud(e,e===Ot?zt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Dd(e,n);else{t=n;var s=Le;Le|=2;var i=z1();(Ot!==e||zt!==t)&&(In=null,vi=xt()+500,os(e,t));do try{KE();break}catch(l){A1(e,l)}while(!0);Op(),Sd.current=i,Le=s,bt!==null?t=0:(Ot=null,zt=0,t=St)}if(t!==0){if(t===2&&(s=If(e),s!==0&&(n=s,t=fm(e,s))),t===1)throw r=tl,os(e,0),xa(e,n),fr(e,xt()),r;if(t===6)xa(e,n);else{if(s=e.current.alternate,!(n&30)&&!VE(s)&&(t=Dd(e,n),t===2&&(i=If(e),i!==0&&(n=i,t=fm(e,i))),t===1))throw r=tl,os(e,0),xa(e,n),fr(e,xt()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(J(345));case 2:Qa(e,lr,In);break;case 3:if(xa(e,n),(n&130023424)===n&&(t=Vp+500-xt(),10<t)){if(ud(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){rr(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Vf(Qa.bind(null,e,lr,In),t);break}Qa(e,lr,In);break;case 4:if(xa(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-nn(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=xt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*YE(n/1960))-n,10<n){e.timeoutHandle=Vf(Qa.bind(null,e,lr,In),n);break}Qa(e,lr,In);break;case 5:Qa(e,lr,In);break;default:throw Error(J(329))}}}return fr(e,xt()),e.callbackNode===r?L1.bind(null,e):null}function fm(e,t){var r=Oo;return e.current.memoizedState.isDehydrated&&(os(e,t).flags|=256),e=Dd(e,t),e!==2&&(t=lr,lr=r,t!==null&&mm(t)),e}function mm(e){lr===null?lr=e:lr.push.apply(lr,e)}function VE(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!on(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function xa(e,t){for(t&=~Yp,t&=~lu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-nn(t),n=1<<r;e[r]=-1,t&=~n}}function py(e){if(Le&6)throw Error(J(327));oi();var t=ud(e,0);if(!(t&1))return fr(e,xt()),null;var r=Dd(e,t);if(e.tag!==0&&r===2){var n=If(e);n!==0&&(t=n,r=fm(e,n))}if(r===1)throw r=tl,os(e,0),xa(e,t),fr(e,xt()),r;if(r===6)throw Error(J(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qa(e,lr,In),fr(e,xt()),null}function Gp(e,t){var r=Le;Le|=1;try{return e(t)}finally{Le=r,Le===0&&(vi=xt()+500,au&&Ha())}}function vs(e){va!==null&&va.tag===0&&!(Le&6)&&oi();var t=Le;Le|=1;var r=Ir.transition,n=qe;try{if(Ir.transition=null,qe=1,e)return e()}finally{qe=n,Ir.transition=r,Le=t,!(Le&6)&&Ha()}}function Kp(){vr=Zs.current,et(Zs)}function os(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,kE(r)),bt!==null)for(r=bt.return;r!==null;){var n=r;switch(Dp(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&gd();break;case 3:xi(),et(ur),et(Kt),zp();break;case 5:Ap(n);break;case 4:xi();break;case 13:et(ot);break;case 19:et(ot);break;case 10:Mp(n.type._context);break;case 22:case 23:Kp()}r=r.return}if(Ot=e,bt=e=Ta(e.current,null),zt=vr=t,St=0,tl=null,Yp=lu=ys=0,lr=Oo=null,rs!==null){for(t=0;t<rs.length;t++)if(r=rs[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}rs=null}return e}function A1(e,t){do{var r=bt;try{if(Op(),Hc.current=_d,Nd){for(var n=ct.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Nd=!1}if(xs=0,Pt=_t=ct=null,To=!1,Qo=0,qp.current=null,r===null||r.return===null){St=1,tl=t,bt=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=zt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var x=ry(o);if(x!==null){x.flags&=-257,ny(x,o,l,i,t),x.mode&1&&ty(i,d,t),t=x,c=d;var v=t.updateQueue;if(v===null){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}else{if(!(t&1)){ty(i,d,t),Xp();break e}c=Error(J(426))}}else if(st&&l.mode&1){var w=ry(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),ny(w,o,l,i,t),Tp(yi(c,l));break e}}i=c=yi(c,l),St!==4&&(St=2),Oo===null?Oo=[i]:Oo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=b1(i,c,t);Kx(i,g);break e;case 1:l=c;var p=i.type,j=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Ea===null||!Ea.has(j)))){i.flags|=65536,t&=-t,i.lanes|=t;var b=w1(i,l,t);Kx(i,b);break e}}i=i.return}while(i!==null)}F1(r)}catch(N){t=N,bt===r&&r!==null&&(bt=r=r.return);continue}break}while(!0)}function z1(){var e=Sd.current;return Sd.current=_d,e===null?_d:e}function Xp(){(St===0||St===3||St===2)&&(St=4),Ot===null||!(ys&268435455)&&!(lu&268435455)||xa(Ot,zt)}function Dd(e,t){var r=Le;Le|=2;var n=z1();(Ot!==e||zt!==t)&&(In=null,os(e,t));do try{GE();break}catch(s){A1(e,s)}while(!0);if(Op(),Le=r,Sd.current=n,bt!==null)throw Error(J(261));return Ot=null,zt=0,St}function GE(){for(;bt!==null;)I1(bt)}function KE(){for(;bt!==null&&!bC();)I1(bt)}function I1(e){var t=W1(e.alternate,e,vr);e.memoizedProps=e.pendingProps,t===null?F1(e):bt=t,qp.current=null}function F1(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=WE(r,t),r!==null){r.flags&=32767,bt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{St=6,bt=null;return}}else if(r=HE(r,t,vr),r!==null){bt=r;return}if(t=t.sibling,t!==null){bt=t;return}bt=t=e}while(t!==null);St===0&&(St=5)}function Qa(e,t,r){var n=qe,s=Ir.transition;try{Ir.transition=null,qe=1,XE(e,t,r,n)}finally{Ir.transition=s,qe=n}return null}function XE(e,t,r,n){do oi();while(va!==null);if(Le&6)throw Error(J(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(J(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(TC(e,i),e===Ot&&(bt=Ot=null,zt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||bc||(bc=!0,B1(dd,function(){return oi(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ir.transition,Ir.transition=null;var o=qe;qe=1;var l=Le;Le|=4,qp.current=null,UE(e,r),$1(r,e),gE(qf),hd=!!Uf,qf=Uf=null,e.current=r,qE(r),wC(),Le=l,qe=o,Ir.transition=i}else e.current=r;if(bc&&(bc=!1,va=e,Ed=s),i=e.pendingLanes,i===0&&(Ea=null),NC(r.stateNode),fr(e,xt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Cd)throw Cd=!1,e=um,um=null,e;return Ed&1&&e.tag!==0&&oi(),i=e.pendingLanes,i&1?e===hm?Mo++:(Mo=0,hm=e):Mo=0,Ha(),null}function oi(){if(va!==null){var e=bw(Ed),t=Ir.transition,r=qe;try{if(Ir.transition=null,qe=16>e?16:e,va===null)var n=!1;else{if(e=va,va=null,Ed=0,Le&6)throw Error(J(331));var s=Le;for(Le|=4,ue=e.current;ue!==null;){var i=ue,o=i.child;if(ue.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ue=d;ue!==null;){var u=ue;switch(u.tag){case 0:case 11:case 15:Po(8,u,i)}var f=u.child;if(f!==null)f.return=u,ue=f;else for(;ue!==null;){u=ue;var h=u.sibling,x=u.return;if(P1(u),u===d){ue=null;break}if(h!==null){h.return=x,ue=h;break}ue=x}}}var v=i.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}ue=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ue=o;else e:for(;ue!==null;){if(i=ue,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Po(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,ue=g;break e}ue=i.return}}var p=e.current;for(ue=p;ue!==null;){o=ue;var j=o.child;if(o.subtreeFlags&2064&&j!==null)j.return=o,ue=j;else e:for(o=p;ue!==null;){if(l=ue,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ou(9,l)}}catch(N){ut(l,l.return,N)}if(l===o){ue=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,ue=b;break e}ue=l.return}}if(Le=s,Ha(),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(Zd,e)}catch{}n=!0}return n}finally{qe=r,Ir.transition=t}}return!1}function gy(e,t,r){t=yi(r,t),t=b1(e,t,1),e=Ca(e,t,1),t=rr(),e!==null&&(Sl(e,1,t),fr(e,t))}function ut(e,t,r){if(e.tag===3)gy(e,e,r);else for(;t!==null;){if(t.tag===3){gy(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ea===null||!Ea.has(n))){e=yi(r,e),e=w1(t,e,1),t=Ca(t,e,1),e=rr(),t!==null&&(Sl(t,1,e),fr(t,e));break}}t=t.return}}function JE(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=rr(),e.pingedLanes|=e.suspendedLanes&r,Ot===e&&(zt&r)===r&&(St===4||St===3&&(zt&130023424)===zt&&500>xt()-Vp?os(e,0):Yp|=r),fr(e,t)}function H1(e,t){t===0&&(e.mode&1?(t=dc,dc<<=1,!(dc&130023424)&&(dc=4194304)):t=1);var r=rr();e=Qn(e,t),e!==null&&(Sl(e,t,r),fr(e,r))}function QE(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),H1(e,r)}function ZE(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(J(314))}n!==null&&n.delete(t),H1(e,r)}var W1;W1=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ur.current)dr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return dr=!1,FE(e,t,r);dr=!!(e.flags&131072)}else dr=!1,st&&t.flags&1048576&&Yw(t,vd,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Bc(e,t),e=t.pendingProps;var s=mi(t,Kt.current);ii(t,r),s=Fp(null,t,n,e,s,r);var i=Hp();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,hr(n)?(i=!0,xd(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Rp(t),s.updater=iu,t.stateNode=s,s._reactInternals=t,em(t,n,e,r),t=nm(null,t,n,!0,i,r)):(t.tag=0,st&&i&&Ep(t),er(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Bc(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=t4(n),e=Jr(n,e),s){case 0:t=rm(null,t,n,e,r);break e;case 1:t=iy(null,t,n,e,r);break e;case 11:t=ay(null,t,n,e,r);break e;case 14:t=sy(null,t,n,Jr(n.type,e),r);break e}throw Error(J(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Jr(n,s),rm(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Jr(n,s),iy(e,t,n,s,r);case 3:e:{if(_1(t),e===null)throw Error(J(387));n=t.pendingProps,i=t.memoizedState,s=i.element,Qw(e,t),jd(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=yi(Error(J(423)),t),t=oy(e,t,n,r,s);break e}else if(n!==s){s=yi(Error(J(424)),t),t=oy(e,t,n,r,s);break e}else for(br=Sa(t.stateNode.containerInfo.firstChild),wr=t,st=!0,en=null,r=Xw(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(pi(),n===s){t=Zn(e,t,r);break e}er(e,t,n,r)}t=t.child}return t;case 5:return Zw(t),e===null&&Jf(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Yf(n,s)?o=null:i!==null&&Yf(n,i)&&(t.flags|=32),N1(e,t),er(e,t,o,r),t.child;case 6:return e===null&&Jf(t),null;case 13:return S1(e,t,r);case 4:return Lp(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=gi(t,null,n,r):er(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Jr(n,s),ay(e,t,n,s,r);case 7:return er(e,t,t.pendingProps,r),t.child;case 8:return er(e,t,t.pendingProps.children,r),t.child;case 12:return er(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Xe(bd,n._currentValue),n._currentValue=o,i!==null)if(on(i.value,o)){if(i.children===s.children&&!ur.current){t=Zn(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Yn(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Qf(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(J(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Qf(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}er(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,ii(t,r),s=Fr(s),n=n(s),t.flags|=1,er(e,t,n,r),t.child;case 14:return n=t.type,s=Jr(n,t.pendingProps),s=Jr(n.type,s),sy(e,t,n,s,r);case 15:return j1(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Jr(n,s),Bc(e,t),t.tag=1,hr(n)?(e=!0,xd(t)):e=!1,ii(t,r),v1(t,n,s),em(t,n,s,r),nm(null,t,n,!0,e,r);case 19:return C1(e,t,r);case 22:return k1(e,t,r)}throw Error(J(156,t.tag))};function B1(e,t){return gw(e,t)}function e4(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ar(e,t,r,n){return new e4(e,t,r,n)}function Jp(e){return e=e.prototype,!(!e||!e.isReactComponent)}function t4(e){if(typeof e=="function")return Jp(e)?1:0;if(e!=null){if(e=e.$$typeof,e===gp)return 11;if(e===xp)return 14}return 2}function Ta(e,t){var r=e.alternate;return r===null?(r=Ar(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Yc(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")Jp(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Bs:return ls(r.children,s,i,t);case pp:o=8,s|=8;break;case Nf:return e=Ar(12,r,t,s|2),e.elementType=Nf,e.lanes=i,e;case _f:return e=Ar(13,r,t,s),e.elementType=_f,e.lanes=i,e;case Sf:return e=Ar(19,r,t,s),e.elementType=Sf,e.lanes=i,e;case Zb:return cu(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Jb:o=10;break e;case Qb:o=9;break e;case gp:o=11;break e;case xp:o=14;break e;case ma:o=16,n=null;break e}throw Error(J(130,e==null?e:typeof e,""))}return t=Ar(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function ls(e,t,r,n){return e=Ar(7,e,n,t),e.lanes=r,e}function cu(e,t,r,n){return e=Ar(22,e,n,t),e.elementType=Zb,e.lanes=r,e.stateNode={isHidden:!1},e}function Yh(e,t,r){return e=Ar(6,e,null,t),e.lanes=r,e}function Vh(e,t,r){return t=Ar(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function r4(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ch(0),this.expirationTimes=Ch(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ch(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Qp(e,t,r,n,s,i,o,l,c){return e=new r4(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ar(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rp(i),e}function n4(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ws,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function U1(e){if(!e)return La;e=e._reactInternals;e:{if(Ds(e)!==e||e.tag!==1)throw Error(J(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(hr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(J(171))}if(e.tag===1){var r=e.type;if(hr(r))return Uw(e,r,t)}return t}function q1(e,t,r,n,s,i,o,l,c){return e=Qp(r,n,!0,e,s,i,o,l,c),e.context=U1(null),r=e.current,n=rr(),s=Da(r),i=Yn(n,s),i.callback=t??null,Ca(r,i,s),e.current.lanes=s,Sl(e,s,n),fr(e,n),e}function du(e,t,r,n){var s=t.current,i=rr(),o=Da(s);return r=U1(r),t.context===null?t.context=r:t.pendingContext=r,t=Yn(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Ca(s,t,o),e!==null&&(an(e,s,o,i),Fc(e,s,o)),o}function Td(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function xy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Zp(e,t){xy(e,t),(e=e.alternate)&&xy(e,t)}function a4(){return null}var Y1=typeof reportError=="function"?reportError:function(e){console.error(e)};function eg(e){this._internalRoot=e}uu.prototype.render=eg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(J(409));du(e,t,null,null)};uu.prototype.unmount=eg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;vs(function(){du(null,e,null,null)}),t[Jn]=null}};function uu(e){this._internalRoot=e}uu.prototype.unstable_scheduleHydration=function(e){if(e){var t=kw();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ga.length&&t!==0&&t<ga[r].priority;r++);ga.splice(r,0,e),r===0&&_w(e)}};function tg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function hu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function yy(){}function s4(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var d=Td(o);i.call(d)}}var o=q1(t,n,e,0,null,!1,!1,"",yy);return e._reactRootContainer=o,e[Jn]=o.current,Vo(e.nodeType===8?e.parentNode:e),vs(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var d=Td(c);l.call(d)}}var c=Qp(e,0,!1,null,null,!1,!1,"",yy);return e._reactRootContainer=c,e[Jn]=c.current,Vo(e.nodeType===8?e.parentNode:e),vs(function(){du(t,c,r,n)}),c}function fu(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Td(o);l.call(c)}}du(t,o,e,s)}else o=s4(r,t,e,s,n);return Td(o)}ww=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=vo(t.pendingLanes);r!==0&&(bp(t,r|1),fr(t,xt()),!(Le&6)&&(vi=xt()+500,Ha()))}break;case 13:vs(function(){var n=Qn(e,1);if(n!==null){var s=rr();an(n,e,1,s)}}),Zp(e,1)}};wp=function(e){if(e.tag===13){var t=Qn(e,134217728);if(t!==null){var r=rr();an(t,e,134217728,r)}Zp(e,134217728)}};jw=function(e){if(e.tag===13){var t=Da(e),r=Qn(e,t);if(r!==null){var n=rr();an(r,e,t,n)}Zp(e,t)}};kw=function(){return qe};Nw=function(e,t){var r=qe;try{return qe=e,t()}finally{qe=r}};Lf=function(e,t,r){switch(t){case"input":if(Df(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=nu(n);if(!s)throw Error(J(90));tw(n),Df(n,s)}}}break;case"textarea":nw(e,r);break;case"select":t=r.value,t!=null&&ri(e,!!r.multiple,t,!1)}};dw=Gp;uw=vs;var i4={usingClientEntryPoint:!1,Events:[El,Vs,nu,lw,cw,Gp]},io={findFiberByHostInstance:ts,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},o4={bundleType:io.bundleType,version:io.version,rendererPackageName:io.rendererPackageName,rendererConfig:io.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:aa.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=mw(e),e===null?null:e.stateNode},findFiberByHostInstance:io.findFiberByHostInstance||a4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wc.isDisabled&&wc.supportsFiber)try{Zd=wc.inject(o4),jn=wc}catch{}}Cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=i4;Cr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tg(t))throw Error(J(200));return n4(e,t,null,r)};Cr.createRoot=function(e,t){if(!tg(e))throw Error(J(299));var r=!1,n="",s=Y1;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Qp(e,1,!1,null,null,r,!1,n,s),e[Jn]=t.current,Vo(e.nodeType===8?e.parentNode:e),new eg(t)};Cr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(J(188)):(e=Object.keys(e).join(","),Error(J(268,e)));return e=mw(t),e=e===null?null:e.stateNode,e};Cr.flushSync=function(e){return vs(e)};Cr.hydrate=function(e,t,r){if(!hu(t))throw Error(J(200));return fu(null,e,t,!0,r)};Cr.hydrateRoot=function(e,t,r){if(!tg(e))throw Error(J(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=Y1;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=q1(t,null,e,1,r??null,s,!1,i,o),e[Jn]=t.current,Vo(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new uu(t)};Cr.render=function(e,t,r){if(!hu(t))throw Error(J(200));return fu(null,e,t,!1,r)};Cr.unmountComponentAtNode=function(e){if(!hu(e))throw Error(J(40));return e._reactRootContainer?(vs(function(){fu(null,null,e,!1,function(){e._reactRootContainer=null,e[Jn]=null})}),!0):!1};Cr.unstable_batchedUpdates=Gp;Cr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!hu(r))throw Error(J(200));if(e==null||e._reactInternals===void 0)throw Error(J(38));return fu(e,t,r,!1,n)};Cr.version="18.3.1-next-f1338f8080-20240426";function V1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(V1)}catch(e){console.error(e)}}V1(),Vb.exports=Cr;var Tl=Vb.exports;const mu=Xt(Tl);var vy=Tl;jf.createRoot=vy.createRoot,jf.hydrateRoot=vy.hydrateRoot;const G1=S.createContext(null),jt=()=>{const e=S.useContext(G1);if(!e)throw new Error("useToast must be used within ToastProvider");return e},l4=({children:e})=>{const[t,r]=S.useState([]),n=S.useCallback((o,l="info",c=4e3)=>{const d=Date.now()+Math.random(),u={id:d,message:o,type:l,duration:c};return r(f=>[...f,u]),c>0&&setTimeout(()=>{s(d)},c),d},[]),s=S.useCallback(o=>{r(l=>l.filter(c=>c.id!==o))},[]),i={success:(o,l)=>n(o,"success",l),error:(o,l)=>n(o,"error",l),warning:(o,l)=>n(o,"warning",l),info:(o,l)=>n(o,"info",l)};return a.jsxs(G1.Provider,{value:i,children:[e,a.jsx(c4,{toasts:t,onRemove:s})]})},c4=({toasts:e,onRemove:t})=>a.jsx("div",{className:"toast-container",children:e.map(r=>a.jsx(d4,{message:r.message,type:r.type,onClose:()=>t(r.id)},r.id))}),d4=({message:e,type:t,onClose:r})=>{const n={success:"",error:"",warning:"",info:""},s={success:"bg-green-500",error:"bg-red-500",warning:"bg-yellow-500",info:"bg-blue-500"};return a.jsxs("div",{className:`toast toast-${t} animate-slide-in`,children:[a.jsx("div",{className:`toast-icon ${s[t]}`,children:n[t]}),a.jsx("div",{className:"toast-message",children:e}),a.jsx("button",{className:"toast-close",onClick:r,children:""})]})},U="http://localhost:3002/api",u4="http://localhost:3002",h4=u4;var K1={exports:{}};/*!
 * Pusher JavaScript Library v8.4.0
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */(function(e,t){(function(n,s){e.exports=s()})(window,function(){return function(r){var n={};function s(i){if(n[i])return n[i].exports;var o=n[i]={i,l:!1,exports:{}};return r[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=r,s.c=n,s.d=function(i,o,l){s.o(i,o)||Object.defineProperty(i,o,{enumerable:!0,get:l})},s.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},s.t=function(i,o){if(o&1&&(i=s(i)),o&8||o&4&&typeof i=="object"&&i&&i.__esModule)return i;var l=Object.create(null);if(s.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:i}),o&2&&typeof i!="string")for(var c in i)s.d(l,c,(function(d){return i[d]}).bind(null,c));return l},s.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return s.d(o,"a",o),o},s.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},s.p="",s(s.s=2)}([function(r,n,s){var i=this&&this.__extends||function(){var y=function(w,g){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,j){p.__proto__=j}||function(p,j){for(var b in j)j.hasOwnProperty(b)&&(p[b]=j[b])},y(w,g)};return function(w,g){y(w,g);function p(){this.constructor=w}w.prototype=g===null?Object.create(g):(p.prototype=g.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=256,l=function(){function y(w){w===void 0&&(w="="),this._paddingCharacter=w}return y.prototype.encodedLength=function(w){return this._paddingCharacter?(w+2)/3*4|0:(w*8+5)/6|0},y.prototype.encode=function(w){for(var g="",p=0;p<w.length-2;p+=3){var j=w[p]<<16|w[p+1]<<8|w[p+2];g+=this._encodeByte(j>>>3*6&63),g+=this._encodeByte(j>>>2*6&63),g+=this._encodeByte(j>>>1*6&63),g+=this._encodeByte(j>>>0*6&63)}var b=w.length-p;if(b>0){var j=w[p]<<16|(b===2?w[p+1]<<8:0);g+=this._encodeByte(j>>>3*6&63),g+=this._encodeByte(j>>>2*6&63),b===2?g+=this._encodeByte(j>>>1*6&63):g+=this._paddingCharacter||"",g+=this._paddingCharacter||""}return g},y.prototype.maxDecodedLength=function(w){return this._paddingCharacter?w/4*3|0:(w*6+7)/8|0},y.prototype.decodedLength=function(w){return this.maxDecodedLength(w.length-this._getPaddingLength(w))},y.prototype.decode=function(w){if(w.length===0)return new Uint8Array(0);for(var g=this._getPaddingLength(w),p=w.length-g,j=new Uint8Array(this.maxDecodedLength(p)),b=0,N=0,C=0,E=0,T=0,O=0,M=0;N<p-4;N+=4)E=this._decodeChar(w.charCodeAt(N+0)),T=this._decodeChar(w.charCodeAt(N+1)),O=this._decodeChar(w.charCodeAt(N+2)),M=this._decodeChar(w.charCodeAt(N+3)),j[b++]=E<<2|T>>>4,j[b++]=T<<4|O>>>2,j[b++]=O<<6|M,C|=E&o,C|=T&o,C|=O&o,C|=M&o;if(N<p-1&&(E=this._decodeChar(w.charCodeAt(N)),T=this._decodeChar(w.charCodeAt(N+1)),j[b++]=E<<2|T>>>4,C|=E&o,C|=T&o),N<p-2&&(O=this._decodeChar(w.charCodeAt(N+2)),j[b++]=T<<4|O>>>2,C|=O&o),N<p-3&&(M=this._decodeChar(w.charCodeAt(N+3)),j[b++]=O<<6|M,C|=M&o),C!==0)throw new Error("Base64Coder: incorrect characters for decoding");return j},y.prototype._encodeByte=function(w){var g=w;return g+=65,g+=25-w>>>8&6,g+=51-w>>>8&-75,g+=61-w>>>8&-15,g+=62-w>>>8&3,String.fromCharCode(g)},y.prototype._decodeChar=function(w){var g=o;return g+=(42-w&w-44)>>>8&-o+w-43+62,g+=(46-w&w-48)>>>8&-o+w-47+63,g+=(47-w&w-58)>>>8&-o+w-48+52,g+=(64-w&w-91)>>>8&-o+w-65+0,g+=(96-w&w-123)>>>8&-o+w-97+26,g},y.prototype._getPaddingLength=function(w){var g=0;if(this._paddingCharacter){for(var p=w.length-1;p>=0&&w[p]===this._paddingCharacter;p--)g++;if(w.length<4||g>2)throw new Error("Base64Coder: incorrect padding")}return g},y}();n.Coder=l;var c=new l;function d(y){return c.encode(y)}n.encode=d;function u(y){return c.decode(y)}n.decode=u;var f=function(y){i(w,y);function w(){return y!==null&&y.apply(this,arguments)||this}return w.prototype._encodeByte=function(g){var p=g;return p+=65,p+=25-g>>>8&6,p+=51-g>>>8&-75,p+=61-g>>>8&-13,p+=62-g>>>8&49,String.fromCharCode(p)},w.prototype._decodeChar=function(g){var p=o;return p+=(44-g&g-46)>>>8&-o+g-45+62,p+=(94-g&g-96)>>>8&-o+g-95+63,p+=(47-g&g-58)>>>8&-o+g-48+52,p+=(64-g&g-91)>>>8&-o+g-65+0,p+=(96-g&g-123)>>>8&-o+g-97+26,p},w}(l);n.URLSafeCoder=f;var h=new f;function x(y){return h.encode(y)}n.encodeURLSafe=x;function v(y){return h.decode(y)}n.decodeURLSafe=v,n.encodedLength=function(y){return c.encodedLength(y)},n.maxDecodedLength=function(y){return c.maxDecodedLength(y)},n.decodedLength=function(y){return c.decodedLength(y)}},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i="utf8: invalid string",o="utf8: invalid source encoding";function l(u){for(var f=new Uint8Array(c(u)),h=0,x=0;x<u.length;x++){var v=u.charCodeAt(x);v<128?f[h++]=v:v<2048?(f[h++]=192|v>>6,f[h++]=128|v&63):v<55296?(f[h++]=224|v>>12,f[h++]=128|v>>6&63,f[h++]=128|v&63):(x++,v=(v&1023)<<10,v|=u.charCodeAt(x)&1023,v+=65536,f[h++]=240|v>>18,f[h++]=128|v>>12&63,f[h++]=128|v>>6&63,f[h++]=128|v&63)}return f}n.encode=l;function c(u){for(var f=0,h=0;h<u.length;h++){var x=u.charCodeAt(h);if(x<128)f+=1;else if(x<2048)f+=2;else if(x<55296)f+=3;else if(x<=57343){if(h>=u.length-1)throw new Error(i);h++,f+=4}else throw new Error(i)}return f}n.encodedLength=c;function d(u){for(var f=[],h=0;h<u.length;h++){var x=u[h];if(x&128){var v=void 0;if(x<224){if(h>=u.length)throw new Error(o);var y=u[++h];if((y&192)!==128)throw new Error(o);x=(x&31)<<6|y&63,v=128}else if(x<240){if(h>=u.length-1)throw new Error(o);var y=u[++h],w=u[++h];if((y&192)!==128||(w&192)!==128)throw new Error(o);x=(x&15)<<12|(y&63)<<6|w&63,v=2048}else if(x<248){if(h>=u.length-2)throw new Error(o);var y=u[++h],w=u[++h],g=u[++h];if((y&192)!==128||(w&192)!==128||(g&192)!==128)throw new Error(o);x=(x&15)<<18|(y&63)<<12|(w&63)<<6|g&63,v=65536}else throw new Error(o);if(x<v||x>=55296&&x<=57343)throw new Error(o);if(x>=65536){if(x>1114111)throw new Error(o);x-=65536,f.push(String.fromCharCode(55296|x>>10)),x=56320|x&1023}}f.push(String.fromCharCode(x))}return f.join("")}n.decode=d},function(r,n,s){r.exports=s(3).default},function(r,n,s){s.r(n);class i{constructor(m,k){this.lastId=0,this.prefix=m,this.name=k}create(m){this.lastId++;var k=this.lastId,D=this.prefix+k,P=this.name+"["+k+"]",B=!1,ne=function(){B||(m.apply(null,arguments),B=!0)};return this[k]=ne,{number:k,id:D,name:P,callback:ne}}remove(m){delete this[m.number]}}var o=new i("_pusher_script_","Pusher.ScriptReceivers"),l={VERSION:"8.4.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},c=l;class d{constructor(m){this.options=m,this.receivers=m.receivers||o,this.loading={}}load(m,k,D){var P=this;if(P.loading[m]&&P.loading[m].length>0)P.loading[m].push(D);else{P.loading[m]=[D];var B=ke.createScriptRequest(P.getPath(m,k)),ne=P.receivers.create(function(fe){if(P.receivers.remove(ne),P.loading[m]){var je=P.loading[m];delete P.loading[m];for(var Ae=function(vt){vt||B.cleanup()},Ue=0;Ue<je.length;Ue++)je[Ue](fe,Ae)}});B.send(ne)}}getRoot(m){var k,D=ke.getDocument().location.protocol;return m&&m.useTLS||D==="https:"?k=this.options.cdn_https:k=this.options.cdn_http,k.replace(/\/*$/,"")+"/"+this.options.version}getPath(m,k){return this.getRoot(k)+"/"+m+this.options.suffix+".js"}}var u=new i("_pusher_dependencies","Pusher.DependenciesReceivers"),f=new d({cdn_http:c.cdn_http,cdn_https:c.cdn_https,version:c.VERSION,suffix:c.dependency_suffix,receivers:u});const h={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}};var v={buildLogSuffix:function(_){const m="See:",k=h.urls[_];if(!k)return"";let D;return k.fullUrl?D=k.fullUrl:k.path&&(D=h.baseUrl+k.path),D?`${m} ${D}`:""}},y;(function(_){_.UserAuthentication="user-authentication",_.ChannelAuthorization="channel-authorization"})(y||(y={}));class w extends Error{constructor(m){super(m),Object.setPrototypeOf(this,new.target.prototype)}}class g extends Error{constructor(m){super(m),Object.setPrototypeOf(this,new.target.prototype)}}class p extends Error{constructor(m){super(m),Object.setPrototypeOf(this,new.target.prototype)}}class j extends Error{constructor(m){super(m),Object.setPrototypeOf(this,new.target.prototype)}}class b extends Error{constructor(m){super(m),Object.setPrototypeOf(this,new.target.prototype)}}class N extends Error{constructor(m){super(m),Object.setPrototypeOf(this,new.target.prototype)}}class C extends Error{constructor(m){super(m),Object.setPrototypeOf(this,new.target.prototype)}}class E extends Error{constructor(m){super(m),Object.setPrototypeOf(this,new.target.prototype)}}class T extends Error{constructor(m,k){super(k),this.status=m,Object.setPrototypeOf(this,new.target.prototype)}}var M=function(_,m,k,D,P){const B=ke.createXHR();B.open("POST",k.endpoint,!0),B.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var ne in k.headers)B.setRequestHeader(ne,k.headers[ne]);if(k.headersProvider!=null){let fe=k.headersProvider();for(var ne in fe)B.setRequestHeader(ne,fe[ne])}return B.onreadystatechange=function(){if(B.readyState===4)if(B.status===200){let fe,je=!1;try{fe=JSON.parse(B.responseText),je=!0}catch{P(new T(200,`JSON returned from ${D.toString()} endpoint was invalid, yet status code was 200. Data was: ${B.responseText}`),null)}je&&P(null,fe)}else{let fe="";switch(D){case y.UserAuthentication:fe=v.buildLogSuffix("authenticationEndpoint");break;case y.ChannelAuthorization:fe=`Clients must be authorized to join private or presence channels. ${v.buildLogSuffix("authorizationEndpoint")}`;break}P(new T(B.status,`Unable to retrieve auth string from ${D.toString()} endpoint - received status: ${B.status} from ${k.endpoint}. ${fe}`),null)}},B.send(m),B};function R(_){return he(ee(_))}var H=String.fromCharCode,A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",L=function(_){var m=_.charCodeAt(0);return m<128?_:m<2048?H(192|m>>>6)+H(128|m&63):H(224|m>>>12&15)+H(128|m>>>6&63)+H(128|m&63)},ee=function(_){return _.replace(/[^\x00-\x7F]/g,L)},te=function(_){var m=[0,2,1][_.length%3],k=_.charCodeAt(0)<<16|(_.length>1?_.charCodeAt(1):0)<<8|(_.length>2?_.charCodeAt(2):0),D=[A.charAt(k>>>18),A.charAt(k>>>12&63),m>=2?"=":A.charAt(k>>>6&63),m>=1?"=":A.charAt(k&63)];return D.join("")},he=window.btoa||function(_){return _.replace(/[\s\S]{1,3}/g,te)};class G{constructor(m,k,D,P){this.clear=k,this.timer=m(()=>{this.timer&&(this.timer=P(this.timer))},D)}isRunning(){return this.timer!==null}ensureAborted(){this.timer&&(this.clear(this.timer),this.timer=null)}}var Z=G;function ie(_){window.clearTimeout(_)}function I(_){window.clearInterval(_)}class F extends Z{constructor(m,k){super(setTimeout,ie,m,function(D){return k(),null})}}class Y extends Z{constructor(m,k){super(setInterval,I,m,function(D){return k(),D})}}var ae={now(){return Date.now?Date.now():new Date().valueOf()},defer(_){return new F(0,_)},method(_,...m){var k=Array.prototype.slice.call(arguments,1);return function(D){return D[_].apply(D,k.concat(arguments))}}},V=ae;function le(_,...m){for(var k=0;k<m.length;k++){var D=m[k];for(var P in D)D[P]&&D[P].constructor&&D[P].constructor===Object?_[P]=le(_[P]||{},D[P]):_[P]=D[P]}return _}function xe(){for(var _=["Pusher"],m=0;m<arguments.length;m++)typeof arguments[m]=="string"?_.push(arguments[m]):_.push(it(arguments[m]));return _.join(" : ")}function K(_,m){var k=Array.prototype.indexOf;if(_===null)return-1;if(k&&_.indexOf===k)return _.indexOf(m);for(var D=0,P=_.length;D<P;D++)if(_[D]===m)return D;return-1}function se(_,m){for(var k in _)Object.prototype.hasOwnProperty.call(_,k)&&m(_[k],k,_)}function ye(_){var m=[];return se(_,function(k,D){m.push(D)}),m}function ve(_){var m=[];return se(_,function(k){m.push(k)}),m}function me(_,m,k){for(var D=0;D<_.length;D++)m.call(k||window,_[D],D,_)}function De(_,m){for(var k=[],D=0;D<_.length;D++)k.push(m(_[D],D,_,k));return k}function W(_,m){var k={};return se(_,function(D,P){k[P]=m(D)}),k}function Ce(_,m){m=m||function(P){return!!P};for(var k=[],D=0;D<_.length;D++)m(_[D],D,_,k)&&k.push(_[D]);return k}function Ne(_,m){var k={};return se(_,function(D,P){(m&&m(D,P,_,k)||D)&&(k[P]=D)}),k}function yt(_){var m=[];return se(_,function(k,D){m.push([D,k])}),m}function Me(_,m){for(var k=0;k<_.length;k++)if(m(_[k],k,_))return!0;return!1}function Fe(_,m){for(var k=0;k<_.length;k++)if(!m(_[k],k,_))return!1;return!0}function nt(_){return W(_,function(m){return typeof m=="object"&&(m=it(m)),encodeURIComponent(R(m.toString()))})}function Mt(_){var m=Ne(_,function(D){return D!==void 0}),k=De(yt(nt(m)),V.method("join","=")).join("&");return k}function Gr(_){var m=[],k=[];return function D(P,B){var ne,fe,je;switch(typeof P){case"object":if(!P)return null;for(ne=0;ne<m.length;ne+=1)if(m[ne]===P)return{$ref:k[ne]};if(m.push(P),k.push(B),Object.prototype.toString.apply(P)==="[object Array]")for(je=[],ne=0;ne<P.length;ne+=1)je[ne]=D(P[ne],B+"["+ne+"]");else{je={};for(fe in P)Object.prototype.hasOwnProperty.call(P,fe)&&(je[fe]=D(P[fe],B+"["+JSON.stringify(fe)+"]"))}return je;case"number":case"string":case"boolean":return P}}(_,"$")}function it(_){try{return JSON.stringify(_)}catch{return JSON.stringify(Gr(_))}}class z{constructor(){this.globalLog=m=>{window.console&&window.console.log&&window.console.log(m)}}debug(...m){this.log(this.globalLog,m)}warn(...m){this.log(this.globalLogWarn,m)}error(...m){this.log(this.globalLogError,m)}globalLogWarn(m){window.console&&window.console.warn?window.console.warn(m):this.globalLog(m)}globalLogError(m){window.console&&window.console.error?window.console.error(m):this.globalLogWarn(m)}log(m,...k){var D=xe.apply(this,arguments);vh.log?vh.log(D):vh.logToConsole&&m.bind(this)(D)}}var ce=new z,xr=function(_,m,k,D,P){(k.headers!==void 0||k.headersProvider!=null)&&ce.warn(`To send headers with the ${D.toString()} request, you must use AJAX, rather than JSONP.`);var B=_.nextAuthCallbackID.toString();_.nextAuthCallbackID++;var ne=_.getDocument(),fe=ne.createElement("script");_.auth_callbacks[B]=function(Ue){P(null,Ue)};var je="Pusher.auth_callbacks['"+B+"']";fe.src=k.endpoint+"?callback="+encodeURIComponent(je)+"&"+m;var Ae=ne.getElementsByTagName("head")[0]||ne.documentElement;Ae.insertBefore(fe,Ae.firstChild)},mn=xr;class Tt{constructor(m){this.src=m}send(m){var k=this,D="Error loading "+k.src;k.script=document.createElement("script"),k.script.id=m.id,k.script.src=k.src,k.script.type="text/javascript",k.script.charset="UTF-8",k.script.addEventListener?(k.script.onerror=function(){m.callback(D)},k.script.onload=function(){m.callback(null)}):k.script.onreadystatechange=function(){(k.script.readyState==="loaded"||k.script.readyState==="complete")&&m.callback(null)},k.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(k.errorScript=document.createElement("script"),k.errorScript.id=m.id+"_error",k.errorScript.text=m.name+"('"+D+"');",k.script.async=k.errorScript.async=!1):k.script.async=!0;var P=document.getElementsByTagName("head")[0];P.insertBefore(k.script,P.firstChild),k.errorScript&&P.insertBefore(k.errorScript,k.script.nextSibling)}cleanup(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null}}class sr{constructor(m,k){this.url=m,this.data=k}send(m){if(!this.request){var k=Mt(this.data),D=this.url+"/"+m.number+"?"+k;this.request=ke.createScriptRequest(D),this.request.send(m)}}cleanup(){this.request&&this.request.cleanup()}}var Tr=function(_,m){return function(k,D){var P="http"+(m?"s":"")+"://",B=P+(_.host||_.options.host)+_.options.path,ne=ke.createJSONPRequest(B,k),fe=ke.ScriptReceivers.create(function(je,Ae){o.remove(fe),ne.cleanup(),Ae&&Ae.host&&(_.host=Ae.host),D&&D(je,Ae)});ne.send(fe)}},Xi={name:"jsonp",getAgent:Tr},q=Xi;function ge(_,m,k){var D=_+(m.useTLS?"s":""),P=m.useTLS?m.hostTLS:m.hostNonTLS;return D+"://"+P+k}function Be(_,m){var k="/app/"+_,D="?protocol="+c.PROTOCOL+"&client=js&version="+c.VERSION+(m?"&"+m:"");return k+D}var pn={getInitial:function(_,m){var k=(m.httpPath||"")+Be(_,"flash=false");return ge("ws",m,k)}},Zl={getInitial:function(_,m){var k=(m.httpPath||"/pusher")+Be(_);return ge("http",m,k)}},ec={getInitial:function(_,m){return ge("http",m,m.httpPath||"/pusher")},getPath:function(_,m){return Be(_)}};class e_{constructor(){this._callbacks={}}get(m){return this._callbacks[uh(m)]}add(m,k,D){var P=uh(m);this._callbacks[P]=this._callbacks[P]||[],this._callbacks[P].push({fn:k,context:D})}remove(m,k,D){if(!m&&!k&&!D){this._callbacks={};return}var P=m?[uh(m)]:ye(this._callbacks);k||D?this.removeCallback(P,k,D):this.removeAllCallbacks(P)}removeCallback(m,k,D){me(m,function(P){this._callbacks[P]=Ce(this._callbacks[P]||[],function(B){return k&&k!==B.fn||D&&D!==B.context}),this._callbacks[P].length===0&&delete this._callbacks[P]},this)}removeAllCallbacks(m){me(m,function(k){delete this._callbacks[k]},this)}}function uh(_){return"_"+_}class Rn{constructor(m){this.callbacks=new e_,this.global_callbacks=[],this.failThrough=m}bind(m,k,D){return this.callbacks.add(m,k,D),this}bind_global(m){return this.global_callbacks.push(m),this}unbind(m,k,D){return this.callbacks.remove(m,k,D),this}unbind_global(m){return m?(this.global_callbacks=Ce(this.global_callbacks||[],k=>k!==m),this):(this.global_callbacks=[],this)}unbind_all(){return this.unbind(),this.unbind_global(),this}emit(m,k,D){for(var P=0;P<this.global_callbacks.length;P++)this.global_callbacks[P](m,k);var B=this.callbacks.get(m),ne=[];if(D?ne.push(k,D):k&&ne.push(k),B&&B.length>0)for(var P=0;P<B.length;P++)B[P].fn.apply(B[P].context||window,ne);else this.failThrough&&this.failThrough(m,k);return this}}class t_ extends Rn{constructor(m,k,D,P,B){super(),this.initialize=ke.transportConnectionInitializer,this.hooks=m,this.name=k,this.priority=D,this.key=P,this.options=B,this.state="new",this.timeline=B.timeline,this.activityTimeout=B.activityTimeout,this.id=this.timeline.generateUniqueID()}handlesActivityChecks(){return!!this.hooks.handlesActivityChecks}supportsPing(){return!!this.hooks.supportsPing}connect(){if(this.socket||this.state!=="initialized")return!1;var m=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(m,this.options)}catch(k){return V.defer(()=>{this.onError(k),this.changeState("closed")}),!1}return this.bindListeners(),ce.debug("Connecting",{transport:this.name,url:m}),this.changeState("connecting"),!0}close(){return this.socket?(this.socket.close(),!0):!1}send(m){return this.state==="open"?(V.defer(()=>{this.socket&&this.socket.send(m)}),!0):!1}ping(){this.state==="open"&&this.supportsPing()&&this.socket.ping()}onOpen(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0}onError(m){this.emit("error",{type:"WebSocketError",error:m}),this.timeline.error(this.buildTimelineMessage({error:m.toString()}))}onClose(m){m?this.changeState("closed",{code:m.code,reason:m.reason,wasClean:m.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0}onMessage(m){this.emit("message",m)}onActivity(){this.emit("activity")}bindListeners(){this.socket.onopen=()=>{this.onOpen()},this.socket.onerror=m=>{this.onError(m)},this.socket.onclose=m=>{this.onClose(m)},this.socket.onmessage=m=>{this.onMessage(m)},this.supportsPing()&&(this.socket.onactivity=()=>{this.onActivity()})}unbindListeners(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))}changeState(m,k){this.state=m,this.timeline.info(this.buildTimelineMessage({state:m,params:k})),this.emit(m,k)}buildTimelineMessage(m){return le({cid:this.id},m)}}class $s{constructor(m){this.hooks=m}isSupported(m){return this.hooks.isSupported(m)}createConnection(m,k,D,P){return new t_(this.hooks,m,k,D,P)}}var r_=new $s({urls:pn,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!ke.getWebSocketAPI()},isSupported:function(){return!!ke.getWebSocketAPI()},getSocket:function(_){return ke.createWebSocket(_)}}),q0={urls:Zl,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},Y0=le({getSocket:function(_){return ke.HTTPFactory.createStreamingSocket(_)}},q0),V0=le({getSocket:function(_){return ke.HTTPFactory.createPollingSocket(_)}},q0),G0={isSupported:function(){return ke.isXHRSupported()}},n_=new $s(le({},Y0,G0)),a_=new $s(le({},V0,G0)),s_={ws:r_,xhr_streaming:n_,xhr_polling:a_},tc=s_,i_=new $s({file:"sockjs",urls:ec,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(_,m){return new window.SockJS(_,null,{js_path:f.getPath("sockjs",{useTLS:m.useTLS}),ignore_null_origin:m.ignoreNullOrigin})},beforeOpen:function(_,m){_.send(JSON.stringify({path:m}))}}),K0={isSupported:function(_){var m=ke.isXDRSupported(_.useTLS);return m}},o_=new $s(le({},Y0,K0)),l_=new $s(le({},V0,K0));tc.xdr_streaming=o_,tc.xdr_polling=l_,tc.sockjs=i_;var c_=tc;class d_ extends Rn{constructor(){super();var m=this;window.addEventListener!==void 0&&(window.addEventListener("online",function(){m.emit("online")},!1),window.addEventListener("offline",function(){m.emit("offline")},!1))}isOnline(){return window.navigator.onLine===void 0?!0:window.navigator.onLine}}var u_=new d_;class h_{constructor(m,k,D){this.manager=m,this.transport=k,this.minPingDelay=D.minPingDelay,this.maxPingDelay=D.maxPingDelay,this.pingDelay=void 0}createConnection(m,k,D,P){P=le({},P,{activityTimeout:this.pingDelay});var B=this.transport.createConnection(m,k,D,P),ne=null,fe=function(){B.unbind("open",fe),B.bind("closed",je),ne=V.now()},je=Ae=>{if(B.unbind("closed",je),Ae.code===1002||Ae.code===1003)this.manager.reportDeath();else if(!Ae.wasClean&&ne){var Ue=V.now()-ne;Ue<2*this.maxPingDelay&&(this.manager.reportDeath(),this.pingDelay=Math.max(Ue/2,this.minPingDelay))}};return B.bind("open",fe),B}isSupported(m){return this.manager.isAlive()&&this.transport.isSupported(m)}}const X0={decodeMessage:function(_){try{var m=JSON.parse(_.data),k=m.data;if(typeof k=="string")try{k=JSON.parse(m.data)}catch{}var D={event:m.event,channel:m.channel,data:k};return m.user_id&&(D.user_id=m.user_id),D}catch(P){throw{type:"MessageParseError",error:P,data:_.data}}},encodeMessage:function(_){return JSON.stringify(_)},processHandshake:function(_){var m=X0.decodeMessage(_);if(m.event==="pusher:connection_established"){if(!m.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:m.data.socket_id,activityTimeout:m.data.activity_timeout*1e3}}else{if(m.event==="pusher:error")return{action:this.getCloseAction(m.data),error:this.getCloseError(m.data)};throw"Invalid handshake"}},getCloseAction:function(_){return _.code<4e3?_.code>=1002&&_.code<=1004?"backoff":null:_.code===4e3?"tls_only":_.code<4100?"refused":_.code<4200?"backoff":_.code<4300?"retry":"refused"},getCloseError:function(_){return _.code!==1e3&&_.code!==1001?{type:"PusherError",data:{code:_.code,message:_.reason||_.message}}:null}};var qa=X0;class f_ extends Rn{constructor(m,k){super(),this.id=m,this.transport=k,this.activityTimeout=k.activityTimeout,this.bindListeners()}handlesActivityChecks(){return this.transport.handlesActivityChecks()}send(m){return this.transport.send(m)}send_event(m,k,D){var P={event:m,data:k};return D&&(P.channel=D),ce.debug("Event sent",P),this.send(qa.encodeMessage(P))}ping(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})}close(){this.transport.close()}bindListeners(){var m={message:D=>{var P;try{P=qa.decodeMessage(D)}catch(B){this.emit("error",{type:"MessageParseError",error:B,data:D.data})}if(P!==void 0){switch(ce.debug("Event recd",P),P.event){case"pusher:error":this.emit("error",{type:"PusherError",data:P.data});break;case"pusher:ping":this.emit("ping");break;case"pusher:pong":this.emit("pong");break}this.emit("message",P)}},activity:()=>{this.emit("activity")},error:D=>{this.emit("error",D)},closed:D=>{k(),D&&D.code&&this.handleCloseEvent(D),this.transport=null,this.emit("closed")}},k=()=>{se(m,(D,P)=>{this.transport.unbind(P,D)})};se(m,(D,P)=>{this.transport.bind(P,D)})}handleCloseEvent(m){var k=qa.getCloseAction(m),D=qa.getCloseError(m);D&&this.emit("error",D),k&&this.emit(k,{action:k,error:D})}}class m_{constructor(m,k){this.transport=m,this.callback=k,this.bindListeners()}close(){this.unbindListeners(),this.transport.close()}bindListeners(){this.onMessage=m=>{this.unbindListeners();var k;try{k=qa.processHandshake(m)}catch(D){this.finish("error",{error:D}),this.transport.close();return}k.action==="connected"?this.finish("connected",{connection:new f_(k.id,this.transport),activityTimeout:k.activityTimeout}):(this.finish(k.action,{error:k.error}),this.transport.close())},this.onClosed=m=>{this.unbindListeners();var k=qa.getCloseAction(m)||"backoff",D=qa.getCloseError(m);this.finish(k,{error:D})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)}unbindListeners(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)}finish(m,k){this.callback(le({transport:this.transport,action:m},k))}}class p_{constructor(m,k){this.timeline=m,this.options=k||{}}send(m,k){this.timeline.isEmpty()||this.timeline.send(ke.TimelineTransport.getAgent(this,m),k)}}class hh extends Rn{constructor(m,k){super(function(D,P){ce.debug("No callbacks on "+m+" for "+D)}),this.name=m,this.pusher=k,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}authorize(m,k){return k(null,{auth:""})}trigger(m,k){if(m.indexOf("client-")!==0)throw new w("Event '"+m+"' does not start with 'client-'");if(!this.subscribed){var D=v.buildLogSuffix("triggeringClientEvents");ce.warn(`Client event triggered before channel 'subscription_succeeded' event . ${D}`)}return this.pusher.send_event(m,k,this.name)}disconnect(){this.subscribed=!1,this.subscriptionPending=!1}handleEvent(m){var k=m.event,D=m.data;if(k==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(m);else if(k==="pusher_internal:subscription_count")this.handleSubscriptionCountEvent(m);else if(k.indexOf("pusher_internal:")!==0){var P={};this.emit(k,D,P)}}handleSubscriptionSucceededEvent(m){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",m.data)}handleSubscriptionCountEvent(m){m.data.subscription_count&&(this.subscriptionCount=m.data.subscription_count),this.emit("pusher:subscription_count",m.data)}subscribe(){this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(m,k)=>{m?(this.subscriptionPending=!1,ce.error(m.toString()),this.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:m.message},m instanceof T?{status:m.status}:{}))):this.pusher.send_event("pusher:subscribe",{auth:k.auth,channel_data:k.channel_data,channel:this.name})}))}unsubscribe(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})}cancelSubscription(){this.subscriptionCancelled=!0}reinstateSubscription(){this.subscriptionCancelled=!1}}class fh extends hh{authorize(m,k){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:m},k)}}class g_{constructor(){this.reset()}get(m){return Object.prototype.hasOwnProperty.call(this.members,m)?{id:m,info:this.members[m]}:null}each(m){se(this.members,(k,D)=>{m(this.get(D))})}setMyID(m){this.myID=m}onSubscription(m){this.members=m.presence.hash,this.count=m.presence.count,this.me=this.get(this.myID)}addMember(m){return this.get(m.user_id)===null&&this.count++,this.members[m.user_id]=m.user_info,this.get(m.user_id)}removeMember(m){var k=this.get(m.user_id);return k&&(delete this.members[m.user_id],this.count--),k}reset(){this.members={},this.count=0,this.myID=null,this.me=null}}var x_=function(_,m,k,D){function P(B){return B instanceof k?B:new k(function(ne){ne(B)})}return new(k||(k=Promise))(function(B,ne){function fe(Ue){try{Ae(D.next(Ue))}catch(vt){ne(vt)}}function je(Ue){try{Ae(D.throw(Ue))}catch(vt){ne(vt)}}function Ae(Ue){Ue.done?B(Ue.value):P(Ue.value).then(fe,je)}Ae((D=D.apply(_,m||[])).next())})};class y_ extends fh{constructor(m,k){super(m,k),this.members=new g_}authorize(m,k){super.authorize(m,(D,P)=>x_(this,void 0,void 0,function*(){if(!D)if(P=P,P.channel_data!=null){var B=JSON.parse(P.channel_data);this.members.setMyID(B.user_id)}else if(yield this.pusher.user.signinDonePromise,this.pusher.user.user_data!=null)this.members.setMyID(this.pusher.user.user_data.id);else{let ne=v.buildLogSuffix("authorizationEndpoint");ce.error(`Invalid auth response for channel '${this.name}', expected 'channel_data' field. ${ne}, or the user should be signed in.`),k("Invalid auth response");return}k(D,P)}))}handleEvent(m){var k=m.event;if(k.indexOf("pusher_internal:")===0)this.handleInternalEvent(m);else{var D=m.data,P={};m.user_id&&(P.user_id=m.user_id),this.emit(k,D,P)}}handleInternalEvent(m){var k=m.event,D=m.data;switch(k){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(m);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(m);break;case"pusher_internal:member_added":var P=this.members.addMember(D);this.emit("pusher:member_added",P);break;case"pusher_internal:member_removed":var B=this.members.removeMember(D);B&&this.emit("pusher:member_removed",B);break}}handleSubscriptionSucceededEvent(m){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(m.data),this.emit("pusher:subscription_succeeded",this.members))}disconnect(){this.members.reset(),super.disconnect()}}var v_=s(1),mh=s(0);class b_ extends fh{constructor(m,k,D){super(m,k),this.key=null,this.nacl=D}authorize(m,k){super.authorize(m,(D,P)=>{if(D){k(D,P);return}let B=P.shared_secret;if(!B){k(new Error(`No shared_secret key in auth payload for encrypted channel: ${this.name}`),null);return}this.key=Object(mh.decode)(B),delete P.shared_secret,k(null,P)})}trigger(m,k){throw new N("Client events are not currently supported for encrypted channels")}handleEvent(m){var k=m.event,D=m.data;if(k.indexOf("pusher_internal:")===0||k.indexOf("pusher:")===0){super.handleEvent(m);return}this.handleEncryptedEvent(k,D)}handleEncryptedEvent(m,k){if(!this.key){ce.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!k.ciphertext||!k.nonce){ce.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+k);return}let D=Object(mh.decode)(k.ciphertext);if(D.length<this.nacl.secretbox.overheadLength){ce.error(`Expected encrypted event ciphertext length to be ${this.nacl.secretbox.overheadLength}, got: ${D.length}`);return}let P=Object(mh.decode)(k.nonce);if(P.length<this.nacl.secretbox.nonceLength){ce.error(`Expected encrypted event nonce length to be ${this.nacl.secretbox.nonceLength}, got: ${P.length}`);return}let B=this.nacl.secretbox.open(D,P,this.key);if(B===null){ce.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,(ne,fe)=>{if(ne){ce.error(`Failed to make a request to the authEndpoint: ${fe}. Unable to fetch new key, so dropping encrypted event`);return}if(B=this.nacl.secretbox.open(D,P,this.key),B===null){ce.error("Failed to decrypt event with new key. Dropping encrypted event");return}this.emit(m,this.getDataToEmit(B))});return}this.emit(m,this.getDataToEmit(B))}getDataToEmit(m){let k=Object(v_.decode)(m);try{return JSON.parse(k)}catch{return k}}}class w_ extends Rn{constructor(m,k){super(),this.state="initialized",this.connection=null,this.key=m,this.options=k,this.timeline=this.options.timeline,this.usingTLS=this.options.useTLS,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var D=ke.getNetwork();D.bind("online",()=>{this.timeline.info({netinfo:"online"}),(this.state==="connecting"||this.state==="unavailable")&&this.retryIn(0)}),D.bind("offline",()=>{this.timeline.info({netinfo:"offline"}),this.connection&&this.sendActivityCheck()}),this.updateStrategy()}connect(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}}send(m){return this.connection?this.connection.send(m):!1}send_event(m,k,D){return this.connection?this.connection.send_event(m,k,D):!1}disconnect(){this.disconnectInternally(),this.updateState("disconnected")}isUsingTLS(){return this.usingTLS}startConnecting(){var m=(k,D)=>{k?this.runner=this.strategy.connect(0,m):D.action==="error"?(this.emit("error",{type:"HandshakeError",error:D.error}),this.timeline.error({handshakeError:D.error})):(this.abortConnecting(),this.handshakeCallbacks[D.action](D))};this.runner=this.strategy.connect(0,m)}abortConnecting(){this.runner&&(this.runner.abort(),this.runner=null)}disconnectInternally(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var m=this.abandonConnection();m.close()}}updateStrategy(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})}retryIn(m){this.timeline.info({action:"retry",delay:m}),m>0&&this.emit("connecting_in",Math.round(m/1e3)),this.retryTimer=new F(m||0,()=>{this.disconnectInternally(),this.connect()})}clearRetryTimer(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)}setUnavailableTimer(){this.unavailableTimer=new F(this.options.unavailableTimeout,()=>{this.updateState("unavailable")})}clearUnavailableTimer(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()}sendActivityCheck(){this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new F(this.options.pongTimeout,()=>{this.timeline.error({pong_timed_out:this.options.pongTimeout}),this.retryIn(0)})}resetActivityCheck(){this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new F(this.activityTimeout,()=>{this.sendActivityCheck()}))}stopActivityCheck(){this.activityTimer&&this.activityTimer.ensureAborted()}buildConnectionCallbacks(m){return le({},m,{message:k=>{this.resetActivityCheck(),this.emit("message",k)},ping:()=>{this.send_event("pusher:pong",{})},activity:()=>{this.resetActivityCheck()},error:k=>{this.emit("error",k)},closed:()=>{this.abandonConnection(),this.shouldRetry()&&this.retryIn(1e3)}})}buildHandshakeCallbacks(m){return le({},m,{connected:k=>{this.activityTimeout=Math.min(this.options.activityTimeout,k.activityTimeout,k.connection.activityTimeout||1/0),this.clearUnavailableTimer(),this.setConnection(k.connection),this.socket_id=this.connection.id,this.updateState("connected",{socket_id:this.socket_id})}})}buildErrorCallbacks(){let m=k=>D=>{D.error&&this.emit("error",{type:"WebSocketError",error:D.error}),k(D)};return{tls_only:m(()=>{this.usingTLS=!0,this.updateStrategy(),this.retryIn(0)}),refused:m(()=>{this.disconnect()}),backoff:m(()=>{this.retryIn(1e3)}),retry:m(()=>{this.retryIn(0)})}}setConnection(m){this.connection=m;for(var k in this.connectionCallbacks)this.connection.bind(k,this.connectionCallbacks[k]);this.resetActivityCheck()}abandonConnection(){if(this.connection){this.stopActivityCheck();for(var m in this.connectionCallbacks)this.connection.unbind(m,this.connectionCallbacks[m]);var k=this.connection;return this.connection=null,k}}updateState(m,k){var D=this.state;if(this.state=m,D!==m){var P=m;P==="connected"&&(P+=" with new socket ID "+k.socket_id),ce.debug("State changed",D+" -> "+P),this.timeline.info({state:m,params:k}),this.emit("state_change",{previous:D,current:m}),this.emit(m,k)}}shouldRetry(){return this.state==="connecting"||this.state==="connected"}}class j_{constructor(){this.channels={}}add(m,k){return this.channels[m]||(this.channels[m]=k_(m,k)),this.channels[m]}all(){return ve(this.channels)}find(m){return this.channels[m]}remove(m){var k=this.channels[m];return delete this.channels[m],k}disconnect(){se(this.channels,function(m){m.disconnect()})}}function k_(_,m){if(_.indexOf("private-encrypted-")===0){if(m.config.nacl)return Ln.createEncryptedChannel(_,m,m.config.nacl);let k="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",D=v.buildLogSuffix("encryptedChannelSupport");throw new N(`${k}. ${D}`)}else{if(_.indexOf("private-")===0)return Ln.createPrivateChannel(_,m);if(_.indexOf("presence-")===0)return Ln.createPresenceChannel(_,m);if(_.indexOf("#")===0)throw new g('Cannot create a channel with name "'+_+'".');return Ln.createChannel(_,m)}}var N_={createChannels(){return new j_},createConnectionManager(_,m){return new w_(_,m)},createChannel(_,m){return new hh(_,m)},createPrivateChannel(_,m){return new fh(_,m)},createPresenceChannel(_,m){return new y_(_,m)},createEncryptedChannel(_,m,k){return new b_(_,m,k)},createTimelineSender(_,m){return new p_(_,m)},createHandshake(_,m){return new m_(_,m)},createAssistantToTheTransportManager(_,m,k){return new h_(_,m,k)}},Ln=N_;class J0{constructor(m){this.options=m||{},this.livesLeft=this.options.lives||1/0}getAssistant(m){return Ln.createAssistantToTheTransportManager(this,m,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})}isAlive(){return this.livesLeft>0}reportDeath(){this.livesLeft-=1}}class Ya{constructor(m,k){this.strategies=m,this.loop=!!k.loop,this.failFast=!!k.failFast,this.timeout=k.timeout,this.timeoutLimit=k.timeoutLimit}isSupported(){return Me(this.strategies,V.method("isSupported"))}connect(m,k){var D=this.strategies,P=0,B=this.timeout,ne=null,fe=(je,Ae)=>{Ae?k(null,Ae):(P=P+1,this.loop&&(P=P%D.length),P<D.length?(B&&(B=B*2,this.timeoutLimit&&(B=Math.min(B,this.timeoutLimit))),ne=this.tryStrategy(D[P],m,{timeout:B,failFast:this.failFast},fe)):k(!0))};return ne=this.tryStrategy(D[P],m,{timeout:B,failFast:this.failFast},fe),{abort:function(){ne.abort()},forceMinPriority:function(je){m=je,ne&&ne.forceMinPriority(je)}}}tryStrategy(m,k,D,P){var B=null,ne=null;return D.timeout>0&&(B=new F(D.timeout,function(){ne.abort(),P(!0)})),ne=m.connect(k,function(fe,je){fe&&B&&B.isRunning()&&!D.failFast||(B&&B.ensureAborted(),P(fe,je))}),{abort:function(){B&&B.ensureAborted(),ne.abort()},forceMinPriority:function(fe){ne.forceMinPriority(fe)}}}}class ph{constructor(m){this.strategies=m}isSupported(){return Me(this.strategies,V.method("isSupported"))}connect(m,k){return __(this.strategies,m,function(D,P){return function(B,ne){if(P[D].error=B,B){S_(P)&&k(!0);return}me(P,function(fe){fe.forceMinPriority(ne.transport.priority)}),k(null,ne)}})}}function __(_,m,k){var D=De(_,function(P,B,ne,fe){return P.connect(m,k(B,fe))});return{abort:function(){me(D,C_)},forceMinPriority:function(P){me(D,function(B){B.forceMinPriority(P)})}}}function S_(_){return Fe(_,function(m){return!!m.error})}function C_(_){!_.error&&!_.aborted&&(_.abort(),_.aborted=!0)}class E_{constructor(m,k,D){this.strategy=m,this.transports=k,this.ttl=D.ttl||1800*1e3,this.usingTLS=D.useTLS,this.timeline=D.timeline}isSupported(){return this.strategy.isSupported()}connect(m,k){var D=this.usingTLS,P=D_(D),B=P&&P.cacheSkipCount?P.cacheSkipCount:0,ne=[this.strategy];if(P&&P.timestamp+this.ttl>=V.now()){var fe=this.transports[P.transport];fe&&(["ws","wss"].includes(P.transport)||B>3?(this.timeline.info({cached:!0,transport:P.transport,latency:P.latency}),ne.push(new Ya([fe],{timeout:P.latency*2+1e3,failFast:!0}))):B++)}var je=V.now(),Ae=ne.pop().connect(m,function Ue(vt,ac){vt?(Q0(D),ne.length>0?(je=V.now(),Ae=ne.pop().connect(m,Ue)):k(vt)):(T_(D,ac.transport.name,V.now()-je,B),k(null,ac))});return{abort:function(){Ae.abort()},forceMinPriority:function(Ue){m=Ue,Ae&&Ae.forceMinPriority(Ue)}}}}function gh(_){return"pusherTransport"+(_?"TLS":"NonTLS")}function D_(_){var m=ke.getLocalStorage();if(m)try{var k=m[gh(_)];if(k)return JSON.parse(k)}catch{Q0(_)}return null}function T_(_,m,k,D){var P=ke.getLocalStorage();if(P)try{P[gh(_)]=it({timestamp:V.now(),transport:m,latency:k,cacheSkipCount:D})}catch{}}function Q0(_){var m=ke.getLocalStorage();if(m)try{delete m[gh(_)]}catch{}}class rc{constructor(m,{delay:k}){this.strategy=m,this.options={delay:k}}isSupported(){return this.strategy.isSupported()}connect(m,k){var D=this.strategy,P,B=new F(this.options.delay,function(){P=D.connect(m,k)});return{abort:function(){B.ensureAborted(),P&&P.abort()},forceMinPriority:function(ne){m=ne,P&&P.forceMinPriority(ne)}}}}class Ji{constructor(m,k,D){this.test=m,this.trueBranch=k,this.falseBranch=D}isSupported(){var m=this.test()?this.trueBranch:this.falseBranch;return m.isSupported()}connect(m,k){var D=this.test()?this.trueBranch:this.falseBranch;return D.connect(m,k)}}class P_{constructor(m){this.strategy=m}isSupported(){return this.strategy.isSupported()}connect(m,k){var D=this.strategy.connect(m,function(P,B){B&&D.abort(),k(P,B)});return D}}function Qi(_){return function(){return _.isSupported()}}var O_=function(_,m,k){var D={};function P(cx,PS,OS,MS,$S){var dx=k(_,cx,PS,OS,MS,$S);return D[cx]=dx,dx}var B=Object.assign({},m,{hostNonTLS:_.wsHost+":"+_.wsPort,hostTLS:_.wsHost+":"+_.wssPort,httpPath:_.wsPath}),ne=Object.assign({},B,{useTLS:!0}),fe=Object.assign({},m,{hostNonTLS:_.httpHost+":"+_.httpPort,hostTLS:_.httpHost+":"+_.httpsPort,httpPath:_.httpPath}),je={loop:!0,timeout:15e3,timeoutLimit:6e4},Ae=new J0({minPingDelay:1e4,maxPingDelay:_.activityTimeout}),Ue=new J0({lives:2,minPingDelay:1e4,maxPingDelay:_.activityTimeout}),vt=P("ws","ws",3,B,Ae),ac=P("wss","ws",3,ne,Ae),SS=P("sockjs","sockjs",1,fe),nx=P("xhr_streaming","xhr_streaming",1,fe,Ue),CS=P("xdr_streaming","xdr_streaming",1,fe,Ue),ax=P("xhr_polling","xhr_polling",1,fe),ES=P("xdr_polling","xdr_polling",1,fe),sx=new Ya([vt],je),DS=new Ya([ac],je),TS=new Ya([SS],je),ix=new Ya([new Ji(Qi(nx),nx,CS)],je),ox=new Ya([new Ji(Qi(ax),ax,ES)],je),lx=new Ya([new Ji(Qi(ix),new ph([ix,new rc(ox,{delay:4e3})]),ox)],je),bh=new Ji(Qi(lx),lx,TS),wh;return m.useTLS?wh=new ph([sx,new rc(bh,{delay:2e3})]):wh=new ph([sx,new rc(DS,{delay:2e3}),new rc(bh,{delay:5e3})]),new E_(new P_(new Ji(Qi(vt),wh,bh)),D,{ttl:18e5,timeline:m.timeline,useTLS:m.useTLS})},M_=O_,$_=function(){var _=this;_.timeline.info(_.buildTimelineMessage({transport:_.name+(_.options.useTLS?"s":"")})),_.hooks.isInitialized()?_.changeState("initialized"):_.hooks.file?(_.changeState("initializing"),f.load(_.hooks.file,{useTLS:_.options.useTLS},function(m,k){_.hooks.isInitialized()?(_.changeState("initialized"),k(!0)):(m&&_.onError(m),_.onClose(),k(!1))})):_.onClose()},R_={getRequest:function(_){var m=new window.XDomainRequest;return m.ontimeout=function(){_.emit("error",new p),_.close()},m.onerror=function(k){_.emit("error",k),_.close()},m.onprogress=function(){m.responseText&&m.responseText.length>0&&_.onChunk(200,m.responseText)},m.onload=function(){m.responseText&&m.responseText.length>0&&_.onChunk(200,m.responseText),_.emit("finished",200),_.close()},m},abortRequest:function(_){_.ontimeout=_.onerror=_.onprogress=_.onload=null,_.abort()}},L_=R_;const A_=256*1024;class z_ extends Rn{constructor(m,k,D){super(),this.hooks=m,this.method=k,this.url=D}start(m){this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=()=>{this.close()},ke.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(m)}close(){this.unloader&&(ke.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)}onChunk(m,k){for(;;){var D=this.advanceBuffer(k);if(D)this.emit("chunk",{status:m,data:D});else break}this.isBufferTooLong(k)&&this.emit("buffer_too_long")}advanceBuffer(m){var k=m.slice(this.position),D=k.indexOf(`
`);return D!==-1?(this.position+=D+1,k.slice(0,D)):null}isBufferTooLong(m){return this.position===m.length&&m.length>A_}}var xh;(function(_){_[_.CONNECTING=0]="CONNECTING",_[_.OPEN=1]="OPEN",_[_.CLOSED=3]="CLOSED"})(xh||(xh={}));var Va=xh,I_=1;class F_{constructor(m,k){this.hooks=m,this.session=ex(1e3)+"/"+U_(8),this.location=H_(k),this.readyState=Va.CONNECTING,this.openStream()}send(m){return this.sendRaw(JSON.stringify([m]))}ping(){this.hooks.sendHeartbeat(this)}close(m,k){this.onClose(m,k,!0)}sendRaw(m){if(this.readyState===Va.OPEN)try{return ke.createSocketRequest("POST",Z0(W_(this.location,this.session))).start(m),!0}catch{return!1}else return!1}reconnect(){this.closeStream(),this.openStream()}onClose(m,k,D){this.closeStream(),this.readyState=Va.CLOSED,this.onclose&&this.onclose({code:m,reason:k,wasClean:D})}onChunk(m){if(m.status===200){this.readyState===Va.OPEN&&this.onActivity();var k,D=m.data.slice(0,1);switch(D){case"o":k=JSON.parse(m.data.slice(1)||"{}"),this.onOpen(k);break;case"a":k=JSON.parse(m.data.slice(1)||"[]");for(var P=0;P<k.length;P++)this.onEvent(k[P]);break;case"m":k=JSON.parse(m.data.slice(1)||"null"),this.onEvent(k);break;case"h":this.hooks.onHeartbeat(this);break;case"c":k=JSON.parse(m.data.slice(1)||"[]"),this.onClose(k[0],k[1],!0);break}}}onOpen(m){this.readyState===Va.CONNECTING?(m&&m.hostname&&(this.location.base=B_(this.location.base,m.hostname)),this.readyState=Va.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)}onEvent(m){this.readyState===Va.OPEN&&this.onmessage&&this.onmessage({data:m})}onActivity(){this.onactivity&&this.onactivity()}onError(m){this.onerror&&this.onerror(m)}openStream(){this.stream=ke.createSocketRequest("POST",Z0(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",m=>{this.onChunk(m)}),this.stream.bind("finished",m=>{this.hooks.onFinished(this,m)}),this.stream.bind("buffer_too_long",()=>{this.reconnect()});try{this.stream.start()}catch(m){V.defer(()=>{this.onError(m),this.onClose(1006,"Could not start streaming",!1)})}}closeStream(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)}}function H_(_){var m=/([^\?]*)\/*(\??.*)/.exec(_);return{base:m[1],queryString:m[2]}}function W_(_,m){return _.base+"/"+m+"/xhr_send"}function Z0(_){var m=_.indexOf("?")===-1?"?":"&";return _+m+"t="+ +new Date+"&n="+I_++}function B_(_,m){var k=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(_);return k[1]+m+k[3]}function ex(_){return ke.randomInt(_)}function U_(_){for(var m=[],k=0;k<_;k++)m.push(ex(32).toString(32));return m.join("")}var q_=F_,Y_={getReceiveURL:function(_,m){return _.base+"/"+m+"/xhr_streaming"+_.queryString},onHeartbeat:function(_){_.sendRaw("[]")},sendHeartbeat:function(_){_.sendRaw("[]")},onFinished:function(_,m){_.onClose(1006,"Connection interrupted ("+m+")",!1)}},V_=Y_,G_={getReceiveURL:function(_,m){return _.base+"/"+m+"/xhr"+_.queryString},onHeartbeat:function(){},sendHeartbeat:function(_){_.sendRaw("[]")},onFinished:function(_,m){m===200?_.reconnect():_.onClose(1006,"Connection interrupted ("+m+")",!1)}},K_=G_,X_={getRequest:function(_){var m=ke.getXHRAPI(),k=new m;return k.onreadystatechange=k.onprogress=function(){switch(k.readyState){case 3:k.responseText&&k.responseText.length>0&&_.onChunk(k.status,k.responseText);break;case 4:k.responseText&&k.responseText.length>0&&_.onChunk(k.status,k.responseText),_.emit("finished",k.status),_.close();break}},k},abortRequest:function(_){_.onreadystatechange=null,_.abort()}},J_=X_,Q_={createStreamingSocket(_){return this.createSocket(V_,_)},createPollingSocket(_){return this.createSocket(K_,_)},createSocket(_,m){return new q_(_,m)},createXHR(_,m){return this.createRequest(J_,_,m)},createRequest(_,m,k){return new z_(_,m,k)}},tx=Q_;tx.createXDR=function(_,m){return this.createRequest(L_,_,m)};var Z_=tx,eS={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:o,DependenciesReceivers:u,getDefaultStrategy:M_,Transports:c_,transportConnectionInitializer:$_,HTTPFactory:Z_,TimelineTransport:q,getXHRAPI(){return window.XMLHttpRequest},getWebSocketAPI(){return window.WebSocket||window.MozWebSocket},setup(_){window.Pusher=_;var m=()=>{this.onDocumentBody(_.ready)};window.JSON?m():f.load("json2",{},m)},getDocument(){return document},getProtocol(){return this.getDocument().location.protocol},getAuthorizers(){return{ajax:M,jsonp:mn}},onDocumentBody(_){document.body?_():setTimeout(()=>{this.onDocumentBody(_)},0)},createJSONPRequest(_,m){return new sr(_,m)},createScriptRequest(_){return new Tt(_)},getLocalStorage(){try{return window.localStorage}catch{return}},createXHR(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest(){var _=this.getXHRAPI();return new _},createMicrosoftXHR(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork(){return u_},createWebSocket(_){var m=this.getWebSocketAPI();return new m(_)},createSocketRequest(_,m){if(this.isXHRSupported())return this.HTTPFactory.createXHR(_,m);if(this.isXDRSupported(m.indexOf("https:")===0))return this.HTTPFactory.createXDR(_,m);throw"Cross-origin HTTP requests are not supported"},isXHRSupported(){var _=this.getXHRAPI();return!!_&&new _().withCredentials!==void 0},isXDRSupported(_){var m=_?"https:":"http:",k=this.getProtocol();return!!window.XDomainRequest&&k===m},addUnloadListener(_){window.addEventListener!==void 0?window.addEventListener("unload",_,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",_)},removeUnloadListener(_){window.addEventListener!==void 0?window.removeEventListener("unload",_,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",_)},randomInt(_){return Math.floor(function(){return(window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32)}()*_)}},ke=eS,yh;(function(_){_[_.ERROR=3]="ERROR",_[_.INFO=6]="INFO",_[_.DEBUG=7]="DEBUG"})(yh||(yh={}));var nc=yh;class tS{constructor(m,k,D){this.key=m,this.session=k,this.events=[],this.options=D||{},this.sent=0,this.uniqueID=0}log(m,k){m<=this.options.level&&(this.events.push(le({},k,{timestamp:V.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())}error(m){this.log(nc.ERROR,m)}info(m){this.log(nc.INFO,m)}debug(m){this.log(nc.DEBUG,m)}isEmpty(){return this.events.length===0}send(m,k){var D=le({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],m(D,(P,B)=>{P||this.sent++,k&&k(P,B)}),!0}generateUniqueID(){return this.uniqueID++,this.uniqueID}}class rS{constructor(m,k,D,P){this.name=m,this.priority=k,this.transport=D,this.options=P||{}}isSupported(){return this.transport.isSupported({useTLS:this.options.useTLS})}connect(m,k){if(this.isSupported()){if(this.priority<m)return rx(new j,k)}else return rx(new E,k);var D=!1,P=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),B=null,ne=function(){P.unbind("initialized",ne),P.connect()},fe=function(){B=Ln.createHandshake(P,function(vt){D=!0,Ue(),k(null,vt)})},je=function(vt){Ue(),k(vt)},Ae=function(){Ue();var vt;vt=it(P),k(new b(vt))},Ue=function(){P.unbind("initialized",ne),P.unbind("open",fe),P.unbind("error",je),P.unbind("closed",Ae)};return P.bind("initialized",ne),P.bind("open",fe),P.bind("error",je),P.bind("closed",Ae),P.initialize(),{abort:()=>{D||(Ue(),B?B.close():P.close())},forceMinPriority:vt=>{D||this.priority<vt&&(B?B.close():P.close())}}}}function rx(_,m){return V.defer(function(){m(_)}),{abort:function(){},forceMinPriority:function(){}}}const{Transports:nS}=ke;var aS=function(_,m,k,D,P,B){var ne=nS[k];if(!ne)throw new C(k);var fe=(!_.enabledTransports||K(_.enabledTransports,m)!==-1)&&(!_.disabledTransports||K(_.disabledTransports,m)===-1),je;return fe?(P=Object.assign({ignoreNullOrigin:_.ignoreNullOrigin},P),je=new rS(m,D,B?B.getAssistant(ne):ne,P)):je=sS,je},sS={isSupported:function(){return!1},connect:function(_,m){var k=V.defer(function(){m(new E)});return{abort:function(){k.ensureAborted()},forceMinPriority:function(){}}}};function iS(_){if(_==null)throw"You must pass an options object";if(_.cluster==null)throw"Options object must provide a cluster";"disableStats"in _&&ce.warn("The disableStats option is deprecated in favor of enableStats")}const oS=(_,m)=>{var k="socket_id="+encodeURIComponent(_.socketId);for(var D in m.params)k+="&"+encodeURIComponent(D)+"="+encodeURIComponent(m.params[D]);if(m.paramsProvider!=null){let P=m.paramsProvider();for(var D in P)k+="&"+encodeURIComponent(D)+"="+encodeURIComponent(P[D])}return k};var lS=_=>{if(typeof ke.getAuthorizers()[_.transport]>"u")throw`'${_.transport}' is not a recognized auth transport`;return(m,k)=>{const D=oS(m,_);ke.getAuthorizers()[_.transport](ke,D,_,y.UserAuthentication,k)}};const cS=(_,m)=>{var k="socket_id="+encodeURIComponent(_.socketId);k+="&channel_name="+encodeURIComponent(_.channelName);for(var D in m.params)k+="&"+encodeURIComponent(D)+"="+encodeURIComponent(m.params[D]);if(m.paramsProvider!=null){let P=m.paramsProvider();for(var D in P)k+="&"+encodeURIComponent(D)+"="+encodeURIComponent(P[D])}return k};var dS=_=>{if(typeof ke.getAuthorizers()[_.transport]>"u")throw`'${_.transport}' is not a recognized auth transport`;return(m,k)=>{const D=cS(m,_);ke.getAuthorizers()[_.transport](ke,D,_,y.ChannelAuthorization,k)}};const uS=(_,m,k)=>{const D={authTransport:m.transport,authEndpoint:m.endpoint,auth:{params:m.params,headers:m.headers}};return(P,B)=>{const ne=_.channel(P.channelName);k(ne,D).authorize(P.socketId,B)}};function hS(_,m){let k={activityTimeout:_.activityTimeout||c.activityTimeout,cluster:_.cluster,httpPath:_.httpPath||c.httpPath,httpPort:_.httpPort||c.httpPort,httpsPort:_.httpsPort||c.httpsPort,pongTimeout:_.pongTimeout||c.pongTimeout,statsHost:_.statsHost||c.stats_host,unavailableTimeout:_.unavailableTimeout||c.unavailableTimeout,wsPath:_.wsPath||c.wsPath,wsPort:_.wsPort||c.wsPort,wssPort:_.wssPort||c.wssPort,enableStats:xS(_),httpHost:fS(_),useTLS:gS(_),wsHost:mS(_),userAuthenticator:yS(_),channelAuthorizer:bS(_,m)};return"disabledTransports"in _&&(k.disabledTransports=_.disabledTransports),"enabledTransports"in _&&(k.enabledTransports=_.enabledTransports),"ignoreNullOrigin"in _&&(k.ignoreNullOrigin=_.ignoreNullOrigin),"timelineParams"in _&&(k.timelineParams=_.timelineParams),"nacl"in _&&(k.nacl=_.nacl),k}function fS(_){return _.httpHost?_.httpHost:_.cluster?`sockjs-${_.cluster}.pusher.com`:c.httpHost}function mS(_){return _.wsHost?_.wsHost:pS(_.cluster)}function pS(_){return`ws-${_}.pusher.com`}function gS(_){return ke.getProtocol()==="https:"?!0:_.forceTLS!==!1}function xS(_){return"enableStats"in _?_.enableStats:"disableStats"in _?!_.disableStats:!1}function yS(_){const m=Object.assign(Object.assign({},c.userAuthentication),_.userAuthentication);return"customHandler"in m&&m.customHandler!=null?m.customHandler:lS(m)}function vS(_,m){let k;return"channelAuthorization"in _?k=Object.assign(Object.assign({},c.channelAuthorization),_.channelAuthorization):(k={transport:_.authTransport||c.authTransport,endpoint:_.authEndpoint||c.authEndpoint},"auth"in _&&("params"in _.auth&&(k.params=_.auth.params),"headers"in _.auth&&(k.headers=_.auth.headers)),"authorizer"in _&&(k.customHandler=uS(m,k,_.authorizer))),k}function bS(_,m){const k=vS(_,m);return"customHandler"in k&&k.customHandler!=null?k.customHandler:dS(k)}class wS extends Rn{constructor(m){super(function(k,D){ce.debug(`No callbacks on watchlist events for ${k}`)}),this.pusher=m,this.bindWatchlistInternalEvent()}handleEvent(m){m.data.events.forEach(k=>{this.emit(k.name,k)})}bindWatchlistInternalEvent(){this.pusher.connection.bind("message",m=>{var k=m.event;k==="pusher_internal:watchlist_events"&&this.handleEvent(m)})}}function jS(){let _,m;return{promise:new Promise((D,P)=>{_=D,m=P}),resolve:_,reject:m}}var kS=jS;class NS extends Rn{constructor(m){super(function(k,D){ce.debug("No callbacks on user for "+k)}),this.signin_requested=!1,this.user_data=null,this.serverToUserChannel=null,this.signinDonePromise=null,this._signinDoneResolve=null,this._onAuthorize=(k,D)=>{if(k){ce.warn(`Error during signin: ${k}`),this._cleanup();return}this.pusher.send_event("pusher:signin",{auth:D.auth,user_data:D.user_data})},this.pusher=m,this.pusher.connection.bind("state_change",({previous:k,current:D})=>{k!=="connected"&&D==="connected"&&this._signin(),k==="connected"&&D!=="connected"&&(this._cleanup(),this._newSigninPromiseIfNeeded())}),this.watchlist=new wS(m),this.pusher.connection.bind("message",k=>{var D=k.event;D==="pusher:signin_success"&&this._onSigninSuccess(k.data),this.serverToUserChannel&&this.serverToUserChannel.name===k.channel&&this.serverToUserChannel.handleEvent(k)})}signin(){this.signin_requested||(this.signin_requested=!0,this._signin())}_signin(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),this.pusher.connection.state==="connected"&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))}_onSigninSuccess(m){try{this.user_data=JSON.parse(m.user_data)}catch{ce.error(`Failed parsing user data after signin: ${m.user_data}`),this._cleanup();return}if(typeof this.user_data.id!="string"||this.user_data.id===""){ce.error(`user_data doesn't contain an id. user_data: ${this.user_data}`),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()}_subscribeChannels(){const m=k=>{k.subscriptionPending&&k.subscriptionCancelled?k.reinstateSubscription():!k.subscriptionPending&&this.pusher.connection.state==="connected"&&k.subscribe()};this.serverToUserChannel=new hh(`#server-to-user-${this.user_data.id}`,this.pusher),this.serverToUserChannel.bind_global((k,D)=>{k.indexOf("pusher_internal:")===0||k.indexOf("pusher:")===0||this.emit(k,D)}),m(this.serverToUserChannel)}_cleanup(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()}_newSigninPromiseIfNeeded(){if(!this.signin_requested||this.signinDonePromise&&!this.signinDonePromise.done)return;const{promise:m,resolve:k}=kS();m.done=!1;const D=()=>{m.done=!0};m.then(D).catch(D),this.signinDonePromise=m,this._signinDoneResolve=k}}class $t{static ready(){$t.isReady=!0;for(var m=0,k=$t.instances.length;m<k;m++)$t.instances[m].connect()}static getClientFeatures(){return ye(Ne({ws:ke.Transports.ws},function(m){return m.isSupported({})}))}constructor(m,k){_S(m),iS(k),this.key=m,this.config=hS(k,this),this.channels=Ln.createChannels(),this.global_emitter=new Rn,this.sessionID=ke.randomInt(1e9),this.timeline=new tS(this.key,this.sessionID,{cluster:this.config.cluster,features:$t.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:nc.INFO,version:c.VERSION}),this.config.enableStats&&(this.timelineSender=Ln.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+ke.TimelineTransport.name}));var D=P=>ke.getDefaultStrategy(this.config,P,aS);this.connection=Ln.createConnectionManager(this.key,{getStrategy:D,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:!!this.config.useTLS}),this.connection.bind("connected",()=>{this.subscribeAll(),this.timelineSender&&this.timelineSender.send(this.connection.isUsingTLS())}),this.connection.bind("message",P=>{var B=P.event,ne=B.indexOf("pusher_internal:")===0;if(P.channel){var fe=this.channel(P.channel);fe&&fe.handleEvent(P)}ne||this.global_emitter.emit(P.event,P.data)}),this.connection.bind("connecting",()=>{this.channels.disconnect()}),this.connection.bind("disconnected",()=>{this.channels.disconnect()}),this.connection.bind("error",P=>{ce.warn(P)}),$t.instances.push(this),this.timeline.info({instances:$t.instances.length}),this.user=new NS(this),$t.isReady&&this.connect()}channel(m){return this.channels.find(m)}allChannels(){return this.channels.all()}connect(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var m=this.connection.isUsingTLS(),k=this.timelineSender;this.timelineSenderTimer=new Y(6e4,function(){k.send(m)})}}disconnect(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)}bind(m,k,D){return this.global_emitter.bind(m,k,D),this}unbind(m,k,D){return this.global_emitter.unbind(m,k,D),this}bind_global(m){return this.global_emitter.bind_global(m),this}unbind_global(m){return this.global_emitter.unbind_global(m),this}unbind_all(m){return this.global_emitter.unbind_all(),this}subscribeAll(){var m;for(m in this.channels.channels)this.channels.channels.hasOwnProperty(m)&&this.subscribe(m)}subscribe(m){var k=this.channels.add(m,this);return k.subscriptionPending&&k.subscriptionCancelled?k.reinstateSubscription():!k.subscriptionPending&&this.connection.state==="connected"&&k.subscribe(),k}unsubscribe(m){var k=this.channels.find(m);k&&k.subscriptionPending?k.cancelSubscription():(k=this.channels.remove(m),k&&k.subscribed&&k.unsubscribe())}send_event(m,k,D){return this.connection.send_event(m,k,D)}shouldUseTLS(){return this.config.useTLS}signin(){this.user.signin()}}$t.instances=[],$t.isReady=!1,$t.logToConsole=!1,$t.Runtime=ke,$t.ScriptReceivers=ke.ScriptReceivers,$t.DependenciesReceivers=ke.DependenciesReceivers,$t.auth_callbacks=ke.auth_callbacks;var vh=n.default=$t;function _S(_){if(_==null)throw"You must pass your app key when you instantiate Pusher."}ke.setup($t)}])})})(K1);var f4=K1.exports;const X1=Xt(f4),J1=S.createContext(),m4=({children:e})=>{const[t,r]=S.useState(null);return S.useEffect(()=>((async()=>{try{const i=await(await fetch(`${U}/settings/public`)).json();if(i.pusher_key&&i.pusher_cluster){const o=new X1(i.pusher_key,{cluster:i.pusher_cluster,encrypted:!0});r(o)}}catch(s){console.error("Error initializing Pusher:",s)}})(),()=>{t&&t.disconnect()}),[]),a.jsx(J1.Provider,{value:t,children:e})},Q1=()=>S.useContext(J1),p4=({onClose:e})=>{const[t,r]=S.useState({name:"",email:"",phone:"",businessName:"",message:"",commercialCode:""}),[n,s]=S.useState(!1),[i,o]=S.useState(!1),[l,c]=S.useState("");S.useEffect(()=>{const h=new URLSearchParams(window.location.search).get("ref");h&&r(x=>({...x,commercialCode:h}))},[]);const d=async f=>{f.preventDefault(),s(!0),c("");try{if(!(await fetch(`${U}/leads`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,email:t.email,phone:t.phone,businessName:t.businessName,message:t.message,commercialCode:t.commercialCode||void 0,source:"landing_form"})})).ok)throw new Error("Error al enviar el formulario");o(!0),setTimeout(()=>{e()},3e3)}catch{c("Error al enviar el formulario. Por favor, intntalo de nuevo.")}finally{s(!1)}},u=f=>{r({...t,[f.target.name]:f.target.value})};return i?a.jsxs("div",{className:"bg-white p-8 max-w-md w-full text-center animate-fade-in",children:[a.jsx("div",{className:"h-20 w-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx("div",{className:"text-4xl",children:""})}),a.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Solicitud Recibida!"}),a.jsx("p",{className:"text-slate-600 mb-6",children:"Un asesor especializado te contactar en breve para activar tu demo."}),a.jsxs("div",{className:"bg-slate-50 text-slate-700 px-4 py-4 rounded-xl border border-slate-200",children:[a.jsx("p",{className:"font-semibold text-sm",children:" Revisa tu bandeja de entrada"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Te hemos enviado los detalles de acceso"})]})]}):a.jsxs("div",{className:"bg-white p-8 w-full animate-fade-in",children:[a.jsxs("div",{className:"mb-8 text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Solicita tu Demo"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Completa el formulario y empieza a usar NoahPro hoy mismo."})]}),a.jsxs("form",{onSubmit:d,className:"space-y-5",children:[a.jsxs("div",{className:"grid md:grid-cols-2 gap-5",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-700 uppercase tracking-wide mb-2",children:"Nombre Completo *"}),a.jsx("input",{type:"text",name:"name",value:t.name,onChange:u,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all",placeholder:"Tu nombre",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-700 uppercase tracking-wide mb-2",children:"Email Corporativo *"}),a.jsx("input",{type:"email",name:"email",value:t.email,onChange:u,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all",placeholder:"tu@email.com",required:!0})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-5",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-700 uppercase tracking-wide mb-2",children:"Telfono *"}),a.jsx("input",{type:"tel",name:"phone",value:t.phone,onChange:u,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all",placeholder:"+34 600 000 000",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-700 uppercase tracking-wide mb-2",children:"Nombre del Negocio"}),a.jsx("input",{type:"text",name:"businessName",value:t.businessName,onChange:u,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all",placeholder:"Ej. Restaurante La Plaza"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-bold text-slate-700 uppercase tracking-wide mb-2",children:["Referencia Comercial",a.jsx("span",{className:"text-slate-400 font-normal normal-case ml-1",children:"(opcional)"})]}),a.jsx("input",{type:"text",name:"commercialCode",value:t.commercialCode,onChange:u,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all",placeholder:"Ej. COM-1-1234"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Si vienes de parte de un comercial, introduce su cdigo aqu"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-700 uppercase tracking-wide mb-2",children:"En qu podemos ayudarte?"}),a.jsx("textarea",{name:"message",value:t.message,onChange:u,rows:"3",className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all resize-none",placeholder:"Cuntanos un poco sobre tu local..."})]}),l&&a.jsxs("div",{className:"p-3 bg-red-50 text-red-600 text-sm rounded-xl border border-red-100 flex items-center",children:[a.jsx("span",{className:"mr-2",children:""})," ",l]}),a.jsx("button",{type:"submit",disabled:n,className:`w-full py-4 px-6 rounded-xl text-white font-bold text-lg shadow-lg transition-all transform hover:scale-[1.02] ${n?"bg-slate-400 cursor-not-allowed":"bg-gradient-to-r from-orange-500 to-red-600 hover:shadow-orange-500/30"}`,children:n?a.jsxs("span",{className:"flex items-center justify-center",children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enviando..."]}):"Solicitar Informacin "}),a.jsx("p",{className:"text-xs text-center text-gray-500",children:"Tus datos estn seguros. Cumplimos con el RGPD."})]})]})},Lt=[];for(let e=0;e<256;++e)Lt.push((e+256).toString(16).slice(1));function g4(e,t=0){return(Lt[e[t+0]]+Lt[e[t+1]]+Lt[e[t+2]]+Lt[e[t+3]]+"-"+Lt[e[t+4]]+Lt[e[t+5]]+"-"+Lt[e[t+6]]+Lt[e[t+7]]+"-"+Lt[e[t+8]]+Lt[e[t+9]]+"-"+Lt[e[t+10]]+Lt[e[t+11]]+Lt[e[t+12]]+Lt[e[t+13]]+Lt[e[t+14]]+Lt[e[t+15]]).toLowerCase()}let Gh;const x4=new Uint8Array(16);function y4(){if(!Gh){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Gh=crypto.getRandomValues.bind(crypto)}return Gh(x4)}const v4=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),by={randomUUID:v4};function b4(e,t,r){var s;e=e||{};const n=e.random??((s=e.rng)==null?void 0:s.call(e))??y4();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,g4(n)}function Z1(e,t,r){return by.randomUUID&&!e?by.randomUUID():b4(e)}/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),j4=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),wy=e=>{const t=j4(e);return t.charAt(0).toUpperCase()+t.slice(1)},ej=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),k4=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var N4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=S.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...l},c)=>S.createElement("svg",{ref:c,...N4,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:ej("lucide",s),...!i&&!k4(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,u])=>S.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=(e,t)=>{const r=S.forwardRef(({className:n,...s},i)=>S.createElement(_4,{ref:i,iconNode:t,className:ej(`lucide-${w4(wy(e))}`,`lucide-${e}`,n),...s}));return r.displayName=wy(e),r};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],rg=re("arrow-left",S4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],pm=re("arrow-right",C4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],D4=re("arrow-up-right",E4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],tj=re("award",T4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],rj=re("ban",P4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],nj=re("bell",O4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],cs=re("book-open",M4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],R4=re("bot",$4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],aj=re("briefcase",L4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Vc=re("building-2",A4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Pl=re("calendar",z4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],F4=re("camera",I4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ol=re("chart-column",H4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],$o=re("check",W4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],U4=re("chef-hat",B4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Y4=re("chevron-down",q4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],jy=re("chevron-right",V4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ky=re("chevron-left",G4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],pu=re("circle-alert",K4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],zr=re("circle-check-big",X4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ro=re("circle-x",J4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],sn=re("clock",Q4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],e5=re("code",Z4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],sj=re("copy",t5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],n5=re("credit-card",r5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],ij=re("database",a5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],i5=re("dollar-sign",s5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],oj=re("download",o5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],c5=re("external-link",l5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],gm=re("eye-off",d5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Nr=re("eye",u5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ht=re("file-text",h5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],lj=re("flag",f5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],cj=re("funnel",m5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],xm=re("globe",p5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Ny=re("grip-vertical",g5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],_y=re("hash",x5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],rl=re("headphones",y5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],b5=re("house",v5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Sy=re("key",w5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],k5=re("layout-grid",j5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],dj=re("link",N5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],S5=re("list",_5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],E5=re("loader-circle",C5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Cy=re("loader",D5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],nl=re("lock",T5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],O5=re("log-out",P5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],gt=re("mail",M5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],R5=re("map-pin",$5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],A5=re("maximize-2",L5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],I5=re("menu",z5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],H5=re("message-circle",F5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],ea=re("message-square",W5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],U5=re("minimize-2",B5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Y5=re("moon",q5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],uj=re("pen",V5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],K5=re("percent",G5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],bi=re("phone",X5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]],Ey=re("plug",J5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Wr=re("plus",Q5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],e3=re("power",Z5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Dy=re("radio",t3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],hj=re("refresh-cw",r3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],tn=re("save",n3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ng=re("search",a3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ml=re("send",s3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],ds=re("server",i3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],fj=re("settings",o3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],c3=re("shield",l3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],u3=re("smartphone",d3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],f3=re("sparkles",h3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],gu=re("square-pen",m3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],al=re("star",p3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],x3=re("sun",g3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ag=re("target",y3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ln=re("trash-2",v3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ym=re("trending-up",b3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],j3=re("triangle-alert",w3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],N3=re("trophy",k3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],S3=re("upload",_3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],E3=re("user-plus",C3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ct=re("user",D3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Pa=re("users",T3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],mj=re("video",P3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],_r=re("x",O3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],sl=re("zap",M3),$3=()=>{const[e,t]=S.useState(!1),[r,n]=S.useState(null),[s,i]=S.useState([]),[o,l]=S.useState(""),[c,d]=S.useState(""),[u,f]=S.useState(null),h=S.useRef(null);S.useEffect(()=>{fetch(`${U}/settings/public`).then(y=>y.json()).then(y=>{if(y.chat_enabled&&(n(y),y.pusher_key&&y.pusher_cluster)){const w=new X1(y.pusher_key,{cluster:y.pusher_cluster,encrypted:!0});f(w)}}).catch(y=>console.error("Error loading chat config:",y));let v=localStorage.getItem("chat_session_id");return v||(v=Z1(),localStorage.setItem("chat_session_id",v)),d(v),fetch(`${U}/chat/conversations/${v}/messages`).then(y=>y.ok?y.json():[]).then(y=>i(y)).catch(y=>console.error("Error loading messages:",y)),()=>{u&&u.disconnect()}},[]),S.useEffect(()=>{if(u&&c){const v=u.subscribe(`chat_${c}`);return v.bind("new_message",y=>{i(w=>[...w,y])}),()=>{v.unbind_all(),v.unsubscribe()}}},[u,c]),S.useEffect(()=>{var v;(v=h.current)==null||v.scrollIntoView({behavior:"smooth"})},[s,e]);const x=async v=>{if(v.preventDefault(),!o.trim())return;const y={sessionId:c,senderType:"visitor",senderName:"Visitante",message:o,timestamp:new Date};try{(await fetch(`${U}/chat/message`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)})).ok&&l("")}catch(w){console.error("Error sending message:",w)}};return r?a.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col items-end font-sans",children:[e&&a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-[350px] sm:w-[380px] mb-4 overflow-hidden border border-slate-100 animate-fade-in-up flex flex-col h-[500px]",children:[a.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-red-600 p-4 flex justify-between items-center text-white shadow-md z-10",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"bg-white/20 p-2 rounded-full backdrop-blur-sm",children:a.jsx(rl,{size:20,className:"text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg leading-tight",children:r.chat_title||"Soporte NoahPro"}),a.jsxs("div",{className:"flex items-center space-x-1.5",children:[a.jsxs("span",{className:"relative flex h-2 w-2",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}),a.jsx("span",{className:"text-xs font-medium text-orange-50",children:"En lnea ahora"})]})]})]}),a.jsx("button",{onClick:()=>t(!1),className:"text-white/80 hover:text-white hover:bg-white/10 rounded-full p-2 transition-colors",children:a.jsx(_r,{size:20})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-slate-50 space-y-4",children:[a.jsx("div",{className:"flex justify-start",children:a.jsx("div",{className:"bg-white p-4 rounded-2xl rounded-tl-none shadow-sm max-w-[85%] border border-slate-100 text-slate-700 text-sm leading-relaxed",children:r.chat_welcome_message})}),s.map((v,y)=>a.jsx("div",{className:`flex ${v.senderType==="visitor"?"justify-end":"justify-start"}`,children:a.jsx("div",{className:`p-3 px-4 rounded-2xl shadow-sm max-w-[85%] text-sm leading-relaxed ${v.senderType==="visitor"?"bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-tr-none shadow-orange-500/20":"bg-white text-slate-700 rounded-tl-none border border-slate-100"}`,children:v.message})},y)),a.jsx("div",{ref:h})]}),a.jsxs("form",{onSubmit:x,className:"p-4 bg-white border-t border-slate-100",children:[a.jsxs("div",{className:"flex items-center space-x-2 bg-slate-50 rounded-full px-4 py-2 border border-slate-200 focus-within:border-orange-500 focus-within:ring-2 focus-within:ring-orange-500/20 transition-all",children:[a.jsx("input",{type:"text",value:o,onChange:v=>l(v.target.value),placeholder:"Escribe tu mensaje...",className:"flex-1 bg-transparent border-none focus:ring-0 text-sm text-slate-700 placeholder:text-slate-400"}),a.jsx("button",{type:"submit",disabled:!o.trim(),className:"p-2 rounded-full text-orange-600 hover:bg-orange-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:a.jsx(Ml,{size:18})})]}),a.jsx("div",{className:"text-center mt-2",children:a.jsx("p",{className:"text-[10px] text-slate-400",children:"Powered by NoahPro Tpv"})})]})]}),a.jsx("button",{onClick:()=>t(!e),className:`p-4 rounded-full shadow-2xl hover:shadow-orange-500/30 transform hover:scale-105 transition-all duration-300 group ${e?"bg-slate-800 text-white rotate-90":"bg-gradient-to-r from-orange-500 to-red-600 text-white"}`,children:e?a.jsx(_r,{size:28}):a.jsx(H5,{size:28,className:"group-hover:animate-pulse"})})]}):null},R3=()=>(S.useEffect(()=>{let e=localStorage.getItem("analytics_session");e||(e=Z1(),localStorage.setItem("analytics_session",e));const t=async()=>{try{await fetch(`${U}/analytics/track`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:e,page:window.location.pathname,referrer:document.referrer})})}catch(n){console.error("Analytics tracking error:",n)}};t();const r=()=>{t()};return window.addEventListener("popstate",r),()=>window.removeEventListener("popstate",r)},[]),null),Ty=()=>{const[e,t]=S.useState(!1),[r,n]=S.useState(!1),[s,i]=S.useState(!1),[o,l]=S.useState("http://localhost:5173/demo");S.useEffect(()=>{const d=()=>{n(window.scrollY>20)};return window.addEventListener("scroll",d),()=>window.removeEventListener("scroll",d)},[]),S.useEffect(()=>{fetch(`${U}/settings/public`).then(d=>d.json()).then(d=>{l(d.demo_url||"http://localhost:5173/demo")}).catch(d=>{console.error("Error loading settings:",d),l("http://localhost:5173/demo")})},[]);const c=d=>{var u;(u=document.getElementById(d))==null||u.scrollIntoView({behavior:"smooth"}),i(!1)};return a.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-900 font-sans selection:bg-orange-500 selection:text-white overflow-x-hidden",children:[a.jsx(R3,{}),a.jsx($3,{}),a.jsxs("nav",{className:`fixed top-0 w-full z-50 transition-all duration-300 ${r?"bg-white/95 backdrop-blur-md shadow-md py-2":"bg-transparent py-4"}`,children:[a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsxs("div",{className:"flex items-center space-x-3 cursor-pointer group",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:[a.jsx("div",{className:"h-10 w-10 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-orange-500/20 group-hover:scale-110 transition-transform duration-300",children:a.jsx(sl,{size:20,fill:"currentColor"})}),a.jsxs("div",{children:[a.jsx("h1",{className:`text-xl font-bold tracking-tight transition-colors ${r?"text-slate-900":"text-white"}`,children:"NoahPro Tpv"}),a.jsx("p",{className:"text-[10px] uppercase tracking-widest text-orange-500 font-bold",children:"Verifactu Ready"})]})]}),a.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[["Beneficios","Verifactu","Cmo Funciona"].map(d=>a.jsx("button",{onClick:()=>c(d.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"-")),className:`text-sm font-medium transition-colors hover:text-orange-500 ${r?"text-slate-600":"text-white/90"}`,children:d},d)),a.jsxs("div",{className:"flex items-center space-x-4 ml-4",children:[a.jsx("button",{onClick:()=>window.location.href=o,className:`text-sm font-semibold transition-colors hover:text-orange-500 ${r?"text-slate-900":"text-white"}`,children:"Acceso Demo"}),a.jsx("button",{onClick:()=>t(!0),className:"px-6 py-2.5 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-full text-sm font-bold hover:shadow-lg hover:shadow-orange-500/30 transition-all transform hover:scale-105",children:"Solicitar Informacin"})]})]}),a.jsx("div",{className:"md:hidden flex items-center",children:a.jsx("button",{onClick:()=>i(!s),className:`p-2 ${r?"text-slate-900":"text-white"}`,children:s?a.jsx(_r,{size:24}):a.jsx(I5,{size:24})})})]})}),s&&a.jsxs("div",{className:"md:hidden absolute top-20 left-0 w-full bg-white border-b border-slate-100 shadow-xl p-4 flex flex-col space-y-4 animate-fade-in-down",children:[a.jsx("button",{onClick:()=>c("beneficios"),className:"text-left font-medium text-slate-600 py-2",children:"Beneficios"}),a.jsx("button",{onClick:()=>c("verifactu"),className:"text-left font-medium text-slate-600 py-2",children:"Ley Antifraude"}),a.jsx("button",{onClick:()=>c("como-funciona"),className:"text-left font-medium text-slate-600 py-2",children:"Cmo Funciona"}),a.jsx("hr",{className:"border-slate-100"}),a.jsx("button",{onClick:()=>window.location.href=o,className:"text-center font-semibold text-slate-900 py-2",children:"Acceso Demo"}),a.jsx("button",{onClick:()=>t(!0),className:"w-full py-3 bg-orange-600 text-white rounded-xl font-bold",children:"Solicitar Informacin"})]})]}),a.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 z-0 bg-fixed bg-cover bg-center",style:{backgroundImage:"url('https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?q=80&w=2070&auto=format&fit=crop')"},children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/70 backdrop-blur-[2px]"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent"})]}),a.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center pt-20",children:[a.jsxs("div",{className:"inline-flex items-center space-x-2 bg-white/10 backdrop-blur-md border border-white/20 px-4 py-1.5 rounded-full text-sm font-semibold text-orange-300 mb-8 animate-fade-in-up",children:[a.jsxs("span",{className:"relative flex h-2 w-2",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-orange-400 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-orange-500"})]}),a.jsx("span",{children:"Actualizado Normativa 2025"})]}),a.jsxs("h1",{className:"text-5xl md:text-7xl font-extrabold text-white mb-6 tracking-tight leading-tight drop-shadow-lg",children:["Multiplica tus Ventas, ",a.jsx("br",{}),a.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-orange-400 to-red-500",children:"Olvida el Papeleo"})]}),a.jsxs("p",{className:"text-xl md:text-2xl text-gray-200 mb-10 max-w-3xl mx-auto leading-relaxed font-light",children:["La solucin TPV definitiva que automatiza ",a.jsx("strong",{children:"Verifactu"})," y te da el control total de tu negocio. Ms tiempo para tus clientes, cero preocupaciones legales."]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4 mb-16",children:[a.jsxs("button",{onClick:()=>t(!0),className:"px-8 py-4 bg-orange-600 text-white rounded-2xl font-bold text-lg shadow-xl shadow-orange-600/30 hover:bg-orange-700 transition-all transform hover:scale-105 flex items-center justify-center",children:["Solicitar Propuesta Personalizada ",a.jsx(pm,{className:"ml-2",size:20})]}),a.jsx("button",{onClick:()=>window.location.href=o,className:"px-8 py-4 bg-white/10 backdrop-blur-md text-white border border-white/20 rounded-2xl font-bold text-lg hover:bg-white/20 transition-all transform hover:scale-105 flex items-center justify-center",children:"Probar Demo Online"})]})]})]}),a.jsx("section",{id:"beneficios",className:"py-24 bg-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-20",children:[a.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"No es solo un TPV, es tu socio de crecimiento"}),a.jsx("p",{className:"text-xl text-slate-600",children:"Deja de perder tiempo con sistemas obsoletos. NoahPro est diseado para aumentar tu rentabilidad desde el primer da."})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center mb-24",children:[a.jsxs("div",{className:"relative rounded-2xl overflow-hidden shadow-2xl group",children:[a.jsx("img",{src:"https://images.unsplash.com/photo-1556740738-b6a63e27c4df?q=80&w=2070&auto=format&fit=crop",alt:"Gestin eficiente",className:"w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-700"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/80 to-transparent flex items-end p-8",children:a.jsx("h3",{className:"text-2xl font-bold text-white",children:"Gestin de Sala en Tiempo Real"})})]}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0 h-12 w-12 rounded-xl bg-orange-100 text-orange-600 flex items-center justify-center",children:a.jsx(sn,{size:24})}),a.jsxs("div",{className:"ml-6",children:[a.jsx("h4",{className:"text-xl font-bold text-slate-900 mb-2",children:"Reduce tiempos de espera"}),a.jsx("p",{className:"text-slate-600",children:"Optimiza la rotacin de mesas. Sirve a ms clientes en menos tiempo con nuestra interfaz de comanda rpida."})]})]}),a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0 h-12 w-12 rounded-xl bg-blue-100 text-blue-600 flex items-center justify-center",children:a.jsx(u3,{size:24})}),a.jsxs("div",{className:"ml-6",children:[a.jsx("h4",{className:"text-xl font-bold text-slate-900 mb-2",children:"Comanda Mvil Integrada"}),a.jsx("p",{className:"text-slate-600",children:"Tus camareros envan los pedidos directamente a cocina desde la mesa. Cero errores, mxima velocidad."})]})]}),a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0 h-12 w-12 rounded-xl bg-green-100 text-green-600 flex items-center justify-center",children:a.jsx(Ol,{size:24})}),a.jsxs("div",{className:"ml-6",children:[a.jsx("h4",{className:"text-xl font-bold text-slate-900 mb-2",children:"Control Total de Costes"}),a.jsx("p",{className:"text-slate-600",children:"Conoce el margen de cada plato. Identifica mermas y optimiza tu stock automticamente."})]})]})]})]})]})}),a.jsx("section",{id:"verifactu",className:"py-24 bg-slate-50 relative overflow-hidden",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:a.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center",children:[a.jsx("div",{className:"order-2 lg:order-1",children:a.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-xl border border-slate-100 relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-green-50 rounded-bl-full -mr-16 -mt-16 z-0"}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[a.jsx("div",{className:"h-10 w-10 bg-green-100 rounded-full flex items-center justify-center text-green-600",children:a.jsx(c3,{size:20})}),a.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Proceso Automtico Verifactu"})]}),a.jsxs("div",{className:"space-y-0",children:[a.jsxs("div",{className:"flex relative pb-8",children:[a.jsx("div",{className:"h-full w-10 absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"h-full w-1 bg-slate-100 pointer-events-none"})}),a.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-blue-600 text-white flex items-center justify-center relative z-10 font-bold",children:"1"}),a.jsxs("div",{className:"pl-6 pt-2",children:[a.jsx("h4",{className:"font-bold text-slate-900 text-lg",children:"Venta Realizada"}),a.jsx("p",{className:"text-slate-500",children:"El camarero cierra el ticket en el TPV."})]})]}),a.jsxs("div",{className:"flex relative pb-8",children:[a.jsx("div",{className:"h-full w-10 absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"h-full w-1 bg-slate-100 pointer-events-none"})}),a.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-purple-600 text-white flex items-center justify-center relative z-10 font-bold",children:"2"}),a.jsxs("div",{className:"pl-6 pt-2",children:[a.jsx("h4",{className:"font-bold text-slate-900 text-lg",children:"Huella Digital (Hash)"}),a.jsx("p",{className:"text-slate-500",children:"Se genera un cdigo nico encadenado al ticket anterior."})]})]}),a.jsxs("div",{className:"flex relative",children:[a.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-green-600 text-white flex items-center justify-center relative z-10 font-bold",children:"3"}),a.jsxs("div",{className:"pl-6 pt-2",children:[a.jsx("h4",{className:"font-bold text-slate-900 text-lg",children:"Envo a Hacienda"}),a.jsx("p",{className:"text-slate-500",children:"Registro inmediato en la AEAT y generacin de QR."})]})]})]})]})]})}),a.jsxs("div",{className:"order-1 lg:order-2",children:[a.jsx("div",{className:"inline-block px-4 py-1 bg-red-100 text-red-600 rounded-full font-bold text-sm mb-4",children:" EVITA SANCIONES"}),a.jsx("h3",{className:"text-4xl font-bold text-slate-900 mb-6 leading-tight",children:"Cumple la ley sin mover un dedo"}),a.jsxs("p",{className:"text-lg text-slate-600 mb-8 leading-relaxed",children:["La normativa Antifraude puede suponer multas de hasta ",a.jsx("strong",{children:"50.000"})," por usar software no certificado. Con NoahPro, la tranquilidad viene de serie."]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-slate-700",children:[a.jsx(zr,{className:"text-green-500",size:20}),a.jsx("span",{children:"Certificado Verifactu"})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-slate-700",children:[a.jsx(zr,{className:"text-green-500",size:20}),a.jsx("span",{children:"Compatible TicketBAI"})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-slate-700",children:[a.jsx(zr,{className:"text-green-500",size:20}),a.jsx("span",{children:"Factura Electrnica"})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-slate-700",children:[a.jsx(zr,{className:"text-green-500",size:20}),a.jsx("span",{children:"Copias de Seguridad"})]})]}),a.jsxs("button",{onClick:()=>t(!0),className:"text-orange-600 font-bold hover:text-orange-700 flex items-center group text-lg",children:["Hablar con un experto en normativa ",a.jsx(pm,{className:"ml-2 group-hover:translate-x-1 transition-transform",size:20})]})]})]})})}),a.jsxs("section",{className:"py-32 bg-slate-900 text-white relative",children:[a.jsx("div",{className:"absolute inset-0 bg-fixed bg-cover bg-center opacity-40",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514933651103-005eec06c04b?q=80&w=1974&auto=format&fit=crop')"}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-slate-900/50 via-slate-900/60 to-slate-900"}),a.jsxs("div",{className:"relative z-10 max-w-5xl mx-auto px-4 text-center",children:[a.jsxs("h3",{className:"text-3xl md:text-5xl font-bold text-white mb-6 leading-tight",children:['"La tecnologa debe servir al restaurante, ',a.jsx("br",{}),'no al revs."']}),a.jsx("div",{className:"w-24 h-1 bg-orange-500 mx-auto rounded-full mb-8"}),a.jsx("div",{className:"flex justify-center opacity-20",children:a.jsx(U4,{size:100,className:"text-white"})})]})]}),a.jsx("section",{id:"como-funciona",className:"py-24 bg-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-4",children:"Empieza en 3 pasos sencillos"}),a.jsx("p",{className:"text-xl text-slate-600",children:"Sin complicaciones tcnicas. Nosotros nos encargamos de todo."})]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-8 text-center",children:[a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-6 text-orange-600 font-bold text-2xl",children:"1"}),a.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-3",children:"Solicita Informacin"}),a.jsx("p",{className:"text-slate-600",children:"Djanos tus datos y analizaremos las necesidades de tu local sin compromiso."})]}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-6 text-orange-600 font-bold text-2xl",children:"2"}),a.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-3",children:"Instalacin y Migracin"}),a.jsx("p",{className:"text-slate-600",children:"Configuramos tu carta, importamos tus datos y formamos a tu equipo."})]}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-6 text-orange-600 font-bold text-2xl",children:"3"}),a.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-3",children:"Empieza a Facturar"}),a.jsx("p",{className:"text-slate-600",children:"Disfruta de un sistema rpido, seguro y legal desde el primer da."})]})]}),a.jsx("div",{className:"text-center mt-12",children:a.jsx("button",{onClick:()=>t(!0),className:"px-10 py-4 bg-slate-900 text-white rounded-xl font-bold text-lg hover:bg-slate-800 transition-all shadow-lg hover:shadow-xl",children:"Quiero Empezar Ahora"})})]})}),a.jsx("section",{className:"py-24 bg-slate-50 overflow-hidden",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-6",children:"Control total, ests donde ests"}),a.jsx("p",{className:"text-lg text-slate-600 mb-6",children:"Accede a las mtricas de tu negocio desde tu mvil, tablet o casa. NoahPro est en la nube para que t tengas libertad."}),a.jsxs("ul",{className:"space-y-4 mb-8",children:[a.jsxs("li",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"h-2 w-2 bg-orange-500 rounded-full"}),a.jsx("span",{className:"text-slate-700",children:"Ventas en tiempo real"})]}),a.jsxs("li",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"h-2 w-2 bg-orange-500 rounded-full"}),a.jsx("span",{className:"text-slate-700",children:"Gestin de stock y proveedores"})]}),a.jsxs("li",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"h-2 w-2 bg-orange-500 rounded-full"}),a.jsx("span",{className:"text-slate-700",children:"Informes de rendimiento de personal"})]})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute -inset-4 bg-blue-100 rounded-full blur-3xl opacity-50"}),a.jsx("img",{src:"https://images.unsplash.com/photo-1556742111-a301076d9d18?q=80&w=2070&auto=format&fit=crop",alt:"Control de negocio",className:"relative rounded-2xl shadow-2xl transform -rotate-2 hover:rotate-0 transition-transform duration-500"})]})]})})}),a.jsxs("section",{className:"py-24 bg-slate-900 text-white relative",children:[a.jsx("div",{className:"absolute inset-0 bg-fixed bg-cover bg-center opacity-30",style:{backgroundImage:"url('https://images.unsplash.com/photo-1559339352-11d035aa65de?q=80&w=1974&auto=format&fit=crop')"}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-slate-900/50 via-slate-900/60 to-slate-900"}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Confan en NoahPro"}),a.jsx("p",{className:"text-xl text-slate-400",children:"Ms de 500 restaurantes ya duermen tranquilos."})]}),a.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{quote:"Desde que instalamos NoahPro, la rotacin de mesas ha subido un 20%. La cocina vuela.",author:"Carlos Ruiz",role:"Dueo, Asador Central",stars:5},{quote:"Me preocupaba mucho la ley Verifactu. Con esto me he olvidado del tema. Todo automtico.",author:"Elena M.",role:"Gerente, Caf del Mar",stars:5},{quote:"El soporte es increble. Nos configuraron la carta en una tarde y al da siguiente estbamos funcionando.",author:"Javier T.",role:"Chef, GastroBar 21",stars:5}].map((d,u)=>a.jsxs("div",{className:"bg-white/5 backdrop-blur-sm p-8 rounded-2xl border border-white/10 hover:bg-white/10 transition-colors",children:[a.jsx("div",{className:"flex text-orange-500 mb-4",children:[...Array(d.stars)].map((f,h)=>a.jsx(al,{size:16,fill:"currentColor"},h))}),a.jsxs("p",{className:"text-lg text-slate-300 mb-6 italic",children:['"',d.quote,'"']}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-white",children:d.author}),a.jsx("p",{className:"text-sm text-slate-500",children:d.role})]})]},u))})]})]}),a.jsxs("section",{className:"py-24 bg-gradient-to-br from-orange-600 to-red-700 text-white relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-yellow-500/20 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"}),a.jsxs("div",{className:"max-w-4xl mx-auto px-4 text-center relative z-10",children:[a.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Hablamos de tu negocio?"}),a.jsx("p",{className:"text-xl text-orange-100 mb-10 max-w-2xl mx-auto",children:"Nuestros expertos te prepararn una propuesta a medida para digitalizar tu restaurante y cumplir con la ley."}),a.jsx("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:a.jsx("button",{onClick:()=>t(!0),className:"px-10 py-5 bg-white text-orange-700 rounded-2xl font-bold text-xl shadow-2xl shadow-black/20 hover:bg-orange-50 transition-all transform hover:scale-105",children:"Solicitar Propuesta Sin Compromiso"})}),a.jsx("p",{className:"mt-8 text-sm text-orange-200 opacity-80",children:"* Respuesta garantizada en menos de 24h laborables."})]})]}),a.jsx("footer",{className:"bg-slate-950 text-slate-400 py-12 border-t border-slate-900",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-8",children:[a.jsxs("div",{className:"col-span-1 md:col-span-2",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-orange-500 to-red-600 rounded-lg flex items-center justify-center text-white",children:a.jsx(sl,{size:16,fill:"currentColor"})}),a.jsx("span",{className:"text-xl font-bold text-white",children:"NoahPro Tpv"})]}),a.jsx("p",{className:"max-w-xs mb-4",children:"Software TPV lder para hostelera. Tecnologa avanzada para negocios que quieren crecer seguros."}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("div",{className:"w-8 h-8 bg-slate-800 rounded-full flex items-center justify-center hover:bg-orange-500 hover:text-white transition-colors cursor-pointer",children:"IG"}),a.jsx("div",{className:"w-8 h-8 bg-slate-800 rounded-full flex items-center justify-center hover:bg-orange-500 hover:text-white transition-colors cursor-pointer",children:"LI"}),a.jsx("div",{className:"w-8 h-8 bg-slate-800 rounded-full flex items-center justify-center hover:bg-orange-500 hover:text-white transition-colors cursor-pointer",children:"TW"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-white mb-4",children:"Producto"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsx("li",{children:a.jsx("button",{onClick:()=>c("beneficios"),className:"hover:text-orange-500 transition-colors",children:"Beneficios"})}),a.jsx("li",{children:a.jsx("button",{onClick:()=>c("verifactu"),className:"hover:text-orange-500 transition-colors",children:"Verifactu"})}),a.jsx("li",{children:a.jsx("button",{onClick:()=>c("como-funciona"),className:"hover:text-orange-500 transition-colors",children:"Cmo Funciona"})})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-white mb-4",children:"Legal"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-orange-500 transition-colors",children:"Aviso Legal"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-orange-500 transition-colors",children:"Privacidad"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-orange-500 transition-colors",children:"Cookies"})})]})]})]}),a.jsx("div",{className:"border-t border-slate-900 pt-8 text-center text-sm",children:a.jsx("p",{children:" 2025 NoahPro Tpv. Todos los derechos reservados."})})]})}),e&&a.jsx("div",{className:"fixed inset-0 z-[100] overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:a.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-slate-900/80 backdrop-blur-sm transition-opacity","aria-hidden":"true",onClick:()=>t(!1)}),a.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),a.jsxs("div",{className:"relative inline-block align-bottom bg-white rounded-2xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg w-full",children:[a.jsx("div",{className:"absolute top-4 right-4 z-10",children:a.jsx("button",{onClick:()=>t(!1),className:"text-slate-400 hover:text-slate-600 transition-colors",children:a.jsx(_r,{size:24})})}),a.jsx("div",{className:"p-1",children:a.jsx(p4,{onClose:()=>t(!1)})})]})]})})]})},We=({children:e,variant:t="primary",onClick:r,disabled:n=!1,type:s="button",className:i="",...o})=>{const l="btn",c={primary:"btn-primary",secondary:"btn-secondary",success:"btn-success",danger:"btn-danger",ghost:"btn-ghost"};return a.jsx("button",{type:s,onClick:r,disabled:n,className:`${l} ${c[t]} ${i}`,...o,children:e})};function lt(){return lt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lt.apply(null,arguments)}function xu(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function cn(e,t){if(e==null)return{};var r,n,s=xu(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ta(e){"@babel/helpers - typeof";return ta=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ta(e)}function L3(e,t){if(ta(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ta(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pj(e){var t=L3(e,"string");return ta(t)=="symbol"?t:t+""}function Py(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pj(n.key),n)}}function kt(e,t,r){return t&&Py(e.prototype,t),r&&Py(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pd(e,t){return Pd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Pd(e,t)}function Ht(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pd(e,t)}function wi(e){return wi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wi(e)}function sg(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sg=function(){return!!e})()}function A3(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gj(e,t){if(t&&(ta(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A3(e)}function z3(e){var t=sg();return function(){var r,n=wi(e);if(t){var s=wi(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return gj(this,r)}}var xj={exports:{}},I3="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",F3=I3,H3=F3;function yj(){}function vj(){}vj.resetWarningCache=yj;var W3=function(){function e(n,s,i,o,l,c){if(c!==H3){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:vj,resetWarningCache:yj};return r.PropTypes=r,r};xj.exports=W3();var sa=xj.exports;const X=Xt(sa);/*!
 * Signature Pad v2.3.2
 * https://github.com/szimek/signature_pad
 *
 * Copyright 2017 Szymon Nowak
 * Released under the MIT license
 *
 * The main idea and some parts of the code (e.g. drawing variable width Bzier curve) are taken from:
 * http://corner.squareup.com/2012/07/smoother-signatures.html
 *
 * Implementation of interpolation using cubic Bzier curves is taken from:
 * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
 *
 * Algorithm for approximated length of a Bzier curve is taken from:
 * http://www.lemoda.net/maths/bezier-length/index.html
 *
 */function bs(e,t,r){this.x=e,this.y=t,this.time=r||new Date().getTime()}bs.prototype.velocityFrom=function(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):1};bs.prototype.distanceTo=function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))};bs.prototype.equals=function(e){return this.x===e.x&&this.y===e.y&&this.time===e.time};function ig(e,t,r,n){this.startPoint=e,this.control1=t,this.control2=r,this.endPoint=n}ig.prototype.length=function(){for(var e=10,t=0,r=void 0,n=void 0,s=0;s<=e;s+=1){var i=s/e,o=this._point(i,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),l=this._point(i,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(s>0){var c=o-r,d=l-n;t+=Math.sqrt(c*c+d*d)}r=o,n=l}return t};ig.prototype._point=function(e,t,r,n,s){return t*(1-e)*(1-e)*(1-e)+3*r*(1-e)*(1-e)*e+3*n*(1-e)*e*e+s*e*e*e};function B3(e,t,r){var n,s,i,o=null,l=0;r||(r={});var c=function(){l=r.leading===!1?0:Date.now(),o=null,i=e.apply(n,s),o||(n=s=null)};return function(){var d=Date.now();!l&&r.leading===!1&&(l=d);var u=t-(d-l);return n=this,s=arguments,u<=0||u>t?(o&&(clearTimeout(o),o=null),l=d,i=e.apply(n,s),o||(n=s=null)):!o&&r.trailing!==!1&&(o=setTimeout(c,u)),i}}function Ge(e,t){var r=this,n=t||{};this.velocityFilterWeight=n.velocityFilterWeight||.7,this.minWidth=n.minWidth||.5,this.maxWidth=n.maxWidth||2.5,this.throttle="throttle"in n?n.throttle:16,this.minDistance="minDistance"in n?n.minDistance:5,this.throttle?this._strokeMoveUpdate=B3(Ge.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=Ge.prototype._strokeUpdate,this.dotSize=n.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=n.penColor||"black",this.backgroundColor=n.backgroundColor||"rgba(0,0,0,0)",this.onBegin=n.onBegin,this.onEnd=n.onEnd,this._canvas=e,this._ctx=e.getContext("2d"),this.clear(),this._handleMouseDown=function(s){s.which===1&&(r._mouseButtonDown=!0,r._strokeBegin(s))},this._handleMouseMove=function(s){r._mouseButtonDown&&r._strokeMoveUpdate(s)},this._handleMouseUp=function(s){s.which===1&&r._mouseButtonDown&&(r._mouseButtonDown=!1,r._strokeEnd(s))},this._handleTouchStart=function(s){if(s.targetTouches.length===1){var i=s.changedTouches[0];r._strokeBegin(i)}},this._handleTouchMove=function(s){s.preventDefault();var i=s.targetTouches[0];r._strokeMoveUpdate(i)},this._handleTouchEnd=function(s){var i=s.target===r._canvas;i&&(s.preventDefault(),r._strokeEnd(s))},this.on()}Ge.prototype.clear=function(){var e=this._ctx,t=this._canvas;e.fillStyle=this.backgroundColor,e.clearRect(0,0,t.width,t.height),e.fillRect(0,0,t.width,t.height),this._data=[],this._reset(),this._isEmpty=!0};Ge.prototype.fromDataURL=function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=new Image,s=r.ratio||window.devicePixelRatio||1,i=r.width||this._canvas.width/s,o=r.height||this._canvas.height/s;this._reset(),n.src=e,n.onload=function(){t._ctx.drawImage(n,0,0,i,o)},this._isEmpty=!1};Ge.prototype.toDataURL=function(e){var t;switch(e){case"image/svg+xml":return this._toSVG();default:for(var r=arguments.length,n=Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return(t=this._canvas).toDataURL.apply(t,[e].concat(n))}};Ge.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};Ge.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};Ge.prototype.isEmpty=function(){return this._isEmpty};Ge.prototype._strokeBegin=function(e){this._data.push([]),this._reset(),this._strokeUpdate(e),typeof this.onBegin=="function"&&this.onBegin(e)};Ge.prototype._strokeUpdate=function(e){var t=e.clientX,r=e.clientY,n=this._createPoint(t,r),s=this._data[this._data.length-1],i=s&&s[s.length-1],o=i&&n.distanceTo(i)<this.minDistance;if(!(i&&o)){var l=this._addPoint(n),c=l.curve,d=l.widths;c&&d&&this._drawCurve(c,d.start,d.end),this._data[this._data.length-1].push({x:n.x,y:n.y,time:n.time,color:this.penColor})}};Ge.prototype._strokeEnd=function(e){var t=this.points.length>2,r=this.points[0];if(!t&&r&&this._drawDot(r),r){var n=this._data[this._data.length-1],s=n[n.length-1];r.equals(s)||n.push({x:r.x,y:r.y,time:r.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(e)};Ge.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};Ge.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};Ge.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};Ge.prototype._createPoint=function(e,t,r){var n=this._canvas.getBoundingClientRect();return new bs(e-n.left,t-n.top,r||new Date().getTime())};Ge.prototype._addPoint=function(e){var t=this.points,r=void 0;if(t.push(e),t.length>2){t.length===3&&t.unshift(t[0]),r=this._calculateCurveControlPoints(t[0],t[1],t[2]);var n=r.c2;r=this._calculateCurveControlPoints(t[1],t[2],t[3]);var s=r.c1,i=new ig(t[1],n,s,t[2]),o=this._calculateCurveWidths(i);return t.shift(),{curve:i,widths:o}}return{}};Ge.prototype._calculateCurveControlPoints=function(e,t,r){var n=e.x-t.x,s=e.y-t.y,i=t.x-r.x,o=t.y-r.y,l={x:(e.x+t.x)/2,y:(e.y+t.y)/2},c={x:(t.x+r.x)/2,y:(t.y+r.y)/2},d=Math.sqrt(n*n+s*s),u=Math.sqrt(i*i+o*o),f=l.x-c.x,h=l.y-c.y,x=u/(d+u),v={x:c.x+f*x,y:c.y+h*x},y=t.x-v.x,w=t.y-v.y;return{c1:new bs(l.x+y,l.y+w),c2:new bs(c.x+y,c.y+w)}};Ge.prototype._calculateCurveWidths=function(e){var t=e.startPoint,r=e.endPoint,n={start:null,end:null},s=this.velocityFilterWeight*r.velocityFrom(t)+(1-this.velocityFilterWeight)*this._lastVelocity,i=this._strokeWidth(s);return n.start=this._lastWidth,n.end=i,this._lastVelocity=s,this._lastWidth=i,n};Ge.prototype._strokeWidth=function(e){return Math.max(this.maxWidth/(e+1),this.minWidth)};Ge.prototype._drawPoint=function(e,t,r){var n=this._ctx;n.moveTo(e,t),n.arc(e,t,r,0,2*Math.PI,!1),this._isEmpty=!1};Ge.prototype._drawCurve=function(e,t,r){var n=this._ctx,s=r-t,i=Math.floor(e.length());n.beginPath();for(var o=0;o<i;o+=1){var l=o/i,c=l*l,d=c*l,u=1-l,f=u*u,h=f*u,x=h*e.startPoint.x;x+=3*f*l*e.control1.x,x+=3*u*c*e.control2.x,x+=d*e.endPoint.x;var v=h*e.startPoint.y;v+=3*f*l*e.control1.y,v+=3*u*c*e.control2.y,v+=d*e.endPoint.y;var y=t+d*s;this._drawPoint(x,v,y)}n.closePath(),n.fill()};Ge.prototype._drawDot=function(e){var t=this._ctx,r=typeof this.dotSize=="function"?this.dotSize():this.dotSize;t.beginPath(),this._drawPoint(e.x,e.y,r),t.closePath(),t.fill()};Ge.prototype._fromData=function(e,t,r){for(var n=0;n<e.length;n+=1){var s=e[n];if(s.length>1)for(var i=0;i<s.length;i+=1){var o=s[i],l=new bs(o.x,o.y,o.time),c=o.color;if(i===0)this.penColor=c,this._reset(),this._addPoint(l);else if(i!==s.length-1){var d=this._addPoint(l),u=d.curve,f=d.widths;u&&f&&t(u,f,c)}}else{this._reset();var h=s[0];r(h)}}};Ge.prototype._toSVG=function(){var e=this,t=this._data,r=this._canvas,n=Math.max(window.devicePixelRatio||1,1),s=0,i=0,o=r.width/n,l=r.height/n,c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttributeNS(null,"width",r.width),c.setAttributeNS(null,"height",r.height),this._fromData(t,function(g,p,j){var b=document.createElement("path");if(!isNaN(g.control1.x)&&!isNaN(g.control1.y)&&!isNaN(g.control2.x)&&!isNaN(g.control2.y)){var N="M "+g.startPoint.x.toFixed(3)+","+g.startPoint.y.toFixed(3)+" "+("C "+g.control1.x.toFixed(3)+","+g.control1.y.toFixed(3)+" ")+(g.control2.x.toFixed(3)+","+g.control2.y.toFixed(3)+" ")+(g.endPoint.x.toFixed(3)+","+g.endPoint.y.toFixed(3));b.setAttribute("d",N),b.setAttribute("stroke-width",(p.end*2.25).toFixed(3)),b.setAttribute("stroke",j),b.setAttribute("fill","none"),b.setAttribute("stroke-linecap","round"),c.appendChild(b)}},function(g){var p=document.createElement("circle"),j=typeof e.dotSize=="function"?e.dotSize():e.dotSize;p.setAttribute("r",j),p.setAttribute("cx",g.x),p.setAttribute("cy",g.y),p.setAttribute("fill",g.color),c.appendChild(p)});var d="data:image/svg+xml;base64,",u='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+s+" "+i+" "+o+" "+l+'"')+(' width="'+o+'"')+(' height="'+l+'"')+">",f=c.innerHTML;if(f===void 0){var h=document.createElement("dummy"),x=c.childNodes;h.innerHTML="";for(var v=0;v<x.length;v+=1)h.appendChild(x[v].cloneNode(!0));f=h.innerHTML}var y="</svg>",w=u+f+y;return d+btoa(w)};Ge.prototype.fromData=function(e){var t=this;this.clear(),this._fromData(e,function(r,n){return t._drawCurve(r,n.start,n.end)},function(r){return t._drawDot(r)}),this._data=e};Ge.prototype.toData=function(){return this._data};var bj={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(cr,function(){return function(r){function n(i){if(s[i])return s[i].exports;var o=s[i]={exports:{},id:i,loaded:!1};return r[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var s={};return n.m=r,n.c=s,n.p="",n(0)}([function(r,n){function s(d){var u=d.getContext("2d"),f=d.width,h=d.height,x=u.getImageData(0,0,f,h).data,v=l(!0,f,h,x),y=l(!1,f,h,x),w=c(!0,f,h,x),g=c(!1,f,h,x),p=g-w+1,j=y-v+1,b=u.getImageData(w,v,p,j);return d.width=p,d.height=j,u.clearRect(0,0,p,j),u.putImageData(b,0,0),d}function i(d,u,f,h){return{red:h[4*(f*u+d)],green:h[4*(f*u+d)+1],blue:h[4*(f*u+d)+2],alpha:h[4*(f*u+d)+3]}}function o(d,u,f,h){return i(d,u,f,h).alpha}function l(d,u,f,h){for(var x=d?1:-1,v=d?0:f-1,y=v;d?y<f:y>-1;y+=x)for(var w=0;w<u;w++)if(o(w,y,u,h))return y;return null}function c(d,u,f,h){for(var x=d?1:-1,v=d?0:u-1,y=v;d?y<u:y>-1;y+=x)for(var w=0;w<f;w++)if(o(y,w,u,h))return y;return null}Object.defineProperty(n,"__esModule",{value:!0}),n.default=s}])})})(bj);var U3=bj.exports;const q3=Xt(U3);var Y3=["canvasProps","clearOnResize"],yu=function(e){Ht(r,e);var t=z3(r);function r(){var n;Nt(this,r);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return n=t.call.apply(t,[this].concat(i)),n.staticThis=n.constructor,n._sigPad=null,n._canvas=null,n.setRef=function(l){n._canvas=l,n._canvas===null&&(n._sigPad=null)},n._excludeOurProps=function(){var l=n.props;l.canvasProps,l.clearOnResize;var c=cn(l,Y3);return c},n.componentDidMount=function(){var l=n.getCanvas();n._sigPad=new Ge(l,n._excludeOurProps()),n._resizeCanvas(),n.on()},n.componentWillUnmount=function(){n.off()},n.componentDidUpdate=function(){Object.assign(n._sigPad,n._excludeOurProps())},n.getCanvas=function(){if(n._canvas===null)throw n.staticThis.refNullError;return n._canvas},n.getTrimmedCanvas=function(){var l=n.getCanvas(),c=document.createElement("canvas");return c.width=l.width,c.height=l.height,c.getContext("2d").drawImage(l,0,0),q3(c)},n.getSignaturePad=function(){if(n._sigPad===null)throw n.staticThis.refNullError;return n._sigPad},n._checkClearOnResize=function(){n.props.clearOnResize&&n._resizeCanvas()},n._resizeCanvas=function(){var l,c,d=(l=n.props.canvasProps)!==null&&l!==void 0?l:{},u=d.width,f=d.height;if(!(typeof u<"u"&&typeof f<"u")){var h=n.getCanvas(),x=Math.max((c=window.devicePixelRatio)!==null&&c!==void 0?c:1,1);typeof u>"u"&&(h.width=h.offsetWidth*x),typeof f>"u"&&(h.height=h.offsetHeight*x),h.getContext("2d").scale(x,x),n.clear()}},n.render=function(){var l=n.props.canvasProps;return $.createElement("canvas",lt({ref:n.setRef},l))},n.on=function(){return window.addEventListener("resize",n._checkClearOnResize),n.getSignaturePad().on()},n.off=function(){return window.removeEventListener("resize",n._checkClearOnResize),n.getSignaturePad().off()},n.clear=function(){return n.getSignaturePad().clear()},n.isEmpty=function(){return n.getSignaturePad().isEmpty()},n.fromDataURL=function(l,c){return n.getSignaturePad().fromDataURL(l,c)},n.toDataURL=function(l,c){return n.getSignaturePad().toDataURL(l,c)},n.fromData=function(l){return n.getSignaturePad().fromData(l)},n.toData=function(){return n.getSignaturePad().toData()},n}return kt(r)}(S.Component);yu.propTypes={velocityFilterWeight:X.number,minWidth:X.number,maxWidth:X.number,minDistance:X.number,dotSize:X.oneOfType([X.number,X.func]),penColor:X.string,throttle:X.number,onEnd:X.func,onBegin:X.func,canvasProps:X.object,clearOnResize:X.bool};yu.defaultProps={clearOnResize:!0};yu.refNullError=new Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.");const V3=({isOpen:e,onClose:t,onSubmit:r,proposalData:n})=>{const s=S.useRef(null),[i,o]=S.useState({fullName:"",position:"",company:"",dni:"",email:"",phone:""}),[l,c]=S.useState({});if(!e)return null;const d=()=>{var h;(h=s.current)==null||h.clear()},u=()=>{var x;const h={};return i.fullName.trim()||(h.fullName="Nombre completo requerido"),i.position.trim()||(h.position="Cargo requerido"),i.company.trim()||(h.company="Empresa requerida"),i.dni.trim()||(h.dni="DNI/NIF requerido"),i.email.trim()||(h.email="Email requerido"),i.email&&!/\S+@\S+\.\S+/.test(i.email)&&(h.email="Email invlido"),(x=s.current)!=null&&x.isEmpty()&&(h.signature="Firma requerida"),c(h),Object.keys(h).length===0},f=async h=>{var y;if(h.preventDefault(),!u())return;const x=(y=s.current)==null?void 0:y.toDataURL(),v={...i,signature:x,signedAt:new Date().toISOString(),proposalId:n==null?void 0:n.id};r(v)};return a.jsx("div",{className:"modal-backdrop",onClick:t,children:a.jsxs("div",{className:"modal-content max-w-3xl",onClick:h=>h.stopPropagation(),children:[a.jsx("div",{className:"bg-blue-600 px-6 py-4 text-white",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold",children:"Firma de Propuesta"}),a.jsx("p",{className:"text-blue-100 text-sm mt-1",children:"Por favor, complete sus datos y firme para aceptar la propuesta"})]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-blue-700 rounded-lg transition-colors",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),a.jsxs("form",{onSubmit:f,className:"p-6 max-h-[calc(90vh-200px)] overflow-y-auto",children:[n&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 border border-gray-200",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Resumen de la Propuesta"}),a.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Ttulo:"})," ",n.title]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Precio Total:"})," ",parseFloat(n.total_price).toLocaleString("es-ES",{style:"currency",currency:"EUR"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nombre Completo ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:i.fullName,onChange:h=>o({...i,fullName:h.target.value}),className:`input ${l.fullName?"border-red-500":""}`,placeholder:"Juan Prez Garca"}),l.fullName&&a.jsx("p",{className:"text-xs text-red-500 mt-1",children:l.fullName})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Cargo ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:i.position,onChange:h=>o({...i,position:h.target.value}),className:`input ${l.position?"border-red-500":""}`,placeholder:"Director General"}),l.position&&a.jsx("p",{className:"text-xs text-red-500 mt-1",children:l.position})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Empresa ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:i.company,onChange:h=>o({...i,company:h.target.value}),className:`input ${l.company?"border-red-500":""}`,placeholder:"Mi Empresa S.L."}),l.company&&a.jsx("p",{className:"text-xs text-red-500 mt-1",children:l.company})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["DNI/NIF ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:i.dni,onChange:h=>o({...i,dni:h.target.value}),className:`input ${l.dni?"border-red-500":""}`,placeholder:"12345678A"}),l.dni&&a.jsx("p",{className:"text-xs text-red-500 mt-1",children:l.dni})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",value:i.email,onChange:h=>o({...i,email:h.target.value}),className:`input ${l.email?"border-red-500":""}`,placeholder:"juan@empresa.com"}),l.email&&a.jsx("p",{className:"text-xs text-red-500 mt-1",children:l.email})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telfono"}),a.jsx("input",{type:"tel",value:i.phone,onChange:h=>o({...i,phone:h.target.value}),className:"input",placeholder:"+34 600 000 000"})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Firma Digital ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:"border-2 border-gray-300 rounded-lg overflow-hidden bg-white",children:a.jsx(yu,{ref:s,canvasProps:{className:"w-full h-48 cursor-crosshair",style:{touchAction:"none"}},backgroundColor:"white"})}),a.jsxs("div",{className:"flex justify-between items-center mt-2",children:[a.jsx("button",{type:"button",onClick:d,className:"text-sm text-gray-600 hover:text-gray-900 underline",children:"Limpiar firma"}),l.signature&&a.jsx("p",{className:"text-xs text-red-500",children:l.signature})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Firme en el recuadro usando su ratn o pantalla tctil"})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:a.jsxs("p",{className:"text-xs text-gray-700",children:[a.jsx("strong",{children:"Aviso Legal:"})," Al firmar este documento, acepta los trminos y condiciones de la propuesta presentada. Esta firma tiene validez legal y vincula a las partes segn lo establecido en la Ley 6/2020 de servicios de la sociedad de la informacin y comercio electrnico."]})}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:t,className:"px-6 py-2.5 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Firmar y Aceptar Propuesta"})]})]})]})})},G3=()=>{const[e,t]=S.useState(null),[r,n]=S.useState(!0),[s,i]=S.useState(""),[o,l]=S.useState([]),[c,d]=S.useState(""),[u,f]=S.useState(!1),[h,x]=S.useState(!1),[v,y]=S.useState(!1),[w,g]=S.useState(!1),p=jt(),j=window.location.pathname.split("/").pop();S.useEffect(()=>{b()},[j]),S.useEffect(()=>{e&&C()},[e]);const b=async()=>{try{const R=await fetch(`${U}/proposals/public/${j}`);if(!R.ok)throw new Error("Propuesta no encontrada o expirada");const H=await R.json();t(H),y(H.status==="accepted"),N(j)}catch(R){i(R.message)}finally{n(!1)}},N=async R=>{try{await fetch(`${U}/tracking/proposals/${R}/view`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({duration:0})})}catch(H){console.error("Error tracking view:",H)}},C=async()=>{if(e)try{const R=await fetch(`${U}/proposals/${e.id}/comments`);if(R.ok){const H=await R.json();l(Array.isArray(H)?H:[])}}catch(R){console.error("Error fetching comments:",R),l([])}},E=async R=>{if(R.preventDefault(),!!c.trim()){f(!0);try{(await fetch(`${U}/proposals/${e.id}/comments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({author:e.lead_name,authorType:"client",comment:c})})).ok?(d(""),C()):p.error("Error al enviar el comentario")}catch(H){console.error("Error submitting comment:",H),p.error("Error al enviar el comentario")}finally{f(!1)}}},T=()=>{g(!0)},O=async R=>{x(!0);try{const H=await fetch(`${U}/proposals/${e.id}/accept`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});if(H.ok)y(!0),g(!1),p.success("Propuesta aceptada! Te hemos enviado un email de confirmacin. Nuestro equipo te contactar pronto.");else{const A=await H.json();p.error(`Error al aceptar la propuesta: ${A.error||"Error desconocido"}`)}}catch(H){console.error("Error accepting proposal:",H),p.error("Error de conexin. Por favor intenta de nuevo ms tarde.")}finally{x(!1)}};if(r)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})});if(s)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center p-8 bg-white dark:bg-gray-800 rounded-xl shadow-lg max-w-md",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Lo sentimos"}),a.jsx("p",{className:"text-gray-600",children:s})]})});if(!e)return null;const M=e.content_json||{items:[]};return a.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10",children:a.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-orange-600 to-red-600 rounded-lg flex items-center justify-center text-white font-bold",children:"N"}),a.jsx("span",{className:"font-bold text-xl text-gray-900",children:"NoahPro"})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("a",{href:"mailto:contacto@noahpro.com",className:"text-sm text-gray-500 hover:text-gray-900",children:"Dudas? Contctanos"}),a.jsx(We,{variant:"primary",onClick:T,disabled:h||v,children:v?" Propuesta Aceptada":h?"Aceptando...":"Aceptar Propuesta"})]})]})}),a.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden mb-8",children:[a.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 px-8 py-10 text-white",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:e.title}),a.jsxs("p",{className:"opacity-90 text-lg",children:["Preparada para: ",e.lead_name," (",e.business_name,")"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm opacity-75 mb-1",children:"Fecha de emisin"}),a.jsx("p",{className:"font-medium",children:new Date(e.created_at).toLocaleDateString()})]})]})}),a.jsx("div",{className:"p-8",children:a.jsx("div",{className:"prose max-w-none text-gray-600",children:a.jsx("p",{className:"text-lg leading-relaxed whitespace-pre-line",children:e.description})})})]}),a.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden mb-8",children:a.jsxs("div",{className:"p-8",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Resumen de la Inversin"}),a.jsx("div",{className:"space-y-4",children:M.items&&M.items.length>0?M.items.map((R,H)=>a.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-gray-100 last:border-0",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:R.name}),a.jsx("p",{className:"text-sm text-gray-500",children:R.description})]}),a.jsx("div",{className:"font-medium text-gray-900",children:parseFloat(R.price).toLocaleString("es-ES",{style:"currency",currency:"EUR"})})]},H)):a.jsxs("div",{className:"flex justify-between items-center py-3",children:[a.jsx("span",{className:"text-gray-600",children:"Servicios detallados en la descripcin"}),a.jsx("span",{className:"font-medium text-gray-900",children:"-"})]})}),a.jsx("div",{className:"mt-8 pt-8 border-t border-gray-200 flex justify-end",children:a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Total (Impuestos no incluidos)"}),a.jsx("p",{className:"text-4xl font-bold text-gray-900",children:parseFloat(e.total_price).toLocaleString("es-ES",{style:"currency",currency:"EUR"})})]})})]})}),a.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden mb-8",children:a.jsxs("div",{className:"p-8",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Comentarios y Dudas"}),a.jsx("div",{className:"space-y-6 mb-8 max-h-96 overflow-y-auto",children:o.length===0?a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay comentarios an. Escribe si tienes alguna duda!"}):o.map(R=>a.jsx("div",{className:`flex ${R.author_type==="client"?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:`max-w-[80%] rounded-2xl px-5 py-3 ${R.author_type==="client"?"bg-orange-50 text-orange-900 rounded-br-none":"bg-gray-100 text-gray-800 rounded-bl-none"}`,children:[a.jsxs("div",{className:"flex justify-between items-baseline mb-1 space-x-4",children:[a.jsx("span",{className:"font-bold text-sm",children:R.author}),a.jsx("span",{className:"text-xs opacity-60",children:new Date(R.created_at).toLocaleString()})]}),a.jsx("p",{className:"text-sm",children:R.comment})]})},R.id))}),a.jsxs("form",{onSubmit:E,className:"relative",children:[a.jsx("textarea",{value:c,onChange:R=>d(R.target.value),placeholder:"Escribe tu pregunta o comentario aqu...",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent pr-12",rows:"3"}),a.jsx("button",{type:"submit",disabled:u||!c.trim(),className:"absolute bottom-3 right-3 p-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 transition-colors",children:""})]})]})}),a.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden mb-8",children:a.jsxs("div",{className:"p-8",children:[a.jsxs("div",{className:"flex items-start justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Hablamos?"}),a.jsx("p",{className:"text-gray-500",children:"Agenda una videollamada para resolver dudas en directo."})]}),a.jsx("div",{className:"text-4xl",children:""})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha y Hora Preferida"}),a.jsx("input",{type:"datetime-local",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500",onChange:async R=>{if(!R.target.value)return;const H=new Date(R.target.value);if(confirm(`Confirmar reunin para el ${H.toLocaleString()}?`))try{(await fetch(`${U}/meetings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({proposalId:e.id,leadId:e.lead_id,title:`Reunin sobre ${e.title}`,description:"Revisin de propuesta y dudas",scheduledDate:H.toISOString(),durationMinutes:45})})).ok?p.success("Reunin agendada! Te hemos enviado los detalles por email."):p.error("Error al agendar. Intntalo de nuevo.")}catch{p.error("Error de conexin")}}})]}),a.jsxs("div",{className:"bg-orange-50 p-4 rounded-xl text-sm text-orange-800",children:[a.jsx("p",{className:"font-bold mb-2",children:"Incluye:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"Demo en vivo del TPV"}),a.jsx("li",{children:"Resolucin de dudas tcnicas"}),a.jsx("li",{children:"Asesoramiento sobre Verifactu"})]})]})]})]})}),a.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:a.jsxs("div",{className:"p-8",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Trminos y Condiciones"}),a.jsxs("div",{className:"text-sm text-gray-500 space-y-2 mb-8",children:[a.jsx("p",{children:"1. Esta propuesta es vlida por 15 das a partir de la fecha de emisin."}),a.jsx("p",{children:"2. El pago se realizar segn lo acordado en las condiciones generales."}),a.jsx("p",{children:"3. NoahPro se compromete a la confidencialidad de los datos proporcionados."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 bg-gray-50 p-6 rounded-xl border border-gray-200",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-gray-900",children:"Listo para empezar?"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Acepta la propuesta para iniciar el proyecto inmediatamente."})]}),a.jsx(We,{variant:"primary",className:"w-full sm:w-auto px-8 py-3 text-lg shadow-xl",onClick:T,disabled:h||v,children:v?" Propuesta Aceptada":h?"Aceptando...":"Aceptar Propuesta"})]})]})})]}),a.jsx(V3,{isOpen:w,onClose:()=>g(!1),onSubmit:O,proposalData:e}),a.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8 text-center text-gray-400 text-sm",children:[" ",new Date().getFullYear()," NoahPro. Todos los derechos reservados."]})]})},we=({label:e,type:t="text",value:r,onChange:n,placeholder:s="",error:i="",required:o=!1,disabled:l=!1,className:c="",icon:d=null,...u})=>a.jsxs("div",{className:`mb-4 ${c}`,children:[e&&a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-200 mb-2",children:[e,o&&a.jsx("span",{className:"text-danger ml-1",children:"*"})]}),a.jsxs("div",{className:"relative",children:[d&&a.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 pointer-events-none",children:d}),a.jsx("input",{type:t,value:r,onChange:n,placeholder:s,disabled:l,required:o,className:`input w-full ${d?"pl-10":""} ${i?"border-danger focus:ring-danger":""}`,...u})]}),i&&a.jsx("p",{className:"mt-1 text-sm text-danger",children:i})]}),K3=()=>{const[e,t]=S.useState({username:"",password:""}),[r,n]=S.useState(""),[s,i]=S.useState(!1),[o,l]=S.useState(!1),c=async d=>{d.preventDefault(),i(!0),n("");try{const u=await fetch(`${U}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),f=await u.json();if(!u.ok)throw new Error(f.error||"Error de autenticacin");localStorage.setItem("crm_token",f.token),localStorage.setItem("user",JSON.stringify(f.user)),window.location.href="/crm/dashboard"}catch(u){n(u.message)}finally{i(!1)}};return a.jsxs("div",{className:"min-h-screen bg-white flex",children:[a.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-orange-500 via-red-500 to-red-600 p-12 flex-col justify-between relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-orange-400/20 rounded-full blur-3xl"}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center",children:a.jsx(sl,{className:"w-7 h-7 text-white"})}),a.jsx("h1",{className:"text-3xl font-bold text-white",children:"NoahPro TPV"})]}),a.jsxs("div",{className:"space-y-6 max-w-md",children:[a.jsxs("h2",{className:"text-4xl font-bold text-white leading-tight",children:["Panel de Gestin",a.jsx("br",{}),"Comercial Interno"]}),a.jsx("p",{className:"text-lg text-orange-50",children:"Sistema de gestin centralizada para administrar leads, propuestas y clientes de NoahPro TPV."})]})]}),a.jsx("div",{className:"relative z-10",children:a.jsxs("div",{className:"grid grid-cols-3 gap-6 text-white",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-3xl font-bold mb-1",children:"CRM"}),a.jsx("div",{className:"text-sm text-orange-100",children:"Gestin Interna"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-3xl font-bold mb-1",children:"TPV"}),a.jsx("div",{className:"text-sm text-orange-100",children:"NoahPro"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-3xl font-bold mb-1",children:"24/7"}),a.jsx("div",{className:"text-sm text-orange-100",children:"Acceso"})]})]})})]}),a.jsx("div",{className:"flex-1 flex items-center justify-center p-8 lg:p-12",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsx("div",{className:"lg:hidden flex items-center justify-center mb-8",children:a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-red-600 rounded-2xl flex items-center justify-center",children:a.jsx(sl,{className:"w-9 h-9 text-white"})})}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Acceso al Panel CRM"}),a.jsx("p",{className:"text-gray-600",children:"Portal de gestin interna para equipo comercial"})]}),a.jsxs("form",{onSubmit:c,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Usuario"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:a.jsx(Ct,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",value:e.username,onChange:d=>t({...e,username:d.target.value}),placeholder:"Usuario corporativo",className:"w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all outline-none text-gray-900 placeholder-gray-400",required:!0})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Contrasea"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:a.jsx(nl,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:o?"text":"password",value:e.password,onChange:d=>t({...e,password:d.target.value}),placeholder:"",className:"w-full pl-12 pr-12 py-3 border-2 border-gray-200 rounded-xl focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all outline-none text-gray-900 placeholder-gray-400",required:!0}),a.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 focus:outline-none",children:o?a.jsx(gm,{className:"h-5 w-5"}):a.jsx(Nr,{className:"h-5 w-5"})})]})]}),r&&a.jsxs("div",{className:"p-4 bg-red-50 text-red-600 text-sm rounded-xl border-2 border-red-100 flex items-center space-x-2",children:[a.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),a.jsx("span",{children:r})]}),a.jsxs("button",{type:"submit",disabled:s,className:"w-full py-4 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-xl font-semibold text-lg hover:shadow-lg hover:shadow-orange-500/50 transition-all duration-200 flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed group",children:[a.jsx("span",{children:s?"Verificando...":"Acceder al Panel"}),!s&&a.jsx(pm,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]}),a.jsx("div",{className:"mt-8 text-center",children:a.jsxs("a",{href:"/",className:"text-sm text-gray-500 hover:text-gray-700 transition-colors inline-flex items-center space-x-1",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),a.jsx("span",{children:"Volver a la App Principal"})]})}),a.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-xs text-gray-500",children:[a.jsx(nl,{className:"w-4 h-4"}),a.jsx("span",{children:"Conexin segura y encriptada"})]})})]})})]})},Ri=({isOpen:e,onClose:t,onConfirm:r,title:n="Ests seguro?",message:s,confirmText:i="Confirmar",cancelText:o="Cancelar",type:l="danger"})=>{if(!e)return null;const c={danger:{bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",text:"text-red-800 dark:text-red-200",icon:"text-red-600 dark:text-red-400"},warning:{bg:"bg-orange-50 dark:bg-orange-900/20",border:"border-orange-200 dark:border-orange-800",text:"text-orange-800 dark:text-orange-200",icon:"text-orange-600 dark:text-orange-400"},info:{bg:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-200 dark:border-blue-800",text:"text-blue-800 dark:text-blue-200",icon:"text-blue-600 dark:text-blue-400"}},d=c[l]||c.danger;return a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[60] p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full p-6 shadow-2xl",children:[a.jsx("div",{className:`${d.bg} rounded-lg p-4 mb-4 border ${d.border}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(j3,{className:`w-5 h-5 ${d.icon} flex-shrink-0 mt-0.5`}),a.jsxs("div",{children:[a.jsx("h3",{className:`font-bold ${d.text} mb-1`,children:n}),a.jsx("p",{className:`text-sm ${d.text}`,children:s})]})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(We,{variant:"secondary",onClick:t,className:"flex-1",children:o}),a.jsx(We,{onClick:()=>{r(),t()},className:"flex-1",children:i})]})]})})},X3=()=>{var u,f,h;const[e,t]=S.useState(null),[r,n]=S.useState(null),[s,i]=S.useState("7"),[o,l]=S.useState(!0);S.useEffect(()=>{c(),d()},[s]);const c=async()=>{try{const v=await(await fetch(`${U}/analytics/stats?period=${s}`)).json();t(v)}catch(x){console.error("Error fetching analytics:",x)}finally{l(!1)}},d=async()=>{try{const v=await(await fetch(`${U}/analytics/funnel?period=30`)).json();n(v)}catch(x){console.error("Error fetching funnel:",x)}};return o?a.jsx("div",{className:"p-8 text-center",children:"Cargando analytics..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx("span",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg text-orange-600 dark:text-orange-400",children:a.jsx(Ol,{className:"w-5 h-5"})}),"Analytics"]}),a.jsxs("select",{value:s,onChange:x=>i(x.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"7",children:"ltimos 7 das"}),a.jsx("option",{value:"30",children:"ltimos 30 das"}),a.jsx("option",{value:"90",children:"ltimos 90 das"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-md border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Total Visitas"}),a.jsx("div",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:((u=e==null?void 0:e.summary)==null?void 0:u.total_visits)||0})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-md border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Visitantes nicos"}),a.jsx("div",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:((f=e==null?void 0:e.summary)==null?void 0:f.unique_visitors)||0})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-md border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Tasa de Conversin"}),a.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[(r==null?void 0:r.conversionRate)||0,"%"]})]})]}),r&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-md border border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Embudo de Conversin (30 das)"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(oo,{label:"Visitantes",value:r.visitors,percentage:100}),a.jsx(oo,{label:"Leads",value:r.leads,percentage:r.visitors>0?r.leads/r.visitors*100:0}),a.jsx(oo,{label:"Calificados",value:r.qualified,percentage:r.visitors>0?r.qualified/r.visitors*100:0}),a.jsx(oo,{label:"Propuestas",value:r.proposals,percentage:r.visitors>0?r.proposals/r.visitors*100:0}),a.jsx(oo,{label:"Conversiones",value:r.conversions,percentage:r.visitors>0?r.conversions/r.visitors*100:0,isLast:!0})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-md border border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Pginas Ms Visitadas"}),a.jsx("div",{className:"space-y-2",children:(h=e==null?void 0:e.pageViews)==null?void 0:h.map((x,v)=>a.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[a.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:x.page}),a.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:[x.views," vistas"]})]},v))})]}),(e==null?void 0:e.referrers)&&e.referrers.length>0&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-md border border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Fuentes de Trfico"}),a.jsx("div",{className:"space-y-2",children:e.referrers.map((x,v)=>a.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[a.jsx("span",{className:"text-gray-700 dark:text-gray-300 truncate",children:x.referrer}),a.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:x.count})]},v))})]})]})},oo=({label:e,value:t,percentage:r,isLast:n})=>a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e}),a.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t," (",r.toFixed(1),"%)"]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:a.jsx("div",{className:`h-3 rounded-full transition-all ${n?"bg-green-500":"bg-purple-600"}`,style:{width:`${r}%`}})})]}),J3=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(!0),[s,i]=S.useState(null),[o,l]=S.useState(!1),[c,d]=S.useState({name:"",description:"",title:"",totalPrice:"",is_default:!1});S.useEffect(()=>{u()},[]);const u=async()=>{try{const y=await fetch(`${U}/proposal-templates`);if(y.ok){const w=await y.json();t(w)}}catch(y){console.error("Error fetching templates:",y)}finally{n(!1)}},f=async y=>{y.preventDefault();const w={name:c.name,description:c.description,is_default:c.is_default,content_json:{title:c.title,totalPrice:parseFloat(c.totalPrice),description:c.description,items:[]}};try{const g=s?`${U}/proposal-templates/${s.id}`:`${U}/proposal-templates`;(await fetch(g,{method:s?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)})).ok&&(u(),v())}catch(g){console.error("Error saving template:",g)}},h=async y=>{if(confirm("Ests seguro de eliminar esta plantilla?"))try{await fetch(`${U}/proposal-templates/${y}`,{method:"DELETE"}),u()}catch(w){console.error("Error deleting template:",w)}},x=y=>{i(y),d({name:y.name,description:y.description||"",title:y.content_json.title||"",totalPrice:y.content_json.totalPrice||"",is_default:y.is_default}),l(!0)},v=()=>{i(null),l(!1),d({name:"",description:"",title:"",totalPrice:"",is_default:!1})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Plantillas de Propuestas"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Gestiona los modelos base para tus propuestas comerciales"})]}),!o&&a.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2",children:[a.jsx(Wr,{className:"w-4 h-4"}),a.jsx("span",{children:"Nueva Plantilla"})]})]}),o?a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:[a.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6 flex items-center space-x-2",children:[a.jsx(ht,{className:"w-5 h-5 text-orange-500"}),a.jsx("span",{children:s?"Editar Plantilla":"Nueva Plantilla"})]}),a.jsxs("form",{onSubmit:f,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre Interno"}),a.jsx(we,{value:c.name,onChange:y=>d({...c,name:y.target.value}),placeholder:"Ej: Plantilla Bsica",required:!0}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Nombre para identificar la plantilla en el sistema."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ttulo Propuesta"}),a.jsx(we,{value:c.title,onChange:y=>d({...c,title:y.target.value}),placeholder:"Ej: Propuesta TPV Completo",required:!0}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Ttulo que ver el cliente en la propuesta."})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),a.jsx("textarea",{className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-3 text-sm focus:ring-2 focus:ring-orange-500 transition-shadow",rows:"3",value:c.description,onChange:y=>d({...c,description:y.target.value}),placeholder:"Describe el contenido de esta plantilla..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Precio Total ()"}),a.jsxs("div",{className:"relative",children:[a.jsx(we,{type:"number",value:c.totalPrice,onChange:y=>d({...c,totalPrice:y.target.value}),placeholder:"0.00",required:!0,className:"pl-10"}),a.jsx(i5,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),a.jsx("div",{className:"flex items-center pt-8",children:a.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:c.is_default,onChange:y=>d({...c,is_default:y.target.checked}),className:"h-5 w-5 text-orange-600 focus:ring-orange-500 border-gray-300 rounded transition-colors"}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Marcar como plantilla predeterminada"})]})})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-100 dark:border-gray-700",children:[a.jsx("button",{type:"button",onClick:v,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancelar"}),a.jsxs("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2",children:[a.jsx($o,{className:"w-4 h-4"}),a.jsx("span",{children:s?"Actualizar Plantilla":"Crear Plantilla"})]})]})]})]}):a.jsxs("div",{className:"grid gap-4",children:[e.map(y=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-xl border border-gray-200 dark:border-gray-700 flex justify-between items-center hover:shadow-md transition-shadow group",children:[a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg text-orange-600 dark:text-orange-400",children:a.jsx(ht,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:y.name}),y.is_default&&a.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 text-xs font-medium rounded-full border border-green-200 dark:border-green-800",children:"Predeterminada"})]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:y.description||"Sin descripcin"}),a.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[a.jsx("span",{className:"text-xs font-medium text-gray-500 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:y.content_json.title}),a.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:parseFloat(y.content_json.totalPrice).toLocaleString("es-ES",{style:"currency",currency:"EUR"})})]})]})]}),a.jsxs("div",{className:"flex space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>x(y),className:"p-2 text-gray-500 hover:text-orange-600 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-lg transition-colors",title:"Editar",children:a.jsx(gu,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>h(y.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Eliminar",children:a.jsx(ln,{className:"w-5 h-5"})})]})]},y.id)),e.length===0&&!r&&a.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800/50 rounded-xl border-2 border-dashed border-gray-200 dark:border-gray-700",children:[a.jsx(ht,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No hay plantillas creadas an."}),a.jsx("button",{onClick:()=>l(!0),className:"mt-4 text-orange-600 hover:text-orange-700 font-medium text-sm",children:"Crear la primera plantilla"})]})]})]})},Q3=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(!0),[s,i]=S.useState(null),[o,l]=S.useState({name:"",color:"blue",icon:"Star"}),[c,d]=S.useState(!1),u=[{value:"blue",label:"Azul",class:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"},{value:"green",label:"Verde",class:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300"},{value:"yellow",label:"Amarillo",class:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300"},{value:"red",label:"Rojo",class:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300"},{value:"purple",label:"Morado",class:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300"},{value:"orange",label:"Naranja",class:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300"},{value:"gray",label:"Gris",class:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}],f=[{name:"Star",icon:a.jsx(al,{className:"w-5 h-5"})},{name:"User",icon:a.jsx(Ct,{className:"w-5 h-5"})},{name:"Phone",icon:a.jsx(bi,{className:"w-5 h-5"})},{name:"Mail",icon:a.jsx(gt,{className:"w-5 h-5"})},{name:"FileText",icon:a.jsx(ht,{className:"w-5 h-5"})},{name:"Send",icon:a.jsx(Ml,{className:"w-5 h-5"})},{name:"MessageSquare",icon:a.jsx(ea,{className:"w-5 h-5"})},{name:"CheckCircle",icon:a.jsx(zr,{className:"w-5 h-5"})},{name:"XCircle",icon:a.jsx(Ro,{className:"w-5 h-5"})},{name:"Clock",icon:a.jsx(sn,{className:"w-5 h-5"})},{name:"AlertCircle",icon:a.jsx(pu,{className:"w-5 h-5"})},{name:"Flag",icon:a.jsx(lj,{className:"w-5 h-5"})},{name:"Briefcase",icon:a.jsx(aj,{className:"w-5 h-5"})},{name:"Target",icon:a.jsx(ag,{className:"w-5 h-5"})},{name:"Award",icon:a.jsx(tj,{className:"w-5 h-5"})},{name:"Ban",icon:a.jsx(rj,{className:"w-5 h-5"})}];S.useEffect(()=>{h()},[]);const h=async()=>{try{const b=await fetch(`${U}/settings/lead-statuses`,{headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}});if(b.ok){const N=await b.json();t(N)}}catch(b){console.error("Error fetching statuses:",b)}finally{n(!1)}},x=()=>{if(!o.name.trim())return;const N={id:Math.max(...e.map(C=>C.id),0)+1,...o,position:e.length+1,is_system:!1};t([...e,N]),l({name:"",color:"blue",icon:"Star"}),d(!1)},v=b=>{const N=e.find(C=>C.id===b);if(N!=null&&N.is_system){alert("No puedes eliminar estados del sistema");return}confirm("Ests seguro de eliminar este estado?")&&t(e.filter(C=>C.id!==b))},y=(b,N)=>{b.dataTransfer.setData("dragIndex",N.toString())},w=b=>{b.preventDefault()},g=(b,N)=>{b.preventDefault();const C=parseInt(b.dataTransfer.getData("dragIndex")),E=[...e],[T]=E.splice(C,1);E.splice(N,0,T),E.forEach((O,M)=>{O.position=M+1}),t(E)},p=b=>{var N;return((N=u.find(C=>C.value===b))==null?void 0:N.class)||u[0].class},j=b=>{const N=f.find(C=>C.name===b);return N?N.icon:a.jsx(al,{className:"w-5 h-5"})};return a.jsxs("div",{className:"max-w-4xl space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Estados de Leads"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Personaliza los estados del pipeline de ventas"})]}),a.jsxs("button",{onClick:()=>d(!c),className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2",children:[a.jsx(Wr,{className:"w-4 h-4"}),a.jsx("span",{children:"Nuevo Estado"})]})]}),c&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Agregar Nuevo Estado"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre"}),a.jsx("input",{type:"text",value:o.name,onChange:b=>l({...o,name:b.target.value}),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500",placeholder:"Ej: En Negociacin"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),a.jsx("select",{value:o.color,onChange:b=>l({...o,color:b.target.value}),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500",children:u.map(b=>a.jsx("option",{value:b.value,children:b.label},b.value))})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Icono"}),a.jsx("div",{className:"grid grid-cols-8 gap-2",children:f.map(b=>a.jsx("button",{onClick:()=>l({...o,icon:b.name}),className:`p-2 rounded-lg flex items-center justify-center transition-all ${o.icon===b.name?"bg-orange-100 text-orange-600 ring-2 ring-orange-500":"bg-gray-50 text-gray-500 hover:bg-gray-100"}`,title:b.name,children:b.icon},b.name))})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-100 dark:border-gray-700",children:[a.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancelar"}),a.jsxs("button",{onClick:x,className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2",children:[a.jsx(tn,{className:"w-4 h-4"}),a.jsx("span",{children:"Guardar"})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm",children:[a.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center space-x-2",children:[a.jsx(Ny,{className:"w-4 h-4"}),a.jsx("span",{children:"Arrastra para reordenar. Los estados del sistema no se pueden eliminar."})]})}),a.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.map((b,N)=>a.jsxs("div",{draggable:!b.is_system,onDragStart:C=>y(C,N),onDragOver:w,onDrop:C=>g(C,N),className:`p-4 flex items-center justify-between ${b.is_system?"":"cursor-move hover:bg-gray-50 dark:hover:bg-gray-700/50"} transition-colors`,children:[a.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[!b.is_system&&a.jsx(Ny,{className:"w-5 h-5 text-gray-400"}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300",children:j(b.icon)}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:b.name}),b.is_system&&a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Estado del sistema"})]})]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${p(b.color)}`,children:b.color})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 mr-4",children:["Posicin ",b.position]}),!b.is_system&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>i(b.id),className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:a.jsx(gu,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>v(b.id),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",children:a.jsx(ln,{className:"w-4 h-4"})})]})]})]},b.id))})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:async()=>{try{const b=await fetch(`${U}/settings/lead-statuses`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`},body:JSON.stringify({statuses:e})});if(b.ok){const N=await b.json();t(N),alert("Estados guardados correctamente")}else alert("Error al guardar estados")}catch(b){console.error("Error saving statuses:",b),alert("Error al guardar estados")}},className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2",children:[a.jsx(tn,{className:"w-4 h-4"}),a.jsx("span",{children:"Guardar Cambios"})]})})]})},Z3=()=>{const[e,t]=S.useState({enabled:!1,send_initial_proposal:!0,reminder_1_enabled:!0,reminder_1_days:2,reminder_2_enabled:!0,reminder_2_days:4,email_template_initial:null,email_template_reminder_1:null,email_template_reminder_2:null}),[r,n]=S.useState(!1),[s,i]=S.useState([]);S.useEffect(()=>{o(),l()},[]);const o=async()=>{try{t({enabled:!1,send_initial_proposal:!0,reminder_1_enabled:!0,reminder_1_days:2,reminder_2_enabled:!0,reminder_2_days:4})}catch(u){console.error("Error fetching automation settings:",u)}},l=async()=>{try{i([{id:1,lead_name:"Ana Garca",action:"initial_proposal",status:"sent",timestamp:"2025-12-03 10:30"},{id:2,lead_name:"Hotel Playa Azul",action:"reminder_1",status:"sent",timestamp:"2025-12-03 09:15"},{id:3,lead_name:"Burger Express",action:"reminder_2",status:"sent",timestamp:"2025-12-02 14:20"}])}catch(u){console.error("Error fetching logs:",u)}},c=async()=>{n(!0);try{await new Promise(u=>setTimeout(u,1e3)),alert("Configuracin guardada correctamente")}catch(u){console.error("Error saving settings:",u),alert("Error al guardar la configuracin")}finally{n(!1)}},d=u=>({initial_proposal:"Propuesta Inicial",reminder_1:"Recordatorio 1",reminder_2:"Recordatorio 2"})[u]||u;return a.jsxs("div",{className:"max-w-4xl space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Automatizacin de Marketing"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Configura el seguimiento automtico de leads"})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(e3,{className:`w-6 h-6 ${e.enabled?"text-green-500":"text-gray-400"}`}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white",children:["Automatizacin ",e.enabled?"Activada":"Desactivada"]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.enabled?"Los leads se gestionan automticamente":"Gestin manual de leads"})]})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:e.enabled,onChange:u=>t({...e,enabled:u.target.checked}),className:"sr-only peer"}),a.jsx("div",{className:"w-14 h-7 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 dark:peer-focus:ring-orange-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all dark:border-gray-600 peer-checked:bg-orange-600"})]})]})}),e.enabled&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx(gt,{className:"w-5 h-5 text-orange-500"}),a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Propuesta Inicial"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",checked:e.send_initial_proposal,onChange:u=>t({...e,send_initial_proposal:u.target.checked}),className:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Enviar propuesta automticamente al crear un lead"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Plantilla de Email"}),a.jsxs("select",{className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",children:[a.jsx("option",{children:"Plantilla por defecto"}),a.jsx("option",{children:"Propuesta Comercial Estndar"}),a.jsx("option",{children:"Propuesta Premium"})]})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx(sn,{className:"w-5 h-5 text-yellow-500"}),a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Primer Recordatorio"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",checked:e.reminder_1_enabled,onChange:u=>t({...e,reminder_1_enabled:u.target.checked}),className:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Enviar recordatorio si no abre la propuesta"})]}),e.reminder_1_enabled&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Das de espera"}),a.jsx("input",{type:"number",value:e.reminder_1_days,onChange:u=>t({...e,reminder_1_days:parseInt(u.target.value)}),min:"1",max:"30",className:"w-32 px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"}),a.jsx("span",{className:"ml-2 text-sm text-gray-500 dark:text-gray-400",children:"das"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Plantilla de Email"}),a.jsxs("select",{className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",children:[a.jsx("option",{children:"Recordatorio Amigable"}),a.jsx("option",{children:"Recordatorio con Beneficios"})]})]})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx(sn,{className:"w-5 h-5 text-orange-500"}),a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Segundo Recordatorio"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",checked:e.reminder_2_enabled,onChange:u=>t({...e,reminder_2_enabled:u.target.checked}),className:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Enviar segundo recordatorio"})]}),e.reminder_2_enabled&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Das de espera"}),a.jsx("input",{type:"number",value:e.reminder_2_days,onChange:u=>t({...e,reminder_2_days:parseInt(u.target.value)}),min:"1",max:"30",className:"w-32 px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"}),a.jsx("span",{className:"ml-2 text-sm text-gray-500 dark:text-gray-400",children:"das"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Plantilla de Email"}),a.jsxs("select",{className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",children:[a.jsx("option",{children:"ltima Oportunidad"}),a.jsx("option",{children:"Oferta Especial"})]})]})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Registro de Actividad"}),a.jsx("div",{className:"space-y-2",children:s.map(u=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:`w-2 h-2 rounded-full ${u.status==="sent"?"bg-green-500":"bg-red-500"}`}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:u.lead_name}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:d(u.action)})]})]}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:u.timestamp})]},u.id))})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancelar"}),a.jsxs("button",{onClick:c,disabled:r,className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2 disabled:opacity-50",children:[a.jsx(tn,{className:"w-4 h-4"}),a.jsx("span",{children:r?"Guardando...":"Guardar Configuracin"})]})]})]})},eD=()=>{const[e,t]=S.useState(!1),[r,n]=S.useState(!0),[s,i]=S.useState([]),[o,l]=S.useState("");S.useEffect(()=>{c()},[]);const c=async()=>{try{setTimeout(()=>{t(!1),n(!1)},1e3)}catch(f){console.error("Error checking calendar status:",f),n(!1)}},d=()=>{window.location.href=`${U}/auth/google`},u=async()=>{confirm("Ests seguro de desconectar tu cuenta de Google Calendar?")&&(t(!1),i([]))};return r?a.jsx("div",{className:"p-8 text-center text-gray-500",children:"Cargando estado de conexin..."}):a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:a.jsx(Pl,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Google Calendar"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Sincroniza tus eventos y reuniones automticamente"})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:`p-4 rounded-lg border ${e?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-gray-700/30 border-gray-200 dark:border-gray-600"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${e?"bg-green-500":"bg-gray-400"}`}),a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:e?"Cuenta Conectada":"No Conectado"})]}),e&&a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"admin@noahpro.com"})]})}),e?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Calendario Principal"}),a.jsxs("select",{value:o,onChange:f=>l(f.target.value),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",children:[a.jsx("option",{value:"",children:"Seleccionar calendario..."}),a.jsx("option",{value:"primary",children:"Principal (admin@noahpro.com)"}),a.jsx("option",{value:"work",children:"Trabajo"})]})]}),a.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("button",{onClick:u,className:"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 text-sm font-medium flex items-center space-x-1",children:[a.jsx(_r,{className:"w-4 h-4"}),a.jsx("span",{children:"Desconectar cuenta"})]})})]}):a.jsxs("button",{onClick:d,className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-white border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-gray-700 dark:text-gray-200 font-medium",children:[a.jsx("img",{src:"https://www.google.com/favicon.ico",alt:"Google",className:"w-5 h-5"}),a.jsx("span",{children:"Conectar con Google"})]})]})]}),a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-xl p-6 border border-orange-100 dark:border-orange-800",children:[a.jsx("h4",{className:"font-semibold text-orange-900 dark:text-orange-100 mb-4",children:"Beneficios de la integracin"}),a.jsxs("ul",{className:"space-y-3",children:[a.jsxs("li",{className:"flex items-start space-x-3 text-sm text-orange-800 dark:text-orange-200",children:[a.jsx($o,{className:"w-5 h-5 text-orange-600 dark:text-orange-400 flex-shrink-0"}),a.jsx("span",{children:"Sincronizacin bidireccional de eventos"})]}),a.jsxs("li",{className:"flex items-start space-x-3 text-sm text-orange-800 dark:text-orange-200",children:[a.jsx($o,{className:"w-5 h-5 text-orange-600 dark:text-orange-400 flex-shrink-0"}),a.jsx("span",{children:"Generacin automtica de links de Google Meet"})]}),a.jsxs("li",{className:"flex items-start space-x-3 text-sm text-orange-800 dark:text-orange-200",children:[a.jsx($o,{className:"w-5 h-5 text-orange-600 dark:text-orange-400 flex-shrink-0"}),a.jsx("span",{children:"Bloqueo automtico de horarios ocupados"})]})]})]})})]})},tD=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(!0),[s,i]=S.useState(!1),[o,l]=S.useState(null),[c,d]=S.useState(""),u=jt(),[f,h]=S.useState({username:"",email:"",full_name:"",password:"",role:"admin"}),[x,v]=S.useState({isOpen:!1,title:"",message:"",onConfirm:null});S.useEffect(()=>{y()},[]);const y=async()=>{try{const C=await fetch(`${U}/users`,{headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")} `}});if(C.ok){const E=await C.json();console.log("Fetched users:",E),t(E)}else console.error("Failed to fetch users:",C.status)}catch(C){console.error("Error fetching users:",C),u.error("Error al cargar usuarios")}finally{n(!1)}},w=C=>{const{name:E,value:T}=C.target;h(O=>({...O,[E]:T}))},g=()=>{h({username:"",email:"",full_name:"",password:"",role:"admin"}),l(null),i(!1)},p=async C=>{C.preventDefault();try{const E=o?`${U}/users/${o.id}`:`${U}/users`,T=o?"PUT":"POST",O={...f};o&&!O.password&&delete O.password;const M=await fetch(E,{method:T,headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`},body:JSON.stringify(O)});let R;try{R=await M.json()}catch{R={}}if(!M.ok)throw new Error(R.error||"Error al guardar usuario");u.success(o?"Usuario actualizado":"Usuario creado exitosamente"),y(),g()}catch(E){console.error("Error saving user:",E),u.error(E.message||"Error al guardar usuario")}},j=C=>{l(C),h({username:C.username,email:C.email,full_name:C.full_name||"",password:"",role:C.role}),i(!0)},b=C=>{v({isOpen:!0,title:"Eliminar Usuario",message:`Ests seguro de que deseas eliminar al usuario "${C.username}"? Esta accin no se puede deshacer.`,onConfirm:async()=>{try{const E=await fetch(`${U}/users/${C.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}});let T;try{T=await E.json()}catch{T={}}if(!E.ok)throw new Error(T.error||"Error al eliminar usuario");u.success("Usuario eliminado correctamente"),y()}catch(E){console.error("Error deleting user:",E),u.error(E.message||"Error al eliminar usuario")}v({...x,isOpen:!1})}})},N=e.filter(C=>C.username.toLowerCase().includes(c.toLowerCase())||C.email.toLowerCase().includes(c.toLowerCase())||C.full_name&&C.full_name.toLowerCase().includes(c.toLowerCase()));return r?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(Ct,{className:"w-5 h-5 text-gray-500"}),"Gestin de Usuarios"]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Administra los accesos al panel CRM"})]}),a.jsxs(We,{onClick:()=>{g(),i(!0)},className:"bg-orange-500 hover:bg-orange-600 text-white",children:[a.jsx(Wr,{className:"w-4 h-4 mr-2"}),"Nuevo Usuario"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ng,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar usuarios...",value:c,onChange:C=>d(C.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Usuario"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Rol"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Fecha Creacin"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Acciones"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:N.map(C=>a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center text-orange-600 dark:text-orange-400 font-bold",children:C.username.charAt(0).toUpperCase()}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:C.full_name||C.username}),a.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["@",C.username]})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:C.email}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",children:C.role})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(C.created_at).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[a.jsx("button",{onClick:()=>j(C),className:"p-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",title:"Editar",children:a.jsx(uj,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>b(C),className:"p-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors",title:"Eliminar",children:a.jsx(ln,{className:"w-4 h-4"})})]})})]},C.id))})]}),N.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ct,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No se encontraron usuarios"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Intenta con otra bsqueda o crea un nuevo usuario."})]})]}),s&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full p-6 shadow-2xl",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:o?"Editar Usuario":"Nuevo Usuario"}),a.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:a.jsx(_r,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:p,className:"space-y-4",children:[a.jsx(we,{label:"Nombre Completo",name:"full_name",value:f.full_name,onChange:w,placeholder:"Ej: Juan Prez",icon:a.jsx(Ct,{className:"w-4 h-4"})}),a.jsx(we,{label:"Usuario",name:"username",value:f.username,onChange:w,placeholder:"Ej: jperez",required:!0,icon:a.jsx(Ct,{className:"w-4 h-4"})}),a.jsx(we,{label:"Email",type:"email",name:"email",value:f.email,onChange:w,placeholder:"ejemplo@correo.com",required:!0,icon:a.jsx(gt,{className:"w-4 h-4"})}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Contrasea ",o&&a.jsx("span",{className:"text-xs text-gray-500 font-normal",children:"(Dejar en blanco para mantener actual)"})]}),a.jsx("div",{className:"relative",children:a.jsx(we,{type:"password",name:"password",value:f.password,onChange:w,placeholder:"",required:!o,icon:a.jsx(nl,{className:"w-4 h-4"})})})]}),a.jsxs("div",{className:"pt-4 flex gap-3",children:[a.jsx(We,{type:"button",onClick:()=>i(!1),className:"flex-1 bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300",children:"Cancelar"}),a.jsx(We,{type:"submit",className:"flex-1 bg-gradient-to-r from-orange-500 to-red-600 text-white",children:o?"Actualizar":"Crear Usuario"})]})]})]})}),a.jsx(Ri,{isOpen:x.isOpen,onClose:()=>v({...x,isOpen:!1}),onConfirm:x.onConfirm,title:x.title,message:x.message})]})},rD=()=>{const e=jt(),[t,r]=S.useState([]),[n,s]=S.useState(null),[i,o]=S.useState(""),[l,c]=S.useState(!0),[d,u]=S.useState(!1),[f,h]=S.useState("split"),x=S.useRef(null);S.useEffect(()=>{v()},[]);const v=async()=>{try{const b=await fetch(`${U}/email-templates`,{headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}});if(b.ok){const N=await b.json();r(N)}else e.error("Error al cargar plantillas")}catch(b){console.error("Error fetching templates:",b),e.error("Error de conexin")}finally{c(!1)}},y=b=>{s(b),o(b.content),h("split")},w=async()=>{if(n){u(!0);try{(await fetch(`${U}/email-templates/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`},body:JSON.stringify({content:i})})).ok?(e.success(" Plantilla guardada correctamente"),v()):e.error("Error al guardar plantilla")}catch(b){console.error("Error saving template:",b),e.error("Error de conexin")}finally{u(!1)}}},g=b=>{if(!x.current)return;const N=x.current.selectionStart,C=x.current.selectionEnd,E=i,T=E.substring(0,N),O=E.substring(C,E.length);o(T+b+O),setTimeout(()=>{x.current.focus(),x.current.setSelectionRange(N+b.length,N+b.length)},0)},p=b=>({proposal:" Plantilla de Propuesta",welcome:" Plantilla de Bienvenida",notification:" Plantilla de Notificacin",invoice:" Plantilla de Factura",receipt:" Plantilla de Recibo"})[b.id]||b.name,j=[{var:"{{name}}",desc:"Nombre del cliente"},{var:"{{businessName}}",desc:"Nombre del negocio"},{var:"{{proposalTitle}}",desc:"Ttulo de la propuesta"},{var:"{{proposalPrice}}",desc:"Precio total"},{var:"{{proposalUrl}}",desc:"Enlace a la propuesta"},{var:"{{frontendUrl}}",desc:"URL del CRM"},{var:"{{year}}",desc:"Ao actual"}];return l?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(Cy,{className:"w-8 h-8 text-orange-500 animate-spin"})}):a.jsx("div",{className:"space-y-4 h-full max-w-full overflow-x-hidden",children:n?a.jsxs("div",{className:"flex flex-col h-[calc(100vh-100px)] space-y-1 max-w-full",children:[a.jsxs("div",{className:"flex items-center justify-between shrink-0",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>s(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:a.jsx(rg,{className:"w-5 h-5 text-gray-500"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:p(n)}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Editor HTML con Vista Previa"})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[a.jsxs("button",{onClick:()=>h("code"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors flex items-center space-x-2 ${f==="code"?"bg-white dark:bg-gray-600 text-orange-600 shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-900"}`,children:[a.jsx(e5,{className:"w-4 h-4"}),a.jsx("span",{children:"Cdigo"})]}),a.jsxs("button",{onClick:()=>h("split"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors flex items-center space-x-2 ${f==="split"?"bg-white dark:bg-gray-600 text-orange-600 shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-900"}`,children:[a.jsx(hj,{className:"w-4 h-4"}),a.jsx("span",{children:"Dividido"})]}),a.jsxs("button",{onClick:()=>h("preview"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors flex items-center space-x-2 ${f==="preview"?"bg-white dark:bg-gray-600 text-orange-600 shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-900"}`,children:[a.jsx(Nr,{className:"w-4 h-4"}),a.jsx("span",{children:"Vista Previa"})]})]}),a.jsxs("button",{onClick:w,disabled:d,className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2 disabled:opacity-50",children:[d?a.jsx(Cy,{className:"w-4 h-4 animate-spin"}):a.jsx(tn,{className:"w-4 h-4"}),a.jsx("span",{children:d?"Guardando...":"Guardar"})]})]})]}),a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-1.5 rounded border border-blue-100 dark:border-blue-800 shrink-0",children:a.jsx("div",{className:"flex flex-wrap gap-1",children:j.map(b=>a.jsx("button",{onClick:()=>g(b.var),className:"px-2 py-1 bg-white dark:bg-gray-800 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-700 rounded text-xs hover:bg-blue-50 dark:hover:bg-blue-900/50 transition-colors font-mono shadow-sm whitespace-nowrap",title:b.desc,children:b.var},b.var))})}),a.jsxs("div",{className:"flex-1 min-h-0 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden flex",children:[(f==="code"||f==="split")&&a.jsxs("div",{className:`flex flex-col border-r border-gray-200 dark:border-gray-700 ${f==="split"?"w-[40%]":"w-full"} overflow-hidden`,children:[a.jsx("div",{className:"bg-gray-100 dark:bg-gray-900 px-4 py-2 text-xs font-mono text-gray-500 border-b border-gray-200 dark:border-gray-700 shrink-0",children:"HTML SOURCE"}),a.jsx("textarea",{ref:x,value:i,onChange:b=>o(b.target.value),className:"flex-1 w-full p-4 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200 font-mono text-xs focus:outline-none resize-none overflow-auto",spellCheck:!1})]}),(f==="preview"||f==="split")&&a.jsxs("div",{className:`flex flex-col bg-white ${f==="split"?"w-[60%]":"w-full"} overflow-hidden`,children:[a.jsxs("div",{className:"bg-gray-100 dark:bg-gray-900 px-4 py-2 text-xs font-mono text-gray-500 border-b border-gray-200 dark:border-gray-700 flex justify-between shrink-0",children:[a.jsx("span",{children:"PREVIEW"}),a.jsx("span",{className:"text-orange-500",children:"Renderizado Real"})]}),a.jsx("div",{className:"flex-1 bg-gray-200 p-4 overflow-auto",children:a.jsx("div",{className:"bg-white shadow-lg mx-auto",style:{maxWidth:"100%"},children:a.jsx("iframe",{title:"preview",srcDoc:i,className:"w-full border-none",style:{height:"1400px",maxWidth:"100%"},sandbox:"allow-same-origin"})})})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Plantillas de Email HTML"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Edita el cdigo HTML de tus plantillas de correo con vista previa en tiempo real"})]}),a.jsx("div",{className:"grid gap-4 max-w-full",children:t.map(b=>a.jsx("div",{onClick:()=>y(b),className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-orange-500 hover:shadow-lg transition-all cursor-pointer group",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg text-orange-600 dark:text-orange-400 group-hover:scale-110 transition-transform",children:a.jsx(gt,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:p(b)}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ltima actualizacin: ",new Date(b.updated_at).toLocaleDateString("es-ES")]})]})]}),a.jsx(Nr,{className:"w-5 h-5 text-gray-400 group-hover:text-orange-500 transition-colors"})]})},b.id))})]})})},nD=()=>{const[e,t]=S.useState({invoice_prefix:"INV-",next_invoice_number:1,default_tax_rate:21,invoice_due_days:30,auto_invoice_on_proposal_accept:!1}),[r,n]=S.useState(!0),[s,i]=S.useState(!1),o=jt();S.useEffect(()=>{l()},[]);const l=async()=>{try{const u=localStorage.getItem("crm_token"),f=await fetch(`${U}/settings`,{headers:{Authorization:`Bearer ${u}`}});if(!f.ok)throw new Error("Error al cargar configuracin");const h=await f.json();t({invoice_prefix:h.invoice_prefix||"INV-",next_invoice_number:h.next_invoice_number||1,default_tax_rate:h.default_tax_rate||21,invoice_due_days:h.invoice_due_days||30,auto_invoice_on_proposal_accept:h.auto_invoice_on_proposal_accept||!1})}catch(u){console.error("Error fetching invoice settings:",u),o.error("Error al cargar la configuracin")}finally{n(!1)}},c=u=>{const{name:f,value:h,type:x,checked:v}=u.target;t(y=>({...y,[f]:x==="checkbox"?v:h}))},d=async u=>{u.preventDefault(),i(!0);try{const f=localStorage.getItem("crm_token");if(!(await fetch(`${U}/settings`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f}`},body:JSON.stringify(e)})).ok)throw new Error("Error al guardar");o.success("Configuracin guardada correctamente")}catch(f){console.error("Error saving invoice settings:",f),o.error("Error al guardar la configuracin")}finally{i(!1)}};return r?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})}):a.jsx("div",{className:"space-y-8",children:a.jsx("form",{onSubmit:d,children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center space-x-2 mb-4",children:[a.jsx(ht,{className:"w-5 h-5 text-gray-500"}),a.jsx("span",{children:"Configuracin de Facturacin"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Prefijo de Factura"}),a.jsxs("div",{className:"relative",children:[a.jsx(we,{name:"invoice_prefix",value:e.invoice_prefix,onChange:c,placeholder:"Ej: INV-2024-"}),a.jsx(_y,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Prefijo para los nmeros de factura (ej: INV-2024-001)"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Prximo Nmero"}),a.jsxs("div",{className:"relative",children:[a.jsx(we,{type:"number",name:"next_invoice_number",value:e.next_invoice_number,onChange:c,min:"1"}),a.jsx(_y,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"El nmero que se asignar a la siguiente factura"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Impuesto por Defecto (%)"}),a.jsxs("div",{className:"relative",children:[a.jsx(we,{type:"number",name:"default_tax_rate",value:e.default_tax_rate,onChange:c,min:"0",max:"100",step:"0.1"}),a.jsx(K5,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Das de Vencimiento"}),a.jsxs("div",{className:"relative",children:[a.jsx(we,{type:"number",name:"invoice_due_days",value:e.invoice_due_days,onChange:c,min:"0"}),a.jsx(Pl,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Das para el vencimiento de la factura por defecto"})]})]})]}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center space-x-2 mb-4",children:[a.jsx(zr,{className:"w-5 h-5 text-gray-500"}),a.jsx("span",{children:"Automatizacin"})]}),a.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/30 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex items-center h-5",children:a.jsx("input",{id:"auto_invoice_on_proposal_accept",name:"auto_invoice_on_proposal_accept",type:"checkbox",checked:e.auto_invoice_on_proposal_accept,onChange:c,className:"focus:ring-orange-500 h-4 w-4 text-orange-600 border-gray-300 rounded"})}),a.jsxs("div",{className:"ml-3 text-sm",children:[a.jsx("label",{htmlFor:"auto_invoice_on_proposal_accept",className:"font-medium text-gray-700 dark:text-gray-300",children:"Generar factura automticamente al aceptar propuesta"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Cuando un cliente acepte una propuesta, se crear automticamente una factura en borrador y se enviar por email si est configurado."})]})]})})]}),a.jsx("div",{className:"flex justify-end pt-4 sticky bottom-0 bg-white dark:bg-gray-800 p-4 border-t border-gray-100 dark:border-gray-700 -mx-6 -mb-6 rounded-b-xl",children:a.jsxs("button",{type:"submit",disabled:s,className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2 disabled:opacity-50",children:[a.jsx(tn,{className:"w-4 h-4"}),a.jsx("span",{children:s?"Guardando...":"Guardar Cambios"})]})})]})})})},aD=()=>{var v,y;const[e,t]=S.useState("general"),r=[{id:"general",label:"General",icon:a.jsx(fj,{className:"w-5 h-5"})},{id:"company",label:"Datos Empresa",icon:a.jsx(Vc,{className:"w-5 h-5"})},{id:"users",label:"Usuarios",icon:a.jsx(Ct,{className:"w-5 h-5"})},{id:"statuses",label:"Estados",icon:a.jsx(Ol,{className:"w-5 h-5"})},{id:"automation",label:"Automatizacin",icon:a.jsx(R4,{className:"w-5 h-5"})},{id:"invoices",label:"Facturacin",icon:a.jsx(ht,{className:"w-5 h-5"})},{id:"integrations",label:"Integraciones",icon:a.jsx(Ey,{className:"w-5 h-5"})},{id:"email_templates",label:"Plantillas Email",icon:a.jsx(gt,{className:"w-5 h-5"})},{id:"proposal_templates",label:"Plantillas Propuestas",icon:a.jsx(ht,{className:"w-5 h-5"})},{id:"smtp",label:"Email (SMTP)",icon:a.jsx(gt,{className:"w-5 h-5"})},{id:"notifications",label:"Notificaciones",icon:a.jsx(nj,{className:"w-5 h-5"})}],[n,s]=S.useState({api_url:"",frontend_url:"",demo_url:"",chat_title:"Soporte NoahPro",chat_welcome_message:"Hola! En qu podemos ayudarte hoy?",chat_primary_color:"#f97316",chat_enabled:!0,pusher_app_id:"",pusher_key:"",pusher_secret:"",pusher_cluster:"eu",company_name:"",company_address:"",company_city:"",company_postal_code:"",company_nif:"",company_phone:"",company_email:"",company_website:"",company_logo:"",smtp_host:"",smtp_port:587,smtp_user:"",smtp_password:"",smtp_secure:!0,smtp_from_name:"NoahPro CRM",smtp_from_email:""}),[i,o]=S.useState(!0),[l,c]=S.useState(!1),[d,u]=S.useState({type:"",text:""});S.useEffect(()=>{f()},[]);const f=async()=>{try{const w=localStorage.getItem("crm_token"),g=await fetch(`${U}/settings`,{headers:{Authorization:`Bearer ${w}`}});if(!g.ok)throw new Error("Error al cargar configuracin");const p=await g.json();s({demo_url:p.demo_url||"",chat_title:p.chat_title||"Soporte NoahPro",chat_welcome_message:p.chat_welcome_message||"Hola! En qu podemos ayudarte hoy?",chat_primary_color:p.chat_primary_color||"#f97316",chat_enabled:p.chat_enabled!==void 0?p.chat_enabled:!0,pusher_app_id:p.pusher_app_id||"",pusher_key:p.pusher_key||"",pusher_secret:p.pusher_secret||"",pusher_cluster:p.pusher_cluster||"eu",company_name:p.company_name||"",company_address:p.company_address||"",company_city:p.company_city||"",company_postal_code:p.company_postal_code||"",company_nif:p.company_nif||"",company_phone:p.company_phone||"",company_email:p.company_email||"",company_website:p.company_website||"",company_logo:p.company_logo||"",smtp_host:p.smtp_host||"",smtp_port:p.smtp_port||587,smtp_user:p.smtp_user||"",smtp_password:p.smtp_password||"",smtp_secure:p.smtp_secure!==void 0?p.smtp_secure:!0,smtp_from_name:p.smtp_from_name||"NoahPro CRM",smtp_from_email:p.smtp_from_email||""})}catch(w){console.error("Error fetching settings:",w),u({type:"error",text:"Error al cargar la configuracin"})}finally{o(!1)}},h=w=>{const{name:g,value:p,type:j,checked:b}=w.target;s(N=>({...N,[g]:j==="checkbox"?b:p}))},x=async w=>{w.preventDefault(),c(!0),u({type:"",text:""});try{const g=localStorage.getItem("crm_token");if(!(await fetch(`${U}/settings`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify(n)})).ok)throw new Error("Error al guardar");u({type:"success",text:"Configuracin guardada correctamente"}),setTimeout(()=>u({type:"",text:""}),3e3)}catch(g){console.error("Error saving settings:",g),u({type:"error",text:"Error al guardar la configuracin"})}finally{c(!1)}};return i?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})}):a.jsxs("div",{className:"flex flex-col md:flex-row gap-6 min-h-[600px]",children:[a.jsx("div",{className:"w-full md:w-64 flex-shrink-0",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden sticky top-6",children:[a.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Configuracin"})}),a.jsx("nav",{className:"p-2 space-y-1",children:r.map(w=>a.jsxs("button",{onClick:()=>t(w.id),className:`w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all ${e===w.id?"bg-orange-50 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[w.icon,a.jsx("span",{children:w.label})]},w.id))})]})}),a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 min-h-full",children:[a.jsxs("div",{className:"md:hidden p-4 border-b border-gray-200 dark:border-gray-700 flex items-center space-x-2",children:[(v=r.find(w=>w.id===e))==null?void 0:v.icon,a.jsx("h2",{className:"font-bold text-gray-900 dark:text-white",children:(y=r.find(w=>w.id===e))==null?void 0:y.label})]}),a.jsxs("div",{className:"p-6",children:[e==="users"&&a.jsx(tD,{}),e==="statuses"&&a.jsx(Q3,{}),e==="automation"&&a.jsx(Z3,{}),e==="invoices"&&a.jsx(nD,{}),e==="integrations"&&a.jsx(eD,{}),e==="email_templates"&&a.jsx(rD,{}),e==="proposal_templates"&&a.jsx(J3,{}),e==="smtp"&&a.jsx("div",{className:"space-y-8",children:a.jsx("form",{onSubmit:x,children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center space-x-2 mb-4",children:[a.jsx(gt,{className:"w-5 h-5 text-gray-500"}),a.jsx("span",{children:"Configuracin SMTP (Envo de Emails)"})]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"Configura el servidor de correo para enviar facturas y comprobantes."}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Servidor SMTP (Host)"}),a.jsxs("div",{className:"relative",children:[a.jsx(we,{name:"smtp_host",value:n.smtp_host,onChange:h,placeholder:"smtp.gmail.com"}),a.jsx(ds,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Puerto"}),a.jsxs("div",{className:"relative",children:[a.jsx(we,{type:"number",name:"smtp_port",value:n.smtp_port,onChange:h,placeholder:"587"}),a.jsx(Ey,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Seguridad (SSL/TLS)"}),a.jsx("div",{className:"flex items-center space-x-2 mt-2",children:a.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",name:"smtp_secure",checked:n.smtp_secure,onChange:w=>s(g=>({...g,smtp_secure:w.target.checked})),className:"form-checkbox h-5 w-5 text-orange-500 rounded border-gray-300 focus:ring-orange-500"}),a.jsx("span",{className:"ml-2 text-gray-700 dark:text-gray-300",children:"Usar conexin segura"})]})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Usuario SMTP"}),a.jsxs("div",{className:"relative",children:[a.jsx(we,{name:"smtp_user",value:n.smtp_user,onChange:h,placeholder:"usuario@dominio.com"}),a.jsx(Ct,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Contrasea SMTP"}),a.jsxs("div",{className:"relative",children:[a.jsx(we,{type:"password",name:"smtp_password",value:n.smtp_password,onChange:h,placeholder:"********"}),a.jsx(Sy,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre del Remitente"}),a.jsxs("div",{className:"relative",children:[a.jsx(we,{name:"smtp_from_name",value:n.smtp_from_name,onChange:h,placeholder:"Mi Empresa"}),a.jsx(Ct,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email del Remitente"}),a.jsxs("div",{className:"relative",children:[a.jsx(we,{type:"email",name:"smtp_from_email",value:n.smtp_from_email,onChange:h,placeholder:"no-reply@dominio.com"}),a.jsx(gt,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]})]}),a.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[a.jsxs("h4",{className:"text-sm font-semibold text-blue-800 dark:text-blue-300 mb-3 flex items-center space-x-2",children:[a.jsx(gt,{className:"w-4 h-4"}),a.jsx("span",{children:"Probar Configuracin SMTP"})]}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[a.jsx("div",{className:"flex-1",children:a.jsx(we,{type:"email",name:"test_email",value:n.test_email||"",onChange:h,placeholder:"correo@ejemplo.com"})}),a.jsxs("button",{type:"button",onClick:async()=>{if(!n.test_email){alert("Introduce un correo para enviar la prueba");return}try{const w=localStorage.getItem("crm_token"),g=await fetch(`${U}/settings/test-email`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${w}`},body:JSON.stringify({email:n.test_email,smtp_config:{host:n.smtp_host,port:n.smtp_port,secure:n.smtp_secure,user:n.smtp_user,password:n.smtp_password,from_name:n.smtp_from_name,from_email:n.smtp_from_email}})}),p=await g.json();g.ok?alert(" Correo de prueba enviado correctamente"):alert(" Error: "+(p.error||"No se pudo enviar el correo"))}catch(w){alert(" Error de conexin: "+w.message)}},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2 whitespace-nowrap",children:[a.jsx(gt,{className:"w-4 h-4"}),a.jsx("span",{children:"Enviar Correo de Prueba"})]})]}),a.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-2",children:"Enva un correo de prueba para verificar que la configuracin SMTP es correcta."})]})]}),a.jsx("div",{className:"flex justify-end pt-4 sticky bottom-0 bg-white dark:bg-gray-800 p-4 border-t border-gray-100 dark:border-gray-700 -mx-6 -mb-6 rounded-b-xl",children:a.jsxs("button",{type:"submit",disabled:l,className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2 disabled:opacity-50",children:[a.jsx(tn,{className:"w-4 h-4"}),a.jsx("span",{children:l?"Guardando...":"Guardar Cambios"})]})})]})})}),e==="notifications"&&a.jsx("div",{className:"space-y-8",children:a.jsx("form",{onSubmit:x,children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center space-x-2 mb-4",children:[a.jsx(Dy,{className:"w-5 h-5 text-gray-500"}),a.jsx("span",{children:"Pusher (Tiempo Real)"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"App ID"}),a.jsx(we,{name:"pusher_app_id",value:n.pusher_app_id||"",onChange:h,placeholder:"Ej: 1234567"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Key"}),a.jsx(we,{name:"pusher_key",value:n.pusher_key||"",onChange:h,placeholder:"Ej: a1b2c3d4e5..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Secret"}),a.jsxs("div",{className:"relative",children:[a.jsx(we,{name:"pusher_secret",type:"password",value:n.pusher_secret||"",onChange:h,placeholder:"Ej: f9e8d7c6b5..."}),a.jsx(Sy,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cluster"}),a.jsxs("div",{className:"relative",children:[a.jsx(we,{name:"pusher_cluster",value:n.pusher_cluster||"",onChange:h,placeholder:"Ej: eu"}),a.jsx(ds,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]})]})]}),d.text&&a.jsxs("div",{className:`p-4 rounded-lg flex items-center space-x-2 ${d.type==="success"?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`,children:[d.type==="success"?a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}):a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),a.jsx("span",{children:d.text})]}),a.jsx("div",{className:"flex justify-end pt-4 sticky bottom-0 bg-white dark:bg-gray-800 p-4 border-t border-gray-100 dark:border-gray-700 -mx-6 -mb-6 rounded-b-xl",children:a.jsxs("button",{type:"submit",disabled:l,className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2 disabled:opacity-50",children:[a.jsx(tn,{className:"w-4 h-4"}),a.jsx("span",{children:l?"Guardando...":"Guardar Cambios"})]})})]})})}),e==="company"&&a.jsx("div",{className:"space-y-8",children:a.jsx("form",{onSubmit:x,children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center space-x-2 mb-4",children:[a.jsx(Vc,{className:"w-5 h-5 text-gray-500"}),a.jsx("span",{children:"Datos Fiscales y de Contacto"})]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"Esta informacin aparecer en tus facturas y documentos."}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre Fiscal / Razn Social"}),a.jsxs("div",{className:"relative",children:[a.jsx(we,{name:"company_name",value:n.company_name,onChange:h,placeholder:"Ej: Mi Empresa S.L."}),a.jsx(Vc,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"NIF / CIF"}),a.jsxs("div",{className:"relative",children:[a.jsx(we,{name:"company_nif",value:n.company_nif,onChange:h,placeholder:"Ej: B12345678"}),a.jsx(n5,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Telfono"}),a.jsxs("div",{className:"relative",children:[a.jsx(we,{name:"company_phone",value:n.company_phone,onChange:h,placeholder:"Ej: +34 900 000 000"}),a.jsx(bi,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Direccin"}),a.jsxs("div",{className:"relative",children:[a.jsx(we,{name:"company_address",value:n.company_address,onChange:h,placeholder:"Calle Principal 123"}),a.jsx(R5,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cdigo Postal"}),a.jsx(we,{name:"company_postal_code",value:n.company_postal_code,onChange:h,placeholder:"28000"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ciudad"}),a.jsx(we,{name:"company_city",value:n.company_city,onChange:h,placeholder:"Madrid"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email de Contacto"}),a.jsxs("div",{className:"relative",children:[a.jsx(we,{type:"email",name:"company_email",value:n.company_email,onChange:h,placeholder:"facturacion@miempresa.com"}),a.jsx(gt,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sitio Web"}),a.jsxs("div",{className:"relative",children:[a.jsx(we,{type:"url",name:"company_website",value:n.company_website,onChange:h,placeholder:"https://miempresa.com"}),a.jsx(xm,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"URL del Logo"}),a.jsx(we,{type:"url",name:"company_logo",value:n.company_logo,onChange:h,placeholder:"https://miempresa.com/logo.png"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"URL pblica de la imagen de tu logo."})]})]})]}),d.text&&a.jsxs("div",{className:`p-4 rounded-lg flex items-center space-x-2 ${d.type==="success"?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`,children:[d.type==="success"?a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}):a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),a.jsx("span",{children:d.text})]}),a.jsx("div",{className:"flex justify-end pt-4 sticky bottom-0 bg-white dark:bg-gray-800 p-4 border-t border-gray-100 dark:border-gray-700 -mx-6 -mb-6 rounded-b-xl",children:a.jsxs("button",{type:"submit",disabled:l,className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2 disabled:opacity-50",children:[a.jsx(tn,{className:"w-4 h-4"}),a.jsx("span",{children:l?"Guardando...":"Guardar Cambios"})]})})]})})}),e==="general"&&a.jsx("div",{className:"space-y-8",children:a.jsxs("form",{onSubmit:x,children:[a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center space-x-2 mb-4",children:[a.jsx(ds,{className:"w-5 h-5 text-gray-500"}),a.jsx("span",{children:"URLs del Sistema"})]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"Configura las URLs de la API y del frontend. Estas URLs se usan para la comunicacin entre el frontend y el backend."}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"URL de la API"}),a.jsx("div",{className:"flex space-x-2",children:a.jsx(we,{name:"api_url",type:"url",value:n.api_url||U,onChange:h,placeholder:"https://noahpro.es/api",className:"flex-1"})}),a.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["URL actual: ",U]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"URL del Frontend"}),a.jsx(we,{name:"frontend_url",type:"url",value:n.frontend_url||window.location.origin,onChange:h,placeholder:"https://noahpro.es"}),a.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["URL actual: ",window.location.origin]})]})]}),a.jsx("div",{className:"mt-4",children:a.jsxs("button",{type:"button",onClick:async()=>{u({type:"",text:""});try{const w=n.api_url||U,g=await fetch(`${w}/settings/public`);if(g.ok){const p=await g.json();u({type:"success",text:` Conexin exitosa! API respondi correctamente. Chat: ${p.chat_enabled?"Habilitado":"Deshabilitado"}`})}else u({type:"error",text:` Error: La API respondi con cdigo ${g.status}`})}catch(w){u({type:"error",text:` Error de conexin: ${w.message}. Verifica que la URL de la API sea correcta.`})}},className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors space-x-2",children:[a.jsx(Dy,{className:"w-4 h-4"}),a.jsx("span",{children:"Probar Conexin"})]})})]})}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6 mt-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center space-x-2 mb-4",children:[a.jsx(xm,{className:"w-5 h-5 text-gray-500"}),a.jsx("span",{children:"Configuracin Web"})]}),a.jsx("div",{className:"grid gap-6",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:'URL del Botn "Ver Demo"'}),a.jsx(we,{name:"demo_url",type:"url",value:n.demo_url,onChange:h,placeholder:"https://tu-dominio.com/demo",required:!0})]})})]}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center space-x-2 mb-4",children:[a.jsx(ea,{className:"w-5 h-5 text-gray-500"}),a.jsx("span",{children:"Chat en Vivo"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center p-4 bg-gray-50 dark:bg-gray-700/30 rounded-lg border border-gray-200 dark:border-gray-700",children:[a.jsx("input",{type:"checkbox",id:"chat_enabled",name:"chat_enabled",checked:n.chat_enabled,onChange:h,className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"chat_enabled",className:"ml-3 block text-sm font-medium text-gray-900 dark:text-white",children:"Habilitar Chat en Landing Page"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ttulo del Chat"}),a.jsx(we,{name:"chat_title",value:n.chat_title,onChange:h,placeholder:"Soporte"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Mensaje de Bienvenida"}),a.jsx("textarea",{name:"chat_welcome_message",value:n.chat_welcome_message,onChange:h,rows:"3",className:"w-full rounded-lg border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color Principal"}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"color",name:"chat_primary_color",value:n.chat_primary_color,onChange:h,className:"h-10 w-20 rounded border border-gray-300 cursor-pointer"}),a.jsx("span",{className:"text-sm font-mono text-gray-500",children:n.chat_primary_color})]})]})]}),a.jsxs("div",{className:"bg-gray-100 dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 p-6 flex items-center justify-center relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-2 left-2 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Vista Previa"}),n.chat_enabled?a.jsxs("div",{className:"w-72 bg-white dark:bg-gray-800 rounded-t-xl shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden mt-8",children:[a.jsxs("div",{className:"p-3 flex justify-between items-center text-white",style:{backgroundColor:n.chat_primary_color},children:[a.jsx("span",{className:"font-bold text-sm",children:n.chat_title}),a.jsx("span",{className:"text-xs opacity-80",children:""})]}),a.jsxs("div",{className:"h-48 bg-gray-50 dark:bg-gray-900 p-3 flex flex-col",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 p-2 rounded-lg rounded-tl-none shadow-sm max-w-[85%] self-start mb-3",children:a.jsx("p",{className:"text-xs text-gray-800 dark:text-gray-200",children:n.chat_welcome_message})}),a.jsx("div",{className:"bg-orange-100 dark:bg-orange-900/30 p-2 rounded-lg rounded-tr-none shadow-sm max-w-[85%] self-end mb-3",children:a.jsx("p",{className:"text-xs text-gray-800 dark:text-gray-200",children:"Hola, me gustara saber ms..."})})]}),a.jsx("div",{className:"p-2 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:a.jsx("div",{className:"h-8 bg-gray-100 dark:bg-gray-700 rounded-full w-full"})})]}):a.jsx("div",{className:"text-gray-400 text-sm italic",children:"Chat deshabilitado"})]})]})]}),d.text&&a.jsxs("div",{className:`p-4 rounded-lg flex items-center space-x-2 ${d.type==="success"?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`,children:[d.type==="success"?a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}):a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),a.jsx("span",{children:d.text})]}),a.jsx("div",{className:"flex justify-end pt-4 sticky bottom-0 bg-white dark:bg-gray-800 p-4 border-t border-gray-100 dark:border-gray-700 -mx-6 -mb-6 rounded-b-xl",children:a.jsxs("button",{type:"submit",disabled:l,className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2 disabled:opacity-50",children:[a.jsx(tn,{className:"w-4 h-4"}),a.jsx("span",{children:l?"Guardando...":"Guardar Cambios"})]})})]})})]})]})})]})},Cn=Object.create(null);Cn.open="0";Cn.close="1";Cn.ping="2";Cn.pong="3";Cn.message="4";Cn.upgrade="5";Cn.noop="6";const Gc=Object.create(null);Object.keys(Cn).forEach(e=>{Gc[Cn[e]]=e});const vm={type:"error",data:"parser error"},wj=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",jj=typeof ArrayBuffer=="function",kj=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,og=({type:e,data:t},r,n)=>wj&&t instanceof Blob?r?n(t):Oy(t,n):jj&&(t instanceof ArrayBuffer||kj(t))?r?n(t):Oy(new Blob([t]),n):n(Cn[e]+(t||"")),Oy=(e,t)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];t("b"+(n||""))},r.readAsDataURL(e)};function My(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Kh;function sD(e,t){if(wj&&e.data instanceof Blob)return e.data.arrayBuffer().then(My).then(t);if(jj&&(e.data instanceof ArrayBuffer||kj(e.data)))return t(My(e.data));og(e,!1,r=>{Kh||(Kh=new TextEncoder),t(Kh.encode(r))})}const $y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wo=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<$y.length;e++)wo[$y.charCodeAt(e)]=e;const iD=e=>{let t=e.length*.75,r=e.length,n,s=0,i,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const d=new ArrayBuffer(t),u=new Uint8Array(d);for(n=0;n<r;n+=4)i=wo[e.charCodeAt(n)],o=wo[e.charCodeAt(n+1)],l=wo[e.charCodeAt(n+2)],c=wo[e.charCodeAt(n+3)],u[s++]=i<<2|o>>4,u[s++]=(o&15)<<4|l>>2,u[s++]=(l&3)<<6|c&63;return d},oD=typeof ArrayBuffer=="function",lg=(e,t)=>{if(typeof e!="string")return{type:"message",data:Nj(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:lD(e.substring(1),t)}:Gc[r]?e.length>1?{type:Gc[r],data:e.substring(1)}:{type:Gc[r]}:vm},lD=(e,t)=>{if(oD){const r=iD(e);return Nj(r,t)}else return{base64:!0,data:e}},Nj=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},_j="",cD=(e,t)=>{const r=e.length,n=new Array(r);let s=0;e.forEach((i,o)=>{og(i,!1,l=>{n[o]=l,++s===r&&t(n.join(_j))})})},dD=(e,t)=>{const r=e.split(_j),n=[];for(let s=0;s<r.length;s++){const i=lg(r[s],t);if(n.push(i),i.type==="error")break}return n};function uD(){return new TransformStream({transform(e,t){sD(e,r=>{const n=r.length;let s;if(n<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,n);else if(n<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(s[0]|=128),t.enqueue(s),t.enqueue(r)})}})}let Xh;function jc(e){return e.reduce((t,r)=>t+r.length,0)}function kc(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let n=0;for(let s=0;s<t;s++)r[s]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function hD(e,t){Xh||(Xh=new TextDecoder);const r=[];let n=0,s=-1,i=!1;return new TransformStream({transform(o,l){for(r.push(o);;){if(n===0){if(jc(r)<1)break;const c=kc(r,1);i=(c[0]&128)===128,s=c[0]&127,s<126?n=3:s===126?n=1:n=2}else if(n===1){if(jc(r)<2)break;const c=kc(r,2);s=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),n=3}else if(n===2){if(jc(r)<8)break;const c=kc(r,8),d=new DataView(c.buffer,c.byteOffset,c.length),u=d.getUint32(0);if(u>Math.pow(2,21)-1){l.enqueue(vm);break}s=u*Math.pow(2,32)+d.getUint32(4),n=3}else{if(jc(r)<s)break;const c=kc(r,s);l.enqueue(lg(i?c:Xh.decode(c),t)),n=0}if(s===0||s>e){l.enqueue(vm);break}}}})}const Sj=4;function wt(e){if(e)return fD(e)}function fD(e){for(var t in wt.prototype)e[t]=wt.prototype[t];return e}wt.prototype.on=wt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};wt.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};wt.prototype.off=wt.prototype.removeListener=wt.prototype.removeAllListeners=wt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,s=0;s<r.length;s++)if(n=r[s],n===t||n.fn===t){r.splice(s,1);break}return r.length===0&&delete this._callbacks["$"+e],this};wt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,s=r.length;n<s;++n)r[n].apply(this,t)}return this};wt.prototype.emitReserved=wt.prototype.emit;wt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};wt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const vu=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),$r=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),mD="arraybuffer";function Cj(e,...t){return t.reduce((r,n)=>(e.hasOwnProperty(n)&&(r[n]=e[n]),r),{})}const pD=$r.setTimeout,gD=$r.clearTimeout;function bu(e,t){t.useNativeTimers?(e.setTimeoutFn=pD.bind($r),e.clearTimeoutFn=gD.bind($r)):(e.setTimeoutFn=$r.setTimeout.bind($r),e.clearTimeoutFn=$r.clearTimeout.bind($r))}const xD=1.33;function yD(e){return typeof e=="string"?vD(e):Math.ceil((e.byteLength||e.size)*xD)}function vD(e){let t=0,r=0;for(let n=0,s=e.length;n<s;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}function Ej(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function bD(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function wD(e){let t={},r=e.split("&");for(let n=0,s=r.length;n<s;n++){let i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class jD extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class cg extends wt{constructor(t){super(),this.writable=!1,bu(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,n){return super.emitReserved("error",new jD(t,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=lg(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=bD(t);return r.length?"?"+r:""}}class kD extends cg{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};dD(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,cD(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Ej()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let Dj=!1;try{Dj=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const ND=Dj;function _D(){}class SD extends kD{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}class Nn extends wt{constructor(t,r,n){super(),this.createRequest=t,bu(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const r=Cj(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&n.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var s;n.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Nn.requestsCount++,Nn.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=_D,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Nn.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Nn.requestsCount=0;Nn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Ry);else if(typeof addEventListener=="function"){const e="onpagehide"in $r?"pagehide":"unload";addEventListener(e,Ry,!1)}}function Ry(){for(let e in Nn.requests)Nn.requests.hasOwnProperty(e)&&Nn.requests[e].abort()}const CD=function(){const e=Tj({xdomain:!1});return e&&e.responseType!==null}();class ED extends SD{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=CD&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Nn(Tj,this.uri(),t)}}function Tj(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||ND))return new XMLHttpRequest}catch{}if(!t)try{return new $r[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Pj=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class DD extends cg{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,n=Pj?{}:Cj(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,n)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],s=r===t.length-1;og(n,this.supportsBinary,i=>{try{this.doWrite(n,i)}catch{}s&&vu(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Ej()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const Jh=$r.WebSocket||$r.MozWebSocket;class TD extends DD{createSocket(t,r,n){return Pj?new Jh(t,r,n):r?new Jh(t,r):new Jh(t)}doWrite(t,r){this.ws.send(r)}}class PD extends cg{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=hD(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(r).getReader(),s=uD();s.readable.pipeTo(t.writable),this._writer=s.writable.getWriter();const i=()=>{n.read().then(({done:l,value:c})=>{l||(this.onPacket(c),i())}).catch(l=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],s=r===t.length-1;this._writer.write(n).then(()=>{s&&vu(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const OD={websocket:TD,webtransport:PD,polling:ED},MD=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,$D=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function bm(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),n=e.indexOf("]");r!=-1&&n!=-1&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let s=MD.exec(e||""),i={},o=14;for(;o--;)i[$D[o]]=s[o]||"";return r!=-1&&n!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=RD(i,i.path),i.queryKey=LD(i,i.query),i}function RD(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function LD(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,s,i){s&&(r[s]=i)}),r}const wm=typeof addEventListener=="function"&&typeof removeEventListener=="function",Kc=[];wm&&addEventListener("offline",()=>{Kc.forEach(e=>e())},!1);class Oa extends wt{constructor(t,r){if(super(),this.binaryType=mD,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const n=bm(t);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=bm(r.host).host);bu(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const s=n.prototype.name;this.transports.push(s),this._transportsByName[s]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=wD(this.opts.query)),wm&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Kc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=Sj,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Oa.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Oa.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const s=this.writeBuffer[n].data;if(s&&(r+=yD(s)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,vu(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,n){return this._sendPacket("message",t,r,n),this}send(t,r,n){return this._sendPacket("message",t,r,n),this}_sendPacket(t,r,n,s){if(typeof r=="function"&&(s=r,r=void 0),typeof n=="function"&&(s=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:t,data:r,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(Oa.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),wm&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Kc.indexOf(this._offlineEventListener);n!==-1&&Kc.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}Oa.protocol=Sj;class AD extends Oa{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),n=!1;Oa.priorWebsocketSuccess=!1;const s=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",f=>{if(!n)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Oa.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=r.name,this.emitReserved("upgradeError",h)}}))};function i(){n||(n=!0,u(),r.close(),r=null)}const o=f=>{const h=new Error("probe error: "+f);h.transport=r.name,i(),this.emitReserved("upgradeError",h)};function l(){o("transport closed")}function c(){o("socket closed")}function d(f){r&&f.name!==r.name&&i()}const u=()=>{r.removeListener("open",s),r.removeListener("error",o),r.removeListener("close",l),this.off("close",c),this.off("upgrading",d)};r.once("open",s),r.once("error",o),r.once("close",l),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}}let zD=class extends AD{constructor(t,r={}){const n=typeof t=="object"?t:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(s=>OD[s]).filter(s=>!!s)),super(t,n)}};function ID(e,t="",r){let n=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),n=bm(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+t,n.href=n.protocol+"://"+i+(r&&r.port===n.port?"":":"+n.port),n}const FD=typeof ArrayBuffer=="function",HD=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Oj=Object.prototype.toString,WD=typeof Blob=="function"||typeof Blob<"u"&&Oj.call(Blob)==="[object BlobConstructor]",BD=typeof File=="function"||typeof File<"u"&&Oj.call(File)==="[object FileConstructor]";function dg(e){return FD&&(e instanceof ArrayBuffer||HD(e))||WD&&e instanceof Blob||BD&&e instanceof File}function Xc(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(Xc(e[r]))return!0;return!1}if(dg(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Xc(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&Xc(e[r]))return!0;return!1}function UD(e){const t=[],r=e.data,n=e;return n.data=jm(r,t),n.attachments=t.length,{packet:n,buffers:t}}function jm(e,t){if(!e)return e;if(dg(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=jm(e[n],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=jm(e[n],t));return r}return e}function qD(e,t){return e.data=km(e.data,t),delete e.attachments,e}function km(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=km(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=km(e[r],t));return e}const YD=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],VD=5;var $e;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})($e||($e={}));class GD{constructor(t){this.replacer=t}encode(t){return(t.type===$e.EVENT||t.type===$e.ACK)&&Xc(t)?this.encodeAsBinary({type:t.type===$e.EVENT?$e.BINARY_EVENT:$e.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===$e.BINARY_EVENT||t.type===$e.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=UD(t),n=this.encodeAsString(r.packet),s=r.buffers;return s.unshift(n),s}}function Ly(e){return Object.prototype.toString.call(e)==="[object Object]"}class ug extends wt{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const n=r.type===$e.BINARY_EVENT;n||r.type===$e.BINARY_ACK?(r.type=n?$e.EVENT:$e.ACK,this.reconstructor=new KD(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(dg(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if($e[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===$e.BINARY_EVENT||n.type===$e.BINARY_ACK){const i=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const o=t.substring(i,r);if(o!=Number(o)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(t.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(i,r)}else n.nsp="/";const s=t.charAt(r+1);if(s!==""&&Number(s)==s){const i=r+1;for(;++r;){const o=t.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===t.length)break}n.id=Number(t.substring(i,r+1))}if(t.charAt(++r)){const i=this.tryParse(t.substr(r));if(ug.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case $e.CONNECT:return Ly(r);case $e.DISCONNECT:return r===void 0;case $e.CONNECT_ERROR:return typeof r=="string"||Ly(r);case $e.EVENT:case $e.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&YD.indexOf(r[0])===-1);case $e.ACK:case $e.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class KD{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=qD(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const XD=Object.freeze(Object.defineProperty({__proto__:null,Decoder:ug,Encoder:GD,get PacketType(){return $e},protocol:VD},Symbol.toStringTag,{value:"Module"}));function Zr(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const JD=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Mj extends wt{constructor(t,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Zr(t,"open",this.onopen.bind(this)),Zr(t,"packet",this.onpacket.bind(this)),Zr(t,"error",this.onerror.bind(this)),Zr(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var n,s,i;if(JD.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const o={type:$e.EVENT,data:r};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const u=this.ids++,f=r.pop();this._registerAckCallback(u,f),o.id=u}const l=(s=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||s===void 0?void 0:s.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,r){var n;const s=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(s===void 0){this.acks[t]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);r.call(this,new Error("operation has timed out"))},s),o=(...l)=>{this.io.clearTimeoutFn(i),r.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...r){return new Promise((n,s)=>{const i=(o,l)=>o?s(o):n(l);i.withError=!0,r.push(i),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((s,...i)=>n!==this._queue[0]?void 0:(s!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(s)):(this._queue.shift(),r&&r(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:$e.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case $e.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case $e.EVENT:case $e.BINARY_EVENT:this.onevent(t);break;case $e.ACK:case $e.BINARY_ACK:this.onack(t);break;case $e.DISCONNECT:this.ondisconnect();break;case $e.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let n=!1;return function(...s){n||(n=!0,r.packet({type:$e.ACK,id:t,data:s}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:$e.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function Li(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Li.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};Li.prototype.reset=function(){this.attempts=0};Li.prototype.setMin=function(e){this.ms=e};Li.prototype.setMax=function(e){this.max=e};Li.prototype.setJitter=function(e){this.jitter=e};class Nm extends wt{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,bu(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Li({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const s=r.parser||XD;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new zD(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const s=Zr(r,"open",function(){n.onopen(),t&&t()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=Zr(r,"error",i);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),r.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(s),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Zr(t,"ping",this.onping.bind(this)),Zr(t,"data",this.ondata.bind(this)),Zr(t,"error",this.onerror.bind(this)),Zr(t,"close",this.onclose.bind(this)),Zr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){vu(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new Mj(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(s=>{s?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",s)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const lo={};function Jc(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=ID(e,t.path||"/socket.io"),n=r.source,s=r.id,i=r.path,o=lo[s]&&i in lo[s].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let c;return l?c=new Nm(n,t):(lo[s]||(lo[s]=new Nm(n,t)),c=lo[s]),r.query&&!t.query&&(t.query=r.queryKey),c.socket(r.path,t)}Object.assign(Jc,{Manager:Nm,Socket:Mj,io:Jc,connect:Jc});const QD=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(null),[s,i]=S.useState([]),[o,l]=S.useState(""),[c,d]=S.useState(null),u=S.useRef(null);S.useEffect(()=>{const v=Jc(h4);return d(v),v.on("admin_notification",y=>{y.type==="new_message"&&(f(),r&&r.session_id===y.sessionId&&i(w=>[...w,{senderType:"visitor",message:y.message,created_at:new Date().toISOString()}]))}),f(),()=>v.close()},[r]),S.useEffect(()=>{r&&(h(r.session_id),c==null||c.emit("join_room",r.session_id))},[r]),S.useEffect(()=>{var v;(v=u.current)==null||v.scrollIntoView({behavior:"smooth"})},[s]);const f=async()=>{try{const v=await fetch(`${U}/chat/conversations`);if(v.ok){const y=await v.json();t(y)}}catch(v){console.error("Error fetching conversations:",v)}},h=async v=>{try{const y=await fetch(`${U}/chat/conversations/${v}/messages`);if(y.ok){const w=await y.json();i(w)}}catch(y){console.error("Error fetching messages:",y)}},x=v=>{if(v.preventDefault(),!o.trim()||!r||!c)return;const y={sessionId:r.session_id,senderType:"admin",senderName:"Agente",message:o,timestamp:new Date};c.emit("send_message",y),i(w=>[...w,{senderType:"admin",message:o,created_at:new Date().toISOString()}]),l("")};return a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[calc(100vh-12rem)]",children:[a.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden flex flex-col",children:[a.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Conversaciones Activas"})}),a.jsx("div",{className:"overflow-y-auto flex-1 p-2 space-y-2",children:e.length===0?a.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay chats activos"}):e.map(v=>a.jsxs("div",{onClick:()=>n(v),className:`p-3 rounded-lg cursor-pointer transition-colors border ${(r==null?void 0:r.id)===v.id?"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800":"hover:bg-gray-50 dark:hover:bg-gray-700/50 border-transparent"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-1",children:[a.jsxs("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:["Visitante ",v.session_id.substring(0,8)]}),a.jsx("span",{className:"text-xs text-gray-400",children:new Date(v.updated_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:v.last_message||"Nueva conversacin"})]},v.id))})]}),a.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden flex flex-col",children:r?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-gray-900/50",children:a.jsxs("div",{children:[a.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white",children:["Chat con Visitante ",r.session_id.substring(0,8)]}),a.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",r.session_id]})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50 dark:bg-gray-900/30 flex flex-col space-y-4",children:[s.map((v,y)=>a.jsx("div",{className:`flex ${v.senderType==="admin"?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:`p-3 rounded-2xl shadow-sm max-w-[80%] ${v.senderType==="admin"?"bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-tr-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-tl-none border border-gray-200 dark:border-gray-700"}`,children:[a.jsx("p",{className:"text-sm",children:v.message}),a.jsx("p",{className:`text-[10px] mt-1 ${v.senderType==="admin"?"text-orange-100":"text-gray-400"}`,children:new Date(v.created_at||Date.now()).toLocaleTimeString()})]})},y)),a.jsx("div",{ref:u})]}),a.jsx("form",{onSubmit:x,className:"p-4 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"text",value:o,onChange:v=>l(v.target.value),placeholder:"Escribe una respuesta...",className:"flex-1 rounded-lg border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500"}),a.jsx("button",{type:"submit",disabled:!o.trim(),className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Enviar"})]})})]}):a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[a.jsx("span",{className:"text-4xl mb-2",children:""}),a.jsx("p",{children:"Selecciona una conversacin para chatear"})]})})]})},ZD=({isOpen:e,onClose:t,onSave:r,event:n=null,leads:s=[]})=>{const[i,o]=S.useState({title:"",description:"",start_time:"",end_time:"",type:"meeting",lead_id:"",created_by:"Admin"}),[l,c]=S.useState({});S.useEffect(()=>{o(n?{title:n.title||"",description:n.description||"",start_time:n.start_time?new Date(n.start_time).toISOString().slice(0,16):"",end_time:n.end_time?new Date(n.end_time).toISOString().slice(0,16):"",type:n.type||"meeting",lead_id:n.lead_id||"",created_by:n.created_by||"Admin"}:{title:"",description:"",start_time:"",end_time:"",type:"meeting",lead_id:"",created_by:"Admin"}),c({})},[n,e]);const d=()=>{const f={};return i.title.trim()||(f.title="El ttulo es requerido"),i.start_time||(f.start_time="La fecha de inicio es requerida"),i.end_time||(f.end_time="La fecha de fin es requerida"),i.start_time&&i.end_time&&new Date(i.start_time)>=new Date(i.end_time)&&(f.end_time="La fecha de fin debe ser posterior a la de inicio"),c(f),Object.keys(f).length===0},u=f=>{f.preventDefault(),d()&&(r(i),t())};return e?a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[9999] p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-4xl w-full shadow-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800 z-10",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:n?"Editar Evento":"Nuevo Evento"}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:a.jsx(_r,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),a.jsxs("form",{onSubmit:u,className:"p-6 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ttulo *"}),a.jsx("input",{type:"text",value:i.title,onChange:f=>o({...i,title:f.target.value}),className:`w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${l.title?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Ej: Reunin con cliente"}),l.title&&a.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.title})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tipo de Evento"}),a.jsxs("select",{value:i.type,onChange:f=>o({...i,type:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"meeting",children:"Reunin"}),a.jsx("option",{value:"call",children:"Llamada"}),a.jsx("option",{value:"demo",children:"Demo"}),a.jsx("option",{value:"followup",children:"Seguimiento"}),a.jsx("option",{value:"other",children:"Otro"})]})]}),s&&s.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Asociar con Lead (opcional)"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:i.lead_id,onChange:f=>o({...i,lead_id:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"",children:"Sin asociar"}),s.map(f=>a.jsxs("option",{value:f.id,children:[f.name," - ",f.business_name||"Sin empresa"]},f.id))]}),a.jsx(Ct,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha y Hora de Inicio *"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"datetime-local",value:i.start_time,onChange:f=>o({...i,start_time:f.target.value}),className:`w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${l.start_time?"border-red-500":"border-gray-300 dark:border-gray-600"}`}),a.jsx(sn,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})]}),l.start_time&&a.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.start_time})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha y Hora de Fin *"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"datetime-local",value:i.end_time,onChange:f=>o({...i,end_time:f.target.value}),className:`w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${l.end_time?"border-red-500":"border-gray-300 dark:border-gray-600"}`}),a.jsx(sn,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})]}),l.end_time&&a.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.end_time})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),a.jsx("textarea",{value:i.description,onChange:f=>o({...i,description:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:"4",placeholder:"Detalles del evento..."})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancelar"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all",children:n?"Guardar Cambios":"Crear Evento"})]})]})]})}):null},eT=({compact:e=!1})=>{const[t,r]=S.useState(new Date),[n,s]=S.useState([]),[i,o]=S.useState(null),[l,c]=S.useState(!1),[d,u]=S.useState(null),[f,h]=S.useState([]);S.useEffect(()=>{x(),v()},[t]);const x=async()=>{try{const T=localStorage.getItem("crm_token"),O=await fetch(`${U}/calendar/events`,{headers:{Authorization:`Bearer ${T}`}});if(O.ok){const M=await O.json();M.length===0?s([]):s(M.map(R=>({...R,date:new Date(R.start_time)})))}}catch(T){console.error("Error fetching events:",T),s([])}},v=async()=>{try{const T=localStorage.getItem("crm_token"),O=await fetch(`${U}/leads`,{headers:{Authorization:`Bearer ${T}`}});if(O.ok){const M=await O.json();h(M)}}catch(T){console.error("Error fetching leads:",T)}},y=async T=>{try{const O=d?`${U}/calendar/events/${d.id}`:`${U}/calendar/events`,M=d?"PUT":"POST",R=localStorage.getItem("crm_token");(await fetch(O,{method:M,headers:{"Content-Type":"application/json",Authorization:`Bearer ${R}`},body:JSON.stringify(T)})).ok&&(x(),u(null))}catch(O){console.error("Error saving event:",O)}},w=T=>{const O=T.getFullYear(),M=T.getMonth(),R=new Date(O,M,1),A=new Date(O,M+1,0).getDate(),L=R.getDay();return{daysInMonth:A,startingDayOfWeek:L}},g=T=>n.filter(O=>{const M=new Date(O.date);return M.getDate()===T.getDate()&&M.getMonth()===T.getMonth()&&M.getFullYear()===T.getFullYear()}),p=()=>{r(new Date(t.getFullYear(),t.getMonth()-1))},j=()=>{r(new Date(t.getFullYear(),t.getMonth()+1))},{daysInMonth:b,startingDayOfWeek:N}=w(t),C=t.toLocaleString("es-ES",{month:"long",year:"numeric"}),E=()=>{const T=[],O=new Date;for(let M=0;M<N;M++)T.push(a.jsx("div",{className:"min-h-[120px] bg-gray-50/30 dark:bg-gray-800/30 border-b border-r border-gray-200 dark:border-gray-700"},`empty-${M}`));for(let M=1;M<=b;M++){const R=new Date(t.getFullYear(),t.getMonth(),M),H=g(R),A=R.toDateString()===O.toDateString(),L=i&&R.toDateString()===i.toDateString();T.push(a.jsxs("div",{onClick:()=>o(R),className:`min-h-[120px] p-2 border-b border-r border-gray-200 dark:border-gray-700 transition-colors relative group
                        ${A?"bg-orange-50/50 dark:bg-orange-900/10":"bg-white dark:bg-gray-800"}
                        ${L?"ring-2 ring-inset ring-orange-500 z-10":"hover:bg-gray-50 dark:hover:bg-gray-700"}
                    `,children:[a.jsxs("div",{className:"flex justify-between items-start mb-1",children:[a.jsx("span",{className:`
                            text-sm font-semibold w-7 h-7 flex items-center justify-center rounded-full
                            ${A?"bg-orange-600 text-white":"text-gray-700 dark:text-gray-300"}
                        `,children:M}),a.jsx("button",{onClick:ee=>{ee.stopPropagation(),u(null),c(!0)},className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full transition-opacity",children:a.jsx(Wr,{className:"w-3 h-3 text-gray-500"})})]}),a.jsx("div",{className:"space-y-1 overflow-y-auto max-h-[80px] custom-scrollbar",children:H.map(ee=>a.jsxs("div",{onClick:te=>{te.stopPropagation(),u(ee),c(!0)},className:`
                                    text-xs px-2 py-1 rounded cursor-pointer truncate border-l-2 shadow-sm transition-all hover:brightness-95
                                    ${ee.type==="meeting"?"bg-blue-100 text-blue-700 border-blue-500 dark:bg-blue-900/40 dark:text-blue-200":ee.type==="call"?"bg-green-100 text-green-700 border-green-500 dark:bg-green-900/40 dark:text-green-200":ee.type==="demo"?"bg-purple-100 text-purple-700 border-purple-500 dark:bg-purple-900/40 dark:text-purple-200":"bg-gray-100 text-gray-700 border-gray-500 dark:bg-gray-700 dark:text-gray-300"}
                                `,title:`${ee.title} (${new Date(ee.start_time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})`,children:[a.jsx("span",{className:"font-medium mr-1",children:new Date(ee.start_time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),ee.title]},ee.id))})]},M))}return T};return e?a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center space-x-2",children:[a.jsx(Pl,{className:"w-5 h-5"}),a.jsx("span",{children:"Calendario"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:p,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:a.jsx(ky,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 capitalize",children:C}),a.jsx("button",{onClick:j,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:a.jsx(jy,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]})]}),a.jsxs("div",{className:"grid grid-cols-7 gap-1 text-xs",children:[["D","L","M","X","J","V","S"].map(T=>a.jsx("div",{className:"text-center font-medium text-gray-500 dark:text-gray-400 p-1",children:T},T)),E()]})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Calendario"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Gestiona tus reuniones y eventos"})]}),a.jsxs("button",{onClick:()=>{u(null),c(!0)},className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2",children:[a.jsx(Wr,{className:"w-4 h-4"}),a.jsx("span",{children:"Nuevo Evento"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white capitalize",children:C}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:p,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:a.jsx(ky,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),a.jsx("button",{onClick:j,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:a.jsx(jy,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]})]}),a.jsxs("div",{className:"grid grid-cols-7 border-l border-t border-gray-200 dark:border-gray-700",children:[["Domingo","Lunes","Martes","Mircoles","Jueves","Viernes","Sbado"].map(T=>a.jsx("div",{className:"text-center font-semibold text-sm text-gray-600 dark:text-gray-400 p-3 border-b border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:T},T)),E()]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 flex flex-col",children:[a.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4 flex items-center justify-between",children:[a.jsx("span",{children:"Prximos Eventos"}),a.jsxs("span",{className:"text-xs font-normal text-gray-500 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full",children:[n.length," total"]})]}),a.jsx("div",{className:"space-y-3 overflow-y-auto flex-1 pr-2 custom-scrollbar",style:{maxHeight:"500px"},children:n.slice(0,5).map(T=>a.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors cursor-pointer",onClick:()=>{u(T),c(!0)},children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:T.title}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:new Date(T.date).toLocaleString("es-ES",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})]},T.id))})]})]}),mu.createPortal(a.jsx(ZD,{isOpen:l,onClose:()=>{c(!1),u(null)},onSave:y,event:d,leads:f}),document.body)]})},tT=({isOpen:e,onClose:t,onSave:r,task:n=null})=>{const[s,i]=S.useState({title:"",description:"",priority:"medium",due_date:"",assigned_to:""}),[o,l]=S.useState({});S.useEffect(()=>{i(n?{title:n.title||"",description:n.description||"",priority:n.priority||"medium",due_date:n.due_date?new Date(n.due_date).toISOString().slice(0,16):"",assigned_to:n.assigned_to||""}:{title:"",description:"",priority:"medium",due_date:"",assigned_to:""}),l({})},[n,e]);const c=()=>{const u={};return s.title.trim()||(u.title="El ttulo es requerido"),l(u),Object.keys(u).length===0},d=u=>{u.preventDefault(),c()&&(r(s),t())};return e?a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[9999] p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full shadow-2xl",children:[a.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:n?"Editar Tarea":"Nueva Tarea"}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:a.jsx(_r,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),a.jsxs("form",{onSubmit:d,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ttulo *"}),a.jsx("input",{type:"text",value:s.title,onChange:u=>i({...s,title:u.target.value}),className:`w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${o.title?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Ej: Llamar a cliente"}),o.title&&a.jsxs("p",{className:"mt-1 text-sm text-red-500 flex items-center space-x-1",children:[a.jsx(pu,{className:"w-4 h-4"}),a.jsx("span",{children:o.title})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),a.jsx("textarea",{value:s.description,onChange:u=>i({...s,description:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:"3",placeholder:"Detalles de la tarea..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Prioridad"}),a.jsxs("select",{value:s.priority,onChange:u=>i({...s,priority:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"low",children:"Baja"}),a.jsx("option",{value:"medium",children:"Media"}),a.jsx("option",{value:"high",children:"Alta"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha Lmite"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"datetime-local",value:s.due_date,onChange:u=>i({...s,due_date:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),a.jsx(Pl,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Asignado a"}),a.jsx("input",{type:"text",value:s.assigned_to,onChange:u=>i({...s,assigned_to:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Nombre del responsable"})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancelar"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:n?"Guardar Cambios":"Crear Tarea"})]})]})]})}):null};var $j={exports:{}},$l={},_m={exports:{}};(function(e,t){(function(r,n){n(t)})(cr,function(r){function n(K){return function(ye,ve,me,De,W,Ce,Ne){return K(ye,ve,Ne)}}function s(K){return function(ye,ve,me,De){if(!ye||!ve||typeof ye!="object"||typeof ve!="object")return K(ye,ve,me,De);var W=De.get(ye),Ce=De.get(ve);if(W&&Ce)return W===ve&&Ce===ye;De.set(ye,ve),De.set(ve,ye);var Ne=K(ye,ve,me,De);return De.delete(ye),De.delete(ve),Ne}}function i(K,se){var ye={};for(var ve in K)ye[ve]=K[ve];for(var ve in se)ye[ve]=se[ve];return ye}function o(K){return K.constructor===Object||K.constructor==null}function l(K){return typeof K.then=="function"}function c(K,se){return K===se||K!==K&&se!==se}var d="[object Arguments]",u="[object Boolean]",f="[object Date]",h="[object RegExp]",x="[object Map]",v="[object Number]",y="[object Object]",w="[object Set]",g="[object String]",p=Object.prototype.toString;function j(K){var se=K.areArraysEqual,ye=K.areDatesEqual,ve=K.areMapsEqual,me=K.areObjectsEqual,De=K.areRegExpsEqual,W=K.areSetsEqual,Ce=K.createIsNestedEqual,Ne=Ce(yt);function yt(Me,Fe,nt){if(Me===Fe)return!0;if(!Me||!Fe||typeof Me!="object"||typeof Fe!="object")return Me!==Me&&Fe!==Fe;if(o(Me)&&o(Fe))return me(Me,Fe,Ne,nt);var Mt=Array.isArray(Me),Gr=Array.isArray(Fe);if(Mt||Gr)return Mt===Gr&&se(Me,Fe,Ne,nt);var it=p.call(Me);return it!==p.call(Fe)?!1:it===f?ye(Me,Fe,Ne,nt):it===h?De(Me,Fe,Ne,nt):it===x?ve(Me,Fe,Ne,nt):it===w?W(Me,Fe,Ne,nt):it===y||it===d?l(Me)||l(Fe)?!1:me(Me,Fe,Ne,nt):it===u||it===v||it===g?c(Me.valueOf(),Fe.valueOf()):!1}return yt}function b(K,se,ye,ve){var me=K.length;if(se.length!==me)return!1;for(;me-- >0;)if(!ye(K[me],se[me],me,me,K,se,ve))return!1;return!0}var N=s(b);function C(K,se){return c(K.valueOf(),se.valueOf())}function E(K,se,ye,ve){var me=K.size===se.size;if(!me)return!1;if(!K.size)return!0;var De={},W=0;return K.forEach(function(Ce,Ne){if(me){var yt=!1,Me=0;se.forEach(function(Fe,nt){!yt&&!De[Me]&&(yt=ye(Ne,nt,W,Me,K,se,ve)&&ye(Ce,Fe,Ne,nt,K,se,ve))&&(De[Me]=!0),Me++}),W++,me=yt}}),me}var T=s(E),O="_owner",M=Object.prototype.hasOwnProperty;function R(K,se,ye,ve){var me=Object.keys(K),De=me.length;if(Object.keys(se).length!==De)return!1;for(var W;De-- >0;){if(W=me[De],W===O){var Ce=!!K.$$typeof,Ne=!!se.$$typeof;if((Ce||Ne)&&Ce!==Ne)return!1}if(!M.call(se,W)||!ye(K[W],se[W],W,W,K,se,ve))return!1}return!0}var H=s(R);function A(K,se){return K.source===se.source&&K.flags===se.flags}function L(K,se,ye,ve){var me=K.size===se.size;if(!me)return!1;if(!K.size)return!0;var De={};return K.forEach(function(W,Ce){if(me){var Ne=!1,yt=0;se.forEach(function(Me,Fe){!Ne&&!De[yt]&&(Ne=ye(W,Me,Ce,Fe,K,se,ve))&&(De[yt]=!0),yt++}),me=Ne}}),me}var ee=s(L),te=Object.freeze({areArraysEqual:b,areDatesEqual:C,areMapsEqual:E,areObjectsEqual:R,areRegExpsEqual:A,areSetsEqual:L,createIsNestedEqual:n}),he=Object.freeze({areArraysEqual:N,areDatesEqual:C,areMapsEqual:T,areObjectsEqual:H,areRegExpsEqual:A,areSetsEqual:ee,createIsNestedEqual:n}),G=j(te);function Z(K,se){return G(K,se,void 0)}var ie=j(i(te,{createIsNestedEqual:function(){return c}}));function I(K,se){return ie(K,se,void 0)}var F=j(he);function Y(K,se){return F(K,se,new WeakMap)}var ae=j(i(he,{createIsNestedEqual:function(){return c}}));function V(K,se){return ae(K,se,new WeakMap)}function le(K){return j(i(te,K(te)))}function xe(K){var se=j(i(he,K(he)));return function(ye,ve,me){return me===void 0&&(me=new WeakMap),se(ye,ve,me)}}r.circularDeepEqual=Y,r.circularShallowEqual=V,r.createCustomCircularEqual=xe,r.createCustomEqual=le,r.deepEqual=Z,r.sameValueZeroEqual=c,r.shallowEqual=I,Object.defineProperty(r,"__esModule",{value:!0})})})(_m,_m.exports);var hg=_m.exports,Sm={exports:{}};function Rj(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=Rj(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ay(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=Rj(e))&&(n&&(n+=" "),n+=t);return n}Sm.exports=Ay,Sm.exports.clsx=Ay;var fg=Sm.exports,Te={},rT=function(t,r,n){return t===r?!0:t.className===r.className&&n(t.style,r.style)&&t.width===r.width&&t.autoSize===r.autoSize&&t.cols===r.cols&&t.draggableCancel===r.draggableCancel&&t.draggableHandle===r.draggableHandle&&n(t.verticalCompact,r.verticalCompact)&&n(t.compactType,r.compactType)&&n(t.layout,r.layout)&&n(t.margin,r.margin)&&n(t.containerPadding,r.containerPadding)&&t.rowHeight===r.rowHeight&&t.maxRows===r.maxRows&&t.isBounded===r.isBounded&&t.isDraggable===r.isDraggable&&t.isResizable===r.isResizable&&t.allowOverlap===r.allowOverlap&&t.preventCollision===r.preventCollision&&t.useCSSTransforms===r.useCSSTransforms&&t.transformScale===r.transformScale&&t.isDroppable===r.isDroppable&&n(t.resizeHandles,r.resizeHandles)&&n(t.resizeHandle,r.resizeHandle)&&t.onLayoutChange===r.onLayoutChange&&t.onDragStart===r.onDragStart&&t.onDrag===r.onDrag&&t.onDragStop===r.onDragStop&&t.onResizeStart===r.onResizeStart&&t.onResize===r.onResize&&t.onResizeStop===r.onResizeStop&&t.onDrop===r.onDrop&&n(t.droppingItem,r.droppingItem)&&n(t.innerRef,r.innerRef)};Object.defineProperty(Te,"__esModule",{value:!0});Te.bottom=mg;Te.childrenEqual=sT;Te.cloneLayout=Lj;Te.cloneLayoutItem=us;Te.collides=wu;Te.compact=zj;Te.compactItem=Ij;Te.compactType=vT;Te.correctBounds=Fj;Te.fastPositionEqual=iT;Te.fastRGLPropsEqual=void 0;Te.getAllCollisions=Hj;Te.getFirstCollision=as;Te.getLayoutItem=pg;Te.getStatics=gg;Te.modifyLayout=Aj;Te.moveElement=ko;Te.moveElementAwayFromCollision=Em;Te.noop=void 0;Te.perc=lT;Te.resizeItemInDirection=mT;Te.setTopLeft=gT;Te.setTransform=pT;Te.sortLayoutItems=jg;Te.sortLayoutItemsByColRow=Yj;Te.sortLayoutItemsByRowCol=qj;Te.synchronizeLayoutWithChildren=xT;Te.validateLayout=yT;Te.withLayoutItem=aT;var zy=hg,jo=nT(S);function nT(e){return e&&e.__esModule?e:{default:e}}function mg(e){let t=0,r;for(let n=0,s=e.length;n<s;n++)r=e[n].y+e[n].h,r>t&&(t=r);return t}function Lj(e){const t=Array(e.length);for(let r=0,n=e.length;r<n;r++)t[r]=us(e[r]);return t}function Aj(e,t){const r=Array(e.length);for(let n=0,s=e.length;n<s;n++)t.i===e[n].i?r[n]=t:r[n]=e[n];return r}function aT(e,t,r){let n=pg(e,t);return n?(n=r(us(n)),e=Aj(e,n),[e,n]):[e,null]}function us(e){return{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,minW:e.minW,maxW:e.maxW,minH:e.minH,maxH:e.maxH,moved:!!e.moved,static:!!e.static,isDraggable:e.isDraggable,isResizable:e.isResizable,resizeHandles:e.resizeHandles,isBounded:e.isBounded}}function sT(e,t){return(0,zy.deepEqual)(jo.default.Children.map(e,r=>r==null?void 0:r.key),jo.default.Children.map(t,r=>r==null?void 0:r.key))&&(0,zy.deepEqual)(jo.default.Children.map(e,r=>r==null?void 0:r.props["data-grid"]),jo.default.Children.map(t,r=>r==null?void 0:r.props["data-grid"]))}Te.fastRGLPropsEqual=rT;function iT(e,t){return e.left===t.left&&e.top===t.top&&e.width===t.width&&e.height===t.height}function wu(e,t){return!(e.i===t.i||e.x+e.w<=t.x||e.x>=t.x+t.w||e.y+e.h<=t.y||e.y>=t.y+t.h)}function zj(e,t,r,n){const s=gg(e),i=jg(e,t),o=Array(e.length);for(let l=0,c=i.length;l<c;l++){let d=us(i[l]);d.static||(d=Ij(s,d,t,r,i,n),s.push(d)),o[e.indexOf(i[l])]=d,d.moved=!1}return o}const oT={x:"w",y:"h"};function Cm(e,t,r,n){const s=oT[n];t[n]+=1;const i=e.map(o=>o.i).indexOf(t.i);for(let o=i+1;o<e.length;o++){const l=e[o];if(!l.static){if(l.y>t.y+t.h)break;wu(t,l)&&Cm(e,l,r+t[s],n)}}t[n]=r}function Ij(e,t,r,n,s,i){const o=r==="vertical",l=r==="horizontal";if(o)for(t.y=Math.min(mg(e),t.y);t.y>0&&!as(e,t);)t.y--;else if(l)for(;t.x>0&&!as(e,t);)t.x--;let c;for(;(c=as(e,t))&&!(r===null&&i);)if(l?Cm(s,t,c.x+c.w,"x"):Cm(s,t,c.y+c.h,"y"),l&&t.x+t.w>n)for(t.x=n-t.w,t.y++;t.x>0&&!as(e,t);)t.x--;return t.y=Math.max(t.y,0),t.x=Math.max(t.x,0),t}function Fj(e,t){const r=gg(e);for(let n=0,s=e.length;n<s;n++){const i=e[n];if(i.x+i.w>t.cols&&(i.x=t.cols-i.w),i.x<0&&(i.x=0,i.w=t.cols),!i.static)r.push(i);else for(;as(r,i);)i.y++}return e}function pg(e,t){for(let r=0,n=e.length;r<n;r++)if(e[r].i===t)return e[r]}function as(e,t){for(let r=0,n=e.length;r<n;r++)if(wu(e[r],t))return e[r]}function Hj(e,t){return e.filter(r=>wu(r,t))}function gg(e){return e.filter(t=>t.static)}function ko(e,t,r,n,s,i,o,l,c){if(t.static&&t.isDraggable!==!0||t.y===n&&t.x===r)return e;`${t.i}${String(r)}${String(n)}${t.x}${t.y}`;const d=t.x,u=t.y;typeof r=="number"&&(t.x=r),typeof n=="number"&&(t.y=n),t.moved=!0;let f=jg(e,o);(o==="vertical"&&typeof n=="number"?u>=n:o==="horizontal"&&typeof r=="number"?d>=r:!1)&&(f=f.reverse());const x=Hj(f,t),v=x.length>0;if(v&&c)return Lj(e);if(v&&i)return`${t.i}`,t.x=d,t.y=u,t.moved=!1,e;for(let y=0,w=x.length;y<w;y++){const g=x[y];`${t.i}${t.x}${t.y}${g.i}${g.x}${g.y}`,!g.moved&&(g.static?e=Em(e,g,t,s,o):e=Em(e,t,g,s,o))}return e}function Em(e,t,r,n,s,i){const o=s==="horizontal",l=s==="vertical",c=t.static;if(n){n=!1;const f={x:o?Math.max(t.x-r.w,0):r.x,y:l?Math.max(t.y-r.h,0):r.y,w:r.w,h:r.h,i:"-1"},h=as(e,f),x=h&&h.y+h.h>t.y,v=h&&t.x+t.w>h.x;if(h){if(x&&l)return ko(e,r,void 0,t.y+1,n,c,s);if(x&&s==null)return t.y=r.y,r.y=r.y+r.h,e;if(v&&o)return ko(e,t,r.x,void 0,n,c,s)}else return`${r.i}${f.x}${f.y}`,ko(e,r,o?f.x:void 0,l?f.y:void 0,n,c,s)}const d=o?r.x+1:void 0,u=l?r.y+1:void 0;return d==null&&u==null?e:ko(e,r,o?r.x+1:void 0,l?r.y+1:void 0,n,c,s)}function lT(e){return e*100+"%"}const Wj=(e,t,r,n)=>e+r>n?t:r,Bj=(e,t,r)=>e<0?t:r,Uj=e=>Math.max(0,e),xg=e=>Math.max(0,e),yg=(e,t,r)=>{let{left:n,height:s,width:i}=t;const o=e.top-(s-e.height);return{left:n,width:i,height:Bj(o,e.height,s),top:xg(o)}},vg=(e,t,r)=>{let{top:n,left:s,height:i,width:o}=t;return{top:n,height:i,width:Wj(e.left,e.width,o,r),left:Uj(s)}},bg=(e,t,r)=>{let{top:n,height:s,width:i}=t;const o=e.left-(i-e.width);return{height:s,width:o<0?e.width:Wj(e.left,e.width,i,r),top:xg(n),left:Uj(o)}},wg=(e,t,r)=>{let{top:n,left:s,height:i,width:o}=t;return{width:o,left:s,height:Bj(n,e.height,i),top:xg(n)}},cT=function(){return yg(arguments.length<=0?void 0:arguments[0],vg(...arguments))},dT=function(){return yg(arguments.length<=0?void 0:arguments[0],bg(...arguments))},uT=function(){return wg(arguments.length<=0?void 0:arguments[0],vg(...arguments))},hT=function(){return wg(arguments.length<=0?void 0:arguments[0],bg(...arguments))},fT={n:yg,ne:cT,e:vg,se:uT,s:wg,sw:hT,w:bg,nw:dT};function mT(e,t,r,n){const s=fT[e];return s?s(t,{...t,...r},n):r}function pT(e){let{top:t,left:r,width:n,height:s}=e;const i=`translate(${r}px,${t}px)`;return{transform:i,WebkitTransform:i,MozTransform:i,msTransform:i,OTransform:i,width:`${n}px`,height:`${s}px`,position:"absolute"}}function gT(e){let{top:t,left:r,width:n,height:s}=e;return{top:`${t}px`,left:`${r}px`,width:`${n}px`,height:`${s}px`,position:"absolute"}}function jg(e,t){return t==="horizontal"?Yj(e):t==="vertical"?qj(e):e}function qj(e){return e.slice(0).sort(function(t,r){return t.y>r.y||t.y===r.y&&t.x>r.x?1:t.y===r.y&&t.x===r.x?0:-1})}function Yj(e){return e.slice(0).sort(function(t,r){return t.x>r.x||t.x===r.x&&t.y>r.y?1:-1})}function xT(e,t,r,n,s){e=e||[];const i=[];jo.default.Children.forEach(t,l=>{if((l==null?void 0:l.key)==null)return;const c=pg(e,String(l.key)),d=l.props["data-grid"];c&&d==null?i.push(us(c)):d?i.push(us({...d,i:l.key})):i.push(us({w:1,h:1,x:0,y:mg(i),i:String(l.key)}))});const o=Fj(i,{cols:r});return s?o:zj(o,n,r)}function yT(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Layout";const r=["x","y","w","h"];if(!Array.isArray(e))throw new Error(t+" must be an array!");for(let n=0,s=e.length;n<s;n++){const i=e[n];for(let o=0;o<r.length;o++){const l=r[o],c=i[l];if(typeof c!="number"||Number.isNaN(c))throw new Error(`ReactGridLayout: ${t}[${n}].${l} must be a number! Received: ${c} (${typeof c})`)}if(typeof i.i<"u"&&typeof i.i!="string")throw new Error(`ReactGridLayout: ${t}[${n}].i must be a string! Received: ${i.i} (${typeof i.i})`)}}function vT(e){const{verticalCompact:t,compactType:r}=e||{};return t===!1?null:r}const bT=()=>{};Te.noop=bT;var Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});Dn.calcGridColWidth=ju;Dn.calcGridItemPosition=wT;Dn.calcGridItemWHPx=Dm;Dn.calcWH=kT;Dn.calcXY=jT;Dn.clamp=ss;function ju(e){const{margin:t,containerPadding:r,containerWidth:n,cols:s}=e;return(n-t[0]*(s-1)-r[0]*2)/s}function Dm(e,t,r){return Number.isFinite(e)?Math.round(t*e+Math.max(0,e-1)*r):e}function wT(e,t,r,n,s,i){const{margin:o,containerPadding:l,rowHeight:c}=e,d=ju(e),u={};return i&&i.resizing?(u.width=Math.round(i.resizing.width),u.height=Math.round(i.resizing.height)):(u.width=Dm(n,d,o[0]),u.height=Dm(s,c,o[1])),i&&i.dragging?(u.top=Math.round(i.dragging.top),u.left=Math.round(i.dragging.left)):i&&i.resizing&&typeof i.resizing.top=="number"&&typeof i.resizing.left=="number"?(u.top=Math.round(i.resizing.top),u.left=Math.round(i.resizing.left)):(u.top=Math.round((c+o[1])*r+l[1]),u.left=Math.round((d+o[0])*t+l[0])),u}function jT(e,t,r,n,s){const{margin:i,containerPadding:o,cols:l,rowHeight:c,maxRows:d}=e,u=ju(e);let f=Math.round((r-o[0])/(u+i[0])),h=Math.round((t-o[1])/(c+i[1]));return f=ss(f,0,l-n),h=ss(h,0,d-s),{x:f,y:h}}function kT(e,t,r,n,s,i){const{margin:o,maxRows:l,cols:c,rowHeight:d}=e,u=ju(e);let f=Math.round((t+o[0])/(u+o[0])),h=Math.round((r+o[1])/(d+o[1])),x=ss(f,0,c-n),v=ss(h,0,l-s);return["sw","w","nw"].indexOf(i)!==-1&&(x=ss(f,0,c)),["nw","n","ne"].indexOf(i)!==-1&&(v=ss(h,0,l)),{w:x,h:v}}function ss(e,t,r){return Math.max(Math.min(e,r),t)}var ku={},Nu={exports:{}},Vj={},Tm={exports:{}};function Gj(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=Gj(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Iy(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=Gj(e))&&(n&&(n+=" "),n+=t);return n}Tm.exports=Iy,Tm.exports.clsx=Iy;var NT=Tm.exports,mt={},Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.dontSetMe=DT;Tn.findInArray=_T;Tn.int=ET;Tn.isFunction=ST;Tn.isNum=CT;function _T(e,t){for(let r=0,n=e.length;r<n;r++)if(t.apply(t,[e[r],r,e]))return e[r]}function ST(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function CT(e){return typeof e=="number"&&!isNaN(e)}function ET(e){return parseInt(e,10)}function DT(e,t,r){if(e[t])return new Error(`Invalid prop ${t} passed to ${r} - do not set this, set it on the child.`)}var Ts={};Object.defineProperty(Ts,"__esModule",{value:!0});Ts.browserPrefixToKey=Xj;Ts.browserPrefixToStyle=TT;Ts.default=void 0;Ts.getPrefix=Kj;const Qh=["Moz","Webkit","O","ms"];function Kj(){var r,n;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const t=(n=(r=window.document)==null?void 0:r.documentElement)==null?void 0:n.style;if(!t||e in t)return"";for(let s=0;s<Qh.length;s++)if(Xj(e,Qh[s])in t)return Qh[s];return""}function Xj(e,t){return t?`${t}${PT(e)}`:e}function TT(e,t){return t?`-${t.toLowerCase()}-${e}`:e}function PT(e){let t="",r=!0;for(let n=0;n<e.length;n++)r?(t+=e[n].toUpperCase(),r=!1):e[n]==="-"?r=!0:t+=e[n];return t}Ts.default=Kj();Object.defineProperty(mt,"__esModule",{value:!0});mt.addClassName=Zj;mt.addEvent=MT;mt.addUserSelectStyles=UT;mt.createCSSTransform=FT;mt.createSVGTransform=HT;mt.getTouch=WT;mt.getTouchIdentifier=BT;mt.getTranslation=kg;mt.innerHeight=AT;mt.innerWidth=zT;mt.matchesSelector=Qj;mt.matchesSelectorAndParentsTo=OT;mt.offsetXYFromParent=IT;mt.outerHeight=RT;mt.outerWidth=LT;mt.removeClassName=ek;mt.removeEvent=$T;mt.scheduleRemoveUserSelectStyles=qT;var jr=Tn,Fy=Jj(Ts);function Jj(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(Jj=function(s,i){if(!i&&s&&s.__esModule)return s;var o,l,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?n:r){if(o.has(s))return o.get(s);o.set(s,c)}for(const d in s)d!=="default"&&{}.hasOwnProperty.call(s,d)&&((l=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,d))&&(l.get||l.set)?o(c,d,l):c[d]=s[d]);return c})(e,t)}let Nc="";function Qj(e,t){return Nc||(Nc=(0,jr.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(r){return(0,jr.isFunction)(e[r])})),(0,jr.isFunction)(e[Nc])?e[Nc](t):!1}function OT(e,t,r){let n=e;do{if(Qj(n,t))return!0;if(n===r)return!1;n=n.parentNode}while(n);return!1}function MT(e,t,r,n){if(!e)return;const s={capture:!0,...n};e.addEventListener?e.addEventListener(t,r,s):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r}function $T(e,t,r,n){if(!e)return;const s={capture:!0,...n};e.removeEventListener?e.removeEventListener(t,r,s):e.detachEvent?e.detachEvent("on"+t,r):e["on"+t]=null}function RT(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,jr.int)(r.borderTopWidth),t+=(0,jr.int)(r.borderBottomWidth),t}function LT(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,jr.int)(r.borderLeftWidth),t+=(0,jr.int)(r.borderRightWidth),t}function AT(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,jr.int)(r.paddingTop),t-=(0,jr.int)(r.paddingBottom),t}function zT(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,jr.int)(r.paddingLeft),t-=(0,jr.int)(r.paddingRight),t}function IT(e,t,r){const s=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),i=(e.clientX+t.scrollLeft-s.left)/r,o=(e.clientY+t.scrollTop-s.top)/r;return{x:i,y:o}}function FT(e,t){const r=kg(e,t,"px");return{[(0,Fy.browserPrefixToKey)("transform",Fy.default)]:r}}function HT(e,t){return kg(e,t,"")}function kg(e,t,r){let{x:n,y:s}=e,i=`translate(${n}${r},${s}${r})`;if(t){const o=`${typeof t.x=="string"?t.x:t.x+r}`,l=`${typeof t.y=="string"?t.y:t.y+r}`;i=`translate(${o}, ${l})`+i}return i}function WT(e,t){return e.targetTouches&&(0,jr.findInArray)(e.targetTouches,r=>t===r.identifier)||e.changedTouches&&(0,jr.findInArray)(e.changedTouches,r=>t===r.identifier)}function BT(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier}function UT(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,e.getElementsByTagName("head")[0].appendChild(t)),e.body&&Zj(e.body,"react-draggable-transparent-selection")}function qT(e){window.requestAnimationFrame?window.requestAnimationFrame(()=>{Hy(e)}):Hy(e)}function Hy(e){if(e)try{if(e.body&&ek(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function Zj(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp(`(?:^|\\s)${t}(?!\\S)`))||(e.className+=` ${t}`)}function ek(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp(`(?:^|\\s)${t}(?!\\S)`,"g"),"")}var Pn={};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.canDragX=GT;Pn.canDragY=KT;Pn.createCoreData=JT;Pn.createDraggableData=QT;Pn.getBoundPosition=YT;Pn.getControlPosition=XT;Pn.snapToGrid=VT;var yr=Tn,ei=mt;function YT(e,t,r){if(!e.props.bounds)return[t,r];let{bounds:n}=e.props;n=typeof n=="string"?n:ZT(n);const s=Ng(e);if(typeof n=="string"){const{ownerDocument:i}=s,o=i.defaultView;let l;if(n==="parent"?l=s.parentNode:l=s.getRootNode().querySelector(n),!(l instanceof o.HTMLElement))throw new Error('Bounds selector "'+n+'" could not find an element.');const c=l,d=o.getComputedStyle(s),u=o.getComputedStyle(c);n={left:-s.offsetLeft+(0,yr.int)(u.paddingLeft)+(0,yr.int)(d.marginLeft),top:-s.offsetTop+(0,yr.int)(u.paddingTop)+(0,yr.int)(d.marginTop),right:(0,ei.innerWidth)(c)-(0,ei.outerWidth)(s)-s.offsetLeft+(0,yr.int)(u.paddingRight)-(0,yr.int)(d.marginRight),bottom:(0,ei.innerHeight)(c)-(0,ei.outerHeight)(s)-s.offsetTop+(0,yr.int)(u.paddingBottom)-(0,yr.int)(d.marginBottom)}}return(0,yr.isNum)(n.right)&&(t=Math.min(t,n.right)),(0,yr.isNum)(n.bottom)&&(r=Math.min(r,n.bottom)),(0,yr.isNum)(n.left)&&(t=Math.max(t,n.left)),(0,yr.isNum)(n.top)&&(r=Math.max(r,n.top)),[t,r]}function VT(e,t,r){const n=Math.round(t/e[0])*e[0],s=Math.round(r/e[1])*e[1];return[n,s]}function GT(e){return e.props.axis==="both"||e.props.axis==="x"}function KT(e){return e.props.axis==="both"||e.props.axis==="y"}function XT(e,t,r){const n=typeof t=="number"?(0,ei.getTouch)(e,t):null;if(typeof t=="number"&&!n)return null;const s=Ng(r),i=r.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,ei.offsetXYFromParent)(n||e,i,r.props.scale)}function JT(e,t,r){const n=!(0,yr.isNum)(e.lastX),s=Ng(e);return n?{node:s,deltaX:0,deltaY:0,lastX:t,lastY:r,x:t,y:r}:{node:s,deltaX:t-e.lastX,deltaY:r-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:r}}function QT(e,t){const r=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/r,y:e.state.y+t.deltaY/r,deltaX:t.deltaX/r,deltaY:t.deltaY/r,lastX:e.state.x,lastY:e.state.y}}function ZT(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function Ng(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var _u={},Su={};Object.defineProperty(Su,"__esModule",{value:!0});Su.default=eP;function eP(){}Object.defineProperty(_u,"__esModule",{value:!0});_u.default=void 0;var Zh=tk(S),Qt=_g(sa),tP=_g(Tl),Ut=mt,ua=Pn,ef=Tn,co=_g(Su);function _g(e){return e&&e.__esModule?e:{default:e}}function tk(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(tk=function(s,i){if(!i&&s&&s.__esModule)return s;var o,l,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?n:r){if(o.has(s))return o.get(s);o.set(s,c)}for(const d in s)d!=="default"&&{}.hasOwnProperty.call(s,d)&&((l=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,d))&&(l.get||l.set)?o(c,d,l):c[d]=s[d]);return c})(e,t)}function Zt(e,t,r){return(t=rP(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rP(e){var t=nP(e,"string");return typeof t=="symbol"?t:t+""}function nP(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const Xr={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let ha=Xr.mouse,Cu=class extends Zh.Component{constructor(){super(...arguments),Zt(this,"dragging",!1),Zt(this,"lastX",NaN),Zt(this,"lastY",NaN),Zt(this,"touchIdentifier",null),Zt(this,"mounted",!1),Zt(this,"handleDragStart",t=>{if(this.props.onMouseDown(t),!this.props.allowAnyClick&&typeof t.button=="number"&&t.button!==0)return!1;const r=this.findDOMNode();if(!r||!r.ownerDocument||!r.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:n}=r;if(this.props.disabled||!(t.target instanceof n.defaultView.Node)||this.props.handle&&!(0,Ut.matchesSelectorAndParentsTo)(t.target,this.props.handle,r)||this.props.cancel&&(0,Ut.matchesSelectorAndParentsTo)(t.target,this.props.cancel,r))return;t.type==="touchstart"&&!this.props.allowMobileScroll&&t.preventDefault();const s=(0,Ut.getTouchIdentifier)(t);this.touchIdentifier=s;const i=(0,ua.getControlPosition)(t,s,this);if(i==null)return;const{x:o,y:l}=i,c=(0,ua.createCoreData)(this,o,l);(0,co.default)("DraggableCore: handleDragStart: %j",c),(0,co.default)("calling",this.props.onStart),!(this.props.onStart(t,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,Ut.addUserSelectStyles)(n),this.dragging=!0,this.lastX=o,this.lastY=l,(0,Ut.addEvent)(n,ha.move,this.handleDrag),(0,Ut.addEvent)(n,ha.stop,this.handleDragStop))}),Zt(this,"handleDrag",t=>{const r=(0,ua.getControlPosition)(t,this.touchIdentifier,this);if(r==null)return;let{x:n,y:s}=r;if(Array.isArray(this.props.grid)){let l=n-this.lastX,c=s-this.lastY;if([l,c]=(0,ua.snapToGrid)(this.props.grid,l,c),!l&&!c)return;n=this.lastX+l,s=this.lastY+c}const i=(0,ua.createCoreData)(this,n,s);if((0,co.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(t,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=n,this.lastY=s}),Zt(this,"handleDragStop",t=>{if(!this.dragging)return;const r=(0,ua.getControlPosition)(t,this.touchIdentifier,this);if(r==null)return;let{x:n,y:s}=r;if(Array.isArray(this.props.grid)){let c=n-this.lastX||0,d=s-this.lastY||0;[c,d]=(0,ua.snapToGrid)(this.props.grid,c,d),n=this.lastX+c,s=this.lastY+d}const i=(0,ua.createCoreData)(this,n,s);if(this.props.onStop(t,i)===!1||this.mounted===!1)return!1;const l=this.findDOMNode();l&&this.props.enableUserSelectHack&&(0,Ut.scheduleRemoveUserSelectStyles)(l.ownerDocument),(0,co.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,l&&((0,co.default)("DraggableCore: Removing handlers"),(0,Ut.removeEvent)(l.ownerDocument,ha.move,this.handleDrag),(0,Ut.removeEvent)(l.ownerDocument,ha.stop,this.handleDragStop))}),Zt(this,"onMouseDown",t=>(ha=Xr.mouse,this.handleDragStart(t))),Zt(this,"onMouseUp",t=>(ha=Xr.mouse,this.handleDragStop(t))),Zt(this,"onTouchStart",t=>(ha=Xr.touch,this.handleDragStart(t))),Zt(this,"onTouchEnd",t=>(ha=Xr.touch,this.handleDragStop(t)))}componentDidMount(){this.mounted=!0;const t=this.findDOMNode();t&&(0,Ut.addEvent)(t,Xr.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const t=this.findDOMNode();if(t){const{ownerDocument:r}=t;(0,Ut.removeEvent)(r,Xr.mouse.move,this.handleDrag),(0,Ut.removeEvent)(r,Xr.touch.move,this.handleDrag),(0,Ut.removeEvent)(r,Xr.mouse.stop,this.handleDragStop),(0,Ut.removeEvent)(r,Xr.touch.stop,this.handleDragStop),(0,Ut.removeEvent)(t,Xr.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Ut.scheduleRemoveUserSelectStyles)(r)}}findDOMNode(){var t,r,n;return(t=this.props)!=null&&t.nodeRef?(n=(r=this.props)==null?void 0:r.nodeRef)==null?void 0:n.current:tP.default.findDOMNode(this)}render(){return Zh.cloneElement(Zh.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};_u.default=Cu;Zt(Cu,"displayName","DraggableCore");Zt(Cu,"propTypes",{allowAnyClick:Qt.default.bool,allowMobileScroll:Qt.default.bool,children:Qt.default.node.isRequired,disabled:Qt.default.bool,enableUserSelectHack:Qt.default.bool,offsetParent:function(e,t){if(e[t]&&e[t].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Qt.default.arrayOf(Qt.default.number),handle:Qt.default.string,cancel:Qt.default.string,nodeRef:Qt.default.object,onStart:Qt.default.func,onDrag:Qt.default.func,onStop:Qt.default.func,onMouseDown:Qt.default.func,scale:Qt.default.number,className:ef.dontSetMe,style:ef.dontSetMe,transform:ef.dontSetMe});Zt(Cu,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),e.default=void 0;var t=f(S),r=u(sa),n=u(Tl),s=NT,i=mt,o=Pn,l=Tn,c=u(_u),d=u(Su);function u(g){return g&&g.__esModule?g:{default:g}}function f(g,p){if(typeof WeakMap=="function")var j=new WeakMap,b=new WeakMap;return(f=function(N,C){if(!C&&N&&N.__esModule)return N;var E,T,O={__proto__:null,default:N};if(N===null||typeof N!="object"&&typeof N!="function")return O;if(E=C?b:j){if(E.has(N))return E.get(N);E.set(N,O)}for(const M in N)M!=="default"&&{}.hasOwnProperty.call(N,M)&&((T=(E=Object.defineProperty)&&Object.getOwnPropertyDescriptor(N,M))&&(T.get||T.set)?E(O,M,T):O[M]=N[M]);return O})(g,p)}function h(){return h=Object.assign?Object.assign.bind():function(g){for(var p=1;p<arguments.length;p++){var j=arguments[p];for(var b in j)({}).hasOwnProperty.call(j,b)&&(g[b]=j[b])}return g},h.apply(null,arguments)}function x(g,p,j){return(p=v(p))in g?Object.defineProperty(g,p,{value:j,enumerable:!0,configurable:!0,writable:!0}):g[p]=j,g}function v(g){var p=y(g,"string");return typeof p=="symbol"?p:p+""}function y(g,p){if(typeof g!="object"||!g)return g;var j=g[Symbol.toPrimitive];if(j!==void 0){var b=j.call(g,p);if(typeof b!="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(g)}class w extends t.Component{static getDerivedStateFromProps(p,j){let{position:b}=p,{prevPropsPosition:N}=j;return b&&(!N||b.x!==N.x||b.y!==N.y)?((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:b,prevPropsPosition:N}),{x:b.x,y:b.y,prevPropsPosition:{...b}}):null}constructor(p){super(p),x(this,"onDragStart",(j,b)=>{if((0,d.default)("Draggable: onDragStart: %j",b),this.props.onStart(j,(0,o.createDraggableData)(this,b))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),x(this,"onDrag",(j,b)=>{if(!this.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",b);const N=(0,o.createDraggableData)(this,b),C={x:N.x,y:N.y,slackX:0,slackY:0};if(this.props.bounds){const{x:T,y:O}=C;C.x+=this.state.slackX,C.y+=this.state.slackY;const[M,R]=(0,o.getBoundPosition)(this,C.x,C.y);C.x=M,C.y=R,C.slackX=this.state.slackX+(T-C.x),C.slackY=this.state.slackY+(O-C.y),N.x=C.x,N.y=C.y,N.deltaX=C.x-this.state.x,N.deltaY=C.y-this.state.y}if(this.props.onDrag(j,N)===!1)return!1;this.setState(C)}),x(this,"onDragStop",(j,b)=>{if(!this.state.dragging||this.props.onStop(j,(0,o.createDraggableData)(this,b))===!1)return!1;(0,d.default)("Draggable: onDragStop: %j",b);const C={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:T,y:O}=this.props.position;C.x=T,C.y=O}this.setState(C)}),this.state={dragging:!1,dragged:!1,x:p.position?p.position.x:p.defaultPosition.x,y:p.position?p.position.y:p.defaultPosition.y,prevPropsPosition:{...p.position},slackX:0,slackY:0,isElementSVG:!1},p.position&&!(p.onDrag||p.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var p,j;return((j=(p=this.props)==null?void 0:p.nodeRef)==null?void 0:j.current)??n.default.findDOMNode(this)}render(){const{axis:p,bounds:j,children:b,defaultPosition:N,defaultClassName:C,defaultClassNameDragging:E,defaultClassNameDragged:T,position:O,positionOffset:M,scale:R,...H}=this.props;let A={},L=null;const te=!!!O||this.state.dragging,he=O||N,G={x:(0,o.canDragX)(this)&&te?this.state.x:he.x,y:(0,o.canDragY)(this)&&te?this.state.y:he.y};this.state.isElementSVG?L=(0,i.createSVGTransform)(G,M):A=(0,i.createCSSTransform)(G,M);const Z=(0,s.clsx)(b.props.className||"",C,{[E]:this.state.dragging,[T]:this.state.dragged});return t.createElement(c.default,h({},H,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(b),{className:Z,style:{...b.props.style,...A},transform:L}))}}e.default=w,x(w,"displayName","Draggable"),x(w,"propTypes",{...c.default.propTypes,axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),x(w,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(Vj);const{default:rk,DraggableCore:aP}=Vj;Nu.exports=rk;Nu.exports.default=rk;Nu.exports.DraggableCore=aP;var nk=Nu.exports,Eu={exports:{}},Rl={},Sg={};Sg.__esModule=!0;Sg.cloneElement=dP;var sP=iP(S);function iP(e){return e&&e.__esModule?e:{default:e}}function Wy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function By(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wy(Object(r),!0).forEach(function(n){oP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wy(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oP(e,t,r){return t=lP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lP(e){var t=cP(e,"string");return typeof t=="symbol"?t:String(t)}function cP(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dP(e,t){return t.style&&e.props.style&&(t.style=By(By({},e.props.style),t.style)),t.className&&e.props.className&&(t.className=e.props.className+" "+t.className),sP.default.cloneElement(e,t)}var Ll={};Ll.__esModule=!0;Ll.resizableProps=void 0;var _e=uP(sa);function uP(e){return e&&e.__esModule?e:{default:e}}var hP={axis:_e.default.oneOf(["both","x","y","none"]),className:_e.default.string,children:_e.default.element.isRequired,draggableOpts:_e.default.shape({allowAnyClick:_e.default.bool,cancel:_e.default.string,children:_e.default.node,disabled:_e.default.bool,enableUserSelectHack:_e.default.bool,offsetParent:_e.default.node,grid:_e.default.arrayOf(_e.default.number),handle:_e.default.string,nodeRef:_e.default.object,onStart:_e.default.func,onDrag:_e.default.func,onStop:_e.default.func,onMouseDown:_e.default.func,scale:_e.default.number}),height:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0];if(s.axis==="both"||s.axis==="y"){var i;return(i=_e.default.number).isRequired.apply(i,r)}return _e.default.number.apply(_e.default,r)},handle:_e.default.oneOfType([_e.default.node,_e.default.func]),handleSize:_e.default.arrayOf(_e.default.number),lockAspectRatio:_e.default.bool,maxConstraints:_e.default.arrayOf(_e.default.number),minConstraints:_e.default.arrayOf(_e.default.number),onResizeStop:_e.default.func,onResizeStart:_e.default.func,onResize:_e.default.func,resizeHandles:_e.default.arrayOf(_e.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:_e.default.number,width:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0];if(s.axis==="both"||s.axis==="x"){var i;return(i=_e.default.number).isRequired.apply(i,r)}return _e.default.number.apply(_e.default,r)}};Ll.resizableProps=hP;Rl.__esModule=!0;Rl.default=void 0;var uo=xP(S),fP=nk,mP=Sg,pP=Ll,gP=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function ak(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(ak=function(s){return s?r:t})(e)}function xP(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=ak(t);if(r&&r.has(e))return r.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var o=s?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function Pm(){return Pm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pm.apply(this,arguments)}function yP(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function Uy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function tf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Uy(Object(r),!0).forEach(function(n){vP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uy(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vP(e,t,r){return t=bP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bP(e){var t=wP(e,"string");return typeof t=="symbol"?t:String(t)}function wP(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jP(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Om(e,t)}function Om(e,t){return Om=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Om(e,t)}var Cg=function(e){jP(t,e);function t(){for(var n,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,n.handleRefs={},n.lastHandleRect=null,n.slack=null,n}var r=t.prototype;return r.componentWillUnmount=function(){this.resetData()},r.resetData=function(){this.lastHandleRect=this.slack=null},r.runConstraints=function(s,i){var o=this.props,l=o.minConstraints,c=o.maxConstraints,d=o.lockAspectRatio;if(!l&&!c&&!d)return[s,i];if(d){var u=this.props.width/this.props.height,f=s-this.props.width,h=i-this.props.height;Math.abs(f)>Math.abs(h*u)?i=s/u:s=i*u}var x=s,v=i,y=this.slack||[0,0],w=y[0],g=y[1];return s+=w,i+=g,l&&(s=Math.max(l[0],s),i=Math.max(l[1],i)),c&&(s=Math.min(c[0],s),i=Math.min(c[1],i)),this.slack=[w+(x-s),g+(v-i)],[s,i]},r.resizeHandler=function(s,i){var o=this;return function(l,c){var d=c.node,u=c.deltaX,f=c.deltaY;s==="onResizeStart"&&o.resetData();var h=(o.props.axis==="both"||o.props.axis==="x")&&i!=="n"&&i!=="s",x=(o.props.axis==="both"||o.props.axis==="y")&&i!=="e"&&i!=="w";if(!(!h&&!x)){var v=i[0],y=i[i.length-1],w=d.getBoundingClientRect();if(o.lastHandleRect!=null){if(y==="w"){var g=w.left-o.lastHandleRect.left;u+=g}if(v==="n"){var p=w.top-o.lastHandleRect.top;f+=p}}o.lastHandleRect=w,y==="w"&&(u=-u),v==="n"&&(f=-f);var j=o.props.width+(h?u/o.props.transformScale:0),b=o.props.height+(x?f/o.props.transformScale:0),N=o.runConstraints(j,b);j=N[0],b=N[1];var C=j!==o.props.width||b!==o.props.height,E=typeof o.props[s]=="function"?o.props[s]:null,T=s==="onResize"&&!C;E&&!T&&(l.persist==null||l.persist(),E(l,{node:d,size:{width:j,height:b},handle:i})),s==="onResizeStop"&&o.resetData()}}},r.renderResizeHandle=function(s,i){var o=this.props.handle;if(!o)return uo.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+s,ref:i});if(typeof o=="function")return o(s,i);var l=typeof o.type=="string",c=tf({ref:i},l?{}:{handleAxis:s});return uo.cloneElement(o,c)},r.render=function(){var s=this,i=this.props,o=i.children,l=i.className,c=i.draggableOpts;i.width,i.height,i.handle,i.handleSize,i.lockAspectRatio,i.axis,i.minConstraints,i.maxConstraints,i.onResize,i.onResizeStop,i.onResizeStart;var d=i.resizeHandles;i.transformScale;var u=yP(i,gP);return(0,mP.cloneElement)(o,tf(tf({},u),{},{className:(l?l+" ":"")+"react-resizable",children:[].concat(o.props.children,d.map(function(f){var h,x=(h=s.handleRefs[f])!=null?h:s.handleRefs[f]=uo.createRef();return uo.createElement(fP.DraggableCore,Pm({},c,{nodeRef:x,key:"resizableHandle-"+f,onStop:s.resizeHandler("onResizeStop",f),onStart:s.resizeHandler("onResizeStart",f),onDrag:s.resizeHandler("onResize",f)}),s.renderResizeHandle(f,x))}))}))},t}(uo.Component);Rl.default=Cg;Cg.propTypes=pP.resizableProps;Cg.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var Du={};Du.__esModule=!0;Du.default=void 0;var rf=CP(S),kP=sk(sa),NP=sk(Rl),_P=Ll,SP=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function sk(e){return e&&e.__esModule?e:{default:e}}function ik(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(ik=function(s){return s?r:t})(e)}function CP(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=ik(t);if(r&&r.has(e))return r.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var o=s?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function Mm(){return Mm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mm.apply(this,arguments)}function qy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Od(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qy(Object(r),!0).forEach(function(n){EP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qy(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EP(e,t,r){return t=DP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DP(e){var t=TP(e,"string");return typeof t=="symbol"?t:String(t)}function TP(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PP(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function OP(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,$m(e,t)}function $m(e,t){return $m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},$m(e,t)}var ok=function(e){OP(t,e);function t(){for(var n,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,n.state={width:n.props.width,height:n.props.height,propsWidth:n.props.width,propsHeight:n.props.height},n.onResize=function(l,c){var d=c.size;n.props.onResize?(l.persist==null||l.persist(),n.setState(d,function(){return n.props.onResize&&n.props.onResize(l,c)})):n.setState(d)},n}t.getDerivedStateFromProps=function(s,i){return i.propsWidth!==s.width||i.propsHeight!==s.height?{width:s.width,height:s.height,propsWidth:s.width,propsHeight:s.height}:null};var r=t.prototype;return r.render=function(){var s=this.props,i=s.handle,o=s.handleSize;s.onResize;var l=s.onResizeStart,c=s.onResizeStop,d=s.draggableOpts,u=s.minConstraints,f=s.maxConstraints,h=s.lockAspectRatio,x=s.axis;s.width,s.height;var v=s.resizeHandles,y=s.style,w=s.transformScale,g=PP(s,SP);return rf.createElement(NP.default,{axis:x,draggableOpts:d,handle:i,handleSize:o,height:this.state.height,lockAspectRatio:h,maxConstraints:f,minConstraints:u,onResizeStart:l,onResize:this.onResize,onResizeStop:c,resizeHandles:v,transformScale:w,width:this.state.width},rf.createElement("div",Mm({},g,{style:Od(Od({},y),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},t}(rf.Component);Du.default=ok;ok.propTypes=Od(Od({},_P.resizableProps),{},{children:kP.default.element});Eu.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")};Eu.exports.Resizable=Rl.default;Eu.exports.ResizableBox=Du.default;var MP=Eu.exports,Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.resizeHandleType=Vn.resizeHandleAxesType=Vn.default=void 0;var Ee=lk(sa),$P=lk(S);function lk(e){return e&&e.__esModule?e:{default:e}}const RP=Vn.resizeHandleAxesType=Ee.default.arrayOf(Ee.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),LP=Vn.resizeHandleType=Ee.default.oneOfType([Ee.default.node,Ee.default.func]);Vn.default={className:Ee.default.string,style:Ee.default.object,width:Ee.default.number,autoSize:Ee.default.bool,cols:Ee.default.number,draggableCancel:Ee.default.string,draggableHandle:Ee.default.string,verticalCompact:function(e){e.verticalCompact},compactType:Ee.default.oneOf(["vertical","horizontal"]),layout:function(e){var t=e.layout;t!==void 0&&Te.validateLayout(t,"layout")},margin:Ee.default.arrayOf(Ee.default.number),containerPadding:Ee.default.arrayOf(Ee.default.number),rowHeight:Ee.default.number,maxRows:Ee.default.number,isBounded:Ee.default.bool,isDraggable:Ee.default.bool,isResizable:Ee.default.bool,allowOverlap:Ee.default.bool,preventCollision:Ee.default.bool,useCSSTransforms:Ee.default.bool,transformScale:Ee.default.number,isDroppable:Ee.default.bool,resizeHandles:RP,resizeHandle:LP,onLayoutChange:Ee.default.func,onDragStart:Ee.default.func,onDrag:Ee.default.func,onDragStop:Ee.default.func,onResizeStart:Ee.default.func,onResize:Ee.default.func,onResizeStop:Ee.default.func,onDrop:Ee.default.func,droppingItem:Ee.default.shape({i:Ee.default.string.isRequired,w:Ee.default.number.isRequired,h:Ee.default.number.isRequired}),children:function(e,t){const r=e[t],n={};$P.default.Children.forEach(r,function(s){if((s==null?void 0:s.key)!=null){if(n[s.key])throw new Error('Duplicate child key "'+s.key+'" found! This will cause problems in ReactGridLayout.');n[s.key]=!0}})},innerRef:Ee.default.any};Object.defineProperty(ku,"__esModule",{value:!0});ku.default=void 0;var Ls=Eg(S),Yy=Tl,He=Eg(sa),AP=nk,zP=MP,As=Te,Rt=Dn,Vy=Vn,IP=Eg(fg);function Eg(e){return e&&e.__esModule?e:{default:e}}function yn(e,t,r){return(t=FP(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FP(e){var t=HP(e,"string");return typeof t=="symbol"?t:t+""}function HP(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Dg extends Ls.default.Component{constructor(){super(...arguments),yn(this,"state",{resizing:null,dragging:null,className:""}),yn(this,"elementRef",Ls.default.createRef()),yn(this,"onDragStart",(t,r)=>{let{node:n}=r;const{onDragStart:s,transformScale:i}=this.props;if(!s)return;const o={top:0,left:0},{offsetParent:l}=n;if(!l)return;const c=l.getBoundingClientRect(),d=n.getBoundingClientRect(),u=d.left/i,f=c.left/i,h=d.top/i,x=c.top/i;o.left=u-f+l.scrollLeft,o.top=h-x+l.scrollTop,this.setState({dragging:o});const{x:v,y}=(0,Rt.calcXY)(this.getPositionParams(),o.top,o.left,this.props.w,this.props.h);return s.call(this,this.props.i,v,y,{e:t,node:n,newPosition:o})}),yn(this,"onDrag",(t,r,n)=>{let{node:s,deltaX:i,deltaY:o}=r;const{onDrag:l}=this.props;if(!l)return;if(!this.state.dragging)throw new Error("onDrag called before onDragStart.");let c=this.state.dragging.top+o,d=this.state.dragging.left+i;const{isBounded:u,i:f,w:h,h:x,containerWidth:v}=this.props,y=this.getPositionParams();if(u){const{offsetParent:j}=s;if(j){const{margin:b,rowHeight:N}=this.props,C=j.clientHeight-(0,Rt.calcGridItemWHPx)(x,N,b[1]);c=(0,Rt.clamp)(c,0,C);const E=(0,Rt.calcGridColWidth)(y),T=v-(0,Rt.calcGridItemWHPx)(h,E,b[0]);d=(0,Rt.clamp)(d,0,T)}}const w={top:c,left:d};n?this.setState({dragging:w}):(0,Yy.flushSync)(()=>{this.setState({dragging:w})});const{x:g,y:p}=(0,Rt.calcXY)(y,c,d,h,x);return l.call(this,f,g,p,{e:t,node:s,newPosition:w})}),yn(this,"onDragStop",(t,r)=>{let{node:n}=r;const{onDragStop:s}=this.props;if(!s)return;if(!this.state.dragging)throw new Error("onDragEnd called before onDragStart.");const{w:i,h:o,i:l}=this.props,{left:c,top:d}=this.state.dragging,u={top:d,left:c};this.setState({dragging:null});const{x:f,y:h}=(0,Rt.calcXY)(this.getPositionParams(),d,c,i,o);return s.call(this,l,f,h,{e:t,node:n,newPosition:u})}),yn(this,"onResizeStop",(t,r,n)=>this.onResizeHandler(t,r,n,"onResizeStop")),yn(this,"onResizeStart",(t,r,n)=>this.onResizeHandler(t,r,n,"onResizeStart")),yn(this,"onResize",(t,r,n)=>this.onResizeHandler(t,r,n,"onResize"))}shouldComponentUpdate(t,r){if(this.props.children!==t.children||this.props.droppingPosition!==t.droppingPosition)return!0;const n=(0,Rt.calcGridItemPosition)(this.getPositionParams(this.props),this.props.x,this.props.y,this.props.w,this.props.h,this.state),s=(0,Rt.calcGridItemPosition)(this.getPositionParams(t),t.x,t.y,t.w,t.h,r);return!(0,As.fastPositionEqual)(n,s)||this.props.useCSSTransforms!==t.useCSSTransforms}componentDidMount(){this.moveDroppingItem({})}componentDidUpdate(t){this.moveDroppingItem(t)}moveDroppingItem(t){const{droppingPosition:r}=this.props;if(!r)return;const n=this.elementRef.current;if(!n)return;const s=t.droppingPosition||{left:0,top:0},{dragging:i}=this.state,o=i&&r.left!==s.left||r.top!==s.top;if(!i)this.onDragStart(r.e,{node:n,deltaX:r.left,deltaY:r.top});else if(o){const l=r.left-i.left,c=r.top-i.top;this.onDrag(r.e,{node:n,deltaX:l,deltaY:c},!0)}}getPositionParams(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return{cols:t.cols,containerPadding:t.containerPadding,containerWidth:t.containerWidth,margin:t.margin,maxRows:t.maxRows,rowHeight:t.rowHeight}}createStyle(t){const{usePercentages:r,containerWidth:n,useCSSTransforms:s}=this.props;let i;return s?i=(0,As.setTransform)(t):(i=(0,As.setTopLeft)(t),r&&(i.left=(0,As.perc)(t.left/n),i.width=(0,As.perc)(t.width/n))),i}mixinDraggable(t,r){return Ls.default.createElement(AP.DraggableCore,{disabled:!r,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:""),scale:this.props.transformScale,nodeRef:this.elementRef},t)}curryResizeHandler(t,r){return(n,s)=>r(n,s,t)}mixinResizable(t,r,n){const{cols:s,minW:i,minH:o,maxW:l,maxH:c,transformScale:d,resizeHandles:u,resizeHandle:f}=this.props,h=this.getPositionParams(),x=(0,Rt.calcGridItemPosition)(h,0,0,s,0).width,v=(0,Rt.calcGridItemPosition)(h,0,0,i,o),y=(0,Rt.calcGridItemPosition)(h,0,0,l,c),w=[v.width,v.height],g=[Math.min(y.width,x),Math.min(y.height,1/0)];return Ls.default.createElement(zP.Resizable,{draggableOpts:{disabled:!n},className:n?void 0:"react-resizable-hide",width:r.width,height:r.height,minConstraints:w,maxConstraints:g,onResizeStop:this.curryResizeHandler(r,this.onResizeStop),onResizeStart:this.curryResizeHandler(r,this.onResizeStart),onResize:this.curryResizeHandler(r,this.onResize),transformScale:d,resizeHandles:u,handle:f},t)}onResizeHandler(t,r,n,s){let{node:i,size:o,handle:l}=r;const c=this.props[s];if(!c)return;const{x:d,y:u,i:f,maxH:h,minH:x,containerWidth:v}=this.props,{minW:y,maxW:w}=this.props;let g=o;i&&(g=(0,As.resizeItemInDirection)(l,n,o,v),(0,Yy.flushSync)(()=>{this.setState({resizing:s==="onResizeStop"?null:g})}));let{w:p,h:j}=(0,Rt.calcWH)(this.getPositionParams(),g.width,g.height,d,u,l);p=(0,Rt.clamp)(p,Math.max(y,1),w),j=(0,Rt.clamp)(j,x,h),c.call(this,f,p,j,{e:t,node:i,size:g,handle:l})}render(){const{x:t,y:r,w:n,h:s,isDraggable:i,isResizable:o,droppingPosition:l,useCSSTransforms:c}=this.props,d=(0,Rt.calcGridItemPosition)(this.getPositionParams(),t,r,n,s,this.state),u=Ls.default.Children.only(this.props.children);let f=Ls.default.cloneElement(u,{ref:this.elementRef,className:(0,IP.default)("react-grid-item",u.props.className,this.props.className,{static:this.props.static,resizing:!!this.state.resizing,"react-draggable":i,"react-draggable-dragging":!!this.state.dragging,dropping:!!l,cssTransforms:c}),style:{...this.props.style,...u.props.style,...this.createStyle(d)}});return f=this.mixinResizable(f,d,o),f=this.mixinDraggable(f,i),f}}ku.default=Dg;yn(Dg,"propTypes",{children:He.default.element,cols:He.default.number.isRequired,containerWidth:He.default.number.isRequired,rowHeight:He.default.number.isRequired,margin:He.default.array.isRequired,maxRows:He.default.number.isRequired,containerPadding:He.default.array.isRequired,x:He.default.number.isRequired,y:He.default.number.isRequired,w:He.default.number.isRequired,h:He.default.number.isRequired,minW:function(e,t){const r=e[t];if(typeof r!="number")return new Error("minWidth not Number");if(r>e.w||r>e.maxW)return new Error("minWidth larger than item width/maxWidth")},maxW:function(e,t){const r=e[t];if(typeof r!="number")return new Error("maxWidth not Number");if(r<e.w||r<e.minW)return new Error("maxWidth smaller than item width/minWidth")},minH:function(e,t){const r=e[t];if(typeof r!="number")return new Error("minHeight not Number");if(r>e.h||r>e.maxH)return new Error("minHeight larger than item height/maxHeight")},maxH:function(e,t){const r=e[t];if(typeof r!="number")return new Error("maxHeight not Number");if(r<e.h||r<e.minH)return new Error("maxHeight smaller than item height/minHeight")},i:He.default.string.isRequired,resizeHandles:Vy.resizeHandleAxesType,resizeHandle:Vy.resizeHandleType,onDragStop:He.default.func,onDragStart:He.default.func,onDrag:He.default.func,onResizeStop:He.default.func,onResizeStart:He.default.func,onResize:He.default.func,isDraggable:He.default.bool.isRequired,isResizable:He.default.bool.isRequired,isBounded:He.default.bool.isRequired,static:He.default.bool,useCSSTransforms:He.default.bool.isRequired,transformScale:He.default.number,className:He.default.string,handle:He.default.string,cancel:He.default.string,droppingPosition:He.default.shape({e:He.default.object.isRequired,left:He.default.number.isRequired,top:He.default.number.isRequired})});yn(Dg,"defaultProps",{className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0,transformScale:1});Object.defineProperty($l,"__esModule",{value:!0});$l.default=void 0;var Ga=ck(S),nf=hg,WP=Tg(fg),be=Te,BP=Dn,Gy=Tg(ku),UP=Tg(Vn);function Tg(e){return e&&e.__esModule?e:{default:e}}function ck(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(ck=function(s,i){if(!i&&s&&s.__esModule)return s;var o,l,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?n:r){if(o.has(s))return o.get(s);o.set(s,c)}for(const d in s)d!=="default"&&{}.hasOwnProperty.call(s,d)&&((l=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,d))&&(l.get||l.set)?o(c,d,l):c[d]=s[d]);return c})(e,t)}function Yt(e,t,r){return(t=qP(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qP(e){var t=YP(e,"string");return typeof t=="symbol"?t:t+""}function YP(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const Ky="react-grid-layout";let dk=!1;try{dk=/firefox/i.test(navigator.userAgent)}catch{}class Tu extends Ga.Component{constructor(){super(...arguments),Yt(this,"state",{activeDrag:null,layout:(0,be.synchronizeLayoutWithChildren)(this.props.layout,this.props.children,this.props.cols,(0,be.compactType)(this.props),this.props.allowOverlap),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null,resizing:!1,droppingDOMNode:null,children:[]}),Yt(this,"dragEnterCounter",0),Yt(this,"onDragStart",(t,r,n,s)=>{let{e:i,node:o}=s;const{layout:l}=this.state,c=(0,be.getLayoutItem)(l,t);if(!c)return;const d={w:c.w,h:c.h,x:c.x,y:c.y,placeholder:!0,i:t};return this.setState({oldDragItem:(0,be.cloneLayoutItem)(c),oldLayout:l,activeDrag:d}),this.props.onDragStart(l,c,c,null,i,o)}),Yt(this,"onDrag",(t,r,n,s)=>{let{e:i,node:o}=s;const{oldDragItem:l}=this.state;let{layout:c}=this.state;const{cols:d,allowOverlap:u,preventCollision:f}=this.props,h=(0,be.getLayoutItem)(c,t);if(!h)return;const x={w:h.w,h:h.h,x:h.x,y:h.y,placeholder:!0,i:t};c=(0,be.moveElement)(c,h,r,n,!0,f,(0,be.compactType)(this.props),d,u),this.props.onDrag(c,l,h,x,i,o),this.setState({layout:u?c:(0,be.compact)(c,(0,be.compactType)(this.props),d),activeDrag:x})}),Yt(this,"onDragStop",(t,r,n,s)=>{let{e:i,node:o}=s;if(!this.state.activeDrag)return;const{oldDragItem:l}=this.state;let{layout:c}=this.state;const{cols:d,preventCollision:u,allowOverlap:f}=this.props,h=(0,be.getLayoutItem)(c,t);if(!h)return;c=(0,be.moveElement)(c,h,r,n,!0,u,(0,be.compactType)(this.props),d,f);const v=f?c:(0,be.compact)(c,(0,be.compactType)(this.props),d);this.props.onDragStop(v,l,h,null,i,o);const{oldLayout:y}=this.state;this.setState({activeDrag:null,layout:v,oldDragItem:null,oldLayout:null}),this.onLayoutMaybeChanged(v,y)}),Yt(this,"onResizeStart",(t,r,n,s)=>{let{e:i,node:o}=s;const{layout:l}=this.state,c=(0,be.getLayoutItem)(l,t);c&&(this.setState({oldResizeItem:(0,be.cloneLayoutItem)(c),oldLayout:this.state.layout,resizing:!0}),this.props.onResizeStart(l,c,c,null,i,o))}),Yt(this,"onResize",(t,r,n,s)=>{let{e:i,node:o,size:l,handle:c}=s;const{oldResizeItem:d}=this.state,{layout:u}=this.state,{cols:f,preventCollision:h,allowOverlap:x}=this.props;let v=!1,y,w,g;const[p,j]=(0,be.withLayoutItem)(u,t,N=>{let C;return w=N.x,g=N.y,["sw","w","nw","n","ne"].indexOf(c)!==-1&&(["sw","nw","w"].indexOf(c)!==-1&&(w=N.x+(N.w-r),r=N.x!==w&&w<0?N.w:r,w=w<0?0:w),["ne","n","nw"].indexOf(c)!==-1&&(g=N.y+(N.h-n),n=N.y!==g&&g<0?N.h:n,g=g<0?0:g),v=!0),h&&!x&&(C=(0,be.getAllCollisions)(u,{...N,w:r,h:n,x:w,y:g}).filter(T=>T.i!==N.i).length>0,C&&(g=N.y,n=N.h,w=N.x,r=N.w,v=!1)),N.w=r,N.h=n,N});if(!j)return;y=p,v&&(y=(0,be.moveElement)(p,j,w,g,!0,this.props.preventCollision,(0,be.compactType)(this.props),f,x));const b={w:j.w,h:j.h,x:j.x,y:j.y,static:!0,i:t};this.props.onResize(y,d,j,b,i,o),this.setState({layout:x?y:(0,be.compact)(y,(0,be.compactType)(this.props),f),activeDrag:b})}),Yt(this,"onResizeStop",(t,r,n,s)=>{let{e:i,node:o}=s;const{layout:l,oldResizeItem:c}=this.state,{cols:d,allowOverlap:u}=this.props,f=(0,be.getLayoutItem)(l,t),h=u?l:(0,be.compact)(l,(0,be.compactType)(this.props),d);this.props.onResizeStop(h,c,f,null,i,o);const{oldLayout:x}=this.state;this.setState({activeDrag:null,layout:h,oldResizeItem:null,oldLayout:null,resizing:!1}),this.onLayoutMaybeChanged(h,x)}),Yt(this,"onDragOver",t=>{var p;if(t.preventDefault(),t.stopPropagation(),dk&&!((p=t.nativeEvent.target)!=null&&p.classList.contains(Ky)))return!1;const{droppingItem:r,onDropDragOver:n,margin:s,cols:i,rowHeight:o,maxRows:l,width:c,containerPadding:d,transformScale:u}=this.props,f=n==null?void 0:n(t);if(f===!1)return this.state.droppingDOMNode&&this.removeDroppingPlaceholder(),!1;const h={...r,...f},{layout:x}=this.state,v=t.currentTarget.getBoundingClientRect(),y=t.clientX-v.left,w=t.clientY-v.top,g={left:y/u,top:w/u,e:t};if(this.state.droppingDOMNode){if(this.state.droppingPosition){const{left:j,top:b}=this.state.droppingPosition;(j!=y||b!=w)&&this.setState({droppingPosition:g})}}else{const j={cols:i,margin:s,maxRows:l,rowHeight:o,containerWidth:c,containerPadding:d||s},b=(0,BP.calcXY)(j,w,y,h.w,h.h);this.setState({droppingDOMNode:Ga.createElement("div",{key:h.i}),droppingPosition:g,layout:[...x,{...h,x:b.x,y:b.y,static:!1,isDraggable:!0}]})}}),Yt(this,"removeDroppingPlaceholder",()=>{const{droppingItem:t,cols:r}=this.props,{layout:n}=this.state,s=(0,be.compact)(n.filter(i=>i.i!==t.i),(0,be.compactType)(this.props),r,this.props.allowOverlap);this.setState({layout:s,droppingDOMNode:null,activeDrag:null,droppingPosition:void 0})}),Yt(this,"onDragLeave",t=>{t.preventDefault(),t.stopPropagation(),this.dragEnterCounter--,this.dragEnterCounter===0&&this.removeDroppingPlaceholder()}),Yt(this,"onDragEnter",t=>{t.preventDefault(),t.stopPropagation(),this.dragEnterCounter++}),Yt(this,"onDrop",t=>{t.preventDefault(),t.stopPropagation();const{droppingItem:r}=this.props,{layout:n}=this.state,s=n.find(i=>i.i===r.i);this.dragEnterCounter=0,this.removeDroppingPlaceholder(),this.props.onDrop(n,s,t)})}componentDidMount(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)}static getDerivedStateFromProps(t,r){let n;return r.activeDrag?null:(!(0,nf.deepEqual)(t.layout,r.propsLayout)||t.compactType!==r.compactType?n=t.layout:(0,be.childrenEqual)(t.children,r.children)||(n=r.layout),n?{layout:(0,be.synchronizeLayoutWithChildren)(n,t.children,t.cols,(0,be.compactType)(t),t.allowOverlap),compactType:t.compactType,children:t.children,propsLayout:t.layout}:null)}shouldComponentUpdate(t,r){return this.props.children!==t.children||!(0,be.fastRGLPropsEqual)(this.props,t,nf.deepEqual)||this.state.activeDrag!==r.activeDrag||this.state.mounted!==r.mounted||this.state.droppingPosition!==r.droppingPosition}componentDidUpdate(t,r){if(!this.state.activeDrag){const n=this.state.layout,s=r.layout;this.onLayoutMaybeChanged(n,s)}}containerHeight(){if(!this.props.autoSize)return;const t=(0,be.bottom)(this.state.layout),r=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return t*this.props.rowHeight+(t-1)*this.props.margin[1]+r*2+"px"}onLayoutMaybeChanged(t,r){r||(r=this.state.layout),(0,nf.deepEqual)(r,t)||this.props.onLayoutChange(t)}placeholder(){const{activeDrag:t}=this.state;if(!t)return null;const{width:r,cols:n,margin:s,containerPadding:i,rowHeight:o,maxRows:l,useCSSTransforms:c,transformScale:d}=this.props;return Ga.createElement(Gy.default,{w:t.w,h:t.h,x:t.x,y:t.y,i:t.i,className:`react-grid-placeholder ${this.state.resizing?"placeholder-resizing":""}`,containerWidth:r,cols:n,margin:s,containerPadding:i||s,maxRows:l,rowHeight:o,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:c,transformScale:d},Ga.createElement("div",null))}processGridItem(t,r){if(!t||!t.key)return;const n=(0,be.getLayoutItem)(this.state.layout,String(t.key));if(!n)return null;const{width:s,cols:i,margin:o,containerPadding:l,rowHeight:c,maxRows:d,isDraggable:u,isResizable:f,isBounded:h,useCSSTransforms:x,transformScale:v,draggableCancel:y,draggableHandle:w,resizeHandles:g,resizeHandle:p}=this.props,{mounted:j,droppingPosition:b}=this.state,N=typeof n.isDraggable=="boolean"?n.isDraggable:!n.static&&u,C=typeof n.isResizable=="boolean"?n.isResizable:!n.static&&f,E=n.resizeHandles||g,T=N&&h&&n.isBounded!==!1;return Ga.createElement(Gy.default,{containerWidth:s,cols:i,margin:o,containerPadding:l||o,maxRows:d,rowHeight:c,cancel:y,handle:w,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:N,isResizable:C,isBounded:T,useCSSTransforms:x&&j,usePercentages:!j,transformScale:v,w:n.w,h:n.h,x:n.x,y:n.y,i:n.i,minH:n.minH,minW:n.minW,maxH:n.maxH,maxW:n.maxW,static:n.static,droppingPosition:r?b:void 0,resizeHandles:E,resizeHandle:p},t)}render(){const{className:t,style:r,isDroppable:n,innerRef:s}=this.props,i=(0,WP.default)(Ky,t),o={height:this.containerHeight(),...r};return Ga.createElement("div",{ref:s,className:i,style:o,onDrop:n?this.onDrop:be.noop,onDragLeave:n?this.onDragLeave:be.noop,onDragEnter:n?this.onDragEnter:be.noop,onDragOver:n?this.onDragOver:be.noop},Ga.Children.map(this.props.children,l=>this.processGridItem(l)),n&&this.state.droppingDOMNode&&this.processGridItem(this.state.droppingDOMNode,!0),this.placeholder())}}$l.default=Tu;Yt(Tu,"displayName","ReactGridLayout");Yt(Tu,"propTypes",UP.default);Yt(Tu,"defaultProps",{autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isBounded:!1,isDraggable:!0,isResizable:!0,allowOverlap:!1,isDroppable:!1,useCSSTransforms:!0,transformScale:1,verticalCompact:!0,compactType:"vertical",preventCollision:!1,droppingItem:{i:"__dropping-elem__",h:1,w:1},resizeHandles:["se"],onLayoutChange:be.noop,onDragStart:be.noop,onDrag:be.noop,onDragStop:be.noop,onResizeStart:be.noop,onResize:be.noop,onResizeStop:be.noop,onDrop:be.noop,onDropDragOver:be.noop});var Pu={},Ps={};Object.defineProperty(Ps,"__esModule",{value:!0});Ps.findOrGenerateResponsiveLayout=KP;Ps.getBreakpointFromWidth=VP;Ps.getColsFromBreakpoint=GP;Ps.sortBreakpoints=Pg;var _c=Te;function VP(e,t){const r=Pg(e);let n=r[0];for(let s=1,i=r.length;s<i;s++){const o=r[s];t>e[o]&&(n=o)}return n}function GP(e,t){if(!t[e])throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+e+" is missing!");return t[e]}function KP(e,t,r,n,s,i){if(e[r])return(0,_c.cloneLayout)(e[r]);let o=e[n];const l=Pg(t),c=l.slice(l.indexOf(r));for(let d=0,u=c.length;d<u;d++){const f=c[d];if(e[f]){o=e[f];break}}return o=(0,_c.cloneLayout)(o||[]),(0,_c.compact)((0,_c.correctBounds)(o,{cols:s}),i,s)}function Pg(e){return Object.keys(e).sort(function(r,n){return e[r]-e[n]})}Object.defineProperty(Pu,"__esModule",{value:!0});Pu.default=void 0;var Xy=hk(S),ir=uk(sa),af=hg,li=Te,Ka=Ps,XP=uk($l);function uk(e){return e&&e.__esModule?e:{default:e}}function hk(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(hk=function(s,i){if(!i&&s&&s.__esModule)return s;var o,l,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?n:r){if(o.has(s))return o.get(s);o.set(s,c)}for(const d in s)d!=="default"&&{}.hasOwnProperty.call(s,d)&&((l=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,d))&&(l.get||l.set)?o(c,d,l):c[d]=s[d]);return c})(e,t)}function Rm(){return Rm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rm.apply(null,arguments)}function Md(e,t,r){return(t=JP(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JP(e){var t=QP(e,"string");return typeof t=="symbol"?t:t+""}function QP(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const Jy=e=>Object.prototype.toString.call(e);function Sc(e,t){return e==null?null:Array.isArray(e)?e:e[t]}class Og extends Xy.Component{constructor(){super(...arguments),Md(this,"state",this.generateInitialState()),Md(this,"onLayoutChange",t=>{this.props.onLayoutChange(t,{...this.props.layouts,[this.state.breakpoint]:t})})}generateInitialState(){const{width:t,breakpoints:r,layouts:n,cols:s}=this.props,i=(0,Ka.getBreakpointFromWidth)(r,t),o=(0,Ka.getColsFromBreakpoint)(i,s),l=this.props.verticalCompact===!1?null:this.props.compactType;return{layout:(0,Ka.findOrGenerateResponsiveLayout)(n,r,i,i,o,l),breakpoint:i,cols:o}}static getDerivedStateFromProps(t,r){if(!(0,af.deepEqual)(t.layouts,r.layouts)){const{breakpoint:n,cols:s}=r;return{layout:(0,Ka.findOrGenerateResponsiveLayout)(t.layouts,t.breakpoints,n,n,s,t.compactType),layouts:t.layouts}}return null}componentDidUpdate(t){(this.props.width!=t.width||this.props.breakpoint!==t.breakpoint||!(0,af.deepEqual)(this.props.breakpoints,t.breakpoints)||!(0,af.deepEqual)(this.props.cols,t.cols))&&this.onWidthChange(t)}onWidthChange(t){const{breakpoints:r,cols:n,layouts:s,compactType:i}=this.props,o=this.props.breakpoint||(0,Ka.getBreakpointFromWidth)(this.props.breakpoints,this.props.width),l=this.state.breakpoint,c=(0,Ka.getColsFromBreakpoint)(o,n),d={...s};if(l!==o||t.breakpoints!==r||t.cols!==n){l in d||(d[l]=(0,li.cloneLayout)(this.state.layout));let h=(0,Ka.findOrGenerateResponsiveLayout)(d,r,o,l,c,i);h=(0,li.synchronizeLayoutWithChildren)(h,this.props.children,c,i,this.props.allowOverlap),d[o]=h,this.props.onBreakpointChange(o,c),this.props.onLayoutChange(h,d),this.setState({breakpoint:o,layout:h,cols:c})}const u=Sc(this.props.margin,o),f=Sc(this.props.containerPadding,o);this.props.onWidthChange(this.props.width,u,c,f)}render(){const{breakpoint:t,breakpoints:r,cols:n,layouts:s,margin:i,containerPadding:o,onBreakpointChange:l,onLayoutChange:c,onWidthChange:d,...u}=this.props;return Xy.createElement(XP.default,Rm({},u,{margin:Sc(i,this.state.breakpoint),containerPadding:Sc(o,this.state.breakpoint),onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))}}Pu.default=Og;Md(Og,"propTypes",{breakpoint:ir.default.string,breakpoints:ir.default.object,allowOverlap:ir.default.bool,cols:ir.default.object,margin:ir.default.oneOfType([ir.default.array,ir.default.object]),containerPadding:ir.default.oneOfType([ir.default.array,ir.default.object]),layouts(e,t){if(Jy(e[t])!=="[object Object]")throw new Error("Layout property must be an object. Received: "+Jy(e[t]));Object.keys(e[t]).forEach(r=>{if(!(r in e.breakpoints))throw new Error("Each key in layouts must align with a key in breakpoints.");(0,li.validateLayout)(e.layouts[r],"layouts."+r)})},width:ir.default.number.isRequired,onBreakpointChange:ir.default.func,onLayoutChange:ir.default.func,onWidthChange:ir.default.func});Md(Og,"defaultProps",{breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},containerPadding:{lg:null,md:null,sm:null,xs:null,xxs:null},layouts:{},margin:[10,10],allowOverlap:!1,onBreakpointChange:li.noop,onLayoutChange:li.noop,onWidthChange:li.noop});var Mg={},fk=function(){if(typeof Map<"u")return Map;function e(t,r){var n=-1;return t.some(function(s,i){return s[0]===r?(n=i,!0):!1}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var n=e(this.__entries__,r),s=this.__entries__[n];return s&&s[1]},t.prototype.set=function(r,n){var s=e(this.__entries__,r);~s?this.__entries__[s][1]=n:this.__entries__.push([r,n])},t.prototype.delete=function(r){var n=this.__entries__,s=e(n,r);~s&&n.splice(s,1)},t.prototype.has=function(r){return!!~e(this.__entries__,r)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(r,n){n===void 0&&(n=null);for(var s=0,i=this.__entries__;s<i.length;s++){var o=i[s];r.call(n,o[1],o[0])}},t}()}(),Lm=typeof window<"u"&&typeof document<"u"&&window.document===document,$d=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),ZP=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind($d):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),eO=2;function tO(e,t){var r=!1,n=!1,s=0;function i(){r&&(r=!1,e()),n&&l()}function o(){ZP(i)}function l(){var c=Date.now();if(r){if(c-s<eO)return;n=!0}else r=!0,n=!1,setTimeout(o,t);s=c}return l}var rO=20,nO=["top","right","bottom","left","width","height","size","weight"],aO=typeof MutationObserver<"u",sO=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=tO(this.refresh.bind(this),rO)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var r=this.observers_,n=r.indexOf(t);~n&&r.splice(n,1),!r.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return t.forEach(function(r){return r.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!Lm||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),aO?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!Lm||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var r=t.propertyName,n=r===void 0?"":r,s=nO.some(function(i){return!!~n.indexOf(i)});s&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),mk=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var s=n[r];Object.defineProperty(e,s,{value:t[s],enumerable:!1,writable:!1,configurable:!0})}return e},ji=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||$d},pk=Ou(0,0,0,0);function Rd(e){return parseFloat(e)||0}function Qy(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(n,s){var i=e["border-"+s+"-width"];return n+Rd(i)},0)}function iO(e){for(var t=["top","right","bottom","left"],r={},n=0,s=t;n<s.length;n++){var i=s[n],o=e["padding-"+i];r[i]=Rd(o)}return r}function oO(e){var t=e.getBBox();return Ou(0,0,t.width,t.height)}function lO(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return pk;var n=ji(e).getComputedStyle(e),s=iO(n),i=s.left+s.right,o=s.top+s.bottom,l=Rd(n.width),c=Rd(n.height);if(n.boxSizing==="border-box"&&(Math.round(l+i)!==t&&(l-=Qy(n,"left","right")+i),Math.round(c+o)!==r&&(c-=Qy(n,"top","bottom")+o)),!dO(e)){var d=Math.round(l+i)-t,u=Math.round(c+o)-r;Math.abs(d)!==1&&(l-=d),Math.abs(u)!==1&&(c-=u)}return Ou(s.left,s.top,l,c)}var cO=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof ji(e).SVGGraphicsElement}:function(e){return e instanceof ji(e).SVGElement&&typeof e.getBBox=="function"}}();function dO(e){return e===ji(e).document.documentElement}function uO(e){return Lm?cO(e)?oO(e):lO(e):pk}function hO(e){var t=e.x,r=e.y,n=e.width,s=e.height,i=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(i.prototype);return mk(o,{x:t,y:r,width:n,height:s,top:r,right:t+n,bottom:s+r,left:t}),o}function Ou(e,t,r,n){return{x:e,y:t,width:r,height:n}}var fO=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Ou(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=uO(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),mO=function(){function e(t,r){var n=hO(r);mk(this,{target:t,contentRect:n})}return e}(),pO=function(){function e(t,r,n){if(this.activeObservations_=[],this.observations_=new fk,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=r,this.callbackCtx_=n}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof ji(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)||(r.set(t,new fO(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof ji(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)&&(r.delete(t),r.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&t.activeObservations_.push(r)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,r=this.activeObservations_.map(function(n){return new mO(n.target,n.broadcastRect())});this.callback_.call(t,r,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),gk=typeof WeakMap<"u"?new WeakMap:new fk,xk=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=sO.getInstance(),n=new pO(t,r,this);gk.set(this,n)}return e}();["observe","unobserve","disconnect"].forEach(function(e){xk.prototype[e]=function(){var t;return(t=gk.get(this))[e].apply(t,arguments)}});var gO=function(){return typeof $d.ResizeObserver<"u"?$d.ResizeObserver:xk}();const xO=Object.freeze(Object.defineProperty({__proto__:null,default:gO},Symbol.toStringTag,{value:"Module"})),yO=LS(xO);Object.defineProperty(Mg,"__esModule",{value:!0});Mg.default=_O;var Cc=yk(S),vO=$g(sa),bO=$g(yO),wO=$g(fg);function $g(e){return e&&e.__esModule?e:{default:e}}function yk(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(yk=function(s,i){if(!i&&s&&s.__esModule)return s;var o,l,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?n:r){if(o.has(s))return o.get(s);o.set(s,c)}for(const d in s)d!=="default"&&{}.hasOwnProperty.call(s,d)&&((l=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,d))&&(l.get||l.set)?o(c,d,l):c[d]=s[d]);return c})(e,t)}function Am(){return Am=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Am.apply(null,arguments)}function zs(e,t,r){return(t=jO(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jO(e){var t=kO(e,"string");return typeof t=="symbol"?t:t+""}function kO(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const NO="react-grid-layout";function _O(e){var t;return t=class extends Cc.Component{constructor(){super(...arguments),zs(this,"state",{width:1280}),zs(this,"elementRef",Cc.createRef()),zs(this,"mounted",!1),zs(this,"resizeObserver",void 0)}componentDidMount(){this.mounted=!0,this.resizeObserver=new bO.default(s=>{if(this.elementRef.current instanceof HTMLElement){const o=s[0].contentRect.width;this.setState({width:o})}});const n=this.elementRef.current;n instanceof HTMLElement&&this.resizeObserver.observe(n)}componentWillUnmount(){this.mounted=!1;const n=this.elementRef.current;n instanceof HTMLElement&&this.resizeObserver.unobserve(n),this.resizeObserver.disconnect()}render(){const{measureBeforeMount:n,...s}=this.props;return n&&!this.mounted?Cc.createElement("div",{className:(0,wO.default)(this.props.className,NO),style:this.props.style,ref:this.elementRef}):Cc.createElement(e,Am({innerRef:this.elementRef},s,this.state))}},zs(t,"defaultProps",{measureBeforeMount:!1}),zs(t,"propTypes",{measureBeforeMount:vO.default.bool}),t}(function(e){e.exports=$l.default,e.exports.utils=Te,e.exports.calculateUtils=Dn,e.exports.Responsive=Pu.default,e.exports.Responsive.utils=Ps,e.exports.WidthProvider=Mg.default})($j);var Zy=$j.exports;const SO=Zy.WidthProvider(Zy.Responsive),CO=()=>{const[e,t]=S.useState({totalLeads:0,newLeads:0,activeProposals:0,wonDeals:0,conversionRate:0,revenue:0}),[r,n]=S.useState([]),[s,i]=S.useState([]),[o,l]=S.useState(!1),[c,d]=S.useState(null),[u,f]=S.useState(!1),h={lg:[{i:"stats",x:0,y:0,w:12,h:2,minW:12,maxW:12,minH:2,maxH:2},{i:"conversion",x:0,y:2,w:4,h:4,minW:3,minH:3},{i:"revenue",x:4,y:2,w:4,h:4,minW:3,minH:3},{i:"activity",x:8,y:2,w:4,h:4,minW:3,minH:3},{i:"tasks",x:0,y:6,w:6,h:5,minW:4,minH:4},{i:"calendar",x:6,y:6,w:6,h:6,minW:6,minH:5}],md:[{i:"stats",x:0,y:0,w:12,h:2,minW:12,maxW:12,minH:2,maxH:2},{i:"conversion",x:0,y:2,w:6,h:4,minW:4,minH:3},{i:"revenue",x:6,y:2,w:6,h:4,minW:4,minH:3},{i:"activity",x:0,y:6,w:12,h:4,minW:6,minH:3},{i:"tasks",x:0,y:10,w:6,h:5,minW:4,minH:4},{i:"calendar",x:6,y:10,w:6,h:6,minW:6,minH:5}],sm:[{i:"stats",x:0,y:0,w:12,h:2,minW:12,maxW:12,minH:2,maxH:2},{i:"conversion",x:0,y:2,w:12,h:3,minW:12,minH:3},{i:"revenue",x:0,y:5,w:12,h:3,minW:12,minH:3},{i:"activity",x:0,y:8,w:12,h:4,minW:12,minH:3},{i:"tasks",x:0,y:12,w:12,h:4,minW:12,minH:4},{i:"calendar",x:0,y:16,w:12,h:6,minW:12,minH:5}]},[x,v]=S.useState(()=>{const E=localStorage.getItem("dashboardLayouts");return E?JSON.parse(E):h});S.useEffect(()=>{j(),y()},[]);const y=async()=>{try{const E=localStorage.getItem("crm_token"),T=await fetch(`${U}/tasks?completed=false`,{headers:{Authorization:`Bearer ${E}`}});if(T.ok){const O=await T.json();i(O)}}catch(E){console.error("Error fetching tasks:",E)}},w=async E=>{try{const T=c?`${U}/tasks/${c.id}`:`${U}/tasks`,O=c?"PUT":"POST",M=localStorage.getItem("crm_token");(await fetch(T,{method:O,headers:{"Content-Type":"application/json",Authorization:`Bearer ${M}`},body:JSON.stringify(E)})).ok&&(y(),d(null))}catch(T){console.error("Error saving task:",T)}},g=async E=>{try{const T=localStorage.getItem("crm_token");(await fetch(`${U}/tasks/${E}/toggle`,{method:"PATCH",headers:{Authorization:`Bearer ${T}`}})).ok&&y()}catch(T){console.error("Error toggling task:",T)}},p=async E=>{try{const T=localStorage.getItem("crm_token");(await fetch(`${U}/tasks/${E}`,{method:"DELETE",headers:{Authorization:`Bearer ${T}`}})).ok&&y()}catch(T){console.error("Error deleting task:",T)}},j=async()=>{try{const E=localStorage.getItem("crm_token"),T=await fetch(`${U}/leads`,{headers:{Authorization:`Bearer ${E}`}});if(T.ok){const O=await T.json(),M=O.filter(A=>A.status==="new").length,R=O.filter(A=>A.status==="won").length,H=O.length>0?(R/O.length*100).toFixed(1):0;t({totalLeads:O.length,newLeads:M,activeProposals:O.filter(A=>A.status==="proposal_sent").length,wonDeals:R,conversionRate:H,revenue:R*2500}),n([{id:1,type:"lead",description:"Nuevo lead: Ana Garca",time:"Hace 5 min",icon:""},{id:2,type:"proposal",description:"Propuesta enviada a Hotel Playa Azul",time:"Hace 1 hora",icon:""},{id:3,type:"won",description:"Deal ganado: Burger Express",time:"Hace 2 horas",icon:""},{id:4,type:"meeting",description:"Reunin agendada con Pizzera Napoli",time:"Hace 3 horas",icon:""}])}}catch(E){console.error("Error fetching dashboard data:",E)}},b=(E,T)=>{v(T),localStorage.setItem("dashboardLayouts",JSON.stringify(T))},N=[{label:"Total Leads",value:e.totalLeads,icon:a.jsx(Pa,{className:"w-6 h-6"}),color:"blue",change:"+12%",progress:75},{label:"Nuevos",value:e.newLeads,icon:a.jsx(f3,{className:"w-6 h-6"}),color:"green",change:"+5%",progress:60},{label:"Propuestas Activas",value:e.activeProposals,icon:a.jsx(ht,{className:"w-6 h-6"}),color:"yellow",change:"+8%",progress:45},{label:"Deals Ganados",value:e.wonDeals,icon:a.jsx(N3,{className:"w-6 h-6"}),color:"purple",change:"+3%",progress:30}],C=E=>{const T={blue:"bg-orange-50 text-orange-700 border-orange-200 dark:bg-orange-900/30 dark:text-orange-300 dark:border-orange-700",green:"bg-green-50 text-green-700 border-green-200 dark:bg-green-900/30 dark:text-green-300 dark:border-green-700",yellow:"bg-yellow-50 text-yellow-700 border-yellow-200 dark:bg-yellow-900/30 dark:text-yellow-300 dark:border-yellow-700",purple:"bg-purple-50 text-purple-700 border-purple-200 dark:bg-purple-900/30 dark:text-purple-300 dark:border-purple-700"};return T[E]||T.blue};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Dashboard"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Vista general de tu CRM"})]}),a.jsx("div",{className:"flex items-center space-x-3",children:u?a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>f(!1),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),a.jsx("span",{children:"Guardar Layout"})]}),a.jsx("button",{onClick:()=>{localStorage.removeItem("dashboardLayouts"),v(h)},className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:" Restaurar"})]}):a.jsxs("button",{onClick:()=>f(!0),className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),a.jsx("span",{children:"Editar Layout"})]})})]}),a.jsxs(SO,{className:"layout",layouts:x,breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:12,sm:12,xs:12,xxs:12},rowHeight:80,onLayoutChange:b,draggableHandle:".drag-handle",margin:[16,16],containerPadding:[0,0],style:{width:"100%"},isDraggable:u,isResizable:u,resizeHandles:["se","sw","ne","nw"],children:[a.jsx("div",{className:"bg-transparent",children:a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 h-full",children:N.map((E,T)=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg border flex items-center justify-center ${C(E.color)}`,children:E.icon}),a.jsx("span",{className:"text-xs font-medium text-green-600 dark:text-green-400",children:E.change})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:E.label}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:E.value})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mt-3",children:a.jsx("div",{className:"h-1.5 rounded-full bg-gradient-to-r from-orange-500 to-red-600 transition-all duration-500",style:{width:`${E.progress}%`}})})]},T))})},"stats"),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[a.jsx("div",{className:"drag-handle p-4 border-b border-gray-200 dark:border-gray-700 cursor-move bg-gray-50 dark:bg-gray-900/50",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Tasa de Conversin"})}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-5xl font-bold text-orange-600 dark:text-orange-400 mb-2",children:[e.conversionRate,"%"]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Leads convertidos a clientes"}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-orange-500 to-red-600 transition-all duration-500",style:{width:`${e.conversionRate}%`}})})]})})]},"conversion"),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[a.jsx("div",{className:"drag-handle p-4 border-b border-gray-200 dark:border-gray-700 cursor-move bg-gray-50 dark:bg-gray-900/50",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Ingresos Estimados"})}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-4xl font-bold text-green-600 dark:text-green-400 mb-2",children:["",e.revenue.toLocaleString()]}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:["De ",e.wonDeals," deals ganados"]}),a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm",children:[a.jsx("span",{className:"text-green-600 dark:text-green-400",children:""}),a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"+15% vs mes anterior"})]})]})})]},"revenue"),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[a.jsx("div",{className:"drag-handle p-4 border-b border-gray-200 dark:border-gray-700 cursor-move bg-gray-50 dark:bg-gray-900/50",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Actividad Reciente"})}),a.jsx("div",{className:"p-4 space-y-3 overflow-y-auto",style:{maxHeight:"calc(100% - 60px)"},children:r.map(E=>a.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[a.jsx("span",{className:"text-2xl flex-shrink-0",children:E.icon}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:E.description}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:E.time})]})]},E.id))})]},"activity"),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[a.jsxs("div",{className:"drag-handle p-4 border-b border-gray-200 dark:border-gray-700 cursor-move bg-gray-50 dark:bg-gray-900/50 flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Tareas Pendientes"}),a.jsx("button",{onClick:()=>{d(null),l(!0)},className:"p-1.5 hover:bg-orange-100 dark:hover:bg-orange-900/30 rounded-lg transition-colors",children:a.jsx(Wr,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})})]}),a.jsx("div",{className:"p-4 space-y-2 overflow-y-auto",style:{maxHeight:"calc(100% - 60px)"},children:s.length===0?a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-4",children:"No hay tareas pendientes"}):s.map(E=>a.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg group hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:E.completed,onChange:()=>g(E.id),className:"w-4 h-4 text-orange-600 rounded cursor-pointer focus:ring-orange-500"}),a.jsx("span",{className:`text-sm flex-1 ${E.completed?"line-through text-gray-400":"text-gray-900 dark:text-white"}`,children:E.title}),a.jsx("button",{onClick:()=>p(E.id),className:"opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-700 text-xs transition-opacity",children:""})]},E.id))})]},"tasks"),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[a.jsx("div",{className:"drag-handle p-4 border-b border-gray-200 dark:border-gray-700 cursor-move bg-gray-50 dark:bg-gray-900/50",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Calendario"})}),a.jsx("div",{className:"p-4",style:{height:"calc(100% - 60px)"},children:a.jsx(eT,{})})]},"calendar")]}),mu.createPortal(a.jsx(tT,{isOpen:o,onClose:()=>{l(!1),d(null)},onSave:w,task:c}),document.body)]})},EO=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(!0),[s,i]=S.useState("all"),[o,l]=S.useState(""),[c,d]=S.useState("date"),[u,f]=S.useState(!1),[h,x]=S.useState([]),[v,y]=S.useState(null),[w,g]=S.useState({title:"",price:"",description:""}),[p,j]=S.useState(!1);S.useEffect(()=>{b()},[]);const b=async()=>{try{const L=await fetch(`${U}/proposals`,{headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}});if(L.ok){const ee=await L.json();t(ee)}}catch(L){console.error("Error fetching proposals:",L)}finally{n(!1)}},N=async()=>{try{const[L,ee]=await Promise.all([fetch(`${U}/leads`,{headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}}),fetch(`${U}/proposals`,{headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}})]);if(L.ok&&ee.ok){const te=await L.json(),G=(await ee.json()).map(ie=>ie.lead_id),Z=te.filter(ie=>!G.includes(ie.id));x(Z)}}catch(L){console.error("Error fetching leads:",L)}},C=()=>{N(),f(!0)},E=async L=>{if(L.preventDefault(),!!v){j(!0);try{if(!(await fetch(`${U}/proposals`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`},body:JSON.stringify({leadId:v.id,title:w.title,description:w.description,totalPrice:parseFloat(w.price)})})).ok)throw new Error("Error al crear propuesta");alert("Propuesta creada y enviada exitosamente"),f(!1),y(null),g({title:"",price:"",description:""}),b()}catch(ee){console.error("Error:",ee),alert("Error al crear propuesta")}finally{j(!1)}}},T=async L=>{try{if(!(await fetch(`${U}/proposals/${L}/resend-email`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}})).ok)throw new Error("Error al reenviar email");alert("Email reenviado exitosamente")}catch(ee){console.error("Error:",ee),alert("Error al reenviar el email")}},O=L=>{const ee={pending:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 border border-yellow-200 dark:border-yellow-800",accepted:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800",rejected:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-800",expired:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-600"};return ee[L]||ee.pending},M=L=>({pending:"Pendiente",accepted:"Aceptada",rejected:"Rechazada",expired:"Expirada"})[L]||L,R=L=>({pending:a.jsx(sn,{className:"w-3 h-3"}),accepted:a.jsx(zr,{className:"w-3 h-3"}),rejected:a.jsx(Ro,{className:"w-3 h-3"}),expired:a.jsx(pu,{className:"w-3 h-3"})})[L]||a.jsx(sn,{className:"w-3 h-3"}),H=e.filter(L=>s==="all"||L.status===s).filter(L=>{var ee,te;return o===""||((ee=L.title)==null?void 0:ee.toLowerCase().includes(o.toLowerCase()))||((te=L.lead_name)==null?void 0:te.toLowerCase().includes(o.toLowerCase()))}),A={total:e.length,pending:e.filter(L=>L.status==="pending").length,accepted:e.filter(L=>L.status==="accepted").length,rejected:e.filter(L=>L.status==="rejected").length,totalViews:e.reduce((L,ee)=>L+(ee.views||0),0)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx("span",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg text-orange-600 dark:text-orange-400",children:a.jsx(ht,{className:"w-5 h-5"})}),"Propuestas"]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 ml-11",children:"Gestiona todas tus propuestas comerciales"})]}),a.jsxs("button",{onClick:C,className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2",children:[a.jsx(ht,{className:"w-4 h-4"}),a.jsx("span",{children:"Nueva Propuesta"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:A.total})]}),a.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:a.jsx(ht,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Pendientes"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:A.pending})]}),a.jsx("div",{className:"p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:a.jsx(sn,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Aceptadas"}),a.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:A.accepted})]}),a.jsx("div",{className:"p-2 bg-green-50 dark:bg-green-900/20 rounded-lg",children:a.jsx(zr,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Rechazadas"}),a.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mt-1",children:A.rejected})]}),a.jsx("div",{className:"p-2 bg-red-50 dark:bg-red-900/20 rounded-lg",children:a.jsx(Ro,{className:"w-6 h-6 text-red-600 dark:text-red-400"})})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Vistas Totales"}),a.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400 mt-1",children:A.totalViews})]}),a.jsx("div",{className:"p-2 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:a.jsx(Nr,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})})]})})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 shadow-sm",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(ng,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar por ttulo o lead...",className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all",value:o,onChange:L=>l(L.target.value)})]})}),a.jsxs("div",{className:"relative",children:[a.jsx(cj,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsxs("select",{value:s,onChange:L=>i(L.target.value),className:"pl-10 pr-8 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent appearance-none cursor-pointer",children:[a.jsx("option",{value:"all",children:"Todos los estados"}),a.jsx("option",{value:"pending",children:"Pendientes"}),a.jsx("option",{value:"accepted",children:"Aceptadas"}),a.jsx("option",{value:"rejected",children:"Rechazadas"}),a.jsx("option",{value:"expired",children:"Expiradas"})]})]}),a.jsxs("button",{className:"px-4 py-2.5 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors flex items-center space-x-2 font-medium text-sm",children:[a.jsx(oj,{className:"w-4 h-4"}),a.jsx("span",{children:"Exportar"})]})]})}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Lead"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Ttulo"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Estado"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Creada"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Enviada"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Engagement"}),a.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Acciones"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:H.map(L=>a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors group",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:L.lead_name}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:L.lead_email})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ht,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-900 dark:text-white font-medium",children:L.title})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("span",{className:`inline-flex items-center space-x-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${O(L.status)}`,children:[R(L.status),a.jsx("span",{children:M(L.status)})]})}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:new Date(L.created_at).toLocaleDateString("es-ES")}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:L.sent_at?a.jsxs("div",{className:"flex items-center space-x-1.5",children:[a.jsx(Ml,{className:"w-3 h-3 text-gray-400"}),a.jsx("span",{children:new Date(L.sent_at).toLocaleDateString("es-ES")})]}):"-"}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-1.5",title:"Vistas",children:[a.jsx(Nr,{className:`w-4 h-4 ${L.views>0?"text-purple-500":"text-gray-300"}`}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:L.views||0})]}),a.jsxs("div",{className:"flex items-center space-x-1.5",title:"Email Abierto",children:[a.jsx(gt,{className:`w-4 h-4 ${L.email_opened?"text-green-500":"text-gray-300"}`}),a.jsx("span",{className:"text-xs text-gray-500",children:L.last_email_open||"-"})]})]})}),a.jsx("td",{className:"px-6 py-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>T(L.id),className:"p-1.5 text-gray-500 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Reenviar Email",children:a.jsx(gt,{className:"w-4 h-4"})}),a.jsx("button",{className:"p-1.5 text-gray-500 hover:text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"Ver Detalles",children:a.jsx(D4,{className:"w-4 h-4"})}),a.jsx("button",{className:"p-1.5 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Analytics",children:a.jsx(ym,{className:"w-4 h-4"})})]})})]},L.id))})]})}),H.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:a.jsx(ht,{className:"w-8 h-8 text-gray-400"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:"No se encontraron propuestas"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Prueba ajustando los filtros o crea una nueva propuesta."})]})]}),u&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-2xl w-full p-6 shadow-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Crear Nueva Propuesta"}),a.jsx("button",{onClick:()=>{f(!1),y(null),g({title:"",price:"",description:""})},className:"text-gray-400 hover:text-gray-600",children:a.jsx(Ro,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:E,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Seleccionar Lead"}),h.length===0?a.jsx("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800",children:a.jsx("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:" Todos los leads ya tienen propuestas asignadas. Crea un nuevo lead desde el Pipeline de Ventas para poder crear ms propuestas."})}):a.jsxs("select",{value:(v==null?void 0:v.id)||"",onChange:L=>{const ee=h.find(te=>te.id===parseInt(L.target.value));y(ee)},className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500",required:!0,children:[a.jsx("option",{value:"",children:"-- Selecciona un lead --"}),h.map(L=>a.jsxs("option",{value:L.id,children:[L.name," - ",L.business_name||"Sin empresa"," (",L.email,")"]},L.id))]})]}),v&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ttulo de la Propuesta"}),a.jsx("input",{type:"text",value:w.title,onChange:L=>g({...w,title:L.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500",placeholder:"Ej: Propuesta Instalacin Solar",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Precio Total ()"}),a.jsx("input",{type:"number",step:"0.01",value:w.price,onChange:L=>g({...w,price:L.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500",placeholder:"0.00",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),a.jsx("textarea",{value:w.description,onChange:L=>g({...w,description:L.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500",rows:"4",placeholder:"Describe los detalles de la propuesta..."})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{f(!1),y(null),g({title:"",price:"",description:""})},className:"flex-1 px-4 py-3 border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-semibold hover:bg-gray-50 dark:hover:bg-gray-700 transition-all",children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:p,className:"flex-1 px-4 py-3 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg font-semibold hover:shadow-lg hover:shadow-orange-500/50 transition-all disabled:opacity-50",children:p?"Creando...":"Crear Propuesta"})]})]})]})]})})]})},DO=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(!0),[s,i]=S.useState(null),[o,l]=S.useState(!1),[c,d]=S.useState(null),[u,f]=S.useState({name:"",subject:"",body:"",type:"initial_proposal"}),h={initial_proposal:"Propuesta Inicial",reminder_1:"Recordatorio 1",reminder_2:"Recordatorio 2",custom:"Personalizada"},x=[{var:"{{lead_name}}",desc:"Nombre del lead"},{var:"{{business_name}}",desc:"Nombre del negocio"},{var:"{{proposal_link}}",desc:"Link a la propuesta"},{var:"{{proposal_title}}",desc:"Ttulo de la propuesta"},{var:"{{company_name}}",desc:"Nombre de tu empresa"}];S.useEffect(()=>{v()},[]);const v=async()=>{try{t([{id:1,name:"Propuesta Inicial Estndar",subject:"Tu propuesta personalizada de {{company_name}}",body:`Hola {{lead_name}},

Nos complace presentarte nuestra propuesta para {{business_name}}.

Puedes revisarla aqu: {{proposal_link}}

Saludos,
Equipo {{company_name}}`,type:"initial_proposal",created_at:"2025-12-01"},{id:2,name:"Recordatorio Amigable",subject:"Recordatorio: {{proposal_title}}",body:`Hola {{lead_name}},

Queremos recordarte que tienes una propuesta pendiente de revisin.

Link: {{proposal_link}}

Tienes alguna duda?

Saludos`,type:"reminder_1",created_at:"2025-12-01"}])}catch(N){console.error("Error fetching templates:",N)}finally{n(!1)}},y=async N=>{N.preventDefault();try{if(s)t(e.map(C=>C.id===s.id?{...C,...u}:C));else{const C={id:Math.max(...e.map(E=>E.id),0)+1,...u,created_at:new Date().toISOString().split("T")[0]};t([...e,C])}p()}catch(C){console.error("Error saving template:",C)}},w=N=>{i(N),f({name:N.name,subject:N.subject,body:N.body,type:N.type}),l(!0)},g=async N=>{confirm("Ests seguro de eliminar esta plantilla?")&&t(e.filter(C=>C.id!==N))},p=()=>{l(!1),i(null),f({name:"",subject:"",body:"",type:"initial_proposal"})},j=N=>{f({...u,body:u.body+N})},b=N=>{let C=N.body;return C=C.replace(/{{lead_name}}/g,"Juan Prez"),C=C.replace(/{{business_name}}/g,"Empresa Demo S.L."),C=C.replace(/{{proposal_link}}/g,"https://tucrm.com/propuesta/123"),C=C.replace(/{{proposal_title}}/g,"Propuesta Comercial 2025"),C=C.replace(/{{company_name}}/g,"Tu Empresa"),C};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Plantillas de Email"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Gestiona los correos para la automatizacin de marketing"})]}),!o&&a.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2",children:[a.jsx(Wr,{className:"w-4 h-4"}),a.jsx("span",{children:"Nueva Plantilla"})]})]}),o?a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:[a.jsxs("div",{className:"flex items-center space-x-4 mb-6 pb-4 border-b border-gray-100 dark:border-gray-700",children:[a.jsx("button",{onClick:p,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:a.jsx(rg,{className:"w-5 h-5 text-gray-500"})}),a.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center space-x-2",children:[a.jsx(ht,{className:"w-5 h-5 text-orange-500"}),a.jsx("span",{children:s?"Editar Plantilla":"Nueva Plantilla"})]})]}),a.jsxs("form",{onSubmit:y,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre Interno"}),a.jsx(we,{id:"name",value:u.name,onChange:N=>f({...u,name:N.target.value}),placeholder:"Ej: Propuesta Inicial Estndar",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tipo de Email"}),a.jsx("select",{id:"type",value:u.type,onChange:N=>f({...u,type:N.target.value}),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500 transition-shadow",children:Object.entries(h).map(([N,C])=>a.jsx("option",{value:N,children:C},N))})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Asunto del Correo"}),a.jsx(we,{id:"subject",value:u.subject,onChange:N=>f({...u,subject:N.target.value}),placeholder:"Ej: Propuesta comercial para {{business_name}}",required:!0})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("label",{htmlFor:"body",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Cuerpo del Email"}),a.jsx("span",{className:"text-xs text-gray-500",children:"Soporta variables dinmicas"})]}),a.jsx("textarea",{id:"body",value:u.body,onChange:N=>f({...u,body:N.target.value}),rows:"10",className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white font-mono text-sm focus:ring-2 focus:ring-orange-500 transition-shadow",required:!0,placeholder:"Escribe el contenido de tu email aqu..."})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-100 dark:border-blue-800",children:[a.jsxs("p",{className:"text-sm font-semibold text-blue-800 dark:text-blue-300 mb-3 flex items-center space-x-2",children:[a.jsx(sj,{className:"w-4 h-4"}),a.jsx("span",{children:"Variables Disponibles"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(N=>a.jsx("button",{type:"button",onClick:()=>j(N.var),className:"px-3 py-1.5 bg-white dark:bg-gray-800 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-700 rounded-md text-xs hover:bg-blue-50 dark:hover:bg-blue-900/50 transition-colors font-mono shadow-sm",title:N.desc,children:N.var},N.var))})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-100 dark:border-gray-700",children:[a.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancelar"}),a.jsxs("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2",children:[a.jsx($o,{className:"w-4 h-4"}),a.jsx("span",{children:s?"Actualizar Plantilla":"Crear Plantilla"})]})]})]})]}):a.jsxs("div",{className:"grid gap-4",children:[e.map(N=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-xl border border-gray-200 dark:border-gray-700 flex justify-between items-center hover:shadow-md transition-shadow group",children:[a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg text-orange-600 dark:text-orange-400",children:a.jsx(gt,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:N.name}),a.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs font-medium rounded-full border border-gray-200 dark:border-gray-600",children:h[N.type]})]}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[a.jsx("span",{className:"font-medium",children:"Asunto:"})," ",N.subject]}),a.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Creada el ",new Date(N.created_at).toLocaleDateString("es-ES")]})]})]}),a.jsxs("div",{className:"flex space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>d(N),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"Vista Previa",children:a.jsx(Nr,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>w(N),className:"p-2 text-gray-500 hover:text-orange-600 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-lg transition-colors",title:"Editar",children:a.jsx(gu,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>g(N.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Eliminar",children:a.jsx(ln,{className:"w-5 h-5"})})]})]},N.id)),e.length===0&&!r&&a.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800/50 rounded-xl border-2 border-dashed border-gray-200 dark:border-gray-700",children:[a.jsx(gt,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No hay plantillas de email creadas an."}),a.jsx("button",{onClick:()=>l(!0),className:"mt-4 text-orange-600 hover:text-orange-700 font-medium text-sm",children:"Crear la primera plantilla"})]})]}),c&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-2xl w-full mx-4 border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-gray-800/50 rounded-t-xl",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center space-x-2",children:[a.jsx(Nr,{className:"w-5 h-5 text-gray-500"}),a.jsx("span",{children:"Vista Previa"})]}),a.jsx("button",{onClick:()=>d(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:a.jsx(_r,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:"Asunto"}),a.jsx("p",{className:"text-gray-900 dark:text-white font-medium text-lg",children:c.subject})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2",children:"Cuerpo del Mensaje"}),a.jsx("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-6 rounded-xl border border-gray-100 dark:border-gray-700",children:a.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-800 dark:text-gray-200 font-sans leading-relaxed",children:b(c)})})]}),a.jsx("div",{className:"flex justify-end pt-2",children:a.jsx("button",{onClick:()=>d(null),className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cerrar Vista Previa"})})]})]})})]})},vk=({leads:e,onLeadClick:t,onStatusChange:r,onDeleteLead:n})=>{const[s,i]=S.useState({isOpen:!1,title:"",message:"",leadToDelete:null}),[o,l]=S.useState({isOpen:!1,lead:null}),[c,d]=S.useState("date"),[u,f]=S.useState("all"),h=jt(),x=async(b,N)=>{b.stopPropagation(),l({isOpen:!0,lead:N})},v=async()=>{if(o.lead)try{const b=await fetch(`${U}/clients/convert-lead`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`},body:JSON.stringify({leadId:o.lead.id})});if(b.ok)h.success("Lead convertido a cliente exitosamente"),r(o.lead.id,"won"),l({isOpen:!1,lead:null});else{const N=await b.json();h.error(N.error||"Error al convertir lead")}}catch(b){console.error("Error converting lead:",b),h.error("Error de conexin")}},y=async(b,N)=>{b.stopPropagation(),i({isOpen:!0,title:"Eliminar Lead",message:`Ests seguro de eliminar el lead "${N.name}"? Esta accin no se puede deshacer.`,leadToDelete:N})},w=async()=>{if(s.leadToDelete)try{if((await fetch(`${U}/leads/${s.leadToDelete.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}})).ok)h.success("Lead eliminado correctamente"),n&&n(s.leadToDelete.id);else throw new Error("Error al eliminar")}catch(b){h.error("Error al eliminar el lead"),console.error(b)}finally{i({...s,isOpen:!1,leadToDelete:null})}},g=b=>{const N={new:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300",contacted:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300",qualified:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300",proposal_sent:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300",won:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300",lost:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300"};return N[b]||N.new},p=b=>({new:"Nuevo",contacted:"Contactado",qualified:"Calificado",proposal_sent:"Propuesta Enviada",won:"Ganado",lost:"Perdido"})[b]||b,j=e.filter(b=>u==="all"||b.status===u);return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs("select",{value:u,onChange:b=>f(b.target.value),className:"px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white",children:[a.jsx("option",{value:"all",children:"Todos los estados"}),a.jsx("option",{value:"new",children:"Nuevos"}),a.jsx("option",{value:"contacted",children:"Contactados"}),a.jsx("option",{value:"qualified",children:"Calificados"}),a.jsx("option",{value:"proposal_sent",children:"Propuesta Enviada"}),a.jsx("option",{value:"won",children:"Ganados"}),a.jsx("option",{value:"lost",children:"Perdidos"})]})}),a.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[j.length," leads"]})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[900px]",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:"Lead"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:"Empresa"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:"Estado"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:"Propuesta"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:"ltima Vista"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:"Email Abierto"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:"Acciones"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:j.map(b=>a.jsxs("tr",{onClick:()=>t(b),className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-colors",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:b.name}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:b.email})]})}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:b.business_name||"-"}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${g(b.status)}`,children:p(b.status)})}),a.jsx("td",{className:"px-6 py-4",children:b.has_proposal?a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300",children:" Enviada"}):a.jsx("span",{className:"text-sm text-gray-400 dark:text-gray-500",children:"-"})}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:b.last_proposal_view||"-"}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:b.last_email_open||"-"}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:N=>{N.stopPropagation(),t(b)},className:"p-2 text-gray-500 hover:text-orange-600 dark:text-gray-400 dark:hover:text-orange-400 transition-colors rounded-lg hover:bg-orange-50 dark:hover:bg-orange-900/20",title:"Ver detalles",children:a.jsx(Nr,{size:18})}),b.status!=="won"&&a.jsx("button",{onClick:N=>x(N,b),className:"p-2 text-gray-500 hover:text-green-600 dark:text-gray-400 dark:hover:text-green-400 transition-colors rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20",title:"Convertir a Cliente",children:a.jsx(E3,{size:18})}),a.jsx("button",{onClick:N=>y(N,b),className:"p-2 text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400 transition-colors rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20",title:"Eliminar Lead",children:a.jsx(ln,{size:18})})]})})]},b.id))})]})}),a.jsx(Ri,{isOpen:s.isOpen,onClose:()=>i({...s,isOpen:!1,leadToDelete:null}),onConfirm:w,title:s.title,message:s.message,type:"danger"}),o.isOpen&&o.lead&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-lg w-full p-6 shadow-2xl",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Convertir a Cliente"}),a.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 mb-6 border border-green-200 dark:border-green-800",children:a.jsx("p",{className:"text-sm text-green-800 dark:text-green-200 mb-2",children:"Ests seguro de convertir este lead a cliente?"})}),a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-3",children:[a.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Nombre"}),a.jsx("p",{className:"text-gray-900 dark:text-white font-semibold mt-1",children:o.lead.name})]}),o.lead.business_name&&a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-3",children:[a.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Empresa"}),a.jsx("p",{className:"text-gray-900 dark:text-white font-semibold mt-1",children:o.lead.business_name})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-3",children:[a.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Email"}),a.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:o.lead.email})]}),o.lead.phone&&a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-3",children:[a.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Telfono"}),a.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:o.lead.phone})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(We,{variant:"secondary",onClick:()=>l({isOpen:!1,lead:null}),className:"flex-1",children:"Cancelar"}),a.jsx(We,{onClick:v,className:"flex-1",children:"Convertir a Cliente"})]})]})})]})},TO=({leads:e,onLeadClick:t,onStatusChange:r,statuses:n,onDeleteLead:s})=>{const i=jt(),[o,l]=S.useState({isOpen:!1,title:"",message:"",leadToDelete:null}),c=async(g,p)=>{g.stopPropagation(),l({isOpen:!0,title:"Eliminar Lead",message:"Ests seguro de eliminar este lead? Esta accin no se puede deshacer.",leadToDelete:{id:p}})},d=async()=>{if(o.leadToDelete)try{if((await fetch(`${U}/leads/${o.leadToDelete.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}})).ok)i.success("Lead eliminado correctamente"),s&&s(o.leadToDelete.id);else throw new Error("Error al eliminar")}catch(g){i.error("Error al eliminar el lead"),console.error(g)}finally{l({...o,isOpen:!1,leadToDelete:null})}},u=(g,p)=>{g.dataTransfer.setData("leadId",p.id.toString())},f=g=>{g.preventDefault()},h=(g,p)=>{g.preventDefault();const j=parseInt(g.dataTransfer.getData("leadId"));r(j,p)},x={Star:al,User:Ct,Phone:bi,Mail:gt,FileText:ht,Send:Ml,MessageSquare:ea,CheckCircle:zr,XCircle:Ro,Clock:sn,AlertCircle:pu,Flag:lj,Briefcase:aj,Target:ag,Award:tj,Ban:rj},v=g=>{const p=x[g]||al;return a.jsx(p,{className:"w-4 h-4"})},y=g=>{const p={blue:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",green:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300",yellow:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300",red:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300",purple:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300",orange:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300",gray:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"};return p[g]||p.gray},w=n||[];return a.jsxs("div",{className:"flex space-x-4 overflow-x-auto pb-4 min-h-[calc(100vh-250px)]",children:[w.map(g=>{const p=e.filter(j=>j.status===g.id||j.status==g.id||j.status===g.name||g.id===7&&j.status==="new"||g.id===8&&(j.status==="contacted"||j.status==="qualified"||j.status==="proposal_sent")||g.id===9&&j.status==="won"||g.id===10&&j.status==="lost");return a.jsxs("div",{className:"flex-shrink-0 w-72",onDragOver:f,onDrop:j=>h(j,g.id),children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-t-xl p-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between sticky top-0 z-10 shadow-sm",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:`p-1.5 rounded-md ${y(g.color)}`,children:v(g.icon)}),a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm truncate max-w-[120px]",title:g.name||g.label,children:g.name||g.label})]}),a.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 rounded-full text-xs font-medium text-gray-600 dark:text-gray-400",children:p.length})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-b-xl p-2 space-y-2 min-h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar",children:[p.map(j=>a.jsxs("div",{draggable:!0,onDragStart:b=>u(b,j),onClick:()=>t(j),className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-700 cursor-move hover:shadow-md transition-all group relative",children:[a.jsxs("div",{className:"mb-2",children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm leading-tight mb-0.5 group-hover:text-orange-600 dark:group-hover:text-orange-400 transition-colors",children:j.name}),j.business_name&&a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:j.business_name})]}),j.has_proposal&&a.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[a.jsxs("div",{className:"inline-flex items-center space-x-1 px-1.5 py-0.5 bg-green-50 dark:bg-green-900/30 border border-green-100 dark:border-green-800 rounded text-[10px]",children:[a.jsx(ht,{className:"w-3 h-3 text-green-600 dark:text-green-400"}),a.jsx("span",{className:"font-medium text-green-700 dark:text-green-300",children:"Propuesta"})]}),j.proposal_views>0&&a.jsxs("div",{className:"flex items-center space-x-1 text-[10px] text-gray-500",children:[a.jsx(Nr,{className:"w-3 h-3"}),a.jsx("span",{children:j.proposal_views})]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-50 dark:border-gray-700/50",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[j.email&&a.jsx("div",{className:"text-gray-400",title:j.email,children:a.jsx(gt,{className:"w-3 h-3"})}),j.phone&&a.jsx("div",{className:"text-gray-400",title:j.phone,children:a.jsx(bi,{className:"w-3 h-3"})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"text-[10px] text-gray-400",children:new Date(j.created_at).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit"})}),a.jsx("button",{onClick:b=>c(b,j.id),className:"opacity-0 group-hover:opacity-100 p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-all rounded hover:bg-red-50 dark:hover:bg-red-900/20",title:"Eliminar Lead",children:a.jsx(ln,{size:14})})]})]})]},j.id)),p.length===0&&a.jsxs("div",{className:"text-center py-8 opacity-40",children:[a.jsx("div",{className:"w-12 h-12 mx-auto mb-2 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:v(g.icon)}),a.jsx("p",{className:"text-xs text-gray-500",children:"Vaco"})]})]})]},g.id)}),a.jsx(Ri,{isOpen:o.isOpen,onClose:()=>l({...o,isOpen:!1,leadToDelete:null}),onConfirm:d,title:o.title,message:o.message,type:"danger"})]})};function es(e,t,r){return(t=pj(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ev(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ve(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ev(Object(r),!0).forEach(function(n){es(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ev(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jt(e,t,r){return t=wi(t),gj(e,sg()?Reflect.construct(t,r||[],wi(e).constructor):t.apply(e,r))}function bk(e){if(Array.isArray(e))return e}function PO(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function zm(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Rg(e,t){if(e){if(typeof e=="string")return zm(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zm(e,t):void 0}}function wk(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lr(e,t){return bk(e)||PO(e,t)||Rg(e,t)||wk()}function jk(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=jk(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function ft(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=jk(e))&&(n&&(n+=" "),n+=t);return n}var OO=function(e,t,r,n,s,i,o,l){if(!e){var c;if(t===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[r,n,s,i,o,l],u=0;c=new Error(t.replace(/%s/g,function(){return d[u++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},MO=OO;const il=Xt(MO);var $O=function(){};function RO(e,t){var r={};return Object.keys(e).forEach(function(n){r[Qc(n)]=$O}),r}function tv(e,t){return e[t]!==void 0}function Qc(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function LO(e){return!!e&&(typeof e!="function"||e.prototype&&e.prototype.isReactComponent)}function AO(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Pd(e,t)}function kk(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function Nk(e){function t(r){var n=this.constructor.getDerivedStateFromProps(e,r);return n??null}this.setState(t.bind(this))}function _k(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}kk.__suppressDeprecationWarning=!0;Nk.__suppressDeprecationWarning=!0;_k.__suppressDeprecationWarning=!0;function zO(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var r=null,n=null,s=null;if(typeof t.componentWillMount=="function"?r="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?s="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(s="UNSAFE_componentWillUpdate"),r!==null||n!==null||s!==null){var i=e.displayName||e.name,o=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+i+" uses "+o+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(n!==null?`
  `+n:"")+(s!==null?`
  `+s:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=kk,t.componentWillReceiveProps=Nk),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=_k;var l=t.componentDidUpdate;t.componentDidUpdate=function(d,u,f){var h=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:f;l.call(this,d,u,h)}}return e}var IO="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function Sk(e,t,r){r===void 0&&(r=[]);var n=e.displayName||e.name||"Component",s=LO(e),i=Object.keys(t),o=i.map(Qc);s||!r.length||il(!1);var l=function(d){AO(u,d);function u(){for(var h,x=arguments.length,v=new Array(x),y=0;y<x;y++)v[y]=arguments[y];h=d.call.apply(d,[this].concat(v))||this,h.handlers=Object.create(null),i.forEach(function(g){var p=t[g],j=function(N){if(h.props[p]){var C;h._notifying=!0;for(var E=arguments.length,T=new Array(E>1?E-1:0),O=1;O<E;O++)T[O-1]=arguments[O];(C=h.props)[p].apply(C,[N].concat(T)),h._notifying=!1}h.unmounted||h.setState(function(M){var R,H=M.values;return{values:lt(Object.create(null),H,(R={},R[g]=N,R))}})};h.handlers[p]=j}),r.length&&(h.attachRef=function(g){h.inner=g});var w=Object.create(null);return i.forEach(function(g){w[g]=h.props[Qc(g)]}),h.state={values:w,prevProps:{}},h}var f=u.prototype;return f.shouldComponentUpdate=function(){return!this._notifying},u.getDerivedStateFromProps=function(x,v){var y=v.values,w=v.prevProps,g={values:lt(Object.create(null),y),prevProps:{}};return i.forEach(function(p){g.prevProps[p]=x[p],!tv(x,p)&&tv(w,p)&&(g.values[p]=x[Qc(p)])}),g},f.componentWillUnmount=function(){this.unmounted=!0},f.render=function(){var x=this,v=this.props,y=v.innerRef,w=xu(v,["innerRef"]);o.forEach(function(p){delete w[p]});var g={};return i.forEach(function(p){var j=x.props[p];g[p]=j!==void 0?j:x.state.values[p]}),$.createElement(e,lt({},w,g,this.handlers,{ref:y||this.attachRef}))},u}($.Component);zO(l),l.displayName="Uncontrolled("+n+")",l.propTypes=lt({innerRef:function(){}},RO(t)),r.forEach(function(d){l.prototype[d]=function(){var f;return(f=this.inner)[d].apply(f,arguments)}});var c=l;return $.forwardRef&&(c=$.forwardRef(function(d,u){return $.createElement(l,lt({},d,{innerRef:u,__source:{fileName:IO,lineNumber:128},__self:this}))}),c.propTypes=l.propTypes),c.ControlledComponent=e,c.deferControlTo=function(d,u,f){return u===void 0&&(u={}),Sk(d,lt({},t,u),f)},c}var Ld="milliseconds",ol="seconds",ll="minutes",cl="hours",ws="day",ki="week",dl="month",js="year",ks="decade",Ns="century",Ck={milliseconds:1,seconds:1e3,minutes:60*1e3,hours:60*60*1e3,day:24*60*60*1e3,week:7*24*60*60*1e3},FO={month:1,year:12,decade:10*12,century:100*12};function HO(e){return[31,WO(e),31,30,31,30,31,31,30,31,30,31]}function WO(e){return e%4===0&&e%100!==0||e%400===0?29:28}function dn(e,t,r){switch(e=new Date(e),r){case Ld:case ol:case ll:case cl:case ws:case ki:return BO(e,t*Ck[r]);case dl:case js:case ks:case Ns:return UO(e,t*FO[r])}throw new TypeError('Invalid units: "'+r+'"')}function BO(e,t){var r=new Date(+e+t);return qO(e,r)}function UO(e,t){var r=e.getFullYear(),n=e.getMonth(),s=e.getDate(),i=r*12+n+t,o=Math.trunc(i/12),l=i%12,c=Math.min(s,HO(o)[l]),d=new Date(e);return d.setFullYear(o),d.setDate(1),d.setMonth(l),d.setDate(c),d}function qO(e,t){var r=e.getTimezoneOffset(),n=t.getTimezoneOffset(),s=n-r;return new Date(+t+s*Ck.minutes)}function ul(e,t,r){return dn(e,-t,r)}function Ft(e,t,r){switch(e=new Date(e),t){case Ns:case ks:case js:e=zd(e,0);case dl:e=Ok(e,1);case ki:case ws:e=ml(e,0);case cl:e=Ni(e,0);case ll:e=fl(e,0);case ol:e=hl(e,0)}return t===ks&&(e=ul(e,_s(e)%10,"year")),t===Ns&&(e=ul(e,_s(e)%100,"year")),t===ki&&(e=Mk(e,0,r)),e}function Ad(e,t,r){switch(e=new Date(e),e=Ft(e,t,r),t){case Ns:case ks:case js:case dl:case ki:e=dn(e,1,t),e=ul(e,1,ws),e.setHours(23,59,59,999);break;case ws:e.setHours(23,59,59,999);break;case cl:case ll:case ol:e=dn(e,1,t),e=ul(e,1,Ld)}return e}var Al=zi(function(e,t){return e===t}),Lg=zi(function(e,t){return e!==t}),Mu=zi(function(e,t){return e>t}),zl=zi(function(e,t){return e>=t}),Ag=zi(function(e,t){return e<t}),Ai=zi(function(e,t){return e<=t});function Ek(){return new Date(Math.min.apply(Math,arguments))}function Dk(){return new Date(Math.max.apply(Math,arguments))}function Tk(e,t,r,n){return n=n||"day",(!t||zl(e,t,n))&&(!r||Ai(e,r,n))}var hl=Wa("Milliseconds"),fl=Wa("Seconds"),Ni=Wa("Minutes"),ml=Wa("Hours"),Pk=Wa("Day"),Ok=Wa("Date"),zd=Wa("Month"),_s=Wa("FullYear");function YO(e,t){return t===void 0?_s(Ft(e,ks)):dn(e,t+10,js)}function VO(e,t){return t===void 0?_s(Ft(e,Ns)):dn(e,t+100,js)}function Mk(e,t,r){var n=(Pk(e)+7-(r||0))%7;return t===void 0?n:dn(e,t-n,ws)}function GO(e,t,r,n){var s,i,o;switch(r){case Ld:case ol:case ll:case cl:case ws:case ki:s=t.getTime()-e.getTime();break;case dl:case js:case ks:case Ns:s=(_s(t)-_s(e))*12+zd(t)-zd(e);break;default:throw new TypeError('Invalid units: "'+r+'"')}switch(r){case Ld:i=1;break;case ol:i=1e3;break;case ll:i=1e3*60;break;case cl:i=1e3*60*60;break;case ws:i=1e3*60*60*24;break;case ki:i=1e3*60*60*24*7;break;case dl:i=1;break;case js:i=12;break;case ks:i=120;break;case Ns:i=1200;break;default:throw new TypeError('Invalid units: "'+r+'"')}return o=s/i,n?o:Math.round(o)}function Wa(e){var t=function(r){switch(r){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(e);return function(r,n){if(n===void 0)return r["get"+e]();var s=new Date(r);return s["set"+e](n),t&&s["get"+e]()!=n&&(e==="Hours"||n>=t&&s.getHours()-r.getHours()<Math.floor(n/t))&&s["set"+e](n+t),s}}function zi(e){return function(t,r,n){return e(+Ft(t,n),+Ft(r,n))}}const rv=Object.freeze(Object.defineProperty({__proto__:null,add:dn,century:VO,date:Ok,day:Pk,decade:YO,diff:GO,endOf:Ad,eq:Al,gt:Mu,gte:zl,hours:ml,inRange:Tk,lt:Ag,lte:Ai,max:Dk,milliseconds:hl,min:Ek,minutes:Ni,month:zd,neq:Lg,seconds:fl,startOf:Ft,subtract:ul,weekday:Mk,year:_s},Symbol.toStringTag,{value:"Module"}));function KO(e){if(Array.isArray(e))return zm(e)}function $k(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function XO(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zc(e){return KO(e)||$k(e)||Rg(e)||XO()}function JO(e,t,r){var n=-1,s=e.length;t<0&&(t=-t>s?0:s+t),r=r>s?s:r,r<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(s);++n<s;)i[n]=e[n+t];return i}var Rk=JO;function QO(e,t){return e===t||e!==e&&t!==t}var Il=QO,ZO=typeof cr=="object"&&cr&&cr.Object===Object&&cr,Lk=ZO,e6=Lk,t6=typeof self=="object"&&self&&self.Object===Object&&self,r6=e6||t6||Function("return this")(),On=r6,n6=On,a6=n6.Symbol,Ii=a6,nv=Ii,Ak=Object.prototype,s6=Ak.hasOwnProperty,i6=Ak.toString,ho=nv?nv.toStringTag:void 0;function o6(e){var t=s6.call(e,ho),r=e[ho];try{e[ho]=void 0;var n=!0}catch{}var s=i6.call(e);return n&&(t?e[ho]=r:delete e[ho]),s}var l6=o6,c6=Object.prototype,d6=c6.toString;function u6(e){return d6.call(e)}var h6=u6,av=Ii,f6=l6,m6=h6,p6="[object Null]",g6="[object Undefined]",sv=av?av.toStringTag:void 0;function x6(e){return e==null?e===void 0?g6:p6:sv&&sv in Object(e)?f6(e):m6(e)}var Fi=x6;function y6(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ia=y6,v6=Fi,b6=ia,w6="[object AsyncFunction]",j6="[object Function]",k6="[object GeneratorFunction]",N6="[object Proxy]";function _6(e){if(!b6(e))return!1;var t=v6(e);return t==j6||t==k6||t==w6||t==N6}var zg=_6,S6=9007199254740991;function C6(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=S6}var Ig=C6,E6=zg,D6=Ig;function T6(e){return e!=null&&D6(e.length)&&!E6(e)}var Fl=T6,P6=9007199254740991,O6=/^(?:0|[1-9]\d*)$/;function M6(e,t){var r=typeof e;return t=t??P6,!!t&&(r=="number"||r!="symbol"&&O6.test(e))&&e>-1&&e%1==0&&e<t}var Fg=M6,$6=Il,R6=Fl,L6=Fg,A6=ia;function z6(e,t,r){if(!A6(r))return!1;var n=typeof t;return(n=="number"?R6(r)&&L6(t,r.length):n=="string"&&t in r)?$6(r[t],e):!1}var $u=z6,I6=/\s/;function F6(e){for(var t=e.length;t--&&I6.test(e.charAt(t)););return t}var H6=F6,W6=H6,B6=/^\s+/;function U6(e){return e&&e.slice(0,W6(e)+1).replace(B6,"")}var q6=U6;function Y6(e){return e!=null&&typeof e=="object"}var Ba=Y6,V6=Fi,G6=Ba,K6="[object Symbol]";function X6(e){return typeof e=="symbol"||G6(e)&&V6(e)==K6}var Hl=X6,J6=q6,iv=ia,Q6=Hl,ov=NaN,Z6=/^[-+]0x[0-9a-f]+$/i,eM=/^0b[01]+$/i,tM=/^0o[0-7]+$/i,rM=parseInt;function nM(e){if(typeof e=="number")return e;if(Q6(e))return ov;if(iv(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=iv(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=J6(e);var r=eM.test(e);return r||tM.test(e)?rM(e.slice(2),r?2:8):Z6.test(e)?ov:+e}var aM=nM,sM=aM,lv=1/0,iM=17976931348623157e292;function oM(e){if(!e)return e===0?e:0;if(e=sM(e),e===lv||e===-lv){var t=e<0?-1:1;return t*iM}return e===e?e:0}var zk=oM,lM=zk;function cM(e){var t=lM(e),r=t%1;return t===t?r?t-r:t:0}var Ik=cM,dM=Rk,uM=$u,hM=Ik,fM=Math.ceil,mM=Math.max;function pM(e,t,r){(r?uM(e,t,r):t===void 0)?t=1:t=mM(hM(t),0);var n=e==null?0:e.length;if(!n||t<1)return[];for(var s=0,i=0,o=Array(fM(n/t));s<n;)o[i++]=dM(e,s,s+=t);return o}var gM=pM;const xM=Xt(gM);function Wl(e){return e&&e.ownerDocument||document}function yM(e){var t=Wl(e);return t&&t.defaultView||window}function vM(e,t){return yM(e).getComputedStyle(e,t)}var bM=/([A-Z])/g;function wM(e){return e.replace(bM,"-$1").toLowerCase()}var jM=/^ms-/;function Ec(e){return wM(e).replace(jM,"-ms-")}var kM=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function NM(e){return!!(e&&kM.test(e))}function Fs(e,t){var r="",n="";if(typeof t=="string")return e.style.getPropertyValue(Ec(t))||vM(e).getPropertyValue(Ec(t));Object.keys(t).forEach(function(s){var i=t[s];!i&&i!==0?e.style.removeProperty(Ec(s)):NM(s)?n+=s+"("+i+") ":r+=Ec(s)+": "+i+";"}),n&&(r+="transform: "+n+";"),e.style.cssText+=";"+r}function pl(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}function _M(e){return"nodeType"in e&&e.nodeType===document.DOCUMENT_NODE}function Hg(e){return"window"in e&&e.window===e?e:_M(e)&&e.defaultView||!1}function Fk(e){var t=e==="pageXOffset"?"scrollLeft":"scrollTop";function r(n,s){var i=Hg(n);if(s===void 0)return i?i[e]:n[t];i?i.scrollTo(i[e],s):n[t]=s}return r}const Hk=Fk("pageXOffset"),Wk=Fk("pageYOffset");function hs(e){var t=Wl(e),r={top:0,left:0,height:0,width:0},n=t&&t.documentElement;return!n||!pl(n,e)||(e.getBoundingClientRect!==void 0&&(r=e.getBoundingClientRect()),r={top:r.top+Wk(n)-(n.clientTop||0),left:r.left+Hk(n)-(n.clientLeft||0),width:r.width,height:r.height}),r}var SM=function(t){return!!t&&"offsetParent"in t};function CM(e){for(var t=Wl(e),r=e&&e.offsetParent;SM(r)&&r.nodeName!=="HTML"&&Fs(r,"position")==="static";)r=r.offsetParent;return r||t.documentElement}var EM=function(t){return t.nodeName&&t.nodeName.toLowerCase()};function Bk(e,t){var r={top:0,left:0},n;if(Fs(e,"position")==="fixed")n=e.getBoundingClientRect();else{var s=t||CM(e);n=hs(e),EM(s)!=="html"&&(r=hs(s));var i=String(Fs(s,"borderTopWidth")||0);r.top+=parseInt(i,10)-Wk(s)||0;var o=String(Fs(s,"borderLeftWidth")||0);r.left+=parseInt(o,10)-Hk(s)||0}var l=String(Fs(e,"marginTop")||0),c=String(Fs(e,"marginLeft")||0);return lt({},n,{top:n.top-r.top-(parseInt(l,10)||0),left:n.left-r.left-(parseInt(c,10)||0)})}const Wg=!!(typeof window<"u"&&window.document&&window.document.createElement);var cv=new Date().getTime();function DM(e){var t=new Date().getTime(),r=Math.max(0,16-(t-cv)),n=setTimeout(e,r);return cv=t,n}var TM=["","webkit","moz","o","ms"],Im="clearTimeout",Fm=DM,dv=function(t,r){return t+(t?r[0].toUpperCase()+r.substr(1):r)+"AnimationFrame"};Wg&&TM.some(function(e){var t=dv(e,"request");return t in window&&(Im=dv(e,"cancel"),Fm=function(n){return window[t](n)}),!!Fm});var uv=function(t){typeof window[Im]=="function"&&window[Im](t)},Uk=Fm,sf;function PM(e,t){if(!sf){var r=document.body,n=r.matches||r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector;sf=function(i,o){return n.call(i,o)}}return sf(e,t)}var OM=Function.prototype.bind.call(Function.prototype.call,[].slice);function MM(e,t){return OM(e.querySelectorAll(t))}var Hm=!1,Wm=!1;try{var of={get passive(){return Hm=!0},get once(){return Wm=Hm=!0}};Wg&&(window.addEventListener("test",of,of),window.removeEventListener("test",of,!0))}catch{}function $M(e,t,r,n){if(n&&typeof n!="boolean"&&!Wm){var s=n.once,i=n.capture,o=r;!Wm&&s&&(o=r.__once||function l(c){this.removeEventListener(t,l,i),r.call(this,c)},r.__once=o),e.addEventListener(t,o,Hm?n:i)}e.addEventListener(t,r,n)}function RM(e){const t=S.useRef(e);return S.useEffect(()=>{t.current=e},[e]),t}function hv(e){const t=RM(e);return S.useCallback(function(...r){return t.current&&t.current(...r)},[t])}function fv(){return S.useState(null)}function LM(){const e=S.useRef(!0),t=S.useRef(()=>e.current);return S.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function AM(e){const t=LM();return[e[0],S.useCallback(r=>{if(t())return e[1](r)},[t,e[1]])]}var mr="top",Br="bottom",Ur="right",pr="left",Bg="auto",Bl=[mr,Br,Ur,pr],_i="start",gl="end",zM="clippingParents",qk="viewport",fo="popper",IM="reference",mv=Bl.reduce(function(e,t){return e.concat([t+"-"+_i,t+"-"+gl])},[]),Ug=[].concat(Bl,[Bg]).reduce(function(e,t){return e.concat([t,t+"-"+_i,t+"-"+gl])},[]),FM="beforeRead",HM="read",WM="afterRead",BM="beforeMain",UM="main",qM="afterMain",YM="beforeWrite",VM="write",GM="afterWrite",KM=[FM,HM,WM,BM,UM,qM,YM,VM,GM];function _n(e){return e.split("-")[0]}function Sr(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Ss(e){var t=Sr(e).Element;return e instanceof t||e instanceof Element}function Sn(e){var t=Sr(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function qg(e){if(typeof ShadowRoot>"u")return!1;var t=Sr(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var fs=Math.max,Id=Math.min,Si=Math.round;function Bm(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Yk(){return!/^((?!chrome|android).)*safari/i.test(Bm())}function Ci(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),s=1,i=1;t&&Sn(e)&&(s=e.offsetWidth>0&&Si(n.width)/e.offsetWidth||1,i=e.offsetHeight>0&&Si(n.height)/e.offsetHeight||1);var o=Ss(e)?Sr(e):window,l=o.visualViewport,c=!Yk()&&r,d=(n.left+(c&&l?l.offsetLeft:0))/s,u=(n.top+(c&&l?l.offsetTop:0))/i,f=n.width/s,h=n.height/i;return{width:f,height:h,top:u,right:d+f,bottom:u+h,left:d,x:d,y:u}}function Yg(e){var t=Ci(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function Vk(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&qg(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Aa(e){return e?(e.nodeName||"").toLowerCase():null}function ra(e){return Sr(e).getComputedStyle(e)}function XM(e){return["table","td","th"].indexOf(Aa(e))>=0}function Ua(e){return((Ss(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ru(e){return Aa(e)==="html"?e:e.assignedSlot||e.parentNode||(qg(e)?e.host:null)||Ua(e)}function pv(e){return!Sn(e)||ra(e).position==="fixed"?null:e.offsetParent}function JM(e){var t=/firefox/i.test(Bm()),r=/Trident/i.test(Bm());if(r&&Sn(e)){var n=ra(e);if(n.position==="fixed")return null}var s=Ru(e);for(qg(s)&&(s=s.host);Sn(s)&&["html","body"].indexOf(Aa(s))<0;){var i=ra(s);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return s;s=s.parentNode}return null}function Ul(e){for(var t=Sr(e),r=pv(e);r&&XM(r)&&ra(r).position==="static";)r=pv(r);return r&&(Aa(r)==="html"||Aa(r)==="body"&&ra(r).position==="static")?t:r||JM(e)||t}function Vg(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Lo(e,t,r){return fs(e,Id(t,r))}function QM(e,t,r){var n=Lo(e,t,r);return n>r?r:n}function Gk(){return{top:0,right:0,bottom:0,left:0}}function Kk(e){return Object.assign({},Gk(),e)}function Xk(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var ZM=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,Kk(typeof t!="number"?t:Xk(t,Bl))};function e$(e){var t,r=e.state,n=e.name,s=e.options,i=r.elements.arrow,o=r.modifiersData.popperOffsets,l=_n(r.placement),c=Vg(l),d=[pr,Ur].indexOf(l)>=0,u=d?"height":"width";if(!(!i||!o)){var f=ZM(s.padding,r),h=Yg(i),x=c==="y"?mr:pr,v=c==="y"?Br:Ur,y=r.rects.reference[u]+r.rects.reference[c]-o[c]-r.rects.popper[u],w=o[c]-r.rects.reference[c],g=Ul(i),p=g?c==="y"?g.clientHeight||0:g.clientWidth||0:0,j=y/2-w/2,b=f[x],N=p-h[u]-f[v],C=p/2-h[u]/2+j,E=Lo(b,C,N),T=c;r.modifiersData[n]=(t={},t[T]=E,t.centerOffset=E-C,t)}}function t$(e){var t=e.state,r=e.options,n=r.element,s=n===void 0?"[data-popper-arrow]":n;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||Vk(t.elements.popper,s)&&(t.elements.arrow=s))}const r$={name:"arrow",enabled:!0,phase:"main",fn:e$,effect:t$,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ei(e){return e.split("-")[1]}var n$={top:"auto",right:"auto",bottom:"auto",left:"auto"};function a$(e,t){var r=e.x,n=e.y,s=t.devicePixelRatio||1;return{x:Si(r*s)/s||0,y:Si(n*s)/s||0}}function gv(e){var t,r=e.popper,n=e.popperRect,s=e.placement,i=e.variation,o=e.offsets,l=e.position,c=e.gpuAcceleration,d=e.adaptive,u=e.roundOffsets,f=e.isFixed,h=o.x,x=h===void 0?0:h,v=o.y,y=v===void 0?0:v,w=typeof u=="function"?u({x,y}):{x,y};x=w.x,y=w.y;var g=o.hasOwnProperty("x"),p=o.hasOwnProperty("y"),j=pr,b=mr,N=window;if(d){var C=Ul(r),E="clientHeight",T="clientWidth";if(C===Sr(r)&&(C=Ua(r),ra(C).position!=="static"&&l==="absolute"&&(E="scrollHeight",T="scrollWidth")),C=C,s===mr||(s===pr||s===Ur)&&i===gl){b=Br;var O=f&&C===N&&N.visualViewport?N.visualViewport.height:C[E];y-=O-n.height,y*=c?1:-1}if(s===pr||(s===mr||s===Br)&&i===gl){j=Ur;var M=f&&C===N&&N.visualViewport?N.visualViewport.width:C[T];x-=M-n.width,x*=c?1:-1}}var R=Object.assign({position:l},d&&n$),H=u===!0?a$({x,y},Sr(r)):{x,y};if(x=H.x,y=H.y,c){var A;return Object.assign({},R,(A={},A[b]=p?"0":"",A[j]=g?"0":"",A.transform=(N.devicePixelRatio||1)<=1?"translate("+x+"px, "+y+"px)":"translate3d("+x+"px, "+y+"px, 0)",A))}return Object.assign({},R,(t={},t[b]=p?y+"px":"",t[j]=g?x+"px":"",t.transform="",t))}function s$(e){var t=e.state,r=e.options,n=r.gpuAcceleration,s=n===void 0?!0:n,i=r.adaptive,o=i===void 0?!0:i,l=r.roundOffsets,c=l===void 0?!0:l,d={placement:_n(t.placement),variation:Ei(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,gv(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,gv(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const i$={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:s$,data:{}};var Dc={passive:!0};function o$(e){var t=e.state,r=e.instance,n=e.options,s=n.scroll,i=s===void 0?!0:s,o=n.resize,l=o===void 0?!0:o,c=Sr(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&d.forEach(function(u){u.addEventListener("scroll",r.update,Dc)}),l&&c.addEventListener("resize",r.update,Dc),function(){i&&d.forEach(function(u){u.removeEventListener("scroll",r.update,Dc)}),l&&c.removeEventListener("resize",r.update,Dc)}}const l$={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:o$,data:{}};var c$={left:"right",right:"left",bottom:"top",top:"bottom"};function ed(e){return e.replace(/left|right|bottom|top/g,function(t){return c$[t]})}var d$={start:"end",end:"start"};function xv(e){return e.replace(/start|end/g,function(t){return d$[t]})}function Gg(e){var t=Sr(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function Kg(e){return Ci(Ua(e)).left+Gg(e).scrollLeft}function u$(e,t){var r=Sr(e),n=Ua(e),s=r.visualViewport,i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;var d=Yk();(d||!d&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l+Kg(e),y:c}}function h$(e){var t,r=Ua(e),n=Gg(e),s=(t=e.ownerDocument)==null?void 0:t.body,i=fs(r.scrollWidth,r.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=fs(r.scrollHeight,r.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),l=-n.scrollLeft+Kg(e),c=-n.scrollTop;return ra(s||r).direction==="rtl"&&(l+=fs(r.clientWidth,s?s.clientWidth:0)-i),{width:i,height:o,x:l,y:c}}function Xg(e){var t=ra(e),r=t.overflow,n=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+s+n)}function Jk(e){return["html","body","#document"].indexOf(Aa(e))>=0?e.ownerDocument.body:Sn(e)&&Xg(e)?e:Jk(Ru(e))}function Ao(e,t){var r;t===void 0&&(t=[]);var n=Jk(e),s=n===((r=e.ownerDocument)==null?void 0:r.body),i=Sr(n),o=s?[i].concat(i.visualViewport||[],Xg(n)?n:[]):n,l=t.concat(o);return s?l:l.concat(Ao(Ru(o)))}function Um(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function f$(e,t){var r=Ci(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function yv(e,t,r){return t===qk?Um(u$(e,r)):Ss(t)?f$(t,r):Um(h$(Ua(e)))}function m$(e){var t=Ao(Ru(e)),r=["absolute","fixed"].indexOf(ra(e).position)>=0,n=r&&Sn(e)?Ul(e):e;return Ss(n)?t.filter(function(s){return Ss(s)&&Vk(s,n)&&Aa(s)!=="body"}):[]}function p$(e,t,r,n){var s=t==="clippingParents"?m$(e):[].concat(t),i=[].concat(s,[r]),o=i[0],l=i.reduce(function(c,d){var u=yv(e,d,n);return c.top=fs(u.top,c.top),c.right=Id(u.right,c.right),c.bottom=Id(u.bottom,c.bottom),c.left=fs(u.left,c.left),c},yv(e,o,n));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function Qk(e){var t=e.reference,r=e.element,n=e.placement,s=n?_n(n):null,i=n?Ei(n):null,o=t.x+t.width/2-r.width/2,l=t.y+t.height/2-r.height/2,c;switch(s){case mr:c={x:o,y:t.y-r.height};break;case Br:c={x:o,y:t.y+t.height};break;case Ur:c={x:t.x+t.width,y:l};break;case pr:c={x:t.x-r.width,y:l};break;default:c={x:t.x,y:t.y}}var d=s?Vg(s):null;if(d!=null){var u=d==="y"?"height":"width";switch(i){case _i:c[d]=c[d]-(t[u]/2-r[u]/2);break;case gl:c[d]=c[d]+(t[u]/2-r[u]/2);break}}return c}function xl(e,t){t===void 0&&(t={});var r=t,n=r.placement,s=n===void 0?e.placement:n,i=r.strategy,o=i===void 0?e.strategy:i,l=r.boundary,c=l===void 0?zM:l,d=r.rootBoundary,u=d===void 0?qk:d,f=r.elementContext,h=f===void 0?fo:f,x=r.altBoundary,v=x===void 0?!1:x,y=r.padding,w=y===void 0?0:y,g=Kk(typeof w!="number"?w:Xk(w,Bl)),p=h===fo?IM:fo,j=e.rects.popper,b=e.elements[v?p:h],N=p$(Ss(b)?b:b.contextElement||Ua(e.elements.popper),c,u,o),C=Ci(e.elements.reference),E=Qk({reference:C,element:j,placement:s}),T=Um(Object.assign({},j,E)),O=h===fo?T:C,M={top:N.top-O.top+g.top,bottom:O.bottom-N.bottom+g.bottom,left:N.left-O.left+g.left,right:O.right-N.right+g.right},R=e.modifiersData.offset;if(h===fo&&R){var H=R[s];Object.keys(M).forEach(function(A){var L=[Ur,Br].indexOf(A)>=0?1:-1,ee=[mr,Br].indexOf(A)>=0?"y":"x";M[A]+=H[ee]*L})}return M}function g$(e,t){t===void 0&&(t={});var r=t,n=r.placement,s=r.boundary,i=r.rootBoundary,o=r.padding,l=r.flipVariations,c=r.allowedAutoPlacements,d=c===void 0?Ug:c,u=Ei(n),f=u?l?mv:mv.filter(function(v){return Ei(v)===u}):Bl,h=f.filter(function(v){return d.indexOf(v)>=0});h.length===0&&(h=f);var x=h.reduce(function(v,y){return v[y]=xl(e,{placement:y,boundary:s,rootBoundary:i,padding:o})[_n(y)],v},{});return Object.keys(x).sort(function(v,y){return x[v]-x[y]})}function x$(e){if(_n(e)===Bg)return[];var t=ed(e);return[xv(e),t,xv(t)]}function y$(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var s=r.mainAxis,i=s===void 0?!0:s,o=r.altAxis,l=o===void 0?!0:o,c=r.fallbackPlacements,d=r.padding,u=r.boundary,f=r.rootBoundary,h=r.altBoundary,x=r.flipVariations,v=x===void 0?!0:x,y=r.allowedAutoPlacements,w=t.options.placement,g=_n(w),p=g===w,j=c||(p||!v?[ed(w)]:x$(w)),b=[w].concat(j).reduce(function(ae,V){return ae.concat(_n(V)===Bg?g$(t,{placement:V,boundary:u,rootBoundary:f,padding:d,flipVariations:v,allowedAutoPlacements:y}):V)},[]),N=t.rects.reference,C=t.rects.popper,E=new Map,T=!0,O=b[0],M=0;M<b.length;M++){var R=b[M],H=_n(R),A=Ei(R)===_i,L=[mr,Br].indexOf(H)>=0,ee=L?"width":"height",te=xl(t,{placement:R,boundary:u,rootBoundary:f,altBoundary:h,padding:d}),he=L?A?Ur:pr:A?Br:mr;N[ee]>C[ee]&&(he=ed(he));var G=ed(he),Z=[];if(i&&Z.push(te[H]<=0),l&&Z.push(te[he]<=0,te[G]<=0),Z.every(function(ae){return ae})){O=R,T=!1;break}E.set(R,Z)}if(T)for(var ie=v?3:1,I=function(V){var le=b.find(function(xe){var K=E.get(xe);if(K)return K.slice(0,V).every(function(se){return se})});if(le)return O=le,"break"},F=ie;F>0;F--){var Y=I(F);if(Y==="break")break}t.placement!==O&&(t.modifiersData[n]._skip=!0,t.placement=O,t.reset=!0)}}const v$={name:"flip",enabled:!0,phase:"main",fn:y$,requiresIfExists:["offset"],data:{_skip:!1}};function vv(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function bv(e){return[mr,Ur,Br,pr].some(function(t){return e[t]>=0})}function b$(e){var t=e.state,r=e.name,n=t.rects.reference,s=t.rects.popper,i=t.modifiersData.preventOverflow,o=xl(t,{elementContext:"reference"}),l=xl(t,{altBoundary:!0}),c=vv(o,n),d=vv(l,s,i),u=bv(c),f=bv(d);t.modifiersData[r]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:u,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}const w$={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:b$};function j$(e,t,r){var n=_n(e),s=[pr,mr].indexOf(n)>=0?-1:1,i=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,o=i[0],l=i[1];return o=o||0,l=(l||0)*s,[pr,Ur].indexOf(n)>=0?{x:l,y:o}:{x:o,y:l}}function k$(e){var t=e.state,r=e.options,n=e.name,s=r.offset,i=s===void 0?[0,0]:s,o=Ug.reduce(function(u,f){return u[f]=j$(f,t.rects,i),u},{}),l=o[t.placement],c=l.x,d=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=d),t.modifiersData[n]=o}const N$={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:k$};function _$(e){var t=e.state,r=e.name;t.modifiersData[r]=Qk({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const S$={name:"popperOffsets",enabled:!0,phase:"read",fn:_$,data:{}};function C$(e){return e==="x"?"y":"x"}function E$(e){var t=e.state,r=e.options,n=e.name,s=r.mainAxis,i=s===void 0?!0:s,o=r.altAxis,l=o===void 0?!1:o,c=r.boundary,d=r.rootBoundary,u=r.altBoundary,f=r.padding,h=r.tether,x=h===void 0?!0:h,v=r.tetherOffset,y=v===void 0?0:v,w=xl(t,{boundary:c,rootBoundary:d,padding:f,altBoundary:u}),g=_n(t.placement),p=Ei(t.placement),j=!p,b=Vg(g),N=C$(b),C=t.modifiersData.popperOffsets,E=t.rects.reference,T=t.rects.popper,O=typeof y=="function"?y(Object.assign({},t.rects,{placement:t.placement})):y,M=typeof O=="number"?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),R=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,H={x:0,y:0};if(C){if(i){var A,L=b==="y"?mr:pr,ee=b==="y"?Br:Ur,te=b==="y"?"height":"width",he=C[b],G=he+w[L],Z=he-w[ee],ie=x?-T[te]/2:0,I=p===_i?E[te]:T[te],F=p===_i?-T[te]:-E[te],Y=t.elements.arrow,ae=x&&Y?Yg(Y):{width:0,height:0},V=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Gk(),le=V[L],xe=V[ee],K=Lo(0,E[te],ae[te]),se=j?E[te]/2-ie-K-le-M.mainAxis:I-K-le-M.mainAxis,ye=j?-E[te]/2+ie+K+xe+M.mainAxis:F+K+xe+M.mainAxis,ve=t.elements.arrow&&Ul(t.elements.arrow),me=ve?b==="y"?ve.clientTop||0:ve.clientLeft||0:0,De=(A=R==null?void 0:R[b])!=null?A:0,W=he+se-De-me,Ce=he+ye-De,Ne=Lo(x?Id(G,W):G,he,x?fs(Z,Ce):Z);C[b]=Ne,H[b]=Ne-he}if(l){var yt,Me=b==="x"?mr:pr,Fe=b==="x"?Br:Ur,nt=C[N],Mt=N==="y"?"height":"width",Gr=nt+w[Me],it=nt-w[Fe],z=[mr,pr].indexOf(g)!==-1,ce=(yt=R==null?void 0:R[N])!=null?yt:0,xr=z?Gr:nt-E[Mt]-T[Mt]-ce+M.altAxis,mn=z?nt+E[Mt]+T[Mt]-ce-M.altAxis:it,Tt=x&&z?QM(xr,nt,mn):Lo(x?xr:Gr,nt,x?mn:it);C[N]=Tt,H[N]=Tt-nt}t.modifiersData[n]=H}}const D$={name:"preventOverflow",enabled:!0,phase:"main",fn:E$,requiresIfExists:["offset"]};function T$(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function P$(e){return e===Sr(e)||!Sn(e)?Gg(e):T$(e)}function O$(e){var t=e.getBoundingClientRect(),r=Si(t.width)/e.offsetWidth||1,n=Si(t.height)/e.offsetHeight||1;return r!==1||n!==1}function M$(e,t,r){r===void 0&&(r=!1);var n=Sn(t),s=Sn(t)&&O$(t),i=Ua(t),o=Ci(e,s,r),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(n||!n&&!r)&&((Aa(t)!=="body"||Xg(i))&&(l=P$(t)),Sn(t)?(c=Ci(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):i&&(c.x=Kg(i))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}function $$(e){var t=new Map,r=new Set,n=[];e.forEach(function(i){t.set(i.name,i)});function s(i){r.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(l){if(!r.has(l)){var c=t.get(l);c&&s(c)}}),n.push(i)}return e.forEach(function(i){r.has(i.name)||s(i)}),n}function R$(e){var t=$$(e);return KM.reduce(function(r,n){return r.concat(t.filter(function(s){return s.phase===n}))},[])}function L$(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function A$(e){var t=e.reduce(function(r,n){var s=r[n.name];return r[n.name]=s?Object.assign({},s,n,{options:Object.assign({},s.options,n.options),data:Object.assign({},s.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var wv={placement:"bottom",modifiers:[],strategy:"absolute"};function jv(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function z$(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,s=t.defaultOptions,i=s===void 0?wv:s;return function(l,c,d){d===void 0&&(d=i);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},wv,i),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},f=[],h=!1,x={state:u,setOptions:function(g){var p=typeof g=="function"?g(u.options):g;y(),u.options=Object.assign({},i,u.options,p),u.scrollParents={reference:Ss(l)?Ao(l):l.contextElement?Ao(l.contextElement):[],popper:Ao(c)};var j=R$(A$([].concat(n,u.options.modifiers)));return u.orderedModifiers=j.filter(function(b){return b.enabled}),v(),x.update()},forceUpdate:function(){if(!h){var g=u.elements,p=g.reference,j=g.popper;if(jv(p,j)){u.rects={reference:M$(p,Ul(j),u.options.strategy==="fixed"),popper:Yg(j)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(M){return u.modifiersData[M.name]=Object.assign({},M.data)});for(var b=0;b<u.orderedModifiers.length;b++){if(u.reset===!0){u.reset=!1,b=-1;continue}var N=u.orderedModifiers[b],C=N.fn,E=N.options,T=E===void 0?{}:E,O=N.name;typeof C=="function"&&(u=C({state:u,options:T,name:O,instance:x})||u)}}}},update:L$(function(){return new Promise(function(w){x.forceUpdate(),w(u)})}),destroy:function(){y(),h=!0}};if(!jv(l,c))return x;x.setOptions(d).then(function(w){!h&&d.onFirstUpdate&&d.onFirstUpdate(w)});function v(){u.orderedModifiers.forEach(function(w){var g=w.name,p=w.options,j=p===void 0?{}:p,b=w.effect;if(typeof b=="function"){var N=b({state:u,name:g,instance:x,options:j}),C=function(){};f.push(N||C)}})}function y(){f.forEach(function(w){return w()}),f=[]}return x}}var I$=z$({defaultModifiers:[w$,S$,i$,l$,N$,v$,D$,r$]}),kv=function(t){return{position:t,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},F$={name:"applyStyles",enabled:!1},H$={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(t){var r=t.state;return function(){var n=r.elements,s=n.reference,i=n.popper;if("removeAttribute"in s){var o=(s.getAttribute("aria-describedby")||"").split(",").filter(function(l){return l.trim()!==i.id});o.length?s.setAttribute("aria-describedby",o.join(",")):s.removeAttribute("aria-describedby")}}},fn:function(t){var r,n=t.state,s=n.elements,i=s.popper,o=s.reference,l=(r=i.getAttribute("role"))==null?void 0:r.toLowerCase();if(i.id&&l==="tooltip"&&"setAttribute"in o){var c=o.getAttribute("aria-describedby");if(c&&c.split(",").indexOf(i.id)!==-1)return;o.setAttribute("aria-describedby",c?c+","+i.id:i.id)}}},W$=[];function B$(e,t,r){var n=r===void 0?{}:r,s=n.enabled,i=s===void 0?!0:s,o=n.placement,l=o===void 0?"bottom":o,c=n.strategy,d=c===void 0?"absolute":c,u=n.modifiers,f=u===void 0?W$:u,h=xu(n,["enabled","placement","strategy","modifiers"]),x=S.useRef(),v=S.useCallback(function(){var b;(b=x.current)==null||b.update()},[]),y=S.useCallback(function(){var b;(b=x.current)==null||b.forceUpdate()},[]),w=AM(S.useState({placement:l,update:v,forceUpdate:y,attributes:{},styles:{popper:kv(d),arrow:{}}})),g=w[0],p=w[1],j=S.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(N){var C=N.state,E={},T={};Object.keys(C.elements).forEach(function(O){E[O]=C.styles[O],T[O]=C.attributes[O]}),p({state:C,styles:E,attributes:T,update:v,forceUpdate:y,placement:C.placement})}}},[v,y,p]);return S.useEffect(function(){!x.current||!i||x.current.setOptions({placement:l,strategy:d,modifiers:[].concat(f,[j,F$])})},[d,l,j,i]),S.useEffect(function(){if(!(!i||e==null||t==null))return x.current=I$(e,t,lt({},h,{placement:l,strategy:d,modifiers:[].concat(f,[H$,j])})),function(){x.current!=null&&(x.current.destroy(),x.current=void 0,p(function(b){return lt({},b,{attributes:{},styles:{popper:kv(d)}})}))}},[i,e,t]),g}function U$(e,t,r,n){var s=n&&typeof n!="boolean"?n.capture:n;e.removeEventListener(t,r,s),r.__once&&e.removeEventListener(t,r.__once,s)}function No(e,t,r,n){return $M(e,t,r,n),function(){U$(e,t,r,n)}}var q$=function(){},Y$=q$;const V$=Xt(Y$);function G$(e){return e&&"setState"in e?mu.findDOMNode(e):e??null}const K$=function(e){return Wl(G$(e))};var X$=27,Nv=function(){};function J$(e){return e.button===0}function Q$(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var _v=function(t){return t&&("current"in t?t.current:t)};function Z$(e,t,r){var n=r===void 0?{}:r,s=n.disabled,i=n.clickTrigger,o=i===void 0?"click":i,l=S.useRef(!1),c=t||Nv,d=S.useCallback(function(h){var x,v=_v(e);V$(!!v,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),l.current=!v||Q$(h)||!J$(h)||!!pl(v,(x=h.composedPath==null?void 0:h.composedPath()[0])!=null?x:h.target)},[e]),u=hv(function(h){l.current||c(h)}),f=hv(function(h){h.keyCode===X$&&c(h)});S.useEffect(function(){if(!(s||e==null)){var h=window.event,x=K$(_v(e)),v=No(x,o,d,!0),y=No(x,o,function(p){if(p===h){h=void 0;return}u(p)}),w=No(x,"keyup",function(p){if(p===h){h=void 0;return}f(p)}),g=[];return"ontouchstart"in x.documentElement&&(g=[].slice.call(x.body.children).map(function(p){return No(p,"mousemove",Nv)})),function(){v(),y(),w(),g.forEach(function(p){return p()})}}},[e,s,o,d,u,f])}function eR(e){var t={};return Array.isArray(e)?(e==null||e.forEach(function(r){t[r.name]=r}),t):e||t}function tR(e){return e===void 0&&(e={}),Array.isArray(e)?e:Object.keys(e).map(function(t){return e[t].name=t,e[t]})}function rR(e){var t,r,n,s,i=e.enabled,o=e.enableEvents,l=e.placement,c=e.flip,d=e.offset,u=e.fixed,f=e.containerPadding,h=e.arrowElement,x=e.popperConfig,v=x===void 0?{}:x,y=eR(v.modifiers);return lt({},v,{placement:l,enabled:i,strategy:u?"fixed":v.strategy,modifiers:tR(lt({},y,{eventListeners:{enabled:o},preventOverflow:lt({},y.preventOverflow,{options:f?lt({padding:f},(t=y.preventOverflow)==null?void 0:t.options):(r=y.preventOverflow)==null?void 0:r.options}),offset:{options:lt({offset:d},(n=y.offset)==null?void 0:n.options)},arrow:lt({},y.arrow,{enabled:!!h,options:lt({},(s=y.arrow)==null?void 0:s.options,{element:h})}),flip:lt({enabled:!!c},y.flip)}))})}function nR(e,t){return e.classList?e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function aR(e,t){e.classList?e.classList.add(t):nR(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function Sv(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function sR(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=Sv(e.className,t):e.setAttribute("class",Sv(e.className&&e.className.baseVal||"",t))}var Tc;function Jg(e){if((!Tc&&Tc!==0||e)&&Wg){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Tc=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Tc}var lf=function(t){var r;return typeof document>"u"?null:t==null?Wl().body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),(r=t)!=null&&r.nodeType&&t||null)};function Cv(e,t){var r=S.useState(function(){return lf(e)}),n=r[0],s=r[1];if(!n){var i=lf(e);i&&s(i)}return S.useEffect(function(){},[t,n]),S.useEffect(function(){var o=lf(e);o!==n&&s(o)},[e,n]),n}const Ev=e=>!e||typeof e=="function"?e:t=>{e.current=t};function iR(e,t){const r=Ev(e),n=Ev(t);return s=>{r&&r(s),n&&n(s)}}function oR(e,t){return S.useMemo(()=>iR(e,t),[e,t])}var Qg=$.forwardRef(function(e,t){var r=e.flip,n=e.offset,s=e.placement,i=e.containerPadding,o=i===void 0?5:i,l=e.popperConfig,c=l===void 0?{}:l,d=e.transition,u=fv(),f=u[0],h=u[1],x=fv(),v=x[0],y=x[1],w=oR(h,t),g=Cv(e.container),p=Cv(e.target),j=S.useState(!e.show),b=j[0],N=j[1],C=B$(p,f,rR({placement:s,enableEvents:!!e.show,containerPadding:o||5,flip:r,offset:n,arrowElement:v,popperConfig:c})),E=C.styles,T=C.attributes,O=xu(C,["styles","attributes"]);e.show?b&&N(!1):!e.transition&&!b&&N(!0);var M=function(){N(!0),e.onExited&&e.onExited.apply(e,arguments)},R=e.show||d&&!b;if(Z$(f,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!R)return null;var H=e.children(lt({},O,{show:!!e.show,props:lt({},T.popper,{style:E.popper,ref:w}),arrowProps:lt({},T.arrow,{style:E.arrow,ref:y})}));if(d){var A=e.onExit,L=e.onExiting,ee=e.onEnter,te=e.onEntering,he=e.onEntered;H=$.createElement(d,{in:e.show,appear:!0,onExit:A,onExiting:L,onExited:M,onEnter:ee,onEntering:te,onEntered:he},H)}return g?mu.createPortal(H,g):null});Qg.displayName="Overlay";Qg.propTypes={show:X.bool,placement:X.oneOf(Ug),target:X.any,container:X.any,flip:X.bool,children:X.func.isRequired,containerPadding:X.number,popperConfig:X.object,rootClose:X.bool,rootCloseEvent:X.oneOf(["click","mousedown"]),rootCloseDisabled:X.bool,onHide:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];if(t.rootClose){var i;return(i=X.func).isRequired.apply(i,[t].concat(n))}return X.func.apply(X,[t].concat(n))},transition:X.elementType,onEnter:X.func,onEntering:X.func,onEntered:X.func,onExit:X.func,onExiting:X.func,onExited:X.func};function lR(){this.__data__=[],this.size=0}var cR=lR,dR=Il;function uR(e,t){for(var r=e.length;r--;)if(dR(e[r][0],t))return r;return-1}var Lu=uR,hR=Lu,fR=Array.prototype,mR=fR.splice;function pR(e){var t=this.__data__,r=hR(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():mR.call(t,r,1),--this.size,!0}var gR=pR,xR=Lu;function yR(e){var t=this.__data__,r=xR(t,e);return r<0?void 0:t[r][1]}var vR=yR,bR=Lu;function wR(e){return bR(this.__data__,e)>-1}var jR=wR,kR=Lu;function NR(e,t){var r=this.__data__,n=kR(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var _R=NR,SR=cR,CR=gR,ER=vR,DR=jR,TR=_R;function Hi(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Hi.prototype.clear=SR;Hi.prototype.delete=CR;Hi.prototype.get=ER;Hi.prototype.has=DR;Hi.prototype.set=TR;var Au=Hi,PR=Au;function OR(){this.__data__=new PR,this.size=0}var MR=OR;function $R(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var RR=$R;function LR(e){return this.__data__.get(e)}var AR=LR;function zR(e){return this.__data__.has(e)}var IR=zR,FR=On,HR=FR["__core-js_shared__"],WR=HR,cf=WR,Dv=function(){var e=/[^.]+$/.exec(cf&&cf.keys&&cf.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function BR(e){return!!Dv&&Dv in e}var UR=BR,qR=Function.prototype,YR=qR.toString;function VR(e){if(e!=null){try{return YR.call(e)}catch{}try{return e+""}catch{}}return""}var Zk=VR,GR=zg,KR=UR,XR=ia,JR=Zk,QR=/[\\^$.*+?()[\]{}|]/g,ZR=/^\[object .+?Constructor\]$/,eL=Function.prototype,tL=Object.prototype,rL=eL.toString,nL=tL.hasOwnProperty,aL=RegExp("^"+rL.call(nL).replace(QR,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function sL(e){if(!XR(e)||KR(e))return!1;var t=GR(e)?aL:ZR;return t.test(JR(e))}var iL=sL;function oL(e,t){return e==null?void 0:e[t]}var lL=oL,cL=iL,dL=lL;function uL(e,t){var r=dL(e,t);return cL(r)?r:void 0}var Os=uL,hL=Os,fL=On,mL=hL(fL,"Map"),Zg=mL,pL=Os,gL=pL(Object,"create"),zu=gL,Tv=zu;function xL(){this.__data__=Tv?Tv(null):{},this.size=0}var yL=xL;function vL(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var bL=vL,wL=zu,jL="__lodash_hash_undefined__",kL=Object.prototype,NL=kL.hasOwnProperty;function _L(e){var t=this.__data__;if(wL){var r=t[e];return r===jL?void 0:r}return NL.call(t,e)?t[e]:void 0}var SL=_L,CL=zu,EL=Object.prototype,DL=EL.hasOwnProperty;function TL(e){var t=this.__data__;return CL?t[e]!==void 0:DL.call(t,e)}var PL=TL,OL=zu,ML="__lodash_hash_undefined__";function $L(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=OL&&t===void 0?ML:t,this}var RL=$L,LL=yL,AL=bL,zL=SL,IL=PL,FL=RL;function Wi(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Wi.prototype.clear=LL;Wi.prototype.delete=AL;Wi.prototype.get=zL;Wi.prototype.has=IL;Wi.prototype.set=FL;var HL=Wi,Pv=HL,WL=Au,BL=Zg;function UL(){this.size=0,this.__data__={hash:new Pv,map:new(BL||WL),string:new Pv}}var qL=UL;function YL(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var VL=YL,GL=VL;function KL(e,t){var r=e.__data__;return GL(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Iu=KL,XL=Iu;function JL(e){var t=XL(this,e).delete(e);return this.size-=t?1:0,t}var QL=JL,ZL=Iu;function eA(e){return ZL(this,e).get(e)}var tA=eA,rA=Iu;function nA(e){return rA(this,e).has(e)}var aA=nA,sA=Iu;function iA(e,t){var r=sA(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var oA=iA,lA=qL,cA=QL,dA=tA,uA=aA,hA=oA;function Bi(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Bi.prototype.clear=lA;Bi.prototype.delete=cA;Bi.prototype.get=dA;Bi.prototype.has=uA;Bi.prototype.set=hA;var e0=Bi,fA=Au,mA=Zg,pA=e0,gA=200;function xA(e,t){var r=this.__data__;if(r instanceof fA){var n=r.__data__;if(!mA||n.length<gA-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new pA(n)}return r.set(e,t),this.size=r.size,this}var yA=xA,vA=Au,bA=MR,wA=RR,jA=AR,kA=IR,NA=yA;function Ui(e){var t=this.__data__=new vA(e);this.size=t.size}Ui.prototype.clear=bA;Ui.prototype.delete=wA;Ui.prototype.get=jA;Ui.prototype.has=kA;Ui.prototype.set=NA;var t0=Ui,_A="__lodash_hash_undefined__";function SA(e){return this.__data__.set(e,_A),this}var CA=SA;function EA(e){return this.__data__.has(e)}var DA=EA,TA=e0,PA=CA,OA=DA;function Fd(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new TA;++t<r;)this.add(e[t])}Fd.prototype.add=Fd.prototype.push=PA;Fd.prototype.has=OA;var MA=Fd;function $A(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var RA=$A;function LA(e,t){return e.has(t)}var AA=LA,zA=MA,IA=RA,FA=AA,HA=1,WA=2;function BA(e,t,r,n,s,i){var o=r&HA,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var d=i.get(e),u=i.get(t);if(d&&u)return d==t&&u==e;var f=-1,h=!0,x=r&WA?new zA:void 0;for(i.set(e,t),i.set(t,e);++f<l;){var v=e[f],y=t[f];if(n)var w=o?n(y,v,f,t,e,i):n(v,y,f,e,t,i);if(w!==void 0){if(w)continue;h=!1;break}if(x){if(!IA(t,function(g,p){if(!FA(x,p)&&(v===g||s(v,g,r,n,i)))return x.push(p)})){h=!1;break}}else if(!(v===y||s(v,y,r,n,i))){h=!1;break}}return i.delete(e),i.delete(t),h}var eN=BA,UA=On,qA=UA.Uint8Array,tN=qA;function YA(e){var t=-1,r=Array(e.size);return e.forEach(function(n,s){r[++t]=[s,n]}),r}var VA=YA;function GA(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var KA=GA,Ov=Ii,Mv=tN,XA=Il,JA=eN,QA=VA,ZA=KA,e7=1,t7=2,r7="[object Boolean]",n7="[object Date]",a7="[object Error]",s7="[object Map]",i7="[object Number]",o7="[object RegExp]",l7="[object Set]",c7="[object String]",d7="[object Symbol]",u7="[object ArrayBuffer]",h7="[object DataView]",$v=Ov?Ov.prototype:void 0,df=$v?$v.valueOf:void 0;function f7(e,t,r,n,s,i,o){switch(r){case h7:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case u7:return!(e.byteLength!=t.byteLength||!i(new Mv(e),new Mv(t)));case r7:case n7:case i7:return XA(+e,+t);case a7:return e.name==t.name&&e.message==t.message;case o7:case c7:return e==t+"";case s7:var l=QA;case l7:var c=n&e7;if(l||(l=ZA),e.size!=t.size&&!c)return!1;var d=o.get(e);if(d)return d==t;n|=t7,o.set(e,t);var u=JA(l(e),l(t),n,s,i,o);return o.delete(e),u;case d7:if(df)return df.call(e)==df.call(t)}return!1}var m7=f7;function p7(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e}var r0=p7,g7=Array.isArray,qr=g7,x7=r0,y7=qr;function v7(e,t,r){var n=t(e);return y7(e)?n:x7(n,r(e))}var rN=v7;function b7(e,t){for(var r=-1,n=e==null?0:e.length,s=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[s++]=o)}return i}var w7=b7;function j7(){return[]}var nN=j7,k7=w7,N7=nN,_7=Object.prototype,S7=_7.propertyIsEnumerable,Rv=Object.getOwnPropertySymbols,C7=Rv?function(e){return e==null?[]:(e=Object(e),k7(Rv(e),function(t){return S7.call(e,t)}))}:N7,n0=C7;function E7(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var D7=E7,T7=Fi,P7=Ba,O7="[object Arguments]";function M7(e){return P7(e)&&T7(e)==O7}var $7=M7,Lv=$7,R7=Ba,aN=Object.prototype,L7=aN.hasOwnProperty,A7=aN.propertyIsEnumerable,z7=Lv(function(){return arguments}())?Lv:function(e){return R7(e)&&L7.call(e,"callee")&&!A7.call(e,"callee")},a0=z7,Hd={exports:{}};function I7(){return!1}var F7=I7;Hd.exports;(function(e,t){var r=On,n=F7,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||n;e.exports=d})(Hd,Hd.exports);var Fu=Hd.exports,H7=Fi,W7=Ig,B7=Ba,U7="[object Arguments]",q7="[object Array]",Y7="[object Boolean]",V7="[object Date]",G7="[object Error]",K7="[object Function]",X7="[object Map]",J7="[object Number]",Q7="[object Object]",Z7="[object RegExp]",ez="[object Set]",tz="[object String]",rz="[object WeakMap]",nz="[object ArrayBuffer]",az="[object DataView]",sz="[object Float32Array]",iz="[object Float64Array]",oz="[object Int8Array]",lz="[object Int16Array]",cz="[object Int32Array]",dz="[object Uint8Array]",uz="[object Uint8ClampedArray]",hz="[object Uint16Array]",fz="[object Uint32Array]",Qe={};Qe[sz]=Qe[iz]=Qe[oz]=Qe[lz]=Qe[cz]=Qe[dz]=Qe[uz]=Qe[hz]=Qe[fz]=!0;Qe[U7]=Qe[q7]=Qe[nz]=Qe[Y7]=Qe[az]=Qe[V7]=Qe[G7]=Qe[K7]=Qe[X7]=Qe[J7]=Qe[Q7]=Qe[Z7]=Qe[ez]=Qe[tz]=Qe[rz]=!1;function mz(e){return B7(e)&&W7(e.length)&&!!Qe[H7(e)]}var pz=mz;function gz(e){return function(t){return e(t)}}var Hu=gz,Wd={exports:{}};Wd.exports;(function(e,t){var r=Lk,n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===n,o=i&&r.process,l=function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(Wd,Wd.exports);var s0=Wd.exports,xz=pz,yz=Hu,Av=s0,zv=Av&&Av.isTypedArray,vz=zv?yz(zv):xz,i0=vz,bz=D7,wz=a0,jz=qr,kz=Fu,Nz=Fg,_z=i0,Sz=Object.prototype,Cz=Sz.hasOwnProperty;function Ez(e,t){var r=jz(e),n=!r&&wz(e),s=!r&&!n&&kz(e),i=!r&&!n&&!s&&_z(e),o=r||n||s||i,l=o?bz(e.length,String):[],c=l.length;for(var d in e)(t||Cz.call(e,d))&&!(o&&(d=="length"||s&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Nz(d,c)))&&l.push(d);return l}var sN=Ez,Dz=Object.prototype;function Tz(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Dz;return e===r}var o0=Tz;function Pz(e,t){return function(r){return e(t(r))}}var iN=Pz,Oz=iN,Mz=Oz(Object.keys,Object),$z=Mz,Rz=o0,Lz=$z,Az=Object.prototype,zz=Az.hasOwnProperty;function Iz(e){if(!Rz(e))return Lz(e);var t=[];for(var r in Object(e))zz.call(e,r)&&r!="constructor"&&t.push(r);return t}var Fz=Iz,Hz=sN,Wz=Fz,Bz=Fl;function Uz(e){return Bz(e)?Hz(e):Wz(e)}var ql=Uz,qz=rN,Yz=n0,Vz=ql;function Gz(e){return qz(e,Vz,Yz)}var oN=Gz,Iv=oN,Kz=1,Xz=Object.prototype,Jz=Xz.hasOwnProperty;function Qz(e,t,r,n,s,i){var o=r&Kz,l=Iv(e),c=l.length,d=Iv(t),u=d.length;if(c!=u&&!o)return!1;for(var f=c;f--;){var h=l[f];if(!(o?h in t:Jz.call(t,h)))return!1}var x=i.get(e),v=i.get(t);if(x&&v)return x==t&&v==e;var y=!0;i.set(e,t),i.set(t,e);for(var w=o;++f<c;){h=l[f];var g=e[h],p=t[h];if(n)var j=o?n(p,g,h,t,e,i):n(g,p,h,e,t,i);if(!(j===void 0?g===p||s(g,p,r,n,i):j)){y=!1;break}w||(w=h=="constructor")}if(y&&!w){var b=e.constructor,N=t.constructor;b!=N&&"constructor"in e&&"constructor"in t&&!(typeof b=="function"&&b instanceof b&&typeof N=="function"&&N instanceof N)&&(y=!1)}return i.delete(e),i.delete(t),y}var Zz=Qz,e8=Os,t8=On,r8=e8(t8,"DataView"),n8=r8,a8=Os,s8=On,i8=a8(s8,"Promise"),o8=i8,l8=Os,c8=On,d8=l8(c8,"Set"),u8=d8,h8=Os,f8=On,m8=h8(f8,"WeakMap"),p8=m8,qm=n8,Ym=Zg,Vm=o8,Gm=u8,Km=p8,lN=Fi,qi=Zk,Fv="[object Map]",g8="[object Object]",Hv="[object Promise]",Wv="[object Set]",Bv="[object WeakMap]",Uv="[object DataView]",x8=qi(qm),y8=qi(Ym),v8=qi(Vm),b8=qi(Gm),w8=qi(Km),Za=lN;(qm&&Za(new qm(new ArrayBuffer(1)))!=Uv||Ym&&Za(new Ym)!=Fv||Vm&&Za(Vm.resolve())!=Hv||Gm&&Za(new Gm)!=Wv||Km&&Za(new Km)!=Bv)&&(Za=function(e){var t=lN(e),r=t==g8?e.constructor:void 0,n=r?qi(r):"";if(n)switch(n){case x8:return Uv;case y8:return Fv;case v8:return Hv;case b8:return Wv;case w8:return Bv}return t});var Wu=Za,uf=t0,j8=eN,k8=m7,N8=Zz,qv=Wu,Yv=qr,Vv=Fu,_8=i0,S8=1,Gv="[object Arguments]",Kv="[object Array]",Pc="[object Object]",C8=Object.prototype,Xv=C8.hasOwnProperty;function E8(e,t,r,n,s,i){var o=Yv(e),l=Yv(t),c=o?Kv:qv(e),d=l?Kv:qv(t);c=c==Gv?Pc:c,d=d==Gv?Pc:d;var u=c==Pc,f=d==Pc,h=c==d;if(h&&Vv(e)){if(!Vv(t))return!1;o=!0,u=!1}if(h&&!u)return i||(i=new uf),o||_8(e)?j8(e,t,r,n,s,i):k8(e,t,c,r,n,s,i);if(!(r&S8)){var x=u&&Xv.call(e,"__wrapped__"),v=f&&Xv.call(t,"__wrapped__");if(x||v){var y=x?e.value():e,w=v?t.value():t;return i||(i=new uf),s(y,w,r,n,i)}}return h?(i||(i=new uf),N8(e,t,r,n,s,i)):!1}var D8=E8,T8=D8,Jv=Ba;function cN(e,t,r,n,s){return e===t?!0:e==null||t==null||!Jv(e)&&!Jv(t)?e!==e&&t!==t:T8(e,t,r,n,cN,s)}var l0=cN,P8=l0;function O8(e,t){return P8(e,t)}var M8=O8;const $8=Xt(M8);function hf(e,t){var r=Hg(e);return r?r.innerHeight:hs(e).height}function dN(e,t,r){e.closest&&!r&&e.closest(t);var n=e;do{if(PM(n,t))return n;n=n.parentElement}while(n&&n!==r&&n.nodeType===document.ELEMENT_NODE);return null}function R8(e,t,r,n){for(var s=e.length,i=r+(n?1:-1);n?i--:++i<s;)if(t(e[i],i,e))return i;return-1}var L8=R8,A8=t0,z8=l0,I8=1,F8=2;function H8(e,t,r,n){var s=r.length,i=s,o=!n;if(e==null)return!i;for(e=Object(e);s--;){var l=r[s];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<i;){l=r[s];var c=l[0],d=e[c],u=l[1];if(o&&l[2]){if(d===void 0&&!(c in e))return!1}else{var f=new A8;if(n)var h=n(d,u,c,e,t,f);if(!(h===void 0?z8(u,d,I8|F8,n,f):h))return!1}}return!0}var W8=H8,B8=ia;function U8(e){return e===e&&!B8(e)}var uN=U8,q8=uN,Y8=ql;function V8(e){for(var t=Y8(e),r=t.length;r--;){var n=t[r],s=e[n];t[r]=[n,s,q8(s)]}return t}var G8=V8;function K8(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var hN=K8,X8=W8,J8=G8,Q8=hN;function Z8(e){var t=J8(e);return t.length==1&&t[0][2]?Q8(t[0][0],t[0][1]):function(r){return r===e||X8(r,e,t)}}var eI=Z8,tI=qr,rI=Hl,nI=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,aI=/^\w*$/;function sI(e,t){if(tI(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||rI(e)?!0:aI.test(e)||!nI.test(e)||t!=null&&e in Object(t)}var c0=sI,fN=e0,iI="Expected a function";function d0(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(iI);var r=function(){var n=arguments,s=t?t.apply(this,n):n[0],i=r.cache;if(i.has(s))return i.get(s);var o=e.apply(this,n);return r.cache=i.set(s,o)||i,o};return r.cache=new(d0.Cache||fN),r}d0.Cache=fN;var oI=d0,lI=oI,cI=500;function dI(e){var t=lI(e,function(n){return r.size===cI&&r.clear(),n}),r=t.cache;return t}var uI=dI,hI=uI,fI=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,mI=/\\(\\)?/g,pI=hI(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(fI,function(r,n,s,i){t.push(s?i.replace(mI,"$1"):n||r)}),t}),gI=pI;function xI(e,t){for(var r=-1,n=e==null?0:e.length,s=Array(n);++r<n;)s[r]=t(e[r],r,e);return s}var u0=xI,Qv=Ii,yI=u0,vI=qr,bI=Hl,Zv=Qv?Qv.prototype:void 0,eb=Zv?Zv.toString:void 0;function mN(e){if(typeof e=="string")return e;if(vI(e))return yI(e,mN)+"";if(bI(e))return eb?eb.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var wI=mN,jI=wI;function kI(e){return e==null?"":jI(e)}var NI=kI,_I=qr,SI=c0,CI=gI,EI=NI;function DI(e,t){return _I(e)?e:SI(e,t)?[e]:CI(EI(e))}var Bu=DI,TI=Hl;function PI(e){if(typeof e=="string"||TI(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Yl=PI,OI=Bu,MI=Yl;function $I(e,t){t=OI(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[MI(t[r++])];return r&&r==n?e:void 0}var Uu=$I,RI=Uu;function LI(e,t,r){var n=e==null?void 0:RI(e,t);return n===void 0?r:n}var AI=LI;function zI(e,t){return e!=null&&t in Object(e)}var II=zI,FI=Bu,HI=a0,WI=qr,BI=Fg,UI=Ig,qI=Yl;function YI(e,t,r){t=FI(t,e);for(var n=-1,s=t.length,i=!1;++n<s;){var o=qI(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=s?i:(s=e==null?0:e.length,!!s&&UI(s)&&BI(o,s)&&(WI(e)||HI(e)))}var VI=YI,GI=II,KI=VI;function XI(e,t){return e!=null&&KI(e,t,GI)}var JI=XI,QI=l0,ZI=AI,e9=JI,t9=c0,r9=uN,n9=hN,a9=Yl,s9=1,i9=2;function o9(e,t){return t9(e)&&r9(t)?n9(a9(e),t):function(r){var n=ZI(r,e);return n===void 0&&n===t?e9(r,e):QI(t,n,s9|i9)}}var l9=o9;function c9(e){return e}var qu=c9;function d9(e){return function(t){return t==null?void 0:t[e]}}var u9=d9,h9=Uu;function f9(e){return function(t){return h9(t,e)}}var m9=f9,p9=u9,g9=m9,x9=c0,y9=Yl;function v9(e){return x9(e)?p9(y9(e)):g9(e)}var b9=v9,w9=eI,j9=l9,k9=qu,N9=qr,_9=b9;function S9(e){return typeof e=="function"?e:e==null?k9:typeof e=="object"?N9(e)?j9(e[0],e[1]):w9(e):_9(e)}var Yu=S9,C9=L8,E9=Yu,D9=Ik,T9=Math.max;function P9(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var s=r==null?0:D9(r);return s<0&&(s=T9(n+s,0)),C9(e,E9(t),s)}var O9=P9;const M9=Xt(O9);var $9=Math.ceil,R9=Math.max;function L9(e,t,r,n){for(var s=-1,i=R9($9((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++s]=e,e+=r;return o}var A9=L9,z9=A9,I9=$u,ff=zk;function F9(e){return function(t,r,n){return n&&typeof n!="number"&&I9(t,r,n)&&(r=n=void 0),t=ff(t),r===void 0?(r=t,t=0):r=ff(r),n=n===void 0?t<r?1:-1:ff(n),z9(t,r,n,e)}}var H9=F9,W9=H9,B9=W9(),U9=B9;const q9=Xt(U9);var tb=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function Y9(e,t){return!!(e===t||tb(e)&&tb(t))}function V9(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!Y9(e[r],t[r]))return!1;return!0}function pN(e,t){t===void 0&&(t=V9);var r=null;function n(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];if(r&&r.lastThis===this&&t(s,r.lastArgs))return r.lastResult;var o=e.apply(this,s);return r={lastResult:o,lastArgs:s,lastThis:this},o}return n.clear=function(){r=null},n}function Xm(e,t){var r=Hg(e);return r?r.innerWidth:t?e.clientWidth:hs(e).width}var rb=Ii,G9=a0,K9=qr,nb=rb?rb.isConcatSpreadable:void 0;function X9(e){return K9(e)||G9(e)||!!(nb&&e&&e[nb])}var J9=X9,Q9=r0,Z9=J9;function gN(e,t,r,n,s){var i=-1,o=e.length;for(r||(r=Z9),s||(s=[]);++i<o;){var l=e[i];t>0&&r(l)?t>1?gN(l,t-1,r,n,s):Q9(s,l):n||(s[s.length]=l)}return s}var xN=gN;function eF(e){return function(t,r,n){for(var s=-1,i=Object(t),o=n(t),l=o.length;l--;){var c=o[e?l:++s];if(r(i[c],c,i)===!1)break}return t}}var tF=eF,rF=tF,nF=rF(),aF=nF,sF=aF,iF=ql;function oF(e,t){return e&&sF(e,t,iF)}var h0=oF,lF=Fl;function cF(e,t){return function(r,n){if(r==null)return r;if(!lF(r))return e(r,n);for(var s=r.length,i=t?s:-1,o=Object(r);(t?i--:++i<s)&&n(o[i],i,o)!==!1;);return r}}var dF=cF,uF=h0,hF=dF,fF=hF(uF),mF=fF,pF=mF,gF=Fl;function xF(e,t){var r=-1,n=gF(e)?Array(e.length):[];return pF(e,function(s,i,o){n[++r]=t(s,i,o)}),n}var yF=xF;function vF(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var bF=vF,ab=Hl;function wF(e,t){if(e!==t){var r=e!==void 0,n=e===null,s=e===e,i=ab(e),o=t!==void 0,l=t===null,c=t===t,d=ab(t);if(!l&&!d&&!i&&e>t||i&&o&&c&&!l&&!d||n&&o&&c||!r&&c||!s)return 1;if(!n&&!i&&!d&&e<t||d&&r&&s&&!n&&!i||l&&r&&s||!o&&s||!c)return-1}return 0}var jF=wF,kF=jF;function NF(e,t,r){for(var n=-1,s=e.criteria,i=t.criteria,o=s.length,l=r.length;++n<o;){var c=kF(s[n],i[n]);if(c){if(n>=l)return c;var d=r[n];return c*(d=="desc"?-1:1)}}return e.index-t.index}var _F=NF,mf=u0,SF=Uu,CF=Yu,EF=yF,DF=bF,TF=Hu,PF=_F,OF=qu,MF=qr;function $F(e,t,r){t.length?t=mf(t,function(i){return MF(i)?function(o){return SF(o,i.length===1?i[0]:i)}:i}):t=[OF];var n=-1;t=mf(t,TF(CF));var s=EF(e,function(i,o,l){var c=mf(t,function(d){return d(i)});return{criteria:c,index:++n,value:i}});return DF(s,function(i,o){return PF(i,o,r)})}var RF=$F;function LF(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var AF=LF,zF=AF,sb=Math.max;function IF(e,t,r){return t=sb(t===void 0?e.length-1:t,0),function(){for(var n=arguments,s=-1,i=sb(n.length-t,0),o=Array(i);++s<i;)o[s]=n[t+s];s=-1;for(var l=Array(t+1);++s<t;)l[s]=n[s];return l[t]=r(o),zF(e,this,l)}}var yN=IF;function FF(e){return function(){return e}}var HF=FF,WF=Os,BF=function(){try{var e=WF(Object,"defineProperty");return e({},"",{}),e}catch{}}(),vN=BF,UF=HF,ib=vN,qF=qu,YF=ib?function(e,t){return ib(e,"toString",{configurable:!0,enumerable:!1,value:UF(t),writable:!0})}:qF,VF=YF,GF=800,KF=16,XF=Date.now;function JF(e){var t=0,r=0;return function(){var n=XF(),s=KF-(n-r);if(r=n,s>0){if(++t>=GF)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var QF=JF,ZF=VF,eH=QF,tH=eH(ZF),bN=tH,rH=qu,nH=yN,aH=bN;function sH(e,t){return aH(nH(e,t,rH),e+"")}var wN=sH,iH=xN,oH=RF,lH=wN,ob=$u,cH=lH(function(e,t){if(e==null)return[];var r=t.length;return r>1&&ob(e,t[0],t[1])?t=[]:r>2&&ob(t[0],t[1],t[2])&&(t=[t[0]]),oH(e,iH(t,1),[])}),dH=cH;const uH=Xt(dH);function jN(e){return bk(e)||$k(e)||Rg(e)||wk()}function hH(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var fH=hH,mH=ia,pH=o0,gH=fH,xH=Object.prototype,yH=xH.hasOwnProperty;function vH(e){if(!mH(e))return gH(e);var t=pH(e),r=[];for(var n in e)n=="constructor"&&(t||!yH.call(e,n))||r.push(n);return r}var bH=vH,wH=sN,jH=bH,kH=Fl;function NH(e){return kH(e)?wH(e,!0):jH(e)}var Vu=NH,_H=wN,SH=Il,CH=$u,EH=Vu,kN=Object.prototype,DH=kN.hasOwnProperty,TH=_H(function(e,t){e=Object(e);var r=-1,n=t.length,s=n>2?t[2]:void 0;for(s&&CH(t[0],t[1],s)&&(n=1);++r<n;)for(var i=t[r],o=EH(i),l=-1,c=o.length;++l<c;){var d=o[l],u=e[d];(u===void 0||SH(u,kN[d])&&!DH.call(e,d))&&(e[d]=i[d])}return e}),PH=TH;const OH=Xt(PH);var lb=vN;function MH(e,t,r){t=="__proto__"&&lb?lb(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var f0=MH,$H=f0,RH=h0,LH=Yu;function AH(e,t){var r={};return t=LH(t),RH(e,function(n,s,i){$H(r,s,t(n,s,i))}),r}var zH=AH;const IH=Xt(zH);function FH(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var NN=FH,HH=f0,WH=Il,BH=Object.prototype,UH=BH.hasOwnProperty;function qH(e,t,r){var n=e[t];(!(UH.call(e,t)&&WH(n,r))||r===void 0&&!(t in e))&&HH(e,t,r)}var _N=qH,YH=_N,VH=f0;function GH(e,t,r,n){var s=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var l=t[i],c=n?n(r[l],e[l],l,r,e):void 0;c===void 0&&(c=e[l]),s?VH(r,l,c):YH(r,l,c)}return r}var Vl=GH,KH=Vl,XH=ql;function JH(e,t){return e&&KH(t,XH(t),e)}var QH=JH,ZH=Vl,eW=Vu;function tW(e,t){return e&&ZH(t,eW(t),e)}var rW=tW,Bd={exports:{}};Bd.exports;(function(e,t){var r=On,n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===n,o=i?r.Buffer:void 0,l=o?o.allocUnsafe:void 0;function c(d,u){if(u)return d.slice();var f=d.length,h=l?l(f):new d.constructor(f);return d.copy(h),h}e.exports=c})(Bd,Bd.exports);var nW=Bd.exports;function aW(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var sW=aW,iW=Vl,oW=n0;function lW(e,t){return iW(e,oW(e),t)}var cW=lW,dW=iN,uW=dW(Object.getPrototypeOf,Object),Gu=uW,hW=r0,fW=Gu,mW=n0,pW=nN,gW=Object.getOwnPropertySymbols,xW=gW?function(e){for(var t=[];e;)hW(t,mW(e)),e=fW(e);return t}:pW,SN=xW,yW=Vl,vW=SN;function bW(e,t){return yW(e,vW(e),t)}var wW=bW,jW=rN,kW=SN,NW=Vu;function _W(e){return jW(e,NW,kW)}var CN=_W,SW=Object.prototype,CW=SW.hasOwnProperty;function EW(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&CW.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var DW=EW,cb=tN;function TW(e){var t=new e.constructor(e.byteLength);return new cb(t).set(new cb(e)),t}var m0=TW,PW=m0;function OW(e,t){var r=t?PW(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var MW=OW,$W=/\w*$/;function RW(e){var t=new e.constructor(e.source,$W.exec(e));return t.lastIndex=e.lastIndex,t}var LW=RW,db=Ii,ub=db?db.prototype:void 0,hb=ub?ub.valueOf:void 0;function AW(e){return hb?Object(hb.call(e)):{}}var zW=AW,IW=m0;function FW(e,t){var r=t?IW(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var HW=FW,WW=m0,BW=MW,UW=LW,qW=zW,YW=HW,VW="[object Boolean]",GW="[object Date]",KW="[object Map]",XW="[object Number]",JW="[object RegExp]",QW="[object Set]",ZW="[object String]",eB="[object Symbol]",tB="[object ArrayBuffer]",rB="[object DataView]",nB="[object Float32Array]",aB="[object Float64Array]",sB="[object Int8Array]",iB="[object Int16Array]",oB="[object Int32Array]",lB="[object Uint8Array]",cB="[object Uint8ClampedArray]",dB="[object Uint16Array]",uB="[object Uint32Array]";function hB(e,t,r){var n=e.constructor;switch(t){case tB:return WW(e);case VW:case GW:return new n(+e);case rB:return BW(e,r);case nB:case aB:case sB:case iB:case oB:case lB:case cB:case dB:case uB:return YW(e,r);case KW:return new n;case XW:case ZW:return new n(e);case JW:return UW(e);case QW:return new n;case eB:return qW(e)}}var fB=hB,mB=ia,fb=Object.create,pB=function(){function e(){}return function(t){if(!mB(t))return{};if(fb)return fb(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),EN=pB,gB=EN,xB=Gu,yB=o0;function vB(e){return typeof e.constructor=="function"&&!yB(e)?gB(xB(e)):{}}var bB=vB,wB=Wu,jB=Ba,kB="[object Map]";function NB(e){return jB(e)&&wB(e)==kB}var _B=NB,SB=_B,CB=Hu,mb=s0,pb=mb&&mb.isMap,EB=pb?CB(pb):SB,DB=EB,TB=Wu,PB=Ba,OB="[object Set]";function MB(e){return PB(e)&&TB(e)==OB}var $B=MB,RB=$B,LB=Hu,gb=s0,xb=gb&&gb.isSet,AB=xb?LB(xb):RB,zB=AB,IB=t0,FB=NN,HB=_N,WB=QH,BB=rW,UB=nW,qB=sW,YB=cW,VB=wW,GB=oN,KB=CN,XB=Wu,JB=DW,QB=fB,ZB=bB,eU=qr,tU=Fu,rU=DB,nU=ia,aU=zB,sU=ql,iU=Vu,oU=1,lU=2,cU=4,DN="[object Arguments]",dU="[object Array]",uU="[object Boolean]",hU="[object Date]",fU="[object Error]",TN="[object Function]",mU="[object GeneratorFunction]",pU="[object Map]",gU="[object Number]",PN="[object Object]",xU="[object RegExp]",yU="[object Set]",vU="[object String]",bU="[object Symbol]",wU="[object WeakMap]",jU="[object ArrayBuffer]",kU="[object DataView]",NU="[object Float32Array]",_U="[object Float64Array]",SU="[object Int8Array]",CU="[object Int16Array]",EU="[object Int32Array]",DU="[object Uint8Array]",TU="[object Uint8ClampedArray]",PU="[object Uint16Array]",OU="[object Uint32Array]",Ke={};Ke[DN]=Ke[dU]=Ke[jU]=Ke[kU]=Ke[uU]=Ke[hU]=Ke[NU]=Ke[_U]=Ke[SU]=Ke[CU]=Ke[EU]=Ke[pU]=Ke[gU]=Ke[PN]=Ke[xU]=Ke[yU]=Ke[vU]=Ke[bU]=Ke[DU]=Ke[TU]=Ke[PU]=Ke[OU]=!0;Ke[fU]=Ke[TN]=Ke[wU]=!1;function td(e,t,r,n,s,i){var o,l=t&oU,c=t&lU,d=t&cU;if(r&&(o=s?r(e,n,s,i):r(e)),o!==void 0)return o;if(!nU(e))return e;var u=eU(e);if(u){if(o=JB(e),!l)return qB(e,o)}else{var f=XB(e),h=f==TN||f==mU;if(tU(e))return UB(e,l);if(f==PN||f==DN||h&&!s){if(o=c||h?{}:ZB(e),!l)return c?VB(e,BB(o,e)):YB(e,WB(o,e))}else{if(!Ke[f])return s?e:{};o=QB(e,f,l)}}i||(i=new IB);var x=i.get(e);if(x)return x;i.set(e,o),aU(e)?e.forEach(function(w){o.add(td(w,t,r,w,e,i))}):rU(e)&&e.forEach(function(w,g){o.set(g,td(w,t,r,g,e,i))});var v=d?c?KB:GB:c?iU:sU,y=u?void 0:v(e);return FB(y||e,function(w,g){y&&(g=w,w=e[g]),HB(o,g,td(w,t,r,g,e,i))}),o}var MU=td;function $U(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var RU=$U,LU=Uu,AU=Rk;function zU(e,t){return t.length<2?e:LU(e,AU(t,0,-1))}var IU=zU,FU=Bu,HU=RU,WU=IU,BU=Yl;function UU(e,t){return t=FU(t,e),e=WU(e,t),e==null||delete e[BU(HU(t))]}var qU=UU,YU=Fi,VU=Gu,GU=Ba,KU="[object Object]",XU=Function.prototype,JU=Object.prototype,ON=XU.toString,QU=JU.hasOwnProperty,ZU=ON.call(Object);function eq(e){if(!GU(e)||YU(e)!=KU)return!1;var t=VU(e);if(t===null)return!0;var r=QU.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&ON.call(r)==ZU}var tq=eq,rq=tq;function nq(e){return rq(e)?void 0:e}var aq=nq,sq=xN;function iq(e){var t=e==null?0:e.length;return t?sq(e,1):[]}var oq=iq,lq=oq,cq=yN,dq=bN;function uq(e){return dq(cq(e,void 0,lq),e+"")}var hq=uq,fq=u0,mq=MU,pq=qU,gq=Bu,xq=Vl,yq=aq,vq=hq,bq=CN,wq=1,jq=2,kq=4,Nq=vq(function(e,t){var r={};if(e==null)return r;var n=!1;t=fq(t,function(i){return i=gq(i,e),n||(n=i.length>1),i}),xq(e,bq(e),r),n&&(r=mq(r,wq|jq|kq,yq));for(var s=t.length;s--;)pq(r,t[s]);return r}),_q=Nq;const Sq=Xt(_q);var Cq=NN,Eq=EN,Dq=h0,Tq=Yu,Pq=Gu,Oq=qr,Mq=Fu,$q=zg,Rq=ia,Lq=i0;function Aq(e,t,r){var n=Oq(e),s=n||Mq(e)||Lq(e);if(t=Tq(t),r==null){var i=e&&e.constructor;s?r=n?new i:[]:Rq(e)?r=$q(i)?Eq(Pq(e)):{}:r={}}return(s?Cq:Dq)(e,function(o,l,c){return t(r,o,l,c)}),r}var zq=Aq;const Iq=Xt(zq);var Fq={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(cr,function(){return function(r,n,s){n.prototype.isBetween=function(i,o,l,c){var d=s(i),u=s(o),f=(c=c||"()")[0]==="(",h=c[1]===")";return(f?this.isAfter(d,l):!this.isBefore(d,l))&&(h?this.isBefore(u,l):!this.isAfter(u,l))||(f?this.isBefore(d,l):!this.isAfter(d,l))&&(h?this.isAfter(u,l):!this.isBefore(u,l))}}})})(Fq);var Hq={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(cr,function(){return function(r,n){n.prototype.isSameOrAfter=function(s,i){return this.isSame(s,i)||this.isAfter(s,i)}}})})(Hq);var Wq={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(cr,function(){return function(r,n){n.prototype.isSameOrBefore=function(s,i){return this.isSame(s,i)||this.isBefore(s,i)}}})})(Wq);var Bq={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(cr,function(){return function(r,n,s){var i=n.prototype,o=function(f){return f&&(f.indexOf?f:f.s)},l=function(f,h,x,v,y){var w=f.name?f:f.$locale(),g=o(w[h]),p=o(w[x]),j=g||p.map(function(N){return N.slice(0,v)});if(!y)return j;var b=w.weekStart;return j.map(function(N,C){return j[(C+(b||0))%7]})},c=function(){return s.Ls[s.locale()]},d=function(f,h){return f.formats[h]||function(x){return x.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(v,y,w){return y||w.slice(1)})}(f.formats[h.toUpperCase()])},u=function(){var f=this;return{months:function(h){return h?h.format("MMMM"):l(f,"months")},monthsShort:function(h){return h?h.format("MMM"):l(f,"monthsShort","months",3)},firstDayOfWeek:function(){return f.$locale().weekStart||0},weekdays:function(h){return h?h.format("dddd"):l(f,"weekdays")},weekdaysMin:function(h){return h?h.format("dd"):l(f,"weekdaysMin","weekdays",2)},weekdaysShort:function(h){return h?h.format("ddd"):l(f,"weekdaysShort","weekdays",3)},longDateFormat:function(h){return d(f.$locale(),h)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};i.localeData=function(){return u.bind(this)()},s.localeData=function(){var f=c();return{firstDayOfWeek:function(){return f.weekStart||0},weekdays:function(){return s.weekdays()},weekdaysShort:function(){return s.weekdaysShort()},weekdaysMin:function(){return s.weekdaysMin()},months:function(){return s.months()},monthsShort:function(){return s.monthsShort()},longDateFormat:function(h){return d(f,h)},meridiem:f.meridiem,ordinal:f.ordinal}},s.months=function(){return l(c(),"months")},s.monthsShort=function(){return l(c(),"monthsShort","months",3)},s.weekdays=function(f){return l(c(),"weekdays",null,null,f)},s.weekdaysShort=function(f){return l(c(),"weekdaysShort","weekdays",3,f)},s.weekdaysMin=function(f){return l(c(),"weekdaysMin","weekdays",2,f)}}})})(Bq);var Uq={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(cr,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(n,s,i){var o=s.prototype,l=o.format;i.en.formats=r,o.format=function(c){c===void 0&&(c="YYYY-MM-DDTHH:mm:ssZ");var d=this.$locale().formats,u=function(f,h){return f.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(x,v,y){var w=y&&y.toUpperCase();return v||h[y]||r[y]||h[w].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(g,p,j){return p||j.slice(1)})})}(c,d===void 0?{}:d);return l.call(this,u)}}})})(Uq);var qq={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(cr,function(){return function(r,n,s){var i=function(o,l){if(!l||!l.length||l.length===1&&!l[0]||l.length===1&&Array.isArray(l[0])&&!l[0].length)return null;var c;l.length===1&&l[0].length>0&&(l=l[0]),c=(l=l.filter(function(u){return u}))[0];for(var d=1;d<l.length;d+=1)l[d].isValid()&&!l[d][o](c)||(c=l[d]);return c};s.max=function(){var o=[].slice.call(arguments,0);return i("isAfter",o)},s.min=function(){var o=[].slice.call(arguments,0);return i("isBefore",o)}}})})(qq);var Yq={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(cr,function(){var r="minute",n=/[+-]\d\d(?::?\d\d)?/g,s=/([+-]|\d\d)/g;return function(i,o,l){var c=o.prototype;l.utc=function(y){var w={date:y,utc:!0,args:arguments};return new o(w)},c.utc=function(y){var w=l(this.toDate(),{locale:this.$L,utc:!0});return y?w.add(this.utcOffset(),r):w},c.local=function(){return l(this.toDate(),{locale:this.$L,utc:!1})};var d=c.parse;c.parse=function(y){y.utc&&(this.$u=!0),this.$utils().u(y.$offset)||(this.$offset=y.$offset),d.call(this,y)};var u=c.init;c.init=function(){if(this.$u){var y=this.$d;this.$y=y.getUTCFullYear(),this.$M=y.getUTCMonth(),this.$D=y.getUTCDate(),this.$W=y.getUTCDay(),this.$H=y.getUTCHours(),this.$m=y.getUTCMinutes(),this.$s=y.getUTCSeconds(),this.$ms=y.getUTCMilliseconds()}else u.call(this)};var f=c.utcOffset;c.utcOffset=function(y,w){var g=this.$utils().u;if(g(y))return this.$u?0:g(this.$offset)?f.call(this):this.$offset;if(typeof y=="string"&&(y=function(N){N===void 0&&(N="");var C=N.match(n);if(!C)return null;var E=(""+C[0]).match(s)||["-",0,0],T=E[0],O=60*+E[1]+ +E[2];return O===0?0:T==="+"?O:-O}(y),y===null))return this;var p=Math.abs(y)<=16?60*y:y;if(p===0)return this.utc(w);var j=this.clone();if(w)return j.$offset=p,j.$u=!1,j;var b=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(j=this.local().add(p+b,r)).$offset=p,j.$x.$localOffset=b,j};var h=c.format;c.format=function(y){var w=y||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return h.call(this,w)},c.valueOf=function(){var y=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*y},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var x=c.toDate;c.toDate=function(y){return y==="s"&&this.$offset?l(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():x.call(this)};var v=c.diff;c.diff=function(y,w,g){if(y&&this.$u===y.$u)return v.call(this,y,w,g);var p=this.local(),j=l(y).local();return v.call(p,j,w,g)}}})})(Yq);var Vq={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(cr,function(){return function(r,n){n.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}})})(Vq);function vn(e){return e.children}var gr={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"},tr={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},yb=Object.keys(tr).map(function(e){return tr[e]});X.oneOfType([X.string,X.func]);X.any;X.func;X.oneOfType([X.arrayOf(X.oneOf(yb)),X.objectOf(function(e,t){var r=yb.indexOf(t)!==-1&&typeof e[t]=="boolean";if(r)return null;for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i];return X.elementType.apply(X,[e,t].concat(s))})]);X.oneOfType([X.oneOf(["overlap","no-overlap"]),X.func]);var vb={seconds:1e3,minutes:1e3*60,hours:1e3*60*60,day:1e3*60*60*24};function MN(e,t){var r=Ft(e,"month");return Ft(r,"week",t.startOfWeek())}function $N(e,t){var r=Ad(e,"month");return Ad(r,"week",t.startOfWeek())}function Gq(e,t){for(var r=MN(e,t),n=$N(e,t),s=[];Ai(r,n,"day");)s.push(r),r=dn(r,1,"day");return s}function Kq(e,t){var r=Ft(e,t);return Al(r,e)?r:dn(r,1,t)}function Xq(e,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",n=e,s=[];Ai(n,t,r);)s.push(n),n=dn(n,1,r);return s}function Jq(e,t){return t==null&&e==null?null:(t==null&&(t=new Date),e==null&&(e=new Date),e=Ft(e,"day"),e=ml(e,ml(t)),e=Ni(e,Ni(t)),e=fl(e,fl(t)),hl(e,hl(t)))}function bb(e){return ml(e)===0&&Ni(e)===0&&fl(e)===0&&hl(e)===0}function Qq(e,t,r,n){return r==="day"&&(r="date"),Math.abs(rv[r](e,void 0,n)-rv[r](t,void 0,n))}function p0(e,t,r){return!r||r==="milliseconds"?Math.abs(+e-+t):Math.round(Math.abs(+Ft(e,r)/vb[r]-+Ft(t,r)/vb[r]))}var Zq=X.oneOfType([X.string,X.func]);function eY(e,t,r,n,s){var i=typeof n=="function"?n(r,s,e):t.call(e,r,n,s);return il(i==null||typeof i=="string","`localizer format(..)` must return a string, null, or undefined"),i}function tY(e,t,r){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,t+r,0,0)}function g0(e,t){return e.getTimezoneOffset()-t.getTimezoneOffset()}function rY(e,t){return p0(e,t,"minutes")+g0(e,t)}function nY(e){var t=Ft(e,"day");return p0(t,e,"minutes")+g0(t,e)}function aY(e,t){return Ag(e,t,"day")}function sY(e,t,r){var n=Al(e,t,"minutes");return n?zl(t,r,"minutes"):Mu(t,r,"minutes")}function Jm(e,t){return Qq(e,t,"day")}function iY(e){var t=e.evtA,r=t.start,n=t.end,s=t.allDay,i=e.evtB,o=i.start,l=i.end,c=i.allDay,d=+Ft(r,"day")-+Ft(o,"day"),u=Jm(r,n),f=Jm(o,l);return d||f-u||!!c-!!s||+r-+o||+n-+l}function oY(e){var t=e.event,r=t.start,n=t.end,s=e.range,i=s.start,o=s.end,l=Ft(r,"day"),c=Ai(l,o,"day"),d=Lg(l,n,"minutes"),u=d?Mu(n,i,"minutes"):zl(n,i,"minutes");return c&&u}function lY(e,t){return Al(e,t,"day")}function cY(e,t){return bb(e)&&bb(t)}var dY=kt(function e(t){var r=this;Nt(this,e),il(typeof t.format=="function","date localizer `format(..)` must be a function"),il(typeof t.firstOfWeek=="function","date localizer `firstOfWeek(..)` must be a function"),this.propType=t.propType||Zq,this.formats=t.formats,this.format=function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return eY.apply(void 0,[r,t.format].concat(s))},this.startOfWeek=t.firstOfWeek,this.merge=t.merge||Jq,this.inRange=t.inRange||Tk,this.lt=t.lt||Ag,this.lte=t.lte||Ai,this.gt=t.gt||Mu,this.gte=t.gte||zl,this.eq=t.eq||Al,this.neq=t.neq||Lg,this.startOf=t.startOf||Ft,this.endOf=t.endOf||Ad,this.add=t.add||dn,this.range=t.range||Xq,this.diff=t.diff||p0,this.ceil=t.ceil||Kq,this.min=t.min||Ek,this.max=t.max||Dk,this.minutes=t.minutes||Ni,this.daySpan=t.daySpan||Jm,this.firstVisibleDay=t.firstVisibleDay||MN,this.lastVisibleDay=t.lastVisibleDay||$N,this.visibleDays=t.visibleDays||Gq,this.getSlotDate=t.getSlotDate||tY,this.getTimezoneOffset=t.getTimezoneOffset||function(n){return n.getTimezoneOffset()},this.getDstOffset=t.getDstOffset||g0,this.getTotalMin=t.getTotalMin||rY,this.getMinutesFromMidnight=t.getMinutesFromMidnight||nY,this.continuesPrior=t.continuesPrior||aY,this.continuesAfter=t.continuesAfter||sY,this.sortEvents=t.sortEvents||iY,this.inEventRange=t.inEventRange||oY,this.isSameDate=t.isSameDate||lY,this.startAndEndAreDateOnly=t.startAndEndAreDateOnly||cY,this.segmentOffset=t.browserTZOffset?t.browserTZOffset():0});function uY(e,t,r,n){var s=Ve(Ve({},e.formats),r);return Ve(Ve({},e),{},{messages:n,startOfWeek:function(){return e.startOfWeek(t)},format:function(o,l){return e.format(o,s[l]||l,t)}})}var hY=function(e){function t(){var r;Nt(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Jt(this,t,[].concat(s)),r.navigate=function(o){r.props.onNavigate(o)},r.view=function(o){r.props.onView(o)},r}return Ht(t,e),kt(t,[{key:"render",value:function(){var n=this.props,s=n.localizer.messages,i=n.label;return $.createElement("div",{className:"rbc-toolbar"},$.createElement("span",{className:"rbc-btn-group"},$.createElement("button",{type:"button",onClick:this.navigate.bind(null,gr.TODAY)},s.today),$.createElement("button",{type:"button",onClick:this.navigate.bind(null,gr.PREVIOUS)},s.previous),$.createElement("button",{type:"button",onClick:this.navigate.bind(null,gr.NEXT)},s.next)),$.createElement("span",{className:"rbc-toolbar-label"},i),$.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(s)))}},{key:"viewNamesGroup",value:function(n){var s=this,i=this.props.views,o=this.props.view;if(i.length>1)return i.map(function(l){return $.createElement("button",{type:"button",key:l,className:ft({"rbc-active":o===l}),onClick:s.view.bind(null,l)},n[l])})}}])}($.Component);function Ze(e,t){e&&e.apply(null,[].concat(t))}var fY={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(t){return"+".concat(t," more")}};function mY(e){return Ve(Ve({},fY),e)}function pY(e){var t=e.ref,r=e.callback;S.useEffect(function(){var n=function(i){t.current&&!t.current.contains(i.target)&&r()};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}},[t,r])}var gY=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],RN=function(e){function t(){return Nt(this,t),Jt(this,t,arguments)}return Ht(t,e),kt(t,[{key:"render",value:function(){var n=this.props,s=n.style,i=n.className,o=n.event,l=n.selected,c=n.isAllDay,d=n.onSelect,u=n.onDoubleClick,f=n.onKeyPress,h=n.localizer,x=n.continuesPrior,v=n.continuesAfter,y=n.accessors,w=n.getters,g=n.children,p=n.components,j=p.event,b=p.eventWrapper,N=n.slotStart,C=n.slotEnd,E=cn(n,gY);delete E.resizable;var T=y.title(o),O=y.tooltip(o),M=y.end(o),R=y.start(o),H=y.allDay(o),A=c||H||h.diff(R,h.ceil(M,"day"),"day")>1,L=w.eventProp(o,R,M,l),ee=$.createElement("div",{className:"rbc-event-content",title:O||void 0},j?$.createElement(j,{event:o,continuesPrior:x,continuesAfter:v,title:T,isAllDay:H,localizer:h,slotStart:N,slotEnd:C}):T);return $.createElement(b,Object.assign({},this.props,{type:"date"}),$.createElement("div",Object.assign({},E,{style:Ve(Ve({},L.style),s),className:ft("rbc-event",i,L.className,{"rbc-selected":l,"rbc-event-allday":A,"rbc-event-continues-prior":x,"rbc-event-continues-after":v}),onClick:function(he){return d&&d(o,he)},onDoubleClick:function(he){return u&&u(o,he)},onKeyDown:function(he){return f&&f(o,he)}}),typeof g=="function"?g(ee):ee))}}])}($.Component);function Ku(e,t){return!e||t==null?!1:$8(e,t)}function LN(e,t){var r=e.right-e.left,n=r/t;return n}function AN(e,t,r,n){var s=LN(e,n);return r?n-1-Math.floor((t-e.left)/s):Math.floor((t-e.left)/s)}function xY(e,t){var r=t.x,n=t.y;return n>=e.top&&n<=e.bottom&&r>=e.left&&r<=e.right}function yY(e,t,r,n,s){var i=-1,o=-1,l=n-1,c=LN(t,n),d=AN(t,r.x,s,n),u=t.top<r.y&&t.bottom>r.y,f=t.top<e.y&&t.bottom>e.y,h=e.y>t.bottom,x=t.top>e.y,v=r.top<t.top&&r.bottom>t.bottom;return v&&(i=0,o=l),u&&(x?(i=0,o=d):h&&(i=d,o=l)),f&&(i=o=s?l-Math.floor((e.x-t.left)/c):Math.floor((e.x-t.left)/c),u?d<i?i=d:o=d:e.y<r.y?o=l:i=0),{startIdx:i,endIdx:o}}function vY(e){var t=e.target,r=e.offset,n=e.container,s=e.box,i=hs(t),o=i.top,l=i.left,c=i.width,d=i.height,u=hs(n),f=u.top,h=u.left,x=u.width,v=u.height,y=hs(s),w=y.width,g=y.height,p=f+v,j=h+x,b=o+g,N=l+w,C=r.x,E=r.y,T=b>p?o-g-E:o+E+d,O=N>j?l+C-w+c:l+C;return{topOffset:T,leftOffset:O}}function bY(e){var t=e.containerRef,r=e.accessors,n=e.getters,s=e.selected,i=e.components,o=e.localizer,l=e.position,c=e.show,d=e.events,u=e.slotStart,f=e.slotEnd,h=e.onSelect,x=e.onDoubleClick,v=e.onKeyPress,y=e.handleDragStart,w=e.popperRef,g=e.target,p=e.offset;pY({ref:w,callback:c}),S.useLayoutEffect(function(){var N=vY({target:g,offset:p,container:t.current,box:w.current}),C=N.topOffset,E=N.leftOffset;w.current.style.top="".concat(C,"px"),w.current.style.left="".concat(E,"px")},[p.x,p.y,g]);var j=l.width,b={minWidth:j+j/2};return $.createElement("div",{style:b,className:"rbc-overlay",ref:w},$.createElement("div",{className:"rbc-overlay-header"},o.format(u,"dayHeaderFormat")),d.map(function(N,C){return $.createElement(RN,{key:C,type:"popup",localizer:o,event:N,getters:n,onSelect:h,accessors:r,components:i,onDoubleClick:x,onKeyPress:v,continuesPrior:o.lt(r.end(N),u,"day"),continuesAfter:o.gte(r.start(N),f,"day"),slotStart:u,slotEnd:f,selected:Ku(N,s),draggable:!0,onDragStart:function(){return y(N)},onDragEnd:function(){return c()}})}))}var zN=$.forwardRef(function(e,t){return $.createElement(bY,Object.assign({},e,{popperRef:t}))});zN.propTypes={accessors:X.object.isRequired,getters:X.object.isRequired,selected:X.object,components:X.object.isRequired,localizer:X.object.isRequired,position:X.object.isRequired,show:X.func.isRequired,events:X.array.isRequired,slotStart:X.instanceOf(Date).isRequired,slotEnd:X.instanceOf(Date),onSelect:X.func,onDoubleClick:X.func,onKeyPress:X.func,handleDragStart:X.func,style:X.object,offset:X.shape({x:X.number,y:X.number})};function wY(e){var t=e.containerRef,r=e.popupOffset,n=r===void 0?5:r,s=e.overlay,i=e.accessors,o=e.localizer,l=e.components,c=e.getters,d=e.selected,u=e.handleSelectEvent,f=e.handleDoubleClickEvent,h=e.handleKeyPressEvent,x=e.handleDragStart,v=e.onHide,y=e.overlayDisplay,w=S.useRef(null);if(!s.position)return null;var g=n;isNaN(n)||(g={x:n,y:n});var p=s.position,j=s.events,b=s.date,N=s.end;return $.createElement(Qg,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:v,target:s.target},function(C){var E=C.props;return $.createElement(zN,Object.assign({},E,{containerRef:t,ref:w,target:s.target,offset:g,accessors:i,getters:c,selected:d,components:l,localizer:o,position:p,show:y,events:j,slotStart:b,slotEnd:N,onSelect:u,onDoubleClick:f,onKeyPress:h,handleDragStart:x}))})}var x0=$.forwardRef(function(e,t){return $.createElement(wY,Object.assign({},e,{containerRef:t}))});x0.propTypes={popupOffset:X.oneOfType([X.number,X.shape({x:X.number,y:X.number})]),overlay:X.shape({position:X.object,events:X.array,date:X.instanceOf(Date),end:X.instanceOf(Date)}),accessors:X.object.isRequired,localizer:X.object.isRequired,components:X.object.isRequired,getters:X.object.isRequired,selected:X.object,handleSelectEvent:X.func,handleDoubleClickEvent:X.func,handleKeyPressEvent:X.func,handleDragStart:X.func,onHide:X.func,overlayDisplay:X.func};function qt(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return No(r,e,t,{passive:!1})}function jY(e,t,r){return!e||pl(e,document.elementFromPoint(t,r))}function kY(e,t){var r=t.clientX,n=t.clientY,s=document.elementFromPoint(r,n);return dN(s,".rbc-event",e)}function NY(e,t){var r=t.clientX,n=t.clientY,s=document.elementFromPoint(r,n);return dN(s,".rbc-show-more",e)}function Ud(e,t){return!!kY(e,t)}function _Y(e,t){return!!NY(e,t)}function mo(e){var t=e;return e.touches&&e.touches.length&&(t=e.touches[0]),{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}}var wb=5,SY=250,IN=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.global,s=n===void 0?!1:n,i=r.longPressThreshold,o=i===void 0?250:i,l=r.validContainers,c=l===void 0?[]:l;Nt(this,e),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=t,this.globalMouse=!t||s,this.longPressThreshold=o,this.validContainers=c,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=qt("touchmove",function(){},window),this._removeKeyDownListener=qt("keydown",this._keyListener),this._removeKeyUpListener=qt("keyup",this._keyListener),this._removeDropFromOutsideListener=qt("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=qt("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return kt(e,[{key:"on",value:function(r,n){var s=this._listeners[r]||(this._listeners[r]=[]);return s.push(n),{remove:function(){var o=s.indexOf(n);o!==-1&&s.splice(o,1)}}}},{key:"emit",value:function(r){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];var o,l=this._listeners[r]||[];return l.forEach(function(c){o===void 0&&(o=c.apply(void 0,s))}),o}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(r){var n=this._selectRect;return!n||!this.selecting?!1:jb(n,Cs(r))}},{key:"filter",value:function(r){var n=this._selectRect;return!n||!this.selecting?[]:r.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(r,n){var s=this,i=null,o=null,l=null,c=function(h){i=setTimeout(function(){u(),r(h)},s.longPressThreshold),o=qt("touchmove",function(){return u()}),l=qt("touchend",function(){return u()})},d=qt("touchstart",c),u=function(){i&&clearTimeout(i),o&&o(),l&&l(),i=null,o=null,l=null};return n&&c(n),function(){u(),d()}}},{key:"_addInitialEventListener",value:function(){var r=this,n=qt("mousedown",function(i){r._removeInitialEventListener(),r._handleInitialEvent(i),r._removeInitialEventListener=qt("mousedown",r._handleInitialEvent)}),s=qt("touchstart",function(i){r._removeInitialEventListener(),r._removeInitialEventListener=r._addLongPressListener(r._handleInitialEvent,i)});this._removeInitialEventListener=function(){n(),s()}}},{key:"_dropFromOutsideListener",value:function(r){var n=mo(r),s=n.pageX,i=n.pageY,o=n.clientX,l=n.clientY;this.emit("dropFromOutside",{x:s,y:i,clientX:o,clientY:l}),r.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(r){var n=mo(r),s=n.pageX,i=n.pageY,o=n.clientX,l=n.clientY;this.emit("dragOverFromOutside",{x:s,y:i,clientX:o,clientY:l}),r.preventDefault()}},{key:"_handleInitialEvent",value:function(r){if(this._initialEvent=r,!this.isDetached){var n=mo(r),s=n.clientX,i=n.clientY,o=n.pageX,l=n.pageY,c=this.container(),d,u;if(!(r.which===3||r.button===2||!jY(c,s,i))){if(!this.globalMouse&&c&&!pl(c,r.target)){var f=CY(0),h=f.top,x=f.left,v=f.bottom,y=f.right;if(u=Cs(c),d=jb({top:u.top-h,left:u.left-x,bottom:u.bottom+v,right:u.right+y},{top:l,left:o}),!d)return}var w=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(r.type),x:o,y:l,clientX:s,clientY:i});if(w!==!1)switch(r.type){case"mousedown":this._removeEndListener=qt("mouseup",this._handleTerminatingEvent),this._onEscListener=qt("keydown",this._handleTerminatingEvent),this._removeMoveListener=qt("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(r),this._removeEndListener=qt("touchend",this._handleTerminatingEvent),this._removeMoveListener=qt("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(r){var n=r.target,s=this.validContainers;return!s||!s.length||!n?!0:s.some(function(i){return!!n.closest(i)})}},{key:"_handleTerminatingEvent",value:function(r){var n=this.selecting,s=this._selectRect;if(!n&&r.type.includes("key")&&(r=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!r){var i=!this.container||pl(this.container(),r.target),o=this._isWithinValidContainer(r);return r.key==="Escape"||!o?this.emit("reset"):!n&&i?this._handleClickEvent(r):n?this.emit("select",s):this.emit("reset")}}},{key:"_handleClickEvent",value:function(r){var n=mo(r),s=n.pageX,i=n.pageY,o=n.clientX,l=n.clientY,c=new Date().getTime();return this._lastClickData&&c-this._lastClickData.timestamp<SY?(this._lastClickData=null,this.emit("doubleClick",{x:s,y:i,clientX:o,clientY:l})):(this._lastClickData={timestamp:c},this.emit("click",{x:s,y:i,clientX:o,clientY:l}))}},{key:"_handleMoveEvent",value:function(r){if(!(this._initialEventData===null||this.isDetached)){var n=this._initialEventData,s=n.x,i=n.y,o=mo(r),l=o.pageX,c=o.pageY,d=Math.abs(s-l),u=Math.abs(i-c),f=Math.min(l,s),h=Math.min(c,i),x=this.selecting,v=this.isClick(l,c);v&&!x&&!(d||u)||(!x&&!v&&this.emit("selectStart",this._initialEventData),v||(this.selecting=!0,this._selectRect={top:h,left:f,x:l,y:c,right:f+d,bottom:h+u},this.emit("selecting",this._selectRect)),r.preventDefault())}}},{key:"_keyListener",value:function(r){this.ctrl=r.metaKey||r.ctrlKey}},{key:"isClick",value:function(r,n){var s=this._initialEventData,i=s.x,o=s.y,l=s.isTouch;return!l&&Math.abs(r-i)<=wb&&Math.abs(n-o)<=wb}}])}();function CY(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return ta(e)!=="object"&&(e={top:e,left:e,right:e,bottom:e}),e}function jb(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=Cs(e),s=n.top,i=n.left,o=n.right,l=o===void 0?i:o,c=n.bottom,d=c===void 0?s:c,u=Cs(t),f=u.top,h=u.left,x=u.right,v=x===void 0?h:x,y=u.bottom,w=y===void 0?f:y;return!(d-r<f||s+r>w||l-r<h||i+r>v)}function Cs(e){if(!e.getBoundingClientRect)return e;var t=e.getBoundingClientRect(),r=t.left+kb("left"),n=t.top+kb("top");return{top:n,left:r,right:(e.offsetWidth||0)+r,bottom:(e.offsetHeight||0)+n}}function kb(e){if(e==="left")return window.pageXOffset||document.body.scrollLeft||0;if(e==="top")return window.pageYOffset||document.body.scrollTop||0}var EY=function(e){function t(r,n){var s;return Nt(this,t),s=Jt(this,t,[r,n]),s.state={selecting:!1},s.containerRef=S.createRef(),s}return Ht(t,e),kt(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(n){!n.selectable&&this.props.selectable&&this._selectable(),n.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var n=this.props,s=n.range,i=n.getNow,o=n.getters,l=n.date,c=n.components.dateCellWrapper,d=n.localizer,u=this.state,f=u.selecting,h=u.startIdx,x=u.endIdx,v=i();return $.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},s.map(function(y,w){var g=f&&w>=h&&w<=x,p=o.dayProp(y),j=p.className,b=p.style;return $.createElement(c,{key:w,value:y,range:s},$.createElement("div",{style:b,className:ft("rbc-day-bg",j,g&&"rbc-selected-cell",d.isSameDate(y,v)&&"rbc-today",l&&d.neq(l,y,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var n=this,s=this.containerRef.current,i=this._selector=new IN(this.props.container,{longPressThreshold:this.props.longPressThreshold}),o=function(c,d){if(!Ud(s,c)&&!_Y(s,c)){var u=Cs(s),f=n.props,h=f.range,x=f.rtl;if(xY(u,c)){var v=AN(u,c.x,x,h.length);n._selectSlot({startIdx:v,endIdx:v,action:d,box:c})}}n._initial={},n.setState({selecting:!1})};i.on("selecting",function(l){var c=n.props,d=c.range,u=c.rtl,f=-1,h=-1;if(n.state.selecting||(Ze(n.props.onSelectStart,[l]),n._initial={x:l.x,y:l.y}),i.isSelected(s)){var x=Cs(s),v=yY(n._initial,x,l,d.length,u);f=v.startIdx,h=v.endIdx}n.setState({selecting:!0,startIdx:f,endIdx:h})}),i.on("beforeSelect",function(l){if(n.props.selectable==="ignoreEvents")return!Ud(n.containerRef.current,l)}),i.on("click",function(l){return o(l,"click")}),i.on("doubleClick",function(l){return o(l,"doubleClick")}),i.on("select",function(l){n._selectSlot(Ve(Ve({},n.state),{},{action:"select",bounds:l})),n._initial={},n.setState({selecting:!1}),Ze(n.props.onSelectEnd,[n.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(n){var s=n.endIdx,i=n.startIdx,o=n.action,l=n.bounds,c=n.box;s!==-1&&i!==-1&&this.props.onSelectSlot&&this.props.onSelectSlot({start:i,end:s,action:o,bounds:l,box:c,resourceId:this.props.resourceId})}}])}($.Component),Pr={propTypes:{slotMetrics:X.object.isRequired,selected:X.object,isAllDay:X.bool,accessors:X.object.isRequired,localizer:X.object.isRequired,components:X.object.isRequired,getters:X.object.isRequired,onSelect:X.func,onDoubleClick:X.func,onKeyPress:X.func},defaultProps:{segments:[],selected:{}},renderEvent:function(t,r){var n=t.selected;t.isAllDay;var s=t.accessors,i=t.getters,o=t.onSelect,l=t.onDoubleClick,c=t.onKeyPress,d=t.localizer,u=t.slotMetrics,f=t.components,h=t.resizable,x=u.continuesPrior(r),v=u.continuesAfter(r);return $.createElement(RN,{event:r,getters:i,localizer:d,accessors:s,components:f,onSelect:o,onDoubleClick:l,onKeyPress:c,continuesPrior:x,continuesAfter:v,slotStart:u.first,slotEnd:u.last,selected:Ku(r,n),resizable:h})},renderSpan:function(t,r,n){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",i=Math.abs(r)/t*100+"%";return $.createElement("div",{key:n,className:"rbc-row-segment",style:{WebkitFlexBasis:i,flexBasis:i,maxWidth:i}},s)}},FN=function(e){function t(){return Nt(this,t),Jt(this,t,arguments)}return Ht(t,e),kt(t,[{key:"render",value:function(){var n=this,s=this.props,i=s.segments,o=s.slotMetrics.slots,l=s.className,c=1;return $.createElement("div",{className:ft(l,"rbc-row")},i.reduce(function(d,u,f){var h=u.event,x=u.left,v=u.right,y=u.span,w="_lvl_"+f,g=x-c,p=Pr.renderEvent(n.props,h);return g&&d.push(Pr.renderSpan(o,g,"".concat(w,"_gap"))),d.push(Pr.renderSpan(o,y,w,p)),c=v+1,d},[]))}}])}($.Component);FN.defaultProps=Ve({},Pr.defaultProps);function HN(e){var t=e.dateRange,r=e.unit,n=r===void 0?"day":r,s=e.localizer;return{first:t[0],last:s.add(t[t.length-1],1,n)}}function DY(e,t,r,n){var s=HN({dateRange:t,localizer:n}),i=s.first,o=s.last,l=n.diff(i,o,"day"),c=n.max(n.startOf(r.start(e),"day"),i),d=n.min(n.ceil(r.end(e),"day"),o),u=M9(t,function(h){return n.isSameDate(h,c)}),f=n.diff(c,d,"day");return f=Math.min(f,l),f=Math.max(f-n.segmentOffset,1),{event:e,span:f,left:u+1,right:Math.max(u+f,1)}}function Qm(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,r,n,s,i=[],o=[];for(r=0;r<e.length;r++){for(s=e[r],n=0;n<i.length&&TY(s,i[n]);n++);n>=t?o.push(s):(i[n]||(i[n]=[])).push(s)}for(r=0;r<i.length;r++)i[r].sort(function(l,c){return l.left-c.left});return{levels:i,extra:o}}function yl(e,t,r,n,s){var i={start:n.start(e),end:n.end(e)},o={start:t,end:r};return s.inEventRange({event:i,range:o})}function TY(e,t){return t.some(function(r){return r.left<=e.right&&r.right>=e.left})}function PY(e,t,r){var n=Zc(e),s=[],i=[];n.forEach(function(c){var d=t.start(c),u=t.end(c);r.daySpan(d,u)>1?s.push(c):i.push(c)});var o=s.sort(function(c,d){return Zm(c,d,t,r)}),l=i.sort(function(c,d){return Zm(c,d,t,r)});return[].concat(Zc(o),Zc(l))}function Zm(e,t,r,n){var s={start:r.start(e),end:r.end(e),allDay:r.allDay(e)},i={start:r.start(t),end:r.end(t),allDay:r.allDay(t)};return n.sortEvents({evtA:s,evtB:i})}var ep=function(t,r){return t.left<=r&&t.right>=r},pf=function(t,r){return t.filter(function(n){return ep(n,r)}).map(function(n){return n.event})},WN=function(e){function t(){return Nt(this,t),Jt(this,t,arguments)}return Ht(t,e),kt(t,[{key:"render",value:function(){for(var n=this.props,s=n.segments,i=n.slotMetrics.slots,o=Qm(s).levels[0],l=1,c=1,d=[];l<=i;){var u="_lvl_"+l,f=o.filter(function(b){return ep(b,l)})[0]||{},h=f.event,x=f.left,v=f.right,y=f.span;if(!h){var w=this.getHiddenEventsForSlot(s,l);if(w.length>0){var g=l-c;g&&d.push(Pr.renderSpan(i,g,u+"_gap")),d.push(Pr.renderSpan(i,1,u,this.renderShowMore(s,l))),c=l=l+1;continue}l++;continue}var p=Math.max(0,x-c);if(this.canRenderSlotEvent(x,y)){var j=Pr.renderEvent(this.props,h);p&&d.push(Pr.renderSpan(i,p,u+"_gap")),d.push(Pr.renderSpan(i,y,u,j)),c=l=v+1}else p&&d.push(Pr.renderSpan(i,p,u+"_gap")),d.push(Pr.renderSpan(i,1,u,this.renderShowMore(s,l))),c=l=l+1}return $.createElement("div",{className:"rbc-row"},d)}},{key:"getHiddenEventsForSlot",value:function(n,s){var i=pf(n,s),o=Qm(n).levels[0],l=o.filter(function(c){return ep(c,s)}).map(function(c){return c.event});return i.filter(function(c){return!l.some(function(d){return d===c})})}},{key:"canRenderSlotEvent",value:function(n,s){var i=this.props.segments;return q9(n,n+s).every(function(o){var l=pf(i,o).length;return l===1})}},{key:"renderShowMore",value:function(n,s){var i=this,o=this.props,l=o.localizer,c=o.slotMetrics,d=o.components,u=c.getEventsForSlot(s),f=pf(n,s),h=f.length;if(d!=null&&d.showMore){var x=d.showMore,v=c.getDateForSlot(s-1);return h?$.createElement(x,{localizer:l,slotDate:v,slot:s,count:h,events:u,remainingEvents:f}):!1}return h?$.createElement("button",{type:"button",key:"sm_"+s,className:ft("rbc-button-link","rbc-show-more"),onClick:function(w){return i.showMore(s,w)}},l.messages.showMore(h,f,u)):!1}},{key:"showMore",value:function(n,s){s.preventDefault(),s.stopPropagation(),this.props.onShowMore(n,s.target)}}])}($.Component);WN.defaultProps=Ve({},Pr.defaultProps);var OY=function(t){var r=t.children;return $.createElement("div",{className:"rbc-row-content-scroll-container"},r)},MY=function(t,r){return t.left<=r&&t.right>=r},$Y=function(t,r){return t[0].range===r[0].range&&t[0].events===r[0].events};function BN(){return pN(function(e){for(var t=e.range,r=e.events,n=e.maxRows,s=e.minRows,i=e.accessors,o=e.localizer,l=HN({dateRange:t,localizer:o}),c=l.first,d=l.last,u=r.map(function(y){return DY(y,t,i,o)}),f=Qm(u,Math.max(n-1,1)),h=f.levels,x=f.extra,v=x.length>0?s-1:s;h.length<v;)h.push([]);return{first:c,last:d,levels:h,extra:x,range:t,slots:t.length,clone:function(w){var g=BN();return g(Ve(Ve({},e),w))},getDateForSlot:function(w){return t[w]},getSlotForDate:function(w){return t.find(function(g){return o.isSameDate(g,w)})},getEventsForSlot:function(w){return u.filter(function(g){return MY(g,w)}).map(function(g){return g.event})},continuesPrior:function(w){return o.continuesPrior(i.start(w),c)},continuesAfter:function(w){var g=i.start(w),p=i.end(w);return o.continuesAfter(g,p,d)}}},$Y)}var vl=function(e){function t(){var r;Nt(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Jt(this,t,[].concat(s)),r.handleSelectSlot=function(o){var l=r.props,c=l.range,d=l.onSelectSlot;d(c.slice(o.start,o.end+1),o)},r.handleShowMore=function(o,l){var c=r.props,d=c.range,u=c.onShowMore,f=r.slotMetrics(r.props),h=MM(r.containerRef.current,".rbc-row-bg")[0],x;h&&(x=h.children[o-1]);var v=f.getEventsForSlot(o);u(v,d[o-1],x,o,l)},r.getContainer=function(){var o=r.props.container;return o?o():r.containerRef.current},r.renderHeadingCell=function(o,l){var c=r.props,d=c.renderHeader,u=c.getNow,f=c.localizer;return d({date:o,key:"header_".concat(l),className:ft("rbc-date-cell",f.isSameDate(o,u())&&"rbc-now")})},r.renderDummy=function(){var o=r.props,l=o.className,c=o.range,d=o.renderHeader,u=o.showAllEvents;return $.createElement("div",{className:l,ref:r.containerRef},$.createElement("div",{className:ft("rbc-row-content",u&&"rbc-row-content-scrollable")},d&&$.createElement("div",{className:"rbc-row",ref:r.headingRowRef},c.map(r.renderHeadingCell)),$.createElement("div",{className:"rbc-row",ref:r.eventRowRef},$.createElement("div",{className:"rbc-row-segment"},$.createElement("div",{className:"rbc-event"},$.createElement("div",{className:"rbc-event-content"},""))))))},r.containerRef=S.createRef(),r.headingRowRef=S.createRef(),r.eventRowRef=S.createRef(),r.slotMetrics=BN(),r}return Ht(t,e),kt(t,[{key:"getRowLimit",value:function(){var n,s=hf(this.eventRowRef.current),i=(n=this.headingRowRef)!==null&&n!==void 0&&n.current?hf(this.headingRowRef.current):0,o=hf(this.containerRef.current)-i;return Math.max(Math.floor(o/s),1)}},{key:"render",value:function(){var n=this.props,s=n.date,i=n.rtl,o=n.range,l=n.className,c=n.selected,d=n.selectable,u=n.renderForMeasure,f=n.accessors,h=n.getters,x=n.components,v=n.getNow,y=n.renderHeader,w=n.onSelect,g=n.localizer,p=n.onSelectStart,j=n.onSelectEnd,b=n.onDoubleClick,N=n.onKeyPress,C=n.resourceId,E=n.longPressThreshold,T=n.isAllDay,O=n.resizable,M=n.showAllEvents;if(u)return this.renderDummy();var R=this.slotMetrics(this.props),H=R.levels,A=R.extra,L=M?OY:vn,ee=x.weekWrapper,te={selected:c,accessors:f,getters:h,localizer:g,components:x,onSelect:w,onDoubleClick:b,onKeyPress:N,resourceId:C,slotMetrics:R,resizable:O};return $.createElement("div",{className:l,role:"rowgroup",ref:this.containerRef},$.createElement(EY,{localizer:g,date:s,getNow:v,rtl:i,range:o,selectable:d,container:this.getContainer,getters:h,onSelectStart:p,onSelectEnd:j,onSelectSlot:this.handleSelectSlot,components:x,longPressThreshold:E,resourceId:C}),$.createElement("div",{className:ft("rbc-row-content",M&&"rbc-row-content-scrollable"),role:"row"},y&&$.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},o.map(this.renderHeadingCell)),$.createElement(L,null,$.createElement(ee,Object.assign({isAllDay:T},te,{rtl:this.props.rtl}),H.map(function(he,G){return $.createElement(FN,Object.assign({key:G,segments:he},te))}),!!A.length&&$.createElement(WN,Object.assign({segments:A,onShowMore:this.handleShowMore},te))))))}}])}($.Component);vl.defaultProps={minRows:0,maxRows:1/0};var y0=function(t){var r=t.label;return $.createElement("span",{role:"columnheader","aria-sort":"none"},r)},RY=function(t){var r=t.label,n=t.drilldownView,s=t.onDrillDown;return n?$.createElement("button",{type:"button",className:"rbc-button-link",onClick:s},r):$.createElement("span",null,r)},LY=["date","className"],AY=function(t,r,n,s,i){return t.filter(function(o){return yl(o,r,n,s,i)})},Xu=function(e){function t(){var r;Nt(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Jt(this,t,[].concat(s)),r.getContainer=function(){return r.containerRef.current},r.renderWeek=function(o,l){var c=r.props,d=c.events,u=c.components,f=c.selectable,h=c.getNow,x=c.selected,v=c.date,y=c.localizer,w=c.longPressThreshold,g=c.accessors,p=c.getters,j=c.showAllEvents,b=r.state,N=b.needLimitMeasure,C=b.rowLimit,E=AY(Zc(d),o[0],o[o.length-1],g,y),T=PY(E,g,y);return $.createElement(vl,{key:l,ref:l===0?r.slotRowRef:void 0,container:r.getContainer,className:"rbc-month-row",getNow:h,date:v,range:o,events:T,maxRows:j?1/0:C,selected:x,selectable:f,components:u,accessors:g,getters:p,localizer:y,renderHeader:r.readerDateHeading,renderForMeasure:N,onShowMore:r.handleShowMore,onSelect:r.handleSelectEvent,onDoubleClick:r.handleDoubleClickEvent,onKeyPress:r.handleKeyPressEvent,onSelectSlot:r.handleSelectSlot,longPressThreshold:w,rtl:r.props.rtl,resizable:r.props.resizable,showAllEvents:j})},r.readerDateHeading=function(o){var l=o.date,c=o.className,d=cn(o,LY),u=r.props,f=u.date,h=u.getDrilldownView,x=u.localizer,v=x.neq(f,l,"month"),y=x.isSameDate(l,f),w=h(l),g=x.format(l,"dateFormat"),p=r.props.components.dateHeader||RY;return $.createElement("div",Object.assign({},d,{className:ft(c,v&&"rbc-off-range",y&&"rbc-current"),role:"cell"}),$.createElement(p,{label:g,date:l,drilldownView:w,isOffRange:v,onDrillDown:function(b){return r.handleHeadingClick(l,w,b)}}))},r.handleSelectSlot=function(o,l){r._pendingSelection=r._pendingSelection.concat(o),clearTimeout(r._selectTimer),r._selectTimer=setTimeout(function(){return r.selectDates(l)})},r.handleHeadingClick=function(o,l,c){c.preventDefault(),r.clearSelection(),Ze(r.props.onDrillDown,[o,l])},r.handleSelectEvent=function(){r.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Ze(r.props.onSelectEvent,l)},r.handleDoubleClickEvent=function(){r.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Ze(r.props.onDoubleClickEvent,l)},r.handleKeyPressEvent=function(){r.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Ze(r.props.onKeyPressEvent,l)},r.handleShowMore=function(o,l,c,d,u){var f=r.props,h=f.popup,x=f.onDrillDown,v=f.onShowMore,y=f.getDrilldownView,w=f.doShowMoreDrillDown;if(r.clearSelection(),h){var g=Bk(c,r.containerRef.current);r.setState({overlay:{date:l,events:o,position:g,target:u}})}else w&&Ze(x,[l,y(l)||tr.DAY]);Ze(v,[o,l,d])},r.overlayDisplay=function(){r.setState({overlay:null})},r.state={rowLimit:5,needLimitMeasure:!0,date:null},r.containerRef=S.createRef(),r.slotRowRef=S.createRef(),r._bgRows=[],r._pendingSelection=[],r}return Ht(t,e),kt(t,[{key:"componentDidMount",value:function(){var n=this,s;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){s||Uk(function(){s=!1,n.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var n=this.props,s=n.date,i=n.localizer,o=n.className,l=i.visibleDays(s,i),c=xM(l,7);return this._weekCount=c.length,$.createElement("div",{className:ft("rbc-month-view",o),role:"table","aria-label":"Month View",ref:this.containerRef},$.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(c[0])),c.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(n){var s=this.props,i=s.localizer,o=s.components,l=n[0],c=n[n.length-1],d=o.header||y0;return i.range(l,c,"day").map(function(u,f){return $.createElement("div",{key:"header_"+f,className:"rbc-header"},$.createElement(d,{date:u,localizer:i,label:i.format(u,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var n,s,i=this,o=(n=(s=this.state)===null||s===void 0?void 0:s.overlay)!==null&&n!==void 0?n:{},l=this.props,c=l.accessors,d=l.localizer,u=l.components,f=l.getters,h=l.selected,x=l.popupOffset,v=l.handleDragStart,y=function(){return i.setState({overlay:null})};return $.createElement(x0,{overlay:o,accessors:c,localizer:d,components:u,getters:f,selected:h,popupOffset:x,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:v,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:y})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(n){var s=this._pendingSelection.slice();this._pendingSelection=[],s.sort(function(l,c){return+l-+c});var i=new Date(s[0]),o=new Date(s[s.length-1]);o.setDate(s[s.length-1].getDate()+1),Ze(this.props.onSelectSlot,{slots:s,start:i,end:o,action:n.action,bounds:n.bounds,box:n.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(n,s){var i=n.date,o=n.localizer;return{date:i,needLimitMeasure:o.neq(i,s.date,"month")}}}])}($.Component);Xu.range=function(e,t){var r=t.localizer,n=r.firstVisibleDay(e,r),s=r.lastVisibleDay(e,r);return{start:n,end:s}};Xu.navigate=function(e,t,r){var n=r.localizer;switch(t){case gr.PREVIOUS:return n.add(e,-1,"month");case gr.NEXT:return n.add(e,1,"month");default:return e}};Xu.title=function(e,t){var r=t.localizer;return r.format(e,"monthHeaderFormat")};var Nb=function(t){var r=t.min,n=t.max,s=t.step,i=t.slots,o=t.localizer;return"".concat(+o.startOf(r,"minutes"))+"".concat(+o.startOf(n,"minutes"))+"".concat(s,"-").concat(i)};function v0(e){for(var t=e.min,r=e.max,n=e.step,s=e.timeslots,i=e.localizer,o=Nb({step:n,localizer:i}),l=1+i.getTotalMin(t,r),c=i.getMinutesFromMidnight(t),d=Math.ceil((l-1)/(n*s)),u=d*s,f=new Array(d),h=new Array(u),x=0;x<d;x++){f[x]=new Array(s);for(var v=0;v<s;v++){var y=x*s+v,w=y*n;h[y]=f[x][v]=i.getSlotDate(t,c,w)}}var g=h.length*n;h.push(i.getSlotDate(t,c,g));function p(j){var b=i.diff(t,j,"minutes")+i.getDstOffset(t,j);return Math.min(b,l)}return{groups:f,update:function(b){return Nb(b)!==o?v0(b):this},dateIsInGroup:function(b,N){var C=f[N+1];return i.inRange(b,f[N][0],C?C[0]:r,"minutes")},nextSlot:function(b){var N=h[Math.min(h.findIndex(function(C){return C===b||i.eq(C,b)})+1,h.length-1)];return i.eq(N,b)&&(N=i.add(b,n,"minutes")),N},closestSlotToPosition:function(b){var N=Math.min(h.length-1,Math.max(0,Math.floor(b*u)));return h[N]},closestSlotFromPoint:function(b,N){var C=Math.abs(N.top-N.bottom);return this.closestSlotToPosition((b.y-N.top)/C)},closestSlotFromDate:function(b){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(i.lt(b,t,"minutes"))return h[0];if(i.gt(b,r,"minutes"))return h[h.length-1];var C=i.diff(t,b,"minutes");return h[(C-C%n)/n+N]},startsBeforeDay:function(b){return i.lt(b,t,"day")},startsAfterDay:function(b){return i.gt(b,r,"day")},startsBefore:function(b){return i.lt(i.merge(t,b),t,"minutes")},startsAfter:function(b){return i.gt(i.merge(r,b),r,"minutes")},getRange:function(b,N,C,E){C||(b=i.min(r,i.max(t,b))),E||(N=i.min(r,i.max(t,N)));var T=p(b),O=p(N),M=O>n*u&&!i.eq(r,N)?(T-n)/(n*u)*100:T/(n*u)*100;return{top:M,height:O/(n*u)*100-M,start:p(b),startDate:b,end:p(N),endDate:N}},getCurrentTimePosition:function(b){var N=p(b),C=N/(n*u)*100;return C}}}var zY=function(){function e(t,r){var n=r.accessors,s=r.slotMetrics;Nt(this,e);var i=s.getRange(n.start(t),n.end(t)),o=i.start,l=i.startDate,c=i.end,d=i.endDate,u=i.top,f=i.height;this.start=o,this.end=c,this.startMs=+l,this.endMs=+d,this.top=u,this.height=f,this.data=t}return kt(e,[{key:"_width",get:function(){if(this.rows){var r=this.rows.reduce(function(s,i){return Math.max(s,i.leaves.length+1)},0)+1;return 100/r}if(this.leaves){var n=100-this.container._width;return n/(this.leaves.length+1)}return this.row._width}},{key:"width",get:function(){var r=this._width,n=Math.min(100,this._width*1.7);if(this.rows)return n;if(this.leaves)return this.leaves.length>0?n:r;var s=this.row.leaves,i=s.indexOf(this);return i===s.length-1?r:n}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var r=this.row,n=r.leaves,s=r.xOffset,i=r._width,o=n.indexOf(this)+1;return s+o*i}}])}();function IY(e,t,r){return Math.abs(t.start-e.start)<r||t.start>e.start&&t.start<e.end}function FY(e){for(var t=uH(e,["startMs",function(l){return-l.endMs}]),r=[];t.length>0;){var n=t.shift();r.push(n);for(var s=0;s<t.length;s++){var i=t[s];if(!(n.endMs>i.startMs)){if(s>0){var o=t.splice(s,1)[0];r.push(o)}break}}}return r}function UN(e){for(var t=e.events,r=e.minimumStartDifference,n=e.slotMetrics,s=e.accessors,i=t.map(function(u){return new zY(u,{slotMetrics:n,accessors:s})}),o=FY(i),l=[],c=function(){var f=o[d],h=l.find(function(y){return y.end>f.start||Math.abs(f.start-y.start)<r});if(!h)return f.rows=[],l.push(f),1;f.container=h;for(var x=null,v=h.rows.length-1;!x&&v>=0;v--)IY(h.rows[v],f,r)&&(x=h.rows[v]);x?(x.leaves.push(f),f.row=x):(f.leaves=[],h.rows.push(f))},d=0;d<o.length;d++)c();return o.map(function(u){return{event:u.data,style:{top:u.top,height:u.height,width:u.width,xOffset:Math.max(0,u.xOffset)}}})}function qN(e,t,r){for(var n=0;n<e.friends.length;++n)if(!(r.indexOf(e.friends[n])>-1)){t=t>e.friends[n].idx?t:e.friends[n].idx,r.push(e.friends[n]);var s=qN(e.friends[n],t,r);t=t>s?t:s}return t}function HY(e){var t=e.events,r=e.minimumStartDifference,n=e.slotMetrics,s=e.accessors,i=UN({events:t,minimumStartDifference:r,slotMetrics:n,accessors:s});i.sort(function(ee,te){return ee=ee.style,te=te.style,ee.top!==te.top?ee.top>te.top?1:-1:ee.height!==te.height?ee.top+ee.height<te.top+te.height?1:-1:0});for(var o=0;o<i.length;++o)i[o].friends=[],delete i[o].style.left,delete i[o].style.left,delete i[o].idx,delete i[o].size;for(var l=0;l<i.length-1;++l)for(var c=i[l],d=c.style.top,u=c.style.top+c.style.height,f=l+1;f<i.length;++f){var h=i[f],x=h.style.top,v=h.style.top+h.style.height;(x>=d&&v<=u||v>d&&v<=u||x>=d&&x<u)&&(c.friends.push(h),h.friends.push(c))}for(var y=0;y<i.length;++y){for(var w=i[y],g=[],p=0;p<100;++p)g.push(1);for(var j=0;j<w.friends.length;++j)w.friends[j].idx!==void 0&&(g[w.friends[j].idx]=0);w.idx=g.indexOf(1)}for(var b=0;b<i.length;++b){var N=0;if(!i[b].size){var C=[],E=qN(i[b],0,C);N=100/(E+1),i[b].size=N;for(var T=0;T<C.length;++T)C[T].size=N}}for(var O=0;O<i.length;++O){var M=i[O];M.style.left=M.idx*M.size;for(var R=0,H=0;H<M.friends.length;++H){var A=M.friends[H].idx;R=R>A?R:A}R<=M.idx&&(M.size=100-M.idx*M.size);var L=M.idx===0?0:3;M.style.width="calc(".concat(M.size,"% - ").concat(L,"px)"),M.style.height="calc(".concat(M.style.height,"% - 2px)"),M.style.xOffset="calc(".concat(M.style.left,"% + ").concat(L,"px)")}return i}var _b={overlap:UN,"no-overlap":HY};function WY(e){return!!(e&&e.constructor&&e.call&&e.apply)}function BY(e){e.events,e.minimumStartDifference,e.slotMetrics,e.accessors;var t=e.dayLayoutAlgorithm,r=t;return t in _b&&(r=_b[t]),WY(r)?r.apply(this,arguments):[]}var YN=function(e){function t(){return Nt(this,t),Jt(this,t,arguments)}return Ht(t,e),kt(t,[{key:"render",value:function(){var n=this.props,s=n.renderSlot,i=n.resource,o=n.group,l=n.getters,c=n.components,d=c===void 0?{}:c,u=d.timeSlotWrapper,f=u===void 0?vn:u,h=l?l.slotGroupProp(o):{};return $.createElement("div",Object.assign({className:"rbc-timeslot-group"},h),o.map(function(x,v){var y=l?l.slotProp(x,i):{};return $.createElement(f,{key:v,value:x,resource:i},$.createElement("div",Object.assign({},y,{className:ft("rbc-time-slot",y.className)}),s&&s(x,v)))}))}}])}(S.Component);function Oc(e){return typeof e=="string"?e:e+"%"}function UY(e){var t=e.style,r=e.className,n=e.event,s=e.accessors,i=e.rtl,o=e.selected,l=e.label,c=e.continuesPrior,d=e.continuesAfter,u=e.getters,f=e.onClick,h=e.onDoubleClick,x=e.isBackgroundEvent,v=e.onKeyPress,y=e.components,w=y.event,g=y.eventWrapper,p=s.title(n),j=s.tooltip(n),b=s.end(n),N=s.start(n),C=u.eventProp(n,N,b,o),E=[$.createElement("div",{key:"1",className:"rbc-event-label"},l),$.createElement("div",{key:"2",className:"rbc-event-content"},w?$.createElement(w,{event:n,title:p}):p)],T=t.height,O=t.top,M=t.width,R=t.xOffset,H=Ve(Ve({},C.style),{},es({top:Oc(O),height:Oc(T),width:Oc(M)},i?"right":"left",Oc(R)));return $.createElement(g,Object.assign({type:"time"},e),$.createElement("div",{role:"button",tabIndex:0,onClick:f,onDoubleClick:h,style:H,onKeyDown:v,title:j?(typeof l=="string"?l+": ":"")+j:void 0,className:ft(x?"rbc-background-event":"rbc-event",r,C.className,{"rbc-selected":o,"rbc-event-continues-earlier":c,"rbc-event-continues-later":d})},E))}var qY=function(t){var r=t.children,n=t.className,s=t.style,i=t.innerRef;return $.createElement("div",{className:n,style:s,ref:i},r)},YY=$.forwardRef(function(e,t){return $.createElement(qY,Object.assign({},e,{innerRef:t}))}),VY=["dayProp"],GY=["eventContainerWrapper","timeIndicatorWrapper"],VN=function(e){function t(){var r;Nt(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Jt(this,t,[].concat(s)),r.state={selecting:!1,timeIndicatorPosition:null},r.intervalTriggered=!1,r.renderEvents=function(o){var l=o.events,c=o.isBackgroundEvent,d=r.props,u=d.rtl,f=d.selected,h=d.accessors,x=d.localizer,v=d.getters,y=d.components,w=d.step,g=d.timeslots,p=d.dayLayoutAlgorithm,j=d.resizable,b=r,N=b.slotMetrics,C=x.messages,E=BY({events:l,accessors:h,slotMetrics:N,minimumStartDifference:Math.ceil(w*g/2),dayLayoutAlgorithm:p});return E.map(function(T,O){var M,R=T.event,H=T.style,A=h.end(R),L=h.start(R),ee=(M=h.eventId(R))!==null&&M!==void 0?M:"evt_"+O,te="eventTimeRangeFormat",he,G=N.startsBeforeDay(L),Z=N.startsAfterDay(A);G?te="eventTimeRangeEndFormat":Z&&(te="eventTimeRangeStartFormat"),G&&Z?he=C.allDay:he=x.format({start:L,end:A},te);var ie=G||N.startsBefore(L),I=Z||N.startsAfter(A);return $.createElement(UY,{style:H,event:R,label:he,key:ee,getters:v,rtl:u,components:y,continuesPrior:ie,continuesAfter:I,accessors:h,resource:r.props.resource,selected:Ku(R,f),onClick:function(Y){return r._select(Ve(Ve(Ve({},R),r.props.resource&&{sourceResource:r.props.resource}),c&&{isBackgroundEvent:!0}),Y)},onDoubleClick:function(Y){return r._doubleClick(R,Y)},isBackgroundEvent:c,onKeyPress:function(Y){return r._keyPress(R,Y)},resizable:j})})},r._selectable=function(){var o=r.containerRef.current,l=r.props,c=l.longPressThreshold,d=l.localizer,u=r._selector=new IN(function(){return o},{longPressThreshold:c}),f=function(y){var w=r.props.onSelecting,g=r.state||{},p=h(y),j=p.startDate,b=p.endDate;w&&(d.eq(g.startDate,j,"minutes")&&d.eq(g.endDate,b,"minutes")||w({start:j,end:b,resourceId:r.props.resource})===!1)||(r.state.start!==p.start||r.state.end!==p.end||r.state.selecting!==p.selecting)&&r.setState(p)},h=function(y){var w=r.slotMetrics.closestSlotFromPoint(y,Cs(o));r.state.selecting||(r._initialSlot=w);var g=r._initialSlot;d.lte(g,w)?w=r.slotMetrics.nextSlot(w):d.gt(g,w)&&(g=r.slotMetrics.nextSlot(g));var p=r.slotMetrics.getRange(d.min(g,w),d.max(g,w));return Ve(Ve({},p),{},{selecting:!0,top:"".concat(p.top,"%"),height:"".concat(p.height,"%")})},x=function(y,w){if(!Ud(r.containerRef.current,y)){var g=h(y),p=g.startDate,j=g.endDate;r._selectSlot({startDate:p,endDate:j,action:w,box:y})}r.setState({selecting:!1})};u.on("selecting",f),u.on("selectStart",f),u.on("beforeSelect",function(v){if(r.props.selectable==="ignoreEvents")return!Ud(r.containerRef.current,v)}),u.on("click",function(v){return x(v,"click")}),u.on("doubleClick",function(v){return x(v,"doubleClick")}),u.on("select",function(v){r.state.selecting&&(r._selectSlot(Ve(Ve({},r.state),{},{action:"select",bounds:v})),r.setState({selecting:!1}))}),u.on("reset",function(){r.state.selecting&&r.setState({selecting:!1})})},r._teardownSelectable=function(){r._selector&&(r._selector.teardown(),r._selector=null)},r._selectSlot=function(o){for(var l=o.startDate,c=o.endDate,d=o.action,u=o.bounds,f=o.box,h=l,x=[];r.props.localizer.lte(h,c);)x.push(h),h=new Date(+h+r.props.step*60*1e3);Ze(r.props.onSelectSlot,{slots:x,start:l,end:c,resourceId:r.props.resource,action:d,bounds:u,box:f})},r._select=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Ze(r.props.onSelectEvent,l)},r._doubleClick=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Ze(r.props.onDoubleClickEvent,l)},r._keyPress=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Ze(r.props.onKeyPressEvent,l)},r.slotMetrics=v0(r.props),r.containerRef=S.createRef(),r}return Ht(t,e),kt(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(n,s){this.props.selectable&&!n.selectable&&this._selectable(),!this.props.selectable&&n.selectable&&this._teardownSelectable();var i=this.props,o=i.getNow,l=i.isNow,c=i.localizer,d=i.date,u=i.min,f=i.max,h=c.neq(n.getNow(),o(),"minutes");if(n.isNow!==l||h){if(this.clearTimeIndicatorInterval(),l){var x=!h&&c.eq(n.date,d,"minutes")&&s.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(x)}}else l&&(c.neq(n.min,u,"minutes")||c.neq(n.max,f,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var n=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!this.intervalTriggered&&!s&&this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){n.intervalTriggered=!0,n.positionTimeIndicator(),n.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var n=this.props,s=n.min,i=n.max,o=n.getNow,l=o();if(l>=s&&l<=i){var c=this.slotMetrics.getCurrentTimePosition(l);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:c})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var n=this.props,s=n.date,i=n.max,o=n.rtl,l=n.isNow,c=n.resource,d=n.accessors,u=n.localizer,f=n.getters,h=f.dayProp,x=cn(f,VY),v=n.components,y=v.eventContainerWrapper,w=v.timeIndicatorWrapper,g=cn(v,GY);this.slotMetrics=this.slotMetrics.update(this.props);var p=this.slotMetrics,j=this.state,b=j.selecting,N=j.top,C=j.height,E=j.startDate,T=j.endDate,O={start:E,end:T},M=h(i,c),R=M.className,H=M.style,A={className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}},L=g.dayColumnWrapper||YY;return $.createElement(L,{ref:this.containerRef,date:s,style:H,className:ft(R,"rbc-day-slot","rbc-time-column",l&&"rbc-now",l&&"rbc-today",b&&"rbc-slot-selecting"),slotMetrics:p,resource:c},p.groups.map(function(ee,te){return $.createElement(YN,{key:te,group:ee,resource:c,getters:x,components:g})}),$.createElement(y,{localizer:u,resource:c,accessors:d,getters:x,components:g,slotMetrics:p},$.createElement("div",{className:ft("rbc-events-container",o&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),b&&$.createElement("div",{className:"rbc-slot-selection",style:{top:N,height:C}},$.createElement("span",null,u.format(O,"selectRangeFormat"))),l&&this.intervalTriggered&&$.createElement(w,A,$.createElement("div",A)))}}])}($.Component);VN.defaultProps={dragThroughEvents:!0,timeslots:2};var GN=function(t){var r=t.label;return $.createElement($.Fragment,null,r)},KY=function(e){function t(){var r;Nt(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Jt(this,t,[].concat(s)),r.handleHeaderClick=function(o,l,c){c.preventDefault(),Ze(r.props.onDrillDown,[o,l])},r.renderRow=function(o){var l=r.props,c=l.events,d=l.rtl,u=l.selectable,f=l.getNow,h=l.range,x=l.getters,v=l.localizer,y=l.accessors,w=l.components,g=l.resizable,p=y.resourceId(o),j=o?c.filter(function(b){return y.resource(b)===p}):c;return $.createElement(vl,{isAllDay:!0,rtl:d,getNow:f,minRows:2,maxRows:r.props.allDayMaxRows+1,range:h,events:j,resourceId:p,className:"rbc-allday-cell",selectable:u,selected:r.props.selected,components:w,accessors:y,getters:x,localizer:v,onSelect:r.props.onSelectEvent,onShowMore:r.props.onShowMore,onDoubleClick:r.props.onDoubleClickEvent,onKeyPress:r.props.onKeyPressEvent,onSelectSlot:r.props.onSelectSlot,longPressThreshold:r.props.longPressThreshold,resizable:g})},r}return Ht(t,e),kt(t,[{key:"renderHeaderCells",value:function(n){var s=this,i=this.props,o=i.localizer,l=i.getDrilldownView,c=i.getNow,d=i.getters.dayProp,u=i.components.header,f=u===void 0?y0:u,h=c();return n.map(function(x,v){var y=l(x),w=o.format(x,"dayFormat"),g=d(x),p=g.className,j=g.style,b=$.createElement(f,{date:x,label:w,localizer:o});return $.createElement("div",{key:v,style:j,className:ft("rbc-header",p,o.isSameDate(x,h)&&"rbc-today")},y?$.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(C){return s.handleHeaderClick(x,y,C)}},b):$.createElement("span",null,b))})}},{key:"render",value:function(){var n=this,s=this.props,i=s.width,o=s.rtl,l=s.resources,c=s.range,d=s.events,u=s.getNow,f=s.accessors,h=s.selectable,x=s.components,v=s.getters,y=s.scrollRef,w=s.localizer,g=s.isOverflowing,p=s.components,j=p.timeGutterHeader,b=p.resourceHeader,N=b===void 0?GN:b,C=s.resizable,E={};g&&(E[o?"marginLeft":"marginRight"]="".concat(Jg()-1,"px"));var T=l.groupEvents(d);return $.createElement("div",{style:E,ref:y,className:ft("rbc-time-header",g&&"rbc-overflowing")},$.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:i,minWidth:i,maxWidth:i}},j&&$.createElement(j,null)),l.map(function(O,M){var R=Lr(O,2),H=R[0],A=R[1];return $.createElement("div",{className:"rbc-time-header-content",key:H||M},A&&$.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(M)},$.createElement("div",{className:"rbc-header"},$.createElement(N,{index:M,label:f.resourceTitle(A),resource:A}))),$.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(c.length<=1?" rbc-time-header-cell-single-day":"")},n.renderHeaderCells(c)),$.createElement(vl,{isAllDay:!0,rtl:o,getNow:u,minRows:2,maxRows:n.props.allDayMaxRows+1,range:c,events:T.get(H)||[],resourceId:A&&H,className:"rbc-allday-cell",selectable:h,selected:n.props.selected,components:x,accessors:f,getters:v,localizer:w,onSelect:n.props.onSelectEvent,onShowMore:n.props.onShowMore,onDoubleClick:n.props.onDoubleClickEvent,onKeyDown:n.props.onKeyPressEvent,onSelectSlot:n.props.onSelectSlot,longPressThreshold:n.props.longPressThreshold,resizable:C}))}))}}])}($.Component),XY=function(e){function t(){var r;Nt(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Jt(this,t,[].concat(s)),r.handleHeaderClick=function(o,l,c){c.preventDefault(),Ze(r.props.onDrillDown,[o,l])},r}return Ht(t,e),kt(t,[{key:"renderHeaderCells",value:function(n){var s=this,i=this.props,o=i.localizer,l=i.getDrilldownView,c=i.getNow,d=i.getters.dayProp,u=i.components,f=u.header,h=f===void 0?y0:f,x=u.resourceHeader,v=x===void 0?GN:x,y=i.resources,w=i.accessors,g=i.events,p=i.rtl,j=i.selectable,b=i.components,N=i.getters,C=i.resizable,E=c(),T=y.groupEvents(g);return n.map(function(O,M){var R=l(O),H=o.format(O,"dayFormat"),A=d(O),L=A.className,ee=A.style,te=$.createElement(h,{date:O,label:H,localizer:o});return $.createElement("div",{key:M,className:"rbc-time-header-content rbc-resource-grouping"},$.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(n.length<=1?" rbc-time-header-cell-single-day":"")},$.createElement("div",{style:ee,className:ft("rbc-header",L,o.isSameDate(O,E)&&"rbc-today")},R?$.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(G){return s.handleHeaderClick(O,R,G)}},te):$.createElement("span",null,te))),$.createElement("div",{className:"rbc-row"},y.map(function(he,G){var Z=Lr(he,2),ie=Z[0],I=Z[1];return $.createElement("div",{key:"resource_".concat(ie,"_").concat(G),className:ft("rbc-header",L,o.isSameDate(O,E)&&"rbc-today")},$.createElement(v,{index:G,label:w.resourceTitle(I),resource:I}))})),$.createElement("div",{className:"rbc-row rbc-m-b-negative-3 rbc-h-full"},y.map(function(he,G){var Z=Lr(he,2),ie=Z[0],I=Z[1],F=(T.get(ie)||[]).filter(function(Y){return o.isSameDate(Y.start,O)||o.isSameDate(Y.end,O)});return $.createElement(vl,{key:"resource_".concat(ie,"_").concat(G),isAllDay:!0,rtl:p,getNow:c,minRows:2,maxRows:s.props.allDayMaxRows+1,range:[O],events:F,resourceId:I&&ie,className:"rbc-allday-cell",selectable:j,selected:s.props.selected,components:b,accessors:w,getters:N,localizer:o,onSelect:s.props.onSelectEvent,onShowMore:s.props.onShowMore,onDoubleClick:s.props.onDoubleClickEvent,onKeyDown:s.props.onKeyPressEvent,onSelectSlot:s.props.onSelectSlot,longPressThreshold:s.props.longPressThreshold,resizable:C})})))})}},{key:"render",value:function(){var n=this.props,s=n.width,i=n.rtl,o=n.range,l=n.scrollRef,c=n.isOverflowing,d=n.components.timeGutterHeader,u={};return c&&(u[i?"marginLeft":"marginRight"]="".concat(Jg()-1,"px")),$.createElement("div",{style:u,ref:l,className:ft("rbc-time-header",c&&"rbc-overflowing")},$.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:s,minWidth:s,maxWidth:s}},d&&$.createElement(d,null)),this.renderHeaderCells(o))}}])}($.Component);function JY(e){var t=e.min,r=e.max,n=e.localizer;return n.getTimezoneOffset(t)!==n.getTimezoneOffset(r)?{start:n.add(t,-1,"day"),end:n.add(r,-1,"day")}:{start:t,end:r}}var QY=function(t){var r=t.min,n=t.max,s=t.timeslots,i=t.step,o=t.localizer,l=t.getNow,c=t.resource,d=t.components,u=t.getters,f=t.gutterRef,h=d.timeGutterWrapper,x=S.useMemo(function(){return JY({min:r,max:n,localizer:o})},[r==null?void 0:r.toISOString(),n==null?void 0:n.toISOString(),o]),v=x.start,y=x.end,w=S.useState(v0({min:v,max:y,timeslots:s,step:i,localizer:o})),g=Lr(w,2),p=g[0],j=g[1];S.useEffect(function(){p&&j(p.update({min:v,max:y,timeslots:s,step:i,localizer:o}))},[v==null?void 0:v.toISOString(),y==null?void 0:y.toISOString(),s,i]);var b=S.useCallback(function(N,C){if(C)return null;var E=p.dateIsInGroup(l(),C);return $.createElement("span",{className:ft("rbc-label",E&&"rbc-now")},o.format(N,"timeGutterFormat"))},[p,o,l]);return $.createElement(h,{slotMetrics:p},$.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:f},p.groups.map(function(N,C){return $.createElement(YN,{key:C,group:N,resource:c,components:d,renderSlot:b,getters:u})})))},ZY=$.forwardRef(function(e,t){return $.createElement(QY,Object.assign({gutterRef:t},e))}),gf={};function eV(e,t){return{map:function(n){return e?e.map(function(s,i){return n([t.resourceId(s),s],i)}):[n([gf,null],0)]},groupEvents:function(n){var s=new Map;return e?(n.forEach(function(i){var o=t.resource(i)||gf;if(Array.isArray(o))o.forEach(function(c){var d=s.get(c)||[];d.push(i),s.set(c,d)});else{var l=s.get(o)||[];l.push(i),s.set(o,l)}}),s):(s.set(gf,n),s)}}}var Yi=function(e){function t(r){var n;return Nt(this,t),n=Jt(this,t,[r]),n.handleScroll=function(s){n.scrollRef.current&&(n.scrollRef.current.scrollLeft=s.target.scrollLeft)},n.handleResize=function(){uv(n.rafHandle),n.rafHandle=Uk(n.checkOverflow)},n.handleKeyPressEvent=function(){n.clearSelection();for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];Ze(n.props.onKeyPressEvent,i)},n.handleSelectEvent=function(){n.clearSelection();for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];Ze(n.props.onSelectEvent,i)},n.handleDoubleClickEvent=function(){n.clearSelection();for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];Ze(n.props.onDoubleClickEvent,i)},n.handleShowMore=function(s,i,o,l,c){var d=n.props,u=d.popup,f=d.onDrillDown,h=d.onShowMore,x=d.getDrilldownView,v=d.doShowMoreDrillDown;if(n.clearSelection(),u){var y=Bk(o,n.containerRef.current);n.setState({overlay:{date:i,events:s,position:Ve(Ve({},y),{},{width:"200px"}),target:c}})}else v&&Ze(f,[i,x(i)||tr.DAY]);Ze(h,[s,i,l])},n.handleSelectAllDaySlot=function(s,i){var o=n.props.onSelectSlot,l=new Date(s[0]),c=new Date(s[s.length-1]);c.setDate(s[s.length-1].getDate()+1),Ze(o,{slots:s,start:l,end:c,action:i.action,resourceId:i.resourceId})},n.overlayDisplay=function(){n.setState({overlay:null})},n.checkOverflow=function(){if(!n._updatingOverflow){var s=n.contentRef.current;if(s!=null&&s.scrollHeight){var i=s.scrollHeight>s.clientHeight;n.state.isOverflowing!==i&&(n._updatingOverflow=!0,n.setState({isOverflowing:i},function(){n._updatingOverflow=!1}))}}},n.memoizedResources=pN(function(s,i){return eV(s,i)}),n.state={gutterWidth:void 0,isOverflowing:null},n.scrollRef=$.createRef(),n.contentRef=$.createRef(),n.containerRef=$.createRef(),n._scrollRatio=null,n.gutterRef=S.createRef(),n}return Ht(t,e),kt(t,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){this.props.width==null&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),uv(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderDayColumn",value:function(n,s,i,o,l,c,d,u,f,h){var x=this.props,v=x.min,y=x.max,w=(o.get(s)||[]).filter(function(p){return c.inRange(n,d.start(p),d.end(p),"day")}),g=(l.get(s)||[]).filter(function(p){return c.inRange(n,d.start(p),d.end(p),"day")});return $.createElement(VN,Object.assign({},this.props,{localizer:c,min:c.merge(n,v),max:c.merge(n,y),resource:i&&s,components:u,isNow:c.isSameDate(n,h),key:"".concat(s,"-").concat(n),date:n,events:w,backgroundEvents:g,dayLayoutAlgorithm:f}))}},{key:"renderResourcesFirst",value:function(n,s,i,o,l,c,d,u,f){var h=this;return s.map(function(x){var v=Lr(x,2),y=v[0],w=v[1];return n.map(function(g){return h.renderDayColumn(g,y,w,i,o,l,c,u,f,d)})})}},{key:"renderRangeFirst",value:function(n,s,i,o,l,c,d,u,f){var h=this;return n.map(function(x){return $.createElement("div",{style:{display:"flex",minHeight:"100%",flex:1},key:x},s.map(function(v){var y=Lr(v,2),w=y[0],g=y[1];return $.createElement("div",{style:{flex:1},key:c.resourceId(g)},h.renderDayColumn(x,w,g,i,o,l,c,u,f,d))}))})}},{key:"renderEvents",value:function(n,s,i,o){var l=this.props,c=l.accessors,d=l.localizer,u=l.resourceGroupingLayout,f=l.components,h=l.dayLayoutAlgorithm,x=this.memoizedResources(this.props.resources,c),v=x.groupEvents(s),y=x.groupEvents(i);return u?this.renderRangeFirst(n,x,v,y,d,c,o,f,h):this.renderResourcesFirst(n,x,v,y,d,c,o,f,h)}},{key:"render",value:function(){var n,s=this.props,i=s.events,o=s.backgroundEvents,l=s.range,c=s.width,d=s.rtl,u=s.selected,f=s.getNow,h=s.resources,x=s.components,v=s.accessors,y=s.getters,w=s.localizer,g=s.min,p=s.max,j=s.showMultiDayTimes,b=s.longPressThreshold,N=s.resizable,C=s.resourceGroupingLayout;c=c||this.state.gutterWidth;var E=l[0],T=l[l.length-1];this.slots=l.length;var O=[],M=[],R=[];i.forEach(function(A){if(yl(A,E,T,v,w)){var L=v.start(A),ee=v.end(A);v.allDay(A)||w.startAndEndAreDateOnly(L,ee)||!j&&!w.isSameDate(L,ee)?O.push(A):M.push(A)}}),o.forEach(function(A){yl(A,E,T,v,w)&&R.push(A)}),O.sort(function(A,L){return Zm(A,L,v,w)});var H={range:l,events:O,width:c,rtl:d,getNow:f,localizer:w,selected:u,allDayMaxRows:this.props.showAllEvents?1/0:(n=this.props.allDayMaxRows)!==null&&n!==void 0?n:1/0,resources:this.memoizedResources(h,v),selectable:this.props.selectable,accessors:v,getters:y,components:x,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:b,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:N};return $.createElement("div",{className:ft("rbc-time-view",h&&"rbc-time-view-resources"),ref:this.containerRef},h&&h.length>1&&C?$.createElement(XY,H):$.createElement(KY,H),this.props.popup&&this.renderOverlay(),$.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},$.createElement(ZY,{date:E,ref:this.gutterRef,localizer:w,min:w.merge(E,g),max:w.merge(E,p),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:x,className:"rbc-time-gutter",getters:y}),this.renderEvents(l,M,R,f())))}},{key:"renderOverlay",value:function(){var n,s,i=this,o=(n=(s=this.state)===null||s===void 0?void 0:s.overlay)!==null&&n!==void 0?n:{},l=this.props,c=l.accessors,d=l.localizer,u=l.components,f=l.getters,h=l.selected,x=l.popupOffset,v=l.handleDragStart,y=function(){return i.setState({overlay:null})};return $.createElement(x0,{overlay:o,accessors:c,localizer:d,components:u,getters:f,selected:h,popupOffset:x,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:v,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:y})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var n=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var s,i=(s=n.gutterRef)!==null&&s!==void 0&&s.current?Xm(n.gutterRef.current):void 0;i&&n.state.gutterWidth!==i&&n.setState({gutterWidth:i})})}},{key:"applyScroll",value:function(){if(this._scrollRatio!=null&&this.props.enableAutoScroll===!0){var n=this.contentRef.current;n.scrollTop=n.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,s=n.min,i=n.max,o=n.scrollToTime,l=n.localizer,c=l.diff(l.merge(o,s),o,"milliseconds"),d=l.diff(s,i,"milliseconds");this._scrollRatio=c/d}}])}(S.Component);Yi.defaultProps={step:30,timeslots:2,resourceGroupingLayout:!1};var tV=["date","localizer","min","max","scrollToTime","enableAutoScroll"],Ju=function(e){function t(){return Nt(this,t),Jt(this,t,arguments)}return Ht(t,e),kt(t,[{key:"render",value:function(){var n=this.props,s=n.date,i=n.localizer,o=n.min,l=o===void 0?i.startOf(new Date,"day"):o,c=n.max,d=c===void 0?i.endOf(new Date,"day"):c,u=n.scrollToTime,f=u===void 0?i.startOf(new Date,"day"):u,h=n.enableAutoScroll,x=h===void 0?!0:h,v=cn(n,tV),y=t.range(s,{localizer:i});return $.createElement(Yi,Object.assign({},v,{range:y,eventOffset:10,localizer:i,min:l,max:d,scrollToTime:f,enableAutoScroll:x}))}}])}($.Component);Ju.range=function(e,t){var r=t.localizer;return[r.startOf(e,"day")]};Ju.navigate=function(e,t,r){var n=r.localizer;switch(t){case gr.PREVIOUS:return n.add(e,-1,"day");case gr.NEXT:return n.add(e,1,"day");default:return e}};Ju.title=function(e,t){var r=t.localizer;return r.format(e,"dayHeaderFormat")};var rV=["date","localizer","min","max","scrollToTime","enableAutoScroll"],za=function(e){function t(){return Nt(this,t),Jt(this,t,arguments)}return Ht(t,e),kt(t,[{key:"render",value:function(){var n=this.props,s=n.date,i=n.localizer,o=n.min,l=o===void 0?i.startOf(new Date,"day"):o,c=n.max,d=c===void 0?i.endOf(new Date,"day"):c,u=n.scrollToTime,f=u===void 0?i.startOf(new Date,"day"):u,h=n.enableAutoScroll,x=h===void 0?!0:h,v=cn(n,rV),y=t.range(s,this.props);return $.createElement(Yi,Object.assign({},v,{range:y,eventOffset:15,localizer:i,min:l,max:d,scrollToTime:f,enableAutoScroll:x}))}}])}($.Component);za.defaultProps=Yi.defaultProps;za.navigate=function(e,t,r){var n=r.localizer;switch(t){case gr.PREVIOUS:return n.add(e,-1,"week");case gr.NEXT:return n.add(e,1,"week");default:return e}};za.range=function(e,t){var r=t.localizer,n=r.startOfWeek(),s=r.startOf(e,"week",n),i=r.endOf(e,"week",n);return r.range(s,i)};za.title=function(e,t){var r=t.localizer,n=za.range(e,{localizer:r}),s=jN(n),i=s[0],o=s.slice(1);return r.format({start:i,end:o.pop()},"dayRangeHeaderFormat")};var nV=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function b0(e,t){return za.range(e,t).filter(function(r){return[6,0].indexOf(r.getDay())===-1})}var Gl=function(e){function t(){return Nt(this,t),Jt(this,t,arguments)}return Ht(t,e),kt(t,[{key:"render",value:function(){var n=this.props,s=n.date,i=n.localizer,o=n.min,l=o===void 0?i.startOf(new Date,"day"):o,c=n.max,d=c===void 0?i.endOf(new Date,"day"):c,u=n.scrollToTime,f=u===void 0?i.startOf(new Date,"day"):u,h=n.enableAutoScroll,x=h===void 0?!0:h,v=cn(n,nV),y=b0(s,this.props);return $.createElement(Yi,Object.assign({},v,{range:y,eventOffset:15,localizer:i,min:l,max:d,scrollToTime:f,enableAutoScroll:x}))}}])}($.Component);Gl.defaultProps=Yi.defaultProps;Gl.range=b0;Gl.navigate=za.navigate;Gl.title=function(e,t){var r=t.localizer,n=b0(e,{localizer:r}),s=jN(n),i=s[0],o=s.slice(1);return r.format({start:i,end:o.pop()},"dayRangeHeaderFormat")};var Qu=30;function Zu(e){var t=e.accessors,r=e.components,n=e.date,s=e.events,i=e.getters,o=e.length,l=o===void 0?Qu:o,c=e.localizer,d=e.onDoubleClickEvent,u=e.onSelectEvent,f=e.selected,h=S.useRef(null),x=S.useRef(null),v=S.useRef(null),y=S.useRef(null),w=S.useRef(null);S.useEffect(function(){j()});var g=function(T,O,M){var R=r.event,H=r.date;return O=O.filter(function(A){return yl(A,c.startOf(T,"day"),c.endOf(T,"day"),t,c)}),O.map(function(A,L){var ee=t.title(A),te=t.end(A),he=t.start(A),G=i.eventProp(A,he,te,Ku(A,f)),Z=L===0&&c.format(T,"agendaDateFormat"),ie=L===0?$.createElement("td",{rowSpan:O.length,className:"rbc-agenda-date-cell"},H?$.createElement(H,{day:T,label:Z}):Z):!1;return $.createElement("tr",{key:M+"_"+L,className:G.className,style:G.style},ie,$.createElement("td",{className:"rbc-agenda-time-cell"},p(T,A)),$.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(F){return u&&u(A,F)},onDoubleClick:function(F){return d&&d(A,F)}},R?$.createElement(R,{event:A,title:ee}):ee))},[])},p=function(T,O){var M="",R=r.time,H=c.messages.allDay,A=t.end(O),L=t.start(O);return t.allDay(O)||(c.eq(L,A)?H=c.format(L,"agendaTimeFormat"):c.isSameDate(L,A)?H=c.format({start:L,end:A},"agendaTimeRangeFormat"):c.isSameDate(T,L)?H=c.format(L,"agendaTimeFormat"):c.isSameDate(T,A)&&(H=c.format(A,"agendaTimeFormat"))),c.gt(T,L,"day")&&(M="rbc-continues-prior"),c.lt(T,A,"day")&&(M+=" rbc-continues-after"),$.createElement("span",{className:M.trim()},R?$.createElement(R,{event:O,day:T,label:H}):H)},j=function(){if(w.current){var T=h.current,O=w.current.firstChild;if(O){var M=y.current.scrollHeight>y.current.clientHeight,R=[],H=R;R=[Xm(O.children[0]),Xm(O.children[1])],(H[0]!==R[0]||H[1]!==R[1])&&(x.current.style.width=R[0]+"px",v.current.style.width=R[1]+"px"),M?(aR(T,"rbc-header-overflowing"),T.style.marginRight=Jg()+"px"):sR(T,"rbc-header-overflowing")}}},b=c.messages,N=c.add(n,l,"day"),C=c.range(n,N,"day");return s=s.filter(function(E){return yl(E,c.startOf(n,"day"),c.endOf(N,"day"),t,c)}),s.sort(function(E,T){return+t.start(E)-+t.start(T)}),$.createElement("div",{className:"rbc-agenda-view"},s.length!==0?$.createElement($.Fragment,null,$.createElement("table",{ref:h,className:"rbc-agenda-table"},$.createElement("thead",null,$.createElement("tr",null,$.createElement("th",{className:"rbc-header",ref:x},b.date),$.createElement("th",{className:"rbc-header",ref:v},b.time),$.createElement("th",{className:"rbc-header"},b.event)))),$.createElement("div",{className:"rbc-agenda-content",ref:y},$.createElement("table",{className:"rbc-agenda-table"},$.createElement("tbody",{ref:w},C.map(function(E,T){return g(E,s,T)}))))):$.createElement("span",{className:"rbc-agenda-empty"},b.noEventsInRange))}Zu.range=function(e,t){var r=t.length,n=r===void 0?Qu:r,s=t.localizer,i=s.add(e,n,"day");return{start:e,end:i}};Zu.navigate=function(e,t,r){var n=r.length,s=n===void 0?Qu:n,i=r.localizer;switch(t){case gr.PREVIOUS:return i.add(e,-s,"day");case gr.NEXT:return i.add(e,s,"day");default:return e}};Zu.title=function(e,t){var r=t.length,n=r===void 0?Qu:r,s=t.localizer,i=s.add(e,n,"day");return s.format({start:e,end:i},"agendaHeaderFormat")};var rd=es(es(es(es(es({},tr.MONTH,Xu),tr.WEEK,za),tr.WORK_WEEK,Gl),tr.DAY,Ju),tr.AGENDA,Zu),aV=["action","date","today"];function sV(e,t){var r=t.action,n=t.date,s=t.today,i=cn(t,aV);switch(e=typeof e=="string"?rd[e]:e,r){case gr.TODAY:n=s||new Date;break;case gr.DATE:break;default:il(e&&typeof e.navigate=="function","Calendar View components must implement a static `.navigate(date, action)` method.s"),n=e.navigate(n,r,i)}return n}function iV(e,t){var r=null;return typeof t=="function"?r=t(e):typeof t=="string"&&ta(e)==="object"&&e!=null&&t in e&&(r=e[t]),r}var An=function(t){return function(r){return iV(r,t)}},oV=["view","date","getNow","onNavigate"],lV=["view","toolbar","events","backgroundEvents","resourceGroupingLayout","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function KN(e){if(Array.isArray(e))return e;for(var t=[],r=0,n=Object.entries(e);r<n.length;r++){var s=Lr(n[r],2),i=s[0],o=s[1];o&&t.push(i)}return t}function cV(e,t){var r=t.views,n=KN(r);return n.indexOf(e)!==-1}var XN=function(e){function t(){var r;Nt(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Jt(this,t,[].concat(s)),r.getViews=function(){var o=r.props.views;return Array.isArray(o)?Iq(o,function(l,c){return l[c]=rd[c]},{}):ta(o)==="object"?IH(o,function(l,c){return l===!0?rd[c]:l}):rd},r.getView=function(){var o=r.getViews();return o[r.props.view]},r.getDrilldownView=function(o){var l=r.props,c=l.view,d=l.drilldownView,u=l.getDrilldownView;return u?u(o,c,Object.keys(r.getViews())):d},r.handleRangeChange=function(o,l,c){var d=r.props,u=d.onRangeChange,f=d.localizer;u&&l.range&&u(l.range(o,{localizer:f}),c)},r.handleNavigate=function(o,l){var c=r.props,d=c.view,u=c.date,f=c.getNow,h=c.onNavigate,x=cn(c,oV),v=r.getView(),y=f();u=sV(v,Ve(Ve({},x),{},{action:o,date:l||u||y,today:y})),h(u,d,o),r.handleRangeChange(u,v)},r.handleViewChange=function(o){o!==r.props.view&&cV(o,r.props)&&r.props.onView(o);var l=r.getViews();r.handleRangeChange(r.props.date||r.props.getNow(),l[o],o)},r.handleSelectEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Ze(r.props.onSelectEvent,l)},r.handleDoubleClickEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Ze(r.props.onDoubleClickEvent,l)},r.handleKeyPressEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Ze(r.props.onKeyPressEvent,l)},r.handleSelectSlot=function(o){Ze(r.props.onSelectSlot,o)},r.handleDrillDown=function(o,l){var c=r.props.onDrillDown;if(c){c(o,l,r.drilldownView);return}l&&r.handleViewChange(l),r.handleNavigate(gr.DATE,o)},r.state={context:t.getContext(r.props)},r}return Ht(t,e),kt(t,[{key:"render",value:function(){var n=this.props,s=n.view,i=n.toolbar,o=n.events,l=n.backgroundEvents,c=n.resourceGroupingLayout,d=n.style,u=n.className,f=n.elementProps,h=n.date,x=n.getNow,v=n.length,y=n.showMultiDayTimes,w=n.onShowMore,g=n.doShowMoreDrillDown;n.components,n.formats,n.messages,n.culture;var p=cn(n,lV);h=h||x();var j=this.getView(),b=this.state.context,N=b.accessors,C=b.components,E=b.getters,T=b.localizer,O=b.viewNames,M=C.toolbar||hY,R=j.title(h,{localizer:T,length:v});return $.createElement("div",Object.assign({},f,{className:ft(u,"rbc-calendar",p.rtl&&"rbc-rtl"),style:d}),i&&$.createElement(M,{date:h,view:s,views:O,label:R,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:T}),$.createElement(j,Object.assign({},p,{events:o,backgroundEvents:l,date:h,getNow:x,length:v,localizer:T,getters:E,components:C,accessors:N,showMultiDayTimes:y,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:w,doShowMoreDrillDown:g,resourceGroupingLayout:c})))}}],[{key:"getDerivedStateFromProps",value:function(n){return{context:t.getContext(n)}}},{key:"getContext",value:function(n){var s=n.startAccessor,i=n.endAccessor,o=n.allDayAccessor,l=n.tooltipAccessor,c=n.titleAccessor,d=n.resourceAccessor,u=n.resourceIdAccessor,f=n.resourceTitleAccessor,h=n.eventIdAccessor,x=n.eventPropGetter,v=n.backgroundEventPropGetter,y=n.slotPropGetter,w=n.slotGroupPropGetter,g=n.dayPropGetter,p=n.view,j=n.views,b=n.localizer,N=n.culture,C=n.messages,E=C===void 0?{}:C,T=n.components,O=T===void 0?{}:T,M=n.formats,R=M===void 0?{}:M,H=KN(j),A=mY(E);return{viewNames:H,localizer:uY(b,N,R,A),getters:{eventProp:function(){return x&&x.apply(void 0,arguments)||{}},backgroundEventProp:function(){return v&&v.apply(void 0,arguments)||{}},slotProp:function(){return y&&y.apply(void 0,arguments)||{}},slotGroupProp:function(){return w&&w.apply(void 0,arguments)||{}},dayProp:function(){return g&&g.apply(void 0,arguments)||{}}},components:OH(O[p]||{},Sq(O,H),{eventWrapper:vn,backgroundEventWrapper:vn,eventContainerWrapper:vn,dateCellWrapper:vn,weekWrapper:vn,timeSlotWrapper:vn,timeGutterWrapper:vn,timeIndicatorWrapper:vn}),accessors:{start:An(s),end:An(i),allDay:An(o),tooltip:An(l),title:An(c),resource:An(d),resourceId:An(u),resourceTitle:An(f),eventId:An(h)}}}}])}($.Component);XN.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:tr.MONTH,views:[tr.MONTH,tr.WEEK,tr.DAY,tr.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:tr.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",eventIdAccessor:"id",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var dV=Sk(XN,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),uV=function(t,r,n){var s=t.start,i=t.end;return n.format(s,"MMMM DD",r)+"  "+n.format(i,n.eq(s,i,"month")?"DD":"MMMM DD",r)},hV=function(t,r,n){var s=t.start,i=t.end;return n.format(s,"L",r)+"  "+n.format(i,"L",r)},xf=function(t,r,n){var s=t.start,i=t.end;return n.format(s,"LT",r)+"  "+n.format(i,"LT",r)},fV=function(t,r,n){var s=t.start;return n.format(s,"LT",r)+"  "},mV=function(t,r,n){var s=t.end;return"  "+n.format(s,"LT",r)},pV={dateFormat:"DD",dayFormat:"DD ddd",weekdayFormat:"ddd",selectRangeFormat:xf,eventTimeRangeFormat:xf,eventTimeRangeStartFormat:fV,eventTimeRangeEndFormat:mV,timeGutterFormat:"LT",monthHeaderFormat:"MMMM YYYY",dayHeaderFormat:"dddd MMM DD",dayRangeHeaderFormat:uV,agendaHeaderFormat:hV,agendaDateFormat:"ddd MMM DD",agendaTimeFormat:"LT",agendaTimeRangeFormat:xf};function fa(e){var t=e&&e.toLowerCase();return t==="FullYear"?t="year":t||(t=void 0),t}function gV(e){var t=function(F,Y){return Y?F.locale(Y):F};function r(I){return e(I).toDate().getTimezoneOffset()}function n(I,F){var Y,ae,V=e(I).local(),le=e(F).local();if(!e.tz)return V.toDate().getTimezoneOffset()-le.toDate().getTimezoneOffset();var xe=(Y=V==null||(ae=V._z)===null||ae===void 0?void 0:ae.name)!==null&&Y!==void 0?Y:e.tz.guess(),K=e.tz.zone(xe).utcOffset(+V),se=e.tz.zone(xe).utcOffset(+le);return K-se}function s(I){var F=e(I).startOf("day");return n(F,I)}function i(I,F,Y){var ae=fa(Y),V=ae?e(I).startOf(ae):e(I),le=ae?e(F).startOf(ae):e(F);return[V,le,ae]}function o(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,F=arguments.length>1?arguments[1]:void 0,Y=fa(F);return Y?e(I).startOf(Y).toDate():e(I).toDate()}function l(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,F=arguments.length>1?arguments[1]:void 0,Y=fa(F);return Y?e(I).endOf(Y).toDate():e(I).toDate()}function c(I,F,Y){var ae=i(I,F,Y),V=Lr(ae,3),le=V[0],xe=V[1],K=V[2];return le.isSame(xe,K)}function d(I,F,Y){return!c(I,F,Y)}function u(I,F,Y){var ae=i(I,F,Y),V=Lr(ae,3),le=V[0],xe=V[1],K=V[2];return le.isAfter(xe,K)}function f(I,F,Y){var ae=i(I,F,Y),V=Lr(ae,3),le=V[0],xe=V[1],K=V[2];return le.isBefore(xe,K)}function h(I,F,Y){var ae=i(I,F,Y),V=Lr(ae,3),le=V[0],xe=V[1],K=V[2];return le.isSameOrBefore(xe,K)}function x(I,F,Y){var ae=i(I,F,Y),V=Lr(ae,3),le=V[0],xe=V[1],K=V[2];return le.isSameOrBefore(xe,K)}function v(I,F,Y){var ae=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"day",V=fa(ae),le=e(I),xe=e(F),K=e(Y);return le.isBetween(xe,K,V,"[]")}function y(I,F){var Y=e(I),ae=e(F),V=e.min(Y,ae);return V.toDate()}function w(I,F){var Y=e(I),ae=e(F),V=e.max(Y,ae);return V.toDate()}function g(I,F){if(!I&&!F)return null;var Y=e(F).format("HH:mm:ss"),ae=e(I).startOf("day").format("MM/DD/YYYY");return e("".concat(ae," ").concat(Y),"MM/DD/YYYY HH:mm:ss").toDate()}function p(I,F,Y){var ae=fa(Y);return e(I).add(F,ae).toDate()}function j(I,F){for(var Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",ae=fa(Y),V=e(I).toDate(),le=[];x(V,F);)le.push(V),V=p(V,1,ae);return le}function b(I,F){var Y=fa(F),ae=o(I,Y);return c(ae,I)?ae:p(ae,1,Y)}function N(I,F){var Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",ae=fa(Y),V=e(I),le=e(F);return le.diff(V,ae)}function C(I){var F=e(I);return F.minutes()}function E(I){var F=I?e.localeData(I):e.localeData();return F?F.firstDayOfWeek():0}function T(I){return e(I).startOf("month").startOf("week").toDate()}function O(I){return e(I).endOf("month").endOf("week").toDate()}function M(I){for(var F=T(I),Y=O(I),ae=[];x(F,Y);)ae.push(F),F=p(F,1,"d");return ae}function R(I,F,Y){return e(I).startOf("day").minute(F+Y).toDate()}function H(I,F){return N(I,F,"minutes")}function A(I){var F=e(I).startOf("day"),Y=e(I);return Y.diff(F,"minutes")+s(I)}function L(I,F){var Y=e(I),ae=e(F);return Y.isBefore(ae,"day")}function ee(I,F,Y){var ae=e(F),V=e(Y);return ae.isSameOrAfter(V,"minutes")}function te(I,F){var Y=e(I),ae=e(F),V=e.duration(ae.diff(Y));return V.days()}function he(I){var F=I.evtA,Y=F.start,ae=F.end,V=F.allDay,le=I.evtB,xe=le.start,K=le.end,se=le.allDay,ye=+o(Y,"day")-+o(xe,"day"),ve=te(Y,ae),me=te(xe,K);return ye||me-ve||!!se-!!V||+Y-+xe||+ae-+K}function G(I){var F=I.event,Y=F.start,ae=F.end,V=I.range,le=V.start,xe=V.end,K=e(Y).startOf("day"),se=e(ae),ye=e(le),ve=e(xe),me=K.isSameOrBefore(ve,"day"),De=!K.isSame(se,"minutes"),W=De?se.isAfter(ye,"minutes"):se.isSameOrAfter(ye,"minutes");return me&&W}function Z(I,F){var Y=e(I),ae=e(F);return Y.isSame(ae,"day")}function ie(){var I=new Date,F=/-/.test(I.toString())?"-":"",Y=I.getTimezoneOffset(),ae=Number("".concat(F).concat(Math.abs(Y))),V=e().utcOffset();return V>ae?1:0}return new dY({formats:pV,firstOfWeek:E,firstVisibleDay:T,lastVisibleDay:O,visibleDays:M,format:function(F,Y,ae){return t(e(F),ae).format(Y)},lt:f,lte:x,gt:u,gte:h,eq:c,neq:d,merge:g,inRange:v,startOf:o,endOf:l,range:j,add:p,diff:N,ceil:b,min:y,max:w,minutes:C,getSlotDate:R,getTimezoneOffset:r,getDstOffset:n,getTotalMin:H,getMinutesFromMidnight:A,continuesPrior:L,continuesAfter:ee,sortEvents:he,inEventRange:G,isSameDate:Z,daySpan:te,browserTZOffset:ie})}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var JN;function oe(){return JN.apply(null,arguments)}function xV(e){JN=e}function un(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function ms(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function ze(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function w0(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(ze(e,t))return!1;return!0}function or(e){return e===void 0}function na(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function Kl(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function QN(e,t){var r=[],n,s=e.length;for(n=0;n<s;++n)r.push(t(e[n],n));return r}function ba(e,t){for(var r in t)ze(t,r)&&(e[r]=t[r]);return ze(t,"toString")&&(e.toString=t.toString),ze(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Mn(e,t,r,n){return w2(e,t,r,n,!0).utc()}function yV(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Se(e){return e._pf==null&&(e._pf=yV()),e._pf}var tp;Array.prototype.some?tp=Array.prototype.some:tp=function(e){var t=Object(this),r=t.length>>>0,n;for(n=0;n<r;n++)if(n in t&&e.call(this,t[n],n,t))return!0;return!1};function j0(e){var t=null,r=!1,n=e._d&&!isNaN(e._d.getTime());if(n&&(t=Se(e),r=tp.call(t.parsedDateParts,function(s){return s!=null}),n=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r),e._strict&&(n=n&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=n;else return n;return e._isValid}function eh(e){var t=Mn(NaN);return e!=null?ba(Se(t),e):Se(t).userInvalidated=!0,t}var Sb=oe.momentProperties=[],yf=!1;function k0(e,t){var r,n,s,i=Sb.length;if(or(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),or(t._i)||(e._i=t._i),or(t._f)||(e._f=t._f),or(t._l)||(e._l=t._l),or(t._strict)||(e._strict=t._strict),or(t._tzm)||(e._tzm=t._tzm),or(t._isUTC)||(e._isUTC=t._isUTC),or(t._offset)||(e._offset=t._offset),or(t._pf)||(e._pf=Se(t)),or(t._locale)||(e._locale=t._locale),i>0)for(r=0;r<i;r++)n=Sb[r],s=t[n],or(s)||(e[n]=s);return e}function Xl(e){k0(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),yf===!1&&(yf=!0,oe.updateOffset(this),yf=!1)}function hn(e){return e instanceof Xl||e!=null&&e._isAMomentObject!=null}function ZN(e){oe.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function Yr(e,t){var r=!0;return ba(function(){if(oe.deprecationHandler!=null&&oe.deprecationHandler(null,e),r){var n=[],s,i,o,l=arguments.length;for(i=0;i<l;i++){if(s="",typeof arguments[i]=="object"){s+=`
[`+i+"] ";for(o in arguments[0])ze(arguments[0],o)&&(s+=o+": "+arguments[0][o]+", ");s=s.slice(0,-2)}else s=arguments[i];n.push(s)}ZN(e+`
Arguments: `+Array.prototype.slice.call(n).join("")+`
`+new Error().stack),r=!1}return t.apply(this,arguments)},t)}var Cb={};function e2(e,t){oe.deprecationHandler!=null&&oe.deprecationHandler(e,t),Cb[e]||(ZN(t),Cb[e]=!0)}oe.suppressDeprecationWarnings=!1;oe.deprecationHandler=null;function $n(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function vV(e){var t,r;for(r in e)ze(e,r)&&(t=e[r],$n(t)?this[r]=t:this["_"+r]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function rp(e,t){var r=ba({},e),n;for(n in t)ze(t,n)&&(ms(e[n])&&ms(t[n])?(r[n]={},ba(r[n],e[n]),ba(r[n],t[n])):t[n]!=null?r[n]=t[n]:delete r[n]);for(n in e)ze(e,n)&&!ze(t,n)&&ms(e[n])&&(r[n]=ba({},r[n]));return r}function N0(e){e!=null&&this.set(e)}var np;Object.keys?np=Object.keys:np=function(e){var t,r=[];for(t in e)ze(e,t)&&r.push(t);return r};var bV={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function wV(e,t,r){var n=this._calendar[e]||this._calendar.sameElse;return $n(n)?n.call(t,r):n}function En(e,t,r){var n=""+Math.abs(e),s=t-n.length,i=e>=0;return(i?r?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+n}var _0=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Mc=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,vf={},ci={};function pe(e,t,r,n){var s=n;typeof n=="string"&&(s=function(){return this[n]()}),e&&(ci[e]=s),t&&(ci[t[0]]=function(){return En(s.apply(this,arguments),t[1],t[2])}),r&&(ci[r]=function(){return this.localeData().ordinal(s.apply(this,arguments),e)})}function jV(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function kV(e){var t=e.match(_0),r,n;for(r=0,n=t.length;r<n;r++)ci[t[r]]?t[r]=ci[t[r]]:t[r]=jV(t[r]);return function(s){var i="",o;for(o=0;o<n;o++)i+=$n(t[o])?t[o].call(s,e):t[o];return i}}function nd(e,t){return e.isValid()?(t=t2(t,e.localeData()),vf[t]=vf[t]||kV(t),vf[t](e)):e.localeData().invalidDate()}function t2(e,t){var r=5;function n(s){return t.longDateFormat(s)||s}for(Mc.lastIndex=0;r>=0&&Mc.test(e);)e=e.replace(Mc,n),Mc.lastIndex=0,r-=1;return e}var NV={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function _V(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return t||!r?t:(this._longDateFormat[e]=r.match(_0).map(function(n){return n==="MMMM"||n==="MM"||n==="DD"||n==="dddd"?n.slice(1):n}).join(""),this._longDateFormat[e])}var SV="Invalid date";function CV(){return this._invalidDate}var EV="%d",DV=/\d{1,2}/;function TV(e){return this._ordinal.replace("%d",e)}var PV={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function OV(e,t,r,n){var s=this._relativeTime[r];return $n(s)?s(e,t,r,n):s.replace(/%d/i,e)}function MV(e,t){var r=this._relativeTime[e>0?"future":"past"];return $n(r)?r(t):r.replace(/%s/i,t)}var Eb={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Vr(e){return typeof e=="string"?Eb[e]||Eb[e.toLowerCase()]:void 0}function S0(e){var t={},r,n;for(n in e)ze(e,n)&&(r=Vr(n),r&&(t[r]=e[n]));return t}var $V={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function RV(e){var t=[],r;for(r in e)ze(e,r)&&t.push({unit:r,priority:$V[r]});return t.sort(function(n,s){return n.priority-s.priority}),t}var r2=/\d/,Dr=/\d\d/,n2=/\d{3}/,C0=/\d{4}/,th=/[+-]?\d{6}/,rt=/\d\d?/,a2=/\d\d\d\d?/,s2=/\d\d\d\d\d\d?/,rh=/\d{1,3}/,E0=/\d{1,4}/,nh=/[+-]?\d{1,6}/,Vi=/\d+/,ah=/[+-]?\d+/,LV=/Z|[+-]\d\d:?\d\d/gi,sh=/Z|[+-]\d\d(?::?\d\d)?/gi,AV=/[+-]?\d+(\.\d{1,3})?/,Jl=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Gi=/^[1-9]\d?/,D0=/^([1-9]\d|\d)/,qd;qd={};function de(e,t,r){qd[e]=$n(t)?t:function(n,s){return n&&r?r:t}}function zV(e,t){return ze(qd,e)?qd[e](t._strict,t._locale):new RegExp(IV(e))}function IV(e){return Gn(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,r,n,s,i){return r||n||s||i}))}function Gn(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Rr(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Oe(e){var t=+e,r=0;return t!==0&&isFinite(t)&&(r=Rr(t)),r}var ap={};function Ye(e,t){var r,n=t,s;for(typeof e=="string"&&(e=[e]),na(t)&&(n=function(i,o){o[t]=Oe(i)}),s=e.length,r=0;r<s;r++)ap[e[r]]=n}function Ql(e,t){Ye(e,function(r,n,s,i){s._w=s._w||{},t(r,s._w,s,i)})}function FV(e,t,r){t!=null&&ze(ap,e)&&ap[e](t,r._a,r,e)}function ih(e){return e%4===0&&e%100!==0||e%400===0}var Gt=0,Un=1,wn=2,Et=3,rn=4,qn=5,is=6,HV=7,WV=8;pe("Y",0,0,function(){var e=this.year();return e<=9999?En(e,4):"+"+e});pe(0,["YY",2],0,function(){return this.year()%100});pe(0,["YYYY",4],0,"year");pe(0,["YYYYY",5],0,"year");pe(0,["YYYYYY",6,!0],0,"year");de("Y",ah);de("YY",rt,Dr);de("YYYY",E0,C0);de("YYYYY",nh,th);de("YYYYYY",nh,th);Ye(["YYYYY","YYYYYY"],Gt);Ye("YYYY",function(e,t){t[Gt]=e.length===2?oe.parseTwoDigitYear(e):Oe(e)});Ye("YY",function(e,t){t[Gt]=oe.parseTwoDigitYear(e)});Ye("Y",function(e,t){t[Gt]=parseInt(e,10)});function zo(e){return ih(e)?366:365}oe.parseTwoDigitYear=function(e){return Oe(e)+(Oe(e)>68?1900:2e3)};var i2=Ki("FullYear",!0);function BV(){return ih(this.year())}function Ki(e,t){return function(r){return r!=null?(o2(this,e,r),oe.updateOffset(this,t),this):bl(this,e)}}function bl(e,t){if(!e.isValid())return NaN;var r=e._d,n=e._isUTC;switch(t){case"Milliseconds":return n?r.getUTCMilliseconds():r.getMilliseconds();case"Seconds":return n?r.getUTCSeconds():r.getSeconds();case"Minutes":return n?r.getUTCMinutes():r.getMinutes();case"Hours":return n?r.getUTCHours():r.getHours();case"Date":return n?r.getUTCDate():r.getDate();case"Day":return n?r.getUTCDay():r.getDay();case"Month":return n?r.getUTCMonth():r.getMonth();case"FullYear":return n?r.getUTCFullYear():r.getFullYear();default:return NaN}}function o2(e,t,r){var n,s,i,o,l;if(!(!e.isValid()||isNaN(r))){switch(n=e._d,s=e._isUTC,t){case"Milliseconds":return void(s?n.setUTCMilliseconds(r):n.setMilliseconds(r));case"Seconds":return void(s?n.setUTCSeconds(r):n.setSeconds(r));case"Minutes":return void(s?n.setUTCMinutes(r):n.setMinutes(r));case"Hours":return void(s?n.setUTCHours(r):n.setHours(r));case"Date":return void(s?n.setUTCDate(r):n.setDate(r));case"FullYear":break;default:return}i=r,o=e.month(),l=e.date(),l=l===29&&o===1&&!ih(i)?28:l,s?n.setUTCFullYear(i,o,l):n.setFullYear(i,o,l)}}function UV(e){return e=Vr(e),$n(this[e])?this[e]():this}function qV(e,t){if(typeof e=="object"){e=S0(e);var r=RV(e),n,s=r.length;for(n=0;n<s;n++)this[r[n].unit](e[r[n].unit])}else if(e=Vr(e),$n(this[e]))return this[e](t);return this}function YV(e,t){return(e%t+t)%t}var pt;Array.prototype.indexOf?pt=Array.prototype.indexOf:pt=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function T0(e,t){if(isNaN(e)||isNaN(t))return NaN;var r=YV(t,12);return e+=(t-r)/12,r===1?ih(e)?29:28:31-r%7%2}pe("M",["MM",2],"Mo",function(){return this.month()+1});pe("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});pe("MMMM",0,0,function(e){return this.localeData().months(this,e)});de("M",rt,Gi);de("MM",rt,Dr);de("MMM",function(e,t){return t.monthsShortRegex(e)});de("MMMM",function(e,t){return t.monthsRegex(e)});Ye(["M","MM"],function(e,t){t[Un]=Oe(e)-1});Ye(["MMM","MMMM"],function(e,t,r,n){var s=r._locale.monthsParse(e,n,r._strict);s!=null?t[Un]=s:Se(r).invalidMonth=e});var VV="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),l2="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),c2=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,GV=Jl,KV=Jl;function XV(e,t){return e?un(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||c2).test(t)?"format":"standalone"][e.month()]:un(this._months)?this._months:this._months.standalone}function JV(e,t){return e?un(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[c2.test(t)?"format":"standalone"][e.month()]:un(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function QV(e,t,r){var n,s,i,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)i=Mn([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(i,"").toLocaleLowerCase();return r?t==="MMM"?(s=pt.call(this._shortMonthsParse,o),s!==-1?s:null):(s=pt.call(this._longMonthsParse,o),s!==-1?s:null):t==="MMM"?(s=pt.call(this._shortMonthsParse,o),s!==-1?s:(s=pt.call(this._longMonthsParse,o),s!==-1?s:null)):(s=pt.call(this._longMonthsParse,o),s!==-1?s:(s=pt.call(this._shortMonthsParse,o),s!==-1?s:null))}function ZV(e,t,r){var n,s,i;if(this._monthsParseExact)return QV.call(this,e,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(s=Mn([2e3,n]),r&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),!r&&!this._monthsParse[n]&&(i="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[n]=new RegExp(i.replace(".",""),"i")),r&&t==="MMMM"&&this._longMonthsParse[n].test(e))return n;if(r&&t==="MMM"&&this._shortMonthsParse[n].test(e))return n;if(!r&&this._monthsParse[n].test(e))return n}}function d2(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=Oe(t);else if(t=e.localeData().monthsParse(t),!na(t))return e}var r=t,n=e.date();return n=n<29?n:Math.min(n,T0(e.year(),r)),e._isUTC?e._d.setUTCMonth(r,n):e._d.setMonth(r,n),e}function u2(e){return e!=null?(d2(this,e),oe.updateOffset(this,!0),this):bl(this,"Month")}function eG(){return T0(this.year(),this.month())}function tG(e){return this._monthsParseExact?(ze(this,"_monthsRegex")||h2.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(ze(this,"_monthsShortRegex")||(this._monthsShortRegex=GV),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function rG(e){return this._monthsParseExact?(ze(this,"_monthsRegex")||h2.call(this),e?this._monthsStrictRegex:this._monthsRegex):(ze(this,"_monthsRegex")||(this._monthsRegex=KV),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function h2(){function e(c,d){return d.length-c.length}var t=[],r=[],n=[],s,i,o,l;for(s=0;s<12;s++)i=Mn([2e3,s]),o=Gn(this.monthsShort(i,"")),l=Gn(this.months(i,"")),t.push(o),r.push(l),n.push(l),n.push(o);t.sort(e),r.sort(e),n.sort(e),this._monthsRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function nG(e,t,r,n,s,i,o){var l;return e<100&&e>=0?(l=new Date(e+400,t,r,n,s,i,o),isFinite(l.getFullYear())&&l.setFullYear(e)):l=new Date(e,t,r,n,s,i,o),l}function wl(e){var t,r;return e<100&&e>=0?(r=Array.prototype.slice.call(arguments),r[0]=e+400,t=new Date(Date.UTC.apply(null,r)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Yd(e,t,r){var n=7+t-r,s=(7+wl(e,0,n).getUTCDay()-t)%7;return-s+n-1}function f2(e,t,r,n,s){var i=(7+r-n)%7,o=Yd(e,n,s),l=1+7*(t-1)+i+o,c,d;return l<=0?(c=e-1,d=zo(c)+l):l>zo(e)?(c=e+1,d=l-zo(e)):(c=e,d=l),{year:c,dayOfYear:d}}function jl(e,t,r){var n=Yd(e.year(),t,r),s=Math.floor((e.dayOfYear()-n-1)/7)+1,i,o;return s<1?(o=e.year()-1,i=s+Kn(o,t,r)):s>Kn(e.year(),t,r)?(i=s-Kn(e.year(),t,r),o=e.year()+1):(o=e.year(),i=s),{week:i,year:o}}function Kn(e,t,r){var n=Yd(e,t,r),s=Yd(e+1,t,r);return(zo(e)-n+s)/7}pe("w",["ww",2],"wo","week");pe("W",["WW",2],"Wo","isoWeek");de("w",rt,Gi);de("ww",rt,Dr);de("W",rt,Gi);de("WW",rt,Dr);Ql(["w","ww","W","WW"],function(e,t,r,n){t[n.substr(0,1)]=Oe(e)});function aG(e){return jl(e,this._week.dow,this._week.doy).week}var sG={dow:0,doy:6};function iG(){return this._week.dow}function oG(){return this._week.doy}function lG(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function cG(e){var t=jl(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}pe("d",0,"do","day");pe("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});pe("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});pe("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});pe("e",0,0,"weekday");pe("E",0,0,"isoWeekday");de("d",rt);de("e",rt);de("E",rt);de("dd",function(e,t){return t.weekdaysMinRegex(e)});de("ddd",function(e,t){return t.weekdaysShortRegex(e)});de("dddd",function(e,t){return t.weekdaysRegex(e)});Ql(["dd","ddd","dddd"],function(e,t,r,n){var s=r._locale.weekdaysParse(e,n,r._strict);s!=null?t.d=s:Se(r).invalidWeekday=e});Ql(["d","e","E"],function(e,t,r,n){t[n]=Oe(e)});function dG(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function uG(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function P0(e,t){return e.slice(t,7).concat(e.slice(0,t))}var hG="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),m2="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),fG="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),mG=Jl,pG=Jl,gG=Jl;function xG(e,t){var r=un(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?P0(r,this._week.dow):e?r[e.day()]:r}function yG(e){return e===!0?P0(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function vG(e){return e===!0?P0(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function bG(e,t,r){var n,s,i,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)i=Mn([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(i,"").toLocaleLowerCase();return r?t==="dddd"?(s=pt.call(this._weekdaysParse,o),s!==-1?s:null):t==="ddd"?(s=pt.call(this._shortWeekdaysParse,o),s!==-1?s:null):(s=pt.call(this._minWeekdaysParse,o),s!==-1?s:null):t==="dddd"?(s=pt.call(this._weekdaysParse,o),s!==-1||(s=pt.call(this._shortWeekdaysParse,o),s!==-1)?s:(s=pt.call(this._minWeekdaysParse,o),s!==-1?s:null)):t==="ddd"?(s=pt.call(this._shortWeekdaysParse,o),s!==-1||(s=pt.call(this._weekdaysParse,o),s!==-1)?s:(s=pt.call(this._minWeekdaysParse,o),s!==-1?s:null)):(s=pt.call(this._minWeekdaysParse,o),s!==-1||(s=pt.call(this._weekdaysParse,o),s!==-1)?s:(s=pt.call(this._shortWeekdaysParse,o),s!==-1?s:null))}function wG(e,t,r){var n,s,i;if(this._weekdaysParseExact)return bG.call(this,e,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(s=Mn([2e3,1]).day(n),r&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(i="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[n]=new RegExp(i.replace(".",""),"i")),r&&t==="dddd"&&this._fullWeekdaysParse[n].test(e))return n;if(r&&t==="ddd"&&this._shortWeekdaysParse[n].test(e))return n;if(r&&t==="dd"&&this._minWeekdaysParse[n].test(e))return n;if(!r&&this._weekdaysParse[n].test(e))return n}}function jG(e){if(!this.isValid())return e!=null?this:NaN;var t=bl(this,"Day");return e!=null?(e=dG(e,this.localeData()),this.add(e-t,"d")):t}function kG(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function NG(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=uG(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function _G(e){return this._weekdaysParseExact?(ze(this,"_weekdaysRegex")||O0.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(ze(this,"_weekdaysRegex")||(this._weekdaysRegex=mG),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function SG(e){return this._weekdaysParseExact?(ze(this,"_weekdaysRegex")||O0.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(ze(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=pG),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function CG(e){return this._weekdaysParseExact?(ze(this,"_weekdaysRegex")||O0.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(ze(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=gG),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function O0(){function e(u,f){return f.length-u.length}var t=[],r=[],n=[],s=[],i,o,l,c,d;for(i=0;i<7;i++)o=Mn([2e3,1]).day(i),l=Gn(this.weekdaysMin(o,"")),c=Gn(this.weekdaysShort(o,"")),d=Gn(this.weekdays(o,"")),t.push(l),r.push(c),n.push(d),s.push(l),s.push(c),s.push(d);t.sort(e),r.sort(e),n.sort(e),s.sort(e),this._weekdaysRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function M0(){return this.hours()%12||12}function EG(){return this.hours()||24}pe("H",["HH",2],0,"hour");pe("h",["hh",2],0,M0);pe("k",["kk",2],0,EG);pe("hmm",0,0,function(){return""+M0.apply(this)+En(this.minutes(),2)});pe("hmmss",0,0,function(){return""+M0.apply(this)+En(this.minutes(),2)+En(this.seconds(),2)});pe("Hmm",0,0,function(){return""+this.hours()+En(this.minutes(),2)});pe("Hmmss",0,0,function(){return""+this.hours()+En(this.minutes(),2)+En(this.seconds(),2)});function p2(e,t){pe(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}p2("a",!0);p2("A",!1);function g2(e,t){return t._meridiemParse}de("a",g2);de("A",g2);de("H",rt,D0);de("h",rt,Gi);de("k",rt,Gi);de("HH",rt,Dr);de("hh",rt,Dr);de("kk",rt,Dr);de("hmm",a2);de("hmmss",s2);de("Hmm",a2);de("Hmmss",s2);Ye(["H","HH"],Et);Ye(["k","kk"],function(e,t,r){var n=Oe(e);t[Et]=n===24?0:n});Ye(["a","A"],function(e,t,r){r._isPm=r._locale.isPM(e),r._meridiem=e});Ye(["h","hh"],function(e,t,r){t[Et]=Oe(e),Se(r).bigHour=!0});Ye("hmm",function(e,t,r){var n=e.length-2;t[Et]=Oe(e.substr(0,n)),t[rn]=Oe(e.substr(n)),Se(r).bigHour=!0});Ye("hmmss",function(e,t,r){var n=e.length-4,s=e.length-2;t[Et]=Oe(e.substr(0,n)),t[rn]=Oe(e.substr(n,2)),t[qn]=Oe(e.substr(s)),Se(r).bigHour=!0});Ye("Hmm",function(e,t,r){var n=e.length-2;t[Et]=Oe(e.substr(0,n)),t[rn]=Oe(e.substr(n))});Ye("Hmmss",function(e,t,r){var n=e.length-4,s=e.length-2;t[Et]=Oe(e.substr(0,n)),t[rn]=Oe(e.substr(n,2)),t[qn]=Oe(e.substr(s))});function DG(e){return(e+"").toLowerCase().charAt(0)==="p"}var TG=/[ap]\.?m?\.?/i,PG=Ki("Hours",!0);function OG(e,t,r){return e>11?r?"pm":"PM":r?"am":"AM"}var x2={calendar:bV,longDateFormat:NV,invalidDate:SV,ordinal:EV,dayOfMonthOrdinalParse:DV,relativeTime:PV,months:VV,monthsShort:l2,week:sG,weekdays:hG,weekdaysMin:fG,weekdaysShort:m2,meridiemParse:TG},at={},po={},kl;function MG(e,t){var r,n=Math.min(e.length,t.length);for(r=0;r<n;r+=1)if(e[r]!==t[r])return r;return n}function Db(e){return e&&e.toLowerCase().replace("_","-")}function $G(e){for(var t=0,r,n,s,i;t<e.length;){for(i=Db(e[t]).split("-"),r=i.length,n=Db(e[t+1]),n=n?n.split("-"):null;r>0;){if(s=oh(i.slice(0,r).join("-")),s)return s;if(n&&n.length>=r&&MG(i,n)>=r-1)break;r--}t++}return kl}function RG(e){return!!(e&&e.match("^[^/\\\\]*$"))}function oh(e){var t=null,r;if(at[e]===void 0&&typeof id<"u"&&id&&id.exports&&RG(e))try{t=kl._abbr,r=require,r("./locale/"+e),Ma(t)}catch{at[e]=null}return at[e]}function Ma(e,t){var r;return e&&(or(t)?r=oa(e):r=$0(e,t),r?kl=r:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),kl._abbr}function $0(e,t){if(t!==null){var r,n=x2;if(t.abbr=e,at[e]!=null)e2("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=at[e]._config;else if(t.parentLocale!=null)if(at[t.parentLocale]!=null)n=at[t.parentLocale]._config;else if(r=oh(t.parentLocale),r!=null)n=r._config;else return po[t.parentLocale]||(po[t.parentLocale]=[]),po[t.parentLocale].push({name:e,config:t}),null;return at[e]=new N0(rp(n,t)),po[e]&&po[e].forEach(function(s){$0(s.name,s.config)}),Ma(e),at[e]}else return delete at[e],null}function LG(e,t){if(t!=null){var r,n,s=x2;at[e]!=null&&at[e].parentLocale!=null?at[e].set(rp(at[e]._config,t)):(n=oh(e),n!=null&&(s=n._config),t=rp(s,t),n==null&&(t.abbr=e),r=new N0(t),r.parentLocale=at[e],at[e]=r),Ma(e)}else at[e]!=null&&(at[e].parentLocale!=null?(at[e]=at[e].parentLocale,e===Ma()&&Ma(e)):at[e]!=null&&delete at[e]);return at[e]}function oa(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return kl;if(!un(e)){if(t=oh(e),t)return t;e=[e]}return $G(e)}function AG(){return np(at)}function R0(e){var t,r=e._a;return r&&Se(e).overflow===-2&&(t=r[Un]<0||r[Un]>11?Un:r[wn]<1||r[wn]>T0(r[Gt],r[Un])?wn:r[Et]<0||r[Et]>24||r[Et]===24&&(r[rn]!==0||r[qn]!==0||r[is]!==0)?Et:r[rn]<0||r[rn]>59?rn:r[qn]<0||r[qn]>59?qn:r[is]<0||r[is]>999?is:-1,Se(e)._overflowDayOfYear&&(t<Gt||t>wn)&&(t=wn),Se(e)._overflowWeeks&&t===-1&&(t=HV),Se(e)._overflowWeekday&&t===-1&&(t=WV),Se(e).overflow=t),e}var zG=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,IG=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,FG=/Z|[+-]\d\d(?::?\d\d)?/,$c=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],bf=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],HG=/^\/?Date\((-?\d+)/i,WG=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,BG={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function y2(e){var t,r,n=e._i,s=zG.exec(n)||IG.exec(n),i,o,l,c,d=$c.length,u=bf.length;if(s){for(Se(e).iso=!0,t=0,r=d;t<r;t++)if($c[t][1].exec(s[1])){o=$c[t][0],i=$c[t][2]!==!1;break}if(o==null){e._isValid=!1;return}if(s[3]){for(t=0,r=u;t<r;t++)if(bf[t][1].exec(s[3])){l=(s[2]||" ")+bf[t][0];break}if(l==null){e._isValid=!1;return}}if(!i&&l!=null){e._isValid=!1;return}if(s[4])if(FG.exec(s[4]))c="Z";else{e._isValid=!1;return}e._f=o+(l||"")+(c||""),A0(e)}else e._isValid=!1}function UG(e,t,r,n,s,i){var o=[qG(e),l2.indexOf(t),parseInt(r,10),parseInt(n,10),parseInt(s,10)];return i&&o.push(parseInt(i,10)),o}function qG(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function YG(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function VG(e,t,r){if(e){var n=m2.indexOf(e),s=new Date(t[0],t[1],t[2]).getDay();if(n!==s)return Se(r).weekdayMismatch=!0,r._isValid=!1,!1}return!0}function GG(e,t,r){if(e)return BG[e];if(t)return 0;var n=parseInt(r,10),s=n%100,i=(n-s)/100;return i*60+s}function v2(e){var t=WG.exec(YG(e._i)),r;if(t){if(r=UG(t[4],t[3],t[2],t[5],t[6],t[7]),!VG(t[1],r,e))return;e._a=r,e._tzm=GG(t[8],t[9],t[10]),e._d=wl.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),Se(e).rfc2822=!0}else e._isValid=!1}function KG(e){var t=HG.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(y2(e),e._isValid===!1)delete e._isValid;else return;if(v2(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:oe.createFromInputFallback(e)}oe.createFromInputFallback=Yr("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Hs(e,t,r){return e??t??r}function XG(e){var t=new Date(oe.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function L0(e){var t,r,n=[],s,i,o;if(!e._d){for(s=XG(e),e._w&&e._a[wn]==null&&e._a[Un]==null&&JG(e),e._dayOfYear!=null&&(o=Hs(e._a[Gt],s[Gt]),(e._dayOfYear>zo(o)||e._dayOfYear===0)&&(Se(e)._overflowDayOfYear=!0),r=wl(o,0,e._dayOfYear),e._a[Un]=r.getUTCMonth(),e._a[wn]=r.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=n[t]=s[t];for(;t<7;t++)e._a[t]=n[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[Et]===24&&e._a[rn]===0&&e._a[qn]===0&&e._a[is]===0&&(e._nextDay=!0,e._a[Et]=0),e._d=(e._useUTC?wl:nG).apply(null,n),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Et]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==i&&(Se(e).weekdayMismatch=!0)}}function JG(e){var t,r,n,s,i,o,l,c,d;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(i=1,o=4,r=Hs(t.GG,e._a[Gt],jl(tt(),1,4).year),n=Hs(t.W,1),s=Hs(t.E,1),(s<1||s>7)&&(c=!0)):(i=e._locale._week.dow,o=e._locale._week.doy,d=jl(tt(),i,o),r=Hs(t.gg,e._a[Gt],d.year),n=Hs(t.w,d.week),t.d!=null?(s=t.d,(s<0||s>6)&&(c=!0)):t.e!=null?(s=t.e+i,(t.e<0||t.e>6)&&(c=!0)):s=i),n<1||n>Kn(r,i,o)?Se(e)._overflowWeeks=!0:c!=null?Se(e)._overflowWeekday=!0:(l=f2(r,n,s,i,o),e._a[Gt]=l.year,e._dayOfYear=l.dayOfYear)}oe.ISO_8601=function(){};oe.RFC_2822=function(){};function A0(e){if(e._f===oe.ISO_8601){y2(e);return}if(e._f===oe.RFC_2822){v2(e);return}e._a=[],Se(e).empty=!0;var t=""+e._i,r,n,s,i,o,l=t.length,c=0,d,u;for(s=t2(e._f,e._locale).match(_0)||[],u=s.length,r=0;r<u;r++)i=s[r],n=(t.match(zV(i,e))||[])[0],n&&(o=t.substr(0,t.indexOf(n)),o.length>0&&Se(e).unusedInput.push(o),t=t.slice(t.indexOf(n)+n.length),c+=n.length),ci[i]?(n?Se(e).empty=!1:Se(e).unusedTokens.push(i),FV(i,n,e)):e._strict&&!n&&Se(e).unusedTokens.push(i);Se(e).charsLeftOver=l-c,t.length>0&&Se(e).unusedInput.push(t),e._a[Et]<=12&&Se(e).bigHour===!0&&e._a[Et]>0&&(Se(e).bigHour=void 0),Se(e).parsedDateParts=e._a.slice(0),Se(e).meridiem=e._meridiem,e._a[Et]=QG(e._locale,e._a[Et],e._meridiem),d=Se(e).era,d!==null&&(e._a[Gt]=e._locale.erasConvertYear(d,e._a[Gt])),L0(e),R0(e)}function QG(e,t,r){var n;return r==null?t:e.meridiemHour!=null?e.meridiemHour(t,r):(e.isPM!=null&&(n=e.isPM(r),n&&t<12&&(t+=12),!n&&t===12&&(t=0)),t)}function ZG(e){var t,r,n,s,i,o,l=!1,c=e._f.length;if(c===0){Se(e).invalidFormat=!0,e._d=new Date(NaN);return}for(s=0;s<c;s++)i=0,o=!1,t=k0({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[s],A0(t),j0(t)&&(o=!0),i+=Se(t).charsLeftOver,i+=Se(t).unusedTokens.length*10,Se(t).score=i,l?i<n&&(n=i,r=t):(n==null||i<n||o)&&(n=i,r=t,o&&(l=!0));ba(e,r||t)}function eK(e){if(!e._d){var t=S0(e._i),r=t.day===void 0?t.date:t.day;e._a=QN([t.year,t.month,r,t.hour,t.minute,t.second,t.millisecond],function(n){return n&&parseInt(n,10)}),L0(e)}}function tK(e){var t=new Xl(R0(b2(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function b2(e){var t=e._i,r=e._f;return e._locale=e._locale||oa(e._l),t===null||r===void 0&&t===""?eh({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),hn(t)?new Xl(R0(t)):(Kl(t)?e._d=t:un(r)?ZG(e):r?A0(e):rK(e),j0(e)||(e._d=null),e))}function rK(e){var t=e._i;or(t)?e._d=new Date(oe.now()):Kl(t)?e._d=new Date(t.valueOf()):typeof t=="string"?KG(e):un(t)?(e._a=QN(t.slice(0),function(r){return parseInt(r,10)}),L0(e)):ms(t)?eK(e):na(t)?e._d=new Date(t):oe.createFromInputFallback(e)}function w2(e,t,r,n,s){var i={};return(t===!0||t===!1)&&(n=t,t=void 0),(r===!0||r===!1)&&(n=r,r=void 0),(ms(e)&&w0(e)||un(e)&&e.length===0)&&(e=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=s,i._l=r,i._i=e,i._f=t,i._strict=n,tK(i)}function tt(e,t,r,n){return w2(e,t,r,n,!1)}var nK=Yr("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=tt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:eh()}),aK=Yr("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=tt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:eh()});function j2(e,t){var r,n;if(t.length===1&&un(t[0])&&(t=t[0]),!t.length)return tt();for(r=t[0],n=1;n<t.length;++n)(!t[n].isValid()||t[n][e](r))&&(r=t[n]);return r}function sK(){var e=[].slice.call(arguments,0);return j2("isBefore",e)}function iK(){var e=[].slice.call(arguments,0);return j2("isAfter",e)}var oK=function(){return Date.now?Date.now():+new Date},go=["year","quarter","month","week","day","hour","minute","second","millisecond"];function lK(e){var t,r=!1,n,s=go.length;for(t in e)if(ze(e,t)&&!(pt.call(go,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(n=0;n<s;++n)if(e[go[n]]){if(r)return!1;parseFloat(e[go[n]])!==Oe(e[go[n]])&&(r=!0)}return!0}function cK(){return this._isValid}function dK(){return fn(NaN)}function lh(e){var t=S0(e),r=t.year||0,n=t.quarter||0,s=t.month||0,i=t.week||t.isoWeek||0,o=t.day||0,l=t.hour||0,c=t.minute||0,d=t.second||0,u=t.millisecond||0;this._isValid=lK(t),this._milliseconds=+u+d*1e3+c*6e4+l*1e3*60*60,this._days=+o+i*7,this._months=+s+n*3+r*12,this._data={},this._locale=oa(),this._bubble()}function ad(e){return e instanceof lh}function sp(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function uK(e,t,r){var n=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),i=0,o;for(o=0;o<n;o++)Oe(e[o])!==Oe(t[o])&&i++;return i+s}function k2(e,t){pe(e,0,0,function(){var r=this.utcOffset(),n="+";return r<0&&(r=-r,n="-"),n+En(~~(r/60),2)+t+En(~~r%60,2)})}k2("Z",":");k2("ZZ","");de("Z",sh);de("ZZ",sh);Ye(["Z","ZZ"],function(e,t,r){r._useUTC=!0,r._tzm=z0(sh,e)});var hK=/([\+\-]|\d\d)/gi;function z0(e,t){var r=(t||"").match(e),n,s,i;return r===null?null:(n=r[r.length-1]||[],s=(n+"").match(hK)||["-",0,0],i=+(s[1]*60)+Oe(s[2]),i===0?0:s[0]==="+"?i:-i)}function I0(e,t){var r,n;return t._isUTC?(r=t.clone(),n=(hn(e)||Kl(e)?e.valueOf():tt(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+n),oe.updateOffset(r,!1),r):tt(e).local()}function ip(e){return-Math.round(e._d.getTimezoneOffset())}oe.updateOffset=function(){};function fK(e,t,r){var n=this._offset||0,s;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=z0(sh,e),e===null)return this}else Math.abs(e)<16&&!r&&(e=e*60);return!this._isUTC&&t&&(s=ip(this)),this._offset=e,this._isUTC=!0,s!=null&&this.add(s,"m"),n!==e&&(!t||this._changeInProgress?S2(this,fn(e-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,oe.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?n:ip(this)}function mK(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function pK(e){return this.utcOffset(0,e)}function gK(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(ip(this),"m")),this}function xK(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=z0(LV,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function yK(e){return this.isValid()?(e=e?tt(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function vK(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function bK(){if(!or(this._isDSTShifted))return this._isDSTShifted;var e={},t;return k0(e,this),e=b2(e),e._a?(t=e._isUTC?Mn(e._a):tt(e._a),this._isDSTShifted=this.isValid()&&uK(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function wK(){return this.isValid()?!this._isUTC:!1}function jK(){return this.isValid()?this._isUTC:!1}function N2(){return this.isValid()?this._isUTC&&this._offset===0:!1}var kK=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,NK=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function fn(e,t){var r=e,n=null,s,i,o;return ad(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:na(e)||!isNaN(+e)?(r={},t?r[t]=+e:r.milliseconds=+e):(n=kK.exec(e))?(s=n[1]==="-"?-1:1,r={y:0,d:Oe(n[wn])*s,h:Oe(n[Et])*s,m:Oe(n[rn])*s,s:Oe(n[qn])*s,ms:Oe(sp(n[is]*1e3))*s}):(n=NK.exec(e))?(s=n[1]==="-"?-1:1,r={y:Xa(n[2],s),M:Xa(n[3],s),w:Xa(n[4],s),d:Xa(n[5],s),h:Xa(n[6],s),m:Xa(n[7],s),s:Xa(n[8],s)}):r==null?r={}:typeof r=="object"&&("from"in r||"to"in r)&&(o=_K(tt(r.from),tt(r.to)),r={},r.ms=o.milliseconds,r.M=o.months),i=new lh(r),ad(e)&&ze(e,"_locale")&&(i._locale=e._locale),ad(e)&&ze(e,"_isValid")&&(i._isValid=e._isValid),i}fn.fn=lh.prototype;fn.invalid=dK;function Xa(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function Tb(e,t){var r={};return r.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(r.months,"M").isAfter(t)&&--r.months,r.milliseconds=+t-+e.clone().add(r.months,"M"),r}function _K(e,t){var r;return e.isValid()&&t.isValid()?(t=I0(t,e),e.isBefore(t)?r=Tb(e,t):(r=Tb(t,e),r.milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}function _2(e,t){return function(r,n){var s,i;return n!==null&&!isNaN(+n)&&(e2(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=r,r=n,n=i),s=fn(r,n),S2(this,s,e),this}}function S2(e,t,r,n){var s=t._milliseconds,i=sp(t._days),o=sp(t._months);e.isValid()&&(n=n??!0,o&&d2(e,bl(e,"Month")+o*r),i&&o2(e,"Date",bl(e,"Date")+i*r),s&&e._d.setTime(e._d.valueOf()+s*r),n&&oe.updateOffset(e,i||o))}var SK=_2(1,"add"),CK=_2(-1,"subtract");function C2(e){return typeof e=="string"||e instanceof String}function EK(e){return hn(e)||Kl(e)||C2(e)||na(e)||TK(e)||DK(e)||e===null||e===void 0}function DK(e){var t=ms(e)&&!w0(e),r=!1,n=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],s,i,o=n.length;for(s=0;s<o;s+=1)i=n[s],r=r||ze(e,i);return t&&r}function TK(e){var t=un(e),r=!1;return t&&(r=e.filter(function(n){return!na(n)&&C2(e)}).length===0),t&&r}function PK(e){var t=ms(e)&&!w0(e),r=!1,n=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],s,i;for(s=0;s<n.length;s+=1)i=n[s],r=r||ze(e,i);return t&&r}function OK(e,t){var r=e.diff(t,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"}function MK(e,t){arguments.length===1&&(arguments[0]?EK(arguments[0])?(e=arguments[0],t=void 0):PK(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var r=e||tt(),n=I0(r,this).startOf("day"),s=oe.calendarFormat(this,n)||"sameElse",i=t&&($n(t[s])?t[s].call(this,r):t[s]);return this.format(i||this.localeData().calendar(s,this,tt(r)))}function $K(){return new Xl(this)}function RK(e,t){var r=hn(e)?e:tt(e);return this.isValid()&&r.isValid()?(t=Vr(t)||"millisecond",t==="millisecond"?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(t).valueOf()):!1}function LK(e,t){var r=hn(e)?e:tt(e);return this.isValid()&&r.isValid()?(t=Vr(t)||"millisecond",t==="millisecond"?this.valueOf()<r.valueOf():this.clone().endOf(t).valueOf()<r.valueOf()):!1}function AK(e,t,r,n){var s=hn(e)?e:tt(e),i=hn(t)?t:tt(t);return this.isValid()&&s.isValid()&&i.isValid()?(n=n||"()",(n[0]==="("?this.isAfter(s,r):!this.isBefore(s,r))&&(n[1]===")"?this.isBefore(i,r):!this.isAfter(i,r))):!1}function zK(e,t){var r=hn(e)?e:tt(e),n;return this.isValid()&&r.isValid()?(t=Vr(t)||"millisecond",t==="millisecond"?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf())):!1}function IK(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function FK(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function HK(e,t,r){var n,s,i;if(!this.isValid())return NaN;if(n=I0(e,this),!n.isValid())return NaN;switch(s=(n.utcOffset()-this.utcOffset())*6e4,t=Vr(t),t){case"year":i=sd(this,n)/12;break;case"month":i=sd(this,n);break;case"quarter":i=sd(this,n)/3;break;case"second":i=(this-n)/1e3;break;case"minute":i=(this-n)/6e4;break;case"hour":i=(this-n)/36e5;break;case"day":i=(this-n-s)/864e5;break;case"week":i=(this-n-s)/6048e5;break;default:i=this-n}return r?i:Rr(i)}function sd(e,t){if(e.date()<t.date())return-sd(t,e);var r=(t.year()-e.year())*12+(t.month()-e.month()),n=e.clone().add(r,"months"),s,i;return t-n<0?(s=e.clone().add(r-1,"months"),i=(t-n)/(n-s)):(s=e.clone().add(r+1,"months"),i=(t-n)/(s-n)),-(r+i)||0}oe.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";oe.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function WK(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function BK(e){if(!this.isValid())return null;var t=e!==!0,r=t?this.clone().utc():this;return r.year()<0||r.year()>9999?nd(r,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):$n(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",nd(r,"Z")):nd(r,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function UK(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",r,n,s,i;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),r="["+e+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",s="-MM-DD[T]HH:mm:ss.SSS",i=t+'[")]',this.format(r+n+s+i)}function qK(e){e||(e=this.isUtc()?oe.defaultFormatUtc:oe.defaultFormat);var t=nd(this,e);return this.localeData().postformat(t)}function YK(e,t){return this.isValid()&&(hn(e)&&e.isValid()||tt(e).isValid())?fn({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function VK(e){return this.from(tt(),e)}function GK(e,t){return this.isValid()&&(hn(e)&&e.isValid()||tt(e).isValid())?fn({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function KK(e){return this.to(tt(),e)}function E2(e){var t;return e===void 0?this._locale._abbr:(t=oa(e),t!=null&&(this._locale=t),this)}var D2=Yr("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function T2(){return this._locale}var Vd=1e3,di=60*Vd,Gd=60*di,P2=(365*400+97)*24*Gd;function ui(e,t){return(e%t+t)%t}function O2(e,t,r){return e<100&&e>=0?new Date(e+400,t,r)-P2:new Date(e,t,r).valueOf()}function M2(e,t,r){return e<100&&e>=0?Date.UTC(e+400,t,r)-P2:Date.UTC(e,t,r)}function XK(e){var t,r;if(e=Vr(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?M2:O2,e){case"year":t=r(this.year(),0,1);break;case"quarter":t=r(this.year(),this.month()-this.month()%3,1);break;case"month":t=r(this.year(),this.month(),1);break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=r(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=ui(t+(this._isUTC?0:this.utcOffset()*di),Gd);break;case"minute":t=this._d.valueOf(),t-=ui(t,di);break;case"second":t=this._d.valueOf(),t-=ui(t,Vd);break}return this._d.setTime(t),oe.updateOffset(this,!0),this}function JK(e){var t,r;if(e=Vr(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?M2:O2,e){case"year":t=r(this.year()+1,0,1)-1;break;case"quarter":t=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=r(this.year(),this.month()+1,1)-1;break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=Gd-ui(t+(this._isUTC?0:this.utcOffset()*di),Gd)-1;break;case"minute":t=this._d.valueOf(),t+=di-ui(t,di)-1;break;case"second":t=this._d.valueOf(),t+=Vd-ui(t,Vd)-1;break}return this._d.setTime(t),oe.updateOffset(this,!0),this}function QK(){return this._d.valueOf()-(this._offset||0)*6e4}function ZK(){return Math.floor(this.valueOf()/1e3)}function eX(){return new Date(this.valueOf())}function tX(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function rX(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function nX(){return this.isValid()?this.toISOString():null}function aX(){return j0(this)}function sX(){return ba({},Se(this))}function iX(){return Se(this).overflow}function oX(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}pe("N",0,0,"eraAbbr");pe("NN",0,0,"eraAbbr");pe("NNN",0,0,"eraAbbr");pe("NNNN",0,0,"eraName");pe("NNNNN",0,0,"eraNarrow");pe("y",["y",1],"yo","eraYear");pe("y",["yy",2],0,"eraYear");pe("y",["yyy",3],0,"eraYear");pe("y",["yyyy",4],0,"eraYear");de("N",F0);de("NN",F0);de("NNN",F0);de("NNNN",yX);de("NNNNN",vX);Ye(["N","NN","NNN","NNNN","NNNNN"],function(e,t,r,n){var s=r._locale.erasParse(e,n,r._strict);s?Se(r).era=s:Se(r).invalidEra=e});de("y",Vi);de("yy",Vi);de("yyy",Vi);de("yyyy",Vi);de("yo",bX);Ye(["y","yy","yyy","yyyy"],Gt);Ye(["yo"],function(e,t,r,n){var s;r._locale._eraYearOrdinalRegex&&(s=e.match(r._locale._eraYearOrdinalRegex)),r._locale.eraYearOrdinalParse?t[Gt]=r._locale.eraYearOrdinalParse(e,s):t[Gt]=parseInt(e,10)});function lX(e,t){var r,n,s,i=this._eras||oa("en")._eras;for(r=0,n=i.length;r<n;++r){switch(typeof i[r].since){case"string":s=oe(i[r].since).startOf("day"),i[r].since=s.valueOf();break}switch(typeof i[r].until){case"undefined":i[r].until=1/0;break;case"string":s=oe(i[r].until).startOf("day").valueOf(),i[r].until=s.valueOf();break}}return i}function cX(e,t,r){var n,s,i=this.eras(),o,l,c;for(e=e.toUpperCase(),n=0,s=i.length;n<s;++n)if(o=i[n].name.toUpperCase(),l=i[n].abbr.toUpperCase(),c=i[n].narrow.toUpperCase(),r)switch(t){case"N":case"NN":case"NNN":if(l===e)return i[n];break;case"NNNN":if(o===e)return i[n];break;case"NNNNN":if(c===e)return i[n];break}else if([o,l,c].indexOf(e)>=0)return i[n]}function dX(e,t){var r=e.since<=e.until?1:-1;return t===void 0?oe(e.since).year():oe(e.since).year()+(t-e.offset)*r}function uX(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].name;return""}function hX(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].narrow;return""}function fX(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].abbr;return""}function mX(){var e,t,r,n,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(r=s[e].since<=s[e].until?1:-1,n=this.clone().startOf("day").valueOf(),s[e].since<=n&&n<=s[e].until||s[e].until<=n&&n<=s[e].since)return(this.year()-oe(s[e].since).year())*r+s[e].offset;return this.year()}function pX(e){return ze(this,"_erasNameRegex")||H0.call(this),e?this._erasNameRegex:this._erasRegex}function gX(e){return ze(this,"_erasAbbrRegex")||H0.call(this),e?this._erasAbbrRegex:this._erasRegex}function xX(e){return ze(this,"_erasNarrowRegex")||H0.call(this),e?this._erasNarrowRegex:this._erasRegex}function F0(e,t){return t.erasAbbrRegex(e)}function yX(e,t){return t.erasNameRegex(e)}function vX(e,t){return t.erasNarrowRegex(e)}function bX(e,t){return t._eraYearOrdinalRegex||Vi}function H0(){var e=[],t=[],r=[],n=[],s,i,o,l,c,d=this.eras();for(s=0,i=d.length;s<i;++s)o=Gn(d[s].name),l=Gn(d[s].abbr),c=Gn(d[s].narrow),t.push(o),e.push(l),r.push(c),n.push(o),n.push(l),n.push(c);this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}pe(0,["gg",2],0,function(){return this.weekYear()%100});pe(0,["GG",2],0,function(){return this.isoWeekYear()%100});function ch(e,t){pe(0,[e,e.length],0,t)}ch("gggg","weekYear");ch("ggggg","weekYear");ch("GGGG","isoWeekYear");ch("GGGGG","isoWeekYear");de("G",ah);de("g",ah);de("GG",rt,Dr);de("gg",rt,Dr);de("GGGG",E0,C0);de("gggg",E0,C0);de("GGGGG",nh,th);de("ggggg",nh,th);Ql(["gggg","ggggg","GGGG","GGGGG"],function(e,t,r,n){t[n.substr(0,2)]=Oe(e)});Ql(["gg","GG"],function(e,t,r,n){t[n]=oe.parseTwoDigitYear(e)});function wX(e){return $2.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function jX(e){return $2.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function kX(){return Kn(this.year(),1,4)}function NX(){return Kn(this.isoWeekYear(),1,4)}function _X(){var e=this.localeData()._week;return Kn(this.year(),e.dow,e.doy)}function SX(){var e=this.localeData()._week;return Kn(this.weekYear(),e.dow,e.doy)}function $2(e,t,r,n,s){var i;return e==null?jl(this,n,s).year:(i=Kn(e,n,s),t>i&&(t=i),CX.call(this,e,t,r,n,s))}function CX(e,t,r,n,s){var i=f2(e,t,r,n,s),o=wl(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}pe("Q",0,"Qo","quarter");de("Q",r2);Ye("Q",function(e,t){t[Un]=(Oe(e)-1)*3});function EX(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}pe("D",["DD",2],"Do","date");de("D",rt,Gi);de("DD",rt,Dr);de("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});Ye(["D","DD"],wn);Ye("Do",function(e,t){t[wn]=Oe(e.match(rt)[0])});var R2=Ki("Date",!0);pe("DDD",["DDDD",3],"DDDo","dayOfYear");de("DDD",rh);de("DDDD",n2);Ye(["DDD","DDDD"],function(e,t,r){r._dayOfYear=Oe(e)});function DX(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}pe("m",["mm",2],0,"minute");de("m",rt,D0);de("mm",rt,Dr);Ye(["m","mm"],rn);var TX=Ki("Minutes",!1);pe("s",["ss",2],0,"second");de("s",rt,D0);de("ss",rt,Dr);Ye(["s","ss"],qn);var PX=Ki("Seconds",!1);pe("S",0,0,function(){return~~(this.millisecond()/100)});pe(0,["SS",2],0,function(){return~~(this.millisecond()/10)});pe(0,["SSS",3],0,"millisecond");pe(0,["SSSS",4],0,function(){return this.millisecond()*10});pe(0,["SSSSS",5],0,function(){return this.millisecond()*100});pe(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});pe(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});pe(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});pe(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});de("S",rh,r2);de("SS",rh,Dr);de("SSS",rh,n2);var wa,L2;for(wa="SSSS";wa.length<=9;wa+="S")de(wa,Vi);function OX(e,t){t[is]=Oe(("0."+e)*1e3)}for(wa="S";wa.length<=9;wa+="S")Ye(wa,OX);L2=Ki("Milliseconds",!1);pe("z",0,0,"zoneAbbr");pe("zz",0,0,"zoneName");function MX(){return this._isUTC?"UTC":""}function $X(){return this._isUTC?"Coordinated Universal Time":""}var Q=Xl.prototype;Q.add=SK;Q.calendar=MK;Q.clone=$K;Q.diff=HK;Q.endOf=JK;Q.format=qK;Q.from=YK;Q.fromNow=VK;Q.to=GK;Q.toNow=KK;Q.get=UV;Q.invalidAt=iX;Q.isAfter=RK;Q.isBefore=LK;Q.isBetween=AK;Q.isSame=zK;Q.isSameOrAfter=IK;Q.isSameOrBefore=FK;Q.isValid=aX;Q.lang=D2;Q.locale=E2;Q.localeData=T2;Q.max=aK;Q.min=nK;Q.parsingFlags=sX;Q.set=qV;Q.startOf=XK;Q.subtract=CK;Q.toArray=tX;Q.toObject=rX;Q.toDate=eX;Q.toISOString=BK;Q.inspect=UK;typeof Symbol<"u"&&Symbol.for!=null&&(Q[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});Q.toJSON=nX;Q.toString=WK;Q.unix=ZK;Q.valueOf=QK;Q.creationData=oX;Q.eraName=uX;Q.eraNarrow=hX;Q.eraAbbr=fX;Q.eraYear=mX;Q.year=i2;Q.isLeapYear=BV;Q.weekYear=wX;Q.isoWeekYear=jX;Q.quarter=Q.quarters=EX;Q.month=u2;Q.daysInMonth=eG;Q.week=Q.weeks=lG;Q.isoWeek=Q.isoWeeks=cG;Q.weeksInYear=_X;Q.weeksInWeekYear=SX;Q.isoWeeksInYear=kX;Q.isoWeeksInISOWeekYear=NX;Q.date=R2;Q.day=Q.days=jG;Q.weekday=kG;Q.isoWeekday=NG;Q.dayOfYear=DX;Q.hour=Q.hours=PG;Q.minute=Q.minutes=TX;Q.second=Q.seconds=PX;Q.millisecond=Q.milliseconds=L2;Q.utcOffset=fK;Q.utc=pK;Q.local=gK;Q.parseZone=xK;Q.hasAlignedHourOffset=yK;Q.isDST=vK;Q.isLocal=wK;Q.isUtcOffset=jK;Q.isUtc=N2;Q.isUTC=N2;Q.zoneAbbr=MX;Q.zoneName=$X;Q.dates=Yr("dates accessor is deprecated. Use date instead.",R2);Q.months=Yr("months accessor is deprecated. Use month instead",u2);Q.years=Yr("years accessor is deprecated. Use year instead",i2);Q.zone=Yr("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",mK);Q.isDSTShifted=Yr("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",bK);function RX(e){return tt(e*1e3)}function LX(){return tt.apply(null,arguments).parseZone()}function A2(e){return e}var Ie=N0.prototype;Ie.calendar=wV;Ie.longDateFormat=_V;Ie.invalidDate=CV;Ie.ordinal=TV;Ie.preparse=A2;Ie.postformat=A2;Ie.relativeTime=OV;Ie.pastFuture=MV;Ie.set=vV;Ie.eras=lX;Ie.erasParse=cX;Ie.erasConvertYear=dX;Ie.erasAbbrRegex=gX;Ie.erasNameRegex=pX;Ie.erasNarrowRegex=xX;Ie.months=XV;Ie.monthsShort=JV;Ie.monthsParse=ZV;Ie.monthsRegex=rG;Ie.monthsShortRegex=tG;Ie.week=aG;Ie.firstDayOfYear=oG;Ie.firstDayOfWeek=iG;Ie.weekdays=xG;Ie.weekdaysMin=vG;Ie.weekdaysShort=yG;Ie.weekdaysParse=wG;Ie.weekdaysRegex=_G;Ie.weekdaysShortRegex=SG;Ie.weekdaysMinRegex=CG;Ie.isPM=DG;Ie.meridiem=OG;function Kd(e,t,r,n){var s=oa(),i=Mn().set(n,t);return s[r](i,e)}function z2(e,t,r){if(na(e)&&(t=e,e=void 0),e=e||"",t!=null)return Kd(e,t,r,"month");var n,s=[];for(n=0;n<12;n++)s[n]=Kd(e,n,r,"month");return s}function W0(e,t,r,n){typeof e=="boolean"?(na(t)&&(r=t,t=void 0),t=t||""):(t=e,r=t,e=!1,na(t)&&(r=t,t=void 0),t=t||"");var s=oa(),i=e?s._week.dow:0,o,l=[];if(r!=null)return Kd(t,(r+i)%7,n,"day");for(o=0;o<7;o++)l[o]=Kd(t,(o+i)%7,n,"day");return l}function AX(e,t){return z2(e,t,"months")}function zX(e,t){return z2(e,t,"monthsShort")}function IX(e,t,r){return W0(e,t,r,"weekdays")}function FX(e,t,r){return W0(e,t,r,"weekdaysShort")}function HX(e,t,r){return W0(e,t,r,"weekdaysMin")}Ma("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,r=Oe(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+r}});oe.lang=Yr("moment.lang is deprecated. Use moment.locale instead.",Ma);oe.langData=Yr("moment.langData is deprecated. Use moment.localeData instead.",oa);var zn=Math.abs;function WX(){var e=this._data;return this._milliseconds=zn(this._milliseconds),this._days=zn(this._days),this._months=zn(this._months),e.milliseconds=zn(e.milliseconds),e.seconds=zn(e.seconds),e.minutes=zn(e.minutes),e.hours=zn(e.hours),e.months=zn(e.months),e.years=zn(e.years),this}function I2(e,t,r,n){var s=fn(t,r);return e._milliseconds+=n*s._milliseconds,e._days+=n*s._days,e._months+=n*s._months,e._bubble()}function BX(e,t){return I2(this,e,t,1)}function UX(e,t){return I2(this,e,t,-1)}function Pb(e){return e<0?Math.floor(e):Math.ceil(e)}function qX(){var e=this._milliseconds,t=this._days,r=this._months,n=this._data,s,i,o,l,c;return e>=0&&t>=0&&r>=0||e<=0&&t<=0&&r<=0||(e+=Pb(op(r)+t)*864e5,t=0,r=0),n.milliseconds=e%1e3,s=Rr(e/1e3),n.seconds=s%60,i=Rr(s/60),n.minutes=i%60,o=Rr(i/60),n.hours=o%24,t+=Rr(o/24),c=Rr(F2(t)),r+=c,t-=Pb(op(c)),l=Rr(r/12),r%=12,n.days=t,n.months=r,n.years=l,this}function F2(e){return e*4800/146097}function op(e){return e*146097/4800}function YX(e){if(!this.isValid())return NaN;var t,r,n=this._milliseconds;if(e=Vr(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+n/864e5,r=this._months+F2(t),e){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(t=this._days+Math.round(op(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return t*24+n/36e5;case"minute":return t*1440+n/6e4;case"second":return t*86400+n/1e3;case"millisecond":return Math.floor(t*864e5)+n;default:throw new Error("Unknown unit "+e)}}function la(e){return function(){return this.as(e)}}var H2=la("ms"),VX=la("s"),GX=la("m"),KX=la("h"),XX=la("d"),JX=la("w"),QX=la("M"),ZX=la("Q"),eJ=la("y"),tJ=H2;function rJ(){return fn(this)}function nJ(e){return e=Vr(e),this.isValid()?this[e+"s"]():NaN}function Ms(e){return function(){return this.isValid()?this._data[e]:NaN}}var aJ=Ms("milliseconds"),sJ=Ms("seconds"),iJ=Ms("minutes"),oJ=Ms("hours"),lJ=Ms("days"),cJ=Ms("months"),dJ=Ms("years");function uJ(){return Rr(this.days()/7)}var Fn=Math.round,ti={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function hJ(e,t,r,n,s){return s.relativeTime(t||1,!!r,e,n)}function fJ(e,t,r,n){var s=fn(e).abs(),i=Fn(s.as("s")),o=Fn(s.as("m")),l=Fn(s.as("h")),c=Fn(s.as("d")),d=Fn(s.as("M")),u=Fn(s.as("w")),f=Fn(s.as("y")),h=i<=r.ss&&["s",i]||i<r.s&&["ss",i]||o<=1&&["m"]||o<r.m&&["mm",o]||l<=1&&["h"]||l<r.h&&["hh",l]||c<=1&&["d"]||c<r.d&&["dd",c];return r.w!=null&&(h=h||u<=1&&["w"]||u<r.w&&["ww",u]),h=h||d<=1&&["M"]||d<r.M&&["MM",d]||f<=1&&["y"]||["yy",f],h[2]=t,h[3]=+e>0,h[4]=n,hJ.apply(null,h)}function mJ(e){return e===void 0?Fn:typeof e=="function"?(Fn=e,!0):!1}function pJ(e,t){return ti[e]===void 0?!1:t===void 0?ti[e]:(ti[e]=t,e==="s"&&(ti.ss=t-1),!0)}function gJ(e,t){if(!this.isValid())return this.localeData().invalidDate();var r=!1,n=ti,s,i;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(r=e),typeof t=="object"&&(n=Object.assign({},ti,t),t.s!=null&&t.ss==null&&(n.ss=t.s-1)),s=this.localeData(),i=fJ(this,!r,n,s),r&&(i=s.pastFuture(+this,i)),s.postformat(i)}var wf=Math.abs;function Is(e){return(e>0)-(e<0)||+e}function dh(){if(!this.isValid())return this.localeData().invalidDate();var e=wf(this._milliseconds)/1e3,t=wf(this._days),r=wf(this._months),n,s,i,o,l=this.asSeconds(),c,d,u,f;return l?(n=Rr(e/60),s=Rr(n/60),e%=60,n%=60,i=Rr(r/12),r%=12,o=e?e.toFixed(3).replace(/\.?0+$/,""):"",c=l<0?"-":"",d=Is(this._months)!==Is(l)?"-":"",u=Is(this._days)!==Is(l)?"-":"",f=Is(this._milliseconds)!==Is(l)?"-":"",c+"P"+(i?d+i+"Y":"")+(r?d+r+"M":"")+(t?u+t+"D":"")+(s||n||e?"T":"")+(s?f+s+"H":"")+(n?f+n+"M":"")+(e?f+o+"S":"")):"P0D"}var Re=lh.prototype;Re.isValid=cK;Re.abs=WX;Re.add=BX;Re.subtract=UX;Re.as=YX;Re.asMilliseconds=H2;Re.asSeconds=VX;Re.asMinutes=GX;Re.asHours=KX;Re.asDays=XX;Re.asWeeks=JX;Re.asMonths=QX;Re.asQuarters=ZX;Re.asYears=eJ;Re.valueOf=tJ;Re._bubble=qX;Re.clone=rJ;Re.get=nJ;Re.milliseconds=aJ;Re.seconds=sJ;Re.minutes=iJ;Re.hours=oJ;Re.days=lJ;Re.weeks=uJ;Re.months=cJ;Re.years=dJ;Re.humanize=gJ;Re.toISOString=dh;Re.toString=dh;Re.toJSON=dh;Re.locale=E2;Re.localeData=T2;Re.toIsoString=Yr("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",dh);Re.lang=D2;pe("X",0,0,"unix");pe("x",0,0,"valueOf");de("x",ah);de("X",AV);Ye("X",function(e,t,r){r._d=new Date(parseFloat(e)*1e3)});Ye("x",function(e,t,r){r._d=new Date(Oe(e))});//! moment.js
oe.version="2.30.1";xV(tt);oe.fn=Q;oe.min=sK;oe.max=iK;oe.now=oK;oe.utc=Mn;oe.unix=RX;oe.months=AX;oe.isDate=Kl;oe.locale=Ma;oe.invalid=eh;oe.duration=fn;oe.isMoment=hn;oe.weekdays=IX;oe.parseZone=LX;oe.localeData=oa;oe.isDuration=ad;oe.monthsShort=zX;oe.weekdaysMin=HX;oe.defineLocale=$0;oe.updateLocale=LG;oe.locales=AG;oe.weekdaysShort=FX;oe.normalizeUnits=Vr;oe.relativeTimeRounding=mJ;oe.relativeTimeThreshold=pJ;oe.calendarFormat=OK;oe.prototype=Q;oe.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const xJ=gV(oe),yJ=({leads:e,onLeadClick:t,statuses:r=[]})=>{const n=l=>{const c=r.find(u=>l===u.id||l==u.id||l===u.name||u.id===7&&l==="new"||u.id===8&&(l==="contacted"||l==="qualified"||l==="proposal_sent")||u.id===9&&l==="won"||u.id===10&&l==="lost");return c?{blue:{backgroundColor:"#3b82f6",borderColor:"#2563eb"},yellow:{backgroundColor:"#eab308",borderColor:"#ca8a04"},purple:{backgroundColor:"#a855f7",borderColor:"#9333ea"},orange:{backgroundColor:"#f97316",borderColor:"#ea580c"},green:{backgroundColor:"#22c55e",borderColor:"#16a34a"},red:{backgroundColor:"#ef4444",borderColor:"#dc2626"},gray:{backgroundColor:"#64748b",borderColor:"#475569"}}[c.color]||{backgroundColor:"#64748b",borderColor:"#475569"}:{backgroundColor:"#64748b",borderColor:"#475569"}},s=S.useMemo(()=>e.map(l=>({id:l.id,title:`${l.name} - ${l.business_name||"Sin empresa"}`,start:new Date(l.created_at),end:new Date(l.created_at),resource:l,allDay:!0})),[e]),i=l=>{const c=l.resource,d=n(c.status);return{style:{...d,borderRadius:"4px",opacity:.9,color:"white",border:`2px solid ${d.borderColor}`,display:"block",fontSize:"0.875rem",padding:"2px 4px"}}},o=l=>{t(l.resource)};return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Vista de Calendario"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Leads organizados por fecha de creacin"})]}),a.jsx("div",{className:"flex flex-wrap gap-3 mb-4 pb-4 border-b border-gray-200 dark:border-gray-700",children:r.map(l=>{const c=n(l.id||l.value);return a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:c.backgroundColor}}),a.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:l.name||l.label})]},l.id||l.value)})}),a.jsx("div",{className:"h-[600px]",children:a.jsx(dV,{localizer:xJ,events:s,startAccessor:"start",endAccessor:"end",style:{height:"100%"},eventPropGetter:i,onSelectEvent:o,views:["month","week","day"],defaultView:"month",popup:!0})})]})},ca=()=>({"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`}),W2=async(e={})=>{const t=new URLSearchParams(e).toString(),r=`${U}/invoices${t?`?${t}`:""}`,n=await fetch(r,{headers:ca()});if(!n.ok){const s=await n.json();throw new Error(s.error||"Error al obtener facturas")}return n.json()},B2=async e=>{const t=await fetch(`${U}/invoices/${e}`,{headers:ca()});if(!t.ok){const r=await t.json();throw new Error(r.error||"Error al obtener factura")}return t.json()},vJ=async e=>{const t=await fetch(`${U}/invoices`,{method:"POST",headers:ca(),body:JSON.stringify(e)});if(!t.ok){let r;try{r=await t.json()}catch{throw console.error("Non-JSON response:",await t.text()),new Error(`Error ${t.status}: ${t.statusText}`)}throw new Error(r.error||"Error al crear factura")}return t.json()},bJ=async(e,t)=>{const r=await fetch(`${U}/invoices/${e}`,{method:"PUT",headers:ca(),body:JSON.stringify(t)});if(!r.ok){const n=await r.json();throw new Error(n.error||"Error al actualizar factura")}return r.json()},wJ=async e=>{const t=await fetch(`${U}/invoices/${e}`,{method:"DELETE",headers:ca()});if(!t.ok){const r=await t.json();throw new Error(r.error||"Error al eliminar factura")}return t.json()},jJ=async e=>{const t=await fetch(`${U}/invoices/${e}/resend-email`,{method:"POST",headers:ca()});if(!t.ok){const r=await t.json();throw new Error(r.error||"Error al enviar email")}return t.json()},kJ=async(e,t)=>{const r=await fetch(`${U}/invoices/${e}/payments`,{method:"POST",headers:ca(),body:JSON.stringify(t)});if(!r.ok){const n=await r.json();throw new Error(n.error||"Error al registrar pago")}return r.json()},NJ=async e=>{const t=await fetch(`${U}/invoices/payments/${e}`,{method:"DELETE",headers:ca()});if(!t.ok){const r=await t.json();throw new Error(r.error||"Error al eliminar pago")}return t.json()},_J=async e=>{const t=await fetch(`${U}/invoices/payments/${e}/resend-receipt`,{method:"POST",headers:ca()});if(!t.ok){const r=await t.json();throw new Error(r.error||"Error al enviar recibo")}return t.json()},SJ=async e=>{const t=await fetch(`${U}/invoices/public/${e}`);if(!t.ok){const r=await t.json();throw new Error(r.error||"Error al obtener factura pblica")}return t.json()};var U2={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ob=$.createContext&&$.createContext(U2),CJ=["attr","size","title"];function EJ(e,t){if(e==null)return{};var r=DJ(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function DJ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Xd(){return Xd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xd.apply(this,arguments)}function Mb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Jd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mb(Object(r),!0).forEach(function(n){TJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mb(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TJ(e,t,r){return t=PJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PJ(e){var t=OJ(e,"string");return typeof t=="symbol"?t:t+""}function OJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q2(e){return e&&e.map((t,r)=>$.createElement(t.tag,Jd({key:r},t.attr),q2(t.child)))}function Dt(e){return t=>$.createElement(MJ,Xd({attr:Jd({},e.attr)},t),q2(e.child))}function MJ(e){var t=r=>{var{attr:n,size:s,title:i}=e,o=EJ(e,CJ),l=s||r.size||"1em",c;return r.className&&(c=r.className),e.className&&(c=(c?c+" ":"")+e.className),$.createElement("svg",Xd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:c,style:Jd(Jd({color:e.color||r.color},r.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&$.createElement("title",null,i),e.children)};return Ob!==void 0?$.createElement(Ob.Consumer,null,r=>t(r)):t(U2)}function $J(e){return Dt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(e)}function hi(e){return Dt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(e)}function RJ(e){return Dt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(e)}function $b(e){return Dt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(e)}function Di(e){return Dt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(e)}function Nl(e){return Dt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(e)}function Ti(e){return Dt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(e)}function Y2(e){return Dt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(e)}function V2(e){return Dt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(e)}function LJ(e){return Dt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"},child:[]},{tag:"polyline",attr:{points:"15 3 21 3 21 9"},child:[]},{tag:"line",attr:{x1:"10",y1:"14",x2:"21",y2:"3"},child:[]}]})(e)}function B0(e){return Dt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}function $a(e){return Dt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(e)}function AJ(e){return Dt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(e)}function G2(e){return Dt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(e)}function Pi(e){return Dt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(e)}function K2(e){return Dt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(e)}function zJ(e){return Dt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(e)}function U0(e){return Dt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(e)}function X2(e){return Dt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(e)}const IJ=({leadId:e,leadName:t})=>{const{showToast:r}=jt(),[n,s]=S.useState([]),[i,o]=S.useState(!0),[l,c]=S.useState({total:0,paid:0,pending:0});S.useEffect(()=>{e&&d()},[e]);const d=async()=>{try{o(!0);const x=await W2({lead_id:e,limit:100});s(x.invoices);const v=x.invoices.reduce((y,w)=>({total:y.total+parseFloat(w.total_amount),paid:y.paid+parseFloat(w.paid_amount),pending:y.pending+parseFloat(w.remaining_amount)}),{total:0,paid:0,pending:0});c(v)}catch{r("Error al cargar facturas","error")}finally{o(!1)}},u=x=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(x),f=x=>x?new Date(x).toLocaleDateString("es-ES"):"-",h=x=>{const v={pending:{label:"Pendiente",color:"bg-red-100 text-red-800",icon:Nl},partial:{label:"Parcial",color:"bg-yellow-100 text-yellow-800",icon:hi},paid:{label:"Pagada",color:"bg-green-100 text-green-800",icon:Di}},y=v[x]||v.pending,w=y.icon;return a.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${y.color}`,children:[a.jsx(w,{className:"w-3 h-3"}),y.label]})};return i?a.jsx("div",{className:"flex justify-center items-center h-32",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total Facturado"}),a.jsx("p",{className:"text-2xl font-bold text-blue-900 mt-1",children:u(l.total)})]}),a.jsx($a,{className:"w-8 h-8 text-blue-400"})]})}),a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Total Pagado"}),a.jsx("p",{className:"text-2xl font-bold text-green-900 mt-1",children:u(l.paid)})]}),a.jsx(Di,{className:"w-8 h-8 text-green-400"})]})}),a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Total Pendiente"}),a.jsx("p",{className:"text-2xl font-bold text-red-900 mt-1",children:u(l.pending)})]}),a.jsx(Nl,{className:"w-8 h-8 text-red-400"})]})})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:()=>{window.location.href=`/invoices/new?lead_id=${e}`},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Pi,{className:"w-4 h-4"}),"Nueva Factura para ",t]})}),n.length===0?a.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[a.jsx($a,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay facturas"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Este cliente an no tiene facturas registradas"}),a.jsxs("button",{onClick:()=>window.location.href=`/invoices/new?lead_id=${e}`,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[a.jsx(Pi,{className:"w-4 h-4"}),"Crear Primera Factura"]})]}):a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nmero"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pagado"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pendiente"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(x=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($a,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:x.invoice_number})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:f(x.issue_date)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:u(x.total_amount)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:u(x.paid_amount)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600",children:u(x.remaining_amount)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h(x.payment_status)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:()=>window.location.href=`/invoices/${x.id}`,className:"text-blue-600 hover:text-blue-900",title:"Ver detalle",children:a.jsx(B0,{className:"w-4 h-4"})}),x.payment_status!=="paid"&&a.jsx("button",{onClick:()=>window.location.href=`/invoices/${x.id}?tab=payments`,className:"text-green-600 hover:text-green-900",title:"Registrar pago",children:a.jsx(Ti,{className:"w-4 h-4"})})]})})]},x.id))})]})})]})},J2=({onClientSelect:e})=>{const[t,r]=S.useState({isOpen:!1,title:"",message:"",clientToDelete:null}),[n,s]=S.useState([]),[i,o]=S.useState(!0),[l,c]=S.useState(""),[d,u]=S.useState(!1),[f,h]=S.useState(!1),[x,v]=S.useState({name:"",email:"",phone:"",nif:"",address:"",city:"",postal_code:""}),y=jt();S.useEffect(()=>{w()},[]);const w=async()=>{try{const N=await fetch(`${U}/clients`,{headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}});if(N.ok){const C=await N.json();s(C)}}catch(N){console.error("Error fetching clients:",N),y.error("Error al cargar clientes")}finally{o(!1)}},g=async N=>{N.preventDefault(),h(!0);try{const C=await fetch(`${U}/clients`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`},body:JSON.stringify(x)});if(C.ok)y.success("Cliente creado exitosamente"),u(!1),v({name:"",email:"",phone:"",nif:"",address:"",city:"",postal_code:""}),w();else{const E=await C.json();y.error(E.message||"Error al crear cliente")}}catch(C){console.error("Error:",C),y.error("Error de conexin")}finally{h(!1)}},p=async(N,C)=>{N.stopPropagation(),r({isOpen:!0,title:"Eliminar Cliente",message:"Ests seguro de eliminar este cliente? Esta accin no se puede deshacer.",clientToDelete:{id:C}})},j=async()=>{if(t.clientToDelete)try{if((await fetch(`${U}/clients/${t.clientToDelete.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}})).ok)y.success("Cliente eliminado correctamente"),w();else throw new Error("Error al eliminar")}catch(N){y.error("Error al eliminar el cliente"),console.error(N)}finally{r({...t,isOpen:!1,clientToDelete:null})}},b=n.filter(N=>{var C,E;return N.name.toLowerCase().includes(l.toLowerCase())||((C=N.email)==null?void 0:C.toLowerCase().includes(l.toLowerCase()))||((E=N.phone)==null?void 0:E.includes(l))});return i?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx("span",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg text-orange-600 dark:text-orange-400",children:a.jsx(Pa,{className:"w-5 h-5"})}),"Cartera de Clientes"]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 ml-11",children:"Gestin de clientes e instalaciones"})]}),a.jsxs("button",{onClick:()=>u(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all",children:[a.jsx(Wr,{className:"h-5 w-5"}),a.jsx("span",{children:"Nuevo Cliente"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Clientes"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:n.length})]}),a.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:a.jsx(Pa,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Activos"}),a.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mt-2",children:n.filter(N=>N.status==="active").length})]}),a.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:a.jsx(zr,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Con Instalaciones"}),a.jsx("p",{className:"text-3xl font-bold text-orange-600 dark:text-orange-400 mt-2",children:n.filter(N=>N.installations&&N.installations.length>0).length})]}),a.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:a.jsx(ds,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})})]})})]}),a.jsxs("div",{className:"flex space-x-4 bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(ng,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar por nombre, email o telfono...",value:l,onChange:N=>c(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),a.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:[a.jsx(cj,{className:"h-4 w-4"}),a.jsx("span",{children:"Filtros"})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Cliente"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Contacto"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Estado"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Instalacin"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Acciones"})]})}),a.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:b.map(N=>a.jsxs("tr",{onClick:()=>e(N.id),className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-orange-400 to-red-500 flex items-center justify-center text-white font-bold",children:N.name.charAt(0)}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:N.name}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["ID: #",N.id]})]})]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:N.email}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:N.phone})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${N.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:N.status==="active"?"Activo":"Inactivo"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 dark:text-gray-400",children:[a.jsx(ds,{size:16}),a.jsx("span",{className:"text-sm",children:"Ver detalles"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:C=>{C.stopPropagation(),e(N.id)},className:"p-2 text-gray-500 hover:text-orange-600 dark:text-gray-400 dark:hover:text-orange-400 transition-colors rounded-lg hover:bg-orange-50 dark:hover:bg-orange-900/20",title:"Ver detalles",children:a.jsx(Nr,{size:18})}),a.jsx("button",{onClick:C=>p(C,N.id),className:"p-2 text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400 transition-colors rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20",title:"Eliminar Cliente",children:a.jsx(ln,{size:18})})]})})]},N.id))})]}),b.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ij,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No hay clientes"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Convierte leads para verlos aqu."})]})]}),d&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Nuevo Cliente"}),a.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:a.jsx(_r,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:g,className:"p-6 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nombre / Empresa *"}),a.jsx("input",{type:"text",required:!0,value:x.name,onChange:N=>v({...x,name:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"NIF / CIF"}),a.jsx("input",{type:"text",value:x.nif,onChange:N=>v({...x,nif:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),a.jsx("input",{type:"email",value:x.email,onChange:N=>v({...x,email:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Telfono"}),a.jsx("input",{type:"tel",value:x.phone,onChange:N=>v({...x,phone:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"})]}),a.jsxs("div",{className:"space-y-2 md:col-span-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Direccin"}),a.jsx("input",{type:"text",value:x.address,onChange:N=>v({...x,address:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Ciudad"}),a.jsx("input",{type:"text",value:x.city,onChange:N=>v({...x,city:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Cdigo Postal"}),a.jsx("input",{type:"text",value:x.postal_code,onChange:N=>v({...x,postal_code:N.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("button",{type:"button",onClick:()=>u(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:f,className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all disabled:opacity-50",children:f?"Creando...":"Crear Cliente"})]})]})]})}),a.jsx(Ri,{isOpen:t.isOpen,onClose:()=>r({...t,isOpen:!1,clientToDelete:null}),onConfirm:j,title:t.title,message:t.message,type:"danger"})]})},FJ=({invoiceId:e,remainingAmount:t,onSuccess:r,onCancel:n})=>{const s=jt(),[i,o]=S.useState(!1),[l,c]=S.useState({amount:t,payment_method:"transfer",payment_date:new Date().toISOString().split("T")[0],reference:"",notes:""}),d=async f=>{var h,x;if(f.preventDefault(),parseFloat(l.amount)>parseFloat(t)){s.error("El monto no puede exceder el pendiente");return}try{o(!0),await kJ(e,l),s.success("Pago registrado exitosamente"),r()}catch(v){s.error(((x=(h=v.response)==null?void 0:h.data)==null?void 0:x.error)||"Error al registrar pago")}finally{o(!1)}},u=f=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(f);return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Registrar Pago"}),a.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:a.jsx(X2,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:a.jsxs("div",{className:"text-sm text-blue-900",children:["Monto pendiente: ",a.jsx("span",{className:"font-semibold",children:u(t)})]})}),a.jsxs("form",{onSubmit:d,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monto del Pago *"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ti,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"number",value:l.amount,onChange:f=>c({...l,amount:f.target.value}),min:"0.01",max:t,step:"0.01",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mtodo de Pago"}),a.jsxs("select",{value:l.payment_method,onChange:f=>c({...l,payment_method:f.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"transfer",children:"Transferencia"}),a.jsx("option",{value:"cash",children:"Efectivo"}),a.jsx("option",{value:"card",children:"Tarjeta"}),a.jsx("option",{value:"check",children:"Cheque"}),a.jsx("option",{value:"other",children:"Otro"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Pago *"}),a.jsx("input",{type:"date",value:l.payment_date,onChange:f=>c({...l,payment_date:f.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referencia"}),a.jsx("input",{type:"text",value:l.reference,onChange:f=>c({...l,reference:f.target.value}),placeholder:"N transferencia, recibo, etc.",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas"}),a.jsx("textarea",{value:l.notes,onChange:f=>c({...l,notes:f.target.value}),placeholder:"Notas adicionales sobre el pago...",rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[a.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsxs("button",{type:"submit",disabled:i,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[a.jsx(K2,{className:"w-4 h-4"}),i?"Registrando...":"Registrar Pago"]})]})]})]})},HJ=({invoiceId:e,payments:t,onUpdate:r})=>{const{showToast:n}=jt(),s=async(u,f)=>{if(window.confirm(`Eliminar pago de ${o(f)}?`))try{await NJ(u),n("Pago eliminado exitosamente","success"),r()}catch{n("Error al eliminar pago","error")}},i=async u=>{try{await _J(u),n("Recibo enviado exitosamente","success"),r()}catch{n("Error al enviar recibo","error")}},o=u=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(u),l=u=>u?new Date(u).toLocaleDateString("es-ES"):"-",c=u=>({transfer:"Transferencia",cash:"Efectivo",card:"Tarjeta",check:"Cheque",other:"Otro"})[u]||u;if(t.length===0)return a.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[a.jsx(Ti,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay pagos registrados"}),a.jsx("p",{className:"text-gray-600",children:"Los pagos aparecern aqu una vez registrados"})]});const d=t.reduce((u,f)=>u+parseFloat(f.amount),0);return a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("div",{className:"text-sm text-green-900",children:"Total Pagado"}),a.jsx("div",{className:"text-2xl font-bold text-green-700",children:o(d)})]})}),a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Recibo"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mtodo"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Referencia"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Monto"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(u=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:l(u.payment_date)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:u.receipt_number}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:c(u.payment_method)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:u.reference||"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600 text-right",children:o(u.amount)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:()=>i(u.id),className:"text-blue-600 hover:text-blue-900",title:"Reenviar recibo",children:a.jsx(G2,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>s(u.id,u.amount),className:"text-red-600 hover:text-red-900",title:"Eliminar pago",children:a.jsx(U0,{className:"w-4 h-4"})})]})})]},u.id))})]})}),t.some(u=>u.notes)&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Notas de Pagos:"}),t.filter(u=>u.notes).map(u=>a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:[u.receipt_number," - ",l(u.payment_date)]}),a.jsx("div",{className:"text-sm text-gray-900",children:u.notes})]},u.id))]})]})},Q2=({invoiceId:e,onBack:t,initialTab:r="info"})=>{var b;const n=e,s=jt(),[i,o]=S.useState(null),[l,c]=S.useState(!0),[d,u]=S.useState(r),[f,h]=S.useState(!1);S.useEffect(()=>{x()},[n]);const x=async()=>{try{c(!0);const N=await B2(n);o(N)}catch{s.error("Error al cargar factura"),t&&t()}finally{c(!1)}},v=async()=>{try{await jJ(n),s.success("Email enviado exitosamente"),x()}catch{s.error("Error al enviar email")}},y=()=>{h(!1),x()},w=N=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(N),g=N=>N?new Date(N).toLocaleDateString("es-ES"):"-",p=N=>{const C={pending:{label:"Pendiente",color:"bg-red-100 text-red-800",icon:Nl},partial:{label:"Pago Parcial",color:"bg-yellow-100 text-yellow-800",icon:hi},paid:{label:"Pagada",color:"bg-green-100 text-green-800",icon:Di}},E=C[N]||C.pending,T=E.icon;return a.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium ${E.color}`,children:[a.jsx(T,{className:"w-4 h-4"}),E.label]})};if(l)return a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!i)return null;const j=`${window.location.origin}/invoice/${i.token}`;return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("button",{onClick:()=>window.location.href="/invoices",className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(RJ,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:i.invoice_number}),p(i.payment_status)]}),a.jsx("p",{className:"text-gray-600",children:i.title}),a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Cliente: ",i.client_name||i.lead_name,i.business_name&&` - ${i.business_name}`]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>window.location.href=`/invoices/${n}/edit`,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx(V2,{className:"w-4 h-4"}),"Editar"]}),a.jsxs("button",{onClick:v,className:"flex items-center gap-2 px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(G2,{className:"w-4 h-4"}),"Enviar Email"]}),a.jsxs("a",{href:j,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx(LJ,{className:"w-4 h-4"}),"Ver Pblica"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total"}),a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:w(i.total_amount)})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Pagado"}),a.jsx("div",{className:"text-2xl font-bold text-green-600",children:w(i.paid_amount)})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Pendiente"}),a.jsx("div",{className:"text-2xl font-bold text-red-600",children:w(i.remaining_amount)})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Vencimiento"}),a.jsx("div",{className:"text-lg font-semibold text-gray-900",children:g(i.due_date)})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsxs("nav",{className:"flex -mb-px",children:[a.jsxs("button",{onClick:()=>u("info"),className:`flex items-center gap-2 px-6 py-4 border-b-2 font-medium text-sm transition-colors ${d==="info"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx($a,{className:"w-4 h-4"}),"Informacin"]}),a.jsxs("button",{onClick:()=>u("payments"),className:`flex items-center gap-2 px-6 py-4 border-b-2 font-medium text-sm transition-colors ${d==="payments"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(Ti,{className:"w-4 h-4"}),"Pagos (",((b=i.payments)==null?void 0:b.length)||0,")"]}),a.jsxs("button",{onClick:()=>u("activity"),className:`flex items-center gap-2 px-6 py-4 border-b-2 font-medium text-sm transition-colors ${d==="activity"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx($J,{className:"w-4 h-4"}),"Actividad"]})]})}),a.jsxs("div",{className:"p-6",children:[d==="info"&&a.jsxs("div",{className:"space-y-6",children:[i.company&&i.company.company_name&&a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6 border border-gray-100",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Emisor"}),a.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:[a.jsxs("div",{children:[i.company.company_logo&&a.jsx("img",{src:i.company.company_logo,alt:"Logo",className:"h-10 w-auto mb-2 object-contain"}),a.jsx("div",{className:"font-medium text-gray-900",children:i.company.company_name}),i.company.company_nif&&a.jsxs("div",{className:"text-sm text-gray-600",children:["NIF: ",i.company.company_nif]})]}),a.jsxs("div",{className:"text-sm text-gray-600 space-y-1 text-right",children:[i.company.company_address&&a.jsx("div",{children:i.company.company_address}),i.company.company_phone&&a.jsx("div",{children:i.company.company_phone}),i.company.company_email&&a.jsx("div",{children:i.company.company_email}),i.company.company_website&&a.jsx("a",{href:i.company.company_website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:i.company.company_website})]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-200 p-4 rounded-lg mb-6 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Cliente"}),a.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900 text-lg",children:i.client_name||i.lead_name}),i.business_name&&a.jsxs("div",{className:"text-sm text-gray-600",children:["NIF/CIF: ",i.business_name]})]}),a.jsxs("div",{className:"text-sm text-gray-600 space-y-1 text-right",children:[i.client_address&&a.jsx("div",{children:i.client_address}),(i.client_city||i.client_postal_code)&&a.jsxs("div",{children:[i.client_postal_code&&a.jsxs("span",{children:[i.client_postal_code," "]}),i.client_city&&a.jsx("span",{children:i.client_city})]}),(i.client_province||i.client_country)&&a.jsxs("div",{children:[i.client_province&&a.jsx("span",{children:i.client_province}),i.client_province&&i.client_country&&a.jsx("span",{children:", "}),i.client_country&&a.jsx("span",{children:i.client_country})]}),i.client_email&&a.jsx("div",{children:i.client_email}),i.phone&&a.jsx("div",{children:i.phone})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Emisin"}),a.jsx("div",{className:"text-gray-900",children:g(i.issue_date)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Vencimiento"}),a.jsx("div",{className:"text-gray-900",children:g(i.due_date)})]}),i.paid_date&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Pago"}),a.jsx("div",{className:"text-gray-900",children:g(i.paid_date)})]})]}),i.description&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripcin"}),a.jsx("p",{className:"text-gray-900",children:i.description})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Items"}),a.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Descripcin"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Cantidad"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Precio"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.items.map((N,C)=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:N.description}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:N.quantity}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:w(N.price)}),a.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 text-right",children:w(N.total)})]},C))})]})})]}),a.jsx("div",{className:"border-t pt-4",children:a.jsxs("div",{className:"max-w-md ml-auto space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),a.jsx("span",{className:"font-medium",children:w(i.subtotal)})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsxs("span",{className:"text-gray-600",children:["IVA (",i.tax_rate,"%):"]}),a.jsx("span",{className:"font-medium",children:w(i.tax_amount)})]}),a.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[a.jsx("span",{children:"Total:"}),a.jsx("span",{className:"text-blue-600",children:w(i.total_amount)})]})]})}),i.notes&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas Internas"}),a.jsx("p",{className:"text-gray-900 text-sm",children:i.notes})]})]}),d==="payments"&&a.jsxs("div",{className:"space-y-4",children:[i.payment_status!=="paid"&&a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[a.jsx(Ti,{className:"w-4 h-4"}),"Registrar Pago"]})}),f&&a.jsx(FJ,{invoiceId:n,remainingAmount:i.remaining_amount,onSuccess:y,onCancel:()=>h(!1)}),a.jsx(HJ,{invoiceId:n,payments:i.payments||[],onUpdate:x})]}),d==="activity"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Email Enviado"}),a.jsx("div",{className:"text-lg font-semibold text-gray-900",children:i.email_sent?"S":"No"}),i.email_sent_at&&a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:g(i.email_sent_at)})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Email Abierto"}),a.jsx("div",{className:"text-lg font-semibold text-gray-900",children:i.email_opened?"S":"No"}),i.email_opened_at&&a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:g(i.email_opened_at)})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Factura Visualizada"}),a.jsx("div",{className:"text-lg font-semibold text-gray-900",children:i.viewed?"S":"No"}),i.viewed_at&&a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:g(i.viewed_at)})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Nmero de Vistas"}),a.jsx("div",{className:"text-lg font-semibold text-gray-900",children:i.view_count})]})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm font-medium text-blue-900 mb-2",children:"Enlace Pblico"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:j,readOnly:!0,className:"flex-1 px-3 py-2 bg-white border border-blue-300 rounded text-sm"}),a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(j),showToast("Enlace copiado","success")},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Copiar"})]})]})]})]})]})]})},WJ=({clientId:e})=>{const[t,r]=S.useState([]),[n,s]=S.useState(!0),[i,o]=S.useState("all"),[l,c]=S.useState(null);jt(),S.useEffect(()=>{d()},[e]);const d=async()=>{try{s(!0);const v=localStorage.getItem("crm_token"),y=await fetch(`${U}/invoices?client_id=${e}`,{headers:{Authorization:`Bearer ${v}`}});if(!y.ok)throw new Error("Error al cargar facturas");const w=await y.json();r(w.invoices||[])}catch(v){console.error("Error fetching invoices:",v)}finally{s(!1)}},u=(v,y)=>{const w=y&&new Date(y)<new Date&&v!=="paid";return v==="paid"?a.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 border border-green-200",children:"Pagada"}):w?a.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800 border border-red-200",children:"Vencida"}):v==="partial"?a.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800 border border-yellow-200",children:"Parcial"}):a.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 border border-blue-200",children:"Pendiente"})},f=v=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(v),h=v=>v?new Date(v).toLocaleDateString("es-ES"):"-",x=t.filter(v=>{if(i==="all")return!0;const y=v.due_date&&new Date(v.due_date)<new Date&&v.payment_status!=="paid";return i==="overdue"?y:v.payment_status===i});return l?a.jsx("div",{className:"animate-fade-in",children:a.jsx(Q2,{invoiceId:l,onBack:()=>{c(null),d()}})}):n?a.jsx("div",{className:"text-center p-8 text-gray-500",children:"Cargando facturas..."}):t.length===0?a.jsxs("div",{className:"text-center p-8 bg-gray-50 rounded-lg border border-dashed border-gray-300",children:[a.jsx($a,{className:"mx-auto h-12 w-12 text-gray-400 mb-2"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No hay facturas"}),a.jsx("p",{className:"text-gray-500",children:"Este cliente an no tiene facturas registradas."})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Historial de Facturacin"}),a.jsx("div",{className:"flex gap-2",children:a.jsxs("select",{value:i,onChange:v=>o(v.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white focus:ring-2 focus:ring-blue-500 outline-none",children:[a.jsx("option",{value:"all",children:"Todas"}),a.jsx("option",{value:"paid",children:"Pagadas"}),a.jsx("option",{value:"pending",children:"Pendientes"}),a.jsx("option",{value:"overdue",children:"Vencidas"})]})})]}),a.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nmero"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vencimiento"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Importe"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(v=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600",children:v.invoice_number}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h(v.issue_date)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h(v.due_date)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right font-medium",children:f(v.total_amount)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:u(v.payment_status,v.due_date)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>c(v.id),className:"text-gray-400 hover:text-blue-600 transition-colors",title:"Ver detalles",children:a.jsx(B0,{className:"w-5 h-5"})}),a.jsx("a",{href:`/invoice/${v.token}`,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-green-600 transition-colors",title:"Ver pblica / Imprimir",children:a.jsx(Y2,{className:"w-5 h-5"})})]})})]},v.id))})]})})]})},Z2=({clientId:e,onBack:t})=>{const[r,n]=S.useState(null),[s,i]=S.useState(!0),[o,l]=S.useState("info"),[c,d]=S.useState({}),[u,f]=S.useState({}),[h,x]=S.useState(!1),[v,y]=S.useState({}),w=jt();S.useEffect(()=>{g()},[e]);const g=async()=>{try{const E=await fetch(`${U}/clients/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}});if(E.ok){const T=await E.json();n(T),T.installation&&f(T.installation),y({name:T.name||"",nif:T.nif||"",email:T.email||"",phone:T.phone||"",address:T.address||"",city:T.city||"",postal_code:T.postal_code||"",province:T.province||"",country:T.country||""})}else w.error("Error al cargar detalles del cliente")}catch(E){console.error("Error fetching client details:",E),w.error("Error de conexin")}finally{i(!1)}},p=E=>{const{name:T,value:O}=E.target;f(M=>({...M,[T]:O}))},j=E=>{const{name:T,value:O}=E.target;y(M=>({...M,[T]:O}))},b=async()=>{try{(await fetch(`${U}/clients/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`},body:JSON.stringify(v)})).ok?(w.success("Informacin del cliente actualizada"),x(!1),g()):w.error("Error al actualizar cliente")}catch(E){console.error("Error updating client:",E),w.error("Error de conexin")}},N=E=>{d(T=>({...T,[E]:!T[E]}))},C=async()=>{try{(await fetch(`${U}/clients/${e}/installation`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`},body:JSON.stringify(u)})).ok?(w.success("Datos de instalacin actualizados"),g()):w.error("Error al guardar datos")}catch(E){console.error("Error saving installation:",E),w.error("Error de conexin")}};return s?a.jsx("div",{className:"p-8 text-center",children:"Cargando..."}):r?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:a.jsx(rg,{className:"w-6 h-6 text-gray-600 dark:text-gray-300"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.name}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[r.email,"  ",r.phone]})]})]}),a.jsx("div",{className:"flex space-x-3",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${r.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:r.status==="active"?"Activo":"Inactivo"})})]}),a.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:a.jsxs("nav",{className:"-mb-px flex space-x-8",children:[a.jsx("button",{onClick:()=>l("info"),className:`py-4 px-1 border-b-2 font-medium text-sm ${o==="info"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Informacin General"}),a.jsx("button",{onClick:()=>l("installation"),className:`py-4 px-1 border-b-2 font-medium text-sm ${o==="installation"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Instalacin Tcnica"}),a.jsx("button",{onClick:()=>l("invoices"),className:`py-4 px-1 border-b-2 font-medium text-sm ${o==="invoices"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Facturacin"})]})}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[o==="info"&&a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute top-0 right-0 flex gap-2",children:h?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>x(!1),className:"p-2 text-gray-500 hover:text-gray-700 bg-gray-100 rounded-full dark:bg-gray-700 dark:text-gray-300",children:a.jsx(_r,{size:20})}),a.jsx("button",{onClick:b,className:"p-2 text-white bg-green-500 hover:bg-green-600 rounded-full",children:a.jsx(tn,{size:20})})]}):a.jsx("button",{onClick:()=>x(!0),className:"p-2 text-gray-500 hover:text-orange-500 hover:bg-orange-50 dark:hover:bg-gray-700 rounded-full transition-colors",children:a.jsx(uj,{size:20})})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-8",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre Comercial"}),h?a.jsx("input",{name:"name",value:v.name,onChange:j,className:"w-full p-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}):a.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-gray-900 dark:text-white",children:r.name})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"NIF/CIF"}),h?a.jsx("input",{name:"nif",value:v.nif,onChange:j,className:"w-full p-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}):a.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-gray-900 dark:text-white",children:r.nif||"-"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),h?a.jsx("input",{name:"email",value:v.email,onChange:j,className:"w-full p-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}):a.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-gray-900 dark:text-white",children:r.email})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Telfono"}),h?a.jsx("input",{name:"phone",value:v.phone,onChange:j,className:"w-full p-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}):a.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-gray-900 dark:text-white",children:r.phone})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Direccin"}),h?a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx("input",{name:"address",placeholder:"Direccin",value:v.address,onChange:j,className:"col-span-2 w-full p-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),a.jsx("input",{name:"city",placeholder:"Ciudad",value:v.city,onChange:j,className:"w-full p-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),a.jsx("input",{name:"postal_code",placeholder:"C.P.",value:v.postal_code,onChange:j,className:"w-full p-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),a.jsx("input",{name:"province",placeholder:"Provincia",value:v.province,onChange:j,className:"w-full p-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),a.jsx("input",{name:"country",placeholder:"Pas",value:v.country,onChange:j,className:"w-full p-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}):a.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-gray-900 dark:text-white",children:[r.address,(r.city||r.postal_code)&&`, ${r.city} ${r.postal_code}`,(r.province||r.country)&&`, ${r.province} (${r.country})`]})]})]})]}),o==="installation"&&a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(ds,{className:"w-5 h-5 mr-2 text-orange-500"}),"Servidor y Dominio"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Dominio"}),a.jsxs("div",{className:"relative",children:[a.jsx(xm,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),a.jsx("input",{type:"text",name:"domain",value:u.domain||"",onChange:p,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500",placeholder:"ejemplo.com"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"IP del Servidor"}),a.jsxs("div",{className:"relative",children:[a.jsx(ds,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),a.jsx("input",{type:"text",name:"server_ip",value:u.server_ip||"",onChange:p,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500",placeholder:"192.168.1.1"})]})]})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(nl,{className:"w-5 h-5 mr-2 text-orange-500"}),"Acceso Panel Admin"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"URL Admin"}),a.jsx("input",{type:"text",name:"admin_url",value:u.admin_url||"",onChange:p,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500",placeholder:"https://app.ejemplo.com/admin"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Usuario"}),a.jsx("input",{type:"text",name:"admin_user",value:u.admin_user||"",onChange:p,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Contrasea"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:c.admin?"text":"password",name:"admin_password",value:u.admin_password||"",onChange:p,className:"w-full pl-4 pr-10 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"}),a.jsx("button",{type:"button",onClick:()=>N("admin"),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:c.admin?a.jsx(gm,{size:18}):a.jsx(Nr,{size:18})})]})]})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(ij,{className:"w-5 h-5 mr-2 text-orange-500"}),"Base de Datos"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre BD"}),a.jsx("input",{type:"text",name:"db_name",value:u.db_name||"",onChange:p,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Usuario BD"}),a.jsx("input",{type:"text",name:"db_user",value:u.db_user||"",onChange:p,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Contrasea BD"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:c.db?"text":"password",name:"db_password",value:u.db_password||"",onChange:p,className:"w-full pl-4 pr-10 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"}),a.jsx("button",{type:"button",onClick:()=>N("db"),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:c.db?a.jsx(gm,{size:18}):a.jsx(Nr,{size:18})})]})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notas Tcnicas"}),a.jsx("textarea",{name:"notes",rows:"4",value:u.notes||"",onChange:p,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500",placeholder:"Detalles adicionales sobre la instalacin..."})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:C,className:"flex items-center space-x-2 px-6 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg font-medium transition-colors",children:[a.jsx(tn,{size:20}),a.jsx("span",{children:"Guardar Cambios"})]})})]}),o==="invoices"&&a.jsx(WJ,{clientId:e})]})]}):a.jsx("div",{className:"p-8 text-center",children:"Cliente no encontrado"})},BJ=()=>({"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`}),UJ=async()=>{const e=await fetch(`${U}/clients`,{headers:BJ()});if(!e.ok){const t=await e.json();throw new Error(t.error||"Error al obtener clientes")}return e.json()},qJ=({items:e,onChange:t})=>{const r=()=>{t([...e,{description:"",quantity:1,price:0,total:0}])},n=o=>{const l=e.filter((c,d)=>d!==o);t(l)},s=(o,l,c)=>{const d=[...e];if(d[o][l]=c,l==="quantity"||l==="price"){const u=parseFloat(d[o].quantity)||0,f=parseFloat(d[o].price)||0;d[o].total=u*f}t(d)},i=o=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(o);return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Items de la Factura"}),a.jsxs("button",{type:"button",onClick:r,className:"flex items-center gap-2 px-3 py-1 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Pi,{className:"w-4 h-4"}),"Aadir Item"]})]}),e.length===0?a.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[a.jsx("p",{className:"text-gray-500 mb-3",children:"No hay items en la factura"}),a.jsxs("button",{type:"button",onClick:r,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[a.jsx(Pi,{className:"w-4 h-4"}),"Aadir Primer Item"]})]}):a.jsx("div",{className:"space-y-3",children:e.map((o,l)=>a.jsxs("div",{className:"flex gap-3 items-start bg-gray-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-4 gap-3",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Descripcin"}),a.jsx("input",{type:"text",value:o.description,onChange:c=>s(l,"description",c.target.value),placeholder:"Descripcin del servicio/producto",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Cantidad"}),a.jsx("input",{type:"number",value:o.quantity,onChange:c=>s(l,"quantity",c.target.value),min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Precio Unitario"}),a.jsx("input",{type:"number",value:o.price,onChange:c=>s(l,"price",c.target.value),min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Total"}),a.jsx("div",{className:"text-sm font-semibold text-gray-900",children:i(o.total)})]}),a.jsx("button",{type:"button",onClick:()=>n(l),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Eliminar item",children:a.jsx(U0,{className:"w-4 h-4"})})]})]},l))})]})},YJ=({invoiceId:e,onSuccess:t,onCancel:r})=>{const n=jt(),s=!!e,i=e,[o,l]=S.useState(!1),[c,d]=S.useState([]),[u,f]=S.useState({client_id:"",title:"",description:"",items:[],tax_rate:21,issue_date:new Date().toISOString().split("T")[0],due_date:"",notes:""});S.useEffect(()=>{h(),s&&x()},[i]);const h=async()=>{try{const p=await UJ();d(p)}catch{n.error("Error al cargar clientes")}},x=async()=>{try{l(!0);const p=await B2(i);f({client_id:p.client_id,title:p.title,description:p.description||"",items:p.items||[],tax_rate:p.tax_rate,issue_date:p.issue_date.split("T")[0],due_date:p.due_date?p.due_date.split("T")[0]:"",notes:p.notes||""})}catch(p){console.error("Error fetching invoice:",p),n.error("Error al cargar la factura"),r&&r()}finally{l(!1)}},v=()=>{const p=u.items.reduce((N,C)=>N+(C.total||0),0),j=p*u.tax_rate/100,b=p+j;return{subtotal:p.toFixed(2),taxAmount:j.toFixed(2),total:b.toFixed(2)}},y=async p=>{var j,b;if(p.preventDefault(),!u.client_id){n.error("Debes seleccionar un cliente");return}if(u.items.length===0){n.error("Debes aadir al menos un item");return}try{l(!0),s?(await bJ(i,u),n.success("Factura actualizada exitosamente")):(await vJ(u),n.success("Factura creada exitosamente")),t&&t()}catch(N){n.error(((b=(j=N.response)==null?void 0:j.data)==null?void 0:b.error)||"Error al guardar factura")}finally{l(!1)}},w=p=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(p),g=v();return o&&s?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s?"Editar Factura":"Nueva Factura"}),a.jsx("p",{className:"text-gray-600 mt-1",children:s?"Modifica los datos de la factura":"Crea una nueva factura para un cliente"})]}),a.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx(X2,{className:"w-5 h-5"}),"Cancelar"]})]}),a.jsxs("form",{onSubmit:y,className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 space-y-4",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informacin General"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente *"}),a.jsxs("select",{value:u.client_id,onChange:p=>f({...u,client_id:p.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,disabled:s,children:[a.jsx("option",{value:"",children:"Seleccionar cliente"}),c.map(p=>a.jsxs("option",{value:p.id,children:[p.name," ",p.company&&`- ${p.company}`]},p.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ttulo *"}),a.jsx("input",{type:"text",value:u.title,onChange:p=>f({...u,title:p.target.value}),placeholder:"Ej: Servicios de consultora",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Emisin *"}),a.jsxs("div",{className:"relative",children:[a.jsx($b,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"date",value:u.issue_date,onChange:p=>f({...u,issue_date:p.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Vencimiento"}),a.jsxs("div",{className:"relative",children:[a.jsx($b,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"date",value:u.due_date,onChange:p=>f({...u,due_date:p.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IVA (%)"}),a.jsx("input",{type:"number",value:u.tax_rate,onChange:p=>f({...u,tax_rate:parseFloat(p.target.value)}),min:"0",max:"100",step:"0.01",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripcin"}),a.jsx("textarea",{value:u.description,onChange:p=>f({...u,description:p.target.value}),placeholder:"Descripcin general de la factura...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:a.jsx(qJ,{items:u.items,onChange:p=>f({...u,items:p})})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:a.jsxs("div",{className:"max-w-md ml-auto space-y-3",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),a.jsx("span",{className:"font-medium",children:w(g.subtotal)})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsxs("span",{className:"text-gray-600",children:["IVA (",u.tax_rate,"%):"]}),a.jsx("span",{className:"font-medium",children:w(g.taxAmount)})]}),a.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-3",children:[a.jsx("span",{children:"Total:"}),a.jsx("span",{className:"text-blue-600",children:w(g.total)})]})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas Internas"}),a.jsx("textarea",{value:u.notes,onChange:p=>f({...u,notes:p.target.value}),placeholder:"Notas adicionales (no visibles para el cliente)...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{type:"button",onClick:r,className:"px-6 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsxs("button",{type:"submit",disabled:o,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[a.jsx(K2,{className:"w-5 h-5"}),o?"Guardando...":s?"Actualizar Factura":"Crear Factura"]})]})]})]})},VJ=()=>{const{showToast:e}=jt(),[t,r]=S.useState([]),[n,s]=S.useState(!0),[i,o]=S.useState({status:"",search:"",page:1,limit:20}),[l,c]=S.useState({}),[d,u]=S.useState("list"),[f,h]=S.useState(null),x=async()=>{try{s(!0);const p=await W2(i);r(p.invoices||[]),c(p.pagination||{})}catch(p){console.error("Error fetching invoices:",p),r([]),c({})}finally{s(!1)}};S.useEffect(()=>{x()},[i.status,i.search,i.page]);const v=async(p,j)=>{if(window.confirm(`Eliminar factura ${j}?`))try{await wJ(p),e("Factura eliminada exitosamente","success"),x()}catch{e("Error al eliminar factura","error")}},y=p=>{const j={pending:{label:"Pendiente",color:"bg-red-100 text-red-800",icon:Nl},partial:{label:"Pago Parcial",color:"bg-yellow-100 text-yellow-800",icon:hi},paid:{label:"Pagada",color:"bg-green-100 text-green-800",icon:Di}},b=j[p]||j.pending,N=b.icon;return a.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${b.color}`,children:[a.jsx(N,{className:"w-3 h-3"}),b.label]})},w=p=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(p),g=p=>p?new Date(p).toLocaleDateString("es-ES"):"-";return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Facturas"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Gestiona las facturas de tus clientes"})]}),d==="list"&&a.jsxs("button",{onClick:()=>{h(null),u("create")},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Pi,{className:"w-5 h-5"}),"Nueva Factura"]})]}),d==="create"||d==="edit"?a.jsx(YJ,{invoiceId:f,onSuccess:()=>{u("list"),x()},onCancel:()=>u("list")}):d==="detail"?a.jsx(Q2,{invoiceId:f,onBack:()=>u("list")}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(zJ,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar por nmero, ttulo o cliente...",value:i.search,onChange:p=>o({...i,search:p.target.value,page:1}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(AJ,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsxs("select",{value:i.status,onChange:p=>o({...i,status:p.target.value,page:1}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[a.jsx("option",{value:"",children:"Todos los estados"}),a.jsx("option",{value:"pending",children:"Pendiente"}),a.jsx("option",{value:"partial",children:"Pago Parcial"}),a.jsx("option",{value:"paid",children:"Pagada"})]})]}),(i.search||i.status)&&a.jsx("button",{onClick:()=>o({status:"",search:"",page:1,limit:20}),className:"px-4 py-2 text-gray-600 hover:text-gray-900 transition-colors",children:"Limpiar filtros"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:n?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):t.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx($a,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay facturas"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Crea tu primera factura para comenzar"}),a.jsxs("button",{onClick:()=>{h(null),u("create")},className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[a.jsx(Pi,{className:"w-5 h-5"}),"Nueva Factura"]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nmero"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pagado"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pendiente"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(p=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($a,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:p.invoice_number})]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:p.client_name}),p.business_name&&a.jsx("div",{className:"text-sm text-gray-500",children:p.business_name})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g(p.issue_date)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:w(p.total_amount)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:w(p.paid_amount)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600",children:w(p.remaining_amount)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:y(p.payment_status)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:()=>{h(p.id),u("detail")},className:"text-blue-600 hover:text-blue-900",title:"Ver detalle",children:a.jsx(B0,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>{h(p.id),u("edit")},className:"text-gray-600 hover:text-gray-900",title:"Editar",children:a.jsx(V2,{className:"w-5 h-5"})}),p.payment_status!=="paid"&&a.jsx("button",{onClick:()=>{h(p.id),u("detail")},className:"text-green-600 hover:text-green-900",title:"Registrar pago",children:a.jsx(Ti,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>v(p.id,p.invoice_number),className:"text-red-600 hover:text-red-900",title:"Eliminar",children:a.jsx(U0,{className:"w-5 h-5"})})]})})]},p.id))})]}),l.pages>1&&a.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[a.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[a.jsx("button",{onClick:()=>o({...i,page:i.page-1}),disabled:i.page===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Anterior"}),a.jsx("button",{onClick:()=>o({...i,page:i.page+1}),disabled:i.page===l.pages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Siguiente"})]}),a.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-gray-700",children:["Mostrando ",a.jsx("span",{className:"font-medium",children:(i.page-1)*i.limit+1})," a"," ",a.jsx("span",{className:"font-medium",children:Math.min(i.page*i.limit,l.total)})," ","de ",a.jsx("span",{className:"font-medium",children:l.total})," resultados"]})}),a.jsx("div",{children:a.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[a.jsx("button",{onClick:()=>o({...i,page:i.page-1}),disabled:i.page===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Anterior"}),[...Array(l.pages)].map((p,j)=>a.jsx("button",{onClick:()=>o({...i,page:j+1}),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${i.page===j+1?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:j+1},j+1)),a.jsx("button",{onClick:()=>o({...i,page:i.page+1}),disabled:i.page===l.pages,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Siguiente"})]})})]})]})]})})]})]})},ja=({isOpen:e,onClose:t,title:r,children:n,size:s="md"})=>{if(S.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),!e)return null;const i={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl"};return a.jsx("div",{className:"modal-backdrop animate-fade-in",onClick:t,children:a.jsxs("div",{className:`bg-white dark:bg-dark-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-dark-700 w-full ${i[s]} animate-slide-in max-h-[85vh] flex flex-col transition-colors duration-200`,onClick:o=>o.stopPropagation(),children:[r&&a.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-dark-700 flex items-center justify-between shrink-0",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r}),a.jsx("button",{onClick:t,className:"text-gray-500 dark:text-dark-400 hover:text-gray-700 dark:hover:text-white transition-colors",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"p-6 overflow-y-auto flex-1 min-h-0 text-gray-900 dark:text-dark-50",children:n})]})})},GJ=()=>{var it;const[e,t]=S.useState("commercials"),[r,n]=S.useState([]),[s,i]=S.useState([]),[o,l]=S.useState([]),[c,d]=S.useState(!1),[u,f]=S.useState(!1),[h,x]=S.useState(!1),[v,y]=S.useState(!1),[w,g]=S.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},type:"danger"}),[p,j]=S.useState(null),[b,N]=S.useState(null),[C,E]=S.useState([]),[T,O]=S.useState(""),M=jt(),[R,H]=S.useState({username:"",password:"",email:"",full_name:"",phone:""}),[A,L]=S.useState({title:"",description:"",type:"document",video_url:"",content:"",external_url:"",is_public:!0,commercial_id:"",category:""}),[ee,te]=S.useState(!1),[he,G]=S.useState(null),[Z,ie]=S.useState(!1),[I,F]=S.useState(null),[Y,ae]=S.useState(null),V=localStorage.getItem("crm_token");S.useEffect(()=>{e==="commercials"&&le(),e==="training"&&me(),e==="support"&&Ce()},[e]);const le=async()=>{try{console.log("Fetching commercials with token:",V);const z=await fetch(`${U}/commercials`,{headers:{Authorization:`Bearer ${V}`}});if(console.log("Fetch response status:",z.status),z.ok){const ce=await z.json();console.log("Commercials data:",ce),n(ce)}else console.error("Fetch failed:",await z.text()),z.status===401&&M.error("Sesin expirada. Por favor, recarga la pgina.")}catch(z){console.error("Error:",z)}},xe=async z=>{z.preventDefault(),te(!0);try{const ce=new AbortController,xr=setTimeout(()=>ce.abort(),3e4),mn=Z?`${U}/commercials/${I}`:`${U}/commercials`,Tt=Z?"PUT":"POST",sr={...R};Z&&!sr.password&&delete sr.password;const Tr=await fetch(mn,{method:Tt,headers:{"Content-Type":"application/json",Authorization:`Bearer ${V}`},body:JSON.stringify(sr),signal:ce.signal});if(clearTimeout(xr),!Tr.ok){const Xi=await Tr.json();throw new Error(Xi.error||(Z?"Error al actualizar":"Error al crear"))}M.success(Z?"Comercial actualizado":"Comercial creado correctamente"),d(!1),H({username:"",password:"",email:"",full_name:"",phone:""}),ie(!1),F(null),le()}catch(ce){ce.name==="AbortError"?M.error("Tiempo de espera agotado."):M.error(ce.message)}finally{te(!1)}},K=z=>{H({username:z.username,password:"",email:z.email,full_name:z.full_name,phone:z.phone||""}),ie(!0),F(z.id),d(!0)},se=async z=>{try{const ce=await fetch(`${U}/commercials/${z.id}`,{headers:{Authorization:`Bearer ${V}`}});ce.ok&&(j(await ce.json()),f(!0))}catch{M.error("Error al cargar detalles")}},ye=z=>{g({isOpen:!0,title:"Eliminar comercial?",message:"Ests seguro de eliminar este comercial y todos sus datos asociados?",confirmText:"Eliminar",type:"danger",onConfirm:async()=>{G(z);try{if(!(await fetch(`${U}/commercials/${z}`,{method:"DELETE",headers:{Authorization:`Bearer ${V}`}})).ok)throw new Error("Error al eliminar");M.success("Comercial eliminado"),le()}catch(ce){M.error(ce.message)}finally{G(null)}}})},ve=async z=>{try{if(!(await fetch(`${U}/commercials/${z}/resend-welcome`,{method:"POST",headers:{Authorization:`Bearer ${V}`}})).ok)throw new Error("Error al reenviar email");M.success("Email de bienvenida reenviado correctamente")}catch(ce){M.error(ce.message)}},me=async()=>{try{const z=await fetch(`${U}/training`,{headers:{Authorization:`Bearer ${V}`}});z.ok&&i(await z.json())}catch(z){console.error("Error:",z)}},De=async z=>{z.preventDefault(),te(!0);try{const ce=new FormData;if(Object.entries(A).forEach(([mn,Tt])=>ce.append(mn,Tt)),Y&&ce.append("file",Y),!(await fetch(`${U}/training`,{method:"POST",headers:{Authorization:`Bearer ${V}`},body:ce})).ok)throw new Error("Error al crear material");M.success("Material creado"),x(!1),L({title:"",description:"",type:"document",video_url:"",content:"",external_url:"",is_public:!0,commercial_id:"",category:""}),ae(null),me()}catch(ce){M.error(ce.message)}finally{te(!1)}},W=z=>{g({isOpen:!0,title:"Eliminar material?",message:"Ests seguro de eliminar este material de formacin?",confirmText:"Eliminar",type:"danger",onConfirm:async()=>{try{await fetch(`${U}/training/${z}`,{method:"DELETE",headers:{Authorization:`Bearer ${V}`}}),M.success("Material eliminado"),me()}catch{M.error("Error al eliminar")}}})},Ce=async()=>{try{const z=await fetch(`${U}/support`,{headers:{Authorization:`Bearer ${V}`}});z.ok&&l(await z.json())}catch(z){console.error("Error:",z)}},Ne=async z=>{try{const ce=await fetch(`${U}/support/${z.id}`,{headers:{Authorization:`Bearer ${V}`}});if(ce.ok){const xr=await ce.json();N(xr),E(xr.messages||[]),y(!0)}}catch{M.error("Error al cargar ticket")}},yt=async()=>{if(T.trim())try{(await fetch(`${U}/support/${b.id}/reply`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${V}`},body:JSON.stringify({message:T})})).ok&&(O(""),Ne(b))}catch{M.error("Error al enviar")}},Me=async z=>{try{await fetch(`${U}/support/${b.id}/status`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${V}`},body:JSON.stringify({status:z})}),M.success("Estado actualizado"),Ne({...b,status:z}),Ce()}catch{M.error("Error")}},Fe=z=>{navigator.clipboard.writeText(z),M.success("Copiado")},nt=[{id:"commercials",label:"Comerciales",icon:Pa},{id:"training",label:"Formacin",icon:cs},{id:"support",label:"Soporte",icon:rl}],Mt={open:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",in_progress:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",resolved:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",closed:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"},Gr={video:mj,document:ht,tutorial:cs,link:dj};return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gestin de Comerciales"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Equipo comercial, formacin y soporte"})]}),a.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-700 rounded-xl p-1",children:nt.map(z=>a.jsxs("button",{onClick:()=>t(z.id),className:`flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-all ${e===z.id?"bg-white dark:bg-gray-600 text-indigo-600 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900"}`,children:[a.jsx(z.icon,{className:"w-4 h-4 mr-2"}),z.label,z.id==="support"&&o.filter(ce=>ce.status==="open").length>0&&a.jsx("span",{className:"ml-2 bg-red-500 text-white text-xs rounded-full px-2 py-0.5",children:o.filter(ce=>ce.status==="open").length})]},z.id))})]}),e==="commercials"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex justify-end mb-4",children:a.jsxs(We,{onClick:()=>d(!0),children:[a.jsx(Wr,{className:"w-4 h-4 mr-2"}),"Nuevo Comercial"]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Comercial"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Cdigo"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Acciones"})]})}),a.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[r.map(z=>{var ce;return a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold",children:((ce=z.full_name)==null?void 0:ce.charAt(0))||"C"}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:z.full_name}),a.jsxs("div",{className:"text-xs text-gray-500",children:["@",z.username]})]})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"px-2 py-1 text-xs font-mono rounded bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400",children:z.commercial_code||"N/A"})}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:z.email}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("button",{onClick:()=>se(z),className:"text-indigo-600 hover:text-indigo-900 flex items-center text-sm",children:[a.jsx(Nr,{className:"w-4 h-4 mr-1"})," Ver Ficha"]}),a.jsxs("button",{onClick:()=>K(z),className:"text-blue-600 hover:text-blue-900 flex items-center text-sm",children:[a.jsx(gu,{className:"w-4 h-4 mr-1"})," Editar"]}),a.jsxs("button",{onClick:()=>ye(z.id),disabled:he===z.id,className:"text-red-600 hover:text-red-900 flex items-center text-sm disabled:opacity-50",children:[a.jsx(ln,{className:"w-4 h-4 mr-1"})," ",he===z.id?"...":"Eliminar"]})]})})]},z.id)}),r.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"px-6 py-8 text-center text-gray-500",children:"No hay comerciales"})})]})]})})]}),e==="training"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex justify-end mb-4",children:a.jsxs(We,{onClick:()=>x(!0),children:[a.jsx(Wr,{className:"w-4 h-4 mr-2"}),"Nuevo Material"]})}),a.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.map(z=>{const ce=Gr[z.type]||ht;return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center",children:a.jsx(ce,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:z.title}),a.jsx("span",{className:"text-xs text-gray-500 capitalize",children:z.type})]})]}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${z.is_public?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:z.is_public?"Pblico":"Privado"})]}),z.description&&a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:z.description}),a.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-100 dark:border-gray-700",children:[a.jsx("span",{className:"text-xs text-gray-400",children:z.category||"Sin categora"}),a.jsx("button",{onClick:()=>W(z.id),className:"text-red-500 hover:text-red-700 text-sm",children:a.jsx(ln,{className:"w-4 h-4"})})]})]},z.id)}),s.length===0&&a.jsxs("div",{className:"col-span-full text-center py-12 text-gray-500",children:[a.jsx(cs,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"No hay materiales de formacin"})]})]})]}),e==="support"&&a.jsxs("div",{className:"space-y-4",children:[o.map(z=>a.jsx("div",{onClick:()=>Ne(z),className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg transition-shadow cursor-pointer",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${Mt[z.status]}`,children:z.status==="open"?"Abierto":z.status==="in_progress"?"En progreso":z.status==="resolved"?"Resuelto":"Cerrado"}),z.unread_count>0&&a.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-0.5",children:z.unread_count})]}),a.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:z.subject}),a.jsxs("p",{className:"text-sm text-gray-500",children:["De: ",z.commercial_name," (",z.commercial_email,")"]})]}),a.jsx("span",{className:"text-xs text-gray-400",children:new Date(z.created_at).toLocaleDateString()})]})},z.id)),o.length===0&&a.jsxs("div",{className:"text-center py-12 text-gray-500",children:[a.jsx(rl,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"No hay tickets de soporte"})]})]}),a.jsx(ja,{isOpen:c,onClose:()=>{d(!1),ie(!1)},title:Z?"Editar Comercial":"Nuevo Comercial",children:a.jsxs("form",{onSubmit:xe,className:"space-y-4",children:[a.jsx(we,{label:"Nombre Completo",name:"full_name",value:R.full_name,onChange:z=>H({...R,full_name:z.target.value}),required:!0,icon:a.jsx(Ct,{className:"w-4 h-4"})}),a.jsx(we,{label:"Email",name:"email",type:"email",value:R.email,onChange:z=>H({...R,email:z.target.value}),required:!0,icon:a.jsx(gt,{className:"w-4 h-4"})}),a.jsx(we,{label:"Telfono",name:"phone",value:R.phone,onChange:z=>H({...R,phone:z.target.value}),icon:a.jsx(bi,{className:"w-4 h-4"})}),a.jsx(we,{label:"Usuario",name:"username",value:R.username,onChange:z=>H({...R,username:z.target.value}),required:!0,icon:a.jsx(Ct,{className:"w-4 h-4"})}),a.jsx(we,{label:Z?"Nueva Contrasea (dejar en blanco para no cambiar)":"Contrasea",name:"password",type:"password",value:R.password,onChange:z=>H({...R,password:z.target.value}),required:!Z,icon:a.jsx(nl,{className:"w-4 h-4"})}),a.jsxs("div",{className:"pt-4 flex justify-end space-x-3",children:[a.jsx(We,{variant:"ghost",onClick:()=>{d(!1),ie(!1)},children:"Cancelar"}),a.jsx(We,{type:"submit",disabled:ee,children:ee?"Guardando...":Z?"Actualizar Comercial":"Crear Comercial"})]})]})}),a.jsx(ja,{isOpen:u,onClose:()=>f(!1),title:"Ficha del Comercial",children:p&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-16 w-16 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold text-2xl",children:(it=p.full_name)==null?void 0:it.charAt(0)}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:p.full_name}),a.jsxs("p",{className:"text-sm text-gray-500",children:["@",p.username]})]})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Cdigo Comercial"}),a.jsxs("button",{onClick:()=>Fe(p.commercial_code),className:"text-indigo-600 hover:text-indigo-800 flex items-center text-sm",children:[a.jsx(sj,{className:"w-4 h-4 mr-1"})," Copiar"]})]}),a.jsx("div",{className:"font-mono text-lg font-bold text-indigo-600 dark:text-indigo-400",children:p.commercial_code}),p.qr_code_url&&a.jsxs("div",{className:"mt-4 flex flex-col items-center gap-3",children:[a.jsx("div",{className:"bg-white p-3 rounded-xl shadow-sm",children:a.jsx("img",{src:p.qr_code_url,alt:"QR",className:"w-40 h-40 object-contain"})}),a.jsxs("button",{onClick:()=>ve(p.id),className:"flex items-center gap-2 px-4 py-2 text-sm bg-indigo-50 text-indigo-600 hover:bg-indigo-100 rounded-lg transition-colors",children:[a.jsx(gt,{className:"w-4 h-4"}),"Reenviar Email de Bienvenida"]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Email"}),a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:p.email})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Telfono"}),a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:p.phone||"N/A"})]})]}),p.stats&&a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:p.stats.total_leads}),a.jsx("div",{className:"text-xs text-gray-500",children:"Total Leads"})]}),a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-xl p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:p.stats.won_leads}),a.jsx("div",{className:"text-xs text-gray-500",children:"Ganados"})]}),a.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-xl p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-amber-600",children:p.stats.new_leads}),a.jsx("div",{className:"text-xs text-gray-500",children:"Nuevos"})]})]})]})}),a.jsx(ja,{isOpen:h,onClose:()=>x(!1),title:"Nuevo Material de Formacin",children:a.jsxs("form",{onSubmit:De,className:"space-y-4",children:[a.jsx(we,{label:"Ttulo",value:A.title,onChange:z=>L({...A,title:z.target.value}),required:!0}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tipo"}),a.jsxs("select",{value:A.type,onChange:z=>L({...A,type:z.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",children:[a.jsx("option",{value:"document",children:"Documento"}),a.jsx("option",{value:"video",children:"Video"}),a.jsx("option",{value:"tutorial",children:"Tutorial"}),a.jsx("option",{value:"link",children:"Enlace"})]})]}),a.jsx("textarea",{placeholder:"Descripcin",value:A.description,onChange:z=>L({...A,description:z.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",rows:2}),A.type==="video"&&a.jsx(we,{label:"URL del Video (YouTube, Vimeo...)",value:A.video_url,onChange:z=>L({...A,video_url:z.target.value})}),A.type==="link"&&a.jsx(we,{label:"URL del Enlace",value:A.external_url,onChange:z=>L({...A,external_url:z.target.value})}),A.type==="tutorial"&&a.jsx("textarea",{placeholder:"Contenido del tutorial (HTML permitido)",value:A.content,onChange:z=>L({...A,content:z.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",rows:6}),A.type==="document"&&a.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center",children:[a.jsx("input",{type:"file",onChange:z=>ae(z.target.files[0]),className:"hidden",id:"fileInput"}),a.jsxs("label",{htmlFor:"fileInput",className:"cursor-pointer",children:[a.jsx(S3,{className:"w-8 h-8 mx-auto text-gray-400 mb-2"}),a.jsx("p",{className:"text-sm text-gray-500",children:Y?Y.name:"Click para subir archivo"})]})]}),a.jsx(we,{label:"Categora",value:A.category,onChange:z=>L({...A,category:z.target.value}),placeholder:"Ej: Ventas, Producto..."}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:A.is_public,onChange:z=>L({...A,is_public:z.target.checked}),className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Visible para todos"})]}),!A.is_public&&a.jsxs("select",{value:A.commercial_id,onChange:z=>L({...A,commercial_id:z.target.value}),className:"flex-1 px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 text-sm",children:[a.jsx("option",{value:"",children:"Seleccionar comercial..."}),r.map(z=>a.jsx("option",{value:z.id,children:z.full_name},z.id))]})]}),a.jsxs("div",{className:"pt-4 flex justify-end space-x-3",children:[a.jsx(We,{variant:"ghost",onClick:()=>x(!1),children:"Cancelar"}),a.jsx(We,{type:"submit",disabled:ee,children:ee?"Guardando...":"Guardar Material"})]})]})}),a.jsx(ja,{isOpen:v,onClose:()=>y(!1),title:(b==null?void 0:b.subject)||"Ticket",children:b&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${Mt[b.status]}`,children:b.status==="open"?"Abierto":b.status==="in_progress"?"En progreso":b.status==="resolved"?"Resuelto":"Cerrado"}),a.jsxs("span",{className:"text-sm text-gray-500",children:["De: ",b.commercial_name]})]}),a.jsxs("select",{value:b.status,onChange:z=>Me(z.target.value),className:"text-sm px-2 py-1 border rounded dark:bg-gray-700 dark:border-gray-600",children:[a.jsx("option",{value:"open",children:"Abierto"}),a.jsx("option",{value:"in_progress",children:"En progreso"}),a.jsx("option",{value:"resolved",children:"Resuelto"}),a.jsx("option",{value:"closed",children:"Cerrado"})]})]}),a.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4 max-h-80 overflow-y-auto space-y-3",children:C.map(z=>a.jsx("div",{className:`flex ${z.sender_role==="admin"?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:`max-w-[80%] rounded-xl px-4 py-2 ${z.sender_role==="admin"?"bg-indigo-600 text-white":"bg-white dark:bg-gray-600 text-gray-900 dark:text-white border dark:border-gray-500"}`,children:[a.jsx("p",{className:"text-sm",children:z.message}),a.jsxs("p",{className:`text-xs mt-1 ${z.sender_role==="admin"?"text-indigo-200":"text-gray-400"}`,children:[z.sender_name,"  ",new Date(z.created_at).toLocaleTimeString()]})]})},z.id))}),b.status!=="closed"&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{value:T,onChange:z=>O(z.target.value),placeholder:"Escribe una respuesta...",className:"flex-1 px-4 py-2 border rounded-xl dark:bg-gray-700 dark:border-gray-600",onKeyPress:z=>z.key==="Enter"&&yt()}),a.jsx(We,{onClick:yt,children:a.jsx(ea,{className:"w-4 h-4"})})]})]})}),a.jsx(Ri,{isOpen:w.isOpen,onClose:()=>g({...w,isOpen:!1}),onConfirm:w.onConfirm,title:w.title,message:w.message,confirmText:w.confirmText,type:w.type})]})},KJ=({activeSection:e})=>{const[t,r]=S.useState([]),[n,s]=S.useState(!0),[i,o]=S.useState("kanban"),[l,c]=S.useState(null),[d,u]=S.useState(null),[f,h]=S.useState("all"),[x,v]=S.useState(""),[y,w]=S.useState([]),[g,p]=S.useState(""),[j,b]=S.useState(null),[N,C]=S.useState(null),[E,T]=S.useState(!1),[O,M]=S.useState(!1),[R,H]=S.useState(null),[A,L]=S.useState({isOpen:!1,title:"",message:"",onConfirm:null}),[ee,te]=S.useState(!1),[he,G]=S.useState(!1),[Z,ie]=S.useState([]),[I,F]=S.useState([]),Y=jt();S.useEffect(()=>{ae()},[]);const ae=async()=>{try{const q=await fetch(`${U}/settings/lead-statuses`,{headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}});if(q.ok){const ge=await q.json();F(ge)}}catch(q){console.error("Error fetching statuses:",q)}};S.useEffect(()=>{E&&fetch(`${U}/proposal-templates`,{headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}}).then(q=>q.json()).then(q=>ie(q)).catch(q=>console.error("Error loading templates:",q))},[E]);const[V,le]=S.useState({title:"",price:"",description:""}),[xe,K]=S.useState({name:"",email:"",phone:"",businessName:"",message:""}),[se,ye]=S.useState(null),[ve,me]=S.useState([]),[De,W]=S.useState(""),[Ce,Ne]=S.useState([]);S.useEffect(()=>{const q=ge=>{var Be;(ge.ctrlKey||ge.metaKey)&&ge.key==="k"&&(ge.preventDefault(),(Be=document.querySelector('input[placeholder*="Buscar"]'))==null||Be.focus()),(ge.ctrlKey||ge.metaKey)&&ge.key==="n"&&(ge.preventDefault(),te(!0)),ge.key==="Escape"&&(c(null),te(!1),T(!1))};return window.addEventListener("keydown",q),()=>window.removeEventListener("keydown",q)},[]),S.useEffect(()=>{e==="leads"&&(Me(),yt())},[e]);const yt=async()=>{try{const q=localStorage.getItem("crm_token"),ge=await fetch(`${U}/leads/stats`,{headers:{Authorization:`Bearer ${q}`}});if(ge.ok){const Be=await ge.json();C(Be)}}catch(q){console.error("Error fetching lead stats:",q)}},Me=async()=>{try{const q=localStorage.getItem("crm_token"),ge=await fetch(`${U}/leads`,{headers:{Authorization:`Bearer ${q}`}});if(!ge.ok)throw new Error("Error al cargar leads");const Be=await ge.json();r(Be)}catch(q){p("No se pudo conectar con el servidor de leads"),console.error(q),Y.error("No se pudo conectar con el servidor de leads")}finally{s(!1)}},Fe=async q=>{try{const ge=localStorage.getItem("crm_token"),Be=await fetch(`${U}/proposals/lead/${q}`,{headers:{Authorization:`Bearer ${ge}`}});if(Be.ok){const pn=await Be.json();if(pn.length>0){const Zl=pn[0];ye(Zl);const ec=await fetch(`${U}/proposals/${Zl.id}/comments`,{headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}});ec.ok&&me(await ec.json())}else ye(null),me([])}}catch(ge){console.error("Error fetching proposal details:",ge),Y.error("Error al cargar detalles de la propuesta")}};S.useEffect(()=>{l?(Fe(l.id),Ne([{id:1,type:"created",description:"Lead creado",date:l.created_at,icon:"plus"},{id:2,type:"status",description:`Estado cambiado a ${mn(l.status)}`,date:l.created_at,icon:"refresh"}])):(ye(null),me([]),Ne([]))},[l]);const nt=async q=>{if(q.preventDefault(),!(!De.trim()||!se))try{if((await fetch(`${U}/proposals/${se.id}/comments`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`},body:JSON.stringify({author:"Equipo NoahPro",authorType:"internal",comment:De})})).ok){W("");const Be=await fetch(`${U}/proposals/${se.id}/comments`,{headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}});Be.ok&&me(await Be.json()),Y.success("Comentario enviado correctamente")}else throw new Error("Error al enviar comentario")}catch(ge){console.error("Error adding comment:",ge),Y.error("Error al enviar comentario")}},Mt=async(q,ge)=>{try{if(!(await fetch(`${U}/leads/${q}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`},body:JSON.stringify({status:ge})})).ok)throw new Error("Error al actualizar estado");r(t.map(pn=>pn.id===q?{...pn,status:ge}:pn)),l&&l.id===q&&c({...l,status:ge}),Y.success("Estado del lead actualizado correctamente")}catch(Be){console.error("Error updating status:",Be),Y.error("Error al actualizar el estado")}},Gr=async q=>{q.preventDefault();try{const ge=await fetch(`${U}/leads`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`},body:JSON.stringify({...xe,source:"manual"})});if(ge.ok)Y.success("Lead creado correctamente"),te(!1),K({name:"",email:"",phone:"",businessName:"",message:""}),Me();else{const Be=await ge.json();throw new Error(Be.error||"Error al crear lead")}}catch(ge){Y.error(ge.message),console.error(ge)}},it=async q=>{q.preventDefault(),l&&(H({leadId:l.id,title:V.title,description:V.description,totalPrice:parseFloat(V.price)}),T(!1),M(!0))},z=async()=>{if(R)try{if(!(await fetch(`${U}/proposals`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`},body:JSON.stringify(R)})).ok)throw new Error("Error al crear propuesta");Y.success("Propuesta creada y enviada al lead"),M(!1),H(null),le({title:"",price:"",description:""}),Mt(l.id,"proposal_sent"),Fe(l.id)}catch(q){Y.error("Error al crear la propuesta"),console.error(q)}},ce=async()=>{se&&L({isOpen:!0,title:"Eliminar Propuesta",message:"Ests seguro de eliminar esta propuesta? Esta accin no se puede deshacer.",onConfirm:async()=>{try{if(!(await fetch(`${U}/proposals/${se.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}})).ok)throw new Error("Error al eliminar propuesta");Y.success("Propuesta eliminada correctamente"),ye(null),me([]),Fe(l.id)}catch(q){Y.error("Error al eliminar la propuesta"),console.error(q)}}})},xr=q=>{r(ge=>ge.filter(Be=>Be.id!==q)),Me()},mn=q=>({new:"Nuevo",contacted:"Contactado",qualified:"Cualificado",proposal_sent:"Propuesta Enviada",won:"Ganado",lost:"Perdido"})[q]||q,Tt=t.filter(q=>{if(f!=="all"&&q.status!==f)return!1;if(x){const ge=x.toLowerCase();if(!(q.name.toLowerCase().includes(ge)||q.email&&q.email.toLowerCase().includes(ge)||q.business_name&&q.business_name.toLowerCase().includes(ge)))return!1}return y.length>0,!0}),sr={new:Tt.filter(q=>q.status==="new"),contacted:Tt.filter(q=>q.status==="contacted"),qualified:Tt.filter(q=>q.status==="qualified"),proposal_sent:Tt.filter(q=>q.status==="proposal_sent"),won:Tt.filter(q=>q.status==="won"),lost:Tt.filter(q=>q.status==="lost")},Tr=t.length,Xi=[{label:"Total Leads",value:Tr,icon:a.jsx(Pa,{className:"w-6 h-6"}),progress:100,subtitle:N?`${N.last_30_days} ltimos 30 das`:""},{label:"Nuevos",value:sr.new.length,icon:a.jsx(ag,{className:"w-6 h-6"}),progress:Tr?sr.new.length/Tr*100:0,subtitle:N?`${N.new||0} en total`:""},{label:"En Proceso",value:sr.contacted.length+sr.qualified.length,icon:a.jsx(sl,{className:"w-6 h-6"}),progress:Tr?(sr.contacted.length+sr.qualified.length)/Tr*100:0,subtitle:N?`${(N.contacted||0)+(N.qualified||0)} en total`:""},{label:"Ganados",value:sr.won.length,icon:a.jsx(zr,{className:"w-6 h-6"}),progress:Tr?sr.won.length/Tr*100:0,subtitle:N?`${N.won||0} en total`:""}];return e==="home"?a.jsx(CO,{}):e==="chat"?a.jsx(QD,{}):e==="analytics"?a.jsx(X3,{}):e==="proposals"?a.jsx(EO,{}):e==="invoices"?a.jsx(VJ,{}):e==="email_templates"?a.jsx(DO,{}):e==="settings"?a.jsx(aD,{}):e==="commercials"?a.jsx(GJ,{}):e==="clients"?d?a.jsx(Z2,{clientId:d,onBack:()=>u(null)}):a.jsx(J2,{onClientSelect:u}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx("span",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg text-orange-600 dark:text-orange-400",children:a.jsx(Ol,{className:"w-5 h-5"})}),"Pipeline de Ventas"]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 ml-11",children:"Gestiona tus leads y oportunidades"})]})}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:Xi.map((q,ge)=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:q.label}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:q.value})]}),a.jsx("div",{className:"p-2 bg-orange-50 dark:bg-orange-900/20 rounded-lg text-orange-600 dark:text-orange-400 text-xl",children:q.icon})]}),a.jsx("div",{className:"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-1.5 mt-4",children:a.jsx("div",{className:"h-1.5 rounded-full bg-gradient-to-r from-orange-500 to-red-600 transition-all duration-500",style:{width:`${q.progress}%`}})}),a.jsx("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:q.subtitle})]},ge))}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",placeholder:" Buscar por nombre, email o empresa... (K)",className:"w-full pl-4 pr-10 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm focus:ring-2 focus:ring-orange-500 dark:text-white",value:x,onChange:q=>v(q.target.value)}),x&&a.jsx("button",{onClick:()=>v(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:""})]})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("button",{onClick:()=>{o("kanban"),G(!1)},className:`px-4 py-2.5 rounded-lg text-sm font-medium transition-all ${i==="kanban"&&!he?"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[a.jsx(k5,{className:"w-4 h-4 inline mr-1.5"}),"Kanban"]}),a.jsxs("button",{onClick:()=>{o("list"),G(!1)},className:`px-4 py-2.5 rounded-lg text-sm font-medium transition-all ${i==="list"&&!he?"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[a.jsx(S5,{className:"w-4 h-4 inline mr-1.5"}),"Lista"]}),a.jsxs("button",{onClick:()=>G(!0),className:`px-4 py-2.5 rounded-lg text-sm font-medium transition-all ${he?"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[a.jsx(Pl,{className:"w-4 h-4 inline mr-1.5"}),"Calendar"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(We,{variant:"secondary",onClick:()=>{const q=`${U}/export/leads/excel?status=${f}&search=${x}`;window.open(q,"_blank")},size:"sm",children:[a.jsx(oj,{className:"w-4 h-4 inline mr-1.5"}),"Exportar"]}),a.jsx(We,{variant:"primary",onClick:()=>te(!0),size:"sm",children:"+ Nuevo Lead"})]})]}),x&&a.jsx("div",{className:"flex flex-wrap gap-2 mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1.5 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 rounded-full text-sm",children:[a.jsxs("span",{children:['Bsqueda: "',x,'"']}),a.jsx("button",{onClick:()=>v(""),className:"hover:text-blue-900",children:""})]})})]}),i==="kanban"&&!he&&a.jsx(TO,{leads:Tt,onLeadClick:c,onStatusChange:Mt,statuses:I,onDeleteLead:xr}),i==="list"&&!he&&a.jsx(vk,{leads:Tt,onLeadClick:c,onStatusChange:Mt,onDeleteLead:xr}),he&&a.jsx(yJ,{leads:Tt,onLeadClick:c,statuses:I}),l&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden shadow-2xl",children:[a.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-600 p-6",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:l.name}),a.jsxs("div",{className:"flex flex-wrap gap-4",children:[a.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg px-3 py-2 flex items-center gap-2",children:[a.jsx(gt,{className:"w-4 h-4 text-white"}),a.jsx("span",{className:"text-white text-sm",children:l.email})]}),l.phone&&a.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg px-3 py-2 flex items-center gap-2",children:[a.jsx(bi,{className:"w-4 h-4 text-white"}),a.jsx("span",{className:"text-white text-sm",children:l.phone})]}),l.business_name&&a.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg px-3 py-2 flex items-center gap-2",children:[a.jsx(Vc,{className:"w-4 h-4 text-white"}),a.jsx("span",{className:"text-white text-sm",children:l.business_name})]})]})]}),a.jsx("button",{onClick:()=>c(null),className:"p-2 hover:bg-white/20 rounded-lg transition-colors ml-4",children:a.jsx(_r,{className:"w-6 h-6 text-white"})})]})}),a.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:a.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[a.jsxs("div",{className:"col-span-2 space-y-6",children:[l.message&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-5 shadow-sm",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Descripcin"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed whitespace-pre-wrap",children:l.message})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-5 shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Propuesta Comercial"}),!se&&a.jsx(We,{size:"sm",onClick:()=>T(!0),children:"+ Nueva Propuesta"})]}),se?a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between items-start mb-4 pb-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-lg",children:se.title}),a.jsx("p",{className:"text-3xl font-bold text-orange-600 mt-2",children:parseFloat(se.total_price).toLocaleString("es-ES",{style:"currency",currency:"EUR"})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("a",{href:`/proposal/${se.token}`,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 rounded-lg hover:bg-orange-100 dark:hover:bg-orange-900/30 transition-colors text-sm font-medium",children:"Ver Pblica "}),a.jsx("button",{onClick:ce,className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Eliminar propuesta",children:a.jsx(ln,{className:"w-4 h-4"})})]})]})}):a.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-900/50 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-700",children:[a.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-8 h-8 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4 font-medium",children:"No hay propuesta para este lead"}),a.jsx(We,{size:"sm",onClick:()=>T(!0),children:"+ Crear Propuesta"})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-5 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Facturas"}),a.jsx(IJ,{leadId:l.id,leadName:l.name})]})]}),a.jsxs("div",{className:"col-span-1 space-y-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-5 shadow-sm",children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Estado del Lead"}),a.jsxs("select",{value:l.status,onChange:q=>Mt(l.id,q.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-medium focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all",children:[a.jsx("option",{value:"new",children:"Nuevo"}),a.jsx("option",{value:"contacted",children:"Contactado"}),a.jsx("option",{value:"qualified",children:"Cualificado"}),a.jsx("option",{value:"proposal_sent",children:"Propuesta Enviada"}),a.jsx("option",{value:"won",children:"Ganado"}),a.jsx("option",{value:"lost",children:"Perdido"})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-5 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Actividad Reciente"}),a.jsx("div",{className:"space-y-4",children:Ce.map((q,ge)=>a.jsxs("div",{className:"relative",children:[ge!==Ce.length-1&&a.jsx("div",{className:"absolute left-4 top-10 bottom-0 w-px bg-gray-200 dark:bg-gray-700"}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs("div",{className:"w-8 h-8 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center flex-shrink-0 relative z-10",children:[q.icon==="plus"&&a.jsx(Wr,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),q.icon==="refresh"&&a.jsx(hj,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),q.icon==="message"&&a.jsx(ea,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"})]}),a.jsxs("div",{className:"flex-1 pt-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white leading-snug",children:q.description}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:new Date(q.date).toLocaleDateString("es-ES",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})]})]})]},q.id))})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-5 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Comentarios"}),a.jsx("div",{className:"space-y-3 mb-4 max-h-60 overflow-y-auto",children:ve.length===0?a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic text-center py-4",children:"No hay comentarios"}):ve.map(q=>a.jsx("div",{className:`flex ${q.author_type==="internal"?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:`max-w-[90%] rounded-lg p-3 ${q.author_type==="internal"?"bg-orange-50 dark:bg-orange-900/30 text-orange-900 dark:text-orange-100":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white"}`,children:[a.jsx("div",{className:"text-xs font-medium opacity-75 mb-1",children:q.author}),a.jsx("div",{className:"text-sm",children:q.comment})]})},q.id))}),a.jsxs("form",{onSubmit:nt,className:"flex gap-2",children:[a.jsx("input",{type:"text",value:De,onChange:q=>W(q.target.value),placeholder:"Escribir comentario...",className:"flex-1 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),a.jsx(We,{type:"submit",size:"sm",disabled:!De.trim(),children:"Enviar"})]})]})]})]})})]})}),ee&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full p-6 shadow-2xl",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Nuevo Lead Manual"}),a.jsxs("form",{onSubmit:Gr,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre Completo"}),a.jsx("input",{type:"text",required:!0,className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all",value:xe.name,onChange:q=>K({...xe,name:q.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),a.jsx("input",{type:"email",required:!0,className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all",value:xe.email,onChange:q=>K({...xe,email:q.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Telfono"}),a.jsx("input",{type:"tel",className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all",value:xe.phone,onChange:q=>K({...xe,phone:q.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre del Negocio"}),a.jsx("input",{type:"text",className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all",value:xe.businessName,onChange:q=>K({...xe,businessName:q.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notas Iniciales"}),a.jsx("textarea",{className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all",rows:"3",value:xe.message,onChange:q=>K({...xe,message:q.target.value})})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsx(We,{type:"button",variant:"secondary",onClick:()=>te(!1),children:"Cancelar"}),a.jsx(We,{type:"submit",children:"Crear Lead"})]})]})]})}),E&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full p-6 shadow-2xl",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Nueva Propuesta"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cargar Plantilla"}),a.jsxs("select",{className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all",onChange:q=>{const ge=q.target.value;if(!ge)return;const Be=Z.find(pn=>pn.id===parseInt(ge));Be&&le({title:Be.content_json.title,price:Be.content_json.totalPrice,description:Be.content_json.description||Be.description})},children:[a.jsx("option",{value:"",children:"-- Seleccionar Plantilla --"}),Z.map(q=>a.jsx("option",{value:q.id,children:q.name},q.id))]})]}),a.jsxs("form",{onSubmit:it,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Ttulo"}),a.jsx("input",{type:"text",required:!0,className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all",value:V.title,onChange:q=>le({...V,title:q.target.value}),placeholder:"Ej: Propuesta TPV Completo"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Precio Total ()"}),a.jsx("input",{type:"number",required:!0,className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all",value:V.price,onChange:q=>le({...V,price:q.target.value}),placeholder:"0.00"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Descripcin"}),a.jsx("textarea",{className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all",rows:"3",value:V.description,onChange:q=>le({...V,description:q.target.value}),placeholder:"Detalles de la propuesta..."})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsx(We,{type:"button",variant:"secondary",onClick:()=>T(!1),children:"Cancelar"}),a.jsx(We,{type:"submit",children:"Crear Propuesta"})]})]})]})}),O&&R&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-lg w-full p-6 shadow-2xl",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Confirmar y Enviar Propuesta"}),a.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 mb-6 border border-orange-200 dark:border-orange-800",children:a.jsxs("p",{className:"text-sm text-orange-800 dark:text-orange-200 mb-2",children:["Esta propuesta se enviar al lead: ",a.jsx("strong",{children:l==null?void 0:l.name})]})}),a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4",children:[a.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Ttulo"}),a.jsx("p",{className:"text-gray-900 dark:text-white font-semibold mt-1",children:R.title})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4",children:[a.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Precio Total"}),a.jsx("p",{className:"text-2xl font-bold text-orange-600 mt-1",children:R.totalPrice.toLocaleString("es-ES",{style:"currency",currency:"EUR"})})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4",children:[a.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Descripcin"}),a.jsx("p",{className:"text-gray-900 dark:text-white mt-1 whitespace-pre-wrap text-sm",children:R.description||"Sin descripcin"})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(We,{variant:"secondary",onClick:()=>{M(!1),H(null),T(!0)},className:"flex-1",children:"Editar"}),a.jsx(We,{onClick:z,className:"flex-1",children:"Confirmar y Enviar"})]})]})}),a.jsx(Ri,{isOpen:A.isOpen,onClose:()=>L({...A,isOpen:!1}),onConfirm:A.onConfirm,title:A.title,message:A.message,type:"danger"})]})},XJ=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(0),[s,i]=S.useState(!1);S.useEffect(()=>{o(),l();const x=()=>{o(),l()};return window.addEventListener("crm_notification_update",x),()=>{window.removeEventListener("crm_notification_update",x)}},[]);const o=async()=>{try{const x=await fetch(`${U}/notifications?limit=10`);if(x.ok){const v=await x.json();t(v)}}catch(x){console.error("Error fetching notifications:",x)}},l=async()=>{try{const x=await fetch(`${U}/notifications/unread-count`);if(x.ok){const v=await x.json();n(v.count)}}catch(x){console.error("Error fetching unread count:",x)}},c=async x=>{try{await fetch(`${U}/notifications/${x}/read`,{method:"PUT"}),t(v=>v.map(y=>y.id===x?{...y,is_read:!0}:y)),n(v=>Math.max(0,v-1))}catch(v){console.error("Error marking as read:",v)}},d=async()=>{try{await fetch(`${U}/notifications/mark-all-read`,{method:"PUT"}),t(x=>x.map(v=>({...v,is_read:!0}))),n(0)}catch(x){console.error("Error marking all as read:",x)}},u=x=>{c(x.id),x.link&&(window.location.href=x.link),i(!1)},f=x=>({new_lead:"",proposal_viewed:"",proposal_accepted:"",new_comment:"",chat_message:""})[x]||"",h=x=>{const v=new Date(x),w=new Date-v,g=Math.floor(w/6e4),p=Math.floor(w/36e5),j=Math.floor(w/864e5);return g<1?"Ahora":g<60?`Hace ${g}m`:p<24?`Hace ${p}h`:`Hace ${j}d`};return a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>i(!s),className:"relative p-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),r>0&&a.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full",children:r>99?"99+":r})]}),s&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>i(!1)}),a.jsxs("div",{className:"absolute right-0 mt-2 w-96 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 z-20 max-h-[500px] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Notificaciones"}),r>0&&a.jsx("button",{onClick:d,className:"text-xs text-primary-600 hover:text-primary-700",children:"Marcar todas como ledas"})]}),a.jsx("div",{className:"overflow-y-auto flex-1",children:e.length===0?a.jsx("div",{className:"p-8 text-center text-gray-500",children:"No hay notificaciones"}):e.map(x=>a.jsx("div",{onClick:()=>u(x),className:`p-4 border-b border-gray-100 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors ${x.is_read?"":"bg-primary-50 dark:bg-primary-900/10"}`,children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("span",{className:"text-2xl flex-shrink-0",children:f(x.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:`text-sm font-medium text-gray-900 dark:text-white ${x.is_read?"":"font-bold"}`,children:x.title}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:x.message}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:h(x.created_at)})]}),!x.is_read&&a.jsx("span",{className:"w-2 h-2 bg-primary-600 rounded-full flex-shrink-0 mt-2"})]})},x.id))})]})]})]})},JJ=()=>{const[e,t]=S.useState(!1),[r,n]=S.useState(!1),[s,i]=S.useState([]),[o,l]=S.useState(null),[c,d]=S.useState([]),[u,f]=S.useState(""),[h,x]=S.useState(0),v=S.useRef(null),y=Q1();S.useEffect(()=>{if(y){const j=y.subscribe("admin_notifications");return j.bind("new_chat_message",b=>{w(),o&&o.session_id===b.sessionId?d(N=>[...N,{senderType:"visitor",message:b.message,created_at:b.timestamp||new Date().toISOString()}]):x(N=>N+1)}),()=>{j.unbind_all(),j.unsubscribe()}}},[y,o]),S.useEffect(()=>{w()},[]),S.useEffect(()=>{o&&g(o.session_id)},[o]),S.useEffect(()=>{var j;(j=v.current)==null||j.scrollIntoView({behavior:"smooth"})},[c,e]);const w=async()=>{try{const j=await fetch(`${U}/chat/conversations`);if(j.ok){const b=await j.json();i(b);const N=b.reduce((C,E)=>C+(E.unread_count||0),0);x(N)}}catch(j){console.error("Error fetching conversations:",j)}},g=async j=>{try{const b=await fetch(`${U}/chat/conversations/${j}/messages`);if(b.ok){const N=await b.json();d(N)}}catch(b){console.error("Error fetching messages:",b)}},p=async j=>{if(j.preventDefault(),!u.trim()||!o)return;const b={sessionId:o.session_id,senderType:"admin",senderName:"Agente",message:u};try{(await fetch(`${U}/chat/message`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).ok&&(d(C=>[...C,{senderType:"admin",message:u,created_at:new Date().toISOString()}]),f(""))}catch(N){console.error("Error sending message:",N)}};return e?a.jsxs("div",{className:`fixed bottom-6 right-6 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden z-50 flex flex-col transition-all duration-300 ${r?"w-72 h-14":"w-80 md:w-96 h-[500px]"}`,children:[a.jsxs("div",{className:"p-4 bg-gradient-to-r from-orange-500 to-red-600 text-white flex justify-between items-center cursor-pointer",onClick:()=>n(!r),children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ea,{className:"w-5 h-5"}),a.jsx("span",{className:"font-semibold",children:"Chat Soporte"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{onClick:j=>{j.stopPropagation(),n(!r)},className:"p-1 hover:bg-white/20 rounded transition-colors",children:r?a.jsx(A5,{className:"w-4 h-4"}):a.jsx(U5,{className:"w-4 h-4"})}),a.jsx("button",{onClick:j=>{j.stopPropagation(),t(!1)},className:"p-1 hover:bg-white/20 rounded transition-colors",children:a.jsx(_r,{className:"w-4 h-4"})})]})]}),!r&&a.jsx(a.Fragment,{children:o?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-2 bg-gray-50 dark:bg-gray-700 flex justify-between items-center border-b border-gray-200 dark:border-gray-600",children:[a.jsx("button",{onClick:()=>l(null),className:"text-xs text-orange-600 dark:text-orange-400 hover:underline font-medium",children:" Volver"}),a.jsxs("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:["Visitante ",o.session_id.substring(0,6)]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50 dark:bg-gray-900/50",children:[c.map((j,b)=>a.jsx("div",{className:`flex ${j.senderType==="admin"?"justify-end":"justify-start"}`,children:a.jsx("div",{className:`p-3 rounded-2xl max-w-[85%] text-sm shadow-sm ${j.senderType==="admin"?"bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-tr-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border border-gray-200 dark:border-gray-700 rounded-tl-none"}`,children:j.message})},b)),a.jsx("div",{ref:v})]}),a.jsx("form",{onSubmit:p,className:"p-3 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"text",value:u,onChange:j=>f(j.target.value),placeholder:"Escribe...",className:"flex-1 px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"}),a.jsx("button",{type:"submit",disabled:!u.trim(),className:"p-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 disabled:opacity-50 transition-all",children:a.jsx(Ml,{className:"w-4 h-4"})})]})})]}):a.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:s.length===0?a.jsx("div",{className:"text-center py-8 text-gray-500 text-sm",children:"No hay chats activos"}):s.map(j=>a.jsxs("div",{onClick:()=>l(j),className:"p-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start mb-1",children:[a.jsxs("span",{className:"font-medium text-sm text-gray-900 dark:text-white",children:["Visitante ",j.session_id.substring(0,6)]}),a.jsx("span",{className:"text-[10px] text-gray-400",children:new Date(j.updated_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:j.last_message})]},j.id))})})]}):a.jsxs("button",{onClick:()=>t(!0),className:"fixed bottom-6 right-6 w-14 h-14 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-full shadow-lg hover:shadow-orange-500/40 hover:scale-105 transition-all flex items-center justify-center z-50",children:[a.jsx(ea,{className:"w-6 h-6"}),h>0&&a.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-white text-red-600 text-xs font-bold rounded-full flex items-center justify-center border-2 border-red-600",children:h})]})},QJ=({isOpen:e,onClose:t,onUpdate:r})=>{const n=jt(),[s,i]=S.useState(!1),[o,l]=S.useState(!1),[c,d]=S.useState({username:"",role:"",full_name:"",email:"",password:"",notifications_enabled:!0,avatar_url:null}),[u,f]=S.useState(null),h=S.useRef(null),[x,v]=S.useState(!1);S.useEffect(()=>{e&&y()},[e]);const y=async()=>{i(!0);try{const j=localStorage.getItem("crm_token"),b=await fetch(`${U}/users/profile`,{headers:{Authorization:`Bearer ${j}`}});if(b.ok){const N=await b.json();d({username:N.username||"",role:N.role||"",full_name:N.full_name||"",email:N.email||"",password:"",notifications_enabled:N.notifications_enabled,avatar_url:N.avatar_url}),f(N.avatar_url)}}catch(j){console.error("Error cargando perfil:",j)}finally{i(!1)}},w=j=>{const b=j.target.files[0];if(b){if(b.size>5*1024*1024){n.error("La imagen no debe superar los 5MB");return}d(N=>({...N,avatarFile:b})),f(URL.createObjectURL(b)),v(!1)}},g=j=>{j.stopPropagation(),f(null),d(b=>({...b,avatarFile:null})),v(!0),h.current&&(h.current.value="")},p=async j=>{j.preventDefault(),l(!0);try{const b=new FormData;b.append("full_name",c.full_name),b.append("email",c.email),c.password&&b.append("password",c.password),b.append("notifications_enabled",c.notifications_enabled),x?b.append("delete_avatar","true"):c.avatarFile&&b.append("avatar",c.avatarFile);const N=localStorage.getItem("crm_token"),C=await fetch(`${U}/users/profile`,{method:"PUT",headers:{Authorization:`Bearer ${N}`},body:b});if(C.ok){const E=await C.json(),O={...JSON.parse(localStorage.getItem("user")||"{}"),...E.user};localStorage.setItem("user",JSON.stringify(O)),r&&r(O),n.success("Perfil actualizado correctamente"),t()}else n.error("Error al actualizar perfil")}catch(b){console.error("Error saving profile:",b),n.error("Error al guardar los cambios")}finally{l(!1)}};return a.jsx(ja,{isOpen:e,onClose:t,title:"Mi Perfil",children:a.jsxs("form",{onSubmit:p,className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>{var j;return(j=h.current)==null?void 0:j.click()},children:[a.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden border-4 border-white shadow-lg bg-gray-100",children:u?a.jsx("img",{src:u,alt:"Profile",className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200 text-gray-400",children:a.jsx(Ct,{className:"w-12 h-12"})})}),a.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(F4,{className:"w-8 h-8 text-white"})})]}),u&&a.jsx("button",{type:"button",onClick:g,className:"absolute -right-2 -bottom-2 p-2 bg-white rounded-full shadow-md text-red-500 hover:text-red-600 hover:bg-red-50 transition-colors",title:"Eliminar foto",children:a.jsx(ln,{className:"w-4 h-4"})})]}),a.jsx("input",{type:"file",ref:h,className:"hidden",accept:"image/*",onChange:w}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Click para cambiar foto"})]}),s?a.jsx("div",{className:"flex justify-center p-4",children:a.jsx(E5,{className:"w-6 h-6 animate-spin text-orange-500"})}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Usuario"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ct,{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",value:c.username,readOnly:!0,className:"w-full pl-10 pr-4 py-2 border rounded-xl bg-gray-100 text-gray-500 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 cursor-not-allowed"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Rol"}),a.jsx("input",{type:"text",value:c.role==="admin"?"Administrador":"Comercial",readOnly:!0,className:"w-full px-4 py-2 border rounded-xl bg-gray-100 text-gray-500 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 cursor-not-allowed uppercase text-xs font-bold"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre Completo"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ct,{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",value:c.full_name,onChange:j=>d({...c,full_name:j.target.value}),className:"w-full pl-10 pr-4 py-2 border rounded-xl focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(gt,{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"email",value:c.email,onChange:j=>d({...c,email:j.target.value}),className:"w-full pl-10 pr-4 py-2 border rounded-xl focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nueva Contrasea (Opcional)"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400",children:""}),a.jsx("input",{type:"password",value:c.password,onChange:j=>d({...c,password:j.target.value}),placeholder:"Dejar en blanco para no cambiar",className:"w-full pl-10 pr-4 py-2 border rounded-xl focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:a.jsx(nj,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Notificaciones"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Recibir alertas en tiempo real"})]})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:c.notifications_enabled,onChange:j=>d({...c,notifications_enabled:j.target.checked}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 dark:peer-focus:ring-orange-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-orange-500"})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors disabled:opacity-50",children:o?"Guardando...":"Guardar Cambios"})]})]})})},Rb=({children:e,onLogout:t,activeSection:r="leads",onSectionChange:n,onQuickAction:s})=>{const[i,o]=S.useState("light"),[l,c]=S.useState(!1),[d,u]=S.useState(!1),[f,h]=S.useState(!1),[x,v]=S.useState(!1),y=S.useRef(null),[w,g]=S.useState(()=>JSON.parse(localStorage.getItem("user")||"{}"));S.useEffect(()=>{const E=T=>{y.current&&!y.current.contains(T.target)&&h(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]);const p=Q1(),j=jt();S.useEffect(()=>{if(p&&w.notifications_enabled!==!1){const E=w.id||w.userId;if(!E)return;const T=p.subscribe(`user_${E}`);T.bind("new_notification",M=>{j.info(M.message||"Nueva notificacin"),window.dispatchEvent(new Event("crm_notification_update"))});let O;return w.role==="admin"&&(O=p.subscribe("admin_notifications"),O.bind("new_chat_message",M=>{j.info(`Nuevo mensaje de chat: ${M.message}`)})),()=>{T.unbind_all(),T.unsubscribe(),O&&(O.unbind_all(),O.unsubscribe())}}},[p,j,w.notifications_enabled,w.id,w.userId,w.role]),S.useEffect(()=>{const E=localStorage.getItem("theme")||"light";o(E),document.documentElement.classList.toggle("dark",E==="dark")},[]);const b=()=>{const E=i==="light"?"dark":"light";o(E),localStorage.setItem("theme",E),document.documentElement.classList.toggle("dark",E==="dark")},C=[{id:"home",label:"Dashboard",icon:a.jsx(b5,{className:"w-5 h-5"}),description:"Panel principal"},{id:"leads",label:"Leads",icon:a.jsx(Pa,{className:"w-5 h-5"}),description:"Gestin de leads"},{id:"clients",label:"Clientes",icon:a.jsx(Pa,{className:"w-5 h-5"}),description:"Cartera de clientes"},{id:"training",label:"Formacin",icon:a.jsx(cs,{className:"w-5 h-5"}),description:"Material educativo",roles:["commercial"]},{id:"support",label:"Soporte",icon:a.jsx(rl,{className:"w-5 h-5"}),description:"Ayuda y tickets",roles:["commercial"]},{id:"proposals",label:"Propuestas",icon:a.jsx(ht,{className:"w-5 h-5"}),description:"Gestin de propuestas",roles:["admin"]},{id:"invoices",label:"Facturas",icon:a.jsx(ht,{className:"w-5 h-5"}),description:"Facturacin y pagos",roles:["admin"]},{id:"chat",label:"Chat",icon:a.jsx(ea,{className:"w-5 h-5"}),description:"Conversaciones",roles:["admin"]},{id:"analytics",label:"Analytics",icon:a.jsx(Ol,{className:"w-5 h-5"}),description:"Mtricas y reportes",roles:["admin"]},{id:"commercials",label:"Comerciales",icon:a.jsx(Pa,{className:"w-5 h-5"}),description:"Gestin de equipo",roles:["admin"]},{id:"settings",label:"Configuracin",icon:a.jsx(fj,{className:"w-5 h-5"}),description:"Ajustes del sistema",roles:["admin"]}].filter(E=>!E.roles||E.roles.includes(w.role||"admin"));return a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex",children:[a.jsxs("aside",{className:`fixed left-0 top-0 h-full bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300 z-40 ${l?"w-20":"w-64"}`,children:[a.jsxs("div",{className:"h-16 flex items-center justify-between px-4 border-b border-gray-200 dark:border-gray-700",children:[!l&&a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl flex items-center justify-center shadow-lg shadow-orange-500/20",children:a.jsx("span",{className:"text-white font-bold text-lg",children:"N"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-sm font-bold text-gray-900 dark:text-white",children:"NoahPro"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"CRM Pro"})]})]}),a.jsx("button",{onClick:()=>c(!l),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:a.jsx("svg",{className:`w-5 h-5 text-gray-600 dark:text-gray-300 transition-transform ${l?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})})]}),a.jsx("nav",{className:"p-3 space-y-1",children:C.map(E=>a.jsxs("button",{onClick:()=>E.onClick?E.onClick():n&&n(E.id),className:`w-full flex items-center space-x-3 px-3 py-3 rounded-xl transition-all group ${r===E.id?"bg-gradient-to-r from-orange-500 to-red-600 text-white shadow-lg shadow-orange-500/30":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[a.jsx("span",{className:"text-2xl",children:E.icon}),!l&&a.jsxs("div",{className:"flex-1 text-left",children:[a.jsx("p",{className:"font-medium text-sm",children:E.label}),a.jsx("p",{className:`text-xs ${r===E.id?"text-orange-100":"text-gray-500 dark:text-gray-400"}`,children:E.description})]}),E.badge&&!l&&a.jsx("span",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:E.badge})]},E.id))})]}),a.jsxs("div",{className:`flex-1 min-w-0 transition-all duration-300 ${l?"ml-20":"ml-64"}`,children:[a.jsx("header",{className:`h-16 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 fixed top-0 right-0 z-50 shadow-sm transition-all duration-300 ${l?"left-20":"left-64"}`,children:a.jsxs("div",{className:"h-full px-6 flex items-center justify-between",children:[a.jsx("div",{className:"flex-1 max-w-2xl",children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",placeholder:"Buscar leads, propuestas, contactos...",className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-gray-700 border-0 rounded-xl text-sm focus:ring-2 focus:ring-orange-500 dark:text-white placeholder-gray-500 transition-all"}),a.jsx("svg",{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),a.jsxs("div",{className:"flex items-center space-x-4 ml-6",children:[a.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Ayuda",children:a.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx(XJ,{}),a.jsx("button",{onClick:b,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors text-gray-600 dark:text-gray-300",title:i==="light"?"Modo Oscuro":"Modo Claro",children:i==="light"?a.jsx(Y5,{className:"w-5 h-5"}):a.jsx(x3,{className:"w-5 h-5"})}),w.role!=="commercial"&&a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>u(!d),className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-xl hover:shadow-lg hover:shadow-orange-500/30 transition-all font-medium text-sm flex items-center space-x-1",children:[a.jsx("span",{children:"+ Nuevo"}),a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),d&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1)}),a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 z-50 overflow-hidden",children:a.jsxs("div",{className:"py-2",children:[a.jsxs("button",{onClick:()=>{u(!1),s==null||s("lead")},className:"w-full text-left px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center space-x-3",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Nuevo Lead"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Crear contacto manual"})]})]}),a.jsxs("button",{onClick:()=>{u(!1),s==null||s("proposal")},className:"w-full text-left px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center space-x-3",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Nueva Propuesta"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Crear oferta comercial"})]})]}),a.jsxs("button",{onClick:()=>{u(!1),s==null||s("meeting")},className:"w-full text-left px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center space-x-3",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Nueva Reunin"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Agendar videollamada"})]})]})]})})]})]}),a.jsxs("div",{className:"relative",ref:y,children:[a.jsxs("button",{onClick:()=>h(!f),className:"flex items-center space-x-2 pl-4 border-l border-gray-200 dark:border-gray-700",children:[w.avatar_url?a.jsx("img",{src:w.avatar_url,alt:"Profile",className:"w-8 h-8 rounded-full object-cover shadow-md"}):a.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center text-white font-semibold shadow-md",children:w.username?w.username.charAt(0).toUpperCase():"U"}),a.jsxs("div",{className:"hidden md:block text-left",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white leading-none",children:w.full_name||w.username||"Usuario"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:w.email||"Sin email"})]}),a.jsx(Y4,{className:`w-4 h-4 text-gray-500 transition-transform ${f?"rotate-180":""}`})]}),f&&a.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 z-50 overflow-hidden",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{h(!1),v(!0)},className:"w-full text-left px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center space-x-2 text-gray-700 dark:text-gray-300",children:[a.jsx(Ct,{className:"w-4 h-4"}),a.jsx("span",{children:"Ver Perfil"})]}),a.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700 my-1"}),a.jsxs("button",{onClick:()=>{h(!1),t()},className:"w-full text-left px-4 py-2 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors flex items-center space-x-2 text-red-600 dark:text-red-400",children:[a.jsx(O5,{className:"w-4 h-4"}),a.jsx("span",{children:"Cerrar Sesin"})]})]})})]})]})]})}),a.jsx("main",{className:"transition-all duration-300 pt-20 p-6",children:e})]}),w.role==="admin"&&a.jsx(JJ,{}),a.jsx(QJ,{isOpen:x,onClose:()=>v(!1),onUpdate:E=>{g(E),localStorage.setItem("user",JSON.stringify(E))}})]})},ZJ=()=>{var v,y;const e=window.location.pathname.split("/"),t=e[e.length-1],[r,n]=S.useState(null),[s,i]=S.useState(!0),[o,l]=S.useState(null);S.useEffect(()=>{c()},[t]);const c=async()=>{var w;try{i(!0);const g=await SJ(t);n(g)}catch(g){l(((w=g.response)==null?void 0:w.status)===404?"Factura no encontrada":"Error al cargar factura")}finally{i(!1)}},d=w=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(w),u=w=>w?new Date(w).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}):"-",f=w=>{const g={pending:{label:"Pendiente de Pago",color:"bg-red-100 text-red-800 border-red-200",icon:Nl},partial:{label:"Pago Parcial",color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:hi},paid:{label:"Pagada",color:"bg-green-100 text-green-800 border-green-200",icon:Di}},p=g[w]||g.pending,j=p.icon;return a.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-lg border-2 ${p.color} font-semibold`,children:[a.jsx(j,{className:"w-5 h-5"}),p.label]})},h=w=>({transfer:"Transferencia",cash:"Efectivo",card:"Tarjeta",check:"Cheque",other:"Otro"})[w]||w;if(s)return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Cargando factura..."})]})});if(o)return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(hi,{className:"w-8 h-8 text-red-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error"}),a.jsx("p",{className:"text-gray-600",children:o})]})});if(!r)return null;const x=r.due_date&&new Date(r.due_date)<new Date&&r.payment_status!=="paid";return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-red-50 py-8 px-4",children:[a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden mb-6",children:[a.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-600 text-white p-8",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[(v=r.company)!=null&&v.company_logo?a.jsx("img",{src:r.company.company_logo,alt:"Logo",className:"h-12 w-auto bg-white rounded-lg p-1"}):a.jsx("div",{className:"p-2 bg-white/10 rounded-lg",children:a.jsx($a,{className:"w-8 h-8"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Factura"}),((y=r.company)==null?void 0:y.company_name)&&a.jsx("p",{className:"text-orange-100 text-sm font-medium",children:r.company.company_name})]})]}),a.jsx("p",{className:"text-orange-100 text-lg opacity-90",children:r.invoice_number})]}),a.jsx("div",{className:"flex flex-col items-end gap-2",children:f(r.payment_status)})]})}),a.jsxs("div",{className:"p-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-sm font-semibold text-gray-500 uppercase mb-2",children:"Facturado a"}),a.jsx("p",{className:"text-xl font-bold text-gray-900",children:r.client_name||r.lead_name}),r.business_name&&a.jsxs("p",{className:"text-gray-600 font-medium mb-1",children:["NIF/CIF: ",r.business_name]}),a.jsxs("div",{className:"text-gray-600 text-sm mt-2 space-y-0.5",children:[r.client_address&&a.jsx("p",{children:r.client_address}),(r.client_city||r.client_postal_code)&&a.jsxs("p",{children:[r.client_postal_code," ",r.client_city]}),(r.client_province||r.client_country)&&a.jsxs("p",{children:[r.client_province," ",r.client_country&&`(${r.client_country})`]}),r.client_phone&&a.jsxs("p",{className:"pt-1",children:["Telf: ",r.client_phone]}),r.client_email&&a.jsxs("p",{children:["Email: ",r.client_email]})]})]}),a.jsxs("div",{className:"text-left md:text-right space-y-6",children:[r.company&&a.jsxs("div",{children:[a.jsx("h2",{className:"text-sm font-semibold text-gray-500 uppercase mb-2",children:"Emisor"}),a.jsx("p",{className:"text-xl font-bold text-gray-900",children:r.company.company_name}),a.jsxs("div",{className:"text-gray-600 text-sm mt-1 space-y-0.5",children:[r.company.company_nif&&a.jsxs("p",{children:["NIF: ",r.company.company_nif]}),r.company.company_address&&a.jsx("p",{children:r.company.company_address}),(r.company.company_postal_code||r.company.company_city)&&a.jsxs("p",{children:[r.company.company_postal_code," ",r.company.company_city]}),r.company.company_phone&&a.jsxs("p",{children:["Telf: ",r.company.company_phone]}),r.company.company_email&&a.jsx("p",{children:r.company.company_email})]})]}),a.jsxs("div",{className:"space-y-3 pt-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Fecha Emisin"}),a.jsx("p",{className:"text-sm font-medium text-gray-900",children:u(r.issue_date)})]}),r.due_date&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Vencimiento"}),a.jsxs("p",{className:`text-sm font-medium ${x?"text-red-600":"text-gray-900"}`,children:[u(r.due_date),x&&a.jsx("span",{className:"font-normal ml-1",children:"(Vencida)"})]})]})]})]})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:r.title}),r.description&&a.jsx("p",{className:"text-gray-600",children:r.description})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Detalle"}),a.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descripcin"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cantidad"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Precio"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.items.map((w,g)=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:w.description}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 text-right",children:w.quantity}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 text-right",children:d(w.price)}),a.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 text-right",children:d(w.total)})]},g))})]})})]}),a.jsx("div",{className:"flex justify-end mb-8",children:a.jsxs("div",{className:"w-full md:w-1/2 space-y-3",children:[a.jsxs("div",{className:"flex justify-between text-gray-600",children:[a.jsx("span",{children:"Subtotal:"}),a.jsx("span",{className:"font-semibold",children:d(r.subtotal)})]}),a.jsxs("div",{className:"flex justify-between text-gray-600",children:[a.jsxs("span",{children:["IVA (",r.tax_rate,"%):"]}),a.jsx("span",{className:"font-semibold",children:d(r.tax_amount)})]}),a.jsxs("div",{className:"border-t-2 border-gray-300 pt-3 flex justify-between text-xl font-bold text-gray-900",children:[a.jsx("span",{children:"Total:"}),a.jsx("span",{className:"text-blue-600",children:d(r.total_amount)})]})]})}),r.payment_status!=="pending"&&a.jsxs("div",{className:`rounded-lg p-6 mb-8 ${r.payment_status==="paid"?"bg-green-50 border-2 border-green-200":"bg-yellow-50 border-2 border-yellow-200"}`,children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:r.payment_status==="paid"?a.jsxs(a.Fragment,{children:[a.jsx(Di,{className:"w-5 h-5 text-green-600"}),a.jsx("span",{className:"text-green-900",children:"Estado de Pago"})]}):a.jsxs(a.Fragment,{children:[a.jsx(hi,{className:"w-5 h-5 text-yellow-600"}),a.jsx("span",{className:"text-yellow-900",children:"Estado de Pago"})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Factura"}),a.jsx("p",{className:"text-xl font-bold text-gray-900",children:d(r.total_amount)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Pagado"}),a.jsx("p",{className:"text-xl font-bold text-green-600",children:d(r.paid_amount)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Pendiente"}),a.jsx("p",{className:"text-xl font-bold text-red-600",children:d(r.remaining_amount)})]})]}),r.payments&&r.payments.length>0&&a.jsxs("div",{className:"mt-6",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Historial de Pagos"}),a.jsx("div",{className:"space-y-2",children:r.payments.map((w,g)=>a.jsxs("div",{className:"flex justify-between items-center bg-white rounded-lg p-3 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-900",children:u(w.payment_date)}),a.jsxs("span",{className:"text-gray-500 ml-2",children:["(",h(w.payment_method),")"]})]}),a.jsx("span",{className:"font-semibold text-green-600",children:d(w.amount)})]},g))})]})]}),r.notes&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Notas"}),a.jsx("p",{className:"text-gray-600 text-sm",children:r.notes})]}),a.jsx("div",{className:"flex justify-center gap-4",children:a.jsxs("button",{onClick:()=>window.print(),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all font-semibold no-print",children:[a.jsx(Y2,{className:"w-5 h-5"}),"Descargar / Imprimir"]})})]})]}),a.jsxs("div",{className:"text-center text-gray-500 text-sm",children:[a.jsx("p",{children:"Esta es una factura generada electrnicamente."}),a.jsx("p",{className:"mt-1",children:"Para cualquier consulta, por favor contacte con nosotros."})]})]}),a.jsx("style",{children:`
                @media print {
                    * {
                        -webkit-print-color-adjust: exact !important;
                        print-color-adjust: exact !important;
                    }
                    
                    html, body {
                        background: white !important;
                        margin: 0 !important;
                        padding: 0 !important;
                        font-size: 12px !important;
                    }
                    
                    .min-h-screen {
                        min-height: auto !important;
                        background: white !important;
                        padding: 0 !important;
                    }
                    
                    .max-w-4xl {
                        max-width: 100% !important;
                        margin: 0 !important;
                        padding: 0 !important;
                    }
                    
                    .bg-white {
                        box-shadow: none !important;
                    }
                    
                    .rounded-2xl, .rounded-xl, .rounded-lg {
                        border-radius: 0 !important;
                    }
                    
                    .shadow-2xl, .shadow-xl, .shadow-lg, .shadow-sm {
                        box-shadow: none !important;
                    }
                    
                    /* Header color print */
                    .bg-gradient-to-r {
                        background: #f97316 !important;
                        -webkit-print-color-adjust: exact !important;
                    }
                    
                    /* Grid layout for print */
                    .grid-cols-1 {
                        display: flex !important;
                        flex-direction: row !important;
                        justify-content: space-between !important;
                    }
                    
                    .md\\:grid-cols-2 > div {
                        width: 48% !important;
                    }
                    
                    .md\\:text-right {
                        text-align: right !important;
                    }
                    
                    /* Table styles */
                    table {
                        width: 100% !important;
                        border-collapse: collapse !important;
                        page-break-inside: avoid !important;
                    }
                    
                    th, td {
                        padding: 8px !important;
                        border: 1px solid #e5e7eb !important;
                    }
                    
                    thead {
                        background: #f9fafb !important;
                        -webkit-print-color-adjust: exact !important;
                    }
                    
                    /* Hide non-print elements */
                    .no-print,
                    button,
                    .flex.justify-center.gap-4 {
                        display: none !important;
                    }
                    
                    /* Footer in print */
                    .text-center.text-gray-500 {
                        margin-top: 20px !important;
                        padding-top: 10px !important;
                        border-top: 1px solid #e5e7eb !important;
                    }
                    
                    /* Page break control */
                    .mb-8 {
                        page-break-inside: avoid !important;
                    }
                    
                    /* Ensure text colors are visible */
                    .text-gray-900, .text-gray-800, .text-gray-700 {
                        color: #111827 !important;
                    }
                    
                    .text-gray-600, .text-gray-500 {
                        color: #4b5563 !important;
                    }
                    
                    /* Status badge colors */
                    .bg-green-100 {
                        background-color: #d1fae5 !important;
                    }
                    .bg-red-100 {
                        background-color: #fee2e2 !important;
                    }
                    .bg-yellow-100 {
                        background-color: #fef3c7 !important;
                    }
                    
                    /* Header text in white */
                    .text-white {
                        color: white !important;
                    }
                    
                    .text-orange-100 {
                        color: #ffedd5 !important;
                    }
                }
                
                @page {
                    size: A4;
                    margin: 15mm;
                }
            `})]})},eQ=({activeSection:e="home"})=>{var xe,K,se,ye,ve,me,De;const[t,r]=S.useState("dashboard");S.useEffect(()=>{r(e==="training"?"training":e==="support"?"support":e==="leads"?"leads":e==="clients"?"clients":"dashboard")},[e]);const[n,s]=S.useState({leads:{total:0,won:0},commissions:{current_month:0,total_earned:0},profile:{},recent_leads:[]}),[i,o]=S.useState([]),[l,c]=S.useState([]),[d,u]=S.useState(!1),[f,h]=S.useState(!1),[x,v]=S.useState(null),[y,w]=S.useState([]),[g,p]=S.useState({subject:"",message:"",priority:"normal"}),[j,b]=S.useState(""),[N]=S.useState(JSON.parse(localStorage.getItem("user")||"{}")),C=jt(),[E,T]=S.useState([]),[O,M]=S.useState(null),[R,H]=S.useState(null);S.useEffect(()=>{t==="leads"&&A()},[t]);const A=async()=>{try{const W=await fetch(`${U}/leads`,{headers:{Authorization:`Bearer ${te}`}});W.ok&&T(await W.json())}catch(W){console.error("Error fetching leads:",W)}},L=(W,Ce)=>{T(E.map(Ne=>Ne.id===W?{...Ne,status:Ce}:Ne)),he()},ee=W=>{T(E.filter(Ce=>Ce.id!==W)),he()},te=localStorage.getItem("crm_token");S.useEffect(()=>{he(),G(),Z()},[]);const he=async()=>{try{const W=await fetch(`${U}/commercials/stats`,{headers:{Authorization:`Bearer ${te}`}});W.ok&&s(await W.json())}catch(W){console.error("Error:",W)}},G=async()=>{try{const W=await fetch(`${U}/training/my`,{headers:{Authorization:`Bearer ${te}`}});W.ok&&o(await W.json())}catch(W){console.error("Error:",W)}},Z=async()=>{try{const W=await fetch(`${U}/support/my`,{headers:{Authorization:`Bearer ${te}`}});W.ok&&c(await W.json())}catch(W){console.error("Error:",W)}},ie=async W=>{W.preventDefault();try{if(!(await fetch(`${U}/support`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${te}`},body:JSON.stringify(g)})).ok)throw new Error("Error al crear ticket");C.success("Ticket creado. Te responderemos pronto."),u(!1),p({subject:"",message:"",priority:"normal"}),Z()}catch(Ce){C.error(Ce.message)}},I=async W=>{try{const Ce=await fetch(`${U}/support/${W.id}`,{headers:{Authorization:`Bearer ${te}`}});if(Ce.ok){const Ne=await Ce.json();v(Ne),w(Ne.messages||[]),h(!0)}}catch{C.error("Error")}},F=async()=>{if(j.trim())try{await fetch(`${U}/support/${x.id}/reply`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${te}`},body:JSON.stringify({message:j})}),b(""),I(x)}catch{C.error("Error")}},Y=W=>{W.external_url?window.open(W.external_url,"_blank"):W.video_url?window.open(W.video_url,"_blank"):W.file_url&&window.open(`${U}${W.file_url}`,"_blank")},ae=[{id:"dashboard",label:"Mi Panel",icon:Ct},{id:"training",label:"Formacin",icon:cs},{id:"support",label:"Soporte",icon:rl}],V={video:mj,document:ht,tutorial:cs,link:dj},le={open:"bg-yellow-100 text-yellow-800",in_progress:"bg-blue-100 text-blue-800",resolved:"bg-green-100 text-green-800",closed:"bg-gray-100 text-gray-800"};return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t==="dashboard"?`Hola, ${N.full_name||"Comercial"}`:t==="training"?"Formacin":t==="support"?"Soporte":t==="leads"?"Mis Leads":t==="clients"?"Mis Clientes":"Dashboard"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Bienvenido a tu panel comercial"})]}),["dashboard","training","support"].includes(t)&&a.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-700 rounded-xl p-1",children:ae.map(W=>a.jsxs("button",{onClick:()=>r(W.id),className:`flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-all ${t===W.id?"bg-white dark:bg-gray-600 text-indigo-600 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900"}`,children:[a.jsx(W.icon,{className:"w-4 h-4 mr-2"}),W.label,W.id==="support"&&l.filter(Ce=>Ce.unread_count>0).length>0&&a.jsx("span",{className:"ml-2 bg-red-500 text-white text-xs rounded-full px-2 py-0.5",children:l.filter(Ce=>Ce.unread_count>0).length})]},W.id))})]}),t==="dashboard"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Leads Asignados"}),a.jsx("h3",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:((xe=n.leads)==null?void 0:xe.total)||0})]}),a.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-blue-600",children:a.jsx(Ct,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"mt-4 flex items-center text-sm",children:a.jsxs("span",{className:"text-green-600 font-medium flex items-center",children:[a.jsx(ym,{className:"w-4 h-4 mr-1"}),((K=n.leads)==null?void 0:K.won)||0," convertidos"]})})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Comisiones (Mes)"}),a.jsxs("h3",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:[((se=n.commissions)==null?void 0:se.current_month)||0," "]})]}),a.jsx("div",{className:"p-2 bg-green-50 dark:bg-green-900/20 rounded-lg text-green-600",children:a.jsx(ym,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:["Total: ",a.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[((ye=n.commissions)==null?void 0:ye.total_earned)||0," "]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 to-purple-700 p-6 rounded-xl shadow-lg text-white",children:[a.jsx("h3",{className:"text-lg font-bold mb-2",children:"Mi Cdigo QR"}),a.jsx("p",{className:"text-indigo-100 text-sm mb-4",children:"Los clientes que escaneen este cdigo quedarn asignados a ti."}),((ve=n.profile)==null?void 0:ve.qr_code_url)&&a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"bg-white p-2 rounded-lg",children:a.jsx("img",{src:n.profile.qr_code_url,alt:"QR",className:"w-20 h-20"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-indigo-200",children:"Tu cdigo:"}),a.jsx("p",{className:"font-mono font-bold",children:((me=n.profile)==null?void 0:me.commercial_code)||"N/A"})]})]})]})]}),((De=n.recent_leads)==null?void 0:De.length)>0&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Leads Recientes"})}),a.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:n.recent_leads.map(W=>a.jsxs("div",{className:"px-6 py-4 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:W.name}),a.jsx("p",{className:"text-sm text-gray-500",children:W.email})]}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${W.status==="won"?"bg-green-100 text-green-800":W.status==="new"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:W.status})]},W.id))})]})]}),t==="training"&&a.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.map(W=>{const Ce=V[W.type]||ht;return a.jsxs("div",{onClick:()=>Y(W),className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg transition-shadow cursor-pointer",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center",children:a.jsx(Ce,{className:"w-5 h-5 text-indigo-600"})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:W.title}),a.jsx("span",{className:"text-xs text-gray-500 capitalize",children:W.type})]})]}),a.jsx(c5,{className:"w-4 h-4 text-gray-400"})]}),W.description&&a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:W.description})]},W.id)}),i.length===0&&a.jsxs("div",{className:"col-span-full text-center py-12 text-gray-500",children:[a.jsx(cs,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"No hay materiales de formacin disponibles"})]})]}),t==="support"&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex justify-end",children:a.jsxs(We,{onClick:()=>u(!0),children:[a.jsx(Wr,{className:"w-4 h-4 mr-2"}),"Nuevo Ticket"]})}),l.map(W=>a.jsx("div",{onClick:()=>I(W),className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg transition-shadow cursor-pointer",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${le[W.status]}`,children:W.status==="open"?"Abierto":W.status==="in_progress"?"En progreso":W.status==="resolved"?"Resuelto":"Cerrado"}),W.unread_count>0&&a.jsxs("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-0.5",children:[W.unread_count," nuevo"]})]}),a.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:W.subject})]}),a.jsxs("span",{className:"text-xs text-gray-400 flex items-center",children:[a.jsx(sn,{className:"w-3 h-3 mr-1"}),new Date(W.created_at).toLocaleDateString()]})]})},W.id)),l.length===0&&a.jsxs("div",{className:"text-center py-12 text-gray-500",children:[a.jsx(zr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"No tienes tickets de soporte"}),a.jsx("p",{className:"text-sm mt-1",children:"Necesitas ayuda? Crea un nuevo ticket"})]})]}),t==="leads"&&a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:a.jsx(vk,{leads:E,onLeadClick:W=>M(W),onStatusChange:L,onDeleteLead:ee})}),t==="clients"&&!R&&a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:a.jsx(J2,{onClientSelect:W=>H(W)})}),t==="clients"&&R&&a.jsx(Z2,{clientId:R,onBack:()=>H(null)}),O&&a.jsx(ja,{isOpen:!!O,onClose:()=>M(null),title:"Detalle del Lead",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-indigo-600 dark:text-indigo-400",children:O.name}),a.jsx("p",{className:"text-sm text-gray-500",children:O.business_name})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg",children:[a.jsx("label",{className:"text-xs text-gray-400 uppercase font-semibold",children:"Email"}),a.jsx("p",{className:"dark:text-white truncate",title:O.email,children:O.email})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg",children:[a.jsx("label",{className:"text-xs text-gray-400 uppercase font-semibold",children:"Telfono"}),a.jsx("p",{className:"dark:text-white",children:O.phone||"-"})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg",children:[a.jsx("label",{className:"text-xs text-gray-400 uppercase font-semibold",children:"Estado"}),a.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs mt-1 ${O.status==="won"?"bg-green-100 text-green-800":O.status==="new"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"}`,children:O.status})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg",children:[a.jsx("label",{className:"text-xs text-gray-400 uppercase font-semibold",children:"Origen"}),a.jsx("p",{className:"dark:text-white",children:O.source||"-"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-400 uppercase font-semibold",children:"Notas"}),a.jsx("p",{className:"text-sm bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg mt-1 dark:text-gray-300 min-h-[60px]",children:O.message||O.notes||"Sin notas"})]})]})}),a.jsx(ja,{isOpen:d,onClose:()=>u(!1),title:"Nuevo Ticket de Soporte",children:a.jsxs("form",{onSubmit:ie,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Asunto"}),a.jsx("input",{value:g.subject,onChange:W=>p({...g,subject:W.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Prioridad"}),a.jsxs("select",{value:g.priority,onChange:W=>p({...g,priority:W.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",children:[a.jsx("option",{value:"low",children:"Baja"}),a.jsx("option",{value:"normal",children:"Normal"}),a.jsx("option",{value:"high",children:"Alta"}),a.jsx("option",{value:"urgent",children:"Urgente"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Mensaje"}),a.jsx("textarea",{value:g.message,onChange:W=>p({...g,message:W.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",rows:4,required:!0})]}),a.jsxs("div",{className:"pt-4 flex justify-end space-x-3",children:[a.jsx(We,{variant:"ghost",onClick:()=>u(!1),children:"Cancelar"}),a.jsx(We,{type:"submit",children:"Enviar Ticket"})]})]})}),a.jsx(ja,{isOpen:f,onClose:()=>h(!1),title:(x==null?void 0:x.subject)||"Ticket",children:x&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${le[x.status]}`,children:x.status==="open"?"Abierto":x.status==="in_progress"?"En progreso":x.status==="resolved"?"Resuelto":"Cerrado"})}),a.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4 max-h-80 overflow-y-auto space-y-3",children:y.map(W=>a.jsx("div",{className:`flex ${W.sender_role!=="commercial"?"justify-start":"justify-end"}`,children:a.jsxs("div",{className:`max-w-[80%] rounded-xl px-4 py-2 ${W.sender_role!=="commercial"?"bg-indigo-600 text-white":"bg-white dark:bg-gray-600 text-gray-900 dark:text-white border"}`,children:[a.jsx("p",{className:"text-sm",children:W.message}),a.jsxs("p",{className:`text-xs mt-1 ${W.sender_role!=="commercial"?"text-indigo-200":"text-gray-400"}`,children:[W.sender_name,"  ",new Date(W.created_at).toLocaleTimeString()]})]})},W.id))}),x.status!=="closed"&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{value:j,onChange:W=>b(W.target.value),placeholder:"Escribe tu mensaje...",className:"flex-1 px-4 py-2 border rounded-xl dark:bg-gray-700 dark:border-gray-600",onKeyPress:W=>W.key==="Enter"&&F()}),a.jsx(We,{onClick:F,children:a.jsx(ea,{className:"w-4 h-4"})})]})]})})]})};function tQ(){const[e,t]=S.useState("/"),[r,n]=S.useState(!0),[s,i]=S.useState("home");S.useEffect(()=>{const l=()=>{const d=window.location.pathname;t(d),n(!1)};l(),window.addEventListener("popstate",l);const c=()=>{l()};return window.addEventListener("navigate",c),()=>{window.removeEventListener("popstate",l),window.removeEventListener("navigate",c)}},[]);const o=()=>{if(r)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-dark-900",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-primary-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 dark:text-dark-300",children:"Cargando..."})]})});if(e==="/"||e==="/landing")return a.jsx(Ty,{});if(e.startsWith("/invoice/"))return a.jsx(ZJ,{});if(e.startsWith("/proposal/"))return a.jsx(G3,{});if(e==="/crm"||e==="/crm/login")return a.jsx(K3,{});const l=localStorage.getItem("crm_token");return(e.startsWith("/crm/")||e.startsWith("/invoices"))&&!l?(window.location.href="/crm/login",null):e==="/crm/dashboard"?JSON.parse(localStorage.getItem("user")||"{}").role==="commercial"?a.jsx(Rb,{onLogout:()=>{localStorage.removeItem("crm_token"),localStorage.removeItem("user"),window.location.href="/crm/login"},activeSection:s,onSectionChange:i,children:a.jsx(eQ,{activeSection:s})}):a.jsx(Rb,{onLogout:()=>{localStorage.removeItem("crm_token"),localStorage.removeItem("user"),window.location.href="/crm/login"},activeSection:s,onSectionChange:i,children:a.jsx(KJ,{activeSection:s})}):a.jsx(Ty,{})};return a.jsx(m4,{children:a.jsx(l4,{children:o()})})}jf.createRoot(document.getElementById("root")).render(a.jsx($.StrictMode,{children:a.jsx(tQ,{})}))});export default rQ();
