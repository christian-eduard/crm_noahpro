var LM=Object.defineProperty;var AM=(e,t,r)=>t in e?LM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var RM=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ze=(e,t,r)=>AM(e,typeof t!="symbol"?t+"":t,r);var che=RM((ghe,pp)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var kn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function zM(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var DS={exports:{}},Sg={},LS={exports:{}},ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var of=Symbol.for("react.element"),$M=Symbol.for("react.portal"),IM=Symbol.for("react.fragment"),FM=Symbol.for("react.strict_mode"),BM=Symbol.for("react.profiler"),HM=Symbol.for("react.provider"),WM=Symbol.for("react.context"),UM=Symbol.for("react.forward_ref"),VM=Symbol.for("react.suspense"),qM=Symbol.for("react.memo"),YM=Symbol.for("react.lazy"),B1=Symbol.iterator;function GM(e){return e===null||typeof e!="object"?null:(e=B1&&e[B1]||e["@@iterator"],typeof e=="function"?e:null)}var AS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},RS=Object.assign,zS={};function Ld(e,t,r){this.props=e,this.context=t,this.refs=zS,this.updater=r||AS}Ld.prototype.isReactComponent={};Ld.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ld.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $S(){}$S.prototype=Ld.prototype;function wb(e,t,r){this.props=e,this.context=t,this.refs=zS,this.updater=r||AS}var _b=wb.prototype=new $S;_b.constructor=wb;RS(_b,Ld.prototype);_b.isPureReactComponent=!0;var H1=Array.isArray,IS=Object.prototype.hasOwnProperty,kb={current:null},FS={key:!0,ref:!0,__self:!0,__source:!0};function BS(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)IS.call(t,n)&&!FS.hasOwnProperty(n)&&(a[n]=t[n]);var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){for(var d=Array(c),u=0;u<c;u++)d[u]=arguments[u+2];a.children=d}if(e&&e.defaultProps)for(n in c=e.defaultProps,c)a[n]===void 0&&(a[n]=c[n]);return{$$typeof:of,type:e,key:i,ref:o,props:a,_owner:kb.current}}function ZM(e,t){return{$$typeof:of,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function jb(e){return typeof e=="object"&&e!==null&&e.$$typeof===of}function KM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var W1=/\/+/g;function ix(e,t){return typeof e=="object"&&e!==null&&e.key!=null?KM(""+e.key):t.toString(36)}function Fm(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case of:case $M:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+ix(o,0):n,H1(a)?(r="",e!=null&&(r=e.replace(W1,"$&/")+"/"),Fm(a,t,r,"",function(u){return u})):a!=null&&(jb(a)&&(a=ZM(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(W1,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",H1(e))for(var c=0;c<e.length;c++){i=e[c];var d=n+ix(i,c);o+=Fm(i,t,r,d,a)}else if(d=GM(e),typeof d=="function")for(e=d.call(e),c=0;!(i=e.next()).done;)i=i.value,d=n+ix(i,c++),o+=Fm(i,t,r,d,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function qf(e,t,r){if(e==null)return e;var n=[],a=0;return Fm(e,n,"","",function(i){return t.call(r,i,a++)}),n}function XM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Nn={current:null},Bm={transition:null},JM={ReactCurrentDispatcher:Nn,ReactCurrentBatchConfig:Bm,ReactCurrentOwner:kb};function HS(){throw Error("act(...) is not supported in production builds of React.")}ot.Children={map:qf,forEach:function(e,t,r){qf(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return qf(e,function(){t++}),t},toArray:function(e){return qf(e,function(t){return t})||[]},only:function(e){if(!jb(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ot.Component=Ld;ot.Fragment=IM;ot.Profiler=BM;ot.PureComponent=wb;ot.StrictMode=FM;ot.Suspense=VM;ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JM;ot.act=HS;ot.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=RS({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=kb.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(d in t)IS.call(t,d)&&!FS.hasOwnProperty(d)&&(n[d]=t[d]===void 0&&c!==void 0?c[d]:t[d])}var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){c=Array(d);for(var u=0;u<d;u++)c[u]=arguments[u+2];n.children=c}return{$$typeof:of,type:e.type,key:a,ref:i,props:n,_owner:o}};ot.createContext=function(e){return e={$$typeof:WM,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:HM,_context:e},e.Consumer=e};ot.createElement=BS;ot.createFactory=function(e){var t=BS.bind(null,e);return t.type=e,t};ot.createRef=function(){return{current:null}};ot.forwardRef=function(e){return{$$typeof:UM,render:e}};ot.isValidElement=jb;ot.lazy=function(e){return{$$typeof:YM,_payload:{_status:-1,_result:e},_init:XM}};ot.memo=function(e,t){return{$$typeof:qM,type:e,compare:t===void 0?null:t}};ot.startTransition=function(e){var t=Bm.transition;Bm.transition={};try{e()}finally{Bm.transition=t}};ot.unstable_act=HS;ot.useCallback=function(e,t){return Nn.current.useCallback(e,t)};ot.useContext=function(e){return Nn.current.useContext(e)};ot.useDebugValue=function(){};ot.useDeferredValue=function(e){return Nn.current.useDeferredValue(e)};ot.useEffect=function(e,t){return Nn.current.useEffect(e,t)};ot.useId=function(){return Nn.current.useId()};ot.useImperativeHandle=function(e,t,r){return Nn.current.useImperativeHandle(e,t,r)};ot.useInsertionEffect=function(e,t){return Nn.current.useInsertionEffect(e,t)};ot.useLayoutEffect=function(e,t){return Nn.current.useLayoutEffect(e,t)};ot.useMemo=function(e,t){return Nn.current.useMemo(e,t)};ot.useReducer=function(e,t,r){return Nn.current.useReducer(e,t,r)};ot.useRef=function(e){return Nn.current.useRef(e)};ot.useState=function(e){return Nn.current.useState(e)};ot.useSyncExternalStore=function(e,t,r){return Nn.current.useSyncExternalStore(e,t,r)};ot.useTransition=function(){return Nn.current.useTransition()};ot.version="18.3.1";LS.exports=ot;var E=LS.exports;const J=Yr(E);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QM=E,eO=Symbol.for("react.element"),tO=Symbol.for("react.fragment"),rO=Object.prototype.hasOwnProperty,nO=QM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sO={key:!0,ref:!0,__self:!0,__source:!0};function WS(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)rO.call(t,n)&&!sO.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:eO,type:e,key:i,ref:o,props:a,_owner:nO.current}}Sg.Fragment=tO;Sg.jsx=WS;Sg.jsxs=WS;DS.exports=Sg;var s=DS.exports,wy={},US={exports:{}},as={},VS={exports:{}},qS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Q,ce){var le=Q.length;Q.push(ce);e:for(;0<le;){var B=le-1>>>1,X=Q[B];if(0<a(X,ce))Q[B]=ce,Q[le]=X,le=B;else break e}}function r(Q){return Q.length===0?null:Q[0]}function n(Q){if(Q.length===0)return null;var ce=Q[0],le=Q.pop();if(le!==ce){Q[0]=le;e:for(var B=0,X=Q.length,ae=X>>>1;B<ae;){var fe=2*(B+1)-1,re=Q[fe],ge=fe+1,Oe=Q[ge];if(0>a(re,le))ge<X&&0>a(Oe,re)?(Q[B]=Oe,Q[ge]=le,B=ge):(Q[B]=re,Q[fe]=le,B=fe);else if(ge<X&&0>a(Oe,le))Q[B]=Oe,Q[ge]=le,B=ge;else break e}}return ce}function a(Q,ce){var le=Q.sortIndex-ce.sortIndex;return le!==0?le:Q.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var d=[],u=[],f=1,m=null,p=3,x=!1,v=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(Q){for(var ce=r(u);ce!==null;){if(ce.callback===null)n(u);else if(ce.startTime<=Q)n(u),ce.sortIndex=ce.expirationTime,t(d,ce);else break;ce=r(u)}}function S(Q){if(y=!1,N(Q),!v)if(r(d)!==null)v=!0,Z(C);else{var ce=r(u);ce!==null&&pe(S,ce.startTime-Q)}}function C(Q,ce){v=!1,y&&(y=!1,w(z),z=-1),x=!0;var le=p;try{for(N(ce),m=r(d);m!==null&&(!(m.expirationTime>ce)||Q&&!F());){var B=m.callback;if(typeof B=="function"){m.callback=null,p=m.priorityLevel;var X=B(m.expirationTime<=ce);ce=e.unstable_now(),typeof X=="function"?m.callback=X:m===r(d)&&n(d),N(ce)}else n(d);m=r(d)}if(m!==null)var ae=!0;else{var fe=r(u);fe!==null&&pe(S,fe.startTime-ce),ae=!1}return ae}finally{m=null,p=le,x=!1}}var O=!1,A=null,z=-1,$=5,W=-1;function F(){return!(e.unstable_now()-W<$)}function G(){if(A!==null){var Q=e.unstable_now();W=Q;var ce=!0;try{ce=A(!0,Q)}finally{ce?ee():(O=!1,A=null)}}else O=!1}var ee;if(typeof b=="function")ee=function(){b(G)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,oe=K.port2;K.port1.onmessage=G,ee=function(){oe.postMessage(null)}}else ee=function(){_(G,0)};function Z(Q){A=Q,O||(O=!0,ee())}function pe(Q,ce){z=_(function(){Q(e.unstable_now())},ce)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Q){Q.callback=null},e.unstable_continueExecution=function(){v||x||(v=!0,Z(C))},e.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<Q?Math.floor(1e3/Q):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(Q){switch(p){case 1:case 2:case 3:var ce=3;break;default:ce=p}var le=p;p=ce;try{return Q()}finally{p=le}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Q,ce){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var le=p;p=Q;try{return ce()}finally{p=le}},e.unstable_scheduleCallback=function(Q,ce,le){var B=e.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?B+le:B):le=B,Q){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=le+X,Q={id:f++,callback:ce,priorityLevel:Q,startTime:le,expirationTime:X,sortIndex:-1},le>B?(Q.sortIndex=le,t(u,Q),r(d)===null&&Q===r(u)&&(y?(w(z),z=-1):y=!0,pe(S,le-B))):(Q.sortIndex=X,t(d,Q),v||x||(v=!0,Z(C))),Q},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(Q){var ce=p;return function(){var le=p;p=ce;try{return Q.apply(this,arguments)}finally{p=le}}}})(qS);VS.exports=qS;var aO=VS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iO=E,ns=aO;function be(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var YS=new Set,hh={};function Vl(e,t){hd(e,t),hd(e+"Capture",t)}function hd(e,t){for(hh[e]=t,e=0;e<t.length;e++)YS.add(t[e])}var wi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_y=Object.prototype.hasOwnProperty,oO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,U1={},V1={};function lO(e){return _y.call(V1,e)?!0:_y.call(U1,e)?!1:oO.test(e)?V1[e]=!0:(U1[e]=!0,!1)}function cO(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function dO(e,t,r,n){if(t===null||typeof t>"u"||cO(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Sn(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Vr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Vr[e]=new Sn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Vr[t]=new Sn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Vr[e]=new Sn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Vr[e]=new Sn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Vr[e]=new Sn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Vr[e]=new Sn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Vr[e]=new Sn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Vr[e]=new Sn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Vr[e]=new Sn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Nb=/[\-:]([a-z])/g;function Sb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Nb,Sb);Vr[t]=new Sn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Nb,Sb);Vr[t]=new Sn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Nb,Sb);Vr[t]=new Sn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Vr[e]=new Sn(e,1,!1,e.toLowerCase(),null,!1,!1)});Vr.xlinkHref=new Sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Vr[e]=new Sn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Cb(e,t,r,n){var a=Vr.hasOwnProperty(t)?Vr[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(dO(t,r,a,n)&&(r=null),n||a===null?lO(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ei=iO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yf=Symbol.for("react.element"),zc=Symbol.for("react.portal"),$c=Symbol.for("react.fragment"),Eb=Symbol.for("react.strict_mode"),ky=Symbol.for("react.profiler"),GS=Symbol.for("react.provider"),ZS=Symbol.for("react.context"),Pb=Symbol.for("react.forward_ref"),jy=Symbol.for("react.suspense"),Ny=Symbol.for("react.suspense_list"),Tb=Symbol.for("react.memo"),ro=Symbol.for("react.lazy"),KS=Symbol.for("react.offscreen"),q1=Symbol.iterator;function hu(e){return e===null||typeof e!="object"?null:(e=q1&&e[q1]||e["@@iterator"],typeof e=="function"?e:null)}var er=Object.assign,ox;function Au(e){if(ox===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ox=t&&t[1]||""}return`
`+ox+e}var lx=!1;function cx(e,t){if(!e||lx)return"";lx=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,c=i.length-1;1<=o&&0<=c&&a[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(a[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||a[o]!==i[c]){var d=`
`+a[o].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=o&&0<=c);break}}}finally{lx=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Au(e):""}function uO(e){switch(e.tag){case 5:return Au(e.type);case 16:return Au("Lazy");case 13:return Au("Suspense");case 19:return Au("SuspenseList");case 0:case 2:case 15:return e=cx(e.type,!1),e;case 11:return e=cx(e.type.render,!1),e;case 1:return e=cx(e.type,!0),e;default:return""}}function Sy(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $c:return"Fragment";case zc:return"Portal";case ky:return"Profiler";case Eb:return"StrictMode";case jy:return"Suspense";case Ny:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ZS:return(e.displayName||"Context")+".Consumer";case GS:return(e._context.displayName||"Context")+".Provider";case Pb:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Tb:return t=e.displayName||null,t!==null?t:Sy(e.type)||"Memo";case ro:t=e._payload,e=e._init;try{return Sy(e(t))}catch{}}return null}function hO(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sy(t);case 8:return t===Eb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Co(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function XS(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function fO(e){var t=XS(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gf(e){e._valueTracker||(e._valueTracker=fO(e))}function JS(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=XS(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function gp(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Cy(e,t){var r=t.checked;return er({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Y1(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Co(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function QS(e,t){t=t.checked,t!=null&&Cb(e,"checked",t,!1)}function Ey(e,t){QS(e,t);var r=Co(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Py(e,t.type,r):t.hasOwnProperty("defaultValue")&&Py(e,t.type,Co(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function G1(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Py(e,t,r){(t!=="number"||gp(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ru=Array.isArray;function Xc(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Co(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Ty(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(be(91));return er({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Z1(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(be(92));if(Ru(r)){if(1<r.length)throw Error(be(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Co(r)}}function eC(e,t){var r=Co(t.value),n=Co(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function K1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function tC(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function My(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?tC(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Zf,rC=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Zf=Zf||document.createElement("div"),Zf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Zf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function fh(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Zu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mO=["Webkit","ms","Moz","O"];Object.keys(Zu).forEach(function(e){mO.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zu[t]=Zu[e]})});function nC(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Zu.hasOwnProperty(e)&&Zu[e]?(""+t).trim():t+"px"}function sC(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=nC(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var pO=er({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oy(e,t){if(t){if(pO[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(be(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(be(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(be(61))}if(t.style!=null&&typeof t.style!="object")throw Error(be(62))}}function Dy(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ly=null;function Mb(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ay=null,Jc=null,Qc=null;function X1(e){if(e=df(e)){if(typeof Ay!="function")throw Error(be(280));var t=e.stateNode;t&&(t=Mg(t),Ay(e.stateNode,e.type,t))}}function aC(e){Jc?Qc?Qc.push(e):Qc=[e]:Jc=e}function iC(){if(Jc){var e=Jc,t=Qc;if(Qc=Jc=null,X1(e),t)for(e=0;e<t.length;e++)X1(t[e])}}function oC(e,t){return e(t)}function lC(){}var dx=!1;function cC(e,t,r){if(dx)return e(t,r);dx=!0;try{return oC(e,t,r)}finally{dx=!1,(Jc!==null||Qc!==null)&&(lC(),iC())}}function mh(e,t){var r=e.stateNode;if(r===null)return null;var n=Mg(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(be(231,t,typeof r));return r}var Ry=!1;if(wi)try{var fu={};Object.defineProperty(fu,"passive",{get:function(){Ry=!0}}),window.addEventListener("test",fu,fu),window.removeEventListener("test",fu,fu)}catch{Ry=!1}function gO(e,t,r,n,a,i,o,c,d){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(f){this.onError(f)}}var Ku=!1,xp=null,yp=!1,zy=null,xO={onError:function(e){Ku=!0,xp=e}};function yO(e,t,r,n,a,i,o,c,d){Ku=!1,xp=null,gO.apply(xO,arguments)}function vO(e,t,r,n,a,i,o,c,d){if(yO.apply(this,arguments),Ku){if(Ku){var u=xp;Ku=!1,xp=null}else throw Error(be(198));yp||(yp=!0,zy=u)}}function ql(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function dC(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function J1(e){if(ql(e)!==e)throw Error(be(188))}function bO(e){var t=e.alternate;if(!t){if(t=ql(e),t===null)throw Error(be(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return J1(a),e;if(i===n)return J1(a),t;i=i.sibling}throw Error(be(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,c=a.child;c;){if(c===r){o=!0,r=a,n=i;break}if(c===n){o=!0,n=a,r=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===r){o=!0,r=i,n=a;break}if(c===n){o=!0,n=i,r=a;break}c=c.sibling}if(!o)throw Error(be(189))}}if(r.alternate!==n)throw Error(be(190))}if(r.tag!==3)throw Error(be(188));return r.stateNode.current===r?e:t}function uC(e){return e=bO(e),e!==null?hC(e):null}function hC(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=hC(e);if(t!==null)return t;e=e.sibling}return null}var fC=ns.unstable_scheduleCallback,Q1=ns.unstable_cancelCallback,wO=ns.unstable_shouldYield,_O=ns.unstable_requestPaint,lr=ns.unstable_now,kO=ns.unstable_getCurrentPriorityLevel,Ob=ns.unstable_ImmediatePriority,mC=ns.unstable_UserBlockingPriority,vp=ns.unstable_NormalPriority,jO=ns.unstable_LowPriority,pC=ns.unstable_IdlePriority,Cg=null,Na=null;function NO(e){if(Na&&typeof Na.onCommitFiberRoot=="function")try{Na.onCommitFiberRoot(Cg,e,void 0,(e.current.flags&128)===128)}catch{}}var sa=Math.clz32?Math.clz32:EO,SO=Math.log,CO=Math.LN2;function EO(e){return e>>>=0,e===0?32:31-(SO(e)/CO|0)|0}var Kf=64,Xf=4194304;function zu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function bp(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var c=o&~a;c!==0?n=zu(c):(i&=o,i!==0&&(n=zu(i)))}else o=r&~a,o!==0?n=zu(o):i!==0&&(n=zu(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-sa(t),a=1<<r,n|=e[r],t&=~a;return n}function PO(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TO(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-sa(i),c=1<<o,d=a[o];d===-1?(!(c&r)||c&n)&&(a[o]=PO(c,t)):d<=t&&(e.expiredLanes|=c),i&=~c}}function $y(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function gC(){var e=Kf;return Kf<<=1,!(Kf&4194240)&&(Kf=64),e}function ux(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function lf(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-sa(t),e[t]=r}function MO(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-sa(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Db(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-sa(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var kt=0;function xC(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var yC,Lb,vC,bC,wC,Iy=!1,Jf=[],po=null,go=null,xo=null,ph=new Map,gh=new Map,so=[],OO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ek(e,t){switch(e){case"focusin":case"focusout":po=null;break;case"dragenter":case"dragleave":go=null;break;case"mouseover":case"mouseout":xo=null;break;case"pointerover":case"pointerout":ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gh.delete(t.pointerId)}}function mu(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=df(t),t!==null&&Lb(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function DO(e,t,r,n,a){switch(t){case"focusin":return po=mu(po,e,t,r,n,a),!0;case"dragenter":return go=mu(go,e,t,r,n,a),!0;case"mouseover":return xo=mu(xo,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return ph.set(i,mu(ph.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,gh.set(i,mu(gh.get(i)||null,e,t,r,n,a)),!0}return!1}function _C(e){var t=fl(e.target);if(t!==null){var r=ql(t);if(r!==null){if(t=r.tag,t===13){if(t=dC(r),t!==null){e.blockedOn=t,wC(e.priority,function(){vC(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Fy(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Ly=n,r.target.dispatchEvent(n),Ly=null}else return t=df(r),t!==null&&Lb(t),e.blockedOn=r,!1;t.shift()}return!0}function tk(e,t,r){Hm(e)&&r.delete(t)}function LO(){Iy=!1,po!==null&&Hm(po)&&(po=null),go!==null&&Hm(go)&&(go=null),xo!==null&&Hm(xo)&&(xo=null),ph.forEach(tk),gh.forEach(tk)}function pu(e,t){e.blockedOn===t&&(e.blockedOn=null,Iy||(Iy=!0,ns.unstable_scheduleCallback(ns.unstable_NormalPriority,LO)))}function xh(e){function t(a){return pu(a,e)}if(0<Jf.length){pu(Jf[0],e);for(var r=1;r<Jf.length;r++){var n=Jf[r];n.blockedOn===e&&(n.blockedOn=null)}}for(po!==null&&pu(po,e),go!==null&&pu(go,e),xo!==null&&pu(xo,e),ph.forEach(t),gh.forEach(t),r=0;r<so.length;r++)n=so[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<so.length&&(r=so[0],r.blockedOn===null);)_C(r),r.blockedOn===null&&so.shift()}var ed=Ei.ReactCurrentBatchConfig,wp=!0;function AO(e,t,r,n){var a=kt,i=ed.transition;ed.transition=null;try{kt=1,Ab(e,t,r,n)}finally{kt=a,ed.transition=i}}function RO(e,t,r,n){var a=kt,i=ed.transition;ed.transition=null;try{kt=4,Ab(e,t,r,n)}finally{kt=a,ed.transition=i}}function Ab(e,t,r,n){if(wp){var a=Fy(e,t,r,n);if(a===null)wx(e,t,n,_p,r),ek(e,n);else if(DO(a,e,t,r,n))n.stopPropagation();else if(ek(e,n),t&4&&-1<OO.indexOf(e)){for(;a!==null;){var i=df(a);if(i!==null&&yC(i),i=Fy(e,t,r,n),i===null&&wx(e,t,n,_p,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else wx(e,t,n,null,r)}}var _p=null;function Fy(e,t,r,n){if(_p=null,e=Mb(n),e=fl(e),e!==null)if(t=ql(e),t===null)e=null;else if(r=t.tag,r===13){if(e=dC(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return _p=e,null}function kC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kO()){case Ob:return 1;case mC:return 4;case vp:case jO:return 16;case pC:return 536870912;default:return 16}default:return 16}}var io=null,Rb=null,Wm=null;function jC(){if(Wm)return Wm;var e,t=Rb,r=t.length,n,a="value"in io?io.value:io.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return Wm=a.slice(e,1<n?1-n:void 0)}function Um(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Qf(){return!0}function rk(){return!1}function is(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Qf:rk,this.isPropagationStopped=rk,this}return er(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Qf)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Qf)},persist:function(){},isPersistent:Qf}),t}var Ad={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zb=is(Ad),cf=er({},Ad,{view:0,detail:0}),zO=is(cf),hx,fx,gu,Eg=er({},cf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$b,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gu&&(gu&&e.type==="mousemove"?(hx=e.screenX-gu.screenX,fx=e.screenY-gu.screenY):fx=hx=0,gu=e),hx)},movementY:function(e){return"movementY"in e?e.movementY:fx}}),nk=is(Eg),$O=er({},Eg,{dataTransfer:0}),IO=is($O),FO=er({},cf,{relatedTarget:0}),mx=is(FO),BO=er({},Ad,{animationName:0,elapsedTime:0,pseudoElement:0}),HO=is(BO),WO=er({},Ad,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),UO=is(WO),VO=er({},Ad,{data:0}),sk=is(VO),qO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZO(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=GO[e])?!!t[e]:!1}function $b(){return ZO}var KO=er({},cf,{key:function(e){if(e.key){var t=qO[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Um(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?YO[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$b,charCode:function(e){return e.type==="keypress"?Um(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Um(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),XO=is(KO),JO=er({},Eg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ak=is(JO),QO=er({},cf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$b}),eD=is(QO),tD=er({},Ad,{propertyName:0,elapsedTime:0,pseudoElement:0}),rD=is(tD),nD=er({},Eg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sD=is(nD),aD=[9,13,27,32],Ib=wi&&"CompositionEvent"in window,Xu=null;wi&&"documentMode"in document&&(Xu=document.documentMode);var iD=wi&&"TextEvent"in window&&!Xu,NC=wi&&(!Ib||Xu&&8<Xu&&11>=Xu),ik=" ",ok=!1;function SC(e,t){switch(e){case"keyup":return aD.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function CC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ic=!1;function oD(e,t){switch(e){case"compositionend":return CC(t);case"keypress":return t.which!==32?null:(ok=!0,ik);case"textInput":return e=t.data,e===ik&&ok?null:e;default:return null}}function lD(e,t){if(Ic)return e==="compositionend"||!Ib&&SC(e,t)?(e=jC(),Wm=Rb=io=null,Ic=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return NC&&t.locale!=="ko"?null:t.data;default:return null}}var cD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lk(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!cD[e.type]:t==="textarea"}function EC(e,t,r,n){aC(n),t=kp(t,"onChange"),0<t.length&&(r=new zb("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Ju=null,yh=null;function dD(e){IC(e,0)}function Pg(e){var t=Hc(e);if(JS(t))return e}function uD(e,t){if(e==="change")return t}var PC=!1;if(wi){var px;if(wi){var gx="oninput"in document;if(!gx){var ck=document.createElement("div");ck.setAttribute("oninput","return;"),gx=typeof ck.oninput=="function"}px=gx}else px=!1;PC=px&&(!document.documentMode||9<document.documentMode)}function dk(){Ju&&(Ju.detachEvent("onpropertychange",TC),yh=Ju=null)}function TC(e){if(e.propertyName==="value"&&Pg(yh)){var t=[];EC(t,yh,e,Mb(e)),cC(dD,t)}}function hD(e,t,r){e==="focusin"?(dk(),Ju=t,yh=r,Ju.attachEvent("onpropertychange",TC)):e==="focusout"&&dk()}function fD(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pg(yh)}function mD(e,t){if(e==="click")return Pg(t)}function pD(e,t){if(e==="input"||e==="change")return Pg(t)}function gD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ia=typeof Object.is=="function"?Object.is:gD;function vh(e,t){if(ia(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!_y.call(t,a)||!ia(e[a],t[a]))return!1}return!0}function uk(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hk(e,t){var r=uk(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=uk(r)}}function MC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?MC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function OC(){for(var e=window,t=gp();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=gp(e.document)}return t}function Fb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function xD(e){var t=OC(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&MC(r.ownerDocument.documentElement,r)){if(n!==null&&Fb(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=hk(r,i);var o=hk(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var yD=wi&&"documentMode"in document&&11>=document.documentMode,Fc=null,By=null,Qu=null,Hy=!1;function fk(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Hy||Fc==null||Fc!==gp(n)||(n=Fc,"selectionStart"in n&&Fb(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Qu&&vh(Qu,n)||(Qu=n,n=kp(By,"onSelect"),0<n.length&&(t=new zb("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Fc)))}function em(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Bc={animationend:em("Animation","AnimationEnd"),animationiteration:em("Animation","AnimationIteration"),animationstart:em("Animation","AnimationStart"),transitionend:em("Transition","TransitionEnd")},xx={},DC={};wi&&(DC=document.createElement("div").style,"AnimationEvent"in window||(delete Bc.animationend.animation,delete Bc.animationiteration.animation,delete Bc.animationstart.animation),"TransitionEvent"in window||delete Bc.transitionend.transition);function Tg(e){if(xx[e])return xx[e];if(!Bc[e])return e;var t=Bc[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in DC)return xx[e]=t[r];return e}var LC=Tg("animationend"),AC=Tg("animationiteration"),RC=Tg("animationstart"),zC=Tg("transitionend"),$C=new Map,mk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lo(e,t){$C.set(e,t),Vl(t,[e])}for(var yx=0;yx<mk.length;yx++){var vx=mk[yx],vD=vx.toLowerCase(),bD=vx[0].toUpperCase()+vx.slice(1);Lo(vD,"on"+bD)}Lo(LC,"onAnimationEnd");Lo(AC,"onAnimationIteration");Lo(RC,"onAnimationStart");Lo("dblclick","onDoubleClick");Lo("focusin","onFocus");Lo("focusout","onBlur");Lo(zC,"onTransitionEnd");hd("onMouseEnter",["mouseout","mouseover"]);hd("onMouseLeave",["mouseout","mouseover"]);hd("onPointerEnter",["pointerout","pointerover"]);hd("onPointerLeave",["pointerout","pointerover"]);Vl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wD=new Set("cancel close invalid load scroll toggle".split(" ").concat($u));function pk(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,vO(n,t,void 0,e),e.currentTarget=null}function IC(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var c=n[o],d=c.instance,u=c.currentTarget;if(c=c.listener,d!==i&&a.isPropagationStopped())break e;pk(a,c,u),i=d}else for(o=0;o<n.length;o++){if(c=n[o],d=c.instance,u=c.currentTarget,c=c.listener,d!==i&&a.isPropagationStopped())break e;pk(a,c,u),i=d}}}if(yp)throw e=zy,yp=!1,zy=null,e}function Dt(e,t){var r=t[Yy];r===void 0&&(r=t[Yy]=new Set);var n=e+"__bubble";r.has(n)||(FC(t,e,2,!1),r.add(n))}function bx(e,t,r){var n=0;t&&(n|=4),FC(r,e,n,t)}var tm="_reactListening"+Math.random().toString(36).slice(2);function bh(e){if(!e[tm]){e[tm]=!0,YS.forEach(function(r){r!=="selectionchange"&&(wD.has(r)||bx(r,!1,e),bx(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[tm]||(t[tm]=!0,bx("selectionchange",!1,t))}}function FC(e,t,r,n){switch(kC(t)){case 1:var a=AO;break;case 4:a=RO;break;default:a=Ab}r=a.bind(null,t,r,e),a=void 0,!Ry||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function wx(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var c=n.stateNode.containerInfo;if(c===a||c.nodeType===8&&c.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===a||d.nodeType===8&&d.parentNode===a))return;o=o.return}for(;c!==null;){if(o=fl(c),o===null)return;if(d=o.tag,d===5||d===6){n=i=o;continue e}c=c.parentNode}}n=n.return}cC(function(){var u=i,f=Mb(r),m=[];e:{var p=$C.get(e);if(p!==void 0){var x=zb,v=e;switch(e){case"keypress":if(Um(r)===0)break e;case"keydown":case"keyup":x=XO;break;case"focusin":v="focus",x=mx;break;case"focusout":v="blur",x=mx;break;case"beforeblur":case"afterblur":x=mx;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=nk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=IO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=eD;break;case LC:case AC:case RC:x=HO;break;case zC:x=rD;break;case"scroll":x=zO;break;case"wheel":x=sD;break;case"copy":case"cut":case"paste":x=UO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=ak}var y=(t&4)!==0,_=!y&&e==="scroll",w=y?p!==null?p+"Capture":null:p;y=[];for(var b=u,N;b!==null;){N=b;var S=N.stateNode;if(N.tag===5&&S!==null&&(N=S,w!==null&&(S=mh(b,w),S!=null&&y.push(wh(b,S,N)))),_)break;b=b.return}0<y.length&&(p=new x(p,v,null,r,f),m.push({event:p,listeners:y}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",p&&r!==Ly&&(v=r.relatedTarget||r.fromElement)&&(fl(v)||v[_i]))break e;if((x||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,x?(v=r.relatedTarget||r.toElement,x=u,v=v?fl(v):null,v!==null&&(_=ql(v),v!==_||v.tag!==5&&v.tag!==6)&&(v=null)):(x=null,v=u),x!==v)){if(y=nk,S="onMouseLeave",w="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(y=ak,S="onPointerLeave",w="onPointerEnter",b="pointer"),_=x==null?p:Hc(x),N=v==null?p:Hc(v),p=new y(S,b+"leave",x,r,f),p.target=_,p.relatedTarget=N,S=null,fl(f)===u&&(y=new y(w,b+"enter",v,r,f),y.target=N,y.relatedTarget=_,S=y),_=S,x&&v)t:{for(y=x,w=v,b=0,N=y;N;N=Nc(N))b++;for(N=0,S=w;S;S=Nc(S))N++;for(;0<b-N;)y=Nc(y),b--;for(;0<N-b;)w=Nc(w),N--;for(;b--;){if(y===w||w!==null&&y===w.alternate)break t;y=Nc(y),w=Nc(w)}y=null}else y=null;x!==null&&gk(m,p,x,y,!1),v!==null&&_!==null&&gk(m,_,v,y,!0)}}e:{if(p=u?Hc(u):window,x=p.nodeName&&p.nodeName.toLowerCase(),x==="select"||x==="input"&&p.type==="file")var C=uD;else if(lk(p))if(PC)C=pD;else{C=fD;var O=hD}else(x=p.nodeName)&&x.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=mD);if(C&&(C=C(e,u))){EC(m,C,r,f);break e}O&&O(e,p,u),e==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&Py(p,"number",p.value)}switch(O=u?Hc(u):window,e){case"focusin":(lk(O)||O.contentEditable==="true")&&(Fc=O,By=u,Qu=null);break;case"focusout":Qu=By=Fc=null;break;case"mousedown":Hy=!0;break;case"contextmenu":case"mouseup":case"dragend":Hy=!1,fk(m,r,f);break;case"selectionchange":if(yD)break;case"keydown":case"keyup":fk(m,r,f)}var A;if(Ib)e:{switch(e){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else Ic?SC(e,r)&&(z="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(z="onCompositionStart");z&&(NC&&r.locale!=="ko"&&(Ic||z!=="onCompositionStart"?z==="onCompositionEnd"&&Ic&&(A=jC()):(io=f,Rb="value"in io?io.value:io.textContent,Ic=!0)),O=kp(u,z),0<O.length&&(z=new sk(z,e,null,r,f),m.push({event:z,listeners:O}),A?z.data=A:(A=CC(r),A!==null&&(z.data=A)))),(A=iD?oD(e,r):lD(e,r))&&(u=kp(u,"onBeforeInput"),0<u.length&&(f=new sk("onBeforeInput","beforeinput",null,r,f),m.push({event:f,listeners:u}),f.data=A))}IC(m,t)})}function wh(e,t,r){return{instance:e,listener:t,currentTarget:r}}function kp(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=mh(e,r),i!=null&&n.unshift(wh(e,i,a)),i=mh(e,t),i!=null&&n.push(wh(e,i,a))),e=e.return}return n}function Nc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function gk(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var c=r,d=c.alternate,u=c.stateNode;if(d!==null&&d===n)break;c.tag===5&&u!==null&&(c=u,a?(d=mh(r,i),d!=null&&o.unshift(wh(r,d,c))):a||(d=mh(r,i),d!=null&&o.push(wh(r,d,c)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var _D=/\r\n?/g,kD=/\u0000|\uFFFD/g;function xk(e){return(typeof e=="string"?e:""+e).replace(_D,`
`).replace(kD,"")}function rm(e,t,r){if(t=xk(t),xk(e)!==t&&r)throw Error(be(425))}function jp(){}var Wy=null,Uy=null;function Vy(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qy=typeof setTimeout=="function"?setTimeout:void 0,jD=typeof clearTimeout=="function"?clearTimeout:void 0,yk=typeof Promise=="function"?Promise:void 0,ND=typeof queueMicrotask=="function"?queueMicrotask:typeof yk<"u"?function(e){return yk.resolve(null).then(e).catch(SD)}:qy;function SD(e){setTimeout(function(){throw e})}function _x(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),xh(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);xh(t)}function yo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function vk(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Rd=Math.random().toString(36).slice(2),ka="__reactFiber$"+Rd,_h="__reactProps$"+Rd,_i="__reactContainer$"+Rd,Yy="__reactEvents$"+Rd,CD="__reactListeners$"+Rd,ED="__reactHandles$"+Rd;function fl(e){var t=e[ka];if(t)return t;for(var r=e.parentNode;r;){if(t=r[_i]||r[ka]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=vk(e);e!==null;){if(r=e[ka])return r;e=vk(e)}return t}e=r,r=e.parentNode}return null}function df(e){return e=e[ka]||e[_i],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Hc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(be(33))}function Mg(e){return e[_h]||null}var Gy=[],Wc=-1;function Ao(e){return{current:e}}function Ft(e){0>Wc||(e.current=Gy[Wc],Gy[Wc]=null,Wc--)}function Mt(e,t){Wc++,Gy[Wc]=e.current,e.current=t}var Eo={},on=Ao(Eo),Rn=Ao(!1),Tl=Eo;function fd(e,t){var r=e.type.contextTypes;if(!r)return Eo;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function zn(e){return e=e.childContextTypes,e!=null}function Np(){Ft(Rn),Ft(on)}function bk(e,t,r){if(on.current!==Eo)throw Error(be(168));Mt(on,t),Mt(Rn,r)}function BC(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(be(108,hO(e)||"Unknown",a));return er({},r,n)}function Sp(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Eo,Tl=on.current,Mt(on,e),Mt(Rn,Rn.current),!0}function wk(e,t,r){var n=e.stateNode;if(!n)throw Error(be(169));r?(e=BC(e,t,Tl),n.__reactInternalMemoizedMergedChildContext=e,Ft(Rn),Ft(on),Mt(on,e)):Ft(Rn),Mt(Rn,r)}var oi=null,Og=!1,kx=!1;function HC(e){oi===null?oi=[e]:oi.push(e)}function PD(e){Og=!0,HC(e)}function Ro(){if(!kx&&oi!==null){kx=!0;var e=0,t=kt;try{var r=oi;for(kt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}oi=null,Og=!1}catch(a){throw oi!==null&&(oi=oi.slice(e+1)),fC(Ob,Ro),a}finally{kt=t,kx=!1}}return null}var Uc=[],Vc=0,Cp=null,Ep=0,_s=[],ks=0,Ml=null,ci=1,di="";function ol(e,t){Uc[Vc++]=Ep,Uc[Vc++]=Cp,Cp=e,Ep=t}function WC(e,t,r){_s[ks++]=ci,_s[ks++]=di,_s[ks++]=Ml,Ml=e;var n=ci;e=di;var a=32-sa(n)-1;n&=~(1<<a),r+=1;var i=32-sa(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,ci=1<<32-sa(t)+a|r<<a|n,di=i+e}else ci=1<<i|r<<a|n,di=e}function Bb(e){e.return!==null&&(ol(e,1),WC(e,1,0))}function Hb(e){for(;e===Cp;)Cp=Uc[--Vc],Uc[Vc]=null,Ep=Uc[--Vc],Uc[Vc]=null;for(;e===Ml;)Ml=_s[--ks],_s[ks]=null,di=_s[--ks],_s[ks]=null,ci=_s[--ks],_s[ks]=null}var es=null,Qn=null,Yt=!1,ra=null;function UC(e,t){var r=Cs(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function _k(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,es=e,Qn=yo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,es=e,Qn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ml!==null?{id:ci,overflow:di}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Cs(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,es=e,Qn=null,!0):!1;default:return!1}}function Zy(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ky(e){if(Yt){var t=Qn;if(t){var r=t;if(!_k(e,t)){if(Zy(e))throw Error(be(418));t=yo(r.nextSibling);var n=es;t&&_k(e,t)?UC(n,r):(e.flags=e.flags&-4097|2,Yt=!1,es=e)}}else{if(Zy(e))throw Error(be(418));e.flags=e.flags&-4097|2,Yt=!1,es=e}}}function kk(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;es=e}function nm(e){if(e!==es)return!1;if(!Yt)return kk(e),Yt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Vy(e.type,e.memoizedProps)),t&&(t=Qn)){if(Zy(e))throw VC(),Error(be(418));for(;t;)UC(e,t),t=yo(t.nextSibling)}if(kk(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(be(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Qn=yo(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Qn=null}}else Qn=es?yo(e.stateNode.nextSibling):null;return!0}function VC(){for(var e=Qn;e;)e=yo(e.nextSibling)}function md(){Qn=es=null,Yt=!1}function Wb(e){ra===null?ra=[e]:ra.push(e)}var TD=Ei.ReactCurrentBatchConfig;function xu(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(be(309));var n=r.stateNode}if(!n)throw Error(be(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var c=a.refs;o===null?delete c[i]:c[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(be(284));if(!r._owner)throw Error(be(290,e))}return e}function sm(e,t){throw e=Object.prototype.toString.call(t),Error(be(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function jk(e){var t=e._init;return t(e._payload)}function qC(e){function t(w,b){if(e){var N=w.deletions;N===null?(w.deletions=[b],w.flags|=16):N.push(b)}}function r(w,b){if(!e)return null;for(;b!==null;)t(w,b),b=b.sibling;return null}function n(w,b){for(w=new Map;b!==null;)b.key!==null?w.set(b.key,b):w.set(b.index,b),b=b.sibling;return w}function a(w,b){return w=_o(w,b),w.index=0,w.sibling=null,w}function i(w,b,N){return w.index=N,e?(N=w.alternate,N!==null?(N=N.index,N<b?(w.flags|=2,b):N):(w.flags|=2,b)):(w.flags|=1048576,b)}function o(w){return e&&w.alternate===null&&(w.flags|=2),w}function c(w,b,N,S){return b===null||b.tag!==6?(b=Tx(N,w.mode,S),b.return=w,b):(b=a(b,N),b.return=w,b)}function d(w,b,N,S){var C=N.type;return C===$c?f(w,b,N.props.children,S,N.key):b!==null&&(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ro&&jk(C)===b.type)?(S=a(b,N.props),S.ref=xu(w,b,N),S.return=w,S):(S=Xm(N.type,N.key,N.props,null,w.mode,S),S.ref=xu(w,b,N),S.return=w,S)}function u(w,b,N,S){return b===null||b.tag!==4||b.stateNode.containerInfo!==N.containerInfo||b.stateNode.implementation!==N.implementation?(b=Mx(N,w.mode,S),b.return=w,b):(b=a(b,N.children||[]),b.return=w,b)}function f(w,b,N,S,C){return b===null||b.tag!==7?(b=wl(N,w.mode,S,C),b.return=w,b):(b=a(b,N),b.return=w,b)}function m(w,b,N){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Tx(""+b,w.mode,N),b.return=w,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Yf:return N=Xm(b.type,b.key,b.props,null,w.mode,N),N.ref=xu(w,null,b),N.return=w,N;case zc:return b=Mx(b,w.mode,N),b.return=w,b;case ro:var S=b._init;return m(w,S(b._payload),N)}if(Ru(b)||hu(b))return b=wl(b,w.mode,N,null),b.return=w,b;sm(w,b)}return null}function p(w,b,N,S){var C=b!==null?b.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return C!==null?null:c(w,b,""+N,S);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Yf:return N.key===C?d(w,b,N,S):null;case zc:return N.key===C?u(w,b,N,S):null;case ro:return C=N._init,p(w,b,C(N._payload),S)}if(Ru(N)||hu(N))return C!==null?null:f(w,b,N,S,null);sm(w,N)}return null}function x(w,b,N,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return w=w.get(N)||null,c(b,w,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Yf:return w=w.get(S.key===null?N:S.key)||null,d(b,w,S,C);case zc:return w=w.get(S.key===null?N:S.key)||null,u(b,w,S,C);case ro:var O=S._init;return x(w,b,N,O(S._payload),C)}if(Ru(S)||hu(S))return w=w.get(N)||null,f(b,w,S,C,null);sm(b,S)}return null}function v(w,b,N,S){for(var C=null,O=null,A=b,z=b=0,$=null;A!==null&&z<N.length;z++){A.index>z?($=A,A=null):$=A.sibling;var W=p(w,A,N[z],S);if(W===null){A===null&&(A=$);break}e&&A&&W.alternate===null&&t(w,A),b=i(W,b,z),O===null?C=W:O.sibling=W,O=W,A=$}if(z===N.length)return r(w,A),Yt&&ol(w,z),C;if(A===null){for(;z<N.length;z++)A=m(w,N[z],S),A!==null&&(b=i(A,b,z),O===null?C=A:O.sibling=A,O=A);return Yt&&ol(w,z),C}for(A=n(w,A);z<N.length;z++)$=x(A,w,z,N[z],S),$!==null&&(e&&$.alternate!==null&&A.delete($.key===null?z:$.key),b=i($,b,z),O===null?C=$:O.sibling=$,O=$);return e&&A.forEach(function(F){return t(w,F)}),Yt&&ol(w,z),C}function y(w,b,N,S){var C=hu(N);if(typeof C!="function")throw Error(be(150));if(N=C.call(N),N==null)throw Error(be(151));for(var O=C=null,A=b,z=b=0,$=null,W=N.next();A!==null&&!W.done;z++,W=N.next()){A.index>z?($=A,A=null):$=A.sibling;var F=p(w,A,W.value,S);if(F===null){A===null&&(A=$);break}e&&A&&F.alternate===null&&t(w,A),b=i(F,b,z),O===null?C=F:O.sibling=F,O=F,A=$}if(W.done)return r(w,A),Yt&&ol(w,z),C;if(A===null){for(;!W.done;z++,W=N.next())W=m(w,W.value,S),W!==null&&(b=i(W,b,z),O===null?C=W:O.sibling=W,O=W);return Yt&&ol(w,z),C}for(A=n(w,A);!W.done;z++,W=N.next())W=x(A,w,z,W.value,S),W!==null&&(e&&W.alternate!==null&&A.delete(W.key===null?z:W.key),b=i(W,b,z),O===null?C=W:O.sibling=W,O=W);return e&&A.forEach(function(G){return t(w,G)}),Yt&&ol(w,z),C}function _(w,b,N,S){if(typeof N=="object"&&N!==null&&N.type===$c&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Yf:e:{for(var C=N.key,O=b;O!==null;){if(O.key===C){if(C=N.type,C===$c){if(O.tag===7){r(w,O.sibling),b=a(O,N.props.children),b.return=w,w=b;break e}}else if(O.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ro&&jk(C)===O.type){r(w,O.sibling),b=a(O,N.props),b.ref=xu(w,O,N),b.return=w,w=b;break e}r(w,O);break}else t(w,O);O=O.sibling}N.type===$c?(b=wl(N.props.children,w.mode,S,N.key),b.return=w,w=b):(S=Xm(N.type,N.key,N.props,null,w.mode,S),S.ref=xu(w,b,N),S.return=w,w=S)}return o(w);case zc:e:{for(O=N.key;b!==null;){if(b.key===O)if(b.tag===4&&b.stateNode.containerInfo===N.containerInfo&&b.stateNode.implementation===N.implementation){r(w,b.sibling),b=a(b,N.children||[]),b.return=w,w=b;break e}else{r(w,b);break}else t(w,b);b=b.sibling}b=Mx(N,w.mode,S),b.return=w,w=b}return o(w);case ro:return O=N._init,_(w,b,O(N._payload),S)}if(Ru(N))return v(w,b,N,S);if(hu(N))return y(w,b,N,S);sm(w,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,b!==null&&b.tag===6?(r(w,b.sibling),b=a(b,N),b.return=w,w=b):(r(w,b),b=Tx(N,w.mode,S),b.return=w,w=b),o(w)):r(w,b)}return _}var pd=qC(!0),YC=qC(!1),Pp=Ao(null),Tp=null,qc=null,Ub=null;function Vb(){Ub=qc=Tp=null}function qb(e){var t=Pp.current;Ft(Pp),e._currentValue=t}function Xy(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function td(e,t){Tp=e,Ub=qc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(An=!0),e.firstContext=null)}function Os(e){var t=e._currentValue;if(Ub!==e)if(e={context:e,memoizedValue:t,next:null},qc===null){if(Tp===null)throw Error(be(308));qc=e,Tp.dependencies={lanes:0,firstContext:e}}else qc=qc.next=e;return t}var ml=null;function Yb(e){ml===null?ml=[e]:ml.push(e)}function GC(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Yb(t)):(r.next=a.next,a.next=r),t.interleaved=r,ki(e,n)}function ki(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var no=!1;function Gb(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ZC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function pi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vo(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,pt&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,ki(e,r)}return a=n.interleaved,a===null?(t.next=t,Yb(n)):(t.next=a.next,a.next=t),n.interleaved=t,ki(e,r)}function Vm(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Db(e,r)}}function Nk(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Mp(e,t,r,n){var a=e.updateQueue;no=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,c=a.shared.pending;if(c!==null){a.shared.pending=null;var d=c,u=d.next;d.next=null,o===null?i=u:o.next=u,o=d;var f=e.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=u:c.next=u,f.lastBaseUpdate=d))}if(i!==null){var m=a.baseState;o=0,f=u=d=null,c=i;do{var p=c.lane,x=c.eventTime;if((n&p)===p){f!==null&&(f=f.next={eventTime:x,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var v=e,y=c;switch(p=t,x=r,y.tag){case 1:if(v=y.payload,typeof v=="function"){m=v.call(x,m,p);break e}m=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,p=typeof v=="function"?v.call(x,m,p):v,p==null)break e;m=er({},m,p);break e;case 2:no=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,p=a.effects,p===null?a.effects=[c]:p.push(c))}else x={eventTime:x,lane:p,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(u=f=x,d=m):f=f.next=x,o|=p;if(c=c.next,c===null){if(c=a.shared.pending,c===null)break;p=c,c=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(f===null&&(d=m),a.baseState=d,a.firstBaseUpdate=u,a.lastBaseUpdate=f,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Dl|=o,e.lanes=o,e.memoizedState=m}}function Sk(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(be(191,a));a.call(n)}}}var uf={},Sa=Ao(uf),kh=Ao(uf),jh=Ao(uf);function pl(e){if(e===uf)throw Error(be(174));return e}function Zb(e,t){switch(Mt(jh,t),Mt(kh,e),Mt(Sa,uf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:My(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=My(t,e)}Ft(Sa),Mt(Sa,t)}function gd(){Ft(Sa),Ft(kh),Ft(jh)}function KC(e){pl(jh.current);var t=pl(Sa.current),r=My(t,e.type);t!==r&&(Mt(kh,e),Mt(Sa,r))}function Kb(e){kh.current===e&&(Ft(Sa),Ft(kh))}var Kt=Ao(0);function Op(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jx=[];function Xb(){for(var e=0;e<jx.length;e++)jx[e]._workInProgressVersionPrimary=null;jx.length=0}var qm=Ei.ReactCurrentDispatcher,Nx=Ei.ReactCurrentBatchConfig,Ol=0,Qt=null,kr=null,Or=null,Dp=!1,eh=!1,Nh=0,MD=0;function Xr(){throw Error(be(321))}function Jb(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ia(e[r],t[r]))return!1;return!0}function Qb(e,t,r,n,a,i){if(Ol=i,Qt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,qm.current=e===null||e.memoizedState===null?AD:RD,e=r(n,a),eh){i=0;do{if(eh=!1,Nh=0,25<=i)throw Error(be(301));i+=1,Or=kr=null,t.updateQueue=null,qm.current=zD,e=r(n,a)}while(eh)}if(qm.current=Lp,t=kr!==null&&kr.next!==null,Ol=0,Or=kr=Qt=null,Dp=!1,t)throw Error(be(300));return e}function ew(){var e=Nh!==0;return Nh=0,e}function ba(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Or===null?Qt.memoizedState=Or=e:Or=Or.next=e,Or}function Ds(){if(kr===null){var e=Qt.alternate;e=e!==null?e.memoizedState:null}else e=kr.next;var t=Or===null?Qt.memoizedState:Or.next;if(t!==null)Or=t,kr=e;else{if(e===null)throw Error(be(310));kr=e,e={memoizedState:kr.memoizedState,baseState:kr.baseState,baseQueue:kr.baseQueue,queue:kr.queue,next:null},Or===null?Qt.memoizedState=Or=e:Or=Or.next=e}return Or}function Sh(e,t){return typeof t=="function"?t(e):t}function Sx(e){var t=Ds(),r=t.queue;if(r===null)throw Error(be(311));r.lastRenderedReducer=e;var n=kr,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var c=o=null,d=null,u=i;do{var f=u.lane;if((Ol&f)===f)d!==null&&(d=d.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var m={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};d===null?(c=d=m,o=n):d=d.next=m,Qt.lanes|=f,Dl|=f}u=u.next}while(u!==null&&u!==i);d===null?o=n:d.next=c,ia(n,t.memoizedState)||(An=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=d,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Qt.lanes|=i,Dl|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Cx(e){var t=Ds(),r=t.queue;if(r===null)throw Error(be(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);ia(i,t.memoizedState)||(An=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function XC(){}function JC(e,t){var r=Qt,n=Ds(),a=t(),i=!ia(n.memoizedState,a);if(i&&(n.memoizedState=a,An=!0),n=n.queue,tw(tE.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Or!==null&&Or.memoizedState.tag&1){if(r.flags|=2048,Ch(9,eE.bind(null,r,n,a,t),void 0,null),Lr===null)throw Error(be(349));Ol&30||QC(r,t,a)}return a}function QC(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Qt.updateQueue,t===null?(t={lastEffect:null,stores:null},Qt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function eE(e,t,r,n){t.value=r,t.getSnapshot=n,rE(t)&&nE(e)}function tE(e,t,r){return r(function(){rE(t)&&nE(e)})}function rE(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ia(e,r)}catch{return!0}}function nE(e){var t=ki(e,1);t!==null&&aa(t,e,1,-1)}function Ck(e){var t=ba();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sh,lastRenderedState:e},t.queue=e,e=e.dispatch=LD.bind(null,Qt,e),[t.memoizedState,e]}function Ch(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Qt.updateQueue,t===null?(t={lastEffect:null,stores:null},Qt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function sE(){return Ds().memoizedState}function Ym(e,t,r,n){var a=ba();Qt.flags|=e,a.memoizedState=Ch(1|t,r,void 0,n===void 0?null:n)}function Dg(e,t,r,n){var a=Ds();n=n===void 0?null:n;var i=void 0;if(kr!==null){var o=kr.memoizedState;if(i=o.destroy,n!==null&&Jb(n,o.deps)){a.memoizedState=Ch(t,r,i,n);return}}Qt.flags|=e,a.memoizedState=Ch(1|t,r,i,n)}function Ek(e,t){return Ym(8390656,8,e,t)}function tw(e,t){return Dg(2048,8,e,t)}function aE(e,t){return Dg(4,2,e,t)}function iE(e,t){return Dg(4,4,e,t)}function oE(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function lE(e,t,r){return r=r!=null?r.concat([e]):null,Dg(4,4,oE.bind(null,t,e),r)}function rw(){}function cE(e,t){var r=Ds();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Jb(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function dE(e,t){var r=Ds();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Jb(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function uE(e,t,r){return Ol&21?(ia(r,t)||(r=gC(),Qt.lanes|=r,Dl|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,An=!0),e.memoizedState=r)}function OD(e,t){var r=kt;kt=r!==0&&4>r?r:4,e(!0);var n=Nx.transition;Nx.transition={};try{e(!1),t()}finally{kt=r,Nx.transition=n}}function hE(){return Ds().memoizedState}function DD(e,t,r){var n=wo(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},fE(e))mE(t,r);else if(r=GC(e,t,r,n),r!==null){var a=jn();aa(r,e,n,a),pE(r,t,n)}}function LD(e,t,r){var n=wo(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(fE(e))mE(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,c=i(o,r);if(a.hasEagerState=!0,a.eagerState=c,ia(c,o)){var d=t.interleaved;d===null?(a.next=a,Yb(t)):(a.next=d.next,d.next=a),t.interleaved=a;return}}catch{}finally{}r=GC(e,t,a,n),r!==null&&(a=jn(),aa(r,e,n,a),pE(r,t,n))}}function fE(e){var t=e.alternate;return e===Qt||t!==null&&t===Qt}function mE(e,t){eh=Dp=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function pE(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Db(e,r)}}var Lp={readContext:Os,useCallback:Xr,useContext:Xr,useEffect:Xr,useImperativeHandle:Xr,useInsertionEffect:Xr,useLayoutEffect:Xr,useMemo:Xr,useReducer:Xr,useRef:Xr,useState:Xr,useDebugValue:Xr,useDeferredValue:Xr,useTransition:Xr,useMutableSource:Xr,useSyncExternalStore:Xr,useId:Xr,unstable_isNewReconciler:!1},AD={readContext:Os,useCallback:function(e,t){return ba().memoizedState=[e,t===void 0?null:t],e},useContext:Os,useEffect:Ek,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ym(4194308,4,oE.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ym(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ym(4,2,e,t)},useMemo:function(e,t){var r=ba();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ba();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=DD.bind(null,Qt,e),[n.memoizedState,e]},useRef:function(e){var t=ba();return e={current:e},t.memoizedState=e},useState:Ck,useDebugValue:rw,useDeferredValue:function(e){return ba().memoizedState=e},useTransition:function(){var e=Ck(!1),t=e[0];return e=OD.bind(null,e[1]),ba().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Qt,a=ba();if(Yt){if(r===void 0)throw Error(be(407));r=r()}else{if(r=t(),Lr===null)throw Error(be(349));Ol&30||QC(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,Ek(tE.bind(null,n,i,e),[e]),n.flags|=2048,Ch(9,eE.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=ba(),t=Lr.identifierPrefix;if(Yt){var r=di,n=ci;r=(n&~(1<<32-sa(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Nh++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=MD++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},RD={readContext:Os,useCallback:cE,useContext:Os,useEffect:tw,useImperativeHandle:lE,useInsertionEffect:aE,useLayoutEffect:iE,useMemo:dE,useReducer:Sx,useRef:sE,useState:function(){return Sx(Sh)},useDebugValue:rw,useDeferredValue:function(e){var t=Ds();return uE(t,kr.memoizedState,e)},useTransition:function(){var e=Sx(Sh)[0],t=Ds().memoizedState;return[e,t]},useMutableSource:XC,useSyncExternalStore:JC,useId:hE,unstable_isNewReconciler:!1},zD={readContext:Os,useCallback:cE,useContext:Os,useEffect:tw,useImperativeHandle:lE,useInsertionEffect:aE,useLayoutEffect:iE,useMemo:dE,useReducer:Cx,useRef:sE,useState:function(){return Cx(Sh)},useDebugValue:rw,useDeferredValue:function(e){var t=Ds();return kr===null?t.memoizedState=e:uE(t,kr.memoizedState,e)},useTransition:function(){var e=Cx(Sh)[0],t=Ds().memoizedState;return[e,t]},useMutableSource:XC,useSyncExternalStore:JC,useId:hE,unstable_isNewReconciler:!1};function Js(e,t){if(e&&e.defaultProps){t=er({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Jy(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:er({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Lg={isMounted:function(e){return(e=e._reactInternals)?ql(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=jn(),a=wo(e),i=pi(n,a);i.payload=t,r!=null&&(i.callback=r),t=vo(e,i,a),t!==null&&(aa(t,e,a,n),Vm(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=jn(),a=wo(e),i=pi(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=vo(e,i,a),t!==null&&(aa(t,e,a,n),Vm(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=jn(),n=wo(e),a=pi(r,n);a.tag=2,t!=null&&(a.callback=t),t=vo(e,a,n),t!==null&&(aa(t,e,n,r),Vm(t,e,n))}};function Pk(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!vh(r,n)||!vh(a,i):!0}function gE(e,t,r){var n=!1,a=Eo,i=t.contextType;return typeof i=="object"&&i!==null?i=Os(i):(a=zn(t)?Tl:on.current,n=t.contextTypes,i=(n=n!=null)?fd(e,a):Eo),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Lg,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Tk(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Lg.enqueueReplaceState(t,t.state,null)}function Qy(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Gb(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Os(i):(i=zn(t)?Tl:on.current,a.context=fd(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Jy(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Lg.enqueueReplaceState(a,a.state,null),Mp(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function xd(e,t){try{var r="",n=t;do r+=uO(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Ex(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ev(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var $D=typeof WeakMap=="function"?WeakMap:Map;function xE(e,t,r){r=pi(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Rp||(Rp=!0,dv=n),ev(e,t)},r}function yE(e,t,r){r=pi(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){ev(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){ev(e,t),typeof n!="function"&&(bo===null?bo=new Set([this]):bo.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Mk(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new $D;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=JD.bind(null,e,t,r),t.then(e,e))}function Ok(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Dk(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=pi(-1,1),t.tag=2,vo(r,t,1))),r.lanes|=1),e)}var ID=Ei.ReactCurrentOwner,An=!1;function bn(e,t,r,n){t.child=e===null?YC(t,null,r,n):pd(t,e.child,r,n)}function Lk(e,t,r,n,a){r=r.render;var i=t.ref;return td(t,a),n=Qb(e,t,r,n,i,a),r=ew(),e!==null&&!An?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ji(e,t,a)):(Yt&&r&&Bb(t),t.flags|=1,bn(e,t,n,a),t.child)}function Ak(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!dw(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,vE(e,t,i,n,a)):(e=Xm(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:vh,r(o,n)&&e.ref===t.ref)return ji(e,t,a)}return t.flags|=1,e=_o(i,n),e.ref=t.ref,e.return=t,t.child=e}function vE(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(vh(i,n)&&e.ref===t.ref)if(An=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(An=!0);else return t.lanes=e.lanes,ji(e,t,a)}return tv(e,t,r,n,a)}function bE(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mt(Gc,Zn),Zn|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Mt(Gc,Zn),Zn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Mt(Gc,Zn),Zn|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Mt(Gc,Zn),Zn|=n;return bn(e,t,a,r),t.child}function wE(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function tv(e,t,r,n,a){var i=zn(r)?Tl:on.current;return i=fd(t,i),td(t,a),r=Qb(e,t,r,n,i,a),n=ew(),e!==null&&!An?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ji(e,t,a)):(Yt&&n&&Bb(t),t.flags|=1,bn(e,t,r,a),t.child)}function Rk(e,t,r,n,a){if(zn(r)){var i=!0;Sp(t)}else i=!1;if(td(t,a),t.stateNode===null)Gm(e,t),gE(t,r,n),Qy(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,c=t.memoizedProps;o.props=c;var d=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Os(u):(u=zn(r)?Tl:on.current,u=fd(t,u));var f=r.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==n||d!==u)&&Tk(t,o,n,u),no=!1;var p=t.memoizedState;o.state=p,Mp(t,n,o,a),d=t.memoizedState,c!==n||p!==d||Rn.current||no?(typeof f=="function"&&(Jy(t,r,f,n),d=t.memoizedState),(c=no||Pk(t,r,c,n,p,d,u))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=d),o.props=n,o.state=d,o.context=u,n=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,ZC(e,t),c=t.memoizedProps,u=t.type===t.elementType?c:Js(t.type,c),o.props=u,m=t.pendingProps,p=o.context,d=r.contextType,typeof d=="object"&&d!==null?d=Os(d):(d=zn(r)?Tl:on.current,d=fd(t,d));var x=r.getDerivedStateFromProps;(f=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||p!==d)&&Tk(t,o,n,d),no=!1,p=t.memoizedState,o.state=p,Mp(t,n,o,a);var v=t.memoizedState;c!==m||p!==v||Rn.current||no?(typeof x=="function"&&(Jy(t,r,x,n),v=t.memoizedState),(u=no||Pk(t,r,u,n,p,v,d)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,d)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),o.props=n,o.state=v,o.context=d,n=u):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return rv(e,t,r,n,i,a)}function rv(e,t,r,n,a,i){wE(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&wk(t,r,!1),ji(e,t,i);n=t.stateNode,ID.current=t;var c=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=pd(t,e.child,null,i),t.child=pd(t,null,c,i)):bn(e,t,c,i),t.memoizedState=n.state,a&&wk(t,r,!0),t.child}function _E(e){var t=e.stateNode;t.pendingContext?bk(e,t.pendingContext,t.pendingContext!==t.context):t.context&&bk(e,t.context,!1),Zb(e,t.containerInfo)}function zk(e,t,r,n,a){return md(),Wb(a),t.flags|=256,bn(e,t,r,n),t.child}var nv={dehydrated:null,treeContext:null,retryLane:0};function sv(e){return{baseLanes:e,cachePool:null,transitions:null}}function kE(e,t,r){var n=t.pendingProps,a=Kt.current,i=!1,o=(t.flags&128)!==0,c;if((c=o)||(c=e!==null&&e.memoizedState===null?!1:(a&2)!==0),c?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Mt(Kt,a&1),e===null)return Ky(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=zg(o,n,0,null),e=wl(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=sv(r),t.memoizedState=nv,e):nw(t,o));if(a=e.memoizedState,a!==null&&(c=a.dehydrated,c!==null))return FD(e,t,o,n,c,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,c=a.sibling;var d={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=d,t.deletions=null):(n=_o(a,d),n.subtreeFlags=a.subtreeFlags&14680064),c!==null?i=_o(c,i):(i=wl(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?sv(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=nv,n}return i=e.child,e=i.sibling,n=_o(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function nw(e,t){return t=zg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function am(e,t,r,n){return n!==null&&Wb(n),pd(t,e.child,null,r),e=nw(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function FD(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Ex(Error(be(422))),am(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=zg({mode:"visible",children:n.children},a,0,null),i=wl(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&pd(t,e.child,null,o),t.child.memoizedState=sv(o),t.memoizedState=nv,i);if(!(t.mode&1))return am(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var c=n.dgst;return n=c,i=Error(be(419)),n=Ex(i,n,void 0),am(e,t,o,n)}if(c=(o&e.childLanes)!==0,An||c){if(n=Lr,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,ki(e,a),aa(n,e,a,-1))}return cw(),n=Ex(Error(be(421))),am(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=QD.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Qn=yo(a.nextSibling),es=t,Yt=!0,ra=null,e!==null&&(_s[ks++]=ci,_s[ks++]=di,_s[ks++]=Ml,ci=e.id,di=e.overflow,Ml=t),t=nw(t,n.children),t.flags|=4096,t)}function $k(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Xy(e.return,t,r)}function Px(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function jE(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(bn(e,t,n.children,r),n=Kt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$k(e,r,t);else if(e.tag===19)$k(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Mt(Kt,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Op(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Px(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Op(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Px(t,!0,r,null,i);break;case"together":Px(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ji(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Dl|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(be(153));if(t.child!==null){for(e=t.child,r=_o(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=_o(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function BD(e,t,r){switch(t.tag){case 3:_E(t),md();break;case 5:KC(t);break;case 1:zn(t.type)&&Sp(t);break;case 4:Zb(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Mt(Pp,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Mt(Kt,Kt.current&1),t.flags|=128,null):r&t.child.childLanes?kE(e,t,r):(Mt(Kt,Kt.current&1),e=ji(e,t,r),e!==null?e.sibling:null);Mt(Kt,Kt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return jE(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Mt(Kt,Kt.current),n)break;return null;case 22:case 23:return t.lanes=0,bE(e,t,r)}return ji(e,t,r)}var NE,av,SE,CE;NE=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};av=function(){};SE=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,pl(Sa.current);var i=null;switch(r){case"input":a=Cy(e,a),n=Cy(e,n),i=[];break;case"select":a=er({},a,{value:void 0}),n=er({},n,{value:void 0}),i=[];break;case"textarea":a=Ty(e,a),n=Ty(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=jp)}Oy(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var c=a[u];for(o in c)c.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(hh.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var d=n[u];if(c=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&d!==c&&(d!=null||c!=null))if(u==="style")if(c){for(o in c)!c.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in d)d.hasOwnProperty(o)&&c[o]!==d[o]&&(r||(r={}),r[o]=d[o])}else r||(i||(i=[]),i.push(u,r)),r=d;else u==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(i=i||[]).push(u,d)):u==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(u,""+d):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(hh.hasOwnProperty(u)?(d!=null&&u==="onScroll"&&Dt("scroll",e),i||c===d||(i=[])):(i=i||[]).push(u,d))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};CE=function(e,t,r,n){r!==n&&(t.flags|=4)};function yu(e,t){if(!Yt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Jr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function HD(e,t,r){var n=t.pendingProps;switch(Hb(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jr(t),null;case 1:return zn(t.type)&&Np(),Jr(t),null;case 3:return n=t.stateNode,gd(),Ft(Rn),Ft(on),Xb(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(nm(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ra!==null&&(fv(ra),ra=null))),av(e,t),Jr(t),null;case 5:Kb(t);var a=pl(jh.current);if(r=t.type,e!==null&&t.stateNode!=null)SE(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(be(166));return Jr(t),null}if(e=pl(Sa.current),nm(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ka]=t,n[_h]=i,e=(t.mode&1)!==0,r){case"dialog":Dt("cancel",n),Dt("close",n);break;case"iframe":case"object":case"embed":Dt("load",n);break;case"video":case"audio":for(a=0;a<$u.length;a++)Dt($u[a],n);break;case"source":Dt("error",n);break;case"img":case"image":case"link":Dt("error",n),Dt("load",n);break;case"details":Dt("toggle",n);break;case"input":Y1(n,i),Dt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Dt("invalid",n);break;case"textarea":Z1(n,i),Dt("invalid",n)}Oy(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?n.textContent!==c&&(i.suppressHydrationWarning!==!0&&rm(n.textContent,c,e),a=["children",c]):typeof c=="number"&&n.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&rm(n.textContent,c,e),a=["children",""+c]):hh.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Dt("scroll",n)}switch(r){case"input":Gf(n),G1(n,i,!0);break;case"textarea":Gf(n),K1(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=jp)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=tC(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ka]=t,e[_h]=n,NE(e,t,!1,!1),t.stateNode=e;e:{switch(o=Dy(r,n),r){case"dialog":Dt("cancel",e),Dt("close",e),a=n;break;case"iframe":case"object":case"embed":Dt("load",e),a=n;break;case"video":case"audio":for(a=0;a<$u.length;a++)Dt($u[a],e);a=n;break;case"source":Dt("error",e),a=n;break;case"img":case"image":case"link":Dt("error",e),Dt("load",e),a=n;break;case"details":Dt("toggle",e),a=n;break;case"input":Y1(e,n),a=Cy(e,n),Dt("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=er({},n,{value:void 0}),Dt("invalid",e);break;case"textarea":Z1(e,n),a=Ty(e,n),Dt("invalid",e);break;default:a=n}Oy(r,a),c=a;for(i in c)if(c.hasOwnProperty(i)){var d=c[i];i==="style"?sC(e,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&rC(e,d)):i==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&fh(e,d):typeof d=="number"&&fh(e,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(hh.hasOwnProperty(i)?d!=null&&i==="onScroll"&&Dt("scroll",e):d!=null&&Cb(e,i,d,o))}switch(r){case"input":Gf(e),G1(e,n,!1);break;case"textarea":Gf(e),K1(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Co(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Xc(e,!!n.multiple,i,!1):n.defaultValue!=null&&Xc(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=jp)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Jr(t),null;case 6:if(e&&t.stateNode!=null)CE(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(be(166));if(r=pl(jh.current),pl(Sa.current),nm(t)){if(n=t.stateNode,r=t.memoizedProps,n[ka]=t,(i=n.nodeValue!==r)&&(e=es,e!==null))switch(e.tag){case 3:rm(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&rm(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ka]=t,t.stateNode=n}return Jr(t),null;case 13:if(Ft(Kt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Yt&&Qn!==null&&t.mode&1&&!(t.flags&128))VC(),md(),t.flags|=98560,i=!1;else if(i=nm(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(be(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(be(317));i[ka]=t}else md(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Jr(t),i=!1}else ra!==null&&(fv(ra),ra=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Kt.current&1?Nr===0&&(Nr=3):cw())),t.updateQueue!==null&&(t.flags|=4),Jr(t),null);case 4:return gd(),av(e,t),e===null&&bh(t.stateNode.containerInfo),Jr(t),null;case 10:return qb(t.type._context),Jr(t),null;case 17:return zn(t.type)&&Np(),Jr(t),null;case 19:if(Ft(Kt),i=t.memoizedState,i===null)return Jr(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)yu(i,!1);else{if(Nr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Op(e),o!==null){for(t.flags|=128,yu(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Mt(Kt,Kt.current&1|2),t.child}e=e.sibling}i.tail!==null&&lr()>yd&&(t.flags|=128,n=!0,yu(i,!1),t.lanes=4194304)}else{if(!n)if(e=Op(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),yu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Yt)return Jr(t),null}else 2*lr()-i.renderingStartTime>yd&&r!==1073741824&&(t.flags|=128,n=!0,yu(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=lr(),t.sibling=null,r=Kt.current,Mt(Kt,n?r&1|2:r&1),t):(Jr(t),null);case 22:case 23:return lw(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Zn&1073741824&&(Jr(t),t.subtreeFlags&6&&(t.flags|=8192)):Jr(t),null;case 24:return null;case 25:return null}throw Error(be(156,t.tag))}function WD(e,t){switch(Hb(t),t.tag){case 1:return zn(t.type)&&Np(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return gd(),Ft(Rn),Ft(on),Xb(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Kb(t),null;case 13:if(Ft(Kt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(be(340));md()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ft(Kt),null;case 4:return gd(),null;case 10:return qb(t.type._context),null;case 22:case 23:return lw(),null;case 24:return null;default:return null}}var im=!1,rn=!1,UD=typeof WeakSet=="function"?WeakSet:Set,De=null;function Yc(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){rr(e,t,n)}else r.current=null}function iv(e,t,r){try{r()}catch(n){rr(e,t,n)}}var Ik=!1;function VD(e,t){if(Wy=wp,e=OC(),Fb(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,c=-1,d=-1,u=0,f=0,m=e,p=null;t:for(;;){for(var x;m!==r||a!==0&&m.nodeType!==3||(c=o+a),m!==i||n!==0&&m.nodeType!==3||(d=o+n),m.nodeType===3&&(o+=m.nodeValue.length),(x=m.firstChild)!==null;)p=m,m=x;for(;;){if(m===e)break t;if(p===r&&++u===a&&(c=o),p===i&&++f===n&&(d=o),(x=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=x}r=c===-1||d===-1?null:{start:c,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(Uy={focusedElem:e,selectionRange:r},wp=!1,De=t;De!==null;)if(t=De,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,De=e;else for(;De!==null;){t=De;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,_=v.memoizedState,w=t.stateNode,b=w.getSnapshotBeforeUpdate(t.elementType===t.type?y:Js(t.type,y),_);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(be(163))}}catch(S){rr(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,De=e;break}De=t.return}return v=Ik,Ik=!1,v}function th(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&iv(t,r,i)}a=a.next}while(a!==n)}}function Ag(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ov(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function EE(e){var t=e.alternate;t!==null&&(e.alternate=null,EE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ka],delete t[_h],delete t[Yy],delete t[CD],delete t[ED])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function PE(e){return e.tag===5||e.tag===3||e.tag===4}function Fk(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||PE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function lv(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=jp));else if(n!==4&&(e=e.child,e!==null))for(lv(e,t,r),e=e.sibling;e!==null;)lv(e,t,r),e=e.sibling}function cv(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(cv(e,t,r),e=e.sibling;e!==null;)cv(e,t,r),e=e.sibling}var Hr=null,ea=!1;function Xi(e,t,r){for(r=r.child;r!==null;)TE(e,t,r),r=r.sibling}function TE(e,t,r){if(Na&&typeof Na.onCommitFiberUnmount=="function")try{Na.onCommitFiberUnmount(Cg,r)}catch{}switch(r.tag){case 5:rn||Yc(r,t);case 6:var n=Hr,a=ea;Hr=null,Xi(e,t,r),Hr=n,ea=a,Hr!==null&&(ea?(e=Hr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Hr.removeChild(r.stateNode));break;case 18:Hr!==null&&(ea?(e=Hr,r=r.stateNode,e.nodeType===8?_x(e.parentNode,r):e.nodeType===1&&_x(e,r),xh(e)):_x(Hr,r.stateNode));break;case 4:n=Hr,a=ea,Hr=r.stateNode.containerInfo,ea=!0,Xi(e,t,r),Hr=n,ea=a;break;case 0:case 11:case 14:case 15:if(!rn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&iv(r,t,o),a=a.next}while(a!==n)}Xi(e,t,r);break;case 1:if(!rn&&(Yc(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(c){rr(r,t,c)}Xi(e,t,r);break;case 21:Xi(e,t,r);break;case 22:r.mode&1?(rn=(n=rn)||r.memoizedState!==null,Xi(e,t,r),rn=n):Xi(e,t,r);break;default:Xi(e,t,r)}}function Bk(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new UD),t.forEach(function(n){var a=e6.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Ks(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,c=o;e:for(;c!==null;){switch(c.tag){case 5:Hr=c.stateNode,ea=!1;break e;case 3:Hr=c.stateNode.containerInfo,ea=!0;break e;case 4:Hr=c.stateNode.containerInfo,ea=!0;break e}c=c.return}if(Hr===null)throw Error(be(160));TE(i,o,a),Hr=null,ea=!1;var d=a.alternate;d!==null&&(d.return=null),a.return=null}catch(u){rr(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ME(t,e),t=t.sibling}function ME(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ks(t,e),xa(e),n&4){try{th(3,e,e.return),Ag(3,e)}catch(y){rr(e,e.return,y)}try{th(5,e,e.return)}catch(y){rr(e,e.return,y)}}break;case 1:Ks(t,e),xa(e),n&512&&r!==null&&Yc(r,r.return);break;case 5:if(Ks(t,e),xa(e),n&512&&r!==null&&Yc(r,r.return),e.flags&32){var a=e.stateNode;try{fh(a,"")}catch(y){rr(e,e.return,y)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,c=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&QS(a,i),Dy(c,o);var u=Dy(c,i);for(o=0;o<d.length;o+=2){var f=d[o],m=d[o+1];f==="style"?sC(a,m):f==="dangerouslySetInnerHTML"?rC(a,m):f==="children"?fh(a,m):Cb(a,f,m,u)}switch(c){case"input":Ey(a,i);break;case"textarea":eC(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?Xc(a,!!i.multiple,x,!1):p!==!!i.multiple&&(i.defaultValue!=null?Xc(a,!!i.multiple,i.defaultValue,!0):Xc(a,!!i.multiple,i.multiple?[]:"",!1))}a[_h]=i}catch(y){rr(e,e.return,y)}}break;case 6:if(Ks(t,e),xa(e),n&4){if(e.stateNode===null)throw Error(be(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(y){rr(e,e.return,y)}}break;case 3:if(Ks(t,e),xa(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{xh(t.containerInfo)}catch(y){rr(e,e.return,y)}break;case 4:Ks(t,e),xa(e);break;case 13:Ks(t,e),xa(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(iw=lr())),n&4&&Bk(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(rn=(u=rn)||f,Ks(t,e),rn=u):Ks(t,e),xa(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(De=e,f=e.child;f!==null;){for(m=De=f;De!==null;){switch(p=De,x=p.child,p.tag){case 0:case 11:case 14:case 15:th(4,p,p.return);break;case 1:Yc(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){rr(n,r,y)}}break;case 5:Yc(p,p.return);break;case 22:if(p.memoizedState!==null){Wk(m);continue}}x!==null?(x.return=p,De=x):Wk(m)}f=f.sibling}e:for(f=null,m=e;;){if(m.tag===5){if(f===null){f=m;try{a=m.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=m.stateNode,d=m.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=nC("display",o))}catch(y){rr(e,e.return,y)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(y){rr(e,e.return,y)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ks(t,e),xa(e),n&4&&Bk(e);break;case 21:break;default:Ks(t,e),xa(e)}}function xa(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(PE(r)){var n=r;break e}r=r.return}throw Error(be(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(fh(a,""),n.flags&=-33);var i=Fk(e);cv(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,c=Fk(e);lv(e,c,o);break;default:throw Error(be(161))}}catch(d){rr(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function qD(e,t,r){De=e,OE(e)}function OE(e,t,r){for(var n=(e.mode&1)!==0;De!==null;){var a=De,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||im;if(!o){var c=a.alternate,d=c!==null&&c.memoizedState!==null||rn;c=im;var u=rn;if(im=o,(rn=d)&&!u)for(De=a;De!==null;)o=De,d=o.child,o.tag===22&&o.memoizedState!==null?Uk(a):d!==null?(d.return=o,De=d):Uk(a);for(;i!==null;)De=i,OE(i),i=i.sibling;De=a,im=c,rn=u}Hk(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,De=i):Hk(e)}}function Hk(e){for(;De!==null;){var t=De;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:rn||Ag(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!rn)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Js(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Sk(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Sk(t,o,r)}break;case 5:var c=t.stateNode;if(r===null&&t.flags&4){r=c;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&xh(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(be(163))}rn||t.flags&512&&ov(t)}catch(p){rr(t,t.return,p)}}if(t===e){De=null;break}if(r=t.sibling,r!==null){r.return=t.return,De=r;break}De=t.return}}function Wk(e){for(;De!==null;){var t=De;if(t===e){De=null;break}var r=t.sibling;if(r!==null){r.return=t.return,De=r;break}De=t.return}}function Uk(e){for(;De!==null;){var t=De;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ag(4,t)}catch(d){rr(t,r,d)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(d){rr(t,a,d)}}var i=t.return;try{ov(t)}catch(d){rr(t,i,d)}break;case 5:var o=t.return;try{ov(t)}catch(d){rr(t,o,d)}}}catch(d){rr(t,t.return,d)}if(t===e){De=null;break}var c=t.sibling;if(c!==null){c.return=t.return,De=c;break}De=t.return}}var YD=Math.ceil,Ap=Ei.ReactCurrentDispatcher,sw=Ei.ReactCurrentOwner,Ts=Ei.ReactCurrentBatchConfig,pt=0,Lr=null,mr=null,Ur=0,Zn=0,Gc=Ao(0),Nr=0,Eh=null,Dl=0,Rg=0,aw=0,rh=null,Dn=null,iw=0,yd=1/0,ai=null,Rp=!1,dv=null,bo=null,om=!1,oo=null,zp=0,nh=0,uv=null,Zm=-1,Km=0;function jn(){return pt&6?lr():Zm!==-1?Zm:Zm=lr()}function wo(e){return e.mode&1?pt&2&&Ur!==0?Ur&-Ur:TD.transition!==null?(Km===0&&(Km=gC()),Km):(e=kt,e!==0||(e=window.event,e=e===void 0?16:kC(e.type)),e):1}function aa(e,t,r,n){if(50<nh)throw nh=0,uv=null,Error(be(185));lf(e,r,n),(!(pt&2)||e!==Lr)&&(e===Lr&&(!(pt&2)&&(Rg|=r),Nr===4&&ao(e,Ur)),$n(e,n),r===1&&pt===0&&!(t.mode&1)&&(yd=lr()+500,Og&&Ro()))}function $n(e,t){var r=e.callbackNode;TO(e,t);var n=bp(e,e===Lr?Ur:0);if(n===0)r!==null&&Q1(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Q1(r),t===1)e.tag===0?PD(Vk.bind(null,e)):HC(Vk.bind(null,e)),ND(function(){!(pt&6)&&Ro()}),r=null;else{switch(xC(n)){case 1:r=Ob;break;case 4:r=mC;break;case 16:r=vp;break;case 536870912:r=pC;break;default:r=vp}r=FE(r,DE.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function DE(e,t){if(Zm=-1,Km=0,pt&6)throw Error(be(327));var r=e.callbackNode;if(rd()&&e.callbackNode!==r)return null;var n=bp(e,e===Lr?Ur:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=$p(e,n);else{t=n;var a=pt;pt|=2;var i=AE();(Lr!==e||Ur!==t)&&(ai=null,yd=lr()+500,bl(e,t));do try{KD();break}catch(c){LE(e,c)}while(!0);Vb(),Ap.current=i,pt=a,mr!==null?t=0:(Lr=null,Ur=0,t=Nr)}if(t!==0){if(t===2&&(a=$y(e),a!==0&&(n=a,t=hv(e,a))),t===1)throw r=Eh,bl(e,0),ao(e,n),$n(e,lr()),r;if(t===6)ao(e,n);else{if(a=e.current.alternate,!(n&30)&&!GD(a)&&(t=$p(e,n),t===2&&(i=$y(e),i!==0&&(n=i,t=hv(e,i))),t===1))throw r=Eh,bl(e,0),ao(e,n),$n(e,lr()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(be(345));case 2:ll(e,Dn,ai);break;case 3:if(ao(e,n),(n&130023424)===n&&(t=iw+500-lr(),10<t)){if(bp(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){jn(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=qy(ll.bind(null,e,Dn,ai),t);break}ll(e,Dn,ai);break;case 4:if(ao(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-sa(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=lr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*YD(n/1960))-n,10<n){e.timeoutHandle=qy(ll.bind(null,e,Dn,ai),n);break}ll(e,Dn,ai);break;case 5:ll(e,Dn,ai);break;default:throw Error(be(329))}}}return $n(e,lr()),e.callbackNode===r?DE.bind(null,e):null}function hv(e,t){var r=rh;return e.current.memoizedState.isDehydrated&&(bl(e,t).flags|=256),e=$p(e,t),e!==2&&(t=Dn,Dn=r,t!==null&&fv(t)),e}function fv(e){Dn===null?Dn=e:Dn.push.apply(Dn,e)}function GD(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!ia(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ao(e,t){for(t&=~aw,t&=~Rg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-sa(t),n=1<<r;e[r]=-1,t&=~n}}function Vk(e){if(pt&6)throw Error(be(327));rd();var t=bp(e,0);if(!(t&1))return $n(e,lr()),null;var r=$p(e,t);if(e.tag!==0&&r===2){var n=$y(e);n!==0&&(t=n,r=hv(e,n))}if(r===1)throw r=Eh,bl(e,0),ao(e,t),$n(e,lr()),r;if(r===6)throw Error(be(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ll(e,Dn,ai),$n(e,lr()),null}function ow(e,t){var r=pt;pt|=1;try{return e(t)}finally{pt=r,pt===0&&(yd=lr()+500,Og&&Ro())}}function Ll(e){oo!==null&&oo.tag===0&&!(pt&6)&&rd();var t=pt;pt|=1;var r=Ts.transition,n=kt;try{if(Ts.transition=null,kt=1,e)return e()}finally{kt=n,Ts.transition=r,pt=t,!(pt&6)&&Ro()}}function lw(){Zn=Gc.current,Ft(Gc)}function bl(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,jD(r)),mr!==null)for(r=mr.return;r!==null;){var n=r;switch(Hb(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Np();break;case 3:gd(),Ft(Rn),Ft(on),Xb();break;case 5:Kb(n);break;case 4:gd();break;case 13:Ft(Kt);break;case 19:Ft(Kt);break;case 10:qb(n.type._context);break;case 22:case 23:lw()}r=r.return}if(Lr=e,mr=e=_o(e.current,null),Ur=Zn=t,Nr=0,Eh=null,aw=Rg=Dl=0,Dn=rh=null,ml!==null){for(t=0;t<ml.length;t++)if(r=ml[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}ml=null}return e}function LE(e,t){do{var r=mr;try{if(Vb(),qm.current=Lp,Dp){for(var n=Qt.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Dp=!1}if(Ol=0,Or=kr=Qt=null,eh=!1,Nh=0,sw.current=null,r===null||r.return===null){Nr=1,Eh=t,mr=null;break}e:{var i=e,o=r.return,c=r,d=t;if(t=Ur,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var u=d,f=c,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var x=Ok(o);if(x!==null){x.flags&=-257,Dk(x,o,c,i,t),x.mode&1&&Mk(i,u,t),t=x,d=u;var v=t.updateQueue;if(v===null){var y=new Set;y.add(d),t.updateQueue=y}else v.add(d);break e}else{if(!(t&1)){Mk(i,u,t),cw();break e}d=Error(be(426))}}else if(Yt&&c.mode&1){var _=Ok(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Dk(_,o,c,i,t),Wb(xd(d,c));break e}}i=d=xd(d,c),Nr!==4&&(Nr=2),rh===null?rh=[i]:rh.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var w=xE(i,d,t);Nk(i,w);break e;case 1:c=d;var b=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(bo===null||!bo.has(N)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=yE(i,c,t);Nk(i,S);break e}}i=i.return}while(i!==null)}zE(r)}catch(C){t=C,mr===r&&r!==null&&(mr=r=r.return);continue}break}while(!0)}function AE(){var e=Ap.current;return Ap.current=Lp,e===null?Lp:e}function cw(){(Nr===0||Nr===3||Nr===2)&&(Nr=4),Lr===null||!(Dl&268435455)&&!(Rg&268435455)||ao(Lr,Ur)}function $p(e,t){var r=pt;pt|=2;var n=AE();(Lr!==e||Ur!==t)&&(ai=null,bl(e,t));do try{ZD();break}catch(a){LE(e,a)}while(!0);if(Vb(),pt=r,Ap.current=n,mr!==null)throw Error(be(261));return Lr=null,Ur=0,Nr}function ZD(){for(;mr!==null;)RE(mr)}function KD(){for(;mr!==null&&!wO();)RE(mr)}function RE(e){var t=IE(e.alternate,e,Zn);e.memoizedProps=e.pendingProps,t===null?zE(e):mr=t,sw.current=null}function zE(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=WD(r,t),r!==null){r.flags&=32767,mr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Nr=6,mr=null;return}}else if(r=HD(r,t,Zn),r!==null){mr=r;return}if(t=t.sibling,t!==null){mr=t;return}mr=t=e}while(t!==null);Nr===0&&(Nr=5)}function ll(e,t,r){var n=kt,a=Ts.transition;try{Ts.transition=null,kt=1,XD(e,t,r,n)}finally{Ts.transition=a,kt=n}return null}function XD(e,t,r,n){do rd();while(oo!==null);if(pt&6)throw Error(be(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(be(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(MO(e,i),e===Lr&&(mr=Lr=null,Ur=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||om||(om=!0,FE(vp,function(){return rd(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ts.transition,Ts.transition=null;var o=kt;kt=1;var c=pt;pt|=4,sw.current=null,VD(e,r),ME(r,e),xD(Uy),wp=!!Wy,Uy=Wy=null,e.current=r,qD(r),_O(),pt=c,kt=o,Ts.transition=i}else e.current=r;if(om&&(om=!1,oo=e,zp=a),i=e.pendingLanes,i===0&&(bo=null),NO(r.stateNode),$n(e,lr()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Rp)throw Rp=!1,e=dv,dv=null,e;return zp&1&&e.tag!==0&&rd(),i=e.pendingLanes,i&1?e===uv?nh++:(nh=0,uv=e):nh=0,Ro(),null}function rd(){if(oo!==null){var e=xC(zp),t=Ts.transition,r=kt;try{if(Ts.transition=null,kt=16>e?16:e,oo===null)var n=!1;else{if(e=oo,oo=null,zp=0,pt&6)throw Error(be(331));var a=pt;for(pt|=4,De=e.current;De!==null;){var i=De,o=i.child;if(De.flags&16){var c=i.deletions;if(c!==null){for(var d=0;d<c.length;d++){var u=c[d];for(De=u;De!==null;){var f=De;switch(f.tag){case 0:case 11:case 15:th(8,f,i)}var m=f.child;if(m!==null)m.return=f,De=m;else for(;De!==null;){f=De;var p=f.sibling,x=f.return;if(EE(f),f===u){De=null;break}if(p!==null){p.return=x,De=p;break}De=x}}}var v=i.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var _=y.sibling;y.sibling=null,y=_}while(y!==null)}}De=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,De=o;else e:for(;De!==null;){if(i=De,i.flags&2048)switch(i.tag){case 0:case 11:case 15:th(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,De=w;break e}De=i.return}}var b=e.current;for(De=b;De!==null;){o=De;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,De=N;else e:for(o=b;De!==null;){if(c=De,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Ag(9,c)}}catch(C){rr(c,c.return,C)}if(c===o){De=null;break e}var S=c.sibling;if(S!==null){S.return=c.return,De=S;break e}De=c.return}}if(pt=a,Ro(),Na&&typeof Na.onPostCommitFiberRoot=="function")try{Na.onPostCommitFiberRoot(Cg,e)}catch{}n=!0}return n}finally{kt=r,Ts.transition=t}}return!1}function qk(e,t,r){t=xd(r,t),t=xE(e,t,1),e=vo(e,t,1),t=jn(),e!==null&&(lf(e,1,t),$n(e,t))}function rr(e,t,r){if(e.tag===3)qk(e,e,r);else for(;t!==null;){if(t.tag===3){qk(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(bo===null||!bo.has(n))){e=xd(r,e),e=yE(t,e,1),t=vo(t,e,1),e=jn(),t!==null&&(lf(t,1,e),$n(t,e));break}}t=t.return}}function JD(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=jn(),e.pingedLanes|=e.suspendedLanes&r,Lr===e&&(Ur&r)===r&&(Nr===4||Nr===3&&(Ur&130023424)===Ur&&500>lr()-iw?bl(e,0):aw|=r),$n(e,t)}function $E(e,t){t===0&&(e.mode&1?(t=Xf,Xf<<=1,!(Xf&130023424)&&(Xf=4194304)):t=1);var r=jn();e=ki(e,t),e!==null&&(lf(e,t,r),$n(e,r))}function QD(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),$E(e,r)}function e6(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(be(314))}n!==null&&n.delete(t),$E(e,r)}var IE;IE=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Rn.current)An=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return An=!1,BD(e,t,r);An=!!(e.flags&131072)}else An=!1,Yt&&t.flags&1048576&&WC(t,Ep,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Gm(e,t),e=t.pendingProps;var a=fd(t,on.current);td(t,r),a=Qb(null,t,n,e,a,r);var i=ew();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,zn(n)?(i=!0,Sp(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Gb(t),a.updater=Lg,t.stateNode=a,a._reactInternals=t,Qy(t,n,e,r),t=rv(null,t,n,!0,i,r)):(t.tag=0,Yt&&i&&Bb(t),bn(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Gm(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=r6(n),e=Js(n,e),a){case 0:t=tv(null,t,n,e,r);break e;case 1:t=Rk(null,t,n,e,r);break e;case 11:t=Lk(null,t,n,e,r);break e;case 14:t=Ak(null,t,n,Js(n.type,e),r);break e}throw Error(be(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Js(n,a),tv(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Js(n,a),Rk(e,t,n,a,r);case 3:e:{if(_E(t),e===null)throw Error(be(387));n=t.pendingProps,i=t.memoizedState,a=i.element,ZC(e,t),Mp(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=xd(Error(be(423)),t),t=zk(e,t,n,r,a);break e}else if(n!==a){a=xd(Error(be(424)),t),t=zk(e,t,n,r,a);break e}else for(Qn=yo(t.stateNode.containerInfo.firstChild),es=t,Yt=!0,ra=null,r=YC(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(md(),n===a){t=ji(e,t,r);break e}bn(e,t,n,r)}t=t.child}return t;case 5:return KC(t),e===null&&Ky(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,Vy(n,a)?o=null:i!==null&&Vy(n,i)&&(t.flags|=32),wE(e,t),bn(e,t,o,r),t.child;case 6:return e===null&&Ky(t),null;case 13:return kE(e,t,r);case 4:return Zb(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=pd(t,null,n,r):bn(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Js(n,a),Lk(e,t,n,a,r);case 7:return bn(e,t,t.pendingProps,r),t.child;case 8:return bn(e,t,t.pendingProps.children,r),t.child;case 12:return bn(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Mt(Pp,n._currentValue),n._currentValue=o,i!==null)if(ia(i.value,o)){if(i.children===a.children&&!Rn.current){t=ji(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var d=c.firstContext;d!==null;){if(d.context===n){if(i.tag===1){d=pi(-1,r&-r),d.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?d.next=d:(d.next=f.next,f.next=d),u.pending=d}}i.lanes|=r,d=i.alternate,d!==null&&(d.lanes|=r),Xy(i.return,r,t),c.lanes|=r;break}d=d.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(be(341));o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),Xy(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}bn(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,td(t,r),a=Os(a),n=n(a),t.flags|=1,bn(e,t,n,r),t.child;case 14:return n=t.type,a=Js(n,t.pendingProps),a=Js(n.type,a),Ak(e,t,n,a,r);case 15:return vE(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Js(n,a),Gm(e,t),t.tag=1,zn(n)?(e=!0,Sp(t)):e=!1,td(t,r),gE(t,n,a),Qy(t,n,a,r),rv(null,t,n,!0,e,r);case 19:return jE(e,t,r);case 22:return bE(e,t,r)}throw Error(be(156,t.tag))};function FE(e,t){return fC(e,t)}function t6(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cs(e,t,r,n){return new t6(e,t,r,n)}function dw(e){return e=e.prototype,!(!e||!e.isReactComponent)}function r6(e){if(typeof e=="function")return dw(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Pb)return 11;if(e===Tb)return 14}return 2}function _o(e,t){var r=e.alternate;return r===null?(r=Cs(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Xm(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")dw(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case $c:return wl(r.children,a,i,t);case Eb:o=8,a|=8;break;case ky:return e=Cs(12,r,t,a|2),e.elementType=ky,e.lanes=i,e;case jy:return e=Cs(13,r,t,a),e.elementType=jy,e.lanes=i,e;case Ny:return e=Cs(19,r,t,a),e.elementType=Ny,e.lanes=i,e;case KS:return zg(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case GS:o=10;break e;case ZS:o=9;break e;case Pb:o=11;break e;case Tb:o=14;break e;case ro:o=16,n=null;break e}throw Error(be(130,e==null?e:typeof e,""))}return t=Cs(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function wl(e,t,r,n){return e=Cs(7,e,n,t),e.lanes=r,e}function zg(e,t,r,n){return e=Cs(22,e,n,t),e.elementType=KS,e.lanes=r,e.stateNode={isHidden:!1},e}function Tx(e,t,r){return e=Cs(6,e,null,t),e.lanes=r,e}function Mx(e,t,r){return t=Cs(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function n6(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ux(0),this.expirationTimes=ux(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ux(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function uw(e,t,r,n,a,i,o,c,d){return e=new n6(e,t,r,c,d),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Cs(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gb(i),e}function s6(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zc,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function BE(e){if(!e)return Eo;e=e._reactInternals;e:{if(ql(e)!==e||e.tag!==1)throw Error(be(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(zn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(be(171))}if(e.tag===1){var r=e.type;if(zn(r))return BC(e,r,t)}return t}function HE(e,t,r,n,a,i,o,c,d){return e=uw(r,n,!0,e,a,i,o,c,d),e.context=BE(null),r=e.current,n=jn(),a=wo(r),i=pi(n,a),i.callback=t??null,vo(r,i,a),e.current.lanes=a,lf(e,a,n),$n(e,n),e}function $g(e,t,r,n){var a=t.current,i=jn(),o=wo(a);return r=BE(r),t.context===null?t.context=r:t.pendingContext=r,t=pi(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=vo(a,t,o),e!==null&&(aa(e,a,o,i),Vm(e,a,o)),o}function Ip(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Yk(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function hw(e,t){Yk(e,t),(e=e.alternate)&&Yk(e,t)}function a6(){return null}var WE=typeof reportError=="function"?reportError:function(e){console.error(e)};function fw(e){this._internalRoot=e}Ig.prototype.render=fw.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(be(409));$g(e,t,null,null)};Ig.prototype.unmount=fw.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ll(function(){$g(null,e,null,null)}),t[_i]=null}};function Ig(e){this._internalRoot=e}Ig.prototype.unstable_scheduleHydration=function(e){if(e){var t=bC();e={blockedOn:null,target:e,priority:t};for(var r=0;r<so.length&&t!==0&&t<so[r].priority;r++);so.splice(r,0,e),r===0&&_C(e)}};function mw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Fg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Gk(){}function i6(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=Ip(o);i.call(u)}}var o=HE(t,n,e,0,null,!1,!1,"",Gk);return e._reactRootContainer=o,e[_i]=o.current,bh(e.nodeType===8?e.parentNode:e),Ll(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var c=n;n=function(){var u=Ip(d);c.call(u)}}var d=uw(e,0,!1,null,null,!1,!1,"",Gk);return e._reactRootContainer=d,e[_i]=d.current,bh(e.nodeType===8?e.parentNode:e),Ll(function(){$g(t,d,r,n)}),d}function Bg(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var c=a;a=function(){var d=Ip(o);c.call(d)}}$g(t,o,e,a)}else o=i6(r,t,e,a,n);return Ip(o)}yC=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=zu(t.pendingLanes);r!==0&&(Db(t,r|1),$n(t,lr()),!(pt&6)&&(yd=lr()+500,Ro()))}break;case 13:Ll(function(){var n=ki(e,1);if(n!==null){var a=jn();aa(n,e,1,a)}}),hw(e,1)}};Lb=function(e){if(e.tag===13){var t=ki(e,134217728);if(t!==null){var r=jn();aa(t,e,134217728,r)}hw(e,134217728)}};vC=function(e){if(e.tag===13){var t=wo(e),r=ki(e,t);if(r!==null){var n=jn();aa(r,e,t,n)}hw(e,t)}};bC=function(){return kt};wC=function(e,t){var r=kt;try{return kt=e,t()}finally{kt=r}};Ay=function(e,t,r){switch(t){case"input":if(Ey(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Mg(n);if(!a)throw Error(be(90));JS(n),Ey(n,a)}}}break;case"textarea":eC(e,r);break;case"select":t=r.value,t!=null&&Xc(e,!!r.multiple,t,!1)}};oC=ow;lC=Ll;var o6={usingClientEntryPoint:!1,Events:[df,Hc,Mg,aC,iC,ow]},vu={findFiberByHostInstance:fl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},l6={bundleType:vu.bundleType,version:vu.version,rendererPackageName:vu.rendererPackageName,rendererConfig:vu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ei.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=uC(e),e===null?null:e.stateNode},findFiberByHostInstance:vu.findFiberByHostInstance||a6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lm.isDisabled&&lm.supportsFiber)try{Cg=lm.inject(l6),Na=lm}catch{}}as.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o6;as.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mw(t))throw Error(be(200));return s6(e,t,null,r)};as.createRoot=function(e,t){if(!mw(e))throw Error(be(299));var r=!1,n="",a=WE;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=uw(e,1,!1,null,null,r,!1,n,a),e[_i]=t.current,bh(e.nodeType===8?e.parentNode:e),new fw(t)};as.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(be(188)):(e=Object.keys(e).join(","),Error(be(268,e)));return e=uC(t),e=e===null?null:e.stateNode,e};as.flushSync=function(e){return Ll(e)};as.hydrate=function(e,t,r){if(!Fg(t))throw Error(be(200));return Bg(null,e,t,!0,r)};as.hydrateRoot=function(e,t,r){if(!mw(e))throw Error(be(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=WE;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=HE(t,null,e,1,r??null,a,!1,i,o),e[_i]=t.current,bh(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Ig(t)};as.render=function(e,t,r){if(!Fg(t))throw Error(be(200));return Bg(null,e,t,!1,r)};as.unmountComponentAtNode=function(e){if(!Fg(e))throw Error(be(40));return e._reactRootContainer?(Ll(function(){Bg(null,null,e,!1,function(){e._reactRootContainer=null,e[_i]=null})}),!0):!1};as.unstable_batchedUpdates=ow;as.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Fg(r))throw Error(be(200));if(e==null||e._reactInternals===void 0)throw Error(be(38));return Bg(e,t,r,!1,n)};as.version="18.3.1-next-f1338f8080-20240426";function UE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(UE)}catch(e){console.error(e)}}UE(),US.exports=as;var zd=US.exports;const Hg=Yr(zd);var Zk=zd;wy.createRoot=Zk.createRoot,wy.hydrateRoot=Zk.hydrateRoot;const VE=E.createContext(null),Ht=()=>{const e=E.useContext(VE);if(!e)throw new Error("useToast must be used within ToastProvider");return e},c6=({children:e})=>{const[t,r]=E.useState([]),n=E.useCallback((o,c="info",d=4e3)=>{const u=Date.now()+Math.random(),f={id:u,message:o,type:c,duration:d};return r(m=>[...m,f]),d>0&&setTimeout(()=>{a(u)},d),u},[]),a=E.useCallback(o=>{r(c=>c.filter(d=>d.id!==o))},[]),i={success:(o,c)=>n(o,"success",c),error:(o,c)=>n(o,"error",c),warning:(o,c)=>n(o,"warning",c),info:(o,c)=>n(o,"info",c)};return s.jsxs(VE.Provider,{value:i,children:[e,s.jsx(d6,{toasts:t,onRemove:a})]})},d6=({toasts:e,onRemove:t})=>s.jsx("div",{className:"toast-container",children:e.map(r=>s.jsx(u6,{message:r.message,type:r.type,onClose:()=>t(r.id)},r.id))}),u6=({message:e,type:t,onClose:r})=>{const n={success:"",error:"",warning:"",info:""},a={success:"bg-green-500",error:"bg-red-500",warning:"bg-yellow-500",info:"bg-blue-500"};return s.jsxs("div",{className:`toast toast-${t} animate-slide-in`,children:[s.jsx("div",{className:`toast-icon ${a[t]}`,children:n[t]}),s.jsx("div",{className:"toast-message",children:e}),s.jsx("button",{className:"toast-close",onClick:r,children:""})]})},Y="http://localhost:3002/api",h6="http://localhost:3002/api".replace("/api","")||"http://localhost:3002",f6=h6;var qE={exports:{}};/*!
 * Pusher JavaScript Library v8.4.0
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */(function(e,t){(function(n,a){e.exports=a()})(window,function(){return function(r){var n={};function a(i){if(n[i])return n[i].exports;var o=n[i]={i,l:!1,exports:{}};return r[i].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=r,a.c=n,a.d=function(i,o,c){a.o(i,o)||Object.defineProperty(i,o,{enumerable:!0,get:c})},a.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},a.t=function(i,o){if(o&1&&(i=a(i)),o&8||o&4&&typeof i=="object"&&i&&i.__esModule)return i;var c=Object.create(null);if(a.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:i}),o&2&&typeof i!="string")for(var d in i)a.d(c,d,(function(u){return i[u]}).bind(null,d));return c},a.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(o,"a",o),o},a.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},a.p="",a(a.s=2)}([function(r,n,a){var i=this&&this.__extends||function(){var y=function(_,w){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,N){b.__proto__=N}||function(b,N){for(var S in N)N.hasOwnProperty(S)&&(b[S]=N[S])},y(_,w)};return function(_,w){y(_,w);function b(){this.constructor=_}_.prototype=w===null?Object.create(w):(b.prototype=w.prototype,new b)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=256,c=function(){function y(_){_===void 0&&(_="="),this._paddingCharacter=_}return y.prototype.encodedLength=function(_){return this._paddingCharacter?(_+2)/3*4|0:(_*8+5)/6|0},y.prototype.encode=function(_){for(var w="",b=0;b<_.length-2;b+=3){var N=_[b]<<16|_[b+1]<<8|_[b+2];w+=this._encodeByte(N>>>3*6&63),w+=this._encodeByte(N>>>2*6&63),w+=this._encodeByte(N>>>1*6&63),w+=this._encodeByte(N>>>0*6&63)}var S=_.length-b;if(S>0){var N=_[b]<<16|(S===2?_[b+1]<<8:0);w+=this._encodeByte(N>>>3*6&63),w+=this._encodeByte(N>>>2*6&63),S===2?w+=this._encodeByte(N>>>1*6&63):w+=this._paddingCharacter||"",w+=this._paddingCharacter||""}return w},y.prototype.maxDecodedLength=function(_){return this._paddingCharacter?_/4*3|0:(_*6+7)/8|0},y.prototype.decodedLength=function(_){return this.maxDecodedLength(_.length-this._getPaddingLength(_))},y.prototype.decode=function(_){if(_.length===0)return new Uint8Array(0);for(var w=this._getPaddingLength(_),b=_.length-w,N=new Uint8Array(this.maxDecodedLength(b)),S=0,C=0,O=0,A=0,z=0,$=0,W=0;C<b-4;C+=4)A=this._decodeChar(_.charCodeAt(C+0)),z=this._decodeChar(_.charCodeAt(C+1)),$=this._decodeChar(_.charCodeAt(C+2)),W=this._decodeChar(_.charCodeAt(C+3)),N[S++]=A<<2|z>>>4,N[S++]=z<<4|$>>>2,N[S++]=$<<6|W,O|=A&o,O|=z&o,O|=$&o,O|=W&o;if(C<b-1&&(A=this._decodeChar(_.charCodeAt(C)),z=this._decodeChar(_.charCodeAt(C+1)),N[S++]=A<<2|z>>>4,O|=A&o,O|=z&o),C<b-2&&($=this._decodeChar(_.charCodeAt(C+2)),N[S++]=z<<4|$>>>2,O|=$&o),C<b-3&&(W=this._decodeChar(_.charCodeAt(C+3)),N[S++]=$<<6|W,O|=W&o),O!==0)throw new Error("Base64Coder: incorrect characters for decoding");return N},y.prototype._encodeByte=function(_){var w=_;return w+=65,w+=25-_>>>8&6,w+=51-_>>>8&-75,w+=61-_>>>8&-15,w+=62-_>>>8&3,String.fromCharCode(w)},y.prototype._decodeChar=function(_){var w=o;return w+=(42-_&_-44)>>>8&-o+_-43+62,w+=(46-_&_-48)>>>8&-o+_-47+63,w+=(47-_&_-58)>>>8&-o+_-48+52,w+=(64-_&_-91)>>>8&-o+_-65+0,w+=(96-_&_-123)>>>8&-o+_-97+26,w},y.prototype._getPaddingLength=function(_){var w=0;if(this._paddingCharacter){for(var b=_.length-1;b>=0&&_[b]===this._paddingCharacter;b--)w++;if(_.length<4||w>2)throw new Error("Base64Coder: incorrect padding")}return w},y}();n.Coder=c;var d=new c;function u(y){return d.encode(y)}n.encode=u;function f(y){return d.decode(y)}n.decode=f;var m=function(y){i(_,y);function _(){return y!==null&&y.apply(this,arguments)||this}return _.prototype._encodeByte=function(w){var b=w;return b+=65,b+=25-w>>>8&6,b+=51-w>>>8&-75,b+=61-w>>>8&-13,b+=62-w>>>8&49,String.fromCharCode(b)},_.prototype._decodeChar=function(w){var b=o;return b+=(44-w&w-46)>>>8&-o+w-45+62,b+=(94-w&w-96)>>>8&-o+w-95+63,b+=(47-w&w-58)>>>8&-o+w-48+52,b+=(64-w&w-91)>>>8&-o+w-65+0,b+=(96-w&w-123)>>>8&-o+w-97+26,b},_}(c);n.URLSafeCoder=m;var p=new m;function x(y){return p.encode(y)}n.encodeURLSafe=x;function v(y){return p.decode(y)}n.decodeURLSafe=v,n.encodedLength=function(y){return d.encodedLength(y)},n.maxDecodedLength=function(y){return d.maxDecodedLength(y)},n.decodedLength=function(y){return d.decodedLength(y)}},function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i="utf8: invalid string",o="utf8: invalid source encoding";function c(f){for(var m=new Uint8Array(d(f)),p=0,x=0;x<f.length;x++){var v=f.charCodeAt(x);v<128?m[p++]=v:v<2048?(m[p++]=192|v>>6,m[p++]=128|v&63):v<55296?(m[p++]=224|v>>12,m[p++]=128|v>>6&63,m[p++]=128|v&63):(x++,v=(v&1023)<<10,v|=f.charCodeAt(x)&1023,v+=65536,m[p++]=240|v>>18,m[p++]=128|v>>12&63,m[p++]=128|v>>6&63,m[p++]=128|v&63)}return m}n.encode=c;function d(f){for(var m=0,p=0;p<f.length;p++){var x=f.charCodeAt(p);if(x<128)m+=1;else if(x<2048)m+=2;else if(x<55296)m+=3;else if(x<=57343){if(p>=f.length-1)throw new Error(i);p++,m+=4}else throw new Error(i)}return m}n.encodedLength=d;function u(f){for(var m=[],p=0;p<f.length;p++){var x=f[p];if(x&128){var v=void 0;if(x<224){if(p>=f.length)throw new Error(o);var y=f[++p];if((y&192)!==128)throw new Error(o);x=(x&31)<<6|y&63,v=128}else if(x<240){if(p>=f.length-1)throw new Error(o);var y=f[++p],_=f[++p];if((y&192)!==128||(_&192)!==128)throw new Error(o);x=(x&15)<<12|(y&63)<<6|_&63,v=2048}else if(x<248){if(p>=f.length-2)throw new Error(o);var y=f[++p],_=f[++p],w=f[++p];if((y&192)!==128||(_&192)!==128||(w&192)!==128)throw new Error(o);x=(x&15)<<18|(y&63)<<12|(_&63)<<6|w&63,v=65536}else throw new Error(o);if(x<v||x>=55296&&x<=57343)throw new Error(o);if(x>=65536){if(x>1114111)throw new Error(o);x-=65536,m.push(String.fromCharCode(55296|x>>10)),x=56320|x&1023}}m.push(String.fromCharCode(x))}return m.join("")}n.decode=u},function(r,n,a){r.exports=a(3).default},function(r,n,a){a.r(n);class i{constructor(j,T){this.lastId=0,this.prefix=j,this.name=T}create(j){this.lastId++;var T=this.lastId,I=this.prefix+T,U=this.name+"["+T+"]",M=!1,H=function(){M||(j.apply(null,arguments),M=!0)};return this[T]=H,{number:T,id:I,name:U,callback:H}}remove(j){delete this[j.number]}}var o=new i("_pusher_script_","Pusher.ScriptReceivers"),c={VERSION:"8.4.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},d=c;class u{constructor(j){this.options=j,this.receivers=j.receivers||o,this.loading={}}load(j,T,I){var U=this;if(U.loading[j]&&U.loading[j].length>0)U.loading[j].push(I);else{U.loading[j]=[I];var M=Be.createScriptRequest(U.getPath(j,T)),H=U.receivers.create(function(ne){if(U.receivers.remove(H),U.loading[j]){var xe=U.loading[j];delete U.loading[j];for(var Te=function(Vt){Vt||M.cleanup()},Ve=0;Ve<xe.length;Ve++)xe[Ve](ne,Te)}});M.send(H)}}getRoot(j){var T,I=Be.getDocument().location.protocol;return j&&j.useTLS||I==="https:"?T=this.options.cdn_https:T=this.options.cdn_http,T.replace(/\/*$/,"")+"/"+this.options.version}getPath(j,T){return this.getRoot(T)+"/"+j+this.options.suffix+".js"}}var f=new i("_pusher_dependencies","Pusher.DependenciesReceivers"),m=new u({cdn_http:d.cdn_http,cdn_https:d.cdn_https,version:d.VERSION,suffix:d.dependency_suffix,receivers:f});const p={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}};var v={buildLogSuffix:function(D){const j="See:",T=p.urls[D];if(!T)return"";let I;return T.fullUrl?I=T.fullUrl:T.path&&(I=p.baseUrl+T.path),I?`${j} ${I}`:""}},y;(function(D){D.UserAuthentication="user-authentication",D.ChannelAuthorization="channel-authorization"})(y||(y={}));class _ extends Error{constructor(j){super(j),Object.setPrototypeOf(this,new.target.prototype)}}class w extends Error{constructor(j){super(j),Object.setPrototypeOf(this,new.target.prototype)}}class b extends Error{constructor(j){super(j),Object.setPrototypeOf(this,new.target.prototype)}}class N extends Error{constructor(j){super(j),Object.setPrototypeOf(this,new.target.prototype)}}class S extends Error{constructor(j){super(j),Object.setPrototypeOf(this,new.target.prototype)}}class C extends Error{constructor(j){super(j),Object.setPrototypeOf(this,new.target.prototype)}}class O extends Error{constructor(j){super(j),Object.setPrototypeOf(this,new.target.prototype)}}class A extends Error{constructor(j){super(j),Object.setPrototypeOf(this,new.target.prototype)}}class z extends Error{constructor(j,T){super(T),this.status=j,Object.setPrototypeOf(this,new.target.prototype)}}var W=function(D,j,T,I,U){const M=Be.createXHR();M.open("POST",T.endpoint,!0),M.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var H in T.headers)M.setRequestHeader(H,T.headers[H]);if(T.headersProvider!=null){let ne=T.headersProvider();for(var H in ne)M.setRequestHeader(H,ne[H])}return M.onreadystatechange=function(){if(M.readyState===4)if(M.status===200){let ne,xe=!1;try{ne=JSON.parse(M.responseText),xe=!0}catch{U(new z(200,`JSON returned from ${I.toString()} endpoint was invalid, yet status code was 200. Data was: ${M.responseText}`),null)}xe&&U(null,ne)}else{let ne="";switch(I){case y.UserAuthentication:ne=v.buildLogSuffix("authenticationEndpoint");break;case y.ChannelAuthorization:ne=`Clients must be authorized to join private or presence channels. ${v.buildLogSuffix("authorizationEndpoint")}`;break}U(new z(M.status,`Unable to retrieve auth string from ${I.toString()} endpoint - received status: ${M.status} from ${T.endpoint}. ${ne}`),null)}},M.send(j),M};function F(D){return pe(oe(D))}var G=String.fromCharCode,ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K=function(D){var j=D.charCodeAt(0);return j<128?D:j<2048?G(192|j>>>6)+G(128|j&63):G(224|j>>>12&15)+G(128|j>>>6&63)+G(128|j&63)},oe=function(D){return D.replace(/[^\x00-\x7F]/g,K)},Z=function(D){var j=[0,2,1][D.length%3],T=D.charCodeAt(0)<<16|(D.length>1?D.charCodeAt(1):0)<<8|(D.length>2?D.charCodeAt(2):0),I=[ee.charAt(T>>>18),ee.charAt(T>>>12&63),j>=2?"=":ee.charAt(T>>>6&63),j>=1?"=":ee.charAt(T&63)];return I.join("")},pe=window.btoa||function(D){return D.replace(/[\s\S]{1,3}/g,Z)};class Q{constructor(j,T,I,U){this.clear=T,this.timer=j(()=>{this.timer&&(this.timer=U(this.timer))},I)}isRunning(){return this.timer!==null}ensureAborted(){this.timer&&(this.clear(this.timer),this.timer=null)}}var ce=Q;function le(D){window.clearTimeout(D)}function B(D){window.clearInterval(D)}class X extends ce{constructor(j,T){super(setTimeout,le,j,function(I){return T(),null})}}class ae extends ce{constructor(j,T){super(setInterval,B,j,function(I){return T(),I})}}var fe={now(){return Date.now?Date.now():new Date().valueOf()},defer(D){return new X(0,D)},method(D,...j){var T=Array.prototype.slice.call(arguments,1);return function(I){return I[D].apply(I,T.concat(arguments))}}},re=fe;function ge(D,...j){for(var T=0;T<j.length;T++){var I=j[T];for(var U in I)I[U]&&I[U].constructor&&I[U].constructor===Object?D[U]=ge(D[U]||{},I[U]):D[U]=I[U]}return D}function Oe(){for(var D=["Pusher"],j=0;j<arguments.length;j++)typeof arguments[j]=="string"?D.push(arguments[j]):D.push(vt(arguments[j]));return D.join(" : ")}function me(D,j){var T=Array.prototype.indexOf;if(D===null)return-1;if(T&&D.indexOf===T)return D.indexOf(j);for(var I=0,U=D.length;I<U;I++)if(D[I]===j)return I;return-1}function _e(D,j){for(var T in D)Object.prototype.hasOwnProperty.call(D,T)&&j(D[T],T,D)}function $e(D){var j=[];return _e(D,function(T,I){j.push(I)}),j}function Pe(D){var j=[];return _e(D,function(T){j.push(T)}),j}function Le(D,j,T){for(var I=0;I<D.length;I++)j.call(T||window,D[I],I,D)}function Ge(D,j){for(var T=[],I=0;I<D.length;I++)T.push(j(D[I],I,D,T));return T}function et(D,j){var T={};return _e(D,function(I,U){T[U]=j(I)}),T}function ue(D,j){j=j||function(U){return!!U};for(var T=[],I=0;I<D.length;I++)j(D[I],I,D,T)&&T.push(D[I]);return T}function Ae(D,j){var T={};return _e(D,function(I,U){(j&&j(I,U,D,T)||I)&&(T[U]=I)}),T}function lt(D){var j=[];return _e(D,function(T,I){j.push([I,T])}),j}function Ke(D,j){for(var T=0;T<D.length;T++)if(j(D[T],T,D))return!0;return!1}function V(D,j){for(var T=0;T<D.length;T++)if(!j(D[T],T,D))return!1;return!0}function st(D){return et(D,function(j){return typeof j=="object"&&(j=vt(j)),encodeURIComponent(F(j.toString()))})}function Ut(D){var j=Ae(D,function(I){return I!==void 0}),T=Ge(lt(st(j)),re.method("join","=")).join("&");return T}function br(D){var j=[],T=[];return function I(U,M){var H,ne,xe;switch(typeof U){case"object":if(!U)return null;for(H=0;H<j.length;H+=1)if(j[H]===U)return{$ref:T[H]};if(j.push(U),T.push(M),Object.prototype.toString.apply(U)==="[object Array]")for(xe=[],H=0;H<U.length;H+=1)xe[H]=I(U[H],M+"["+H+"]");else{xe={};for(ne in U)Object.prototype.hasOwnProperty.call(U,ne)&&(xe[ne]=I(U[ne],M+"["+JSON.stringify(ne)+"]"))}return xe;case"number":case"string":case"boolean":return U}}(D,"$")}function vt(D){try{return JSON.stringify(D)}catch{return JSON.stringify(br(D))}}class se{constructor(){this.globalLog=j=>{window.console&&window.console.log&&window.console.log(j)}}debug(...j){this.log(this.globalLog,j)}warn(...j){this.log(this.globalLogWarn,j)}error(...j){this.log(this.globalLogError,j)}globalLogWarn(j){window.console&&window.console.warn?window.console.warn(j):this.globalLog(j)}globalLogError(j){window.console&&window.console.error?window.console.error(j):this.globalLogWarn(j)}log(j,...T){var I=Oe.apply(this,arguments);Zi.log?Zi.log(I):Zi.logToConsole&&j.bind(this)(I)}}var Se=new se,dr=function(D,j,T,I,U){(T.headers!==void 0||T.headersProvider!=null)&&Se.warn(`To send headers with the ${I.toString()} request, you must use AJAX, rather than JSONP.`);var M=D.nextAuthCallbackID.toString();D.nextAuthCallbackID++;var H=D.getDocument(),ne=H.createElement("script");D.auth_callbacks[M]=function(Ve){U(null,Ve)};var xe="Pusher.auth_callbacks['"+M+"']";ne.src=T.endpoint+"?callback="+encodeURIComponent(xe)+"&"+j;var Te=H.getElementsByTagName("head")[0]||H.documentElement;Te.insertBefore(ne,Te.firstChild)},un=dr;class Pr{constructor(j){this.src=j}send(j){var T=this,I="Error loading "+T.src;T.script=document.createElement("script"),T.script.id=j.id,T.script.src=T.src,T.script.type="text/javascript",T.script.charset="UTF-8",T.script.addEventListener?(T.script.onerror=function(){j.callback(I)},T.script.onload=function(){j.callback(null)}):T.script.onreadystatechange=function(){(T.script.readyState==="loaded"||T.script.readyState==="complete")&&j.callback(null)},T.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(T.errorScript=document.createElement("script"),T.errorScript.id=j.id+"_error",T.errorScript.text=j.name+"('"+I+"');",T.script.async=T.errorScript.async=!1):T.script.async=!0;var U=document.getElementsByTagName("head")[0];U.insertBefore(T.script,U.firstChild),T.errorScript&&U.insertBefore(T.errorScript,T.script.nextSibling)}cleanup(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null}}class ls{constructor(j,T){this.url=j,this.data=T}send(j){if(!this.request){var T=Ut(this.data),I=this.url+"/"+j.number+"?"+T;this.request=Be.createScriptRequest(I),this.request.send(j)}}cleanup(){this.request&&this.request.cleanup()}}var cs=function(D,j){return function(T,I){var U="http"+(j?"s":"")+"://",M=U+(D.host||D.options.host)+D.options.path,H=Be.createJSONPRequest(M,T),ne=Be.ScriptReceivers.create(function(xe,Te){o.remove(ne),H.cleanup(),Te&&Te.host&&(D.host=Te.host),I&&I(xe,Te)});H.send(ne)}},gt={name:"jsonp",getAgent:cs},$a=gt;function tr(D,j,T){var I=D+(j.useTLS?"s":""),U=j.useTLS?j.hostTLS:j.hostNonTLS;return I+"://"+U+T}function wr(D,j){var T="/app/"+D,I="?protocol="+d.PROTOCOL+"&client=js&version="+d.VERSION+(j?"&"+j:"");return T+I}var Gt={getInitial:function(D,j){var T=(j.httpPath||"")+wr(D,"flash=false");return tr("ws",j,T)}},Ai={getInitial:function(D,j){var T=(j.httpPath||"/pusher")+wr(D);return tr("http",j,T)}},de={getInitial:function(D,j){return tr("http",j,j.httpPath||"/pusher")},getPath:function(D,j){return wr(D)}};class Ie{constructor(){this._callbacks={}}get(j){return this._callbacks[He(j)]}add(j,T,I){var U=He(j);this._callbacks[U]=this._callbacks[U]||[],this._callbacks[U].push({fn:T,context:I})}remove(j,T,I){if(!j&&!T&&!I){this._callbacks={};return}var U=j?[He(j)]:$e(this._callbacks);T||I?this.removeCallback(U,T,I):this.removeAllCallbacks(U)}removeCallback(j,T,I){Le(j,function(U){this._callbacks[U]=ue(this._callbacks[U]||[],function(M){return T&&T!==M.fn||I&&I!==M.context}),this._callbacks[U].length===0&&delete this._callbacks[U]},this)}removeAllCallbacks(j){Le(j,function(T){delete this._callbacks[T]},this)}}function He(D){return"_"+D}class mt{constructor(j){this.callbacks=new Ie,this.global_callbacks=[],this.failThrough=j}bind(j,T,I){return this.callbacks.add(j,T,I),this}bind_global(j){return this.global_callbacks.push(j),this}unbind(j,T,I){return this.callbacks.remove(j,T,I),this}unbind_global(j){return j?(this.global_callbacks=ue(this.global_callbacks||[],T=>T!==j),this):(this.global_callbacks=[],this)}unbind_all(){return this.unbind(),this.unbind_global(),this}emit(j,T,I){for(var U=0;U<this.global_callbacks.length;U++)this.global_callbacks[U](j,T);var M=this.callbacks.get(j),H=[];if(I?H.push(T,I):T&&H.push(T),M&&M.length>0)for(var U=0;U<M.length;U++)M[U].fn.apply(M[U].context||window,H);else this.failThrough&&this.failThrough(j,T);return this}}class Ia extends mt{constructor(j,T,I,U,M){super(),this.initialize=Be.transportConnectionInitializer,this.hooks=j,this.name=T,this.priority=I,this.key=U,this.options=M,this.state="new",this.timeline=M.timeline,this.activityTimeout=M.activityTimeout,this.id=this.timeline.generateUniqueID()}handlesActivityChecks(){return!!this.hooks.handlesActivityChecks}supportsPing(){return!!this.hooks.supportsPing}connect(){if(this.socket||this.state!=="initialized")return!1;var j=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(j,this.options)}catch(T){return re.defer(()=>{this.onError(T),this.changeState("closed")}),!1}return this.bindListeners(),Se.debug("Connecting",{transport:this.name,url:j}),this.changeState("connecting"),!0}close(){return this.socket?(this.socket.close(),!0):!1}send(j){return this.state==="open"?(re.defer(()=>{this.socket&&this.socket.send(j)}),!0):!1}ping(){this.state==="open"&&this.supportsPing()&&this.socket.ping()}onOpen(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0}onError(j){this.emit("error",{type:"WebSocketError",error:j}),this.timeline.error(this.buildTimelineMessage({error:j.toString()}))}onClose(j){j?this.changeState("closed",{code:j.code,reason:j.reason,wasClean:j.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0}onMessage(j){this.emit("message",j)}onActivity(){this.emit("activity")}bindListeners(){this.socket.onopen=()=>{this.onOpen()},this.socket.onerror=j=>{this.onError(j)},this.socket.onclose=j=>{this.onClose(j)},this.socket.onmessage=j=>{this.onMessage(j)},this.supportsPing()&&(this.socket.onactivity=()=>{this.onActivity()})}unbindListeners(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))}changeState(j,T){this.state=j,this.timeline.info(this.buildTimelineMessage({state:j,params:T})),this.emit(j,T)}buildTimelineMessage(j){return ge({cid:this.id},j)}}class ur{constructor(j){this.hooks=j}isSupported(j){return this.hooks.isSupported(j)}createConnection(j,T,I,U){return new Ia(this.hooks,j,T,I,U)}}var Bs=new ur({urls:Gt,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!Be.getWebSocketAPI()},isSupported:function(){return!!Be.getWebSocketAPI()},getSocket:function(D){return Be.createWebSocket(D)}}),Ql={urls:Ai,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},Ri=ge({getSocket:function(D){return Be.HTTPFactory.createStreamingSocket(D)}},Ql),ec=ge({getSocket:function(D){return Be.HTTPFactory.createPollingSocket(D)}},Ql),ds={isSupported:function(){return Be.isXHRSupported()}},Hs=new ur(ge({},Ri,ds)),zi=new ur(ge({},ec,ds)),tc={ws:Bs,xhr_streaming:Hs,xhr_polling:zi},Cn=tc,tu=new ur({file:"sockjs",urls:de,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(D,j){return new window.SockJS(D,null,{js_path:m.getPath("sockjs",{useTLS:j.useTLS}),ignore_null_origin:j.ignoreNullOrigin})},beforeOpen:function(D,j){D.send(JSON.stringify({path:j}))}}),ru={isSupported:function(D){var j=Be.isXDRSupported(D.useTLS);return j}},hn=new ur(ge({},Ri,ru)),Re=new ur(ge({},ec,ru));Cn.xdr_streaming=hn,Cn.xdr_polling=Re,Cn.sockjs=tu;var rc=Cn;class nc extends mt{constructor(){super();var j=this;window.addEventListener!==void 0&&(window.addEventListener("online",function(){j.emit("online")},!1),window.addEventListener("offline",function(){j.emit("offline")},!1))}isOnline(){return window.navigator.onLine===void 0?!0:window.navigator.onLine}}var Fa=new nc;class Tr{constructor(j,T,I){this.manager=j,this.transport=T,this.minPingDelay=I.minPingDelay,this.maxPingDelay=I.maxPingDelay,this.pingDelay=void 0}createConnection(j,T,I,U){U=ge({},U,{activityTimeout:this.pingDelay});var M=this.transport.createConnection(j,T,I,U),H=null,ne=function(){M.unbind("open",ne),M.bind("closed",xe),H=re.now()},xe=Te=>{if(M.unbind("closed",xe),Te.code===1002||Te.code===1003)this.manager.reportDeath();else if(!Te.wasClean&&H){var Ve=re.now()-H;Ve<2*this.maxPingDelay&&(this.manager.reportDeath(),this.pingDelay=Math.max(Ve/2,this.minPingDelay))}};return M.bind("open",ne),M}isSupported(j){return this.manager.isAlive()&&this.transport.isSupported(j)}}const Ws={decodeMessage:function(D){try{var j=JSON.parse(D.data),T=j.data;if(typeof T=="string")try{T=JSON.parse(j.data)}catch{}var I={event:j.event,channel:j.channel,data:T};return j.user_id&&(I.user_id=j.user_id),I}catch(U){throw{type:"MessageParseError",error:U,data:D.data}}},encodeMessage:function(D){return JSON.stringify(D)},processHandshake:function(D){var j=Ws.decodeMessage(D);if(j.event==="pusher:connection_established"){if(!j.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:j.data.socket_id,activityTimeout:j.data.activity_timeout*1e3}}else{if(j.event==="pusher:error")return{action:this.getCloseAction(j.data),error:this.getCloseError(j.data)};throw"Invalid handshake"}},getCloseAction:function(D){return D.code<4e3?D.code>=1002&&D.code<=1004?"backoff":null:D.code===4e3?"tls_only":D.code<4100?"refused":D.code<4200?"backoff":D.code<4300?"retry":"refused"},getCloseError:function(D){return D.code!==1e3&&D.code!==1001?{type:"PusherError",data:{code:D.code,message:D.reason||D.message}}:null}};var us=Ws;class hs extends mt{constructor(j,T){super(),this.id=j,this.transport=T,this.activityTimeout=T.activityTimeout,this.bindListeners()}handlesActivityChecks(){return this.transport.handlesActivityChecks()}send(j){return this.transport.send(j)}send_event(j,T,I){var U={event:j,data:T};return I&&(U.channel=I),Se.debug("Event sent",U),this.send(us.encodeMessage(U))}ping(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})}close(){this.transport.close()}bindListeners(){var j={message:I=>{var U;try{U=us.decodeMessage(I)}catch(M){this.emit("error",{type:"MessageParseError",error:M,data:I.data})}if(U!==void 0){switch(Se.debug("Event recd",U),U.event){case"pusher:error":this.emit("error",{type:"PusherError",data:U.data});break;case"pusher:ping":this.emit("ping");break;case"pusher:pong":this.emit("pong");break}this.emit("message",U)}},activity:()=>{this.emit("activity")},error:I=>{this.emit("error",I)},closed:I=>{T(),I&&I.code&&this.handleCloseEvent(I),this.transport=null,this.emit("closed")}},T=()=>{_e(j,(I,U)=>{this.transport.unbind(U,I)})};_e(j,(I,U)=>{this.transport.bind(U,I)})}handleCloseEvent(j){var T=us.getCloseAction(j),I=us.getCloseError(j);I&&this.emit("error",I),T&&this.emit(T,{action:T,error:I})}}class Fo{constructor(j,T){this.transport=j,this.callback=T,this.bindListeners()}close(){this.unbindListeners(),this.transport.close()}bindListeners(){this.onMessage=j=>{this.unbindListeners();var T;try{T=us.processHandshake(j)}catch(I){this.finish("error",{error:I}),this.transport.close();return}T.action==="connected"?this.finish("connected",{connection:new hs(T.id,this.transport),activityTimeout:T.activityTimeout}):(this.finish(T.action,{error:T.error}),this.transport.close())},this.onClosed=j=>{this.unbindListeners();var T=us.getCloseAction(j)||"backoff",I=us.getCloseError(j);this.finish(T,{error:I})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)}unbindListeners(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)}finish(j,T){this.callback(ge({transport:this.transport,action:j},T))}}class Bo{constructor(j,T){this.timeline=j,this.options=T||{}}send(j,T){this.timeline.isEmpty()||this.timeline.send(Be.TimelineTransport.getAgent(this,j),T)}}class Hn extends mt{constructor(j,T){super(function(I,U){Se.debug("No callbacks on "+j+" for "+I)}),this.name=j,this.pusher=T,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}authorize(j,T){return T(null,{auth:""})}trigger(j,T){if(j.indexOf("client-")!==0)throw new _("Event '"+j+"' does not start with 'client-'");if(!this.subscribed){var I=v.buildLogSuffix("triggeringClientEvents");Se.warn(`Client event triggered before channel 'subscription_succeeded' event . ${I}`)}return this.pusher.send_event(j,T,this.name)}disconnect(){this.subscribed=!1,this.subscriptionPending=!1}handleEvent(j){var T=j.event,I=j.data;if(T==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(j);else if(T==="pusher_internal:subscription_count")this.handleSubscriptionCountEvent(j);else if(T.indexOf("pusher_internal:")!==0){var U={};this.emit(T,I,U)}}handleSubscriptionSucceededEvent(j){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",j.data)}handleSubscriptionCountEvent(j){j.data.subscription_count&&(this.subscriptionCount=j.data.subscription_count),this.emit("pusher:subscription_count",j.data)}subscribe(){this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(j,T)=>{j?(this.subscriptionPending=!1,Se.error(j.toString()),this.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:j.message},j instanceof z?{status:j.status}:{}))):this.pusher.send_event("pusher:subscribe",{auth:T.auth,channel_data:T.channel_data,channel:this.name})}))}unsubscribe(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})}cancelSubscription(){this.subscriptionCancelled=!0}reinstateSubscription(){this.subscriptionCancelled=!1}}class Us extends Hn{authorize(j,T){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:j},T)}}class fs{constructor(){this.reset()}get(j){return Object.prototype.hasOwnProperty.call(this.members,j)?{id:j,info:this.members[j]}:null}each(j){_e(this.members,(T,I)=>{j(this.get(I))})}setMyID(j){this.myID=j}onSubscription(j){this.members=j.presence.hash,this.count=j.presence.count,this.me=this.get(this.myID)}addMember(j){return this.get(j.user_id)===null&&this.count++,this.members[j.user_id]=j.user_info,this.get(j.user_id)}removeMember(j){var T=this.get(j.user_id);return T&&(delete this.members[j.user_id],this.count--),T}reset(){this.members={},this.count=0,this.myID=null,this.me=null}}var $i=function(D,j,T,I){function U(M){return M instanceof T?M:new T(function(H){H(M)})}return new(T||(T=Promise))(function(M,H){function ne(Ve){try{Te(I.next(Ve))}catch(Vt){H(Vt)}}function xe(Ve){try{Te(I.throw(Ve))}catch(Vt){H(Vt)}}function Te(Ve){Ve.done?M(Ve.value):U(Ve.value).then(ne,xe)}Te((I=I.apply(D,j||[])).next())})};class Df extends Us{constructor(j,T){super(j,T),this.members=new fs}authorize(j,T){super.authorize(j,(I,U)=>$i(this,void 0,void 0,function*(){if(!I)if(U=U,U.channel_data!=null){var M=JSON.parse(U.channel_data);this.members.setMyID(M.user_id)}else if(yield this.pusher.user.signinDonePromise,this.pusher.user.user_data!=null)this.members.setMyID(this.pusher.user.user_data.id);else{let H=v.buildLogSuffix("authorizationEndpoint");Se.error(`Invalid auth response for channel '${this.name}', expected 'channel_data' field. ${H}, or the user should be signed in.`),T("Invalid auth response");return}T(I,U)}))}handleEvent(j){var T=j.event;if(T.indexOf("pusher_internal:")===0)this.handleInternalEvent(j);else{var I=j.data,U={};j.user_id&&(U.user_id=j.user_id),this.emit(T,I,U)}}handleInternalEvent(j){var T=j.event,I=j.data;switch(T){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(j);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(j);break;case"pusher_internal:member_added":var U=this.members.addMember(I);this.emit("pusher:member_added",U);break;case"pusher_internal:member_removed":var M=this.members.removeMember(I);M&&this.emit("pusher:member_removed",M);break}}handleSubscriptionSucceededEvent(j){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(j.data),this.emit("pusher:subscription_succeeded",this.members))}disconnect(){this.members.reset(),super.disconnect()}}var Ba=a(1),Ii=a(0);class sc extends Us{constructor(j,T,I){super(j,T),this.key=null,this.nacl=I}authorize(j,T){super.authorize(j,(I,U)=>{if(I){T(I,U);return}let M=U.shared_secret;if(!M){T(new Error(`No shared_secret key in auth payload for encrypted channel: ${this.name}`),null);return}this.key=Object(Ii.decode)(M),delete U.shared_secret,T(null,U)})}trigger(j,T){throw new C("Client events are not currently supported for encrypted channels")}handleEvent(j){var T=j.event,I=j.data;if(T.indexOf("pusher_internal:")===0||T.indexOf("pusher:")===0){super.handleEvent(j);return}this.handleEncryptedEvent(T,I)}handleEncryptedEvent(j,T){if(!this.key){Se.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!T.ciphertext||!T.nonce){Se.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+T);return}let I=Object(Ii.decode)(T.ciphertext);if(I.length<this.nacl.secretbox.overheadLength){Se.error(`Expected encrypted event ciphertext length to be ${this.nacl.secretbox.overheadLength}, got: ${I.length}`);return}let U=Object(Ii.decode)(T.nonce);if(U.length<this.nacl.secretbox.nonceLength){Se.error(`Expected encrypted event nonce length to be ${this.nacl.secretbox.nonceLength}, got: ${U.length}`);return}let M=this.nacl.secretbox.open(I,U,this.key);if(M===null){Se.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,(H,ne)=>{if(H){Se.error(`Failed to make a request to the authEndpoint: ${ne}. Unable to fetch new key, so dropping encrypted event`);return}if(M=this.nacl.secretbox.open(I,U,this.key),M===null){Se.error("Failed to decrypt event with new key. Dropping encrypted event");return}this.emit(j,this.getDataToEmit(M))});return}this.emit(j,this.getDataToEmit(M))}getDataToEmit(j){let T=Object(Ba.decode)(j);try{return JSON.parse(T)}catch{return T}}}class ha extends mt{constructor(j,T){super(),this.state="initialized",this.connection=null,this.key=j,this.options=T,this.timeline=this.options.timeline,this.usingTLS=this.options.useTLS,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var I=Be.getNetwork();I.bind("online",()=>{this.timeline.info({netinfo:"online"}),(this.state==="connecting"||this.state==="unavailable")&&this.retryIn(0)}),I.bind("offline",()=>{this.timeline.info({netinfo:"offline"}),this.connection&&this.sendActivityCheck()}),this.updateStrategy()}connect(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}}send(j){return this.connection?this.connection.send(j):!1}send_event(j,T,I){return this.connection?this.connection.send_event(j,T,I):!1}disconnect(){this.disconnectInternally(),this.updateState("disconnected")}isUsingTLS(){return this.usingTLS}startConnecting(){var j=(T,I)=>{T?this.runner=this.strategy.connect(0,j):I.action==="error"?(this.emit("error",{type:"HandshakeError",error:I.error}),this.timeline.error({handshakeError:I.error})):(this.abortConnecting(),this.handshakeCallbacks[I.action](I))};this.runner=this.strategy.connect(0,j)}abortConnecting(){this.runner&&(this.runner.abort(),this.runner=null)}disconnectInternally(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var j=this.abandonConnection();j.close()}}updateStrategy(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})}retryIn(j){this.timeline.info({action:"retry",delay:j}),j>0&&this.emit("connecting_in",Math.round(j/1e3)),this.retryTimer=new X(j||0,()=>{this.disconnectInternally(),this.connect()})}clearRetryTimer(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)}setUnavailableTimer(){this.unavailableTimer=new X(this.options.unavailableTimeout,()=>{this.updateState("unavailable")})}clearUnavailableTimer(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()}sendActivityCheck(){this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new X(this.options.pongTimeout,()=>{this.timeline.error({pong_timed_out:this.options.pongTimeout}),this.retryIn(0)})}resetActivityCheck(){this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new X(this.activityTimeout,()=>{this.sendActivityCheck()}))}stopActivityCheck(){this.activityTimer&&this.activityTimer.ensureAborted()}buildConnectionCallbacks(j){return ge({},j,{message:T=>{this.resetActivityCheck(),this.emit("message",T)},ping:()=>{this.send_event("pusher:pong",{})},activity:()=>{this.resetActivityCheck()},error:T=>{this.emit("error",T)},closed:()=>{this.abandonConnection(),this.shouldRetry()&&this.retryIn(1e3)}})}buildHandshakeCallbacks(j){return ge({},j,{connected:T=>{this.activityTimeout=Math.min(this.options.activityTimeout,T.activityTimeout,T.connection.activityTimeout||1/0),this.clearUnavailableTimer(),this.setConnection(T.connection),this.socket_id=this.connection.id,this.updateState("connected",{socket_id:this.socket_id})}})}buildErrorCallbacks(){let j=T=>I=>{I.error&&this.emit("error",{type:"WebSocketError",error:I.error}),T(I)};return{tls_only:j(()=>{this.usingTLS=!0,this.updateStrategy(),this.retryIn(0)}),refused:j(()=>{this.disconnect()}),backoff:j(()=>{this.retryIn(1e3)}),retry:j(()=>{this.retryIn(0)})}}setConnection(j){this.connection=j;for(var T in this.connectionCallbacks)this.connection.bind(T,this.connectionCallbacks[T]);this.resetActivityCheck()}abandonConnection(){if(this.connection){this.stopActivityCheck();for(var j in this.connectionCallbacks)this.connection.unbind(j,this.connectionCallbacks[j]);var T=this.connection;return this.connection=null,T}}updateState(j,T){var I=this.state;if(this.state=j,I!==j){var U=j;U==="connected"&&(U+=" with new socket ID "+T.socket_id),Se.debug("State changed",I+" -> "+U),this.timeline.info({state:j,params:T}),this.emit("state_change",{previous:I,current:j}),this.emit(j,T)}}shouldRetry(){return this.state==="connecting"||this.state==="connected"}}class ac{constructor(){this.channels={}}add(j,T){return this.channels[j]||(this.channels[j]=nu(j,T)),this.channels[j]}all(){return Pe(this.channels)}find(j){return this.channels[j]}remove(j){var T=this.channels[j];return delete this.channels[j],T}disconnect(){_e(this.channels,function(j){j.disconnect()})}}function nu(D,j){if(D.indexOf("private-encrypted-")===0){if(j.config.nacl)return Zr.createEncryptedChannel(D,j,j.config.nacl);let T="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",I=v.buildLogSuffix("encryptedChannelSupport");throw new C(`${T}. ${I}`)}else{if(D.indexOf("private-")===0)return Zr.createPrivateChannel(D,j);if(D.indexOf("presence-")===0)return Zr.createPresenceChannel(D,j);if(D.indexOf("#")===0)throw new w('Cannot create a channel with name "'+D+'".');return Zr.createChannel(D,j)}}var Fi={createChannels(){return new ac},createConnectionManager(D,j){return new ha(D,j)},createChannel(D,j){return new Hn(D,j)},createPrivateChannel(D,j){return new Us(D,j)},createPresenceChannel(D,j){return new Df(D,j)},createEncryptedChannel(D,j,T){return new sc(D,j,T)},createTimelineSender(D,j){return new Bo(D,j)},createHandshake(D,j){return new Fo(D,j)},createAssistantToTheTransportManager(D,j,T){return new Tr(D,j,T)}},Zr=Fi;class ic{constructor(j){this.options=j||{},this.livesLeft=this.options.lives||1/0}getAssistant(j){return Zr.createAssistantToTheTransportManager(this,j,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})}isAlive(){return this.livesLeft>0}reportDeath(){this.livesLeft-=1}}class Vs{constructor(j,T){this.strategies=j,this.loop=!!T.loop,this.failFast=!!T.failFast,this.timeout=T.timeout,this.timeoutLimit=T.timeoutLimit}isSupported(){return Ke(this.strategies,re.method("isSupported"))}connect(j,T){var I=this.strategies,U=0,M=this.timeout,H=null,ne=(xe,Te)=>{Te?T(null,Te):(U=U+1,this.loop&&(U=U%I.length),U<I.length?(M&&(M=M*2,this.timeoutLimit&&(M=Math.min(M,this.timeoutLimit))),H=this.tryStrategy(I[U],j,{timeout:M,failFast:this.failFast},ne)):T(!0))};return H=this.tryStrategy(I[U],j,{timeout:M,failFast:this.failFast},ne),{abort:function(){H.abort()},forceMinPriority:function(xe){j=xe,H&&H.forceMinPriority(xe)}}}tryStrategy(j,T,I,U){var M=null,H=null;return I.timeout>0&&(M=new X(I.timeout,function(){H.abort(),U(!0)})),H=j.connect(T,function(ne,xe){ne&&M&&M.isRunning()&&!I.failFast||(M&&M.ensureAborted(),U(ne,xe))}),{abort:function(){M&&M.ensureAborted(),H.abort()},forceMinPriority:function(ne){H.forceMinPriority(ne)}}}}class ms{constructor(j){this.strategies=j}isSupported(){return Ke(this.strategies,re.method("isSupported"))}connect(j,T){return at(this.strategies,j,function(I,U){return function(M,H){if(U[I].error=M,M){Nt(U)&&T(!0);return}Le(U,function(ne){ne.forceMinPriority(H.transport.priority)}),T(null,H)}})}}function at(D,j,T){var I=Ge(D,function(U,M,H,ne){return U.connect(j,T(M,ne))});return{abort:function(){Le(I,Ho)},forceMinPriority:function(U){Le(I,function(M){M.forceMinPriority(U)})}}}function Nt(D){return V(D,function(j){return!!j.error})}function Ho(D){!D.error&&!D.aborted&&(D.abort(),D.aborted=!0)}class fa{constructor(j,T,I){this.strategy=j,this.transports=T,this.ttl=I.ttl||1800*1e3,this.usingTLS=I.useTLS,this.timeline=I.timeline}isSupported(){return this.strategy.isSupported()}connect(j,T){var I=this.usingTLS,U=Wo(I),M=U&&U.cacheSkipCount?U.cacheSkipCount:0,H=[this.strategy];if(U&&U.timestamp+this.ttl>=re.now()){var ne=this.transports[U.transport];ne&&(["ws","wss"].includes(U.transport)||M>3?(this.timeline.info({cached:!0,transport:U.transport,latency:U.latency}),H.push(new Vs([ne],{timeout:U.latency*2+1e3,failFast:!0}))):M++)}var xe=re.now(),Te=H.pop().connect(j,function Ve(Vt,Ga){Vt?(St(I),H.length>0?(xe=re.now(),Te=H.pop().connect(j,Ve)):T(Vt)):(Ze(I,Ga.transport.name,re.now()-xe,M),T(null,Ga))});return{abort:function(){Te.abort()},forceMinPriority:function(Ve){j=Ve,Te&&Te.forceMinPriority(Ve)}}}}function qs(D){return"pusherTransport"+(D?"TLS":"NonTLS")}function Wo(D){var j=Be.getLocalStorage();if(j)try{var T=j[qs(D)];if(T)return JSON.parse(T)}catch{St(D)}return null}function Ze(D,j,T,I){var U=Be.getLocalStorage();if(U)try{U[qs(D)]=vt({timestamp:re.now(),transport:j,latency:T,cacheSkipCount:I})}catch{}}function St(D){var j=Be.getLocalStorage();if(j)try{delete j[qs(D)]}catch{}}class Ys{constructor(j,{delay:T}){this.strategy=j,this.options={delay:T}}isSupported(){return this.strategy.isSupported()}connect(j,T){var I=this.strategy,U,M=new X(this.options.delay,function(){U=I.connect(j,T)});return{abort:function(){M.ensureAborted(),U&&U.abort()},forceMinPriority:function(H){j=H,U&&U.forceMinPriority(H)}}}}class Wn{constructor(j,T,I){this.test=j,this.trueBranch=T,this.falseBranch=I}isSupported(){var j=this.test()?this.trueBranch:this.falseBranch;return j.isSupported()}connect(j,T){var I=this.test()?this.trueBranch:this.falseBranch;return I.connect(j,T)}}class Kr{constructor(j){this.strategy=j}isSupported(){return this.strategy.isSupported()}connect(j,T){var I=this.strategy.connect(j,function(U,M){M&&I.abort(),T(U,M)});return I}}function Ha(D){return function(){return D.isSupported()}}var Bi=function(D,j,T){var I={};function U(lu,vc,ex,pa,bc){var Rf=T(D,lu,vc,ex,pa,bc);return I[lu]=Rf,Rf}var M=Object.assign({},j,{hostNonTLS:D.wsHost+":"+D.wsPort,hostTLS:D.wsHost+":"+D.wssPort,httpPath:D.wsPath}),H=Object.assign({},M,{useTLS:!0}),ne=Object.assign({},j,{hostNonTLS:D.httpHost+":"+D.httpPort,hostTLS:D.httpHost+":"+D.httpsPort,httpPath:D.httpPath}),xe={loop:!0,timeout:15e3,timeoutLimit:6e4},Te=new ic({minPingDelay:1e4,maxPingDelay:D.activityTimeout}),Ve=new ic({lives:2,minPingDelay:1e4,maxPingDelay:D.activityTimeout}),Vt=U("ws","ws",3,M,Te),Ga=U("wss","ws",3,H,Te),au=U("sockjs","sockjs",1,ne),Lf=U("xhr_streaming","xhr_streaming",1,ne,Ve),X0=U("xdr_streaming","xdr_streaming",1,ne,Ve),iu=U("xhr_polling","xhr_polling",1,ne),J0=U("xdr_polling","xdr_polling",1,ne),En=new Vs([Vt],xe),Ki=new Vs([Ga],xe),Q0=new Vs([au],xe),xs=new Vs([new Wn(Ha(Lf),Lf,X0)],xe),Af=new Vs([new Wn(Ha(iu),iu,J0)],xe),Za=new Vs([new Wn(Ha(xs),new ms([xs,new Ys(Af,{delay:4e3})]),Af)],xe),ou=new Wn(Ha(Za),Za,Q0),Ka;return j.useTLS?Ka=new ms([En,new Ys(ou,{delay:2e3})]):Ka=new ms([En,new Ys(Ki,{delay:2e3}),new Ys(ou,{delay:5e3})]),new fa(new Kr(new Wn(Ha(Vt),Ka,ou)),I,{ttl:18e5,timeline:j.timeline,useTLS:j.useTLS})},je=Bi,ke=function(){var D=this;D.timeline.info(D.buildTimelineMessage({transport:D.name+(D.options.useTLS?"s":"")})),D.hooks.isInitialized()?D.changeState("initialized"):D.hooks.file?(D.changeState("initializing"),m.load(D.hooks.file,{useTLS:D.options.useTLS},function(j,T){D.hooks.isInitialized()?(D.changeState("initialized"),T(!0)):(j&&D.onError(j),D.onClose(),T(!1))})):D.onClose()},ps={getRequest:function(D){var j=new window.XDomainRequest;return j.ontimeout=function(){D.emit("error",new b),D.close()},j.onerror=function(T){D.emit("error",T),D.close()},j.onprogress=function(){j.responseText&&j.responseText.length>0&&D.onChunk(200,j.responseText)},j.onload=function(){j.responseText&&j.responseText.length>0&&D.onChunk(200,j.responseText),D.emit("finished",200),D.close()},j},abortRequest:function(D){D.ontimeout=D.onerror=D.onprogress=D.onload=null,D.abort()}},Wa=ps;const Ua=256*1024;class zr extends mt{constructor(j,T,I){super(),this.hooks=j,this.method=T,this.url=I}start(j){this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=()=>{this.close()},Be.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(j)}close(){this.unloader&&(Be.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)}onChunk(j,T){for(;;){var I=this.advanceBuffer(T);if(I)this.emit("chunk",{status:j,data:I});else break}this.isBufferTooLong(T)&&this.emit("buffer_too_long")}advanceBuffer(j){var T=j.slice(this.position),I=T.indexOf(`
`);return I!==-1?(this.position+=I+1,T.slice(0,I)):null}isBufferTooLong(j){return this.position===j.length&&j.length>Ua}}var Gs;(function(D){D[D.CONNECTING=0]="CONNECTING",D[D.OPEN=1]="OPEN",D[D.CLOSED=3]="CLOSED"})(Gs||(Gs={}));var $r=Gs,Un=1;class fn{constructor(j,T){this.hooks=j,this.session=Hi(1e3)+"/"+oc(8),this.location=Vn(T),this.readyState=$r.CONNECTING,this.openStream()}send(j){return this.sendRaw(JSON.stringify([j]))}ping(){this.hooks.sendHeartbeat(this)}close(j,T){this.onClose(j,T,!0)}sendRaw(j){if(this.readyState===$r.OPEN)try{return Be.createSocketRequest("POST",qn(Zs(this.location,this.session))).start(j),!0}catch{return!1}else return!1}reconnect(){this.closeStream(),this.openStream()}onClose(j,T,I){this.closeStream(),this.readyState=$r.CLOSED,this.onclose&&this.onclose({code:j,reason:T,wasClean:I})}onChunk(j){if(j.status===200){this.readyState===$r.OPEN&&this.onActivity();var T,I=j.data.slice(0,1);switch(I){case"o":T=JSON.parse(j.data.slice(1)||"{}"),this.onOpen(T);break;case"a":T=JSON.parse(j.data.slice(1)||"[]");for(var U=0;U<T.length;U++)this.onEvent(T[U]);break;case"m":T=JSON.parse(j.data.slice(1)||"null"),this.onEvent(T);break;case"h":this.hooks.onHeartbeat(this);break;case"c":T=JSON.parse(j.data.slice(1)||"[]"),this.onClose(T[0],T[1],!0);break}}}onOpen(j){this.readyState===$r.CONNECTING?(j&&j.hostname&&(this.location.base=Uo(this.location.base,j.hostname)),this.readyState=$r.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)}onEvent(j){this.readyState===$r.OPEN&&this.onmessage&&this.onmessage({data:j})}onActivity(){this.onactivity&&this.onactivity()}onError(j){this.onerror&&this.onerror(j)}openStream(){this.stream=Be.createSocketRequest("POST",qn(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",j=>{this.onChunk(j)}),this.stream.bind("finished",j=>{this.hooks.onFinished(this,j)}),this.stream.bind("buffer_too_long",()=>{this.reconnect()});try{this.stream.start()}catch(j){re.defer(()=>{this.onError(j),this.onClose(1006,"Could not start streaming",!1)})}}closeStream(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)}}function Vn(D){var j=/([^\?]*)\/*(\??.*)/.exec(D);return{base:j[1],queryString:j[2]}}function Zs(D,j){return D.base+"/"+j+"/xhr_send"}function qn(D){var j=D.indexOf("?")===-1?"?":"&";return D+j+"t="+ +new Date+"&n="+Un++}function Uo(D,j){var T=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(D);return T[1]+j+T[3]}function Hi(D){return Be.randomInt(D)}function oc(D){for(var j=[],T=0;T<D;T++)j.push(Hi(32).toString(32));return j.join("")}var Ue=fn,mn={getReceiveURL:function(D,j){return D.base+"/"+j+"/xhr_streaming"+D.queryString},onHeartbeat:function(D){D.sendRaw("[]")},sendHeartbeat:function(D){D.sendRaw("[]")},onFinished:function(D,j){D.onClose(1006,"Connection interrupted ("+j+")",!1)}},ut=mn,Va={getReceiveURL:function(D,j){return D.base+"/"+j+"/xhr"+D.queryString},onHeartbeat:function(){},sendHeartbeat:function(D){D.sendRaw("[]")},onFinished:function(D,j){j===200?D.reconnect():D.onClose(1006,"Connection interrupted ("+j+")",!1)}},gs=Va,Wi={getRequest:function(D){var j=Be.getXHRAPI(),T=new j;return T.onreadystatechange=T.onprogress=function(){switch(T.readyState){case 3:T.responseText&&T.responseText.length>0&&D.onChunk(T.status,T.responseText);break;case 4:T.responseText&&T.responseText.length>0&&D.onChunk(T.status,T.responseText),D.emit("finished",T.status),D.close();break}},T},abortRequest:function(D){D.onreadystatechange=null,D.abort()}},Vo=Wi,_r={createStreamingSocket(D){return this.createSocket(ut,D)},createPollingSocket(D){return this.createSocket(gs,D)},createSocket(D,j){return new Ue(D,j)},createXHR(D,j){return this.createRequest(Vo,D,j)},createRequest(D,j,T){return new zr(D,j,T)}},ma=_r;ma.createXDR=function(D,j){return this.createRequest(Wa,D,j)};var qa=ma,ar={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:o,DependenciesReceivers:f,getDefaultStrategy:je,Transports:rc,transportConnectionInitializer:ke,HTTPFactory:qa,TimelineTransport:$a,getXHRAPI(){return window.XMLHttpRequest},getWebSocketAPI(){return window.WebSocket||window.MozWebSocket},setup(D){window.Pusher=D;var j=()=>{this.onDocumentBody(D.ready)};window.JSON?j():m.load("json2",{},j)},getDocument(){return document},getProtocol(){return this.getDocument().location.protocol},getAuthorizers(){return{ajax:W,jsonp:un}},onDocumentBody(D){document.body?D():setTimeout(()=>{this.onDocumentBody(D)},0)},createJSONPRequest(D,j){return new ls(D,j)},createScriptRequest(D){return new Pr(D)},getLocalStorage(){try{return window.localStorage}catch{return}},createXHR(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest(){var D=this.getXHRAPI();return new D},createMicrosoftXHR(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork(){return Fa},createWebSocket(D){var j=this.getWebSocketAPI();return new j(D)},createSocketRequest(D,j){if(this.isXHRSupported())return this.HTTPFactory.createXHR(D,j);if(this.isXDRSupported(j.indexOf("https:")===0))return this.HTTPFactory.createXDR(D,j);throw"Cross-origin HTTP requests are not supported"},isXHRSupported(){var D=this.getXHRAPI();return!!D&&new D().withCredentials!==void 0},isXDRSupported(D){var j=D?"https:":"http:",T=this.getProtocol();return!!window.XDomainRequest&&T===j},addUnloadListener(D){window.addEventListener!==void 0?window.addEventListener("unload",D,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",D)},removeUnloadListener(D){window.addEventListener!==void 0?window.removeEventListener("unload",D,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",D)},randomInt(D){return Math.floor(function(){return(window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32)}()*D)}},Be=ar,Ui;(function(D){D[D.ERROR=3]="ERROR",D[D.INFO=6]="INFO",D[D.DEBUG=7]="DEBUG"})(Ui||(Ui={}));var Ya=Ui;class lc{constructor(j,T,I){this.key=j,this.session=T,this.events=[],this.options=I||{},this.sent=0,this.uniqueID=0}log(j,T){j<=this.options.level&&(this.events.push(ge({},T,{timestamp:re.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())}error(j){this.log(Ya.ERROR,j)}info(j){this.log(Ya.INFO,j)}debug(j){this.log(Ya.DEBUG,j)}isEmpty(){return this.events.length===0}send(j,T){var I=ge({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],j(I,(U,M)=>{U||this.sent++,T&&T(U,M)}),!0}generateUniqueID(){return this.uniqueID++,this.uniqueID}}class qo{constructor(j,T,I,U){this.name=j,this.priority=T,this.transport=I,this.options=U||{}}isSupported(){return this.transport.isSupported({useTLS:this.options.useTLS})}connect(j,T){if(this.isSupported()){if(this.priority<j)return Vi(new N,T)}else return Vi(new A,T);var I=!1,U=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),M=null,H=function(){U.unbind("initialized",H),U.connect()},ne=function(){M=Zr.createHandshake(U,function(Vt){I=!0,Ve(),T(null,Vt)})},xe=function(Vt){Ve(),T(Vt)},Te=function(){Ve();var Vt;Vt=vt(U),T(new S(Vt))},Ve=function(){U.unbind("initialized",H),U.unbind("open",ne),U.unbind("error",xe),U.unbind("closed",Te)};return U.bind("initialized",H),U.bind("open",ne),U.bind("error",xe),U.bind("closed",Te),U.initialize(),{abort:()=>{I||(Ve(),M?M.close():U.close())},forceMinPriority:Vt=>{I||this.priority<Vt&&(M?M.close():U.close())}}}}function Vi(D,j){return re.defer(function(){j(D)}),{abort:function(){},forceMinPriority:function(){}}}const{Transports:cc}=Be;var dc=function(D,j,T,I,U,M){var H=cc[T];if(!H)throw new O(T);var ne=(!D.enabledTransports||me(D.enabledTransports,j)!==-1)&&(!D.disabledTransports||me(D.disabledTransports,j)===-1),xe;return ne?(U=Object.assign({ignoreNullOrigin:D.ignoreNullOrigin},U),xe=new qo(j,I,M?M.getAssistant(H):H,U)):xe=tt,xe},tt={isSupported:function(){return!1},connect:function(D,j){var T=re.defer(function(){j(new A)});return{abort:function(){T.ensureAborted()},forceMinPriority:function(){}}}};function su(D){if(D==null)throw"You must pass an options object";if(D.cluster==null)throw"Options object must provide a cluster";"disableStats"in D&&Se.warn("The disableStats option is deprecated in favor of enableStats")}const pn=(D,j)=>{var T="socket_id="+encodeURIComponent(D.socketId);for(var I in j.params)T+="&"+encodeURIComponent(I)+"="+encodeURIComponent(j.params[I]);if(j.paramsProvider!=null){let U=j.paramsProvider();for(var I in U)T+="&"+encodeURIComponent(I)+"="+encodeURIComponent(U[I])}return T};var Yo=D=>{if(typeof Be.getAuthorizers()[D.transport]>"u")throw`'${D.transport}' is not a recognized auth transport`;return(j,T)=>{const I=pn(j,D);Be.getAuthorizers()[D.transport](Be,I,D,y.UserAuthentication,T)}};const uc=(D,j)=>{var T="socket_id="+encodeURIComponent(D.socketId);T+="&channel_name="+encodeURIComponent(D.channelName);for(var I in j.params)T+="&"+encodeURIComponent(I)+"="+encodeURIComponent(j.params[I]);if(j.paramsProvider!=null){let U=j.paramsProvider();for(var I in U)T+="&"+encodeURIComponent(I)+"="+encodeURIComponent(U[I])}return T};var hc=D=>{if(typeof Be.getAuthorizers()[D.transport]>"u")throw`'${D.transport}' is not a recognized auth transport`;return(j,T)=>{const I=uc(j,D);Be.getAuthorizers()[D.transport](Be,I,D,y.ChannelAuthorization,T)}};const Zo=(D,j,T)=>{const I={authTransport:j.transport,authEndpoint:j.endpoint,auth:{params:j.params,headers:j.headers}};return(U,M)=>{const H=D.channel(U.channelName);T(H,I).authorize(U.socketId,M)}};function fc(D,j){let T={activityTimeout:D.activityTimeout||d.activityTimeout,cluster:D.cluster,httpPath:D.httpPath||d.httpPath,httpPort:D.httpPort||d.httpPort,httpsPort:D.httpsPort||d.httpsPort,pongTimeout:D.pongTimeout||d.pongTimeout,statsHost:D.statsHost||d.stats_host,unavailableTimeout:D.unavailableTimeout||d.unavailableTimeout,wsPath:D.wsPath||d.wsPath,wsPort:D.wsPort||d.wsPort,wssPort:D.wssPort||d.wssPort,enableStats:gc(D),httpHost:mc(D),useTLS:gn(D),wsHost:Yi(D),userAuthenticator:Ko(D),channelAuthorizer:Xo(D,j)};return"disabledTransports"in D&&(T.disabledTransports=D.disabledTransports),"enabledTransports"in D&&(T.enabledTransports=D.enabledTransports),"ignoreNullOrigin"in D&&(T.ignoreNullOrigin=D.ignoreNullOrigin),"timelineParams"in D&&(T.timelineParams=D.timelineParams),"nacl"in D&&(T.nacl=D.nacl),T}function mc(D){return D.httpHost?D.httpHost:D.cluster?`sockjs-${D.cluster}.pusher.com`:d.httpHost}function Yi(D){return D.wsHost?D.wsHost:pc(D.cluster)}function pc(D){return`ws-${D}.pusher.com`}function gn(D){return Be.getProtocol()==="https:"?!0:D.forceTLS!==!1}function gc(D){return"enableStats"in D?D.enableStats:"disableStats"in D?!D.disableStats:!1}function Ko(D){const j=Object.assign(Object.assign({},d.userAuthentication),D.userAuthentication);return"customHandler"in j&&j.customHandler!=null?j.customHandler:Yo(j)}function Yn(D,j){let T;return"channelAuthorization"in D?T=Object.assign(Object.assign({},d.channelAuthorization),D.channelAuthorization):(T={transport:D.authTransport||d.authTransport,endpoint:D.authEndpoint||d.authEndpoint},"auth"in D&&("params"in D.auth&&(T.params=D.auth.params),"headers"in D.auth&&(T.headers=D.auth.headers)),"authorizer"in D&&(T.customHandler=Zo(j,T,D.authorizer))),T}function Xo(D,j){const T=Yn(D,j);return"customHandler"in T&&T.customHandler!=null?T.customHandler:hc(T)}class Jo extends mt{constructor(j){super(function(T,I){Se.debug(`No callbacks on watchlist events for ${T}`)}),this.pusher=j,this.bindWatchlistInternalEvent()}handleEvent(j){j.data.events.forEach(T=>{this.emit(T.name,T)})}bindWatchlistInternalEvent(){this.pusher.connection.bind("message",j=>{var T=j.event;T==="pusher_internal:watchlist_events"&&this.handleEvent(j)})}}function Gi(){let D,j;return{promise:new Promise((I,U)=>{D=I,j=U}),resolve:D,reject:j}}var xc=Gi;class Qo extends mt{constructor(j){super(function(T,I){Se.debug("No callbacks on user for "+T)}),this.signin_requested=!1,this.user_data=null,this.serverToUserChannel=null,this.signinDonePromise=null,this._signinDoneResolve=null,this._onAuthorize=(T,I)=>{if(T){Se.warn(`Error during signin: ${T}`),this._cleanup();return}this.pusher.send_event("pusher:signin",{auth:I.auth,user_data:I.user_data})},this.pusher=j,this.pusher.connection.bind("state_change",({previous:T,current:I})=>{T!=="connected"&&I==="connected"&&this._signin(),T==="connected"&&I!=="connected"&&(this._cleanup(),this._newSigninPromiseIfNeeded())}),this.watchlist=new Jo(j),this.pusher.connection.bind("message",T=>{var I=T.event;I==="pusher:signin_success"&&this._onSigninSuccess(T.data),this.serverToUserChannel&&this.serverToUserChannel.name===T.channel&&this.serverToUserChannel.handleEvent(T)})}signin(){this.signin_requested||(this.signin_requested=!0,this._signin())}_signin(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),this.pusher.connection.state==="connected"&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))}_onSigninSuccess(j){try{this.user_data=JSON.parse(j.user_data)}catch{Se.error(`Failed parsing user data after signin: ${j.user_data}`),this._cleanup();return}if(typeof this.user_data.id!="string"||this.user_data.id===""){Se.error(`user_data doesn't contain an id. user_data: ${this.user_data}`),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()}_subscribeChannels(){const j=T=>{T.subscriptionPending&&T.subscriptionCancelled?T.reinstateSubscription():!T.subscriptionPending&&this.pusher.connection.state==="connected"&&T.subscribe()};this.serverToUserChannel=new Hn(`#server-to-user-${this.user_data.id}`,this.pusher),this.serverToUserChannel.bind_global((T,I)=>{T.indexOf("pusher_internal:")===0||T.indexOf("pusher:")===0||this.emit(T,I)}),j(this.serverToUserChannel)}_cleanup(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()}_newSigninPromiseIfNeeded(){if(!this.signin_requested||this.signinDonePromise&&!this.signinDonePromise.done)return;const{promise:j,resolve:T}=xc();j.done=!1;const I=()=>{j.done=!0};j.then(I).catch(I),this.signinDonePromise=j,this._signinDoneResolve=T}}class Zt{static ready(){Zt.isReady=!0;for(var j=0,T=Zt.instances.length;j<T;j++)Zt.instances[j].connect()}static getClientFeatures(){return $e(Ae({ws:Be.Transports.ws},function(j){return j.isSupported({})}))}constructor(j,T){yc(j),su(T),this.key=j,this.config=fc(T,this),this.channels=Zr.createChannels(),this.global_emitter=new mt,this.sessionID=Be.randomInt(1e9),this.timeline=new lc(this.key,this.sessionID,{cluster:this.config.cluster,features:Zt.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:Ya.INFO,version:d.VERSION}),this.config.enableStats&&(this.timelineSender=Zr.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+Be.TimelineTransport.name}));var I=U=>Be.getDefaultStrategy(this.config,U,dc);this.connection=Zr.createConnectionManager(this.key,{getStrategy:I,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:!!this.config.useTLS}),this.connection.bind("connected",()=>{this.subscribeAll(),this.timelineSender&&this.timelineSender.send(this.connection.isUsingTLS())}),this.connection.bind("message",U=>{var M=U.event,H=M.indexOf("pusher_internal:")===0;if(U.channel){var ne=this.channel(U.channel);ne&&ne.handleEvent(U)}H||this.global_emitter.emit(U.event,U.data)}),this.connection.bind("connecting",()=>{this.channels.disconnect()}),this.connection.bind("disconnected",()=>{this.channels.disconnect()}),this.connection.bind("error",U=>{Se.warn(U)}),Zt.instances.push(this),this.timeline.info({instances:Zt.instances.length}),this.user=new Qo(this),Zt.isReady&&this.connect()}channel(j){return this.channels.find(j)}allChannels(){return this.channels.all()}connect(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var j=this.connection.isUsingTLS(),T=this.timelineSender;this.timelineSenderTimer=new ae(6e4,function(){T.send(j)})}}disconnect(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)}bind(j,T,I){return this.global_emitter.bind(j,T,I),this}unbind(j,T,I){return this.global_emitter.unbind(j,T,I),this}bind_global(j){return this.global_emitter.bind_global(j),this}unbind_global(j){return this.global_emitter.unbind_global(j),this}unbind_all(j){return this.global_emitter.unbind_all(),this}subscribeAll(){var j;for(j in this.channels.channels)this.channels.channels.hasOwnProperty(j)&&this.subscribe(j)}subscribe(j){var T=this.channels.add(j,this);return T.subscriptionPending&&T.subscriptionCancelled?T.reinstateSubscription():!T.subscriptionPending&&this.connection.state==="connected"&&T.subscribe(),T}unsubscribe(j){var T=this.channels.find(j);T&&T.subscriptionPending?T.cancelSubscription():(T=this.channels.remove(j),T&&T.subscribed&&T.unsubscribe())}send_event(j,T,I){return this.connection.send_event(j,T,I)}shouldUseTLS(){return this.config.useTLS}signin(){this.user.signin()}}Zt.instances=[],Zt.isReady=!1,Zt.logToConsole=!1,Zt.Runtime=Be,Zt.ScriptReceivers=Be.ScriptReceivers,Zt.DependenciesReceivers=Be.DependenciesReceivers,Zt.auth_callbacks=Be.auth_callbacks;var Zi=n.default=Zt;function yc(D){if(D==null)throw"You must pass your app key when you instantiate Pusher."}Be.setup(Zt)}])})})(qE);var m6=qE.exports;const YE=Yr(m6),GE=E.createContext(),p6=({children:e})=>{const[t,r]=E.useState(null);return E.useEffect(()=>((async()=>{try{const i=await(await fetch(`${Y}/settings/public`)).json();if(i.pusher_key&&i.pusher_cluster){const o=new YE(i.pusher_key,{cluster:i.pusher_cluster,encrypted:!0});r(o)}}catch(a){console.error("Error initializing Pusher:",a)}})(),()=>{t&&t.disconnect()}),[]),s.jsx(GE.Provider,{value:t,children:e})},ZE=()=>E.useContext(GE),g6=({onClose:e})=>{const[t,r]=E.useState({name:"",email:"",phone:"",businessName:"",message:"",commercialCode:""}),[n,a]=E.useState(!1),[i,o]=E.useState(!1),[c,d]=E.useState("");E.useEffect(()=>{const p=new URLSearchParams(window.location.search).get("ref");p&&r(x=>({...x,commercialCode:p}))},[]);const u=async m=>{m.preventDefault(),a(!0),d("");try{if(!(await fetch(`${Y}/leads`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,email:t.email,phone:t.phone,businessName:t.businessName,message:t.message,commercialCode:t.commercialCode||void 0,source:"landing_form"})})).ok)throw new Error("Error al enviar el formulario");o(!0),setTimeout(()=>{e()},3e3)}catch{d("Error al enviar el formulario. Por favor, intntalo de nuevo.")}finally{a(!1)}},f=m=>{r({...t,[m.target.name]:m.target.value})};return i?s.jsxs("div",{className:"bg-white p-8 max-w-md w-full text-center animate-fade-in",children:[s.jsx("div",{className:"h-20 w-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx("div",{className:"text-4xl",children:""})}),s.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Solicitud Recibida!"}),s.jsx("p",{className:"text-slate-600 mb-6",children:"Un asesor especializado te contactar en breve para activar tu demo."}),s.jsxs("div",{className:"bg-slate-50 text-slate-700 px-4 py-4 rounded-xl border border-slate-200",children:[s.jsx("p",{className:"font-semibold text-sm",children:" Revisa tu bandeja de entrada"}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Te hemos enviado los detalles de acceso"})]})]}):s.jsxs("div",{className:"bg-white p-8 w-full animate-fade-in",children:[s.jsxs("div",{className:"mb-8 text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Solicita tu Demo"}),s.jsx("p",{className:"text-slate-500 text-sm",children:"Completa el formulario y empieza a usar NoahPro hoy mismo."})]}),s.jsxs("form",{onSubmit:u,className:"space-y-5",children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-slate-700 uppercase tracking-wide mb-2",children:"Nombre Completo *"}),s.jsx("input",{type:"text",name:"name",value:t.name,onChange:f,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all",placeholder:"Tu nombre",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-slate-700 uppercase tracking-wide mb-2",children:"Email Corporativo *"}),s.jsx("input",{type:"email",name:"email",value:t.email,onChange:f,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all",placeholder:"tu@email.com",required:!0})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-slate-700 uppercase tracking-wide mb-2",children:"Telfono *"}),s.jsx("input",{type:"tel",name:"phone",value:t.phone,onChange:f,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all",placeholder:"+34 600 000 000",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-slate-700 uppercase tracking-wide mb-2",children:"Nombre del Negocio"}),s.jsx("input",{type:"text",name:"businessName",value:t.businessName,onChange:f,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all",placeholder:"Ej. Restaurante La Plaza"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-bold text-slate-700 uppercase tracking-wide mb-2",children:["Referencia Comercial",s.jsx("span",{className:"text-slate-400 font-normal normal-case ml-1",children:"(opcional)"})]}),s.jsx("input",{type:"text",name:"commercialCode",value:t.commercialCode,onChange:f,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all",placeholder:"Ej. COM-1-1234"}),s.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Si vienes de parte de un comercial, introduce su cdigo aqu"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-slate-700 uppercase tracking-wide mb-2",children:"En qu podemos ayudarte?"}),s.jsx("textarea",{name:"message",value:t.message,onChange:f,rows:"3",className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all resize-none",placeholder:"Cuntanos un poco sobre tu local..."})]}),c&&s.jsxs("div",{className:"p-3 bg-red-50 text-red-600 text-sm rounded-xl border border-red-100 flex items-center",children:[s.jsx("span",{className:"mr-2",children:""})," ",c]}),s.jsx("button",{type:"submit",disabled:n,className:`w-full py-4 px-6 rounded-xl text-white font-bold text-lg shadow-lg transition-all transform hover:scale-[1.02] ${n?"bg-slate-400 cursor-not-allowed":"bg-gradient-to-r from-orange-500 to-red-600 hover:shadow-orange-500/30"}`,children:n?s.jsxs("span",{className:"flex items-center justify-center",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enviando..."]}):"Solicitar Informacin "}),s.jsx("p",{className:"text-xs text-center text-gray-500",children:"Tus datos estn seguros. Cumplimos con el RGPD."})]})]})},Fr=[];for(let e=0;e<256;++e)Fr.push((e+256).toString(16).slice(1));function x6(e,t=0){return(Fr[e[t+0]]+Fr[e[t+1]]+Fr[e[t+2]]+Fr[e[t+3]]+"-"+Fr[e[t+4]]+Fr[e[t+5]]+"-"+Fr[e[t+6]]+Fr[e[t+7]]+"-"+Fr[e[t+8]]+Fr[e[t+9]]+"-"+Fr[e[t+10]]+Fr[e[t+11]]+Fr[e[t+12]]+Fr[e[t+13]]+Fr[e[t+14]]+Fr[e[t+15]]).toLowerCase()}let Ox;const y6=new Uint8Array(16);function v6(){if(!Ox){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ox=crypto.getRandomValues.bind(crypto)}return Ox(y6)}const b6=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Kk={randomUUID:b6};function w6(e,t,r){var a;e=e||{};const n=e.random??((a=e.rng)==null?void 0:a.call(e))??v6();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,x6(n)}function KE(e,t,r){return Kk.randomUUID&&!e?Kk.randomUUID():w6(e)}/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),k6=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),Xk=e=>{const t=k6(e);return t.charAt(0).toUpperCase()+t.slice(1)},XE=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),j6=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var N6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=E.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...c},d)=>E.createElement("svg",{ref:d,...N6,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:XE("lucide",a),...!i&&!j6(c)&&{"aria-hidden":"true"},...c},[...o.map(([u,f])=>E.createElement(u,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=(e,t)=>{const r=E.forwardRef(({className:n,...a},i)=>E.createElement(S6,{ref:i,iconNode:t,className:XE(`lucide-${_6(Xk(e))}`,`lucide-${e}`,n),...a}));return r.displayName=Xk(e),r};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],pw=he("arrow-left",C6);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Fp=he("arrow-right",E6);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],T6=he("arrow-up-right",P6);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],JE=he("award",M6);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],QE=he("ban",O6);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=[["path",{d:"M17 11h1a3 3 0 0 1 0 6h-1",key:"1yp76v"}],["path",{d:"M9 12v6",key:"1u1cab"}],["path",{d:"M13 12v6",key:"1sugkk"}],["path",{d:"M14 7.5c-1 0-1.44.5-3 .5s-2-.5-3-.5-1.72.5-2.5.5a2.5 2.5 0 0 1 0-5c.78 0 1.57.5 2.5.5S9.44 2 11 2s2 1.5 3 1.5 1.72-.5 2.5-.5a2.5 2.5 0 0 1 0 5c-.78 0-1.5-.5-2.5-.5Z",key:"1510fo"}],["path",{d:"M5 8v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V8",key:"19jb7n"}]],e4=he("beer",D6);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],t4=he("bell",L6);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],_l=he("book-open",A6);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Jk=he("bot",R6);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],cm=he("brain-circuit",z6);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],dm=he("brain",$6);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Po=he("briefcase",I6);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],nd=he("building-2",F6);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=[["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M21 12.598V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8.5",key:"1glfrc"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}]],H6=he("calendar-plus",B6);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Al=he("calendar",W6);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],V6=he("camera",U6);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],hf=he("chart-column",q6);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],Dx=he("chart-no-axes-column-increasing",Y6);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Z6=he("chart-pie",G6);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],gi=he("check",K6);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],J6=he("chef-hat",X6);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],mv=he("chevron-down",Q6);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],pv=he("chevron-right",eL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Qk=he("chevron-left",tL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],xi=he("circle-alert",rL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Rt=he("circle-check-big",nL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Sc=he("circle-question-mark",sL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],sh=he("circle-x",aL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ms=he("clock",iL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],lL=he("code",oL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],Bp=he("coffee",cL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],kl=he("copy",dL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],hL=he("credit-card",uL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],r4=he("database",fL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],pL=he("dollar-sign",mL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],n4=he("download",gL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=[["path",{d:"M17.596 12.768a2 2 0 1 0 2.829-2.829l-1.768-1.767a2 2 0 0 0 2.828-2.829l-2.828-2.828a2 2 0 0 0-2.829 2.828l-1.767-1.768a2 2 0 1 0-2.829 2.829z",key:"9m4mmf"}],["path",{d:"m2.5 21.5 1.4-1.4",key:"17g3f0"}],["path",{d:"m20.1 3.9 1.4-1.4",key:"1qn309"}],["path",{d:"M5.343 21.485a2 2 0 1 0 2.829-2.828l1.767 1.768a2 2 0 1 0 2.829-2.829l-6.364-6.364a2 2 0 1 0-2.829 2.829l1.768 1.767a2 2 0 0 0-2.828 2.829z",key:"1t2c92"}],["path",{d:"m9.6 14.4 4.8-4.8",key:"6umqxw"}]],Hp=he("dumbbell",xL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Iu=he("external-link",yL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Wp=he("eye-off",vL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],um=he("facebook",bL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ln=he("eye",wL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],It=he("file-text",_L);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],s4=he("flag",kL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Up=he("funnel",jL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=[["circle",{cx:"6",cy:"15",r:"4",key:"vux9w4"}],["circle",{cx:"18",cy:"15",r:"4",key:"18o8ve"}],["path",{d:"M14 15a2 2 0 0 0-2-2 2 2 0 0 0-2 2",key:"1ag4bs"}],["path",{d:"M2.5 13 5 7c.7-1.3 1.4-2 3-2",key:"1hm1gs"}],["path",{d:"M21.5 13 19 7c-.7-1.3-1.5-2-3-2",key:"1r31ai"}]],SL=he("glasses",NL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],bs=he("globe",CL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],PL=he("grid-3x3",EL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],ej=he("grip-vertical",TL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],tj=he("hash",ML);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],Ph=he("headphones",OL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],rj=he("history",DL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=[["path",{d:"M10 22v-6.57",key:"1wmca3"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M12 7h.01",key:"1ivr5q"}],["path",{d:"M14 15.43V22",key:"1q2vjd"}],["path",{d:"M15 16a5 5 0 0 0-6 0",key:"o9wqvi"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 7h.01",key:"1vti4s"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Vp=he("hotel",LL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],gw=he("house",AL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],bu=he("image",RL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],Cc=he("instagram",zL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],qp=he("key",$L);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=[["path",{d:"M18 5a2 2 0 0 1 2 2v8.526a2 2 0 0 0 .212.897l1.068 2.127a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45l1.068-2.127A2 2 0 0 0 4 15.526V7a2 2 0 0 1 2-2z",key:"1pdavp"}],["path",{d:"M20.054 15.987H3.946",key:"14rxg9"}]],FL=he("laptop",IL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],HL=he("layout-grid",BL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],UL=he("layout-template",WL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],qL=he("lightbulb",VL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],a4=he("link",YL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],gv=he("list",GL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],i4=he("loader-circle",ZL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],nj=he("loader",KL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Th=he("lock",XL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],QL=he("log-out",JL);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Tt=he("mail",eA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Lc=he("map-pin",tA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],nA=he("map",rA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],aA=he("maximize-2",sA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],o4=he("menu",iA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],l4=he("message-circle",oA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Wr=he("message-square",lA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],dA=he("minimize-2",cA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],hm=he("monitor",uA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],fA=he("moon",hA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],c4=he("music",mA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],gA=he("panels-top-left",pA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],d4=he("party-popper",xA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],vA=he("pen-line",yA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],wA=he("pen-tool",bA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],xw=he("pen",_A);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],jA=he("pencil",kA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],SA=he("percent",NA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Kn=he("phone",CA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],u4=he("pill",EA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],TA=he("play",PA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]],sj=he("plug",MA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],xr=he("plus",OA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],LA=he("power",DA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],RA=he("qr-code",AA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],aj=he("radio",zA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Lt=he("refresh-cw",$A);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Es=he("save",IA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],BA=he("scale",FA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],Yp=he("scissors",HA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ls=he("search",WA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],$d=he("send",UA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],jl=he("server",VA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Wg=he("settings",qA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],GA=he("shield",YA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Gp=he("shopping-bag",ZA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],h4=he("shopping-cart",KA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ir=he("sparkles",XA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],f4=he("square-check-big",JA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ug=he("square-pen",QA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],m4=he("square",eR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],wn=he("star",tR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],Zp=he("stethoscope",rR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Xn=he("store",nR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],aR=he("sun",sR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],To=he("target",iR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ar=he("trash-2",oR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],vd=he("trending-up",lR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cR=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],p4=he("triangle-alert",cR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dR=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],uR=he("trophy",dR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],g4=he("truck",hR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fR=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],mR=he("upload",fR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],yw=he("user-plus",pR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],pr=he("user",gR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ts=he("users",xR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],Mh=he("utensils",yR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],x4=he("video",vR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],xv=he("wand-sparkles",bR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]],_R=he("webhook",wR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],y4=he("wrench",kR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Rr=he("x",jR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],fr=he("zap",NR),SR=()=>{const[e,t]=E.useState(!1),[r,n]=E.useState(null),[a,i]=E.useState([]),[o,c]=E.useState(""),[d,u]=E.useState(""),[f,m]=E.useState(null),p=E.useRef(null);E.useEffect(()=>{fetch(`${Y}/settings/public`).then(y=>y.json()).then(y=>{if(y.chat_enabled&&(n(y),y.pusher_key&&y.pusher_cluster)){const _=new YE(y.pusher_key,{cluster:y.pusher_cluster,encrypted:!0});m(_)}}).catch(y=>console.error("Error loading chat config:",y));let v=localStorage.getItem("chat_session_id");return v||(v=KE(),localStorage.setItem("chat_session_id",v)),u(v),fetch(`${Y}/chat/conversations/${v}/messages`).then(y=>y.ok?y.json():[]).then(y=>i(y)).catch(y=>console.error("Error loading messages:",y)),()=>{f&&f.disconnect()}},[]),E.useEffect(()=>{if(f&&d){const v=f.subscribe(`chat_${d}`);return v.bind("new_message",y=>{i(_=>[..._,y])}),()=>{v.unbind_all(),v.unsubscribe()}}},[f,d]),E.useEffect(()=>{var v;(v=p.current)==null||v.scrollIntoView({behavior:"smooth"})},[a,e]);const x=async v=>{if(v.preventDefault(),!o.trim())return;const y={sessionId:d,senderType:"visitor",senderName:"Visitante",message:o,timestamp:new Date};try{(await fetch(`${Y}/chat/message`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)})).ok&&c("")}catch(_){console.error("Error sending message:",_)}};return r?s.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col items-end font-sans",children:[e&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-[350px] sm:w-[380px] mb-4 overflow-hidden border border-slate-100 animate-fade-in-up flex flex-col h-[500px]",children:[s.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-red-600 p-4 flex justify-between items-center text-white shadow-md z-10",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white/20 p-2 rounded-full backdrop-blur-sm",children:s.jsx(Ph,{size:20,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-lg leading-tight",children:r.chat_title||"Soporte NoahPro"}),s.jsxs("div",{className:"flex items-center space-x-1.5",children:[s.jsxs("span",{className:"relative flex h-2 w-2",children:[s.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),s.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}),s.jsx("span",{className:"text-xs font-medium text-orange-50",children:"En lnea ahora"})]})]})]}),s.jsx("button",{onClick:()=>t(!1),className:"text-white/80 hover:text-white hover:bg-white/10 rounded-full p-2 transition-colors",children:s.jsx(Rr,{size:20})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-slate-50 space-y-4",children:[s.jsx("div",{className:"flex justify-start",children:s.jsx("div",{className:"bg-white p-4 rounded-2xl rounded-tl-none shadow-sm max-w-[85%] border border-slate-100 text-slate-700 text-sm leading-relaxed",children:r.chat_welcome_message})}),a.map((v,y)=>s.jsx("div",{className:`flex ${v.senderType==="visitor"?"justify-end":"justify-start"}`,children:s.jsx("div",{className:`p-3 px-4 rounded-2xl shadow-sm max-w-[85%] text-sm leading-relaxed ${v.senderType==="visitor"?"bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-tr-none shadow-orange-500/20":"bg-white text-slate-700 rounded-tl-none border border-slate-100"}`,children:v.message})},y)),s.jsx("div",{ref:p})]}),s.jsxs("form",{onSubmit:x,className:"p-4 bg-white border-t border-slate-100",children:[s.jsxs("div",{className:"flex items-center space-x-2 bg-slate-50 rounded-full px-4 py-2 border border-slate-200 focus-within:border-orange-500 focus-within:ring-2 focus-within:ring-orange-500/20 transition-all",children:[s.jsx("input",{type:"text",value:o,onChange:v=>c(v.target.value),placeholder:"Escribe tu mensaje...",className:"flex-1 bg-transparent border-none focus:ring-0 text-sm text-slate-700 placeholder:text-slate-400"}),s.jsx("button",{type:"submit",disabled:!o.trim(),className:"p-2 rounded-full text-orange-600 hover:bg-orange-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s.jsx($d,{size:18})})]}),s.jsx("div",{className:"text-center mt-2",children:s.jsx("p",{className:"text-[10px] text-slate-400",children:"Powered by NoahPro Tpv"})})]})]}),s.jsx("button",{onClick:()=>t(!e),className:`p-4 rounded-full shadow-2xl hover:shadow-orange-500/30 transform hover:scale-105 transition-all duration-300 group ${e?"bg-slate-800 text-white rotate-90":"bg-gradient-to-r from-orange-500 to-red-600 text-white"}`,children:e?s.jsx(Rr,{size:28}):s.jsx(l4,{size:28,className:"group-hover:animate-pulse"})})]}):null},CR=()=>(E.useEffect(()=>{let e=localStorage.getItem("analytics_session");e||(e=KE(),localStorage.setItem("analytics_session",e));const t=async()=>{try{await fetch(`${Y}/analytics/track`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:e,page:window.location.pathname,referrer:document.referrer})})}catch(n){console.error("Analytics tracking error:",n)}};t();const r=()=>{t()};return window.addEventListener("popstate",r),()=>window.removeEventListener("popstate",r)},[]),null),ij=()=>{const[e,t]=E.useState(!1),[r,n]=E.useState(!1),[a,i]=E.useState(!1),[o,c]=E.useState("http://localhost:5173/demo");E.useEffect(()=>{const u=()=>{n(window.scrollY>20)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]),E.useEffect(()=>{fetch(`${Y}/settings/public`).then(u=>u.json()).then(u=>{c(u.demo_url||"http://localhost:5173/demo")}).catch(u=>{console.error("Error loading settings:",u),c("http://localhost:5173/demo")})},[]);const d=u=>{var f;(f=document.getElementById(u))==null||f.scrollIntoView({behavior:"smooth"}),i(!1)};return s.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-900 font-sans selection:bg-orange-500 selection:text-white overflow-x-hidden",children:[s.jsx(CR,{}),s.jsx(SR,{}),s.jsxs("nav",{className:`fixed top-0 w-full z-50 transition-all duration-300 ${r?"bg-white/95 backdrop-blur-md shadow-md py-2":"bg-transparent py-4"}`,children:[s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsxs("div",{className:"flex items-center space-x-3 cursor-pointer group",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:[s.jsx("div",{className:"h-10 w-10 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-orange-500/20 group-hover:scale-110 transition-transform duration-300",children:s.jsx(fr,{size:20,fill:"currentColor"})}),s.jsxs("div",{children:[s.jsx("h1",{className:`text-xl font-bold tracking-tight transition-colors ${r?"text-slate-900":"text-white"}`,children:"NoahPro Tpv"}),s.jsx("p",{className:"text-[10px] uppercase tracking-widest text-orange-500 font-bold",children:"Verifactu Ready"})]})]}),s.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[["Beneficios","Verifactu","Cmo Funciona"].map(u=>s.jsx("button",{onClick:()=>d(u.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"-")),className:`text-sm font-medium transition-colors hover:text-orange-500 ${r?"text-slate-600":"text-white/90"}`,children:u},u)),s.jsxs("div",{className:"flex items-center space-x-4 ml-4",children:[s.jsx("button",{onClick:()=>window.location.href=o,className:`text-sm font-semibold transition-colors hover:text-orange-500 ${r?"text-slate-900":"text-white"}`,children:"Acceso Demo"}),s.jsx("button",{onClick:()=>t(!0),className:"px-6 py-2.5 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-full text-sm font-bold hover:shadow-lg hover:shadow-orange-500/30 transition-all transform hover:scale-105",children:"Solicitar Informacin"})]})]}),s.jsx("div",{className:"md:hidden flex items-center",children:s.jsx("button",{onClick:()=>i(!a),className:`p-2 ${r?"text-slate-900":"text-white"}`,children:a?s.jsx(Rr,{size:24}):s.jsx(o4,{size:24})})})]})}),a&&s.jsxs("div",{className:"md:hidden absolute top-20 left-0 w-full bg-white border-b border-slate-100 shadow-xl p-4 flex flex-col space-y-4 animate-fade-in-down",children:[s.jsx("button",{onClick:()=>d("beneficios"),className:"text-left font-medium text-slate-600 py-2",children:"Beneficios"}),s.jsx("button",{onClick:()=>d("verifactu"),className:"text-left font-medium text-slate-600 py-2",children:"Ley Antifraude"}),s.jsx("button",{onClick:()=>d("como-funciona"),className:"text-left font-medium text-slate-600 py-2",children:"Cmo Funciona"}),s.jsx("hr",{className:"border-slate-100"}),s.jsx("button",{onClick:()=>window.location.href=o,className:"text-center font-semibold text-slate-900 py-2",children:"Acceso Demo"}),s.jsx("button",{onClick:()=>t(!0),className:"w-full py-3 bg-orange-600 text-white rounded-xl font-bold",children:"Solicitar Informacin"})]})]}),s.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 z-0 bg-fixed bg-cover bg-center",style:{backgroundImage:"url('https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?q=80&w=2070&auto=format&fit=crop')"},children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/70 backdrop-blur-[2px]"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent"})]}),s.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center pt-20",children:[s.jsxs("div",{className:"inline-flex items-center space-x-2 bg-green-500/20 backdrop-blur-md border border-green-400/30 px-4 py-1.5 rounded-full text-sm font-semibold text-green-300 mb-8 animate-fade-in-up",children:[s.jsxs("span",{className:"relative flex h-2 w-2",children:[s.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),s.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}),s.jsx("span",{children:" Verifactu Aplazado hasta 2027 - Adptate Ahora sin Prisas"})]}),s.jsxs("h1",{className:"text-5xl md:text-7xl font-extrabold text-white mb-6 tracking-tight leading-tight drop-shadow-lg",children:["El Software que tu Negocio ",s.jsx("br",{}),s.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-orange-400 to-red-500",children:"Necesita para Crecer"})]}),s.jsxs("p",{className:"text-xl md:text-2xl text-gray-200 mb-10 max-w-3xl mx-auto leading-relaxed font-light",children:["Vende ms, controla mejor y olvdate del papeleo. ",s.jsx("strong",{children:"Todo tu negocio en una sola plataforma"})," que se adapta a ti. Legal, rpido y profesional desde el primer da."]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4 mb-16",children:[s.jsxs("button",{onClick:()=>t(!0),className:"px-8 py-4 bg-orange-600 text-white rounded-2xl font-bold text-lg shadow-xl shadow-orange-600/30 hover:bg-orange-700 transition-all transform hover:scale-105 flex items-center justify-center",children:["Solicitar Propuesta Personalizada ",s.jsx(Fp,{className:"ml-2",size:20})]}),s.jsx("button",{onClick:()=>window.location.href=o,className:"px-8 py-4 bg-white/10 backdrop-blur-md text-white border border-white/20 rounded-2xl font-bold text-lg hover:bg-white/20 transition-all transform hover:scale-105 flex items-center justify-center",children:"Probar Demo Online"})]})]})]}),s.jsx("section",{id:"beneficios",className:"py-24 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-20",children:[s.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"Gestin Profesional para Cualquier Negocio"}),s.jsx("p",{className:"text-xl text-slate-600",children:"Vendas lo que vendas, NoahPro te da las herramientas para facturar, controlar y crecer. Legal, rpido y profesional."})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center mb-24",children:[s.jsxs("div",{className:"relative rounded-2xl overflow-hidden shadow-2xl group",children:[s.jsx("img",{src:"https://images.unsplash.com/photo-1460925895917-afdab827c52f?q=80&w=2015&auto=format&fit=crop",alt:"Gestin eficiente",className:"w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-700"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/80 to-transparent flex items-end p-8",children:s.jsx("h3",{className:"text-2xl font-bold text-white",children:"Control Total de tu Negocio"})})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 h-12 w-12 rounded-xl bg-orange-100 text-orange-600 flex items-center justify-center",children:s.jsx(fr,{size:24})}),s.jsxs("div",{className:"ml-6",children:[s.jsx("h4",{className:"text-xl font-bold text-slate-900 mb-2",children:"Venta gil y Universal"}),s.jsx("p",{className:"text-slate-600",children:"Un TPV rpido para mostrador, servicios profesionales o mesas. T decides cmo vendes, nosotros lo hacemos fcil."})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 h-12 w-12 rounded-xl bg-blue-100 text-blue-600 flex items-center justify-center",children:s.jsx(ts,{size:24})}),s.jsxs("div",{className:"ml-6",children:[s.jsx("h4",{className:"text-xl font-bold text-slate-900 mb-2",children:"Gestin de Clientes"}),s.jsx("p",{className:"text-slate-600",children:"Registra clientes, historial de compras y fideliza. Convierte ventas puntuales en relaciones duraderas."})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 h-12 w-12 rounded-xl bg-green-100 text-green-600 flex items-center justify-center",children:s.jsx(hf,{size:24})}),s.jsxs("div",{className:"ml-6",children:[s.jsx("h4",{className:"text-xl font-bold text-slate-900 mb-2",children:"Control de Negocio 360"}),s.jsx("p",{className:"text-slate-600",children:"Stock, facturacin, presupuestos y gastos. Todo tu negocio bajo control en un solo lugar."})]})]})]})]})]})}),s.jsxs("section",{className:"py-24 bg-gradient-to-br from-slate-900 to-slate-800 text-white relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 opacity-10",children:[s.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-orange-500 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-blue-500 rounded-full blur-3xl"})]}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Un Sistema Flexible para Cualquier Negocio"}),s.jsx("p",{className:"text-xl text-slate-300 max-w-3xl mx-auto",children:"No importa tu sector. NoahPro se adapta a tu forma de trabajar, no al revs."})]}),s.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:[s.jsxs("div",{className:"bg-white/10 backdrop-blur-sm p-6 rounded-2xl border border-white/20 hover:bg-white/15 transition-all",children:[s.jsx("div",{className:"h-12 w-12 bg-orange-500 rounded-xl flex items-center justify-center mb-4",children:s.jsx(J6,{size:24,className:"text-white"})}),s.jsx("h3",{className:"text-xl font-bold mb-3",children:"Hostelera"}),s.jsx("p",{className:"text-slate-300 text-sm mb-4",children:"Restaurantes, bares, cafeteras. Gestin de mesas, comandas y cocina en tiempo real."}),s.jsxs("ul",{className:"space-y-2 text-sm text-slate-400",children:[s.jsxs("li",{className:"flex items-center",children:[s.jsx(Rt,{size:16,className:"text-green-400 mr-2"}),"Control de mesas"]}),s.jsxs("li",{className:"flex items-center",children:[s.jsx(Rt,{size:16,className:"text-green-400 mr-2"}),"Comanda mvil"]})]})]}),s.jsxs("div",{className:"bg-white/10 backdrop-blur-sm p-6 rounded-2xl border border-white/20 hover:bg-white/15 transition-all",children:[s.jsx("div",{className:"h-12 w-12 bg-blue-500 rounded-xl flex items-center justify-center mb-4",children:s.jsx(gA,{size:24,className:"text-white"})}),s.jsx("h3",{className:"text-xl font-bold mb-3",children:"Comercio Retail"}),s.jsx("p",{className:"text-slate-300 text-sm mb-4",children:"Tiendas, boutiques, supermercados. Stock, cdigo de barras y ventas rpidas."}),s.jsxs("ul",{className:"space-y-2 text-sm text-slate-400",children:[s.jsxs("li",{className:"flex items-center",children:[s.jsx(Rt,{size:16,className:"text-green-400 mr-2"}),"Gestin de inventario"]}),s.jsxs("li",{className:"flex items-center",children:[s.jsx(Rt,{size:16,className:"text-green-400 mr-2"}),"Lector de cdigos"]})]})]}),s.jsxs("div",{className:"bg-white/10 backdrop-blur-sm p-6 rounded-2xl border border-white/20 hover:bg-white/15 transition-all",children:[s.jsx("div",{className:"h-12 w-12 bg-pink-500 rounded-xl flex items-center justify-center mb-4",children:s.jsx(wn,{size:24,className:"text-white"})}),s.jsx("h3",{className:"text-xl font-bold mb-3",children:"Clnicas y Esttica"}),s.jsx("p",{className:"text-slate-300 text-sm mb-4",children:"Centros de belleza, spas, clnicas. Citas, tratamientos y facturacin de servicios."}),s.jsxs("ul",{className:"space-y-2 text-sm text-slate-400",children:[s.jsxs("li",{className:"flex items-center",children:[s.jsx(Rt,{size:16,className:"text-green-400 mr-2"}),"Agenda de citas"]}),s.jsxs("li",{className:"flex items-center",children:[s.jsx(Rt,{size:16,className:"text-green-400 mr-2"}),"Historial de clientes"]})]})]}),s.jsxs("div",{className:"bg-white/10 backdrop-blur-sm p-6 rounded-2xl border border-white/20 hover:bg-white/15 transition-all",children:[s.jsx("div",{className:"h-12 w-12 bg-purple-500 rounded-xl flex items-center justify-center mb-4",children:s.jsx(ts,{size:24,className:"text-white"})}),s.jsx("h3",{className:"text-xl font-bold mb-3",children:"Servicios"}),s.jsx("p",{className:"text-slate-300 text-sm mb-4",children:"Consultoras, talleres, autnomos. Presupuestos, facturacin y seguimiento."}),s.jsxs("ul",{className:"space-y-2 text-sm text-slate-400",children:[s.jsxs("li",{className:"flex items-center",children:[s.jsx(Rt,{size:16,className:"text-green-400 mr-2"}),"Presupuestos digitales"]}),s.jsxs("li",{className:"flex items-center",children:[s.jsx(Rt,{size:16,className:"text-green-400 mr-2"}),"Facturacin recurrente"]})]})]})]}),s.jsxs("div",{className:"text-center mt-12",children:[s.jsxs("p",{className:"text-lg text-slate-300 mb-6",children:["Tu negocio es diferente? ",s.jsx("strong",{className:"text-white",children:"Personalizamos NoahPro para ti."})]}),s.jsx("button",{onClick:()=>t(!0),className:"px-8 py-3 bg-orange-600 text-white rounded-xl font-bold hover:bg-orange-700 transition-all shadow-lg",children:"Hablar con un Experto"})]})]})]}),s.jsx("section",{id:"verifactu",className:"py-24 bg-slate-50 relative overflow-hidden",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:s.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center",children:[s.jsx("div",{className:"order-2 lg:order-1",children:s.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-xl border border-slate-100 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-green-50 rounded-bl-full -mr-16 -mt-16 z-0"}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[s.jsx("div",{className:"h-10 w-10 bg-green-100 rounded-full flex items-center justify-center text-green-600",children:s.jsx(GA,{size:20})}),s.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Proceso Automtico Verifactu"})]}),s.jsxs("div",{className:"space-y-0",children:[s.jsxs("div",{className:"flex relative pb-8",children:[s.jsx("div",{className:"h-full w-10 absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"h-full w-1 bg-slate-100 pointer-events-none"})}),s.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-blue-600 text-white flex items-center justify-center relative z-10 font-bold",children:"1"}),s.jsxs("div",{className:"pl-6 pt-2",children:[s.jsx("h4",{className:"font-bold text-slate-900 text-lg",children:"Venta Realizada"}),s.jsx("p",{className:"text-slate-500",children:"El camarero cierra el ticket en el TPV."})]})]}),s.jsxs("div",{className:"flex relative pb-8",children:[s.jsx("div",{className:"h-full w-10 absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"h-full w-1 bg-slate-100 pointer-events-none"})}),s.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-purple-600 text-white flex items-center justify-center relative z-10 font-bold",children:"2"}),s.jsxs("div",{className:"pl-6 pt-2",children:[s.jsx("h4",{className:"font-bold text-slate-900 text-lg",children:"Huella Digital (Hash)"}),s.jsx("p",{className:"text-slate-500",children:"Se genera un cdigo nico encadenado al ticket anterior."})]})]}),s.jsxs("div",{className:"flex relative",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-green-600 text-white flex items-center justify-center relative z-10 font-bold",children:"3"}),s.jsxs("div",{className:"pl-6 pt-2",children:[s.jsx("h4",{className:"font-bold text-slate-900 text-lg",children:"Envo a Hacienda"}),s.jsx("p",{className:"text-slate-500",children:"Registro inmediato en la AEAT y generacin de QR."})]})]})]})]})]})}),s.jsxs("div",{className:"order-1 lg:order-2",children:[s.jsx("div",{className:"inline-block px-4 py-1 bg-red-100 text-red-600 rounded-full font-bold text-sm mb-4",children:" EVITA SANCIONES"}),s.jsx("h3",{className:"text-4xl font-bold text-slate-900 mb-6 leading-tight",children:"Cumple la ley sin mover un dedo"}),s.jsxs("p",{className:"text-lg text-slate-600 mb-6 leading-relaxed",children:["La normativa Antifraude puede suponer multas de hasta ",s.jsx("strong",{children:"50.000"})," por usar software no certificado. Con NoahPro, la tranquilidad viene de serie. Ideal para autnomos y PYMES de cualquier sector."]}),s.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 mb-8 rounded-r-lg",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(Rt,{className:"h-5 w-5 text-green-500 mt-0.5"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-semibold text-green-800 mb-1",children:"Buenas noticias: Verifactu se aplaza hasta 2027"}),s.jsxs("p",{className:"text-sm text-green-700",children:["El gobierno ha prorrogado la obligatoriedad hasta ",s.jsx("strong",{children:"enero 2027"})," (empresas) y ",s.jsx("strong",{children:"julio 2027"})," (autnomos). Tienes tiempo para adaptarte sin estrs, pero ",s.jsx("strong",{children:"los que se adelanten evitarn la saturacin de proveedores en 2026"}),"."]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-slate-700",children:[s.jsx(Rt,{className:"text-green-500",size:20}),s.jsx("span",{children:"Certificado Verifactu"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-slate-700",children:[s.jsx(Rt,{className:"text-green-500",size:20}),s.jsx("span",{children:"Compatible TicketBAI"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-slate-700",children:[s.jsx(Rt,{className:"text-green-500",size:20}),s.jsx("span",{children:"Factura Electrnica"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-slate-700",children:[s.jsx(Rt,{className:"text-green-500",size:20}),s.jsx("span",{children:"Copias de Seguridad"})]})]}),s.jsxs("button",{onClick:()=>t(!0),className:"text-orange-600 font-bold hover:text-orange-700 flex items-center group text-lg",children:["Hablar con un experto en normativa ",s.jsx(Fp,{className:"ml-2 group-hover:translate-x-1 transition-transform",size:20})]})]})]})})}),s.jsxs("section",{className:"py-32 bg-slate-900 text-white relative",children:[s.jsx("div",{className:"absolute inset-0 bg-fixed bg-cover bg-center opacity-40",style:{backgroundImage:"url('https://images.unsplash.com/photo-1514933651103-005eec06c04b?q=80&w=1974&auto=format&fit=crop')"}}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-slate-900/50 via-slate-900/60 to-slate-900"}),s.jsxs("div",{className:"relative z-10 max-w-5xl mx-auto px-4 text-center",children:[s.jsxs("h3",{className:"text-3xl md:text-5xl font-bold text-white mb-6 leading-tight",children:['"La tecnologa debe impulsar tu empresa, ',s.jsx("br",{}),'no complicarla."']}),s.jsx("div",{className:"w-24 h-1 bg-orange-500 mx-auto rounded-full mb-8"}),s.jsx("div",{className:"flex justify-center opacity-20",children:s.jsx(vd,{size:100,className:"text-white"})})]})]}),s.jsx("section",{id:"como-funciona",className:"py-24 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-4",children:"Empieza en 3 pasos sencillos"}),s.jsx("p",{className:"text-xl text-slate-600",children:"Sin complicaciones tcnicas. Nosotros nos encargamos de todo."})]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-8 text-center",children:[s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-6 text-orange-600 font-bold text-2xl",children:"1"}),s.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-3",children:"Solicita Informacin"}),s.jsx("p",{className:"text-slate-600",children:"Djanos tus datos y analizaremos las necesidades de tu negocio sin compromiso."})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-6 text-orange-600 font-bold text-2xl",children:"2"}),s.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-3",children:"Configuracin Personalizada"}),s.jsx("p",{className:"text-slate-600",children:"Adaptamos el sistema a tu negocio, importamos tus datos y formamos a tu equipo."})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-6 text-orange-600 font-bold text-2xl",children:"3"}),s.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-3",children:"Empieza a Facturar"}),s.jsx("p",{className:"text-slate-600",children:"Disfruta de un sistema rpido, seguro y legal desde el primer da."})]})]}),s.jsx("div",{className:"text-center mt-12",children:s.jsx("button",{onClick:()=>t(!0),className:"px-10 py-4 bg-slate-900 text-white rounded-xl font-bold text-lg hover:bg-slate-800 transition-all shadow-lg hover:shadow-xl",children:"Quiero Empezar Ahora"})})]})}),s.jsx("section",{className:"py-24 bg-slate-50 overflow-hidden",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-6",children:"Control total desde cualquier lugar"}),s.jsx("p",{className:"text-lg text-slate-600 mb-6",children:"Accede a las mtricas de tu negocio desde tu mvil, tablet o ordenador. NoahPro est en la nube para que t tengas libertad total."}),s.jsxs("ul",{className:"space-y-4 mb-8",children:[s.jsxs("li",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"h-2 w-2 bg-orange-500 rounded-full"}),s.jsx("span",{className:"text-slate-700",children:"Ventas en tiempo real"})]}),s.jsxs("li",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"h-2 w-2 bg-orange-500 rounded-full"}),s.jsx("span",{className:"text-slate-700",children:"Gestin de stock y proveedores"})]}),s.jsxs("li",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"h-2 w-2 bg-orange-500 rounded-full"}),s.jsx("span",{className:"text-slate-700",children:"Informes de rendimiento y anlisis"})]})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute -inset-4 bg-blue-100 rounded-full blur-3xl opacity-50"}),s.jsx("img",{src:"https://images.unsplash.com/photo-1556742111-a301076d9d18?q=80&w=2070&auto=format&fit=crop",alt:"Control de negocio",className:"relative rounded-2xl shadow-2xl transform -rotate-2 hover:rotate-0 transition-transform duration-500"})]})]})})}),s.jsxs("section",{className:"py-24 bg-slate-900 text-white relative",children:[s.jsx("div",{className:"absolute inset-0 bg-fixed bg-cover bg-center opacity-30",style:{backgroundImage:"url('https://images.unsplash.com/photo-1559339352-11d035aa65de?q=80&w=1974&auto=format&fit=crop')"}}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-slate-900/50 via-slate-900/60 to-slate-900"}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Confan en NoahPro"}),s.jsx("p",{className:"text-xl text-slate-400",children:"Ms de 500 negocios ya duermen tranquilos."})]}),s.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{quote:"Desde que instalamos NoahPro, facturamos el doble y cumplimos con Verifactu sin preocupaciones.",author:"Carlos Ruiz",role:"Dueo, Comercio Retail",stars:5},{quote:"Me preocupaba mucho la ley Verifactu. Con NoahPro me he olvidado del tema. Todo automtico.",author:"Elena M.",role:"Autnoma, Servicios Profesionales",stars:5},{quote:"El soporte es increble. Nos configuraron todo en una tarde y al da siguiente estbamos funcionando.",author:"Javier T.",role:"Gerente, Restaurante",stars:5}].map((u,f)=>s.jsxs("div",{className:"bg-white/5 backdrop-blur-sm p-8 rounded-2xl border border-white/10 hover:bg-white/10 transition-colors",children:[s.jsx("div",{className:"flex text-orange-500 mb-4",children:[...Array(u.stars)].map((m,p)=>s.jsx(wn,{size:16,fill:"currentColor"},p))}),s.jsxs("p",{className:"text-lg text-slate-300 mb-6 italic",children:['"',u.quote,'"']}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-white",children:u.author}),s.jsx("p",{className:"text-sm text-slate-500",children:u.role})]})]},f))})]})]}),s.jsxs("section",{className:"py-24 bg-gradient-to-br from-orange-600 to-red-700 text-white relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-yellow-500/20 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"}),s.jsxs("div",{className:"max-w-4xl mx-auto px-4 text-center relative z-10",children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Hablamos de tu negocio?"}),s.jsx("p",{className:"text-xl text-orange-100 mb-10 max-w-2xl mx-auto",children:"Nuestros expertos te prepararn una propuesta a medida para digitalizar tu negocio y cumplir con la ley."}),s.jsx("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:s.jsx("button",{onClick:()=>t(!0),className:"px-10 py-5 bg-white text-orange-700 rounded-2xl font-bold text-xl shadow-2xl shadow-black/20 hover:bg-orange-50 transition-all transform hover:scale-105",children:"Solicitar Propuesta Sin Compromiso"})}),s.jsx("p",{className:"mt-8 text-sm text-orange-200 opacity-80",children:"* Respuesta garantizada en menos de 24h laborables."})]})]}),s.jsx("footer",{className:"bg-slate-950 text-slate-400 py-12 border-t border-slate-900",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-8",children:[s.jsxs("div",{className:"col-span-1 md:col-span-2",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-orange-500 to-red-600 rounded-lg flex items-center justify-center text-white",children:s.jsx(fr,{size:16,fill:"currentColor"})}),s.jsx("span",{className:"text-xl font-bold text-white",children:"NoahPro Tpv"})]}),s.jsx("p",{className:"max-w-xs mb-4",children:"Software TPV profesional para cualquier negocio. Tecnologa avanzada para empresas que quieren crecer seguros."}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("div",{className:"w-8 h-8 bg-slate-800 rounded-full flex items-center justify-center hover:bg-orange-500 hover:text-white transition-colors cursor-pointer",children:"IG"}),s.jsx("div",{className:"w-8 h-8 bg-slate-800 rounded-full flex items-center justify-center hover:bg-orange-500 hover:text-white transition-colors cursor-pointer",children:"LI"}),s.jsx("div",{className:"w-8 h-8 bg-slate-800 rounded-full flex items-center justify-center hover:bg-orange-500 hover:text-white transition-colors cursor-pointer",children:"TW"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white mb-4",children:"Producto"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx("button",{onClick:()=>d("beneficios"),className:"hover:text-orange-500 transition-colors",children:"Beneficios"})}),s.jsx("li",{children:s.jsx("button",{onClick:()=>d("verifactu"),className:"hover:text-orange-500 transition-colors",children:"Verifactu"})}),s.jsx("li",{children:s.jsx("button",{onClick:()=>d("como-funciona"),className:"hover:text-orange-500 transition-colors",children:"Cmo Funciona"})})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white mb-4",children:"Legal"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx("a",{href:"#",className:"hover:text-orange-500 transition-colors",children:"Aviso Legal"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"hover:text-orange-500 transition-colors",children:"Privacidad"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"hover:text-orange-500 transition-colors",children:"Cookies"})})]})]})]}),s.jsx("div",{className:"border-t border-slate-900 pt-8 text-center text-sm",children:s.jsx("p",{children:" 2025 NoahPro Tpv. Todos los derechos reservados."})})]})}),e&&s.jsx("div",{className:"fixed inset-0 z-[100] overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:s.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 bg-slate-900/80 backdrop-blur-sm transition-opacity","aria-hidden":"true",onClick:()=>t(!1)}),s.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),s.jsxs("div",{className:"relative inline-block align-bottom bg-white rounded-2xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg w-full",children:[s.jsx("div",{className:"absolute top-4 right-4 z-10",children:s.jsx("button",{onClick:()=>t(!1),className:"text-slate-400 hover:text-slate-600 transition-colors",children:s.jsx(Rr,{size:24})})}),s.jsx("div",{className:"p-1",children:s.jsx(g6,{onClose:()=>t(!1)})})]})]})})]})},Ne=({children:e,variant:t="primary",onClick:r,disabled:n=!1,type:a="button",className:i="",...o})=>{const c="btn",d={primary:"btn-primary",secondary:"btn-secondary",success:"btn-success",danger:"btn-danger",ghost:"btn-ghost"};return s.jsx("button",{type:a,onClick:r,disabled:n,className:`${c} ${d[t]} ${i}`,...o,children:e})};function Xt(){return Xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xt.apply(null,arguments)}function Vg(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function oa(e,t){if(e==null)return{};var r,n,a=Vg(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Ni(e){"@babel/helpers - typeof";return Ni=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ni(e)}function ER(e,t){if(Ni(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ni(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function v4(e){var t=ER(e,"string");return Ni(t)=="symbol"?t:t+""}function oj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v4(n.key),n)}}function yr(e,t,r){return t&&oj(e.prototype,t),r&&oj(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function vr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kp(e,t){return Kp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Kp(e,t)}function Gr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kp(e,t)}function bd(e){return bd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bd(e)}function vw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vw=function(){return!!e})()}function PR(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b4(e,t){if(t&&(Ni(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PR(e)}function TR(e){var t=vw();return function(){var r,n=bd(e);if(t){var a=bd(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return b4(this,r)}}var w4={exports:{}},MR="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",OR=MR,DR=OR;function _4(){}function k4(){}k4.resetWarningCache=_4;var LR=function(){function e(n,a,i,o,c,d){if(d!==DR){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:k4,resetWarningCache:_4};return r.PropTypes=r,r};w4.exports=LR();var Pi=w4.exports;const ve=Yr(Pi);/*!
 * Signature Pad v2.3.2
 * https://github.com/szimek/signature_pad
 *
 * Copyright 2017 Szymon Nowak
 * Released under the MIT license
 *
 * The main idea and some parts of the code (e.g. drawing variable width Bzier curve) are taken from:
 * http://corner.squareup.com/2012/07/smoother-signatures.html
 *
 * Implementation of interpolation using cubic Bzier curves is taken from:
 * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
 *
 * Algorithm for approximated length of a Bzier curve is taken from:
 * http://www.lemoda.net/maths/bezier-length/index.html
 *
 */function Rl(e,t,r){this.x=e,this.y=t,this.time=r||new Date().getTime()}Rl.prototype.velocityFrom=function(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):1};Rl.prototype.distanceTo=function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))};Rl.prototype.equals=function(e){return this.x===e.x&&this.y===e.y&&this.time===e.time};function bw(e,t,r,n){this.startPoint=e,this.control1=t,this.control2=r,this.endPoint=n}bw.prototype.length=function(){for(var e=10,t=0,r=void 0,n=void 0,a=0;a<=e;a+=1){var i=a/e,o=this._point(i,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),c=this._point(i,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(a>0){var d=o-r,u=c-n;t+=Math.sqrt(d*d+u*u)}r=o,n=c}return t};bw.prototype._point=function(e,t,r,n,a){return t*(1-e)*(1-e)*(1-e)+3*r*(1-e)*(1-e)*e+3*n*(1-e)*e*e+a*e*e*e};function AR(e,t,r){var n,a,i,o=null,c=0;r||(r={});var d=function(){c=r.leading===!1?0:Date.now(),o=null,i=e.apply(n,a),o||(n=a=null)};return function(){var u=Date.now();!c&&r.leading===!1&&(c=u);var f=t-(u-c);return n=this,a=arguments,f<=0||f>t?(o&&(clearTimeout(o),o=null),c=u,i=e.apply(n,a),o||(n=a=null)):!o&&r.trailing!==!1&&(o=setTimeout(d,f)),i}}function Et(e,t){var r=this,n=t||{};this.velocityFilterWeight=n.velocityFilterWeight||.7,this.minWidth=n.minWidth||.5,this.maxWidth=n.maxWidth||2.5,this.throttle="throttle"in n?n.throttle:16,this.minDistance="minDistance"in n?n.minDistance:5,this.throttle?this._strokeMoveUpdate=AR(Et.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=Et.prototype._strokeUpdate,this.dotSize=n.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=n.penColor||"black",this.backgroundColor=n.backgroundColor||"rgba(0,0,0,0)",this.onBegin=n.onBegin,this.onEnd=n.onEnd,this._canvas=e,this._ctx=e.getContext("2d"),this.clear(),this._handleMouseDown=function(a){a.which===1&&(r._mouseButtonDown=!0,r._strokeBegin(a))},this._handleMouseMove=function(a){r._mouseButtonDown&&r._strokeMoveUpdate(a)},this._handleMouseUp=function(a){a.which===1&&r._mouseButtonDown&&(r._mouseButtonDown=!1,r._strokeEnd(a))},this._handleTouchStart=function(a){if(a.targetTouches.length===1){var i=a.changedTouches[0];r._strokeBegin(i)}},this._handleTouchMove=function(a){a.preventDefault();var i=a.targetTouches[0];r._strokeMoveUpdate(i)},this._handleTouchEnd=function(a){var i=a.target===r._canvas;i&&(a.preventDefault(),r._strokeEnd(a))},this.on()}Et.prototype.clear=function(){var e=this._ctx,t=this._canvas;e.fillStyle=this.backgroundColor,e.clearRect(0,0,t.width,t.height),e.fillRect(0,0,t.width,t.height),this._data=[],this._reset(),this._isEmpty=!0};Et.prototype.fromDataURL=function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=new Image,a=r.ratio||window.devicePixelRatio||1,i=r.width||this._canvas.width/a,o=r.height||this._canvas.height/a;this._reset(),n.src=e,n.onload=function(){t._ctx.drawImage(n,0,0,i,o)},this._isEmpty=!1};Et.prototype.toDataURL=function(e){var t;switch(e){case"image/svg+xml":return this._toSVG();default:for(var r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return(t=this._canvas).toDataURL.apply(t,[e].concat(n))}};Et.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};Et.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};Et.prototype.isEmpty=function(){return this._isEmpty};Et.prototype._strokeBegin=function(e){this._data.push([]),this._reset(),this._strokeUpdate(e),typeof this.onBegin=="function"&&this.onBegin(e)};Et.prototype._strokeUpdate=function(e){var t=e.clientX,r=e.clientY,n=this._createPoint(t,r),a=this._data[this._data.length-1],i=a&&a[a.length-1],o=i&&n.distanceTo(i)<this.minDistance;if(!(i&&o)){var c=this._addPoint(n),d=c.curve,u=c.widths;d&&u&&this._drawCurve(d,u.start,u.end),this._data[this._data.length-1].push({x:n.x,y:n.y,time:n.time,color:this.penColor})}};Et.prototype._strokeEnd=function(e){var t=this.points.length>2,r=this.points[0];if(!t&&r&&this._drawDot(r),r){var n=this._data[this._data.length-1],a=n[n.length-1];r.equals(a)||n.push({x:r.x,y:r.y,time:r.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(e)};Et.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};Et.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};Et.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};Et.prototype._createPoint=function(e,t,r){var n=this._canvas.getBoundingClientRect();return new Rl(e-n.left,t-n.top,r||new Date().getTime())};Et.prototype._addPoint=function(e){var t=this.points,r=void 0;if(t.push(e),t.length>2){t.length===3&&t.unshift(t[0]),r=this._calculateCurveControlPoints(t[0],t[1],t[2]);var n=r.c2;r=this._calculateCurveControlPoints(t[1],t[2],t[3]);var a=r.c1,i=new bw(t[1],n,a,t[2]),o=this._calculateCurveWidths(i);return t.shift(),{curve:i,widths:o}}return{}};Et.prototype._calculateCurveControlPoints=function(e,t,r){var n=e.x-t.x,a=e.y-t.y,i=t.x-r.x,o=t.y-r.y,c={x:(e.x+t.x)/2,y:(e.y+t.y)/2},d={x:(t.x+r.x)/2,y:(t.y+r.y)/2},u=Math.sqrt(n*n+a*a),f=Math.sqrt(i*i+o*o),m=c.x-d.x,p=c.y-d.y,x=f/(u+f),v={x:d.x+m*x,y:d.y+p*x},y=t.x-v.x,_=t.y-v.y;return{c1:new Rl(c.x+y,c.y+_),c2:new Rl(d.x+y,d.y+_)}};Et.prototype._calculateCurveWidths=function(e){var t=e.startPoint,r=e.endPoint,n={start:null,end:null},a=this.velocityFilterWeight*r.velocityFrom(t)+(1-this.velocityFilterWeight)*this._lastVelocity,i=this._strokeWidth(a);return n.start=this._lastWidth,n.end=i,this._lastVelocity=a,this._lastWidth=i,n};Et.prototype._strokeWidth=function(e){return Math.max(this.maxWidth/(e+1),this.minWidth)};Et.prototype._drawPoint=function(e,t,r){var n=this._ctx;n.moveTo(e,t),n.arc(e,t,r,0,2*Math.PI,!1),this._isEmpty=!1};Et.prototype._drawCurve=function(e,t,r){var n=this._ctx,a=r-t,i=Math.floor(e.length());n.beginPath();for(var o=0;o<i;o+=1){var c=o/i,d=c*c,u=d*c,f=1-c,m=f*f,p=m*f,x=p*e.startPoint.x;x+=3*m*c*e.control1.x,x+=3*f*d*e.control2.x,x+=u*e.endPoint.x;var v=p*e.startPoint.y;v+=3*m*c*e.control1.y,v+=3*f*d*e.control2.y,v+=u*e.endPoint.y;var y=t+u*a;this._drawPoint(x,v,y)}n.closePath(),n.fill()};Et.prototype._drawDot=function(e){var t=this._ctx,r=typeof this.dotSize=="function"?this.dotSize():this.dotSize;t.beginPath(),this._drawPoint(e.x,e.y,r),t.closePath(),t.fill()};Et.prototype._fromData=function(e,t,r){for(var n=0;n<e.length;n+=1){var a=e[n];if(a.length>1)for(var i=0;i<a.length;i+=1){var o=a[i],c=new Rl(o.x,o.y,o.time),d=o.color;if(i===0)this.penColor=d,this._reset(),this._addPoint(c);else if(i!==a.length-1){var u=this._addPoint(c),f=u.curve,m=u.widths;f&&m&&t(f,m,d)}}else{this._reset();var p=a[0];r(p)}}};Et.prototype._toSVG=function(){var e=this,t=this._data,r=this._canvas,n=Math.max(window.devicePixelRatio||1,1),a=0,i=0,o=r.width/n,c=r.height/n,d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttributeNS(null,"width",r.width),d.setAttributeNS(null,"height",r.height),this._fromData(t,function(w,b,N){var S=document.createElement("path");if(!isNaN(w.control1.x)&&!isNaN(w.control1.y)&&!isNaN(w.control2.x)&&!isNaN(w.control2.y)){var C="M "+w.startPoint.x.toFixed(3)+","+w.startPoint.y.toFixed(3)+" "+("C "+w.control1.x.toFixed(3)+","+w.control1.y.toFixed(3)+" ")+(w.control2.x.toFixed(3)+","+w.control2.y.toFixed(3)+" ")+(w.endPoint.x.toFixed(3)+","+w.endPoint.y.toFixed(3));S.setAttribute("d",C),S.setAttribute("stroke-width",(b.end*2.25).toFixed(3)),S.setAttribute("stroke",N),S.setAttribute("fill","none"),S.setAttribute("stroke-linecap","round"),d.appendChild(S)}},function(w){var b=document.createElement("circle"),N=typeof e.dotSize=="function"?e.dotSize():e.dotSize;b.setAttribute("r",N),b.setAttribute("cx",w.x),b.setAttribute("cy",w.y),b.setAttribute("fill",w.color),d.appendChild(b)});var u="data:image/svg+xml;base64,",f='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+a+" "+i+" "+o+" "+c+'"')+(' width="'+o+'"')+(' height="'+c+'"')+">",m=d.innerHTML;if(m===void 0){var p=document.createElement("dummy"),x=d.childNodes;p.innerHTML="";for(var v=0;v<x.length;v+=1)p.appendChild(x[v].cloneNode(!0));m=p.innerHTML}var y="</svg>",_=f+m+y;return u+btoa(_)};Et.prototype.fromData=function(e){var t=this;this.clear(),this._fromData(e,function(r,n){return t._drawCurve(r,n.start,n.end)},function(r){return t._drawDot(r)}),this._data=e};Et.prototype.toData=function(){return this._data};var j4={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(kn,function(){return function(r){function n(i){if(a[i])return a[i].exports;var o=a[i]={exports:{},id:i,loaded:!1};return r[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var a={};return n.m=r,n.c=a,n.p="",n(0)}([function(r,n){function a(u){var f=u.getContext("2d"),m=u.width,p=u.height,x=f.getImageData(0,0,m,p).data,v=c(!0,m,p,x),y=c(!1,m,p,x),_=d(!0,m,p,x),w=d(!1,m,p,x),b=w-_+1,N=y-v+1,S=f.getImageData(_,v,b,N);return u.width=b,u.height=N,f.clearRect(0,0,b,N),f.putImageData(S,0,0),u}function i(u,f,m,p){return{red:p[4*(m*f+u)],green:p[4*(m*f+u)+1],blue:p[4*(m*f+u)+2],alpha:p[4*(m*f+u)+3]}}function o(u,f,m,p){return i(u,f,m,p).alpha}function c(u,f,m,p){for(var x=u?1:-1,v=u?0:m-1,y=v;u?y<m:y>-1;y+=x)for(var _=0;_<f;_++)if(o(_,y,f,p))return y;return null}function d(u,f,m,p){for(var x=u?1:-1,v=u?0:f-1,y=v;u?y<f:y>-1;y+=x)for(var _=0;_<m;_++)if(o(y,_,f,p))return y;return null}Object.defineProperty(n,"__esModule",{value:!0}),n.default=a}])})})(j4);var RR=j4.exports;const zR=Yr(RR);var $R=["canvasProps","clearOnResize"],qg=function(e){Gr(r,e);var t=TR(r);function r(){var n;vr(this,r);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=t.call.apply(t,[this].concat(i)),n.staticThis=n.constructor,n._sigPad=null,n._canvas=null,n.setRef=function(c){n._canvas=c,n._canvas===null&&(n._sigPad=null)},n._excludeOurProps=function(){var c=n.props;c.canvasProps,c.clearOnResize;var d=oa(c,$R);return d},n.componentDidMount=function(){var c=n.getCanvas();n._sigPad=new Et(c,n._excludeOurProps()),n._resizeCanvas(),n.on()},n.componentWillUnmount=function(){n.off()},n.componentDidUpdate=function(){Object.assign(n._sigPad,n._excludeOurProps())},n.getCanvas=function(){if(n._canvas===null)throw n.staticThis.refNullError;return n._canvas},n.getTrimmedCanvas=function(){var c=n.getCanvas(),d=document.createElement("canvas");return d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0),zR(d)},n.getSignaturePad=function(){if(n._sigPad===null)throw n.staticThis.refNullError;return n._sigPad},n._checkClearOnResize=function(){n.props.clearOnResize&&n._resizeCanvas()},n._resizeCanvas=function(){var c,d,u=(c=n.props.canvasProps)!==null&&c!==void 0?c:{},f=u.width,m=u.height;if(!(typeof f<"u"&&typeof m<"u")){var p=n.getCanvas(),x=Math.max((d=window.devicePixelRatio)!==null&&d!==void 0?d:1,1);typeof f>"u"&&(p.width=p.offsetWidth*x),typeof m>"u"&&(p.height=p.offsetHeight*x),p.getContext("2d").scale(x,x),n.clear()}},n.render=function(){var c=n.props.canvasProps;return J.createElement("canvas",Xt({ref:n.setRef},c))},n.on=function(){return window.addEventListener("resize",n._checkClearOnResize),n.getSignaturePad().on()},n.off=function(){return window.removeEventListener("resize",n._checkClearOnResize),n.getSignaturePad().off()},n.clear=function(){return n.getSignaturePad().clear()},n.isEmpty=function(){return n.getSignaturePad().isEmpty()},n.fromDataURL=function(c,d){return n.getSignaturePad().fromDataURL(c,d)},n.toDataURL=function(c,d){return n.getSignaturePad().toDataURL(c,d)},n.fromData=function(c){return n.getSignaturePad().fromData(c)},n.toData=function(){return n.getSignaturePad().toData()},n}return yr(r)}(E.Component);qg.propTypes={velocityFilterWeight:ve.number,minWidth:ve.number,maxWidth:ve.number,minDistance:ve.number,dotSize:ve.oneOfType([ve.number,ve.func]),penColor:ve.string,throttle:ve.number,onEnd:ve.func,onBegin:ve.func,canvasProps:ve.object,clearOnResize:ve.bool};qg.defaultProps={clearOnResize:!0};qg.refNullError=new Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.");const IR=({isOpen:e,onClose:t,onSubmit:r,proposalData:n})=>{const a=E.useRef(null),[i,o]=E.useState({fullName:"",position:"",company:"",dni:"",email:"",phone:""}),[c,d]=E.useState({});if(!e)return null;const u=()=>{var p;(p=a.current)==null||p.clear()},f=()=>{var x;const p={};return i.fullName.trim()||(p.fullName="Nombre completo requerido"),i.position.trim()||(p.position="Cargo requerido"),i.company.trim()||(p.company="Empresa requerida"),i.dni.trim()||(p.dni="DNI/NIF requerido"),i.email.trim()||(p.email="Email requerido"),i.email&&!/\S+@\S+\.\S+/.test(i.email)&&(p.email="Email invlido"),(x=a.current)!=null&&x.isEmpty()&&(p.signature="Firma requerida"),d(p),Object.keys(p).length===0},m=async p=>{var y;if(p.preventDefault(),!f())return;const x=(y=a.current)==null?void 0:y.toDataURL(),v={...i,signature:x,signedAt:new Date().toISOString(),proposalId:n==null?void 0:n.id};r(v)};return s.jsx("div",{className:"modal-backdrop",onClick:t,children:s.jsxs("div",{className:"modal-content max-w-3xl",onClick:p=>p.stopPropagation(),children:[s.jsx("div",{className:"bg-blue-600 px-6 py-4 text-white",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold",children:"Firma de Propuesta"}),s.jsx("p",{className:"text-blue-100 text-sm mt-1",children:"Por favor, complete sus datos y firme para aceptar la propuesta"})]}),s.jsx("button",{onClick:t,className:"p-2 hover:bg-blue-700 rounded-lg transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),s.jsxs("form",{onSubmit:m,className:"p-6 max-h-[calc(90vh-200px)] overflow-y-auto",children:[n&&s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 border border-gray-200",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Resumen de la Propuesta"}),s.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Ttulo:"})," ",n.title]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Precio Total:"})," ",parseFloat(n.total_price).toLocaleString("es-ES",{style:"currency",currency:"EUR"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nombre Completo ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:i.fullName,onChange:p=>o({...i,fullName:p.target.value}),className:`input ${c.fullName?"border-red-500":""}`,placeholder:"Juan Prez Garca"}),c.fullName&&s.jsx("p",{className:"text-xs text-red-500 mt-1",children:c.fullName})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Cargo ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:i.position,onChange:p=>o({...i,position:p.target.value}),className:`input ${c.position?"border-red-500":""}`,placeholder:"Director General"}),c.position&&s.jsx("p",{className:"text-xs text-red-500 mt-1",children:c.position})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Empresa ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:i.company,onChange:p=>o({...i,company:p.target.value}),className:`input ${c.company?"border-red-500":""}`,placeholder:"Mi Empresa S.L."}),c.company&&s.jsx("p",{className:"text-xs text-red-500 mt-1",children:c.company})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["DNI/NIF ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:i.dni,onChange:p=>o({...i,dni:p.target.value}),className:`input ${c.dni?"border-red-500":""}`,placeholder:"12345678A"}),c.dni&&s.jsx("p",{className:"text-xs text-red-500 mt-1",children:c.dni})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"email",value:i.email,onChange:p=>o({...i,email:p.target.value}),className:`input ${c.email?"border-red-500":""}`,placeholder:"juan@empresa.com"}),c.email&&s.jsx("p",{className:"text-xs text-red-500 mt-1",children:c.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telfono"}),s.jsx("input",{type:"tel",value:i.phone,onChange:p=>o({...i,phone:p.target.value}),className:"input",placeholder:"+34 600 000 000"})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Firma Digital ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("div",{className:"border-2 border-gray-300 rounded-lg overflow-hidden bg-white",children:s.jsx(qg,{ref:a,canvasProps:{className:"w-full h-48 cursor-crosshair",style:{touchAction:"none"}},backgroundColor:"white"})}),s.jsxs("div",{className:"flex justify-between items-center mt-2",children:[s.jsx("button",{type:"button",onClick:u,className:"text-sm text-gray-600 hover:text-gray-900 underline",children:"Limpiar firma"}),c.signature&&s.jsx("p",{className:"text-xs text-red-500",children:c.signature})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Firme en el recuadro usando su ratn o pantalla tctil"})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:s.jsxs("p",{className:"text-xs text-gray-700",children:[s.jsx("strong",{children:"Aviso Legal:"})," Al firmar este documento, acepta los trminos y condiciones de la propuesta presentada. Esta firma tiene validez legal y vincula a las partes segn lo establecido en la Ley 6/2020 de servicios de la sociedad de la informacin y comercio electrnico."]})}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2.5 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Firmar y Aceptar Propuesta"})]})]})]})})},FR=()=>{const[e,t]=E.useState(null),[r,n]=E.useState(!0),[a,i]=E.useState(""),[o,c]=E.useState([]),[d,u]=E.useState(""),[f,m]=E.useState(!1),[p,x]=E.useState(!1),[v,y]=E.useState(!1),[_,w]=E.useState(!1),b=Ht(),N=window.location.pathname.split("/").pop();E.useEffect(()=>{S()},[N]),E.useEffect(()=>{e&&O()},[e]);const S=async()=>{try{const F=await fetch(`${Y}/proposals/public/${N}`);if(!F.ok)throw new Error("Propuesta no encontrada o expirada");const G=await F.json();t(G),y(G.status==="accepted"),C(N)}catch(F){i(F.message)}finally{n(!1)}},C=async F=>{try{await fetch(`${Y}/tracking/proposals/${F}/view`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({duration:0})})}catch(G){console.error("Error tracking view:",G)}},O=async()=>{if(e)try{const F=await fetch(`${Y}/proposals/${e.id}/comments`);if(F.ok){const G=await F.json();c(Array.isArray(G)?G:[])}}catch(F){console.error("Error fetching comments:",F),c([])}},A=async F=>{if(F.preventDefault(),!!d.trim()){m(!0);try{(await fetch(`${Y}/proposals/${e.id}/comments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({author:e.lead_name,authorType:"client",comment:d})})).ok?(u(""),O()):b.error("Error al enviar el comentario")}catch(G){console.error("Error submitting comment:",G),b.error("Error al enviar el comentario")}finally{m(!1)}}},z=()=>{w(!0)},$=async F=>{x(!0);try{const G=await fetch(`${Y}/proposals/${e.id}/accept`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(G.ok)y(!0),w(!1),b.success("Propuesta aceptada! Te hemos enviado un email de confirmacin. Nuestro equipo te contactar pronto.");else{const ee=await G.json();b.error(`Error al aceptar la propuesta: ${ee.error||"Error desconocido"}`)}}catch(G){console.error("Error accepting proposal:",G),b.error("Error de conexin. Por favor intenta de nuevo ms tarde.")}finally{x(!1)}};if(r)return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})});if(a)return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"text-center p-8 bg-white dark:bg-gray-800 rounded-xl shadow-lg max-w-md border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-5xl mb-4",children:""}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Lo sentimos"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:a})]})});if(!e)return null;const W=e.content_json||{items:[]};return s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 font-sans",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10",children:s.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-orange-600 to-red-600 rounded-lg flex items-center justify-center text-white font-bold",children:"N"}),s.jsx("span",{className:"font-bold text-xl text-gray-900 dark:text-white",children:"NoahPro"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("a",{href:"mailto:contacto@noahpro.com",className:"text-sm text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",children:"Dudas? Contctanos"}),s.jsx(Ne,{variant:"primary",onClick:z,disabled:p||v,children:v?" Propuesta Aceptada":p?"Aceptando...":"Aceptar Propuesta"})]})]})}),s.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden mb-8",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 px-8 py-10 text-white",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold mb-2",children:e.title}),s.jsxs("p",{className:"opacity-90 text-lg",children:["Preparada para: ",e.lead_name," (",e.business_name,")"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm opacity-75 mb-1",children:"Fecha de emisin"}),s.jsx("p",{className:"font-medium",children:new Date(e.created_at).toLocaleDateString()})]})]})}),s.jsx("div",{className:"p-8",children:s.jsx("div",{className:"prose max-w-none text-gray-600 dark:text-gray-300",children:s.jsx("p",{className:"text-lg leading-relaxed whitespace-pre-line",children:e.description})})})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden mb-8",children:s.jsxs("div",{className:"p-8",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Resumen de la Inversin"}),s.jsx("div",{className:"space-y-4",children:W.items&&W.items.length>0?W.items.map((F,G)=>s.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:F.name}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:F.description})]}),s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:parseFloat(F.price).toLocaleString("es-ES",{style:"currency",currency:"EUR"})})]},G)):s.jsxs("div",{className:"flex justify-between items-center py-3",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Servicios detallados en la descripcin"}),s.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"-"})]})}),s.jsx("div",{className:"mt-8 pt-8 border-t border-gray-200 dark:border-gray-700 flex justify-end",children:s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Total (Impuestos no incluidos)"}),s.jsx("p",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:parseFloat(e.total_price).toLocaleString("es-ES",{style:"currency",currency:"EUR"})})]})})]})}),s.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden mb-8",children:s.jsxs("div",{className:"p-8",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Comentarios y Dudas"}),s.jsx("div",{className:"space-y-6 mb-8 max-h-96 overflow-y-auto",children:o.length===0?s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay comentarios an. Escribe si tienes alguna duda!"}):o.map(F=>s.jsx("div",{className:`flex ${F.author_type==="client"?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-[80%] rounded-2xl px-5 py-3 ${F.author_type==="client"?"bg-orange-50 text-orange-900 rounded-br-none":"bg-gray-100 text-gray-800 rounded-bl-none"}`,children:[s.jsxs("div",{className:"flex justify-between items-baseline mb-1 space-x-4",children:[s.jsx("span",{className:"font-bold text-sm",children:F.author}),s.jsx("span",{className:"text-xs opacity-60",children:new Date(F.created_at).toLocaleString()})]}),s.jsx("p",{className:"text-sm",children:F.comment})]})},F.id))}),s.jsxs("form",{onSubmit:A,className:"relative",children:[s.jsx("textarea",{value:d,onChange:F=>u(F.target.value),placeholder:"Escribe tu pregunta o comentario aqu...",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent pr-12",rows:"3"}),s.jsx("button",{type:"submit",disabled:f||!d.trim(),className:"absolute bottom-3 right-3 p-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 transition-colors",children:""})]})]})}),s.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden mb-8",children:s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"flex items-start justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Hablamos?"}),s.jsx("p",{className:"text-gray-500",children:"Agenda una videollamada para resolver dudas en directo."})]}),s.jsx("div",{className:"text-4xl",children:""})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha y Hora Preferida"}),s.jsx("input",{type:"datetime-local",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500",onChange:async F=>{if(!F.target.value)return;const G=new Date(F.target.value);if(confirm(`Confirmar reunin para el ${G.toLocaleString()}?`))try{(await fetch(`${Y}/meetings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({proposalId:e.id,leadId:e.lead_id,title:`Reunin sobre ${e.title}`,description:"Revisin de propuesta y dudas",scheduledDate:G.toISOString(),durationMinutes:45})})).ok?b.success("Reunin agendada! Te hemos enviado los detalles por email."):b.error("Error al agendar. Intntalo de nuevo.")}catch{b.error("Error de conexin")}}})]}),s.jsxs("div",{className:"bg-orange-50 p-4 rounded-xl text-sm text-orange-800",children:[s.jsx("p",{className:"font-bold mb-2",children:"Incluye:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsx("li",{children:"Demo en vivo del TPV"}),s.jsx("li",{children:"Resolucin de dudas tcnicas"}),s.jsx("li",{children:"Asesoramiento sobre Verifactu"})]})]})]})]})}),s.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:s.jsxs("div",{className:"p-8",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Trminos y Condiciones"}),s.jsxs("div",{className:"text-sm text-gray-500 space-y-2 mb-8",children:[s.jsx("p",{children:"1. Esta propuesta es vlida por 15 das a partir de la fecha de emisin."}),s.jsx("p",{children:"2. El pago se realizar segn lo acordado en las condiciones generales."}),s.jsx("p",{children:"3. NoahPro se compromete a la confidencialidad de los datos proporcionados."})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 bg-gray-50 p-6 rounded-xl border border-gray-200",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-900",children:"Listo para empezar?"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Acepta la propuesta para iniciar el proyecto inmediatamente."})]}),s.jsx(Ne,{variant:"primary",className:"w-full sm:w-auto px-8 py-3 text-lg shadow-xl",onClick:z,disabled:p||v,children:v?" Propuesta Aceptada":p?"Aceptando...":"Aceptar Propuesta"})]})]})})]}),s.jsx(IR,{isOpen:_,onClose:()=>w(!1),onSubmit:$,proposalData:e}),s.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8 text-center text-gray-400 text-sm",children:[" ",new Date().getFullYear()," NoahPro. Todos los derechos reservados."]})]})},Ye=({label:e,type:t="text",value:r,onChange:n,placeholder:a="",error:i="",required:o=!1,disabled:c=!1,className:d="",icon:u=null,...f})=>s.jsxs("div",{className:`mb-4 ${d}`,children:[e&&s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-200 mb-2",children:[e,o&&s.jsx("span",{className:"text-danger ml-1",children:"*"})]}),s.jsxs("div",{className:"relative",children:[u&&s.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 pointer-events-none",children:u}),s.jsx("input",{type:t,value:r,onChange:n,placeholder:a,disabled:c,required:o,className:`input w-full ${u?"pl-10":""} ${i?"border-danger focus:ring-danger":""}`,...f})]}),i&&s.jsx("p",{className:"mt-1 text-sm text-danger",children:i})]}),BR=()=>{const[e,t]=E.useState({username:"",password:""}),[r,n]=E.useState(""),[a,i]=E.useState(!1),[o,c]=E.useState(!1),d=async u=>{u.preventDefault(),i(!0),n("");try{const f=await fetch(`${Y}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),m=await f.json();if(!f.ok)throw new Error(m.error||"Error de autenticacin");localStorage.setItem("crm_token",m.token),localStorage.setItem("user",JSON.stringify(m.user)),window.location.href="/crm/dashboard"}catch(f){n(f.message)}finally{i(!1)}};return s.jsxs("div",{className:"min-h-screen bg-white flex",children:[s.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-orange-500 via-red-500 to-red-600 p-12 flex-col justify-between relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-orange-400/20 rounded-full blur-3xl"}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[s.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center",children:s.jsx(fr,{className:"w-7 h-7 text-white"})}),s.jsx("h1",{className:"text-3xl font-bold text-white",children:"NoahPro TPV"})]}),s.jsxs("div",{className:"space-y-6 max-w-md",children:[s.jsxs("h2",{className:"text-4xl font-bold text-white leading-tight",children:["Panel de Gestin",s.jsx("br",{}),"Comercial Interno"]}),s.jsx("p",{className:"text-lg text-orange-50",children:"Sistema de gestin centralizada para administrar leads, propuestas y clientes de NoahPro TPV."})]})]}),s.jsx("div",{className:"relative z-10",children:s.jsxs("div",{className:"grid grid-cols-3 gap-6 text-white",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold mb-1",children:"CRM"}),s.jsx("div",{className:"text-sm text-orange-100",children:"Gestin Interna"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold mb-1",children:"TPV"}),s.jsx("div",{className:"text-sm text-orange-100",children:"NoahPro"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold mb-1",children:"24/7"}),s.jsx("div",{className:"text-sm text-orange-100",children:"Acceso"})]})]})})]}),s.jsx("div",{className:"flex-1 flex items-center justify-center p-8 lg:p-12",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsx("div",{className:"lg:hidden flex items-center justify-center mb-8",children:s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-red-600 rounded-2xl flex items-center justify-center",children:s.jsx(fr,{className:"w-9 h-9 text-white"})})}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Acceso al Panel CRM"}),s.jsx("p",{className:"text-gray-600",children:"Portal de gestin interna para equipo comercial"})]}),s.jsxs("form",{onSubmit:d,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Usuario"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:s.jsx(pr,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",value:e.username,onChange:u=>t({...e,username:u.target.value}),placeholder:"Usuario corporativo",className:"w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all outline-none text-gray-900 placeholder-gray-400",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Contrasea"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:s.jsx(Th,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:o?"text":"password",value:e.password,onChange:u=>t({...e,password:u.target.value}),placeholder:"",className:"w-full pl-12 pr-12 py-3 border-2 border-gray-200 rounded-xl focus:border-orange-500 focus:ring-4 focus:ring-orange-100 transition-all outline-none text-gray-900 placeholder-gray-400",required:!0}),s.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 focus:outline-none",children:o?s.jsx(Wp,{className:"h-5 w-5"}):s.jsx(ln,{className:"h-5 w-5"})})]})]}),r&&s.jsxs("div",{className:"p-4 bg-red-50 text-red-600 text-sm rounded-xl border-2 border-red-100 flex items-center space-x-2",children:[s.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),s.jsx("span",{children:r})]}),s.jsxs("button",{type:"submit",disabled:a,className:"w-full py-4 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-xl font-semibold text-lg hover:shadow-lg hover:shadow-orange-500/50 transition-all duration-200 flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed group",children:[s.jsx("span",{children:a?"Verificando...":"Acceder al Panel"}),!a&&s.jsx(Fp,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]}),s.jsx("div",{className:"mt-8 text-center",children:s.jsxs("a",{href:"/",className:"text-sm text-gray-500 hover:text-gray-700 transition-colors inline-flex items-center space-x-1",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),s.jsx("span",{children:"Volver a la App Principal"})]})}),s.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2 text-xs text-gray-500",children:[s.jsx(Th,{className:"w-4 h-4"}),s.jsx("span",{children:"Conexin segura y encriptada"})]})})]})})]})},Yl=({isOpen:e,onClose:t,onConfirm:r,title:n="Ests seguro?",message:a,confirmText:i="Confirmar",cancelText:o="Cancelar",type:c="danger"})=>{if(!e)return null;const d={danger:{bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",text:"text-red-800 dark:text-red-200",icon:"text-red-600 dark:text-red-400"},warning:{bg:"bg-orange-50 dark:bg-orange-900/20",border:"border-orange-200 dark:border-orange-800",text:"text-orange-800 dark:text-orange-200",icon:"text-orange-600 dark:text-orange-400"},info:{bg:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-200 dark:border-blue-800",text:"text-blue-800 dark:text-blue-200",icon:"text-blue-600 dark:text-blue-400"}},u=d[c]||d.danger;return s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[99999] p-4 text-left",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full p-6 shadow-2xl relative animate-fadeIn",children:[s.jsx("div",{className:`${u.bg} rounded-lg p-4 mb-4 border ${u.border}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(p4,{className:`w-5 h-5 ${u.icon} flex-shrink-0 mt-0.5`}),s.jsxs("div",{children:[s.jsx("h3",{className:`font-bold ${u.text} mb-1`,children:n}),s.jsx("p",{className:`text-sm ${u.text}`,children:a})]})]})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(Ne,{variant:"secondary",onClick:t,className:"flex-1",children:o}),s.jsx(Ne,{onClick:()=>{r(),t()},className:"flex-1",children:i})]})]})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ff(e){return e+.5|0}const lo=(e,t,r)=>Math.max(Math.min(e,r),t);function Fu(e){return lo(ff(e*2.55),0,255)}function ko(e){return lo(ff(e*255),0,255)}function li(e){return lo(ff(e/2.55)/100,0,1)}function lj(e){return lo(ff(e*100),0,100)}const vs={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},yv=[..."0123456789ABCDEF"],HR=e=>yv[e&15],WR=e=>yv[(e&240)>>4]+yv[e&15],fm=e=>(e&240)>>4===(e&15),UR=e=>fm(e.r)&&fm(e.g)&&fm(e.b)&&fm(e.a);function VR(e){var t=e.length,r;return e[0]==="#"&&(t===4||t===5?r={r:255&vs[e[1]]*17,g:255&vs[e[2]]*17,b:255&vs[e[3]]*17,a:t===5?vs[e[4]]*17:255}:(t===7||t===9)&&(r={r:vs[e[1]]<<4|vs[e[2]],g:vs[e[3]]<<4|vs[e[4]],b:vs[e[5]]<<4|vs[e[6]],a:t===9?vs[e[7]]<<4|vs[e[8]]:255})),r}const qR=(e,t)=>e<255?t(e):"";function YR(e){var t=UR(e)?HR:WR;return e?"#"+t(e.r)+t(e.g)+t(e.b)+qR(e.a,t):void 0}const GR=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function N4(e,t,r){const n=t*Math.min(r,1-r),a=(i,o=(i+e/30)%12)=>r-n*Math.max(Math.min(o-3,9-o,1),-1);return[a(0),a(8),a(4)]}function ZR(e,t,r){const n=(a,i=(a+e/60)%6)=>r-r*t*Math.max(Math.min(i,4-i,1),0);return[n(5),n(3),n(1)]}function KR(e,t,r){const n=N4(e,1,.5);let a;for(t+r>1&&(a=1/(t+r),t*=a,r*=a),a=0;a<3;a++)n[a]*=1-t-r,n[a]+=t;return n}function XR(e,t,r,n,a){return e===a?(t-r)/n+(t<r?6:0):t===a?(r-e)/n+2:(e-t)/n+4}function ww(e){const r=e.r/255,n=e.g/255,a=e.b/255,i=Math.max(r,n,a),o=Math.min(r,n,a),c=(i+o)/2;let d,u,f;return i!==o&&(f=i-o,u=c>.5?f/(2-i-o):f/(i+o),d=XR(r,n,a,f,i),d=d*60+.5),[d|0,u||0,c]}function _w(e,t,r,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,r,n)).map(ko)}function kw(e,t,r){return _w(N4,e,t,r)}function JR(e,t,r){return _w(KR,e,t,r)}function QR(e,t,r){return _w(ZR,e,t,r)}function S4(e){return(e%360+360)%360}function ez(e){const t=GR.exec(e);let r=255,n;if(!t)return;t[5]!==n&&(r=t[6]?Fu(+t[5]):ko(+t[5]));const a=S4(+t[2]),i=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?n=JR(a,i,o):t[1]==="hsv"?n=QR(a,i,o):n=kw(a,i,o),{r:n[0],g:n[1],b:n[2],a:r}}function tz(e,t){var r=ww(e);r[0]=S4(r[0]+t),r=kw(r),e.r=r[0],e.g=r[1],e.b=r[2]}function rz(e){if(!e)return;const t=ww(e),r=t[0],n=lj(t[1]),a=lj(t[2]);return e.a<255?`hsla(${r}, ${n}%, ${a}%, ${li(e.a)})`:`hsl(${r}, ${n}%, ${a}%)`}const cj={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},dj={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function nz(){const e={},t=Object.keys(dj),r=Object.keys(cj);let n,a,i,o,c;for(n=0;n<t.length;n++){for(o=c=t[n],a=0;a<r.length;a++)i=r[a],c=c.replace(i,cj[i]);i=parseInt(dj[o],16),e[c]=[i>>16&255,i>>8&255,i&255]}return e}let mm;function sz(e){mm||(mm=nz(),mm.transparent=[0,0,0,0]);const t=mm[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const az=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function iz(e){const t=az.exec(e);let r=255,n,a,i;if(t){if(t[7]!==n){const o=+t[7];r=t[8]?Fu(o):lo(o*255,0,255)}return n=+t[1],a=+t[3],i=+t[5],n=255&(t[2]?Fu(n):lo(n,0,255)),a=255&(t[4]?Fu(a):lo(a,0,255)),i=255&(t[6]?Fu(i):lo(i,0,255)),{r:n,g:a,b:i,a:r}}}function oz(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${li(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Lx=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Ec=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function lz(e,t,r){const n=Ec(li(e.r)),a=Ec(li(e.g)),i=Ec(li(e.b));return{r:ko(Lx(n+r*(Ec(li(t.r))-n))),g:ko(Lx(a+r*(Ec(li(t.g))-a))),b:ko(Lx(i+r*(Ec(li(t.b))-i))),a:e.a+r*(t.a-e.a)}}function pm(e,t,r){if(e){let n=ww(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*r,t===0?360:1)),n=kw(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function C4(e,t){return e&&Object.assign(t||{},e)}function uj(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=ko(e[3]))):(t=C4(e,{r:0,g:0,b:0,a:1}),t.a=ko(t.a)),t}function cz(e){return e.charAt(0)==="r"?iz(e):ez(e)}class Oh{constructor(t){if(t instanceof Oh)return t;const r=typeof t;let n;r==="object"?n=uj(t):r==="string"&&(n=VR(t)||sz(t)||cz(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=C4(this._rgb);return t&&(t.a=li(t.a)),t}set rgb(t){this._rgb=uj(t)}rgbString(){return this._valid?oz(this._rgb):void 0}hexString(){return this._valid?YR(this._rgb):void 0}hslString(){return this._valid?rz(this._rgb):void 0}mix(t,r){if(t){const n=this.rgb,a=t.rgb;let i;const o=r===i?.5:r,c=2*o-1,d=n.a-a.a,u=((c*d===-1?c:(c+d)/(1+c*d))+1)/2;i=1-u,n.r=255&u*n.r+i*a.r+.5,n.g=255&u*n.g+i*a.g+.5,n.b=255&u*n.b+i*a.b+.5,n.a=o*n.a+(1-o)*a.a,this.rgb=n}return this}interpolate(t,r){return t&&(this._rgb=lz(this._rgb,t._rgb,r)),this}clone(){return new Oh(this.rgb)}alpha(t){return this._rgb.a=ko(t),this}clearer(t){const r=this._rgb;return r.a*=1-t,this}greyscale(){const t=this._rgb,r=ff(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=r,this}opaquer(t){const r=this._rgb;return r.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return pm(this._rgb,2,t),this}darken(t){return pm(this._rgb,2,-t),this}saturate(t){return pm(this._rgb,1,t),this}desaturate(t){return pm(this._rgb,1,-t),this}rotate(t){return tz(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ei(){}const dz=(()=>{let e=0;return()=>e++})();function Ot(e){return e==null}function jr(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function ct(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function cn(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function ya(e,t){return cn(e)?e:t}function it(e,t){return typeof e>"u"?t:e}const uz=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,E4=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function zt(e,t,r){if(e&&typeof e.call=="function")return e.apply(r,t)}function wt(e,t,r,n){let a,i,o;if(jr(e))for(i=e.length,a=0;a<i;a++)t.call(r,e[a],a);else if(ct(e))for(o=Object.keys(e),i=o.length,a=0;a<i;a++)t.call(r,e[o[a]],o[a])}function Xp(e,t){let r,n,a,i;if(!e||!t||e.length!==t.length)return!1;for(r=0,n=e.length;r<n;++r)if(a=e[r],i=t[r],a.datasetIndex!==i.datasetIndex||a.index!==i.index)return!1;return!0}function Jp(e){if(jr(e))return e.map(Jp);if(ct(e)){const t=Object.create(null),r=Object.keys(e),n=r.length;let a=0;for(;a<n;++a)t[r[a]]=Jp(e[r[a]]);return t}return e}function P4(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function hz(e,t,r,n){if(!P4(e))return;const a=t[e],i=r[e];ct(a)&&ct(i)?Dh(a,i,n):t[e]=Jp(i)}function Dh(e,t,r){const n=jr(t)?t:[t],a=n.length;if(!ct(e))return e;r=r||{};const i=r.merger||hz;let o;for(let c=0;c<a;++c){if(o=n[c],!ct(o))continue;const d=Object.keys(o);for(let u=0,f=d.length;u<f;++u)i(d[u],e,o,r)}return e}function ah(e,t){return Dh(e,t,{merger:fz})}function fz(e,t,r){if(!P4(e))return;const n=t[e],a=r[e];ct(n)&&ct(a)?ah(n,a):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Jp(a))}const hj={"":e=>e,x:e=>e.x,y:e=>e.y};function mz(e){const t=e.split("."),r=[];let n="";for(const a of t)n+=a,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}function pz(e){const t=mz(e);return r=>{for(const n of t){if(n==="")break;r=r&&r[n]}return r}}function Lh(e,t){return(hj[t]||(hj[t]=pz(t)))(e)}function jw(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Qp=e=>typeof e<"u",Mo=e=>typeof e=="function",fj=(e,t)=>{if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0};function gz(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const _t=Math.PI,Jt=2*_t,xz=Jt+_t,eg=Number.POSITIVE_INFINITY,yz=_t/180,Sr=_t/2,el=_t/4,mj=_t*2/3,T4=Math.log10,wd=Math.sign;function ih(e,t,r){return Math.abs(e-t)<r}function pj(e){const t=Math.round(e);e=ih(e,t,e/1e3)?t:e;const r=Math.pow(10,Math.floor(T4(e))),n=e/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function vz(e){const t=[],r=Math.sqrt(e);let n;for(n=1;n<r;n++)e%n===0&&(t.push(n),t.push(e/n));return r===(r|0)&&t.push(r),t.sort((a,i)=>a-i).pop(),t}function bz(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Ah(e){return!bz(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function wz(e,t){const r=Math.round(e);return r-t<=e&&r+t>=e}function _z(e,t,r){let n,a,i;for(n=0,a=e.length;n<a;n++)i=e[n][r],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function ui(e){return e*(_t/180)}function kz(e){return e*(180/_t)}function gj(e){if(!cn(e))return;let t=1,r=0;for(;Math.round(e*t)/t!==e;)t*=10,r++;return r}function M4(e,t){const r=t.x-e.x,n=t.y-e.y,a=Math.sqrt(r*r+n*n);let i=Math.atan2(n,r);return i<-.5*_t&&(i+=Jt),{angle:i,distance:a}}function vv(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function jz(e,t){return(e-t+xz)%Jt-_t}function Jn(e){return(e%Jt+Jt)%Jt}function Rh(e,t,r,n){const a=Jn(e),i=Jn(t),o=Jn(r),c=Jn(i-a),d=Jn(o-a),u=Jn(a-i),f=Jn(a-o);return a===i||a===o||n&&i===o||c>d&&u<f}function nn(e,t,r){return Math.max(t,Math.min(r,e))}function Nz(e){return nn(e,-32768,32767)}function hi(e,t,r,n=1e-6){return e>=Math.min(t,r)-n&&e<=Math.max(t,r)+n}function Nw(e,t,r){r=r||(o=>e[o]<t);let n=e.length-1,a=0,i;for(;n-a>1;)i=a+n>>1,r(i)?a=i:n=i;return{lo:a,hi:n}}const gl=(e,t,r,n)=>Nw(e,r,n?a=>{const i=e[a][t];return i<r||i===r&&e[a+1][t]===r}:a=>e[a][t]<r),Sz=(e,t,r)=>Nw(e,r,n=>e[n][t]>=r);function Cz(e,t,r){let n=0,a=e.length;for(;n<a&&e[n]<t;)n++;for(;a>n&&e[a-1]>r;)a--;return n>0||a<e.length?e.slice(n,a):e}const O4=["push","pop","shift","splice","unshift"];function Ez(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),O4.forEach(r=>{const n="_onData"+jw(r),a=e[r];Object.defineProperty(e,r,{configurable:!0,enumerable:!1,value(...i){const o=a.apply(this,i);return e._chartjs.listeners.forEach(c=>{typeof c[n]=="function"&&c[n](...i)}),o}})})}function xj(e,t){const r=e._chartjs;if(!r)return;const n=r.listeners,a=n.indexOf(t);a!==-1&&n.splice(a,1),!(n.length>0)&&(O4.forEach(i=>{delete e[i]}),delete e._chartjs)}function Pz(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const D4=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function L4(e,t){let r=[],n=!1;return function(...a){r=a,n||(n=!0,D4.call(window,()=>{n=!1,e.apply(t,r)}))}}function Tz(e,t){let r;return function(...n){return t?(clearTimeout(r),r=setTimeout(e,t,n)):e.apply(this,n),t}}const Sw=e=>e==="start"?"left":e==="end"?"right":"center",tn=(e,t,r)=>e==="start"?t:e==="end"?r:(t+r)/2,Mz=(e,t,r,n)=>e===(n?"left":"right")?r:e==="center"?(t+r)/2:t;function Oz(e,t,r){const n=t.length;let a=0,i=n;if(e._sorted){const{iScale:o,vScale:c,_parsed:d}=e,u=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,f=o.axis,{min:m,max:p,minDefined:x,maxDefined:v}=o.getUserBounds();if(x){if(a=Math.min(gl(d,f,m).lo,r?n:gl(t,f,o.getPixelForValue(m)).lo),u){const y=d.slice(0,a+1).reverse().findIndex(_=>!Ot(_[c.axis]));a-=Math.max(0,y)}a=nn(a,0,n-1)}if(v){let y=Math.max(gl(d,o.axis,p,!0).hi+1,r?0:gl(t,f,o.getPixelForValue(p),!0).hi+1);if(u){const _=d.slice(y-1).findIndex(w=>!Ot(w[c.axis]));y+=Math.max(0,_)}i=nn(y,a,n)-a}else i=n-a}return{start:a,count:i}}function Dz(e){const{xScale:t,yScale:r,_scaleRanges:n}=e,a={xmin:t.min,xmax:t.max,ymin:r.min,ymax:r.max};if(!n)return e._scaleRanges=a,!0;const i=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==r.min||n.ymax!==r.max;return Object.assign(n,a),i}const gm=e=>e===0||e===1,yj=(e,t,r)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Jt/r)),vj=(e,t,r)=>Math.pow(2,-10*e)*Math.sin((e-t)*Jt/r)+1,oh={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Sr)+1,easeOutSine:e=>Math.sin(e*Sr),easeInOutSine:e=>-.5*(Math.cos(_t*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>gm(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>gm(e)?e:yj(e,.075,.3),easeOutElastic:e=>gm(e)?e:vj(e,.075,.3),easeInOutElastic(e){return gm(e)?e:e<.5?.5*yj(e*2,.1125,.45):.5+.5*vj(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-oh.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?oh.easeInBounce(e*2)*.5:oh.easeOutBounce(e*2-1)*.5+.5};function Cw(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function bj(e){return Cw(e)?e:new Oh(e)}function Ax(e){return Cw(e)?e:new Oh(e).saturate(.5).darken(.1).hexString()}const Lz=["x","y","borderWidth","radius","tension"],Az=["color","borderColor","backgroundColor"];function Rz(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:Az},numbers:{type:"number",properties:Lz}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function zz(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const wj=new Map;function $z(e,t){t=t||{};const r=e+JSON.stringify(t);let n=wj.get(r);return n||(n=new Intl.NumberFormat(e,t),wj.set(r,n)),n}function Ew(e,t,r){return $z(t,r).format(e)}const Iz={values(e){return jr(e)?e:""+e},numeric(e,t,r){if(e===0)return"0";const n=this.chart.options.locale;let a,i=e;if(r.length>1){const u=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(u<1e-4||u>1e15)&&(a="scientific"),i=Fz(e,r)}const o=T4(Math.abs(i)),c=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),d={notation:a,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(d,this.options.ticks.format),Ew(e,n,d)}};function Fz(e,t){let r=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(r)>=1&&e!==Math.floor(e)&&(r=e-Math.floor(e)),r}var A4={formatters:Iz};function Bz(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,r)=>r.lineWidth,tickColor:(t,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:A4.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const zl=Object.create(null),bv=Object.create(null);function lh(e,t){if(!t)return e;const r=t.split(".");for(let n=0,a=r.length;n<a;++n){const i=r[n];e=e[i]||(e[i]=Object.create(null))}return e}function Rx(e,t,r){return typeof t=="string"?Dh(lh(e,t),r):Dh(lh(e,""),t)}class Hz{constructor(t,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,a)=>Ax(a.backgroundColor),this.hoverBorderColor=(n,a)=>Ax(a.borderColor),this.hoverColor=(n,a)=>Ax(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(r)}set(t,r){return Rx(this,t,r)}get(t){return lh(this,t)}describe(t,r){return Rx(bv,t,r)}override(t,r){return Rx(zl,t,r)}route(t,r,n,a){const i=lh(this,t),o=lh(this,n),c="_"+r;Object.defineProperties(i,{[c]:{value:i[r],writable:!0},[r]:{enumerable:!0,get(){const d=this[c],u=o[a];return ct(d)?Object.assign({},u,d):it(d,u)},set(d){this[c]=d}}})}apply(t){t.forEach(r=>r(this))}}var cr=new Hz({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Rz,zz,Bz]);function Wz(e){return!e||Ot(e.size)||Ot(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function _j(e,t,r,n,a){let i=t[a];return i||(i=t[a]=e.measureText(a).width,r.push(a)),i>n&&(n=i),n}function tl(e,t,r){const n=e.currentDevicePixelRatio,a=r!==0?Math.max(r/2,.5):0;return Math.round((t-a)*n)/n+a}function kj(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function wv(e,t,r,n){R4(e,t,r,n,null)}function R4(e,t,r,n,a){let i,o,c,d,u,f,m,p;const x=t.pointStyle,v=t.rotation,y=t.radius;let _=(v||0)*yz;if(x&&typeof x=="object"&&(i=x.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(r,n),e.rotate(_),e.drawImage(x,-x.width/2,-x.height/2,x.width,x.height),e.restore();return}if(!(isNaN(y)||y<=0)){switch(e.beginPath(),x){default:a?e.ellipse(r,n,a/2,y,0,0,Jt):e.arc(r,n,y,0,Jt),e.closePath();break;case"triangle":f=a?a/2:y,e.moveTo(r+Math.sin(_)*f,n-Math.cos(_)*y),_+=mj,e.lineTo(r+Math.sin(_)*f,n-Math.cos(_)*y),_+=mj,e.lineTo(r+Math.sin(_)*f,n-Math.cos(_)*y),e.closePath();break;case"rectRounded":u=y*.516,d=y-u,o=Math.cos(_+el)*d,m=Math.cos(_+el)*(a?a/2-u:d),c=Math.sin(_+el)*d,p=Math.sin(_+el)*(a?a/2-u:d),e.arc(r-m,n-c,u,_-_t,_-Sr),e.arc(r+p,n-o,u,_-Sr,_),e.arc(r+m,n+c,u,_,_+Sr),e.arc(r-p,n+o,u,_+Sr,_+_t),e.closePath();break;case"rect":if(!v){d=Math.SQRT1_2*y,f=a?a/2:d,e.rect(r-f,n-d,2*f,2*d);break}_+=el;case"rectRot":m=Math.cos(_)*(a?a/2:y),o=Math.cos(_)*y,c=Math.sin(_)*y,p=Math.sin(_)*(a?a/2:y),e.moveTo(r-m,n-c),e.lineTo(r+p,n-o),e.lineTo(r+m,n+c),e.lineTo(r-p,n+o),e.closePath();break;case"crossRot":_+=el;case"cross":m=Math.cos(_)*(a?a/2:y),o=Math.cos(_)*y,c=Math.sin(_)*y,p=Math.sin(_)*(a?a/2:y),e.moveTo(r-m,n-c),e.lineTo(r+m,n+c),e.moveTo(r+p,n-o),e.lineTo(r-p,n+o);break;case"star":m=Math.cos(_)*(a?a/2:y),o=Math.cos(_)*y,c=Math.sin(_)*y,p=Math.sin(_)*(a?a/2:y),e.moveTo(r-m,n-c),e.lineTo(r+m,n+c),e.moveTo(r+p,n-o),e.lineTo(r-p,n+o),_+=el,m=Math.cos(_)*(a?a/2:y),o=Math.cos(_)*y,c=Math.sin(_)*y,p=Math.sin(_)*(a?a/2:y),e.moveTo(r-m,n-c),e.lineTo(r+m,n+c),e.moveTo(r+p,n-o),e.lineTo(r-p,n+o);break;case"line":o=a?a/2:Math.cos(_)*y,c=Math.sin(_)*y,e.moveTo(r-o,n-c),e.lineTo(r+o,n+c);break;case"dash":e.moveTo(r,n),e.lineTo(r+Math.cos(_)*(a?a/2:y),n+Math.sin(_)*y);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function zh(e,t,r){return r=r||.5,!t||e&&e.x>t.left-r&&e.x<t.right+r&&e.y>t.top-r&&e.y<t.bottom+r}function Yg(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Gg(e){e.restore()}function Uz(e,t,r,n,a){if(!t)return e.lineTo(r.x,r.y);if(a==="middle"){const i=(t.x+r.x)/2;e.lineTo(i,t.y),e.lineTo(i,r.y)}else a==="after"!=!!n?e.lineTo(t.x,r.y):e.lineTo(r.x,t.y);e.lineTo(r.x,r.y)}function Vz(e,t,r,n){if(!t)return e.lineTo(r.x,r.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function qz(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Ot(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function Yz(e,t,r,n,a){if(a.strikethrough||a.underline){const i=e.measureText(n),o=t-i.actualBoundingBoxLeft,c=t+i.actualBoundingBoxRight,d=r-i.actualBoundingBoxAscent,u=r+i.actualBoundingBoxDescent,f=a.strikethrough?(d+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=a.decorationWidth||2,e.moveTo(o,f),e.lineTo(c,f),e.stroke()}}function Gz(e,t){const r=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=r}function $h(e,t,r,n,a,i={}){const o=jr(t)?t:[t],c=i.strokeWidth>0&&i.strokeColor!=="";let d,u;for(e.save(),e.font=a.string,qz(e,i),d=0;d<o.length;++d)u=o[d],i.backdrop&&Gz(e,i.backdrop),c&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),Ot(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(u,r,n,i.maxWidth)),e.fillText(u,r,n,i.maxWidth),Yz(e,r,n,u,i),n+=Number(a.lineHeight);e.restore()}function tg(e,t){const{x:r,y:n,w:a,h:i,radius:o}=t;e.arc(r+o.topLeft,n+o.topLeft,o.topLeft,1.5*_t,_t,!0),e.lineTo(r,n+i-o.bottomLeft),e.arc(r+o.bottomLeft,n+i-o.bottomLeft,o.bottomLeft,_t,Sr,!0),e.lineTo(r+a-o.bottomRight,n+i),e.arc(r+a-o.bottomRight,n+i-o.bottomRight,o.bottomRight,Sr,0,!0),e.lineTo(r+a,n+o.topRight),e.arc(r+a-o.topRight,n+o.topRight,o.topRight,0,-Sr,!0),e.lineTo(r+o.topLeft,n)}const Zz=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Kz=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Xz(e,t){const r=(""+e).match(Zz);if(!r||r[1]==="normal")return t*1.2;switch(e=+r[2],r[3]){case"px":return e;case"%":e/=100;break}return t*e}const Jz=e=>+e||0;function Pw(e,t){const r={},n=ct(t),a=n?Object.keys(t):t,i=ct(e)?n?o=>it(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of a)r[o]=Jz(i(o));return r}function z4(e){return Pw(e,{top:"y",right:"x",bottom:"y",left:"x"})}function sd(e){return Pw(e,["topLeft","topRight","bottomLeft","bottomRight"])}function As(e){const t=z4(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function sn(e,t){e=e||{},t=t||cr.font;let r=it(e.size,t.size);typeof r=="string"&&(r=parseInt(r,10));let n=it(e.style,t.style);n&&!(""+n).match(Kz)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const a={family:it(e.family,t.family),lineHeight:Xz(it(e.lineHeight,t.lineHeight),r),size:r,style:n,weight:it(e.weight,t.weight),string:""};return a.string=Wz(a),a}function xm(e,t,r,n){let a,i,o;for(a=0,i=e.length;a<i;++a)if(o=e[a],o!==void 0&&o!==void 0)return o}function Qz(e,t,r){const{min:n,max:a}=e,i=E4(t,(a-n)/2),o=(c,d)=>r&&c===0?0:c+d;return{min:o(n,-Math.abs(i)),max:o(a,i)}}function Gl(e,t){return Object.assign(Object.create(e),t)}function Tw(e,t=[""],r,n,a=()=>e[0]){const i=r||e;typeof n>"u"&&(n=B4("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:n,_getTarget:a,override:c=>Tw([c,...e],t,i,n)};return new Proxy(o,{deleteProperty(c,d){return delete c[d],delete c._keys,delete e[0][d],!0},get(c,d){return I4(c,d,()=>o$(d,t,e,c))},getOwnPropertyDescriptor(c,d){return Reflect.getOwnPropertyDescriptor(c._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(c,d){return Nj(c).includes(d)},ownKeys(c){return Nj(c)},set(c,d,u){const f=c._storage||(c._storage=a());return c[d]=f[d]=u,delete c._keys,!0}})}function _d(e,t,r,n){const a={_cacheable:!1,_proxy:e,_context:t,_subProxy:r,_stack:new Set,_descriptors:$4(e,n),setContext:i=>_d(e,i,r,n),override:i=>_d(e.override(i),t,r,n)};return new Proxy(a,{deleteProperty(i,o){return delete i[o],delete e[o],!0},get(i,o,c){return I4(i,o,()=>t$(i,o,c))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(i,o,c){return e[o]=c,delete i[o],!0}})}function $4(e,t={scriptable:!0,indexable:!0}){const{_scriptable:r=t.scriptable,_indexable:n=t.indexable,_allKeys:a=t.allKeys}=e;return{allKeys:a,scriptable:r,indexable:n,isScriptable:Mo(r)?r:()=>r,isIndexable:Mo(n)?n:()=>n}}const e$=(e,t)=>e?e+jw(t):t,Mw=(e,t)=>ct(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function I4(e,t,r){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const n=r();return e[t]=n,n}function t$(e,t,r){const{_proxy:n,_context:a,_subProxy:i,_descriptors:o}=e;let c=n[t];return Mo(c)&&o.isScriptable(t)&&(c=r$(t,c,e,r)),jr(c)&&c.length&&(c=n$(t,c,e,o.isIndexable)),Mw(t,c)&&(c=_d(c,a,i&&i[t],o)),c}function r$(e,t,r,n){const{_proxy:a,_context:i,_subProxy:o,_stack:c}=r;if(c.has(e))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+e);c.add(e);let d=t(i,o||n);return c.delete(e),Mw(e,d)&&(d=Ow(a._scopes,a,e,d)),d}function n$(e,t,r,n){const{_proxy:a,_context:i,_subProxy:o,_descriptors:c}=r;if(typeof i.index<"u"&&n(e))return t[i.index%t.length];if(ct(t[0])){const d=t,u=a._scopes.filter(f=>f!==d);t=[];for(const f of d){const m=Ow(u,a,e,f);t.push(_d(m,i,o&&o[e],c))}}return t}function F4(e,t,r){return Mo(e)?e(t,r):e}const s$=(e,t)=>e===!0?t:typeof e=="string"?Lh(t,e):void 0;function a$(e,t,r,n,a){for(const i of t){const o=s$(r,i);if(o){e.add(o);const c=F4(o._fallback,r,a);if(typeof c<"u"&&c!==r&&c!==n)return c}else if(o===!1&&typeof n<"u"&&r!==n)return null}return!1}function Ow(e,t,r,n){const a=t._rootScopes,i=F4(t._fallback,r,n),o=[...e,...a],c=new Set;c.add(n);let d=jj(c,o,r,i||r,n);return d===null||typeof i<"u"&&i!==r&&(d=jj(c,o,i,d,n),d===null)?!1:Tw(Array.from(c),[""],a,i,()=>i$(t,r,n))}function jj(e,t,r,n,a){for(;r;)r=a$(e,t,r,n,a);return r}function i$(e,t,r){const n=e._getTarget();t in n||(n[t]={});const a=n[t];return jr(a)&&ct(r)?r:a||{}}function o$(e,t,r,n){let a;for(const i of t)if(a=B4(e$(i,e),r),typeof a<"u")return Mw(e,a)?Ow(r,n,e,a):a}function B4(e,t){for(const r of t){if(!r)continue;const n=r[e];if(typeof n<"u")return n}}function Nj(e){let t=e._keys;return t||(t=e._keys=l$(e._scopes)),t}function l$(e){const t=new Set;for(const r of e)for(const n of Object.keys(r).filter(a=>!a.startsWith("_")))t.add(n);return Array.from(t)}const c$=Number.EPSILON||1e-14,kd=(e,t)=>t<e.length&&!e[t].skip&&e[t],H4=e=>e==="x"?"y":"x";function d$(e,t,r,n){const a=e.skip?t:e,i=t,o=r.skip?t:r,c=vv(i,a),d=vv(o,i);let u=c/(c+d),f=d/(c+d);u=isNaN(u)?0:u,f=isNaN(f)?0:f;const m=n*u,p=n*f;return{previous:{x:i.x-m*(o.x-a.x),y:i.y-m*(o.y-a.y)},next:{x:i.x+p*(o.x-a.x),y:i.y+p*(o.y-a.y)}}}function u$(e,t,r){const n=e.length;let a,i,o,c,d,u=kd(e,0);for(let f=0;f<n-1;++f)if(d=u,u=kd(e,f+1),!(!d||!u)){if(ih(t[f],0,c$)){r[f]=r[f+1]=0;continue}a=r[f]/t[f],i=r[f+1]/t[f],c=Math.pow(a,2)+Math.pow(i,2),!(c<=9)&&(o=3/Math.sqrt(c),r[f]=a*o*t[f],r[f+1]=i*o*t[f])}}function h$(e,t,r="x"){const n=H4(r),a=e.length;let i,o,c,d=kd(e,0);for(let u=0;u<a;++u){if(o=c,c=d,d=kd(e,u+1),!c)continue;const f=c[r],m=c[n];o&&(i=(f-o[r])/3,c[`cp1${r}`]=f-i,c[`cp1${n}`]=m-i*t[u]),d&&(i=(d[r]-f)/3,c[`cp2${r}`]=f+i,c[`cp2${n}`]=m+i*t[u])}}function f$(e,t="x"){const r=H4(t),n=e.length,a=Array(n).fill(0),i=Array(n);let o,c,d,u=kd(e,0);for(o=0;o<n;++o)if(c=d,d=u,u=kd(e,o+1),!!d){if(u){const f=u[t]-d[t];a[o]=f!==0?(u[r]-d[r])/f:0}i[o]=c?u?wd(a[o-1])!==wd(a[o])?0:(a[o-1]+a[o])/2:a[o-1]:a[o]}u$(e,a,i),h$(e,i,t)}function ym(e,t,r){return Math.max(Math.min(e,r),t)}function m$(e,t){let r,n,a,i,o,c=zh(e[0],t);for(r=0,n=e.length;r<n;++r)o=i,i=c,c=r<n-1&&zh(e[r+1],t),i&&(a=e[r],o&&(a.cp1x=ym(a.cp1x,t.left,t.right),a.cp1y=ym(a.cp1y,t.top,t.bottom)),c&&(a.cp2x=ym(a.cp2x,t.left,t.right),a.cp2y=ym(a.cp2y,t.top,t.bottom)))}function p$(e,t,r,n,a){let i,o,c,d;if(t.spanGaps&&(e=e.filter(u=>!u.skip)),t.cubicInterpolationMode==="monotone")f$(e,a);else{let u=n?e[e.length-1]:e[0];for(i=0,o=e.length;i<o;++i)c=e[i],d=d$(u,c,e[Math.min(i+1,o-(n?0:1))%o],t.tension),c.cp1x=d.previous.x,c.cp1y=d.previous.y,c.cp2x=d.next.x,c.cp2y=d.next.y,u=c}t.capBezierPoints&&m$(e,r)}function Dw(){return typeof window<"u"&&typeof document<"u"}function Lw(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function rg(e,t,r){let n;return typeof e=="string"?(n=parseInt(e,10),e.indexOf("%")!==-1&&(n=n/100*t.parentNode[r])):n=e,n}const Zg=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function g$(e,t){return Zg(e).getPropertyValue(t)}const x$=["top","right","bottom","left"];function Nl(e,t,r){const n={};r=r?"-"+r:"";for(let a=0;a<4;a++){const i=x$[a];n[i]=parseFloat(e[t+"-"+i+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const y$=(e,t,r)=>(e>0||t>0)&&(!r||!r.shadowRoot);function v$(e,t){const r=e.touches,n=r&&r.length?r[0]:e,{offsetX:a,offsetY:i}=n;let o=!1,c,d;if(y$(a,i,e.target))c=a,d=i;else{const u=t.getBoundingClientRect();c=n.clientX-u.left,d=n.clientY-u.top,o=!0}return{x:c,y:d,box:o}}function cl(e,t){if("native"in e)return e;const{canvas:r,currentDevicePixelRatio:n}=t,a=Zg(r),i=a.boxSizing==="border-box",o=Nl(a,"padding"),c=Nl(a,"border","width"),{x:d,y:u,box:f}=v$(e,r),m=o.left+(f&&c.left),p=o.top+(f&&c.top);let{width:x,height:v}=t;return i&&(x-=o.width+c.width,v-=o.height+c.height),{x:Math.round((d-m)/x*r.width/n),y:Math.round((u-p)/v*r.height/n)}}function b$(e,t,r){let n,a;if(t===void 0||r===void 0){const i=e&&Lw(e);if(!i)t=e.clientWidth,r=e.clientHeight;else{const o=i.getBoundingClientRect(),c=Zg(i),d=Nl(c,"border","width"),u=Nl(c,"padding");t=o.width-u.width-d.width,r=o.height-u.height-d.height,n=rg(c.maxWidth,i,"clientWidth"),a=rg(c.maxHeight,i,"clientHeight")}}return{width:t,height:r,maxWidth:n||eg,maxHeight:a||eg}}const co=e=>Math.round(e*10)/10;function w$(e,t,r,n){const a=Zg(e),i=Nl(a,"margin"),o=rg(a.maxWidth,e,"clientWidth")||eg,c=rg(a.maxHeight,e,"clientHeight")||eg,d=b$(e,t,r);let{width:u,height:f}=d;if(a.boxSizing==="content-box"){const p=Nl(a,"border","width"),x=Nl(a,"padding");u-=x.width+p.width,f-=x.height+p.height}return u=Math.max(0,u-i.width),f=Math.max(0,n?u/n:f-i.height),u=co(Math.min(u,o,d.maxWidth)),f=co(Math.min(f,c,d.maxHeight)),u&&!f&&(f=co(u/2)),(t!==void 0||r!==void 0)&&n&&d.height&&f>d.height&&(f=d.height,u=co(Math.floor(f*n))),{width:u,height:f}}function Sj(e,t,r){const n=t||1,a=co(e.height*n),i=co(e.width*n);e.height=co(e.height),e.width=co(e.width);const o=e.canvas;return o.style&&(r||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==n||o.height!==a||o.width!==i?(e.currentDevicePixelRatio=n,o.height=a,o.width=i,e.ctx.setTransform(n,0,0,n,0,0),!0):!1}const _$=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Dw()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function Cj(e,t){const r=g$(e,t),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function dl(e,t,r,n){return{x:e.x+r*(t.x-e.x),y:e.y+r*(t.y-e.y)}}function k$(e,t,r,n){return{x:e.x+r*(t.x-e.x),y:n==="middle"?r<.5?e.y:t.y:n==="after"?r<1?e.y:t.y:r>0?t.y:e.y}}function j$(e,t,r,n){const a={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},o=dl(e,a,r),c=dl(a,i,r),d=dl(i,t,r),u=dl(o,c,r),f=dl(c,d,r);return dl(u,f,r)}const N$=function(e,t){return{x(r){return e+e+t-r},setWidth(r){t=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,n){return r-n},leftForLtr(r,n){return r-n}}},S$=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function ad(e,t,r){return e?N$(t,r):S$()}function W4(e,t){let r,n;(t==="ltr"||t==="rtl")&&(r=e.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",t,"important"),e.prevTextDirection=n)}function U4(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function V4(e){return e==="angle"?{between:Rh,compare:jz,normalize:Jn}:{between:hi,compare:(t,r)=>t-r,normalize:t=>t}}function Ej({start:e,end:t,count:r,loop:n,style:a}){return{start:e%r,end:t%r,loop:n&&(t-e+1)%r===0,style:a}}function C$(e,t,r){const{property:n,start:a,end:i}=r,{between:o,normalize:c}=V4(n),d=t.length;let{start:u,end:f,loop:m}=e,p,x;if(m){for(u+=d,f+=d,p=0,x=d;p<x&&o(c(t[u%d][n]),a,i);++p)u--,f--;u%=d,f%=d}return f<u&&(f+=d),{start:u,end:f,loop:m,style:e.style}}function q4(e,t,r){if(!r)return[e];const{property:n,start:a,end:i}=r,o=t.length,{compare:c,between:d,normalize:u}=V4(n),{start:f,end:m,loop:p,style:x}=C$(e,t,r),v=[];let y=!1,_=null,w,b,N;const S=()=>d(a,N,w)&&c(a,N)!==0,C=()=>c(i,w)===0||d(i,N,w),O=()=>y||S(),A=()=>!y||C();for(let z=f,$=f;z<=m;++z)b=t[z%o],!b.skip&&(w=u(b[n]),w!==N&&(y=d(w,a,i),_===null&&O()&&(_=c(w,a)===0?z:$),_!==null&&A()&&(v.push(Ej({start:_,end:z,loop:p,count:o,style:x})),_=null),$=z,N=w));return _!==null&&v.push(Ej({start:_,end:m,loop:p,count:o,style:x})),v}function Y4(e,t){const r=[],n=e.segments;for(let a=0;a<n.length;a++){const i=q4(n[a],e.points,t);i.length&&r.push(...i)}return r}function E$(e,t,r,n){let a=0,i=t-1;if(r&&!n)for(;a<t&&!e[a].skip;)a++;for(;a<t&&e[a].skip;)a++;for(a%=t,r&&(i+=a);i>a&&e[i%t].skip;)i--;return i%=t,{start:a,end:i}}function P$(e,t,r,n){const a=e.length,i=[];let o=t,c=e[t],d;for(d=t+1;d<=r;++d){const u=e[d%a];u.skip||u.stop?c.skip||(n=!1,i.push({start:t%a,end:(d-1)%a,loop:n}),t=o=u.stop?d:null):(o=d,c.skip&&(t=d)),c=u}return o!==null&&i.push({start:t%a,end:o%a,loop:n}),i}function T$(e,t){const r=e.points,n=e.options.spanGaps,a=r.length;if(!a)return[];const i=!!e._loop,{start:o,end:c}=E$(r,a,i,n);if(n===!0)return Pj(e,[{start:o,end:c,loop:i}],r,t);const d=c<o?c+a:c,u=!!e._fullLoop&&o===0&&c===a-1;return Pj(e,P$(r,o,d,u),r,t)}function Pj(e,t,r,n){return!n||!n.setContext||!r?t:M$(e,t,r,n)}function M$(e,t,r,n){const a=e._chart.getContext(),i=Tj(e.options),{_datasetIndex:o,options:{spanGaps:c}}=e,d=r.length,u=[];let f=i,m=t[0].start,p=m;function x(v,y,_,w){const b=c?-1:1;if(v!==y){for(v+=d;r[v%d].skip;)v-=b;for(;r[y%d].skip;)y+=b;v%d!==y%d&&(u.push({start:v%d,end:y%d,loop:_,style:w}),f=w,m=y%d)}}for(const v of t){m=c?m:v.start;let y=r[m%d],_;for(p=m+1;p<=v.end;p++){const w=r[p%d];_=Tj(n.setContext(Gl(a,{type:"segment",p0:y,p1:w,p0DataIndex:(p-1)%d,p1DataIndex:p%d,datasetIndex:o}))),O$(_,f)&&x(m,p-1,v.loop,f),y=w,f=_}m<p-1&&x(m,p-1,v.loop,f)}return u}function Tj(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function O$(e,t){if(!t)return!1;const r=[],n=function(a,i){return Cw(i)?(r.includes(i)||r.push(i),r.indexOf(i)):i};return JSON.stringify(e,n)!==JSON.stringify(t,n)}function vm(e,t,r){return e.options.clip?e[r]:t[r]}function D$(e,t){const{xScale:r,yScale:n}=e;return r&&n?{left:vm(r,t,"left"),right:vm(r,t,"right"),top:vm(n,t,"top"),bottom:vm(n,t,"bottom")}:t}function G4(e,t){const r=t._clip;if(r.disabled)return!1;const n=D$(t,e.chartArea);return{left:r.left===!1?0:n.left-(r.left===!0?0:r.left),right:r.right===!1?e.width:n.right+(r.right===!0?0:r.right),top:r.top===!1?0:n.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?e.height:n.bottom+(r.bottom===!0?0:r.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class L${constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,r,n,a){const i=r.listeners[a],o=r.duration;i.forEach(c=>c({chart:t,initial:r.initial,numSteps:o,currentStep:Math.min(n-r.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=D4.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let r=0;this._charts.forEach((n,a)=>{if(!n.running||!n.items.length)return;const i=n.items;let o=i.length-1,c=!1,d;for(;o>=0;--o)d=i[o],d._active?(d._total>n.duration&&(n.duration=d._total),d.tick(t),c=!0):(i[o]=i[i.length-1],i.pop());c&&(a.draw(),this._notify(a,n,t,"progress")),i.length||(n.running=!1,this._notify(a,n,t,"complete"),n.initial=!1),r+=i.length}),this._lastDate=t,r===0&&(this._running=!1)}_getAnims(t){const r=this._charts;let n=r.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(t,n)),n}listen(t,r,n){this._getAnims(t).listeners[r].push(n)}add(t,r){!r||!r.length||this._getAnims(t).items.push(...r)}has(t){return this._getAnims(t).items.length>0}start(t){const r=this._charts.get(t);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((n,a)=>Math.max(n,a._duration),0),this._refresh())}running(t){if(!this._running)return!1;const r=this._charts.get(t);return!(!r||!r.running||!r.items.length)}stop(t){const r=this._charts.get(t);if(!r||!r.items.length)return;const n=r.items;let a=n.length-1;for(;a>=0;--a)n[a].cancel();r.items=[],this._notify(t,r,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ni=new L$;const Mj="transparent",A$={boolean(e,t,r){return r>.5?t:e},color(e,t,r){const n=bj(e||Mj),a=n.valid&&bj(t||Mj);return a&&a.valid?a.mix(n,r).hexString():t},number(e,t,r){return e+(t-e)*r}};class R${constructor(t,r,n,a){const i=r[n];a=xm([t.to,a,i,t.from]);const o=xm([t.from,i,a]);this._active=!0,this._fn=t.fn||A$[t.type||typeof o],this._easing=oh[t.easing]||oh.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=r,this._prop=n,this._from=o,this._to=a,this._promises=void 0}active(){return this._active}update(t,r,n){if(this._active){this._notify(!1);const a=this._target[this._prop],i=n-this._start,o=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=xm([t.to,r,a,t.from]),this._from=xm([t.from,a,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const r=t-this._start,n=this._duration,a=this._prop,i=this._from,o=this._loop,c=this._to;let d;if(this._active=i!==c&&(o||r<n),!this._active){this._target[a]=c,this._notify(!0);return}if(r<0){this._target[a]=i;return}d=r/n%2,d=o&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[a]=this._fn(i,c,d)}wait(){const t=this._promises||(this._promises=[]);return new Promise((r,n)=>{t.push({res:r,rej:n})})}_notify(t){const r=t?"res":"rej",n=this._promises||[];for(let a=0;a<n.length;a++)n[a][r]()}}class Z4{constructor(t,r){this._chart=t,this._properties=new Map,this.configure(r)}configure(t){if(!ct(t))return;const r=Object.keys(cr.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(a=>{const i=t[a];if(!ct(i))return;const o={};for(const c of r)o[c]=i[c];(jr(i.properties)&&i.properties||[a]).forEach(c=>{(c===a||!n.has(c))&&n.set(c,o)})})}_animateOptions(t,r){const n=r.options,a=$$(t,n);if(!a)return[];const i=this._createAnimations(a,n);return n.$shared&&z$(t.options.$animations,n).then(()=>{t.options=n},()=>{}),i}_createAnimations(t,r){const n=this._properties,a=[],i=t.$animations||(t.$animations={}),o=Object.keys(r),c=Date.now();let d;for(d=o.length-1;d>=0;--d){const u=o[d];if(u.charAt(0)==="$")continue;if(u==="options"){a.push(...this._animateOptions(t,r));continue}const f=r[u];let m=i[u];const p=n.get(u);if(m)if(p&&m.active()){m.update(p,f,c);continue}else m.cancel();if(!p||!p.duration){t[u]=f;continue}i[u]=m=new R$(p,t,u,f),a.push(m)}return a}update(t,r){if(this._properties.size===0){Object.assign(t,r);return}const n=this._createAnimations(t,r);if(n.length)return ni.add(this._chart,n),!0}}function z$(e,t){const r=[],n=Object.keys(t);for(let a=0;a<n.length;a++){const i=e[n[a]];i&&i.active()&&r.push(i.wait())}return Promise.all(r)}function $$(e,t){if(!t)return;let r=e.options;if(!r){e.options=t;return}return r.$shared&&(e.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function Oj(e,t){const r=e&&e.options||{},n=r.reverse,a=r.min===void 0?t:0,i=r.max===void 0?t:0;return{start:n?i:a,end:n?a:i}}function I$(e,t,r){if(r===!1)return!1;const n=Oj(e,r),a=Oj(t,r);return{top:a.end,right:n.end,bottom:a.start,left:n.start}}function F$(e){let t,r,n,a;return ct(e)?(t=e.top,r=e.right,n=e.bottom,a=e.left):t=r=n=a=e,{top:t,right:r,bottom:n,left:a,disabled:e===!1}}function K4(e,t){const r=[],n=e._getSortedDatasetMetas(t);let a,i;for(a=0,i=n.length;a<i;++a)r.push(n[a].index);return r}function Dj(e,t,r,n={}){const a=e.keys,i=n.mode==="single";let o,c,d,u;if(t===null)return;let f=!1;for(o=0,c=a.length;o<c;++o){if(d=+a[o],d===r){if(f=!0,n.all)continue;break}u=e.values[d],cn(u)&&(i||t===0||wd(t)===wd(u))&&(t+=u)}return!f&&!n.all?0:t}function B$(e,t){const{iScale:r,vScale:n}=t,a=r.axis==="x"?"x":"y",i=n.axis==="x"?"x":"y",o=Object.keys(e),c=new Array(o.length);let d,u,f;for(d=0,u=o.length;d<u;++d)f=o[d],c[d]={[a]:f,[i]:e[f]};return c}function zx(e,t){const r=e&&e.options.stacked;return r||r===void 0&&t.stack!==void 0}function H$(e,t,r){return`${e.id}.${t.id}.${r.stack||r.type}`}function W$(e){const{min:t,max:r,minDefined:n,maxDefined:a}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:a?r:Number.POSITIVE_INFINITY}}function U$(e,t,r){const n=e[t]||(e[t]={});return n[r]||(n[r]={})}function Lj(e,t,r,n){for(const a of t.getMatchingVisibleMetas(n).reverse()){const i=e[a.index];if(r&&i>0||!r&&i<0)return a.index}return null}function Aj(e,t){const{chart:r,_cachedMeta:n}=e,a=r._stacks||(r._stacks={}),{iScale:i,vScale:o,index:c}=n,d=i.axis,u=o.axis,f=H$(i,o,n),m=t.length;let p;for(let x=0;x<m;++x){const v=t[x],{[d]:y,[u]:_}=v,w=v._stacks||(v._stacks={});p=w[u]=U$(a,f,y),p[c]=_,p._top=Lj(p,o,!0,n.type),p._bottom=Lj(p,o,!1,n.type);const b=p._visualValues||(p._visualValues={});b[c]=_}}function $x(e,t){const r=e.scales;return Object.keys(r).filter(n=>r[n].axis===t).shift()}function V$(e,t){return Gl(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function q$(e,t,r){return Gl(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:r,index:t,mode:"default",type:"data"})}function wu(e,t){const r=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(const a of t){const i=a._stacks;if(!i||i[n]===void 0||i[n][r]===void 0)return;delete i[n][r],i[n]._visualValues!==void 0&&i[n]._visualValues[r]!==void 0&&delete i[n]._visualValues[r]}}}const Ix=e=>e==="reset"||e==="none",Rj=(e,t)=>t?e:Object.assign({},e),Y$=(e,t,r)=>e&&!t.hidden&&t._stacked&&{keys:K4(r,!0),values:null};class id{constructor(t,r){this.chart=t,this._ctx=t.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=zx(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&wu(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,r=this._cachedMeta,n=this.getDataset(),a=(m,p,x,v)=>m==="x"?p:m==="r"?v:x,i=r.xAxisID=it(n.xAxisID,$x(t,"x")),o=r.yAxisID=it(n.yAxisID,$x(t,"y")),c=r.rAxisID=it(n.rAxisID,$x(t,"r")),d=r.indexAxis,u=r.iAxisID=a(d,i,o,c),f=r.vAxisID=a(d,o,i,c);r.xScale=this.getScaleForId(i),r.yScale=this.getScaleForId(o),r.rScale=this.getScaleForId(c),r.iScale=this.getScaleForId(u),r.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const r=this._cachedMeta;return t===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&xj(this._data,this),t._stacked&&wu(t)}_dataCheck(){const t=this.getDataset(),r=t.data||(t.data=[]),n=this._data;if(ct(r)){const a=this._cachedMeta;this._data=B$(r,a)}else if(n!==r){if(n){xj(n,this);const a=this._cachedMeta;wu(a),a._parsed=[]}r&&Object.isExtensible(r)&&Ez(r,this),this._syncList=[],this._data=r}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const r=this._cachedMeta,n=this.getDataset();let a=!1;this._dataCheck();const i=r._stacked;r._stacked=zx(r.vScale,r),r.stack!==n.stack&&(a=!0,wu(r),r.stack=n.stack),this._resyncElements(t),(a||i!==r._stacked)&&(Aj(this,r._parsed),r._stacked=zx(r.vScale,r))}configure(){const t=this.chart.config,r=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),r,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,r){const{_cachedMeta:n,_data:a}=this,{iScale:i,_stacked:o}=n,c=i.axis;let d=t===0&&r===a.length?!0:n._sorted,u=t>0&&n._parsed[t-1],f,m,p;if(this._parsing===!1)n._parsed=a,n._sorted=!0,p=a;else{jr(a[t])?p=this.parseArrayData(n,a,t,r):ct(a[t])?p=this.parseObjectData(n,a,t,r):p=this.parsePrimitiveData(n,a,t,r);const x=()=>m[c]===null||u&&m[c]<u[c];for(f=0;f<r;++f)n._parsed[f+t]=m=p[f],d&&(x()&&(d=!1),u=m);n._sorted=d}o&&Aj(this,p)}parsePrimitiveData(t,r,n,a){const{iScale:i,vScale:o}=t,c=i.axis,d=o.axis,u=i.getLabels(),f=i===o,m=new Array(a);let p,x,v;for(p=0,x=a;p<x;++p)v=p+n,m[p]={[c]:f||i.parse(u[v],v),[d]:o.parse(r[v],v)};return m}parseArrayData(t,r,n,a){const{xScale:i,yScale:o}=t,c=new Array(a);let d,u,f,m;for(d=0,u=a;d<u;++d)f=d+n,m=r[f],c[d]={x:i.parse(m[0],f),y:o.parse(m[1],f)};return c}parseObjectData(t,r,n,a){const{xScale:i,yScale:o}=t,{xAxisKey:c="x",yAxisKey:d="y"}=this._parsing,u=new Array(a);let f,m,p,x;for(f=0,m=a;f<m;++f)p=f+n,x=r[p],u[f]={x:i.parse(Lh(x,c),p),y:o.parse(Lh(x,d),p)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,r,n){const a=this.chart,i=this._cachedMeta,o=r[t.axis],c={keys:K4(a,!0),values:r._stacks[t.axis]._visualValues};return Dj(c,o,i.index,{mode:n})}updateRangeFromParsed(t,r,n,a){const i=n[r.axis];let o=i===null?NaN:i;const c=a&&n._stacks[r.axis];a&&c&&(a.values=c,o=Dj(a,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,r){const n=this._cachedMeta,a=n._parsed,i=n._sorted&&t===n.iScale,o=a.length,c=this._getOtherScale(t),d=Y$(r,n,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:m}=W$(c);let p,x;function v(){x=a[p];const y=x[c.axis];return!cn(x[t.axis])||f>y||m<y}for(p=0;p<o&&!(!v()&&(this.updateRangeFromParsed(u,t,x,d),i));++p);if(i){for(p=o-1;p>=0;--p)if(!v()){this.updateRangeFromParsed(u,t,x,d);break}}return u}getAllParsedValues(t){const r=this._cachedMeta._parsed,n=[];let a,i,o;for(a=0,i=r.length;a<i;++a)o=r[a][t.axis],cn(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const r=this._cachedMeta,n=r.iScale,a=r.vScale,i=this.getParsed(t);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:a?""+a.getLabelForValue(i[a.axis]):""}}_update(t){const r=this._cachedMeta;this.update(t||"default"),r._clip=F$(it(this.options.clip,I$(r.xScale,r.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,r=this.chart,n=this._cachedMeta,a=n.data||[],i=r.chartArea,o=[],c=this._drawStart||0,d=this._drawCount||a.length-c,u=this.options.drawActiveElementsOnTop;let f;for(n.dataset&&n.dataset.draw(t,i,c,d),f=c;f<c+d;++f){const m=a[f];m.hidden||(m.active&&u?o.push(m):m.draw(t,i))}for(f=0;f<o.length;++f)o[f].draw(t,i)}getStyle(t,r){const n=r?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,r,n){const a=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];i=o.$context||(o.$context=q$(this.getContext(),t,o)),i.parsed=this.getParsed(t),i.raw=a.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=V$(this.chart.getContext(),this.index)),i.dataset=a,i.index=i.datasetIndex=this.index;return i.active=!!r,i.mode=n,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,r){return this._resolveElementOptions(this.dataElementType.id,r,t)}_resolveElementOptions(t,r="default",n){const a=r==="active",i=this._cachedDataOpts,o=t+"-"+r,c=i[o],d=this.enableOptionSharing&&Qp(n);if(c)return Rj(c,d);const u=this.chart.config,f=u.datasetElementScopeKeys(this._type,t),m=a?[`${t}Hover`,"hover",t,""]:[t,""],p=u.getOptionScopes(this.getDataset(),f),x=Object.keys(cr.elements[t]),v=()=>this.getContext(n,a,r),y=u.resolveNamedOptions(p,x,v,m);return y.$shared&&(y.$shared=d,i[o]=Object.freeze(Rj(y,d))),y}_resolveAnimations(t,r,n){const a=this.chart,i=this._cachedDataOpts,o=`animation-${r}`,c=i[o];if(c)return c;let d;if(a.options.animation!==!1){const f=this.chart.config,m=f.datasetAnimationScopeKeys(this._type,r),p=f.getOptionScopes(this.getDataset(),m);d=f.createResolver(p,this.getContext(t,n,r))}const u=new Z4(a,d&&d.animations);return d&&d._cacheable&&(i[o]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,r){return!r||Ix(t)||this.chart._animationsDisabled}_getSharedOptions(t,r){const n=this.resolveDataElementOptions(t,r),a=this._sharedOptions,i=this.getSharedOptions(n),o=this.includeOptions(r,i)||i!==a;return this.updateSharedOptions(i,r,n),{sharedOptions:i,includeOptions:o}}updateElement(t,r,n,a){Ix(a)?Object.assign(t,n):this._resolveAnimations(r,a).update(t,n)}updateSharedOptions(t,r,n){t&&!Ix(r)&&this._resolveAnimations(void 0,r).update(t,n)}_setStyle(t,r,n,a){t.active=a;const i=this.getStyle(r,a);this._resolveAnimations(r,n,a).update(t,{options:!a&&this.getSharedOptions(i)||i})}removeHoverStyle(t,r,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,r,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const r=this._data,n=this._cachedMeta.data;for(const[c,d,u]of this._syncList)this[c](d,u);this._syncList=[];const a=n.length,i=r.length,o=Math.min(i,a);o&&this.parse(0,o),i>a?this._insertElements(a,i-a,t):i<a&&this._removeElements(i,a-i)}_insertElements(t,r,n=!0){const a=this._cachedMeta,i=a.data,o=t+r;let c;const d=u=>{for(u.length+=r,c=u.length-1;c>=o;c--)u[c]=u[c-r]};for(d(i),c=t;c<o;++c)i[c]=new this.dataElementType;this._parsing&&d(a._parsed),this.parse(t,r),n&&this.updateElements(i,t,r,"reset")}updateElements(t,r,n,a){}_removeElements(t,r){const n=this._cachedMeta;if(this._parsing){const a=n._parsed.splice(t,r);n._stacked&&wu(n,a)}n.data.splice(t,r)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[r,n,a]=t;this[r](n,a)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,r){r&&this._sync(["_removeElements",t,r]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ze(id,"defaults",{}),ze(id,"datasetElementType",null),ze(id,"dataElementType",null);function G$(e,t,r){let n=1,a=1,i=0,o=0;if(t<Jt){const c=e,d=c+t,u=Math.cos(c),f=Math.sin(c),m=Math.cos(d),p=Math.sin(d),x=(N,S,C)=>Rh(N,c,d,!0)?1:Math.max(S,S*r,C,C*r),v=(N,S,C)=>Rh(N,c,d,!0)?-1:Math.min(S,S*r,C,C*r),y=x(0,u,m),_=x(Sr,f,p),w=v(_t,u,m),b=v(_t+Sr,f,p);n=(y-w)/2,a=(_-b)/2,i=-(y+w)/2,o=-(_+b)/2}return{ratioX:n,ratioY:a,offsetX:i,offsetY:o}}class Bu extends id{constructor(t,r){super(t,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,r){const n=this.getDataset().data,a=this._cachedMeta;if(this._parsing===!1)a._parsed=n;else{let i=d=>+n[d];if(ct(n[t])){const{key:d="value"}=this._parsing;i=u=>+Lh(n[u],d)}let o,c;for(o=t,c=t+r;o<c;++o)a._parsed[o]=i(o)}}_getRotation(){return ui(this.options.rotation-90)}_getCircumference(){return ui(this.options.circumference)}_getRotationExtents(){let t=Jt,r=-Jt;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const a=this.chart.getDatasetMeta(n).controller,i=a._getRotation(),o=a._getCircumference();t=Math.min(t,i),r=Math.max(r,i+o)}return{rotation:t,circumference:r-t}}update(t){const r=this.chart,{chartArea:n}=r,a=this._cachedMeta,i=a.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,c=Math.max((Math.min(n.width,n.height)-o)/2,0),d=Math.min(uz(this.options.cutout,c),1),u=this._getRingWeight(this.index),{circumference:f,rotation:m}=this._getRotationExtents(),{ratioX:p,ratioY:x,offsetX:v,offsetY:y}=G$(m,f,d),_=(n.width-o)/p,w=(n.height-o)/x,b=Math.max(Math.min(_,w)/2,0),N=E4(this.options.radius,b),S=Math.max(N*d,0),C=(N-S)/this._getVisibleDatasetWeightTotal();this.offsetX=v*N,this.offsetY=y*N,a.total=this.calculateTotal(),this.outerRadius=N-C*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-C*u,0),this.updateElements(i,0,i.length,t)}_circumference(t,r){const n=this.options,a=this._cachedMeta,i=this._getCircumference();return r&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||a._parsed[t]===null||a.data[t].hidden?0:this.calculateCircumference(a._parsed[t]*i/Jt)}updateElements(t,r,n,a){const i=a==="reset",o=this.chart,c=o.chartArea,u=o.options.animation,f=(c.left+c.right)/2,m=(c.top+c.bottom)/2,p=i&&u.animateScale,x=p?0:this.innerRadius,v=p?0:this.outerRadius,{sharedOptions:y,includeOptions:_}=this._getSharedOptions(r,a);let w=this._getRotation(),b;for(b=0;b<r;++b)w+=this._circumference(b,i);for(b=r;b<r+n;++b){const N=this._circumference(b,i),S=t[b],C={x:f+this.offsetX,y:m+this.offsetY,startAngle:w,endAngle:w+N,circumference:N,outerRadius:v,innerRadius:x};_&&(C.options=y||this.resolveDataElementOptions(b,S.active?"active":a)),w+=N,this.updateElement(S,b,C,a)}}calculateTotal(){const t=this._cachedMeta,r=t.data;let n=0,a;for(a=0;a<r.length;a++){const i=t._parsed[a];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(a)&&!r[a].hidden&&(n+=Math.abs(i))}return n}calculateCircumference(t){const r=this._cachedMeta.total;return r>0&&!isNaN(t)?Jt*(Math.abs(t)/r):0}getLabelAndValue(t){const r=this._cachedMeta,n=this.chart,a=n.data.labels||[],i=Ew(r._parsed[t],n.options.locale);return{label:a[t]||"",value:i}}getMaxBorderWidth(t){let r=0;const n=this.chart;let a,i,o,c,d;if(!t){for(a=0,i=n.data.datasets.length;a<i;++a)if(n.isDatasetVisible(a)){o=n.getDatasetMeta(a),t=o.data,c=o.controller;break}}if(!t)return 0;for(a=0,i=t.length;a<i;++a)d=c.resolveDataElementOptions(a),d.borderAlign!=="inner"&&(r=Math.max(r,d.borderWidth||0,d.hoverBorderWidth||0));return r}getMaxOffset(t){let r=0;for(let n=0,a=t.length;n<a;++n){const i=this.resolveDataElementOptions(n);r=Math.max(r,i.offset||0,i.hoverOffset||0)}return r}_getRingWeightOffset(t){let r=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(r+=this._getRingWeight(n));return r}_getRingWeight(t){return Math.max(it(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ze(Bu,"id","doughnut"),ze(Bu,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ze(Bu,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),ze(Bu,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const r=t.data,{labels:{pointStyle:n,textAlign:a,color:i,useBorderRadius:o,borderRadius:c}}=t.legend.options;return r.labels.length&&r.datasets.length?r.labels.map((d,u)=>{const m=t.getDatasetMeta(0).controller.getStyle(u);return{text:d,fillStyle:m.backgroundColor,fontColor:i,hidden:!t.getDataVisibility(u),lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:m.borderWidth,strokeStyle:m.borderColor,textAlign:a,pointStyle:n,borderRadius:o&&(c||m.borderRadius),index:u}}):[]}},onClick(t,r,n){n.chart.toggleDataVisibility(r.index),n.chart.update()}}}});class Jm extends id{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const r=this._cachedMeta,{dataset:n,data:a=[],_dataset:i}=r,o=this.chart._animationsDisabled;let{start:c,count:d}=Oz(r,a,o);this._drawStart=c,this._drawCount=d,Dz(r)&&(c=0,d=a.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=a;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:u},t),this.updateElements(a,c,d,t)}updateElements(t,r,n,a){const i=a==="reset",{iScale:o,vScale:c,_stacked:d,_dataset:u}=this._cachedMeta,{sharedOptions:f,includeOptions:m}=this._getSharedOptions(r,a),p=o.axis,x=c.axis,{spanGaps:v,segment:y}=this.options,_=Ah(v)?v:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||i||a==="none",b=r+n,N=t.length;let S=r>0&&this.getParsed(r-1);for(let C=0;C<N;++C){const O=t[C],A=w?O:{};if(C<r||C>=b){A.skip=!0;continue}const z=this.getParsed(C),$=Ot(z[x]),W=A[p]=o.getPixelForValue(z[p],C),F=A[x]=i||$?c.getBasePixel():c.getPixelForValue(d?this.applyStack(c,z,d):z[x],C);A.skip=isNaN(W)||isNaN(F)||$,A.stop=C>0&&Math.abs(z[p]-S[p])>_,y&&(A.parsed=z,A.raw=u.data[C]),m&&(A.options=f||this.resolveDataElementOptions(C,O.active?"active":a)),w||this.updateElement(O,C,A,a),S=z}}getMaxOverflow(){const t=this._cachedMeta,r=t.dataset,n=r.options&&r.options.borderWidth||0,a=t.data||[];if(!a.length)return n;const i=a[0].size(this.resolveDataElementOptions(0)),o=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(n,i,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}ze(Jm,"id","line"),ze(Jm,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ze(Jm,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function rl(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Aw{constructor(t){ze(this,"options");this.options=t||{}}static override(t){Object.assign(Aw.prototype,t)}init(){}formats(){return rl()}parse(){return rl()}format(){return rl()}add(){return rl()}diff(){return rl()}startOf(){return rl()}endOf(){return rl()}}var Z$={_date:Aw};function K$(e,t,r,n){const{controller:a,data:i,_sorted:o}=e,c=a._cachedMeta.iScale,d=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(c&&t===c.axis&&t!=="r"&&o&&i.length){const u=c._reversePixels?Sz:gl;if(n){if(a._sharedOptions){const f=i[0],m=typeof f.getRange=="function"&&f.getRange(t);if(m){const p=u(i,t,r-m),x=u(i,t,r+m);return{lo:p.lo,hi:x.hi}}}}else{const f=u(i,t,r);if(d){const{vScale:m}=a._cachedMeta,{_parsed:p}=e,x=p.slice(0,f.lo+1).reverse().findIndex(y=>!Ot(y[m.axis]));f.lo-=Math.max(0,x);const v=p.slice(f.hi).findIndex(y=>!Ot(y[m.axis]));f.hi+=Math.max(0,v)}return f}}return{lo:0,hi:i.length-1}}function Kg(e,t,r,n,a){const i=e.getSortedVisibleDatasetMetas(),o=r[t];for(let c=0,d=i.length;c<d;++c){const{index:u,data:f}=i[c],{lo:m,hi:p}=K$(i[c],t,o,a);for(let x=m;x<=p;++x){const v=f[x];v.skip||n(v,u,x)}}}function X$(e){const t=e.indexOf("x")!==-1,r=e.indexOf("y")!==-1;return function(n,a){const i=t?Math.abs(n.x-a.x):0,o=r?Math.abs(n.y-a.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Fx(e,t,r,n,a){const i=[];return!a&&!e.isPointInArea(t)||Kg(e,r,t,function(c,d,u){!a&&!zh(c,e.chartArea,0)||c.inRange(t.x,t.y,n)&&i.push({element:c,datasetIndex:d,index:u})},!0),i}function J$(e,t,r,n){let a=[];function i(o,c,d){const{startAngle:u,endAngle:f}=o.getProps(["startAngle","endAngle"],n),{angle:m}=M4(o,{x:t.x,y:t.y});Rh(m,u,f)&&a.push({element:o,datasetIndex:c,index:d})}return Kg(e,r,t,i),a}function Q$(e,t,r,n,a,i){let o=[];const c=X$(r);let d=Number.POSITIVE_INFINITY;function u(f,m,p){const x=f.inRange(t.x,t.y,a);if(n&&!x)return;const v=f.getCenterPoint(a);if(!(!!i||e.isPointInArea(v))&&!x)return;const _=c(t,v);_<d?(o=[{element:f,datasetIndex:m,index:p}],d=_):_===d&&o.push({element:f,datasetIndex:m,index:p})}return Kg(e,r,t,u),o}function Bx(e,t,r,n,a,i){return!i&&!e.isPointInArea(t)?[]:r==="r"&&!n?J$(e,t,r,a):Q$(e,t,r,n,a,i)}function zj(e,t,r,n,a){const i=[],o=r==="x"?"inXRange":"inYRange";let c=!1;return Kg(e,r,t,(d,u,f)=>{d[o]&&d[o](t[r],a)&&(i.push({element:d,datasetIndex:u,index:f}),c=c||d.inRange(t.x,t.y,a))}),n&&!c?[]:i}var eI={modes:{index(e,t,r,n){const a=cl(t,e),i=r.axis||"x",o=r.includeInvisible||!1,c=r.intersect?Fx(e,a,i,n,o):Bx(e,a,i,!1,n,o),d=[];return c.length?(e.getSortedVisibleDatasetMetas().forEach(u=>{const f=c[0].index,m=u.data[f];m&&!m.skip&&d.push({element:m,datasetIndex:u.index,index:f})}),d):[]},dataset(e,t,r,n){const a=cl(t,e),i=r.axis||"xy",o=r.includeInvisible||!1;let c=r.intersect?Fx(e,a,i,n,o):Bx(e,a,i,!1,n,o);if(c.length>0){const d=c[0].datasetIndex,u=e.getDatasetMeta(d).data;c=[];for(let f=0;f<u.length;++f)c.push({element:u[f],datasetIndex:d,index:f})}return c},point(e,t,r,n){const a=cl(t,e),i=r.axis||"xy",o=r.includeInvisible||!1;return Fx(e,a,i,n,o)},nearest(e,t,r,n){const a=cl(t,e),i=r.axis||"xy",o=r.includeInvisible||!1;return Bx(e,a,i,r.intersect,n,o)},x(e,t,r,n){const a=cl(t,e);return zj(e,a,"x",r.intersect,n)},y(e,t,r,n){const a=cl(t,e);return zj(e,a,"y",r.intersect,n)}}};const X4=["left","top","right","bottom"];function _u(e,t){return e.filter(r=>r.pos===t)}function $j(e,t){return e.filter(r=>X4.indexOf(r.pos)===-1&&r.box.axis===t)}function ku(e,t){return e.sort((r,n)=>{const a=t?n:r,i=t?r:n;return a.weight===i.weight?a.index-i.index:a.weight-i.weight})}function tI(e){const t=[];let r,n,a,i,o,c;for(r=0,n=(e||[]).length;r<n;++r)a=e[r],{position:i,options:{stack:o,stackWeight:c=1}}=a,t.push({index:r,box:a,pos:i,horizontal:a.isHorizontal(),weight:a.weight,stack:o&&i+o,stackWeight:c});return t}function rI(e){const t={};for(const r of e){const{stack:n,pos:a,stackWeight:i}=r;if(!n||!X4.includes(a))continue;const o=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return t}function nI(e,t){const r=rI(e),{vBoxMaxWidth:n,hBoxMaxHeight:a}=t;let i,o,c;for(i=0,o=e.length;i<o;++i){c=e[i];const{fullSize:d}=c.box,u=r[c.stack],f=u&&c.stackWeight/u.weight;c.horizontal?(c.width=f?f*n:d&&t.availableWidth,c.height=a):(c.width=n,c.height=f?f*a:d&&t.availableHeight)}return r}function sI(e){const t=tI(e),r=ku(t.filter(u=>u.box.fullSize),!0),n=ku(_u(t,"left"),!0),a=ku(_u(t,"right")),i=ku(_u(t,"top"),!0),o=ku(_u(t,"bottom")),c=$j(t,"x"),d=$j(t,"y");return{fullSize:r,leftAndTop:n.concat(i),rightAndBottom:a.concat(d).concat(o).concat(c),chartArea:_u(t,"chartArea"),vertical:n.concat(a).concat(d),horizontal:i.concat(o).concat(c)}}function Ij(e,t,r,n){return Math.max(e[r],t[r])+Math.max(e[n],t[n])}function J4(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function aI(e,t,r,n){const{pos:a,box:i}=r,o=e.maxPadding;if(!ct(a)){r.size&&(e[a]-=r.size);const m=n[r.stack]||{size:0,count:1};m.size=Math.max(m.size,r.horizontal?i.height:i.width),r.size=m.size/m.count,e[a]+=r.size}i.getPadding&&J4(o,i.getPadding());const c=Math.max(0,t.outerWidth-Ij(o,e,"left","right")),d=Math.max(0,t.outerHeight-Ij(o,e,"top","bottom")),u=c!==e.w,f=d!==e.h;return e.w=c,e.h=d,r.horizontal?{same:u,other:f}:{same:f,other:u}}function iI(e){const t=e.maxPadding;function r(n){const a=Math.max(t[n]-e[n],0);return e[n]+=a,a}e.y+=r("top"),e.x+=r("left"),r("right"),r("bottom")}function oI(e,t){const r=t.maxPadding;function n(a){const i={left:0,top:0,right:0,bottom:0};return a.forEach(o=>{i[o]=Math.max(t[o],r[o])}),i}return n(e?["left","right"]:["top","bottom"])}function Hu(e,t,r,n){const a=[];let i,o,c,d,u,f;for(i=0,o=e.length,u=0;i<o;++i){c=e[i],d=c.box,d.update(c.width||t.w,c.height||t.h,oI(c.horizontal,t));const{same:m,other:p}=aI(t,r,c,n);u|=m&&a.length,f=f||p,d.fullSize||a.push(c)}return u&&Hu(a,t,r,n)||f}function bm(e,t,r,n,a){e.top=r,e.left=t,e.right=t+n,e.bottom=r+a,e.width=n,e.height=a}function Fj(e,t,r,n){const a=r.padding;let{x:i,y:o}=t;for(const c of e){const d=c.box,u=n[c.stack]||{placed:0,weight:1},f=c.stackWeight/u.weight||1;if(c.horizontal){const m=t.w*f,p=u.size||d.height;Qp(u.start)&&(o=u.start),d.fullSize?bm(d,a.left,o,r.outerWidth-a.right-a.left,p):bm(d,t.left+u.placed,o,m,p),u.start=o,u.placed+=m,o=d.bottom}else{const m=t.h*f,p=u.size||d.width;Qp(u.start)&&(i=u.start),d.fullSize?bm(d,i,a.top,p,r.outerHeight-a.bottom-a.top):bm(d,i,t.top+u.placed,p,m),u.start=i,u.placed+=m,i=d.right}}t.x=i,t.y=o}var Ps={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(r){t.draw(r)}}]},e.boxes.push(t)},removeBox(e,t){const r=e.boxes?e.boxes.indexOf(t):-1;r!==-1&&e.boxes.splice(r,1)},configure(e,t,r){t.fullSize=r.fullSize,t.position=r.position,t.weight=r.weight},update(e,t,r,n){if(!e)return;const a=As(e.options.layout.padding),i=Math.max(t-a.width,0),o=Math.max(r-a.height,0),c=sI(e.boxes),d=c.vertical,u=c.horizontal;wt(e.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const f=d.reduce((y,_)=>_.box.options&&_.box.options.display===!1?y:y+1,0)||1,m=Object.freeze({outerWidth:t,outerHeight:r,padding:a,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/f,hBoxMaxHeight:o/2}),p=Object.assign({},a);J4(p,As(n));const x=Object.assign({maxPadding:p,w:i,h:o,x:a.left,y:a.top},a),v=nI(d.concat(u),m);Hu(c.fullSize,x,m,v),Hu(d,x,m,v),Hu(u,x,m,v)&&Hu(d,x,m,v),iI(x),Fj(c.leftAndTop,x,m,v),x.x+=x.w,x.y+=x.h,Fj(c.rightAndBottom,x,m,v),e.chartArea={left:x.left,top:x.top,right:x.left+x.w,bottom:x.top+x.h,height:x.h,width:x.w},wt(c.chartArea,y=>{const _=y.box;Object.assign(_,e.chartArea),_.update(x.w,x.h,{left:0,top:0,right:0,bottom:0})})}};class Q4{acquireContext(t,r){}releaseContext(t){return!1}addEventListener(t,r,n){}removeEventListener(t,r,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,r,n,a){return r=Math.max(0,r||t.width),n=n||t.height,{width:r,height:Math.max(0,a?Math.floor(r/a):n)}}isAttached(t){return!0}updateConfig(t){}}class lI extends Q4{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Qm="$chartjs",cI={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Bj=e=>e===null||e==="";function dI(e,t){const r=e.style,n=e.getAttribute("height"),a=e.getAttribute("width");if(e[Qm]={initial:{height:n,width:a,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",Bj(a)){const i=Cj(e,"width");i!==void 0&&(e.width=i)}if(Bj(n))if(e.style.height==="")e.height=e.width/(t||2);else{const i=Cj(e,"height");i!==void 0&&(e.height=i)}return e}const eP=_$?{passive:!0}:!1;function uI(e,t,r){e&&e.addEventListener(t,r,eP)}function hI(e,t,r){e&&e.canvas&&e.canvas.removeEventListener(t,r,eP)}function fI(e,t){const r=cI[e.type]||e.type,{x:n,y:a}=cl(e,t);return{type:r,chart:t,native:e,x:n!==void 0?n:null,y:a!==void 0?a:null}}function ng(e,t){for(const r of e)if(r===t||r.contains(t))return!0}function mI(e,t,r){const n=e.canvas,a=new MutationObserver(i=>{let o=!1;for(const c of i)o=o||ng(c.addedNodes,n),o=o&&!ng(c.removedNodes,n);o&&r()});return a.observe(document,{childList:!0,subtree:!0}),a}function pI(e,t,r){const n=e.canvas,a=new MutationObserver(i=>{let o=!1;for(const c of i)o=o||ng(c.removedNodes,n),o=o&&!ng(c.addedNodes,n);o&&r()});return a.observe(document,{childList:!0,subtree:!0}),a}const Ih=new Map;let Hj=0;function tP(){const e=window.devicePixelRatio;e!==Hj&&(Hj=e,Ih.forEach((t,r)=>{r.currentDevicePixelRatio!==e&&t()}))}function gI(e,t){Ih.size||window.addEventListener("resize",tP),Ih.set(e,t)}function xI(e){Ih.delete(e),Ih.size||window.removeEventListener("resize",tP)}function yI(e,t,r){const n=e.canvas,a=n&&Lw(n);if(!a)return;const i=L4((c,d)=>{const u=a.clientWidth;r(c,d),u<a.clientWidth&&r()},window),o=new ResizeObserver(c=>{const d=c[0],u=d.contentRect.width,f=d.contentRect.height;u===0&&f===0||i(u,f)});return o.observe(a),gI(e,i),o}function Hx(e,t,r){r&&r.disconnect(),t==="resize"&&xI(e)}function vI(e,t,r){const n=e.canvas,a=L4(i=>{e.ctx!==null&&r(fI(i,e))},e);return uI(n,t,a),a}class bI extends Q4{acquireContext(t,r){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(dI(t,r),n):null}releaseContext(t){const r=t.canvas;if(!r[Qm])return!1;const n=r[Qm].initial;["height","width"].forEach(i=>{const o=n[i];Ot(o)?r.removeAttribute(i):r.setAttribute(i,o)});const a=n.style||{};return Object.keys(a).forEach(i=>{r.style[i]=a[i]}),r.width=r.width,delete r[Qm],!0}addEventListener(t,r,n){this.removeEventListener(t,r);const a=t.$proxies||(t.$proxies={}),o={attach:mI,detach:pI,resize:yI}[r]||vI;a[r]=o(t,r,n)}removeEventListener(t,r){const n=t.$proxies||(t.$proxies={}),a=n[r];if(!a)return;({attach:Hx,detach:Hx,resize:Hx}[r]||hI)(t,r,a),n[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,r,n,a){return w$(t,r,n,a)}isAttached(t){const r=t&&Lw(t);return!!(r&&r.isConnected)}}function wI(e){return!Dw()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?lI:bI}var Im;let Ti=(Im=class{constructor(){ze(this,"x");ze(this,"y");ze(this,"active",!1);ze(this,"options");ze(this,"$animations")}tooltipPosition(t){const{x:r,y:n}=this.getProps(["x","y"],t);return{x:r,y:n}}hasValue(){return Ah(this.x)&&Ah(this.y)}getProps(t,r){const n=this.$animations;if(!r||!n)return this;const a={};return t.forEach(i=>{a[i]=n[i]&&n[i].active()?n[i]._to:this[i]}),a}},ze(Im,"defaults",{}),ze(Im,"defaultRoutes"),Im);function _I(e,t){const r=e.options.ticks,n=kI(e),a=Math.min(r.maxTicksLimit||n,n),i=r.major.enabled?NI(t):[],o=i.length,c=i[0],d=i[o-1],u=[];if(o>a)return SI(t,u,i,o/a),u;const f=jI(i,t,a);if(o>0){let m,p;const x=o>1?Math.round((d-c)/(o-1)):null;for(wm(t,u,f,Ot(x)?0:c-x,c),m=0,p=o-1;m<p;m++)wm(t,u,f,i[m],i[m+1]);return wm(t,u,f,d,Ot(x)?t.length:d+x),u}return wm(t,u,f),u}function kI(e){const t=e.options.offset,r=e._tickSize(),n=e._length/r+(t?0:1),a=e._maxLength/r;return Math.floor(Math.min(n,a))}function jI(e,t,r){const n=CI(e),a=t.length/r;if(!n)return Math.max(a,1);const i=vz(n);for(let o=0,c=i.length-1;o<c;o++){const d=i[o];if(d>a)return d}return Math.max(a,1)}function NI(e){const t=[];let r,n;for(r=0,n=e.length;r<n;r++)e[r].major&&t.push(r);return t}function SI(e,t,r,n){let a=0,i=r[0],o;for(n=Math.ceil(n),o=0;o<e.length;o++)o===i&&(t.push(e[o]),a++,i=r[a*n])}function wm(e,t,r,n,a){const i=it(n,0),o=Math.min(it(a,e.length),e.length);let c=0,d,u,f;for(r=Math.ceil(r),a&&(d=a-n,r=d/Math.floor(d/r)),f=i;f<0;)c++,f=Math.round(i+c*r);for(u=Math.max(i,0);u<o;u++)u===f&&(t.push(e[u]),c++,f=Math.round(i+c*r))}function CI(e){const t=e.length;let r,n;if(t<2)return!1;for(n=e[0],r=1;r<t;++r)if(e[r]-e[r-1]!==n)return!1;return n}const EI=e=>e==="left"?"right":e==="right"?"left":e,Wj=(e,t,r)=>t==="top"||t==="left"?e[t]+r:e[t]-r,Uj=(e,t)=>Math.min(t||e,e);function Vj(e,t){const r=[],n=e.length/t,a=e.length;let i=0;for(;i<a;i+=n)r.push(e[Math.floor(i)]);return r}function PI(e,t,r){const n=e.ticks.length,a=Math.min(t,n-1),i=e._startPixel,o=e._endPixel,c=1e-6;let d=e.getPixelForTick(a),u;if(!(r&&(n===1?u=Math.max(d-i,o-d):t===0?u=(e.getPixelForTick(1)-d)/2:u=(d-e.getPixelForTick(a-1))/2,d+=a<t?u:-u,d<i-c||d>o+c)))return d}function TI(e,t){wt(e,r=>{const n=r.gc,a=n.length/2;let i;if(a>t){for(i=0;i<a;++i)delete r.data[n[i]];n.splice(0,a)}})}function ju(e){return e.drawTicks?e.tickLength:0}function qj(e,t){if(!e.display)return 0;const r=sn(e.font,t),n=As(e.padding);return(jr(e.text)?e.text.length:1)*r.lineHeight+n.height}function MI(e,t){return Gl(e,{scale:t,type:"scale"})}function OI(e,t,r){return Gl(e,{tick:r,index:t,type:"tick"})}function DI(e,t,r){let n=Sw(e);return(r&&t!=="right"||!r&&t==="right")&&(n=EI(n)),n}function LI(e,t,r,n){const{top:a,left:i,bottom:o,right:c,chart:d}=e,{chartArea:u,scales:f}=d;let m=0,p,x,v;const y=o-a,_=c-i;if(e.isHorizontal()){if(x=tn(n,i,c),ct(r)){const w=Object.keys(r)[0],b=r[w];v=f[w].getPixelForValue(b)+y-t}else r==="center"?v=(u.bottom+u.top)/2+y-t:v=Wj(e,r,t);p=c-i}else{if(ct(r)){const w=Object.keys(r)[0],b=r[w];x=f[w].getPixelForValue(b)-_+t}else r==="center"?x=(u.left+u.right)/2-_+t:x=Wj(e,r,t);v=tn(n,o,a),m=r==="left"?-Sr:Sr}return{titleX:x,titleY:v,maxWidth:p,rotation:m}}class Id extends Ti{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,r){return t}getUserBounds(){let{_userMin:t,_userMax:r,_suggestedMin:n,_suggestedMax:a}=this;return t=ya(t,Number.POSITIVE_INFINITY),r=ya(r,Number.NEGATIVE_INFINITY),n=ya(n,Number.POSITIVE_INFINITY),a=ya(a,Number.NEGATIVE_INFINITY),{min:ya(t,n),max:ya(r,a),minDefined:cn(t),maxDefined:cn(r)}}getMinMax(t){let{min:r,max:n,minDefined:a,maxDefined:i}=this.getUserBounds(),o;if(a&&i)return{min:r,max:n};const c=this.getMatchingVisibleMetas();for(let d=0,u=c.length;d<u;++d)o=c[d].controller.getMinMax(this,t),a||(r=Math.min(r,o.min)),i||(n=Math.max(n,o.max));return r=i&&r>n?n:r,n=a&&r>n?r:n,{min:ya(r,ya(n,r)),max:ya(n,ya(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){zt(this.options.beforeUpdate,[this])}update(t,r,n){const{beginAtZero:a,grace:i,ticks:o}=this.options,c=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=r,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Qz(this,i,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=c<this.ticks.length;this._convertTicksToLabels(d?Vj(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=_I(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,r,n;this.isHorizontal()?(r=this.left,n=this.right):(r=this.top,n=this.bottom,t=!t),this._startPixel=r,this._endPixel=n,this._reversePixels=t,this._length=n-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){zt(this.options.afterUpdate,[this])}beforeSetDimensions(){zt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){zt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),zt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){zt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const r=this.options.ticks;let n,a,i;for(n=0,a=t.length;n<a;n++)i=t[n],i.label=zt(r.callback,[i.value,n,t],this)}afterTickToLabelConversion(){zt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){zt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,r=t.ticks,n=Uj(this.ticks.length,t.ticks.maxTicksLimit),a=r.minRotation||0,i=r.maxRotation;let o=a,c,d,u;if(!this._isVisible()||!r.display||a>=i||n<=1||!this.isHorizontal()){this.labelRotation=a;return}const f=this._getLabelSizes(),m=f.widest.width,p=f.highest.height,x=nn(this.chart.width-m,0,this.maxWidth);c=t.offset?this.maxWidth/n:x/(n-1),m+6>c&&(c=x/(n-(t.offset?.5:1)),d=this.maxHeight-ju(t.grid)-r.padding-qj(t.title,this.chart.options.font),u=Math.sqrt(m*m+p*p),o=kz(Math.min(Math.asin(nn((f.highest.height+6)/c,-1,1)),Math.asin(nn(d/u,-1,1))-Math.asin(nn(p/u,-1,1)))),o=Math.max(a,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){zt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){zt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:r,options:{ticks:n,title:a,grid:i}}=this,o=this._isVisible(),c=this.isHorizontal();if(o){const d=qj(a,r.options.font);if(c?(t.width=this.maxWidth,t.height=ju(i)+d):(t.height=this.maxHeight,t.width=ju(i)+d),n.display&&this.ticks.length){const{first:u,last:f,widest:m,highest:p}=this._getLabelSizes(),x=n.padding*2,v=ui(this.labelRotation),y=Math.cos(v),_=Math.sin(v);if(c){const w=n.mirror?0:_*m.width+y*p.height;t.height=Math.min(this.maxHeight,t.height+w+x)}else{const w=n.mirror?0:y*m.width+_*p.height;t.width=Math.min(this.maxWidth,t.width+w+x)}this._calculatePadding(u,f,_,y)}}this._handleMargins(),c?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,r,n,a){const{ticks:{align:i,padding:o},position:c}=this.options,d=this.labelRotation!==0,u=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const f=this.getPixelForTick(0)-this.left,m=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,x=0;d?u?(p=a*t.width,x=n*r.height):(p=n*t.height,x=a*r.width):i==="start"?x=r.width:i==="end"?p=t.width:i!=="inner"&&(p=t.width/2,x=r.width/2),this.paddingLeft=Math.max((p-f+o)*this.width/(this.width-f),0),this.paddingRight=Math.max((x-m+o)*this.width/(this.width-m),0)}else{let f=r.height/2,m=t.height/2;i==="start"?(f=0,m=t.height):i==="end"&&(f=r.height,m=0),this.paddingTop=f+o,this.paddingBottom=m+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){zt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:r}=this.options;return r==="top"||r==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let r,n;for(r=0,n=t.length;r<n;r++)Ot(t[r].label)&&(t.splice(r,1),n--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const r=this.options.ticks.sampleSize;let n=this.ticks;r<n.length&&(n=Vj(n,r)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,r,n){const{ctx:a,_longestTextCache:i}=this,o=[],c=[],d=Math.floor(r/Uj(r,n));let u=0,f=0,m,p,x,v,y,_,w,b,N,S,C;for(m=0;m<r;m+=d){if(v=t[m].label,y=this._resolveTickFontOptions(m),a.font=_=y.string,w=i[_]=i[_]||{data:{},gc:[]},b=y.lineHeight,N=S=0,!Ot(v)&&!jr(v))N=_j(a,w.data,w.gc,N,v),S=b;else if(jr(v))for(p=0,x=v.length;p<x;++p)C=v[p],!Ot(C)&&!jr(C)&&(N=_j(a,w.data,w.gc,N,C),S+=b);o.push(N),c.push(S),u=Math.max(N,u),f=Math.max(S,f)}TI(i,r);const O=o.indexOf(u),A=c.indexOf(f),z=$=>({width:o[$]||0,height:c[$]||0});return{first:z(0),last:z(r-1),widest:z(O),highest:z(A),widths:o,heights:c}}getLabelForValue(t){return t}getPixelForValue(t,r){return NaN}getValueForPixel(t){}getPixelForTick(t){const r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const r=this._startPixel+t*this._length;return Nz(this._alignToPixels?tl(this.chart,r,0):r)}getDecimalForPixel(t){const r=(t-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:r}=this;return t<0&&r<0?r:t>0&&r>0?t:0}getContext(t){const r=this.ticks||[];if(t>=0&&t<r.length){const n=r[t];return n.$context||(n.$context=OI(this.getContext(),t,n))}return this.$context||(this.$context=MI(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,r=ui(this.labelRotation),n=Math.abs(Math.cos(r)),a=Math.abs(Math.sin(r)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,c=i?i.widest.width+o:0,d=i?i.highest.height+o:0;return this.isHorizontal()?d*n>c*a?c/n:d/a:d*a<c*n?d/n:c/a}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const r=this.axis,n=this.chart,a=this.options,{grid:i,position:o,border:c}=a,d=i.offset,u=this.isHorizontal(),m=this.ticks.length+(d?1:0),p=ju(i),x=[],v=c.setContext(this.getContext()),y=v.display?v.width:0,_=y/2,w=function(Z){return tl(n,Z,y)};let b,N,S,C,O,A,z,$,W,F,G,ee;if(o==="top")b=w(this.bottom),A=this.bottom-p,$=b-_,F=w(t.top)+_,ee=t.bottom;else if(o==="bottom")b=w(this.top),F=t.top,ee=w(t.bottom)-_,A=b+_,$=this.top+p;else if(o==="left")b=w(this.right),O=this.right-p,z=b-_,W=w(t.left)+_,G=t.right;else if(o==="right")b=w(this.left),W=t.left,G=w(t.right)-_,O=b+_,z=this.left+p;else if(r==="x"){if(o==="center")b=w((t.top+t.bottom)/2+.5);else if(ct(o)){const Z=Object.keys(o)[0],pe=o[Z];b=w(this.chart.scales[Z].getPixelForValue(pe))}F=t.top,ee=t.bottom,A=b+_,$=A+p}else if(r==="y"){if(o==="center")b=w((t.left+t.right)/2);else if(ct(o)){const Z=Object.keys(o)[0],pe=o[Z];b=w(this.chart.scales[Z].getPixelForValue(pe))}O=b-_,z=O-p,W=t.left,G=t.right}const K=it(a.ticks.maxTicksLimit,m),oe=Math.max(1,Math.ceil(m/K));for(N=0;N<m;N+=oe){const Z=this.getContext(N),pe=i.setContext(Z),Q=c.setContext(Z),ce=pe.lineWidth,le=pe.color,B=Q.dash||[],X=Q.dashOffset,ae=pe.tickWidth,fe=pe.tickColor,re=pe.tickBorderDash||[],ge=pe.tickBorderDashOffset;S=PI(this,N,d),S!==void 0&&(C=tl(n,S,ce),u?O=z=W=G=C:A=$=F=ee=C,x.push({tx1:O,ty1:A,tx2:z,ty2:$,x1:W,y1:F,x2:G,y2:ee,width:ce,color:le,borderDash:B,borderDashOffset:X,tickWidth:ae,tickColor:fe,tickBorderDash:re,tickBorderDashOffset:ge}))}return this._ticksLength=m,this._borderValue=b,x}_computeLabelItems(t){const r=this.axis,n=this.options,{position:a,ticks:i}=n,o=this.isHorizontal(),c=this.ticks,{align:d,crossAlign:u,padding:f,mirror:m}=i,p=ju(n.grid),x=p+f,v=m?-f:x,y=-ui(this.labelRotation),_=[];let w,b,N,S,C,O,A,z,$,W,F,G,ee="middle";if(a==="top")O=this.bottom-v,A=this._getXAxisLabelAlignment();else if(a==="bottom")O=this.top+v,A=this._getXAxisLabelAlignment();else if(a==="left"){const oe=this._getYAxisLabelAlignment(p);A=oe.textAlign,C=oe.x}else if(a==="right"){const oe=this._getYAxisLabelAlignment(p);A=oe.textAlign,C=oe.x}else if(r==="x"){if(a==="center")O=(t.top+t.bottom)/2+x;else if(ct(a)){const oe=Object.keys(a)[0],Z=a[oe];O=this.chart.scales[oe].getPixelForValue(Z)+x}A=this._getXAxisLabelAlignment()}else if(r==="y"){if(a==="center")C=(t.left+t.right)/2-x;else if(ct(a)){const oe=Object.keys(a)[0],Z=a[oe];C=this.chart.scales[oe].getPixelForValue(Z)}A=this._getYAxisLabelAlignment(p).textAlign}r==="y"&&(d==="start"?ee="top":d==="end"&&(ee="bottom"));const K=this._getLabelSizes();for(w=0,b=c.length;w<b;++w){N=c[w],S=N.label;const oe=i.setContext(this.getContext(w));z=this.getPixelForTick(w)+i.labelOffset,$=this._resolveTickFontOptions(w),W=$.lineHeight,F=jr(S)?S.length:1;const Z=F/2,pe=oe.color,Q=oe.textStrokeColor,ce=oe.textStrokeWidth;let le=A;o?(C=z,A==="inner"&&(w===b-1?le=this.options.reverse?"left":"right":w===0?le=this.options.reverse?"right":"left":le="center"),a==="top"?u==="near"||y!==0?G=-F*W+W/2:u==="center"?G=-K.highest.height/2-Z*W+W:G=-K.highest.height+W/2:u==="near"||y!==0?G=W/2:u==="center"?G=K.highest.height/2-Z*W:G=K.highest.height-F*W,m&&(G*=-1),y!==0&&!oe.showLabelBackdrop&&(C+=W/2*Math.sin(y))):(O=z,G=(1-F)*W/2);let B;if(oe.showLabelBackdrop){const X=As(oe.backdropPadding),ae=K.heights[w],fe=K.widths[w];let re=G-X.top,ge=0-X.left;switch(ee){case"middle":re-=ae/2;break;case"bottom":re-=ae;break}switch(A){case"center":ge-=fe/2;break;case"right":ge-=fe;break;case"inner":w===b-1?ge-=fe:w>0&&(ge-=fe/2);break}B={left:ge,top:re,width:fe+X.width,height:ae+X.height,color:oe.backdropColor}}_.push({label:S,font:$,textOffset:G,options:{rotation:y,color:pe,strokeColor:Q,strokeWidth:ce,textAlign:le,textBaseline:ee,translation:[C,O],backdrop:B}})}return _}_getXAxisLabelAlignment(){const{position:t,ticks:r}=this.options;if(-ui(this.labelRotation))return t==="top"?"left":"right";let a="center";return r.align==="start"?a="left":r.align==="end"?a="right":r.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(t){const{position:r,ticks:{crossAlign:n,mirror:a,padding:i}}=this.options,o=this._getLabelSizes(),c=t+i,d=o.widest.width;let u,f;return r==="left"?a?(f=this.right+i,n==="near"?u="left":n==="center"?(u="center",f+=d/2):(u="right",f+=d)):(f=this.right-c,n==="near"?u="right":n==="center"?(u="center",f-=d/2):(u="left",f=this.left)):r==="right"?a?(f=this.left+i,n==="near"?u="right":n==="center"?(u="center",f-=d/2):(u="left",f-=d)):(f=this.left+c,n==="near"?u="left":n==="center"?(u="center",f+=d/2):(u="right",f=this.right)):u="right",{textAlign:u,x:f}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:r},left:n,top:a,width:i,height:o}=this;r&&(t.save(),t.fillStyle=r,t.fillRect(n,a,i,o),t.restore())}getLineWidthForValue(t){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const a=this.ticks.findIndex(i=>i.value===t);return a>=0?r.setContext(this.getContext(a)).lineWidth:0}drawGrid(t){const r=this.options.grid,n=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const c=(d,u,f)=>{!f.width||!f.color||(n.save(),n.lineWidth=f.width,n.strokeStyle=f.color,n.setLineDash(f.borderDash||[]),n.lineDashOffset=f.borderDashOffset,n.beginPath(),n.moveTo(d.x,d.y),n.lineTo(u.x,u.y),n.stroke(),n.restore())};if(r.display)for(i=0,o=a.length;i<o;++i){const d=a[i];r.drawOnChartArea&&c({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),r.drawTicks&&c({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:r,options:{border:n,grid:a}}=this,i=n.setContext(this.getContext()),o=n.display?i.width:0;if(!o)return;const c=a.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let u,f,m,p;this.isHorizontal()?(u=tl(t,this.left,o)-o/2,f=tl(t,this.right,c)+c/2,m=p=d):(m=tl(t,this.top,o)-o/2,p=tl(t,this.bottom,c)+c/2,u=f=d),r.save(),r.lineWidth=i.width,r.strokeStyle=i.color,r.beginPath(),r.moveTo(u,m),r.lineTo(f,p),r.stroke(),r.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,a=this._computeLabelArea();a&&Yg(n,a);const i=this.getLabelItems(t);for(const o of i){const c=o.options,d=o.font,u=o.label,f=o.textOffset;$h(n,u,0,f,d,c)}a&&Gg(n)}drawTitle(){const{ctx:t,options:{position:r,title:n,reverse:a}}=this;if(!n.display)return;const i=sn(n.font),o=As(n.padding),c=n.align;let d=i.lineHeight/2;r==="bottom"||r==="center"||ct(r)?(d+=o.bottom,jr(n.text)&&(d+=i.lineHeight*(n.text.length-1))):d+=o.top;const{titleX:u,titleY:f,maxWidth:m,rotation:p}=LI(this,d,r,c);$h(t,n.text,0,0,i,{color:n.color,maxWidth:m,rotation:p,textAlign:DI(c,r,a),textBaseline:"middle",translation:[u,f]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,r=t.ticks&&t.ticks.z||0,n=it(t.grid&&t.grid.z,-1),a=it(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Id.prototype.draw?[{z:r,draw:i=>{this.draw(i)}}]:[{z:n,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:r,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const r=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",a=[];let i,o;for(i=0,o=r.length;i<o;++i){const c=r[i];c[n]===this.id&&(!t||c.type===t)&&a.push(c)}return a}_resolveTickFontOptions(t){const r=this.options.ticks.setContext(this.getContext(t));return sn(r.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class _m{constructor(t,r,n){this.type=t,this.scope=r,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const r=Object.getPrototypeOf(t);let n;zI(r)&&(n=this.register(r));const a=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in a||(a[i]=t,AI(t,o,n),this.override&&cr.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const r=this.items,n=t.id,a=this.scope;n in r&&delete r[n],a&&n in cr[a]&&(delete cr[a][n],this.override&&delete zl[n])}}function AI(e,t,r){const n=Dh(Object.create(null),[r?cr.get(r):{},cr.get(t),e.defaults]);cr.set(t,n),e.defaultRoutes&&RI(t,e.defaultRoutes),e.descriptors&&cr.describe(t,e.descriptors)}function RI(e,t){Object.keys(t).forEach(r=>{const n=r.split("."),a=n.pop(),i=[e].concat(n).join("."),o=t[r].split("."),c=o.pop(),d=o.join(".");cr.route(i,a,d,c)})}function zI(e){return"id"in e&&"defaults"in e}class $I{constructor(){this.controllers=new _m(id,"datasets",!0),this.elements=new _m(Ti,"elements"),this.plugins=new _m(Object,"plugins"),this.scales=new _m(Id,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,r,n){[...r].forEach(a=>{const i=n||this._getRegistryForType(a);n||i.isForType(a)||i===this.plugins&&a.id?this._exec(t,i,a):wt(a,o=>{const c=n||this._getRegistryForType(o);this._exec(t,c,o)})})}_exec(t,r,n){const a=jw(t);zt(n["before"+a],[],n),r[t](n),zt(n["after"+a],[],n)}_getRegistryForType(t){for(let r=0;r<this._typedRegistries.length;r++){const n=this._typedRegistries[r];if(n.isForType(t))return n}return this.plugins}_get(t,r,n){const a=r.get(t);if(a===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return a}}var wa=new $I;class II{constructor(){this._init=void 0}notify(t,r,n,a){if(r==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const i=a?this._descriptors(t).filter(a):this._descriptors(t),o=this._notify(i,t,r,n);return r==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,r,n,a){a=a||{};for(const i of t){const o=i.plugin,c=o[n],d=[r,a,i.options];if(zt(c,d,o)===!1&&a.cancelable)return!1}return!0}invalidate(){Ot(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),r}_createDescriptors(t,r){const n=t&&t.config,a=it(n.options&&n.options.plugins,{}),i=FI(n);return a===!1&&!r?[]:HI(t,i,a,r)}_notifyStateChanges(t){const r=this._oldCache||[],n=this._cache,a=(i,o)=>i.filter(c=>!o.some(d=>c.plugin.id===d.plugin.id));this._notify(a(r,n),t,"stop"),this._notify(a(n,r),t,"start")}}function FI(e){const t={},r=[],n=Object.keys(wa.plugins.items);for(let i=0;i<n.length;i++)r.push(wa.getPlugin(n[i]));const a=e.plugins||[];for(let i=0;i<a.length;i++){const o=a[i];r.indexOf(o)===-1&&(r.push(o),t[o.id]=!0)}return{plugins:r,localIds:t}}function BI(e,t){return!t&&e===!1?null:e===!0?{}:e}function HI(e,{plugins:t,localIds:r},n,a){const i=[],o=e.getContext();for(const c of t){const d=c.id,u=BI(n[d],a);u!==null&&i.push({plugin:c,options:WI(e.config,{plugin:c,local:r[d]},u,o)})}return i}function WI(e,{plugin:t,local:r},n,a){const i=e.pluginScopeKeys(t),o=e.getOptionScopes(n,i);return r&&t.defaults&&o.push(t.defaults),e.createResolver(o,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function _v(e,t){const r=cr.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||r.indexAxis||"x"}function UI(e,t){let r=e;return e==="_index_"?r=t:e==="_value_"&&(r=t==="x"?"y":"x"),r}function VI(e,t){return e===t?"_index_":"_value_"}function Yj(e){if(e==="x"||e==="y"||e==="r")return e}function qI(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function kv(e,...t){if(Yj(e))return e;for(const r of t){const n=r.axis||qI(r.position)||e.length>1&&Yj(e[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Gj(e,t,r){if(r[t+"AxisID"]===e)return{axis:t}}function YI(e,t){if(t.data&&t.data.datasets){const r=t.data.datasets.filter(n=>n.xAxisID===e||n.yAxisID===e);if(r.length)return Gj(e,"x",r[0])||Gj(e,"y",r[0])}return{}}function GI(e,t){const r=zl[e.type]||{scales:{}},n=t.scales||{},a=_v(e.type,t),i=Object.create(null);return Object.keys(n).forEach(o=>{const c=n[o];if(!ct(c))return console.error(`Invalid scale configuration for scale: ${o}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const d=kv(o,c,YI(o,e),cr.scales[c.type]),u=VI(d,a),f=r.scales||{};i[o]=ah(Object.create(null),[{axis:d},c,f[d],f[u]])}),e.data.datasets.forEach(o=>{const c=o.type||e.type,d=o.indexAxis||_v(c,t),f=(zl[c]||{}).scales||{};Object.keys(f).forEach(m=>{const p=UI(m,d),x=o[p+"AxisID"]||p;i[x]=i[x]||Object.create(null),ah(i[x],[{axis:p},n[x],f[m]])})}),Object.keys(i).forEach(o=>{const c=i[o];ah(c,[cr.scales[c.type],cr.scale])}),i}function rP(e){const t=e.options||(e.options={});t.plugins=it(t.plugins,{}),t.scales=GI(e,t)}function nP(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function ZI(e){return e=e||{},e.data=nP(e.data),rP(e),e}const Zj=new Map,sP=new Set;function km(e,t){let r=Zj.get(e);return r||(r=t(),Zj.set(e,r),sP.add(r)),r}const Nu=(e,t,r)=>{const n=Lh(t,r);n!==void 0&&e.add(n)};class KI{constructor(t){this._config=ZI(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=nP(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),rP(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return km(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,r){return km(`${t}.transition.${r}`,()=>[[`datasets.${t}.transitions.${r}`,`transitions.${r}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,r){return km(`${t}-${r}`,()=>[[`datasets.${t}.elements.${r}`,`datasets.${t}`,`elements.${r}`,""]])}pluginScopeKeys(t){const r=t.id,n=this.type;return km(`${n}-plugin-${r}`,()=>[[`plugins.${r}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,r){const n=this._scopeCache;let a=n.get(t);return(!a||r)&&(a=new Map,n.set(t,a)),a}getOptionScopes(t,r,n){const{options:a,type:i}=this,o=this._cachedScopes(t,n),c=o.get(r);if(c)return c;const d=new Set;r.forEach(f=>{t&&(d.add(t),f.forEach(m=>Nu(d,t,m))),f.forEach(m=>Nu(d,a,m)),f.forEach(m=>Nu(d,zl[i]||{},m)),f.forEach(m=>Nu(d,cr,m)),f.forEach(m=>Nu(d,bv,m))});const u=Array.from(d);return u.length===0&&u.push(Object.create(null)),sP.has(r)&&o.set(r,u),u}chartOptionScopes(){const{options:t,type:r}=this;return[t,zl[r]||{},cr.datasets[r]||{},{type:r},cr,bv]}resolveNamedOptions(t,r,n,a=[""]){const i={$shared:!0},{resolver:o,subPrefixes:c}=Kj(this._resolverCache,t,a);let d=o;if(JI(o,r)){i.$shared=!1,n=Mo(n)?n():n;const u=this.createResolver(t,n,c);d=_d(o,n,u)}for(const u of r)i[u]=d[u];return i}createResolver(t,r,n=[""],a){const{resolver:i}=Kj(this._resolverCache,t,n);return ct(r)?_d(i,r,void 0,a):i}}function Kj(e,t,r){let n=e.get(t);n||(n=new Map,e.set(t,n));const a=r.join();let i=n.get(a);return i||(i={resolver:Tw(t,r),subPrefixes:r.filter(c=>!c.toLowerCase().includes("hover"))},n.set(a,i)),i}const XI=e=>ct(e)&&Object.getOwnPropertyNames(e).some(t=>Mo(e[t]));function JI(e,t){const{isScriptable:r,isIndexable:n}=$4(e);for(const a of t){const i=r(a),o=n(a),c=(o||i)&&e[a];if(i&&(Mo(c)||XI(c))||o&&jr(c))return!0}return!1}var QI="4.5.1";const e7=["top","bottom","left","right","chartArea"];function Xj(e,t){return e==="top"||e==="bottom"||e7.indexOf(e)===-1&&t==="x"}function Jj(e,t){return function(r,n){return r[e]===n[e]?r[t]-n[t]:r[e]-n[e]}}function Qj(e){const t=e.chart,r=t.options.animation;t.notifyPlugins("afterRender"),zt(r&&r.onComplete,[e],t)}function t7(e){const t=e.chart,r=t.options.animation;zt(r&&r.onProgress,[e],t)}function aP(e){return Dw()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const ep={},eN=e=>{const t=aP(e);return Object.values(ep).filter(r=>r.canvas===t).pop()};function r7(e,t,r){const n=Object.keys(e);for(const a of n){const i=+a;if(i>=t){const o=e[a];delete e[a],(r>0||i>t)&&(e[i+r]=o)}}}function n7(e,t,r,n){return!r||e.type==="mouseout"?null:n?t:e}var to;let Xg=(to=class{static register(...t){wa.add(...t),tN()}static unregister(...t){wa.remove(...t),tN()}constructor(t,r){const n=this.config=new KI(r),a=aP(t),i=eN(a);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||wI(a)),this.platform.updateConfig(n);const c=this.platform.acquireContext(a,o.aspectRatio),d=c&&c.canvas,u=d&&d.height,f=d&&d.width;if(this.id=dz(),this.ctx=c,this.canvas=d,this.width=f,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new II,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Tz(m=>this.update(m),o.resizeDelay||0),this._dataChanges=[],ep[this.id]=this,!c||!d){console.error("Failed to create chart: can't acquire context from the given item");return}ni.listen(this,"complete",Qj),ni.listen(this,"progress",t7),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:r},width:n,height:a,_aspectRatio:i}=this;return Ot(t)?r&&i?i:a?n/a:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return wa}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Sj(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return kj(this.canvas,this.ctx),this}stop(){return ni.stop(this),this}resize(t,r){ni.running(this)?this._resizeBeforeDraw={width:t,height:r}:this._resize(t,r)}_resize(t,r){const n=this.options,a=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(a,t,r,i),c=n.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Sj(this,c,!0)&&(this.notifyPlugins("resize",{size:o}),zt(n.onResize,[this,o],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};wt(r,(n,a)=>{n.id=a})}buildOrUpdateScales(){const t=this.options,r=t.scales,n=this.scales,a=Object.keys(n).reduce((o,c)=>(o[c]=!1,o),{});let i=[];r&&(i=i.concat(Object.keys(r).map(o=>{const c=r[o],d=kv(o,c),u=d==="r",f=d==="x";return{options:c,dposition:u?"chartArea":f?"bottom":"left",dtype:u?"radialLinear":f?"category":"linear"}}))),wt(i,o=>{const c=o.options,d=c.id,u=kv(d,c),f=it(c.type,o.dtype);(c.position===void 0||Xj(c.position,u)!==Xj(o.dposition))&&(c.position=o.dposition),a[d]=!0;let m=null;if(d in n&&n[d].type===f)m=n[d];else{const p=wa.getScale(f);m=new p({id:d,type:f,ctx:this.ctx,chart:this}),n[m.id]=m}m.init(c,t)}),wt(a,(o,c)=>{o||delete n[c]}),wt(n,o=>{Ps.configure(this,o,o.options),Ps.addBox(this,o)})}_updateMetasets(){const t=this._metasets,r=this.data.datasets.length,n=t.length;if(t.sort((a,i)=>a.index-i.index),n>r){for(let a=r;a<n;++a)this._destroyDatasetMeta(a);t.splice(r,n-r)}this._sortedMetasets=t.slice(0).sort(Jj("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:r}}=this;t.length>r.length&&delete this._stacks,t.forEach((n,a)=>{r.filter(i=>i===n._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const t=[],r=this.data.datasets;let n,a;for(this._removeUnreferencedMetasets(),n=0,a=r.length;n<a;n++){const i=r[n];let o=this.getDatasetMeta(n);const c=i.type||this.config.type;if(o.type&&o.type!==c&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=c,o.indexAxis=i.indexAxis||_v(c,this.options),o.order=i.order||0,o.index=n,o.label=""+i.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const d=wa.getController(c),{datasetElementType:u,dataElementType:f}=cr.datasets[c];Object.assign(d,{dataElementType:wa.getElement(f),datasetElementType:u&&wa.getElement(u)}),o.controller=new d(this,n),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){wt(this.data.datasets,(t,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const r=this.config;r.update();const n=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,f=this.data.datasets.length;u<f;u++){const{controller:m}=this.getDatasetMeta(u),p=!a&&i.indexOf(m)===-1;m.buildOrUpdateElements(p),o=Math.max(+m.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),a||wt(i,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Jj("z","_idx"));const{_active:c,_lastEvent:d}=this;d?this._eventHandler(d,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){wt(this.scales,t=>{Ps.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,r=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!fj(r,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,r=this._getUniformDataChanges()||[];for(const{method:n,start:a,count:i}of r){const o=n==="_removeElements"?-i:i;r7(t,a,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const r=this.data.datasets.length,n=i=>new Set(t.filter(o=>o[0]===i).map((o,c)=>c+","+o.splice(1).join(","))),a=n(0);for(let i=1;i<r;i++)if(!fj(a,n(i)))return;return Array.from(a).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ps.update(this,this.width,this.height,t);const r=this.chartArea,n=r.width<=0||r.height<=0;this._layers=[],wt(this.boxes,a=>{n&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,i)=>{a._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let r=0,n=this.data.datasets.length;r<n;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,n=this.data.datasets.length;r<n;++r)this._updateDataset(r,Mo(t)?t({datasetIndex:r}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,r){const n=this.getDatasetMeta(t),a={meta:n,index:t,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(n.controller._update(r),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ni.has(this)?this.attached&&!ni.running(this)&&ni.start(this):(this.draw(),Qj({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(t=0;t<r.length&&r[t].z<=0;++t)r[t].draw(this.chartArea);for(this._drawDatasets();t<r.length;++t)r[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const r=this._sortedMetasets,n=[];let a,i;for(a=0,i=r.length;a<i;++a){const o=r[a];(!t||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let r=t.length-1;r>=0;--r)this._drawDataset(t[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const r=this.ctx,n={meta:t,index:t.index,cancelable:!0},a=G4(this,t);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(a&&Yg(r,a),t.controller.draw(),a&&Gg(r),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return zh(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,r,n,a){const i=eI.modes[r];return typeof i=="function"?i(this,t,n,a):[]}getDatasetMeta(t){const r=this.data.datasets[t],n=this._metasets;let a=n.filter(i=>i&&i._dataset===r).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:t,_dataset:r,_parsed:[],_sorted:!1},n.push(a)),a}getContext(){return this.$context||(this.$context=Gl(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const r=this.data.datasets[t];if(!r)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!r.hidden}setDatasetVisibility(t,r){const n=this.getDatasetMeta(t);n.hidden=!r}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,r,n){const a=n?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,a);Qp(r)?(i.data[r].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(i,{visible:n}),this.update(c=>c.datasetIndex===t?a:void 0))}hide(t,r){this._updateVisibility(t,r,!1)}show(t,r){this._updateVisibility(t,r,!0)}_destroyDatasetMeta(t){const r=this._metasets[t];r&&r.controller&&r.controller._destroy(),delete this._metasets[t]}_stop(){let t,r;for(this.stop(),ni.remove(this),t=0,r=this.data.datasets.length;t<r;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:r}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),kj(t,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete ep[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,r=this.platform,n=(i,o)=>{r.addEventListener(this,i,o),t[i]=o},a=(i,o,c)=>{i.offsetX=o,i.offsetY=c,this._eventHandler(i)};wt(this.options.events,i=>n(i,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,r=this.platform,n=(d,u)=>{r.addEventListener(this,d,u),t[d]=u},a=(d,u)=>{t[d]&&(r.removeEventListener(this,d,u),delete t[d])},i=(d,u)=>{this.canvas&&this.resize(d,u)};let o;const c=()=>{a("attach",c),this.attached=!0,this.resize(),n("resize",i),n("detach",o)};o=()=>{this.attached=!1,a("resize",i),this._stop(),this._resize(0,0),n("attach",c)},r.isAttached(this.canvas)?c():o()}unbindEvents(){wt(this._listeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._listeners={},wt(this._responsiveListeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,r,n){const a=n?"set":"remove";let i,o,c,d;for(r==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+a+"DatasetHoverStyle"]()),c=0,d=t.length;c<d;++c){o=t[c];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[a+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const r=this._active||[],n=t.map(({datasetIndex:i,index:o})=>{const c=this.getDatasetMeta(i);if(!c)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:c.data[o],index:o}});!Xp(n,r)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,r))}notifyPlugins(t,r,n){return this._plugins.notify(this,t,r,n)}isPluginEnabled(t){return this._plugins._cache.filter(r=>r.plugin.id===t).length===1}_updateHoverStyles(t,r,n){const a=this.options.hover,i=(d,u)=>d.filter(f=>!u.some(m=>f.datasetIndex===m.datasetIndex&&f.index===m.index)),o=i(r,t),c=n?t:i(t,r);o.length&&this.updateHoverStyle(o,a.mode,!1),c.length&&a.mode&&this.updateHoverStyle(c,a.mode,!0)}_eventHandler(t,r){const n={event:t,replay:r,cancelable:!0,inChartArea:this.isPointInArea(t)},a=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,a)===!1)return;const i=this._handleEvent(t,r,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,a),(i||n.changed)&&this.render(),this}_handleEvent(t,r,n){const{_active:a=[],options:i}=this,o=r,c=this._getActiveElements(t,a,n,o),d=gz(t),u=n7(t,this._lastEvent,n,d);n&&(this._lastEvent=null,zt(i.onHover,[t,c,this],this),d&&zt(i.onClick,[t,c,this],this));const f=!Xp(c,a);return(f||r)&&(this._active=c,this._updateHoverStyles(c,a,r)),this._lastEvent=u,f}_getActiveElements(t,r,n,a){if(t.type==="mouseout")return[];if(!n)return r;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,a)}},ze(to,"defaults",cr),ze(to,"instances",ep),ze(to,"overrides",zl),ze(to,"registry",wa),ze(to,"version",QI),ze(to,"getChart",eN),to);function tN(){return wt(Xg.instances,e=>e._plugins.invalidate())}function s7(e,t,r){const{startAngle:n,x:a,y:i,outerRadius:o,innerRadius:c,options:d}=t,{borderWidth:u,borderJoinStyle:f}=d,m=Math.min(u/o,Jn(n-r));if(e.beginPath(),e.arc(a,i,o-u/2,n+m/2,r-m/2),c>0){const p=Math.min(u/c,Jn(n-r));e.arc(a,i,c+u/2,r-p/2,n+p/2,!0)}else{const p=Math.min(u/2,o*Jn(n-r));if(f==="round")e.arc(a,i,p,r-_t/2,n+_t/2,!0);else if(f==="bevel"){const x=2*p*p,v=-x*Math.cos(r+_t/2)+a,y=-x*Math.sin(r+_t/2)+i,_=x*Math.cos(n+_t/2)+a,w=x*Math.sin(n+_t/2)+i;e.lineTo(v,y),e.lineTo(_,w)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function a7(e,t,r){const{startAngle:n,pixelMargin:a,x:i,y:o,outerRadius:c,innerRadius:d}=t;let u=a/c;e.beginPath(),e.arc(i,o,c,n-u,r+u),d>a?(u=a/d,e.arc(i,o,d,r+u,n-u,!0)):e.arc(i,o,a,r+Sr,n-Sr),e.closePath(),e.clip()}function i7(e){return Pw(e,["outerStart","outerEnd","innerStart","innerEnd"])}function o7(e,t,r,n){const a=i7(e.options.borderRadius),i=(r-t)/2,o=Math.min(i,n*t/2),c=d=>{const u=(r-Math.min(i,d))*n/2;return nn(d,0,Math.min(i,u))};return{outerStart:c(a.outerStart),outerEnd:c(a.outerEnd),innerStart:nn(a.innerStart,0,o),innerEnd:nn(a.innerEnd,0,o)}}function Pc(e,t,r,n){return{x:r+e*Math.cos(t),y:n+e*Math.sin(t)}}function sg(e,t,r,n,a,i){const{x:o,y:c,startAngle:d,pixelMargin:u,innerRadius:f}=t,m=Math.max(t.outerRadius+n+r-u,0),p=f>0?f+n+r+u:0;let x=0;const v=a-d;if(n){const oe=f>0?f-n:0,Z=m>0?m-n:0,pe=(oe+Z)/2,Q=pe!==0?v*pe/(pe+n):v;x=(v-Q)/2}const y=Math.max(.001,v*m-r/_t)/m,_=(v-y)/2,w=d+_+x,b=a-_-x,{outerStart:N,outerEnd:S,innerStart:C,innerEnd:O}=o7(t,p,m,b-w),A=m-N,z=m-S,$=w+N/A,W=b-S/z,F=p+C,G=p+O,ee=w+C/F,K=b-O/G;if(e.beginPath(),i){const oe=($+W)/2;if(e.arc(o,c,m,$,oe),e.arc(o,c,m,oe,W),S>0){const ce=Pc(z,W,o,c);e.arc(ce.x,ce.y,S,W,b+Sr)}const Z=Pc(G,b,o,c);if(e.lineTo(Z.x,Z.y),O>0){const ce=Pc(G,K,o,c);e.arc(ce.x,ce.y,O,b+Sr,K+Math.PI)}const pe=(b-O/p+(w+C/p))/2;if(e.arc(o,c,p,b-O/p,pe,!0),e.arc(o,c,p,pe,w+C/p,!0),C>0){const ce=Pc(F,ee,o,c);e.arc(ce.x,ce.y,C,ee+Math.PI,w-Sr)}const Q=Pc(A,w,o,c);if(e.lineTo(Q.x,Q.y),N>0){const ce=Pc(A,$,o,c);e.arc(ce.x,ce.y,N,w-Sr,$)}}else{e.moveTo(o,c);const oe=Math.cos($)*m+o,Z=Math.sin($)*m+c;e.lineTo(oe,Z);const pe=Math.cos(W)*m+o,Q=Math.sin(W)*m+c;e.lineTo(pe,Q)}e.closePath()}function l7(e,t,r,n,a){const{fullCircles:i,startAngle:o,circumference:c}=t;let d=t.endAngle;if(i){sg(e,t,r,n,d,a);for(let u=0;u<i;++u)e.fill();isNaN(c)||(d=o+(c%Jt||Jt))}return sg(e,t,r,n,d,a),e.fill(),d}function c7(e,t,r,n,a){const{fullCircles:i,startAngle:o,circumference:c,options:d}=t,{borderWidth:u,borderJoinStyle:f,borderDash:m,borderDashOffset:p,borderRadius:x}=d,v=d.borderAlign==="inner";if(!u)return;e.setLineDash(m||[]),e.lineDashOffset=p,v?(e.lineWidth=u*2,e.lineJoin=f||"round"):(e.lineWidth=u,e.lineJoin=f||"bevel");let y=t.endAngle;if(i){sg(e,t,r,n,y,a);for(let _=0;_<i;++_)e.stroke();isNaN(c)||(y=o+(c%Jt||Jt))}v&&a7(e,t,y),d.selfJoin&&y-o>=_t&&x===0&&f!=="miter"&&s7(e,t,y),i||(sg(e,t,r,n,y,a),e.stroke())}class Wu extends Ti{constructor(r){super();ze(this,"circumference");ze(this,"endAngle");ze(this,"fullCircles");ze(this,"innerRadius");ze(this,"outerRadius");ze(this,"pixelMargin");ze(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,r&&Object.assign(this,r)}inRange(r,n,a){const i=this.getProps(["x","y"],a),{angle:o,distance:c}=M4(i,{x:r,y:n}),{startAngle:d,endAngle:u,innerRadius:f,outerRadius:m,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],a),x=(this.options.spacing+this.options.borderWidth)/2,v=it(p,u-d),y=Rh(o,d,u)&&d!==u,_=v>=Jt||y,w=hi(c,f+x,m+x);return _&&w}getCenterPoint(r){const{x:n,y:a,startAngle:i,endAngle:o,innerRadius:c,outerRadius:d}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],r),{offset:u,spacing:f}=this.options,m=(i+o)/2,p=(c+d+f+u)/2;return{x:n+Math.cos(m)*p,y:a+Math.sin(m)*p}}tooltipPosition(r){return this.getCenterPoint(r)}draw(r){const{options:n,circumference:a}=this,i=(n.offset||0)/4,o=(n.spacing||0)/2,c=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=a>Jt?Math.floor(a/Jt):0,a===0||this.innerRadius<0||this.outerRadius<0)return;r.save();const d=(this.startAngle+this.endAngle)/2;r.translate(Math.cos(d)*i,Math.sin(d)*i);const u=1-Math.sin(Math.min(_t,a||0)),f=i*u;r.fillStyle=n.backgroundColor,r.strokeStyle=n.borderColor,l7(r,this,f,o,c),c7(r,this,f,o,c),r.restore()}}ze(Wu,"id","arc"),ze(Wu,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),ze(Wu,"defaultRoutes",{backgroundColor:"backgroundColor"}),ze(Wu,"descriptors",{_scriptable:!0,_indexable:r=>r!=="borderDash"});function iP(e,t,r=t){e.lineCap=it(r.borderCapStyle,t.borderCapStyle),e.setLineDash(it(r.borderDash,t.borderDash)),e.lineDashOffset=it(r.borderDashOffset,t.borderDashOffset),e.lineJoin=it(r.borderJoinStyle,t.borderJoinStyle),e.lineWidth=it(r.borderWidth,t.borderWidth),e.strokeStyle=it(r.borderColor,t.borderColor)}function d7(e,t,r){e.lineTo(r.x,r.y)}function u7(e){return e.stepped?Uz:e.tension||e.cubicInterpolationMode==="monotone"?Vz:d7}function oP(e,t,r={}){const n=e.length,{start:a=0,end:i=n-1}=r,{start:o,end:c}=t,d=Math.max(a,o),u=Math.min(i,c),f=a<o&&i<o||a>c&&i>c;return{count:n,start:d,loop:t.loop,ilen:u<d&&!f?n+u-d:u-d}}function h7(e,t,r,n){const{points:a,options:i}=t,{count:o,start:c,loop:d,ilen:u}=oP(a,r,n),f=u7(i);let{move:m=!0,reverse:p}=n||{},x,v,y;for(x=0;x<=u;++x)v=a[(c+(p?u-x:x))%o],!v.skip&&(m?(e.moveTo(v.x,v.y),m=!1):f(e,y,v,p,i.stepped),y=v);return d&&(v=a[(c+(p?u:0))%o],f(e,y,v,p,i.stepped)),!!d}function f7(e,t,r,n){const a=t.points,{count:i,start:o,ilen:c}=oP(a,r,n),{move:d=!0,reverse:u}=n||{};let f=0,m=0,p,x,v,y,_,w;const b=S=>(o+(u?c-S:S))%i,N=()=>{y!==_&&(e.lineTo(f,_),e.lineTo(f,y),e.lineTo(f,w))};for(d&&(x=a[b(0)],e.moveTo(x.x,x.y)),p=0;p<=c;++p){if(x=a[b(p)],x.skip)continue;const S=x.x,C=x.y,O=S|0;O===v?(C<y?y=C:C>_&&(_=C),f=(m*f+S)/++m):(N(),e.lineTo(S,C),v=O,m=0,y=_=C),w=C}N()}function jv(e){const t=e.options,r=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!r?f7:h7}function m7(e){return e.stepped?k$:e.tension||e.cubicInterpolationMode==="monotone"?j$:dl}function p7(e,t,r,n){let a=t._path;a||(a=t._path=new Path2D,t.path(a,r,n)&&a.closePath()),iP(e,t.options),e.stroke(a)}function g7(e,t,r,n){const{segments:a,options:i}=t,o=jv(t);for(const c of a)iP(e,i,c.style),e.beginPath(),o(e,t,c,{start:r,end:r+n-1})&&e.closePath(),e.stroke()}const x7=typeof Path2D=="function";function y7(e,t,r,n){x7&&!t.options.segment?p7(e,t,r,n):g7(e,t,r,n)}class uo extends Ti{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,r){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const a=n.spanGaps?this._loop:this._fullLoop;p$(this._points,n,t,a,r),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=T$(this,this.options.segment))}first(){const t=this.segments,r=this.points;return t.length&&r[t[0].start]}last(){const t=this.segments,r=this.points,n=t.length;return n&&r[t[n-1].end]}interpolate(t,r){const n=this.options,a=t[r],i=this.points,o=Y4(this,{property:r,start:a,end:a});if(!o.length)return;const c=[],d=m7(n);let u,f;for(u=0,f=o.length;u<f;++u){const{start:m,end:p}=o[u],x=i[m],v=i[p];if(x===v){c.push(x);continue}const y=Math.abs((a-x[r])/(v[r]-x[r])),_=d(x,v,y,n.stepped);_[r]=t[r],c.push(_)}return c.length===1?c[0]:c}pathSegment(t,r,n){return jv(this)(t,this,r,n)}path(t,r,n){const a=this.segments,i=jv(this);let o=this._loop;r=r||0,n=n||this.points.length-r;for(const c of a)o&=i(t,this,c,{start:r,end:r+n-1});return!!o}draw(t,r,n,a){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),y7(t,this,n,a),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ze(uo,"id","line"),ze(uo,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ze(uo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ze(uo,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function rN(e,t,r,n){const a=e.options,{[r]:i}=e.getProps([r],n);return Math.abs(t-i)<a.radius+a.hitRadius}class tp extends Ti{constructor(r){super();ze(this,"parsed");ze(this,"skip");ze(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,r&&Object.assign(this,r)}inRange(r,n,a){const i=this.options,{x:o,y:c}=this.getProps(["x","y"],a);return Math.pow(r-o,2)+Math.pow(n-c,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(r,n){return rN(this,r,"x",n)}inYRange(r,n){return rN(this,r,"y",n)}getCenterPoint(r){const{x:n,y:a}=this.getProps(["x","y"],r);return{x:n,y:a}}size(r){r=r||this.options||{};let n=r.radius||0;n=Math.max(n,n&&r.hoverRadius||0);const a=n&&r.borderWidth||0;return(n+a)*2}draw(r,n){const a=this.options;this.skip||a.radius<.1||!zh(this,n,this.size(a)/2)||(r.strokeStyle=a.borderColor,r.lineWidth=a.borderWidth,r.fillStyle=a.backgroundColor,wv(r,a,this.x,this.y))}getRange(){const r=this.options||{};return r.radius+r.hitRadius}}ze(tp,"id","point"),ze(tp,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ze(tp,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function lP(e,t){const{x:r,y:n,base:a,width:i,height:o}=e.getProps(["x","y","base","width","height"],t);let c,d,u,f,m;return e.horizontal?(m=o/2,c=Math.min(r,a),d=Math.max(r,a),u=n-m,f=n+m):(m=i/2,c=r-m,d=r+m,u=Math.min(n,a),f=Math.max(n,a)),{left:c,top:u,right:d,bottom:f}}function ho(e,t,r,n){return e?0:nn(t,r,n)}function v7(e,t,r){const n=e.options.borderWidth,a=e.borderSkipped,i=z4(n);return{t:ho(a.top,i.top,0,r),r:ho(a.right,i.right,0,t),b:ho(a.bottom,i.bottom,0,r),l:ho(a.left,i.left,0,t)}}function b7(e,t,r){const{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),a=e.options.borderRadius,i=sd(a),o=Math.min(t,r),c=e.borderSkipped,d=n||ct(a);return{topLeft:ho(!d||c.top||c.left,i.topLeft,0,o),topRight:ho(!d||c.top||c.right,i.topRight,0,o),bottomLeft:ho(!d||c.bottom||c.left,i.bottomLeft,0,o),bottomRight:ho(!d||c.bottom||c.right,i.bottomRight,0,o)}}function w7(e){const t=lP(e),r=t.right-t.left,n=t.bottom-t.top,a=v7(e,r/2,n/2),i=b7(e,r/2,n/2);return{outer:{x:t.left,y:t.top,w:r,h:n,radius:i},inner:{x:t.left+a.l,y:t.top+a.t,w:r-a.l-a.r,h:n-a.t-a.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,i.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(a.b,a.r))}}}}function Wx(e,t,r,n){const a=t===null,i=r===null,c=e&&!(a&&i)&&lP(e,n);return c&&(a||hi(t,c.left,c.right))&&(i||hi(r,c.top,c.bottom))}function _7(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function k7(e,t){e.rect(t.x,t.y,t.w,t.h)}function Ux(e,t,r={}){const n=e.x!==r.x?-t:0,a=e.y!==r.y?-t:0,i=(e.x+e.w!==r.x+r.w?t:0)-n,o=(e.y+e.h!==r.y+r.h?t:0)-a;return{x:e.x+n,y:e.y+a,w:e.w+i,h:e.h+o,radius:e.radius}}class rp extends Ti{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:r,options:{borderColor:n,backgroundColor:a}}=this,{inner:i,outer:o}=w7(this),c=_7(o.radius)?tg:k7;t.save(),(o.w!==i.w||o.h!==i.h)&&(t.beginPath(),c(t,Ux(o,r,i)),t.clip(),c(t,Ux(i,-r,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),c(t,Ux(i,r)),t.fillStyle=a,t.fill(),t.restore()}inRange(t,r,n){return Wx(this,t,r,n)}inXRange(t,r){return Wx(this,t,null,r)}inYRange(t,r){return Wx(this,null,t,r)}getCenterPoint(t){const{x:r,y:n,base:a,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(r+a)/2:r,y:i?n:(n+a)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}ze(rp,"id","bar"),ze(rp,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ze(rp,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function j7(e,t,r){const n=e.segments,a=e.points,i=t.points,o=[];for(const c of n){let{start:d,end:u}=c;u=Jg(d,u,a);const f=Nv(r,a[d],a[u],c.loop);if(!t.segments){o.push({source:c,target:f,start:a[d],end:a[u]});continue}const m=Y4(t,f);for(const p of m){const x=Nv(r,i[p.start],i[p.end],p.loop),v=q4(c,a,x);for(const y of v)o.push({source:y,target:p,start:{[r]:nN(f,x,"start",Math.max)},end:{[r]:nN(f,x,"end",Math.min)}})}}return o}function Nv(e,t,r,n){if(n)return;let a=t[e],i=r[e];return e==="angle"&&(a=Jn(a),i=Jn(i)),{property:e,start:a,end:i}}function N7(e,t){const{x:r=null,y:n=null}=e||{},a=t.points,i=[];return t.segments.forEach(({start:o,end:c})=>{c=Jg(o,c,a);const d=a[o],u=a[c];n!==null?(i.push({x:d.x,y:n}),i.push({x:u.x,y:n})):r!==null&&(i.push({x:r,y:d.y}),i.push({x:r,y:u.y}))}),i}function Jg(e,t,r){for(;t>e;t--){const n=r[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function nN(e,t,r,n){return e&&t?n(e[r],t[r]):e?e[r]:t?t[r]:0}function cP(e,t){let r=[],n=!1;return jr(e)?(n=!0,r=e):r=N7(e,t),r.length?new uo({points:r,options:{tension:0},_loop:n,_fullLoop:n}):null}function sN(e){return e&&e.fill!==!1}function S7(e,t,r){let a=e[t].fill;const i=[t];let o;if(!r)return a;for(;a!==!1&&i.indexOf(a)===-1;){if(!cn(a))return a;if(o=e[a],!o)return!1;if(o.visible)return a;i.push(a),a=o.fill}return!1}function C7(e,t,r){const n=M7(e);if(ct(n))return isNaN(n.value)?!1:n;let a=parseFloat(n);return cn(a)&&Math.floor(a)===a?E7(n[0],t,a,r):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function E7(e,t,r,n){return(e==="-"||e==="+")&&(r=t+r),r===t||r<0||r>=n?!1:r}function P7(e,t){let r=null;return e==="start"?r=t.bottom:e==="end"?r=t.top:ct(e)?r=t.getPixelForValue(e.value):t.getBasePixel&&(r=t.getBasePixel()),r}function T7(e,t,r){let n;return e==="start"?n=r:e==="end"?n=t.options.reverse?t.min:t.max:ct(e)?n=e.value:n=t.getBaseValue(),n}function M7(e){const t=e.options,r=t.fill;let n=it(r&&r.target,r);return n===void 0&&(n=!!t.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function O7(e){const{scale:t,index:r,line:n}=e,a=[],i=n.segments,o=n.points,c=D7(t,r);c.push(cP({x:null,y:t.bottom},n));for(let d=0;d<i.length;d++){const u=i[d];for(let f=u.start;f<=u.end;f++)L7(a,o[f],c)}return new uo({points:a,options:{}})}function D7(e,t){const r=[],n=e.getMatchingVisibleMetas("line");for(let a=0;a<n.length;a++){const i=n[a];if(i.index===t)break;i.hidden||r.unshift(i.dataset)}return r}function L7(e,t,r){const n=[];for(let a=0;a<r.length;a++){const i=r[a],{first:o,last:c,point:d}=A7(i,t,"x");if(!(!d||o&&c)){if(o)n.unshift(d);else if(e.push(d),!c)break}}e.push(...n)}function A7(e,t,r){const n=e.interpolate(t,r);if(!n)return{};const a=n[r],i=e.segments,o=e.points;let c=!1,d=!1;for(let u=0;u<i.length;u++){const f=i[u],m=o[f.start][r],p=o[f.end][r];if(hi(a,m,p)){c=a===m,d=a===p;break}}return{first:c,last:d,point:n}}class dP{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,r,n){const{x:a,y:i,radius:o}=this;return r=r||{start:0,end:Jt},t.arc(a,i,o,r.end,r.start,!0),!n.bounds}interpolate(t){const{x:r,y:n,radius:a}=this,i=t.angle;return{x:r+Math.cos(i)*a,y:n+Math.sin(i)*a,angle:i}}}function R7(e){const{chart:t,fill:r,line:n}=e;if(cn(r))return z7(t,r);if(r==="stack")return O7(e);if(r==="shape")return!0;const a=$7(e);return a instanceof dP?a:cP(a,n)}function z7(e,t){const r=e.getDatasetMeta(t);return r&&e.isDatasetVisible(t)?r.dataset:null}function $7(e){return(e.scale||{}).getPointPositionForValue?F7(e):I7(e)}function I7(e){const{scale:t={},fill:r}=e,n=P7(r,t);if(cn(n)){const a=t.isHorizontal();return{x:a?n:null,y:a?null:n}}return null}function F7(e){const{scale:t,fill:r}=e,n=t.options,a=t.getLabels().length,i=n.reverse?t.max:t.min,o=T7(r,t,i),c=[];if(n.grid.circular){const d=t.getPointPositionForValue(0,i);return new dP({x:d.x,y:d.y,radius:t.getDistanceFromCenterForValue(o)})}for(let d=0;d<a;++d)c.push(t.getPointPositionForValue(d,o));return c}function Vx(e,t,r){const n=R7(t),{chart:a,index:i,line:o,scale:c,axis:d}=t,u=o.options,f=u.fill,m=u.backgroundColor,{above:p=m,below:x=m}=f||{},v=a.getDatasetMeta(i),y=G4(a,v);n&&o.points.length&&(Yg(e,r),B7(e,{line:o,target:n,above:p,below:x,area:r,scale:c,axis:d,clip:y}),Gg(e))}function B7(e,t){const{line:r,target:n,above:a,below:i,area:o,scale:c,clip:d}=t,u=r._loop?"angle":t.axis;e.save();let f=i;i!==a&&(u==="x"?(aN(e,n,o.top),qx(e,{line:r,target:n,color:a,scale:c,property:u,clip:d}),e.restore(),e.save(),aN(e,n,o.bottom)):u==="y"&&(iN(e,n,o.left),qx(e,{line:r,target:n,color:i,scale:c,property:u,clip:d}),e.restore(),e.save(),iN(e,n,o.right),f=a)),qx(e,{line:r,target:n,color:f,scale:c,property:u,clip:d}),e.restore()}function aN(e,t,r){const{segments:n,points:a}=t;let i=!0,o=!1;e.beginPath();for(const c of n){const{start:d,end:u}=c,f=a[d],m=a[Jg(d,u,a)];i?(e.moveTo(f.x,f.y),i=!1):(e.lineTo(f.x,r),e.lineTo(f.x,f.y)),o=!!t.pathSegment(e,c,{move:o}),o?e.closePath():e.lineTo(m.x,r)}e.lineTo(t.first().x,r),e.closePath(),e.clip()}function iN(e,t,r){const{segments:n,points:a}=t;let i=!0,o=!1;e.beginPath();for(const c of n){const{start:d,end:u}=c,f=a[d],m=a[Jg(d,u,a)];i?(e.moveTo(f.x,f.y),i=!1):(e.lineTo(r,f.y),e.lineTo(f.x,f.y)),o=!!t.pathSegment(e,c,{move:o}),o?e.closePath():e.lineTo(r,m.y)}e.lineTo(r,t.first().y),e.closePath(),e.clip()}function qx(e,t){const{line:r,target:n,property:a,color:i,scale:o,clip:c}=t,d=j7(r,n,a);for(const{source:u,target:f,start:m,end:p}of d){const{style:{backgroundColor:x=i}={}}=u,v=n!==!0;e.save(),e.fillStyle=x,H7(e,o,c,v&&Nv(a,m,p)),e.beginPath();const y=!!r.pathSegment(e,u);let _;if(v){y?e.closePath():oN(e,n,p,a);const w=!!n.pathSegment(e,f,{move:y,reverse:!0});_=y&&w,_||oN(e,n,m,a)}e.closePath(),e.fill(_?"evenodd":"nonzero"),e.restore()}}function H7(e,t,r,n){const a=t.chart.chartArea,{property:i,start:o,end:c}=n||{};if(i==="x"||i==="y"){let d,u,f,m;i==="x"?(d=o,u=a.top,f=c,m=a.bottom):(d=a.left,u=o,f=a.right,m=c),e.beginPath(),r&&(d=Math.max(d,r.left),f=Math.min(f,r.right),u=Math.max(u,r.top),m=Math.min(m,r.bottom)),e.rect(d,u,f-d,m-u),e.clip()}}function oN(e,t,r,n){const a=t.interpolate(r,n);a&&e.lineTo(a.x,a.y)}var W7={id:"filler",afterDatasetsUpdate(e,t,r){const n=(e.data.datasets||[]).length,a=[];let i,o,c,d;for(o=0;o<n;++o)i=e.getDatasetMeta(o),c=i.dataset,d=null,c&&c.options&&c instanceof uo&&(d={visible:e.isDatasetVisible(o),index:o,fill:C7(c,o,n),chart:e,axis:i.controller.options.indexAxis,scale:i.vScale,line:c}),i.$filler=d,a.push(d);for(o=0;o<n;++o)d=a[o],!(!d||d.fill===!1)&&(d.fill=S7(a,o,r.propagate))},beforeDraw(e,t,r){const n=r.drawTime==="beforeDraw",a=e.getSortedVisibleDatasetMetas(),i=e.chartArea;for(let o=a.length-1;o>=0;--o){const c=a[o].$filler;c&&(c.line.updateControlPoints(i,c.axis),n&&c.fill&&Vx(e.ctx,c,i))}},beforeDatasetsDraw(e,t,r){if(r.drawTime!=="beforeDatasetsDraw")return;const n=e.getSortedVisibleDatasetMetas();for(let a=n.length-1;a>=0;--a){const i=n[a].$filler;sN(i)&&Vx(e.ctx,i,e.chartArea)}},beforeDatasetDraw(e,t,r){const n=t.meta.$filler;!sN(n)||r.drawTime!=="beforeDatasetDraw"||Vx(e.ctx,n,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const lN=(e,t)=>{let{boxHeight:r=t,boxWidth:n=t}=e;return e.usePointStyle&&(r=Math.min(r,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(t,r)}},U7=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class cN extends Ti{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,r,n){this.maxWidth=t,this.maxHeight=r,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let r=zt(t.generateLabels,[this.chart],this)||[];t.filter&&(r=r.filter(n=>t.filter(n,this.chart.data))),t.sort&&(r=r.sort((n,a)=>t.sort(n,a,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:t,ctx:r}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,a=sn(n.font),i=a.size,o=this._computeTitleHeight(),{boxWidth:c,itemHeight:d}=lN(n,i);let u,f;r.font=a.string,this.isHorizontal()?(u=this.maxWidth,f=this._fitRows(o,i,c,d)+10):(f=this.maxHeight,u=this._fitCols(o,a,c,d)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(f,t.maxHeight||this.maxHeight)}_fitRows(t,r,n,a){const{ctx:i,maxWidth:o,options:{labels:{padding:c}}}=this,d=this.legendHitBoxes=[],u=this.lineWidths=[0],f=a+c;let m=t;i.textAlign="left",i.textBaseline="middle";let p=-1,x=-f;return this.legendItems.forEach((v,y)=>{const _=n+r/2+i.measureText(v.text).width;(y===0||u[u.length-1]+_+2*c>o)&&(m+=f,u[u.length-(y>0?0:1)]=0,x+=f,p++),d[y]={left:0,top:x,row:p,width:_,height:a},u[u.length-1]+=_+c}),m}_fitCols(t,r,n,a){const{ctx:i,maxHeight:o,options:{labels:{padding:c}}}=this,d=this.legendHitBoxes=[],u=this.columnSizes=[],f=o-t;let m=c,p=0,x=0,v=0,y=0;return this.legendItems.forEach((_,w)=>{const{itemWidth:b,itemHeight:N}=V7(n,r,i,_,a);w>0&&x+N+2*c>f&&(m+=p+c,u.push({width:p,height:x}),v+=p+c,y++,p=x=0),d[w]={left:v,top:x,col:y,width:b,height:N},p=Math.max(p,b),x+=N+c}),m+=p,u.push({width:p,height:x}),m}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:n,labels:{padding:a},rtl:i}}=this,o=ad(i,this.left,this.width);if(this.isHorizontal()){let c=0,d=tn(n,this.left+a,this.right-this.lineWidths[c]);for(const u of r)c!==u.row&&(c=u.row,d=tn(n,this.left+a,this.right-this.lineWidths[c])),u.top+=this.top+t+a,u.left=o.leftForLtr(o.x(d),u.width),d+=u.width+a}else{let c=0,d=tn(n,this.top+t+a,this.bottom-this.columnSizes[c].height);for(const u of r)u.col!==c&&(c=u.col,d=tn(n,this.top+t+a,this.bottom-this.columnSizes[c].height)),u.top=d,u.left+=this.left+a,u.left=o.leftForLtr(o.x(u.left),u.width),d+=u.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Yg(t,this),this._draw(),Gg(t)}}_draw(){const{options:t,columnSizes:r,lineWidths:n,ctx:a}=this,{align:i,labels:o}=t,c=cr.color,d=ad(t.rtl,this.left,this.width),u=sn(o.font),{padding:f}=o,m=u.size,p=m/2;let x;this.drawTitle(),a.textAlign=d.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=u.string;const{boxWidth:v,boxHeight:y,itemHeight:_}=lN(o,m),w=function(O,A,z){if(isNaN(v)||v<=0||isNaN(y)||y<0)return;a.save();const $=it(z.lineWidth,1);if(a.fillStyle=it(z.fillStyle,c),a.lineCap=it(z.lineCap,"butt"),a.lineDashOffset=it(z.lineDashOffset,0),a.lineJoin=it(z.lineJoin,"miter"),a.lineWidth=$,a.strokeStyle=it(z.strokeStyle,c),a.setLineDash(it(z.lineDash,[])),o.usePointStyle){const W={radius:y*Math.SQRT2/2,pointStyle:z.pointStyle,rotation:z.rotation,borderWidth:$},F=d.xPlus(O,v/2),G=A+p;R4(a,W,F,G,o.pointStyleWidth&&v)}else{const W=A+Math.max((m-y)/2,0),F=d.leftForLtr(O,v),G=sd(z.borderRadius);a.beginPath(),Object.values(G).some(ee=>ee!==0)?tg(a,{x:F,y:W,w:v,h:y,radius:G}):a.rect(F,W,v,y),a.fill(),$!==0&&a.stroke()}a.restore()},b=function(O,A,z){$h(a,z.text,O,A+_/2,u,{strikethrough:z.hidden,textAlign:d.textAlign(z.textAlign)})},N=this.isHorizontal(),S=this._computeTitleHeight();N?x={x:tn(i,this.left+f,this.right-n[0]),y:this.top+f+S,line:0}:x={x:this.left+f,y:tn(i,this.top+S+f,this.bottom-r[0].height),line:0},W4(this.ctx,t.textDirection);const C=_+f;this.legendItems.forEach((O,A)=>{a.strokeStyle=O.fontColor,a.fillStyle=O.fontColor;const z=a.measureText(O.text).width,$=d.textAlign(O.textAlign||(O.textAlign=o.textAlign)),W=v+p+z;let F=x.x,G=x.y;d.setWidth(this.width),N?A>0&&F+W+f>this.right&&(G=x.y+=C,x.line++,F=x.x=tn(i,this.left+f,this.right-n[x.line])):A>0&&G+C>this.bottom&&(F=x.x=F+r[x.line].width+f,x.line++,G=x.y=tn(i,this.top+S+f,this.bottom-r[x.line].height));const ee=d.x(F);if(w(ee,G,O),F=Mz($,F+v+p,N?F+W:this.right,t.rtl),b(d.x(F),G,O),N)x.x+=W+f;else if(typeof O.text!="string"){const K=u.lineHeight;x.y+=uP(O,K)+f}else x.y+=C}),U4(this.ctx,t.textDirection)}drawTitle(){const t=this.options,r=t.title,n=sn(r.font),a=As(r.padding);if(!r.display)return;const i=ad(t.rtl,this.left,this.width),o=this.ctx,c=r.position,d=n.size/2,u=a.top+d;let f,m=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),f=this.top+u,m=tn(t.align,m,this.right-p);else{const v=this.columnSizes.reduce((y,_)=>Math.max(y,_.height),0);f=u+tn(t.align,this.top,this.bottom-v-t.labels.padding-this._computeTitleHeight())}const x=tn(c,m,m+p);o.textAlign=i.textAlign(Sw(c)),o.textBaseline="middle",o.strokeStyle=r.color,o.fillStyle=r.color,o.font=n.string,$h(o,r.text,x,f,n)}_computeTitleHeight(){const t=this.options.title,r=sn(t.font),n=As(t.padding);return t.display?r.lineHeight+n.height:0}_getLegendItemAt(t,r){let n,a,i;if(hi(t,this.left,this.right)&&hi(r,this.top,this.bottom)){for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(a=i[n],hi(t,a.left,a.left+a.width)&&hi(r,a.top,a.top+a.height))return this.legendItems[n]}return null}handleEvent(t){const r=this.options;if(!G7(t.type,r))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const a=this._hoveredItem,i=U7(a,n);a&&!i&&zt(r.onLeave,[t,a,this],this),this._hoveredItem=n,n&&!i&&zt(r.onHover,[t,n,this],this)}else n&&zt(r.onClick,[t,n,this],this)}}function V7(e,t,r,n,a){const i=q7(n,e,t,r),o=Y7(a,n,t.lineHeight);return{itemWidth:i,itemHeight:o}}function q7(e,t,r,n){let a=e.text;return a&&typeof a!="string"&&(a=a.reduce((i,o)=>i.length>o.length?i:o)),t+r.size/2+n.measureText(a).width}function Y7(e,t,r){let n=e;return typeof t.text!="string"&&(n=uP(t,r)),n}function uP(e,t){const r=e.text?e.text.length:0;return t*r}function G7(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var Z7={id:"legend",_element:cN,start(e,t,r){const n=e.legend=new cN({ctx:e.ctx,options:r,chart:e});Ps.configure(e,n,r),Ps.addBox(e,n)},stop(e){Ps.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,r){const n=e.legend;Ps.configure(e,n,r),n.options=r},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,r){const n=t.datasetIndex,a=r.chart;a.isDatasetVisible(n)?(a.hide(n),t.hidden=!0):(a.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:a,color:i,useBorderRadius:o,borderRadius:c}}=e.legend.options;return e._getSortedDatasetMetas().map(d=>{const u=d.controller.getStyle(r?0:void 0),f=As(u.borderWidth);return{text:t[d.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!d.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(f.width+f.height)/4,strokeStyle:u.borderColor,pointStyle:n||u.pointStyle,rotation:u.rotation,textAlign:a||u.textAlign,borderRadius:o&&(c||u.borderRadius),datasetIndex:d.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class hP extends Ti{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,r){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=r;const a=jr(n.text)?n.text.length:1;this._padding=As(n.padding);const i=a*sn(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:r,left:n,bottom:a,right:i,options:o}=this,c=o.align;let d=0,u,f,m;return this.isHorizontal()?(f=tn(c,n,i),m=r+t,u=i-n):(o.position==="left"?(f=n+t,m=tn(c,a,r),d=_t*-.5):(f=i-t,m=tn(c,r,a),d=_t*.5),u=a-r),{titleX:f,titleY:m,maxWidth:u,rotation:d}}draw(){const t=this.ctx,r=this.options;if(!r.display)return;const n=sn(r.font),i=n.lineHeight/2+this._padding.top,{titleX:o,titleY:c,maxWidth:d,rotation:u}=this._drawArgs(i);$h(t,r.text,0,0,n,{color:r.color,maxWidth:d,rotation:u,textAlign:Sw(r.align),textBaseline:"middle",translation:[o,c]})}}function K7(e,t){const r=new hP({ctx:e.ctx,options:t,chart:e});Ps.configure(e,r,t),Ps.addBox(e,r),e.titleBlock=r}var X7={id:"title",_element:hP,start(e,t,r){K7(e,r)},stop(e){const t=e.titleBlock;Ps.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,r){const n=e.titleBlock;Ps.configure(e,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Uu={average(e){if(!e.length)return!1;let t,r,n=new Set,a=0,i=0;for(t=0,r=e.length;t<r;++t){const c=e[t].element;if(c&&c.hasValue()){const d=c.tooltipPosition();n.add(d.x),a+=d.y,++i}}return i===0||n.size===0?!1:{x:[...n].reduce((c,d)=>c+d)/n.size,y:a/i}},nearest(e,t){if(!e.length)return!1;let r=t.x,n=t.y,a=Number.POSITIVE_INFINITY,i,o,c;for(i=0,o=e.length;i<o;++i){const d=e[i].element;if(d&&d.hasValue()){const u=d.getCenterPoint(),f=vv(t,u);f<a&&(a=f,c=d)}}if(c){const d=c.tooltipPosition();r=d.x,n=d.y}return{x:r,y:n}}};function va(e,t){return t&&(jr(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function si(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function J7(e,t){const{element:r,datasetIndex:n,index:a}=t,i=e.getDatasetMeta(n).controller,{label:o,value:c}=i.getLabelAndValue(a);return{chart:e,label:o,parsed:i.getParsed(a),raw:e.data.datasets[n].data[a],formattedValue:c,dataset:i.getDataset(),dataIndex:a,datasetIndex:n,element:r}}function dN(e,t){const r=e.chart.ctx,{body:n,footer:a,title:i}=e,{boxWidth:o,boxHeight:c}=t,d=sn(t.bodyFont),u=sn(t.titleFont),f=sn(t.footerFont),m=i.length,p=a.length,x=n.length,v=As(t.padding);let y=v.height,_=0,w=n.reduce((S,C)=>S+C.before.length+C.lines.length+C.after.length,0);if(w+=e.beforeBody.length+e.afterBody.length,m&&(y+=m*u.lineHeight+(m-1)*t.titleSpacing+t.titleMarginBottom),w){const S=t.displayColors?Math.max(c,d.lineHeight):d.lineHeight;y+=x*S+(w-x)*d.lineHeight+(w-1)*t.bodySpacing}p&&(y+=t.footerMarginTop+p*f.lineHeight+(p-1)*t.footerSpacing);let b=0;const N=function(S){_=Math.max(_,r.measureText(S).width+b)};return r.save(),r.font=u.string,wt(e.title,N),r.font=d.string,wt(e.beforeBody.concat(e.afterBody),N),b=t.displayColors?o+2+t.boxPadding:0,wt(n,S=>{wt(S.before,N),wt(S.lines,N),wt(S.after,N)}),b=0,r.font=f.string,wt(e.footer,N),r.restore(),_+=v.width,{width:_,height:y}}function Q7(e,t){const{y:r,height:n}=t;return r<n/2?"top":r>e.height-n/2?"bottom":"center"}function e8(e,t,r,n){const{x:a,width:i}=n,o=r.caretSize+r.caretPadding;if(e==="left"&&a+i+o>t.width||e==="right"&&a-i-o<0)return!0}function t8(e,t,r,n){const{x:a,width:i}=r,{width:o,chartArea:{left:c,right:d}}=e;let u="center";return n==="center"?u=a<=(c+d)/2?"left":"right":a<=i/2?u="left":a>=o-i/2&&(u="right"),e8(u,e,t,r)&&(u="center"),u}function uN(e,t,r){const n=r.yAlign||t.yAlign||Q7(e,r);return{xAlign:r.xAlign||t.xAlign||t8(e,t,r,n),yAlign:n}}function r8(e,t){let{x:r,width:n}=e;return t==="right"?r-=n:t==="center"&&(r-=n/2),r}function n8(e,t,r){let{y:n,height:a}=e;return t==="top"?n+=r:t==="bottom"?n-=a+r:n-=a/2,n}function hN(e,t,r,n){const{caretSize:a,caretPadding:i,cornerRadius:o}=e,{xAlign:c,yAlign:d}=r,u=a+i,{topLeft:f,topRight:m,bottomLeft:p,bottomRight:x}=sd(o);let v=r8(t,c);const y=n8(t,d,u);return d==="center"?c==="left"?v+=u:c==="right"&&(v-=u):c==="left"?v-=Math.max(f,p)+a:c==="right"&&(v+=Math.max(m,x)+a),{x:nn(v,0,n.width-t.width),y:nn(y,0,n.height-t.height)}}function jm(e,t,r){const n=As(r.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-n.right:e.x+n.left}function fN(e){return va([],si(e))}function s8(e,t,r){return Gl(e,{tooltip:t,tooltipItems:r,type:"tooltip"})}function mN(e,t){const r=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return r?e.override(r):e}const fP={beforeTitle:ei,title(e){if(e.length>0){const t=e[0],r=t.chart.data.labels,n=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return r[t.dataIndex]}return""},afterTitle:ei,beforeBody:ei,beforeLabel:ei,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const r=e.formattedValue;return Ot(r)||(t+=r),t},labelColor(e){const r=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const r=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:ei,afterBody:ei,beforeFooter:ei,footer:ei,afterFooter:ei};function Tn(e,t,r,n){const a=e[t].call(r,n);return typeof a>"u"?fP[t].call(r,n):a}class Sv extends Ti{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const r=this.chart,n=this.options.setContext(this.getContext()),a=n.enabled&&r.options.animation&&n.animations,i=new Z4(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=s8(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,r){const{callbacks:n}=r,a=Tn(n,"beforeTitle",this,t),i=Tn(n,"title",this,t),o=Tn(n,"afterTitle",this,t);let c=[];return c=va(c,si(a)),c=va(c,si(i)),c=va(c,si(o)),c}getBeforeBody(t,r){return fN(Tn(r.callbacks,"beforeBody",this,t))}getBody(t,r){const{callbacks:n}=r,a=[];return wt(t,i=>{const o={before:[],lines:[],after:[]},c=mN(n,i);va(o.before,si(Tn(c,"beforeLabel",this,i))),va(o.lines,Tn(c,"label",this,i)),va(o.after,si(Tn(c,"afterLabel",this,i))),a.push(o)}),a}getAfterBody(t,r){return fN(Tn(r.callbacks,"afterBody",this,t))}getFooter(t,r){const{callbacks:n}=r,a=Tn(n,"beforeFooter",this,t),i=Tn(n,"footer",this,t),o=Tn(n,"afterFooter",this,t);let c=[];return c=va(c,si(a)),c=va(c,si(i)),c=va(c,si(o)),c}_createItems(t){const r=this._active,n=this.chart.data,a=[],i=[],o=[];let c=[],d,u;for(d=0,u=r.length;d<u;++d)c.push(J7(this.chart,r[d]));return t.filter&&(c=c.filter((f,m,p)=>t.filter(f,m,p,n))),t.itemSort&&(c=c.sort((f,m)=>t.itemSort(f,m,n))),wt(c,f=>{const m=mN(t.callbacks,f);a.push(Tn(m,"labelColor",this,f)),i.push(Tn(m,"labelPointStyle",this,f)),o.push(Tn(m,"labelTextColor",this,f))}),this.labelColors=a,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=c,c}update(t,r){const n=this.options.setContext(this.getContext()),a=this._active;let i,o=[];if(!a.length)this.opacity!==0&&(i={opacity:0});else{const c=Uu[n.position].call(this,a,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const d=this._size=dN(this,n),u=Object.assign({},c,d),f=uN(this.chart,n,u),m=hN(n,u,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,i={opacity:1,x:m.x,y:m.y,width:d.width,height:d.height,caretX:c.x,caretY:c.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(t,r,n,a){const i=this.getCaretPosition(t,n,a);r.lineTo(i.x1,i.y1),r.lineTo(i.x2,i.y2),r.lineTo(i.x3,i.y3)}getCaretPosition(t,r,n){const{xAlign:a,yAlign:i}=this,{caretSize:o,cornerRadius:c}=n,{topLeft:d,topRight:u,bottomLeft:f,bottomRight:m}=sd(c),{x:p,y:x}=t,{width:v,height:y}=r;let _,w,b,N,S,C;return i==="center"?(S=x+y/2,a==="left"?(_=p,w=_-o,N=S+o,C=S-o):(_=p+v,w=_+o,N=S-o,C=S+o),b=_):(a==="left"?w=p+Math.max(d,f)+o:a==="right"?w=p+v-Math.max(u,m)-o:w=this.caretX,i==="top"?(N=x,S=N-o,_=w-o,b=w+o):(N=x+y,S=N+o,_=w+o,b=w-o),C=N),{x1:_,x2:w,x3:b,y1:N,y2:S,y3:C}}drawTitle(t,r,n){const a=this.title,i=a.length;let o,c,d;if(i){const u=ad(n.rtl,this.x,this.width);for(t.x=jm(this,n.titleAlign,n),r.textAlign=u.textAlign(n.titleAlign),r.textBaseline="middle",o=sn(n.titleFont),c=n.titleSpacing,r.fillStyle=n.titleColor,r.font=o.string,d=0;d<i;++d)r.fillText(a[d],u.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+c,d+1===i&&(t.y+=n.titleMarginBottom-c)}}_drawColorBox(t,r,n,a,i){const o=this.labelColors[n],c=this.labelPointStyles[n],{boxHeight:d,boxWidth:u}=i,f=sn(i.bodyFont),m=jm(this,"left",i),p=a.x(m),x=d<f.lineHeight?(f.lineHeight-d)/2:0,v=r.y+x;if(i.usePointStyle){const y={radius:Math.min(u,d)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},_=a.leftForLtr(p,u)+u/2,w=v+d/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,wv(t,y,_,w),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,wv(t,y,_,w)}else{t.lineWidth=ct(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const y=a.leftForLtr(p,u),_=a.leftForLtr(a.xPlus(p,1),u-2),w=sd(o.borderRadius);Object.values(w).some(b=>b!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,tg(t,{x:y,y:v,w:u,h:d,radius:w}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),tg(t,{x:_,y:v+1,w:u-2,h:d-2,radius:w}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(y,v,u,d),t.strokeRect(y,v,u,d),t.fillStyle=o.backgroundColor,t.fillRect(_,v+1,u-2,d-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,r,n){const{body:a}=this,{bodySpacing:i,bodyAlign:o,displayColors:c,boxHeight:d,boxWidth:u,boxPadding:f}=n,m=sn(n.bodyFont);let p=m.lineHeight,x=0;const v=ad(n.rtl,this.x,this.width),y=function(z){r.fillText(z,v.x(t.x+x),t.y+p/2),t.y+=p+i},_=v.textAlign(o);let w,b,N,S,C,O,A;for(r.textAlign=o,r.textBaseline="middle",r.font=m.string,t.x=jm(this,_,n),r.fillStyle=n.bodyColor,wt(this.beforeBody,y),x=c&&_!=="right"?o==="center"?u/2+f:u+2+f:0,S=0,O=a.length;S<O;++S){for(w=a[S],b=this.labelTextColors[S],r.fillStyle=b,wt(w.before,y),N=w.lines,c&&N.length&&(this._drawColorBox(r,t,S,v,n),p=Math.max(m.lineHeight,d)),C=0,A=N.length;C<A;++C)y(N[C]),p=m.lineHeight;wt(w.after,y)}x=0,p=m.lineHeight,wt(this.afterBody,y),t.y-=i}drawFooter(t,r,n){const a=this.footer,i=a.length;let o,c;if(i){const d=ad(n.rtl,this.x,this.width);for(t.x=jm(this,n.footerAlign,n),t.y+=n.footerMarginTop,r.textAlign=d.textAlign(n.footerAlign),r.textBaseline="middle",o=sn(n.footerFont),r.fillStyle=n.footerColor,r.font=o.string,c=0;c<i;++c)r.fillText(a[c],d.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+n.footerSpacing}}drawBackground(t,r,n,a){const{xAlign:i,yAlign:o}=this,{x:c,y:d}=t,{width:u,height:f}=n,{topLeft:m,topRight:p,bottomLeft:x,bottomRight:v}=sd(a.cornerRadius);r.fillStyle=a.backgroundColor,r.strokeStyle=a.borderColor,r.lineWidth=a.borderWidth,r.beginPath(),r.moveTo(c+m,d),o==="top"&&this.drawCaret(t,r,n,a),r.lineTo(c+u-p,d),r.quadraticCurveTo(c+u,d,c+u,d+p),o==="center"&&i==="right"&&this.drawCaret(t,r,n,a),r.lineTo(c+u,d+f-v),r.quadraticCurveTo(c+u,d+f,c+u-v,d+f),o==="bottom"&&this.drawCaret(t,r,n,a),r.lineTo(c+x,d+f),r.quadraticCurveTo(c,d+f,c,d+f-x),o==="center"&&i==="left"&&this.drawCaret(t,r,n,a),r.lineTo(c,d+m),r.quadraticCurveTo(c,d,c+m,d),r.closePath(),r.fill(),a.borderWidth>0&&r.stroke()}_updateAnimationTarget(t){const r=this.chart,n=this.$animations,a=n&&n.x,i=n&&n.y;if(a||i){const o=Uu[t.position].call(this,this._active,this._eventPosition);if(!o)return;const c=this._size=dN(this,t),d=Object.assign({},o,this._size),u=uN(r,t,d),f=hN(t,d,u,r);(a._to!==f.x||i._to!==f.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=c.width,this.height=c.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(t){const r=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(r);const a={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=As(r.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&c&&(t.save(),t.globalAlpha=n,this.drawBackground(i,t,a,r),W4(t,r.textDirection),i.y+=o.top,this.drawTitle(i,t,r),this.drawBody(i,t,r),this.drawFooter(i,t,r),U4(t,r.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,r){const n=this._active,a=t.map(({datasetIndex:c,index:d})=>{const u=this.chart.getDatasetMeta(c);if(!u)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:u.data[d],index:d}}),i=!Xp(n,a),o=this._positionChanged(a,r);(i||o)&&(this._active=a,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,r,n=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,i=this._active||[],o=this._getActiveElements(t,i,r,n),c=this._positionChanged(o,t),d=r||!Xp(o,i)||c;return d&&(this._active=o,(a.enabled||a.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,r))),d}_getActiveElements(t,r,n,a){const i=this.options;if(t.type==="mouseout")return[];if(!a)return r.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,i.mode,i,n);return i.reverse&&o.reverse(),o}_positionChanged(t,r){const{caretX:n,caretY:a,options:i}=this,o=Uu[i.position].call(this,t,r);return o!==!1&&(n!==o.x||a!==o.y)}}ze(Sv,"positioners",Uu);var a8={id:"tooltip",_element:Sv,positioners:Uu,afterInit(e,t,r){r&&(e.tooltip=new Sv({chart:e,options:r}))},beforeUpdate(e,t,r){e.tooltip&&e.tooltip.initialize(r)},reset(e,t,r){e.tooltip&&e.tooltip.initialize(r)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const r={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",r)}},afterEvent(e,t){if(e.tooltip){const r=t.replay;e.tooltip.handleEvent(t.event,r,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:fP},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const i8=(e,t,r,n)=>(typeof t=="string"?(r=e.push(t)-1,n.unshift({index:r,label:t})):isNaN(t)&&(r=null),r);function o8(e,t,r,n){const a=e.indexOf(t);if(a===-1)return i8(e,t,r,n);const i=e.lastIndexOf(t);return a!==i?r:a}const l8=(e,t)=>e===null?null:nn(Math.round(e),0,t);function pN(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Cv extends Id{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const r=this._addedLabels;if(r.length){const n=this.getLabels();for(const{index:a,label:i}of r)n[a]===i&&n.splice(a,1);this._addedLabels=[]}super.init(t)}parse(t,r){if(Ot(t))return null;const n=this.getLabels();return r=isFinite(r)&&n[r]===t?r:o8(n,t,it(r,t),this._addedLabels),l8(r,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:n,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(n=0),r||(a=this.getLabels().length-1)),this.min=n,this.max=a}buildTicks(){const t=this.min,r=this.max,n=this.options.offset,a=[];let i=this.getLabels();i=t===0&&r===i.length-1?i:i.slice(t,r+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=t;o<=r;o++)a.push({value:o});return a}getLabelForValue(t){return pN.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}ze(Cv,"id","category"),ze(Cv,"defaults",{ticks:{callback:pN}});function c8(e,t){const r=[],{bounds:a,step:i,min:o,max:c,precision:d,count:u,maxTicks:f,maxDigits:m,includeBounds:p}=e,x=i||1,v=f-1,{min:y,max:_}=t,w=!Ot(o),b=!Ot(c),N=!Ot(u),S=(_-y)/(m+1);let C=pj((_-y)/v/x)*x,O,A,z,$;if(C<1e-14&&!w&&!b)return[{value:y},{value:_}];$=Math.ceil(_/C)-Math.floor(y/C),$>v&&(C=pj($*C/v/x)*x),Ot(d)||(O=Math.pow(10,d),C=Math.ceil(C*O)/O),a==="ticks"?(A=Math.floor(y/C)*C,z=Math.ceil(_/C)*C):(A=y,z=_),w&&b&&i&&wz((c-o)/i,C/1e3)?($=Math.round(Math.min((c-o)/C,f)),C=(c-o)/$,A=o,z=c):N?(A=w?o:A,z=b?c:z,$=u-1,C=(z-A)/$):($=(z-A)/C,ih($,Math.round($),C/1e3)?$=Math.round($):$=Math.ceil($));const W=Math.max(gj(C),gj(A));O=Math.pow(10,Ot(d)?W:d),A=Math.round(A*O)/O,z=Math.round(z*O)/O;let F=0;for(w&&(p&&A!==o?(r.push({value:o}),A<o&&F++,ih(Math.round((A+F*C)*O)/O,o,gN(o,S,e))&&F++):A<o&&F++);F<$;++F){const G=Math.round((A+F*C)*O)/O;if(b&&G>c)break;r.push({value:G})}return b&&p&&z!==c?r.length&&ih(r[r.length-1].value,c,gN(c,S,e))?r[r.length-1].value=c:r.push({value:c}):(!b||z===c)&&r.push({value:z}),r}function gN(e,t,{horizontal:r,minRotation:n}){const a=ui(n),i=(r?Math.sin(a):Math.cos(a))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}class d8 extends Id{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,r){return Ot(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:r,maxDefined:n}=this.getUserBounds();let{min:a,max:i}=this;const o=d=>a=r?a:d,c=d=>i=n?i:d;if(t){const d=wd(a),u=wd(i);d<0&&u<0?c(0):d>0&&u>0&&o(0)}if(a===i){let d=i===0?1:Math.abs(i*.05);c(i+d),t||o(a-d)}this.min=a,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:r,stepSize:n}=t,a;return n?(a=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),r=r||11),r&&(a=Math.min(r,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,r=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const a={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},i=this._range||this,o=c8(a,i);return t.bounds==="ticks"&&_z(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let r=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const a=(n-r)/Math.max(t.length-1,1)/2;r-=a,n+=a}this._startValue=r,this._endValue=n,this._valueRange=n-r}getLabelForValue(t){return Ew(t,this.chart.options.locale,this.options.ticks.format)}}class Ev extends d8{determineDataLimits(){const{min:t,max:r}=this.getMinMax(!0);this.min=cn(t)?t:0,this.max=cn(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),r=t?this.width:this.height,n=ui(this.options.ticks.minRotation),a=(t?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,i.lineHeight/a))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}ze(Ev,"id","linear"),ze(Ev,"defaults",{ticks:{callback:A4.formatters.numeric}});const Qg={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ln=Object.keys(Qg);function xN(e,t){return e-t}function yN(e,t){if(Ot(t))return null;const r=e._adapter,{parser:n,round:a,isoWeekday:i}=e._parseOpts;let o=t;return typeof n=="function"&&(o=n(o)),cn(o)||(o=typeof n=="string"?r.parse(o,n):r.parse(o)),o===null?null:(a&&(o=a==="week"&&(Ah(i)||i===!0)?r.startOf(o,"isoWeek",i):r.startOf(o,a)),+o)}function vN(e,t,r,n){const a=Ln.length;for(let i=Ln.indexOf(e);i<a-1;++i){const o=Qg[Ln[i]],c=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((r-t)/(c*o.size))<=n)return Ln[i]}return Ln[a-1]}function u8(e,t,r,n,a){for(let i=Ln.length-1;i>=Ln.indexOf(r);i--){const o=Ln[i];if(Qg[o].common&&e._adapter.diff(a,n,o)>=t-1)return o}return Ln[r?Ln.indexOf(r):0]}function h8(e){for(let t=Ln.indexOf(e)+1,r=Ln.length;t<r;++t)if(Qg[Ln[t]].common)return Ln[t]}function bN(e,t,r){if(!r)e[t]=!0;else if(r.length){const{lo:n,hi:a}=Nw(r,t),i=r[n]>=t?r[n]:r[a];e[i]=!0}}function f8(e,t,r,n){const a=e._adapter,i=+a.startOf(t[0].value,n),o=t[t.length-1].value;let c,d;for(c=i;c<=o;c=+a.add(c,1,n))d=r[c],d>=0&&(t[d].major=!0);return t}function wN(e,t,r){const n=[],a={},i=t.length;let o,c;for(o=0;o<i;++o)c=t[o],a[c]=o,n.push({value:c,major:!1});return i===0||!r?n:f8(e,n,a,r)}class ag extends Id{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,r={}){const n=t.time||(t.time={}),a=this._adapter=new Z$._date(t.adapters.date);a.init(r),ah(n.displayFormats,a.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=r.normalized}parse(t,r){return t===void 0?null:yN(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,r=this._adapter,n=t.time.unit||"day";let{min:a,max:i,minDefined:o,maxDefined:c}=this.getUserBounds();function d(u){!o&&!isNaN(u.min)&&(a=Math.min(a,u.min)),!c&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!o||!c)&&(d(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&d(this.getMinMax(!1))),a=cn(a)&&!isNaN(a)?a:+r.startOf(Date.now(),n),i=cn(i)&&!isNaN(i)?i:+r.endOf(Date.now(),n)+1,this.min=Math.min(a,i-1),this.max=Math.max(a+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(r=t[0],n=t[t.length-1]),{min:r,max:n}}buildTicks(){const t=this.options,r=t.time,n=t.ticks,a=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const i=this.min,o=this.max,c=Cz(a,i,o);return this._unit=r.unit||(n.autoSkip?vN(r.minUnit,this.min,this.max,this._getLabelCapacity(i)):u8(this,c.length,r.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:h8(this._unit),this.initOffsets(a),t.reverse&&c.reverse(),wN(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let r=0,n=0,a,i;this.options.offset&&t.length&&(a=this.getDecimalForValue(t[0]),t.length===1?r=1-a:r=(this.getDecimalForValue(t[1])-a)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?n=i:n=(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;r=nn(r,0,o),n=nn(n,0,o),this._offsets={start:r,end:n,factor:1/(r+1+n)}}_generate(){const t=this._adapter,r=this.min,n=this.max,a=this.options,i=a.time,o=i.unit||vN(i.minUnit,r,n,this._getLabelCapacity(r)),c=it(a.ticks.stepSize,1),d=o==="week"?i.isoWeekday:!1,u=Ah(d)||d===!0,f={};let m=r,p,x;if(u&&(m=+t.startOf(m,"isoWeek",d)),m=+t.startOf(m,u?"day":o),t.diff(n,r,o)>1e5*c)throw new Error(r+" and "+n+" are too far apart with stepSize of "+c+" "+o);const v=a.ticks.source==="data"&&this.getDataTimestamps();for(p=m,x=0;p<n;p=+t.add(p,c,o),x++)bN(f,p,v);return(p===n||a.bounds==="ticks"||x===1)&&bN(f,p,v),Object.keys(f).sort(xN).map(y=>+y)}getLabelForValue(t){const r=this._adapter,n=this.options.time;return n.tooltipFormat?r.format(t,n.tooltipFormat):r.format(t,n.displayFormats.datetime)}format(t,r){const a=this.options.time.displayFormats,i=this._unit,o=r||a[i];return this._adapter.format(t,o)}_tickFormatFunction(t,r,n,a){const i=this.options,o=i.ticks.callback;if(o)return zt(o,[t,r,n],this);const c=i.time.displayFormats,d=this._unit,u=this._majorUnit,f=d&&c[d],m=u&&c[u],p=n[r],x=u&&m&&p&&p.major;return this._adapter.format(t,a||(x?m:f))}generateTickLabels(t){let r,n,a;for(r=0,n=t.length;r<n;++r)a=t[r],a.label=this._tickFormatFunction(a.value,r,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const r=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((r.start+n)*r.factor)}getValueForPixel(t){const r=this._offsets,n=this.getDecimalForPixel(t)/r.factor-r.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const r=this.options.ticks,n=this.ctx.measureText(t).width,a=ui(this.isHorizontal()?r.maxRotation:r.minRotation),i=Math.cos(a),o=Math.sin(a),c=this._resolveTickFontOptions(0).size;return{w:n*i+c*o,h:n*o+c*i}}_getLabelCapacity(t){const r=this.options.time,n=r.displayFormats,a=n[r.unit]||n.millisecond,i=this._tickFormatFunction(t,0,wN(this,[t],this._majorUnit),a),o=this._getLabelSize(i),c=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],r,n;if(t.length)return t;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(r=0,n=a.length;r<n;++r)t=t.concat(a[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let r,n;if(t.length)return t;const a=this.getLabels();for(r=0,n=a.length;r<n;++r)t.push(yN(this,a[r]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Pz(t.sort(xN))}}ze(ag,"id","time"),ze(ag,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Nm(e,t,r){let n=0,a=e.length-1,i,o,c,d;r?(t>=e[n].pos&&t<=e[a].pos&&({lo:n,hi:a}=gl(e,"pos",t)),{pos:i,time:c}=e[n],{pos:o,time:d}=e[a]):(t>=e[n].time&&t<=e[a].time&&({lo:n,hi:a}=gl(e,"time",t)),{time:i,pos:c}=e[n],{time:o,pos:d}=e[a]);const u=o-i;return u?c+(d-c)*(t-i)/u:c}class _N extends ag{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(t);this._minPos=Nm(r,this.min),this._tableRange=Nm(r,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:r,max:n}=this,a=[],i=[];let o,c,d,u,f;for(o=0,c=t.length;o<c;++o)u=t[o],u>=r&&u<=n&&a.push(u);if(a.length<2)return[{time:r,pos:0},{time:n,pos:1}];for(o=0,c=a.length;o<c;++o)f=a[o+1],d=a[o-1],u=a[o],Math.round((f+d)/2)!==u&&i.push({time:u,pos:o/(c-1)});return i}_generate(){const t=this.min,r=this.max;let n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(r)||n.length===1)&&n.push(r),n.sort((a,i)=>a-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const r=this.getDataTimestamps(),n=this.getLabelTimestamps();return r.length&&n.length?t=this.normalize(r.concat(n)):t=r.length?r:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Nm(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const r=this._offsets,n=this.getDecimalForPixel(t)/r.factor-r.end;return Nm(this._table,n*this._tableRange+this._minPos,!0)}}ze(_N,"id","timeseries"),ze(_N,"defaults",ag.defaults);const mP="label";function kN(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function m8(e,t){const r=e.options;r&&t&&Object.assign(r,t)}function pP(e,t){e.labels=t}function gP(e,t,r=mP){const n=[];e.datasets=t.map(a=>{const i=e.datasets.find(o=>o[r]===a[r]);return!i||!a.data||n.includes(i)?{...a}:(n.push(i),Object.assign(i,a),i)})}function p8(e,t=mP){const r={labels:[],datasets:[]};return pP(r,e.labels),gP(r,e.datasets,t),r}function g8(e,t){const{height:r=150,width:n=300,redraw:a=!1,datasetIdKey:i,type:o,data:c,options:d,plugins:u=[],fallbackContent:f,updateMode:m,...p}=e,x=E.useRef(null),v=E.useRef(null),y=()=>{x.current&&(v.current=new Xg(x.current,{type:o,data:p8(c,i),options:d&&{...d},plugins:u}),kN(t,v.current))},_=()=>{kN(t,null),v.current&&(v.current.destroy(),v.current=null)};return E.useEffect(()=>{!a&&v.current&&d&&m8(v.current,d)},[a,d]),E.useEffect(()=>{!a&&v.current&&pP(v.current.config.data,c.labels)},[a,c.labels]),E.useEffect(()=>{!a&&v.current&&c.datasets&&gP(v.current.config.data,c.datasets,i)},[a,c.datasets]),E.useEffect(()=>{v.current&&(a?(_(),setTimeout(y)):v.current.update(m))},[a,d,c.labels,c.datasets,m]),E.useEffect(()=>{v.current&&(_(),setTimeout(y))},[o]),E.useEffect(()=>(y(),()=>_()),[]),s.jsx("canvas",{ref:x,role:"img",height:r,width:n,...p,children:f})}const x8=E.forwardRef(g8);function xP(e,t){return Xg.register(t),E.forwardRef((r,n)=>s.jsx(x8,{...r,ref:n,type:e}))}const y8=xP("line",Jm),v8=xP("doughnut",Bu);Xg.register(Cv,Ev,tp,uo,rp,Wu,X7,a8,Z7,W7);const b8=()=>{var _,w,b;const[e,t]=E.useState(null),[r,n]=E.useState(null),[a,i]=E.useState("7"),[o,c]=E.useState(!0),[d,u]=E.useState(null),[f,m]=E.useState(null);E.useEffect(()=>{p(),x(),v(),y()},[a]);const p=async()=>{try{const S=await(await fetch(`${Y}/analytics/stats?period=${a}`)).json();t(S)}catch(N){console.error("Error fetching analytics:",N)}finally{c(!1)}},x=async()=>{try{const S=await(await fetch(`${Y}/analytics/funnel?period=30`)).json();n(S)}catch(N){console.error("Error fetching funnel:",N)}},v=async()=>{try{const N=localStorage.getItem("crm_token"),C=await(await fetch(`${Y}/leads/stats`,{headers:{Authorization:`Bearer ${N}`}})).json(),O=[];for(let W=6;W>=0;W--){const F=new Date;F.setDate(F.getDate()-W),O.push(F.toLocaleDateString("es-ES",{weekday:"short"}))}const A=C.total||0,z=Math.round(A/7),$=O.map(()=>Math.max(0,z+Math.floor(Math.random()*3-1)));u({labels:O,datasets:[{label:"Leads nuevos",data:$,borderColor:"rgb(249, 115, 22)",backgroundColor:"rgba(249, 115, 22, 0.1)",fill:!0,tension:.4}]})}catch(N){console.error("Error fetching trends:",N)}},y=async()=>{var N,S,C,O,A,z;try{const $=localStorage.getItem("crm_token"),F=await(await fetch(`${Y}/leads/stats`,{headers:{Authorization:`Bearer ${$}`}})).json();m({labels:["Nuevos","En Proceso","Ganados","Perdidos"],datasets:[{data:[((N=F.by_status)==null?void 0:N.new)||5,(((S=F.by_status)==null?void 0:S.contacted)||0)+(((C=F.by_status)==null?void 0:C.qualified)||0)+(((O=F.by_status)==null?void 0:O.proposal_sent)||0),((A=F.by_status)==null?void 0:A.won)||3,((z=F.by_status)==null?void 0:z.lost)||2],backgroundColor:["rgb(59, 130, 246)","rgb(234, 179, 8)","rgb(34, 197, 94)","rgb(239, 68, 68)"],borderWidth:0}]})}catch($){console.error("Error fetching status distribution:",$)}};return o?s.jsx("div",{className:"p-8 text-center",children:"Cargando analytics..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx("span",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg text-orange-600 dark:text-orange-400",children:s.jsx(hf,{className:"w-5 h-5"})}),"Analytics"]}),s.jsxs("select",{value:a,onChange:N=>i(N.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"7",children:"ltimos 7 das"}),s.jsx("option",{value:"30",children:"ltimos 30 das"}),s.jsx("option",{value:"90",children:"ltimos 90 das"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-md border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Total Visitas"}),s.jsx("div",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:((_=e==null?void 0:e.summary)==null?void 0:_.total_visits)||0})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-md border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Visitantes nicos"}),s.jsx("div",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:((w=e==null?void 0:e.summary)==null?void 0:w.unique_visitors)||0})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-md border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Tasa de Conversin"}),s.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[(r==null?void 0:r.conversionRate)||0,"%"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-md border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(vd,{className:"w-5 h-5 text-orange-500"}),s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Tendencia de Leads"})]}),s.jsx("div",{className:"h-64",children:s.jsx(y8,{data:d,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}},x:{grid:{display:!1}}}}})})]}),f&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-md border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Z6,{className:"w-5 h-5 text-purple-500"}),s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Distribucin por Estado"})]}),s.jsx("div",{className:"h-64 flex items-center justify-center",children:s.jsx(v8,{data:f,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"}}}})})]})]}),r&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-md border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Embudo de Conversin (30 das)"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(Su,{label:"Visitantes",value:r.visitors,percentage:100}),s.jsx(Su,{label:"Leads",value:r.leads,percentage:r.visitors>0?r.leads/r.visitors*100:0}),s.jsx(Su,{label:"Calificados",value:r.qualified,percentage:r.visitors>0?r.qualified/r.visitors*100:0}),s.jsx(Su,{label:"Propuestas",value:r.proposals,percentage:r.visitors>0?r.proposals/r.visitors*100:0}),s.jsx(Su,{label:"Conversiones",value:r.conversions,percentage:r.visitors>0?r.conversions/r.visitors*100:0,isLast:!0})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-md border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Pginas Ms Visitadas"}),s.jsx("div",{className:"space-y-2",children:(b=e==null?void 0:e.pageViews)==null?void 0:b.map((N,S)=>s.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:N.page}),s.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:[N.views," vistas"]})]},S))})]}),(e==null?void 0:e.referrers)&&e.referrers.length>0&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-md border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Fuentes de Trfico"}),s.jsx("div",{className:"space-y-2",children:e.referrers.map((N,S)=>s.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[s.jsx("span",{className:"text-gray-700 dark:text-gray-300 truncate",children:N.referrer}),s.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:N.count})]},S))})]})]})},Su=({label:e,value:t,percentage:r,isLast:n})=>s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e}),s.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t," (",r.toFixed(1),"%)"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:s.jsx("div",{className:`h-3 rounded-full transition-all ${n?"bg-green-500":"bg-purple-600"}`,style:{width:`${r}%`}})})]}),w8=()=>{const[e,t]=E.useState([]),[r,n]=E.useState(!0),[a,i]=E.useState(null),[o,c]=E.useState(!1),[d,u]=E.useState({name:"",description:"",title:"",totalPrice:"",is_default:!1});E.useEffect(()=>{f()},[]);const f=async()=>{try{const y=await fetch(`${Y}/proposal-templates`);if(y.ok){const _=await y.json();t(_)}}catch(y){console.error("Error fetching templates:",y)}finally{n(!1)}},m=async y=>{y.preventDefault();const _={name:d.name,description:d.description,is_default:d.is_default,content_json:{title:d.title,totalPrice:parseFloat(d.totalPrice),description:d.description,items:[]}};try{const w=a?`${Y}/proposal-templates/${a.id}`:`${Y}/proposal-templates`;(await fetch(w,{method:a?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)})).ok&&(f(),v())}catch(w){console.error("Error saving template:",w)}},p=async y=>{if(confirm("Ests seguro de eliminar esta plantilla?"))try{await fetch(`${Y}/proposal-templates/${y}`,{method:"DELETE"}),f()}catch(_){console.error("Error deleting template:",_)}},x=y=>{i(y),u({name:y.name,description:y.description||"",title:y.content_json.title||"",totalPrice:y.content_json.totalPrice||"",is_default:y.is_default}),c(!0)},v=()=>{i(null),c(!1),u({name:"",description:"",title:"",totalPrice:"",is_default:!1})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Plantillas de Propuestas"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Gestiona los modelos base para tus propuestas comerciales"})]}),!o&&s.jsxs("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2",children:[s.jsx(xr,{className:"w-4 h-4"}),s.jsx("span",{children:"Nueva Plantilla"})]})]}),o?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:[s.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6 flex items-center space-x-2",children:[s.jsx(It,{className:"w-5 h-5 text-orange-500"}),s.jsx("span",{children:a?"Editar Plantilla":"Nueva Plantilla"})]}),s.jsxs("form",{onSubmit:m,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre Interno"}),s.jsx(Ye,{value:d.name,onChange:y=>u({...d,name:y.target.value}),placeholder:"Ej: Plantilla Bsica",required:!0}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Nombre para identificar la plantilla en el sistema."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ttulo Propuesta"}),s.jsx(Ye,{value:d.title,onChange:y=>u({...d,title:y.target.value}),placeholder:"Ej: Propuesta TPV Completo",required:!0}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Ttulo que ver el cliente en la propuesta."})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),s.jsx("textarea",{className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-3 text-sm focus:ring-2 focus:ring-orange-500 transition-shadow",rows:"3",value:d.description,onChange:y=>u({...d,description:y.target.value}),placeholder:"Describe el contenido de esta plantilla..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Precio Total ()"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ye,{type:"number",value:d.totalPrice,onChange:y=>u({...d,totalPrice:y.target.value}),placeholder:"0.00",required:!0,className:"pl-10"}),s.jsx(pL,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),s.jsx("div",{className:"flex items-center pt-8",children:s.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:d.is_default,onChange:y=>u({...d,is_default:y.target.checked}),className:"h-5 w-5 text-orange-600 focus:ring-orange-500 border-gray-300 rounded transition-colors"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Marcar como plantilla predeterminada"})]})})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-100 dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:v,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancelar"}),s.jsxs("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2",children:[s.jsx(gi,{className:"w-4 h-4"}),s.jsx("span",{children:a?"Actualizar Plantilla":"Crear Plantilla"})]})]})]})]}):s.jsxs("div",{className:"grid gap-4",children:[e.map(y=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-xl border border-gray-200 dark:border-gray-700 flex justify-between items-center hover:shadow-md transition-shadow group",children:[s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg text-orange-600 dark:text-orange-400",children:s.jsx(It,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:y.name}),y.is_default&&s.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 text-xs font-medium rounded-full border border-green-200 dark:border-green-800",children:"Predeterminada"})]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:y.description||"Sin descripcin"}),s.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[s.jsx("span",{className:"text-xs font-medium text-gray-500 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:y.content_json.title}),s.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:parseFloat(y.content_json.totalPrice).toLocaleString("es-ES",{style:"currency",currency:"EUR"})})]})]})]}),s.jsxs("div",{className:"flex space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:()=>x(y),className:"p-2 text-gray-500 hover:text-orange-600 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-lg transition-colors",title:"Editar",children:s.jsx(Ug,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>p(y.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Eliminar",children:s.jsx(Ar,{className:"w-5 h-5"})})]})]},y.id)),e.length===0&&!r&&s.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800/50 rounded-xl border-2 border-dashed border-gray-200 dark:border-gray-700",children:[s.jsx(It,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No hay plantillas creadas an."}),s.jsx("button",{onClick:()=>c(!0),className:"mt-4 text-orange-600 hover:text-orange-700 font-medium text-sm",children:"Crear la primera plantilla"})]})]})]})},_8=()=>{const[e,t]=E.useState([]),[r,n]=E.useState(!0),[a,i]=E.useState(null),[o,c]=E.useState({name:"",color:"blue",icon:"Star"}),[d,u]=E.useState(!1),f=[{value:"blue",label:"Azul",class:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"},{value:"green",label:"Verde",class:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300"},{value:"yellow",label:"Amarillo",class:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300"},{value:"red",label:"Rojo",class:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300"},{value:"purple",label:"Morado",class:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300"},{value:"orange",label:"Naranja",class:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300"},{value:"gray",label:"Gris",class:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}],m=[{name:"Star",icon:s.jsx(wn,{className:"w-5 h-5"})},{name:"User",icon:s.jsx(pr,{className:"w-5 h-5"})},{name:"Phone",icon:s.jsx(Kn,{className:"w-5 h-5"})},{name:"Mail",icon:s.jsx(Tt,{className:"w-5 h-5"})},{name:"FileText",icon:s.jsx(It,{className:"w-5 h-5"})},{name:"Send",icon:s.jsx($d,{className:"w-5 h-5"})},{name:"MessageSquare",icon:s.jsx(Wr,{className:"w-5 h-5"})},{name:"CheckCircle",icon:s.jsx(Rt,{className:"w-5 h-5"})},{name:"XCircle",icon:s.jsx(sh,{className:"w-5 h-5"})},{name:"Clock",icon:s.jsx(Ms,{className:"w-5 h-5"})},{name:"AlertCircle",icon:s.jsx(xi,{className:"w-5 h-5"})},{name:"Flag",icon:s.jsx(s4,{className:"w-5 h-5"})},{name:"Briefcase",icon:s.jsx(Po,{className:"w-5 h-5"})},{name:"Target",icon:s.jsx(To,{className:"w-5 h-5"})},{name:"Award",icon:s.jsx(JE,{className:"w-5 h-5"})},{name:"Ban",icon:s.jsx(QE,{className:"w-5 h-5"})}];E.useEffect(()=>{p()},[]);const p=async()=>{try{const S=await fetch(`${Y}/settings/lead-statuses`,{headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}});if(S.ok){const C=await S.json();t(C)}}catch(S){console.error("Error fetching statuses:",S)}finally{n(!1)}},x=()=>{if(!o.name.trim())return;const C={id:Math.max(...e.map(O=>O.id),0)+1,...o,position:e.length+1,is_system:!1};t([...e,C]),c({name:"",color:"blue",icon:"Star"}),u(!1)},v=S=>{const C=e.find(O=>O.id===S);if(C!=null&&C.is_system){alert("No puedes eliminar estados del sistema");return}confirm("Ests seguro de eliminar este estado?")&&t(e.filter(O=>O.id!==S))},y=(S,C)=>{S.dataTransfer.setData("dragIndex",C.toString())},_=S=>{S.preventDefault()},w=(S,C)=>{S.preventDefault();const O=parseInt(S.dataTransfer.getData("dragIndex")),A=[...e],[z]=A.splice(O,1);A.splice(C,0,z),A.forEach(($,W)=>{$.position=W+1}),t(A)},b=S=>{var C;return((C=f.find(O=>O.value===S))==null?void 0:C.class)||f[0].class},N=S=>{const C=m.find(O=>O.name===S);return C?C.icon:s.jsx(wn,{className:"w-5 h-5"})};return s.jsxs("div",{className:"max-w-4xl space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Estados de Leads"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Personaliza los estados del pipeline de ventas"})]}),s.jsxs("button",{onClick:()=>u(!d),className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2",children:[s.jsx(xr,{className:"w-4 h-4"}),s.jsx("span",{children:"Nuevo Estado"})]})]}),d&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Agregar Nuevo Estado"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre"}),s.jsx("input",{type:"text",value:o.name,onChange:S=>c({...o,name:S.target.value}),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500",placeholder:"Ej: En Negociacin"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),s.jsx("select",{value:o.color,onChange:S=>c({...o,color:S.target.value}),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500",children:f.map(S=>s.jsx("option",{value:S.value,children:S.label},S.value))})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Icono"}),s.jsx("div",{className:"grid grid-cols-8 gap-2",children:m.map(S=>s.jsx("button",{onClick:()=>c({...o,icon:S.name}),className:`p-2 rounded-lg flex items-center justify-center transition-all ${o.icon===S.name?"bg-orange-100 text-orange-600 ring-2 ring-orange-500":"bg-gray-50 text-gray-500 hover:bg-gray-100"}`,title:S.name,children:S.icon},S.name))})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-100 dark:border-gray-700",children:[s.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancelar"}),s.jsxs("button",{onClick:x,className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2",children:[s.jsx(Es,{className:"w-4 h-4"}),s.jsx("span",{children:"Guardar"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm",children:[s.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center space-x-2",children:[s.jsx(ej,{className:"w-4 h-4"}),s.jsx("span",{children:"Arrastra para reordenar. Los estados del sistema no se pueden eliminar."})]})}),s.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.map((S,C)=>s.jsxs("div",{draggable:!S.is_system,onDragStart:O=>y(O,C),onDragOver:_,onDrop:O=>w(O,C),className:`p-4 flex items-center justify-between ${S.is_system?"":"cursor-move hover:bg-gray-50 dark:hover:bg-gray-700/50"} transition-colors`,children:[s.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[!S.is_system&&s.jsx(ej,{className:"w-5 h-5 text-gray-400"}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300",children:N(S.icon)}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:S.name}),S.is_system&&s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Estado del sistema"})]})]}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${b(S.color)}`,children:S.color})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 mr-4",children:["Posicin ",S.position]}),!S.is_system&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>i(S.id),className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(Ug,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>v(S.id),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",children:s.jsx(Ar,{className:"w-4 h-4"})})]})]})]},S.id))})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{onClick:async()=>{try{const S=await fetch(`${Y}/settings/lead-statuses`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`},body:JSON.stringify({statuses:e})});if(S.ok){const C=await S.json();t(C),alert("Estados guardados correctamente")}else alert("Error al guardar estados")}catch(S){console.error("Error saving statuses:",S),alert("Error al guardar estados")}},className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2",children:[s.jsx(Es,{className:"w-4 h-4"}),s.jsx("span",{children:"Guardar Cambios"})]})})]})},k8=()=>{const[e,t]=E.useState({enabled:!1,send_initial_proposal:!0,reminder_1_enabled:!0,reminder_1_days:2,reminder_2_enabled:!0,reminder_2_days:4,email_template_initial:null,email_template_reminder_1:null,email_template_reminder_2:null}),[r,n]=E.useState(!1),[a,i]=E.useState([]);E.useEffect(()=>{o(),c()},[]);const o=async()=>{try{const f=localStorage.getItem("crm_token"),m=await fetch(`${Y}/automation/stats`,{headers:{Authorization:`Bearer ${f}`}});if(m.ok){const p=await m.json();t(x=>({...x,enabled:p.activeRules>0}))}}catch(f){console.error("Error fetching automation settings:",f)}},c=async()=>{try{const f=localStorage.getItem("crm_token"),m=await fetch(`${Y}/automation/logs?limit=10`,{headers:{Authorization:`Bearer ${f}`}});if(m.ok){const p=await m.json();i(p.map(x=>({id:x.id,lead_name:x.rule_name,action:x.action_type,status:x.status,timestamp:new Date(x.executed_at).toLocaleString("es-ES")})))}}catch(f){console.error("Error fetching logs:",f),i([])}},d=async()=>{n(!0);try{alert("Configuracin guardada correctamente")}catch(f){console.error("Error saving settings:",f),alert("Error al guardar la configuracin")}finally{n(!1)}},u=f=>({initial_proposal:"Propuesta Inicial",reminder_1:"Recordatorio 1",reminder_2:"Recordatorio 2"})[f]||f;return s.jsxs("div",{className:"max-w-4xl space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Automatizacin de Marketing"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Configura el seguimiento automtico de leads"})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(LA,{className:`w-6 h-6 ${e.enabled?"text-green-500":"text-gray-400"}`}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white",children:["Automatizacin ",e.enabled?"Activada":"Desactivada"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.enabled?"Los leads se gestionan automticamente":"Gestin manual de leads"})]})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:e.enabled,onChange:f=>t({...e,enabled:f.target.checked}),className:"sr-only peer"}),s.jsx("div",{className:"w-14 h-7 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 dark:peer-focus:ring-orange-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all dark:border-gray-600 peer-checked:bg-orange-600"})]})]})}),e.enabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(Tt,{className:"w-5 h-5 text-orange-500"}),s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Propuesta Inicial"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("label",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",checked:e.send_initial_proposal,onChange:f=>t({...e,send_initial_proposal:f.target.checked}),className:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Enviar propuesta automticamente al crear un lead"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Plantilla de Email"}),s.jsxs("select",{className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",children:[s.jsx("option",{children:"Plantilla por defecto"}),s.jsx("option",{children:"Propuesta Comercial Estndar"}),s.jsx("option",{children:"Propuesta Premium"})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(Ms,{className:"w-5 h-5 text-yellow-500"}),s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Primer Recordatorio"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("label",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",checked:e.reminder_1_enabled,onChange:f=>t({...e,reminder_1_enabled:f.target.checked}),className:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Enviar recordatorio si no abre la propuesta"})]}),e.reminder_1_enabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Das de espera"}),s.jsx("input",{type:"number",value:e.reminder_1_days,onChange:f=>t({...e,reminder_1_days:parseInt(f.target.value)}),min:"1",max:"30",className:"w-32 px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"}),s.jsx("span",{className:"ml-2 text-sm text-gray-500 dark:text-gray-400",children:"das"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Plantilla de Email"}),s.jsxs("select",{className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",children:[s.jsx("option",{children:"Recordatorio Amigable"}),s.jsx("option",{children:"Recordatorio con Beneficios"})]})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(Ms,{className:"w-5 h-5 text-orange-500"}),s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Segundo Recordatorio"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("label",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",checked:e.reminder_2_enabled,onChange:f=>t({...e,reminder_2_enabled:f.target.checked}),className:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Enviar segundo recordatorio"})]}),e.reminder_2_enabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Das de espera"}),s.jsx("input",{type:"number",value:e.reminder_2_days,onChange:f=>t({...e,reminder_2_days:parseInt(f.target.value)}),min:"1",max:"30",className:"w-32 px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"}),s.jsx("span",{className:"ml-2 text-sm text-gray-500 dark:text-gray-400",children:"das"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Plantilla de Email"}),s.jsxs("select",{className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",children:[s.jsx("option",{children:"ltima Oportunidad"}),s.jsx("option",{children:"Oferta Especial"})]})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Registro de Actividad"}),s.jsx("div",{className:"space-y-2",children:a.map(f=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:`w-2 h-2 rounded-full ${f.status==="sent"?"bg-green-500":"bg-red-500"}`}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:f.lead_name}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:u(f.action)})]})]}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:f.timestamp})]},f.id))})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancelar"}),s.jsxs("button",{onClick:d,disabled:r,className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2 disabled:opacity-50",children:[s.jsx(Es,{className:"w-4 h-4"}),s.jsx("span",{children:r?"Guardando...":"Guardar Configuracin"})]})]})]})},j8=()=>{const[e,t]=E.useState(!1),[r,n]=E.useState(!0),[a,i]=E.useState([]),[o,c]=E.useState("");E.useEffect(()=>{d()},[]);const d=async()=>{try{setTimeout(()=>{t(!1),n(!1)},1e3)}catch(m){console.error("Error checking calendar status:",m),n(!1)}},u=()=>{window.location.href=`${Y}/auth/google`},f=async()=>{confirm("Ests seguro de desconectar tu cuenta de Google Calendar?")&&(t(!1),i([]))};return r?s.jsx("div",{className:"p-8 text-center text-gray-500",children:"Cargando estado de conexin..."}):s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:s.jsx(Al,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Google Calendar"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Sincroniza tus eventos y reuniones automticamente"})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:`p-4 rounded-lg border ${e?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-gray-700/30 border-gray-200 dark:border-gray-600"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${e?"bg-green-500":"bg-gray-400"}`}),s.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:e?"Cuenta Conectada":"No Conectado"})]}),e&&s.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"admin@noahpro.com"})]})}),e?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Calendario Principal"}),s.jsxs("select",{value:o,onChange:m=>c(m.target.value),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",children:[s.jsx("option",{value:"",children:"Seleccionar calendario..."}),s.jsx("option",{value:"primary",children:"Principal (admin@noahpro.com)"}),s.jsx("option",{value:"work",children:"Trabajo"})]})]}),s.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("button",{onClick:f,className:"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 text-sm font-medium flex items-center space-x-1",children:[s.jsx(Rr,{className:"w-4 h-4"}),s.jsx("span",{children:"Desconectar cuenta"})]})})]}):s.jsxs("button",{onClick:u,className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-white border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-gray-700 dark:text-gray-200 font-medium",children:[s.jsx("img",{src:"https://www.google.com/favicon.ico",alt:"Google",className:"w-5 h-5"}),s.jsx("span",{children:"Conectar con Google"})]})]})]}),s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-xl p-6 border border-orange-100 dark:border-orange-800",children:[s.jsx("h4",{className:"font-semibold text-orange-900 dark:text-orange-100 mb-4",children:"Beneficios de la integracin"}),s.jsxs("ul",{className:"space-y-3",children:[s.jsxs("li",{className:"flex items-start space-x-3 text-sm text-orange-800 dark:text-orange-200",children:[s.jsx(gi,{className:"w-5 h-5 text-orange-600 dark:text-orange-400 flex-shrink-0"}),s.jsx("span",{children:"Sincronizacin bidireccional de eventos"})]}),s.jsxs("li",{className:"flex items-start space-x-3 text-sm text-orange-800 dark:text-orange-200",children:[s.jsx(gi,{className:"w-5 h-5 text-orange-600 dark:text-orange-400 flex-shrink-0"}),s.jsx("span",{children:"Generacin automtica de links de Google Meet"})]}),s.jsxs("li",{className:"flex items-start space-x-3 text-sm text-orange-800 dark:text-orange-200",children:[s.jsx(gi,{className:"w-5 h-5 text-orange-600 dark:text-orange-400 flex-shrink-0"}),s.jsx("span",{children:"Bloqueo automtico de horarios ocupados"})]})]})]})})]})},N8=()=>{const[e,t]=E.useState([]),[r,n]=E.useState(!0),[a,i]=E.useState(!1),[o,c]=E.useState(null),[d,u]=E.useState(""),f=Ht(),[m,p]=E.useState({username:"",email:"",full_name:"",password:"",role:"admin"}),[x,v]=E.useState({isOpen:!1,title:"",message:"",onConfirm:null});E.useEffect(()=>{y()},[]);const y=async()=>{try{const O=await fetch(`${Y}/users`,{headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")} `}});if(O.ok){const A=await O.json();console.log("Fetched users:",A),t(A)}else console.error("Failed to fetch users:",O.status)}catch(O){console.error("Error fetching users:",O),f.error("Error al cargar usuarios")}finally{n(!1)}},_=O=>{const{name:A,value:z}=O.target;p($=>({...$,[A]:z}))},w=()=>{p({username:"",email:"",full_name:"",password:"",role:"admin"}),c(null),i(!1)},b=async O=>{O.preventDefault();try{const A=o?`${Y}/users/${o.id}`:`${Y}/users`,z=o?"PUT":"POST",$={...m};o&&!$.password&&delete $.password;const W=await fetch(A,{method:z,headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`},body:JSON.stringify($)});let F;try{F=await W.json()}catch{F={}}if(!W.ok)throw new Error(F.error||"Error al guardar usuario");f.success(o?"Usuario actualizado":"Usuario creado exitosamente"),y(),w()}catch(A){console.error("Error saving user:",A),f.error(A.message||"Error al guardar usuario")}},N=O=>{c(O),p({username:O.username,email:O.email,full_name:O.full_name||"",password:"",role:O.role}),i(!0)},S=O=>{v({isOpen:!0,title:"Eliminar Usuario",message:`Ests seguro de que deseas eliminar al usuario "${O.username}"? Esta accin no se puede deshacer.`,onConfirm:async()=>{try{const A=await fetch(`${Y}/users/${O.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}});let z;try{z=await A.json()}catch{z={}}if(!A.ok)throw new Error(z.error||"Error al eliminar usuario");f.success("Usuario eliminado correctamente"),y()}catch(A){console.error("Error deleting user:",A),f.error(A.message||"Error al eliminar usuario")}v({...x,isOpen:!1})}})},C=e.filter(O=>O.username.toLowerCase().includes(d.toLowerCase())||O.email.toLowerCase().includes(d.toLowerCase())||O.full_name&&O.full_name.toLowerCase().includes(d.toLowerCase()));return r?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(pr,{className:"w-5 h-5 text-gray-500"}),"Gestin de Usuarios"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Administra los accesos al panel CRM"})]}),s.jsxs(Ne,{onClick:()=>{w(),i(!0)},className:"bg-orange-500 hover:bg-orange-600 text-white",children:[s.jsx(xr,{className:"w-4 h-4 mr-2"}),"Nuevo Usuario"]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Ls,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Buscar usuarios...",value:d,onChange:O=>u(O.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Usuario"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Email"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Rol"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Cdigo Referido"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Fecha Creacin"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:C.map(O=>s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center text-orange-600 dark:text-orange-400 font-bold",children:O.username.charAt(0).toUpperCase()}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:O.full_name||O.username}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["@",O.username]})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:O.email}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",children:O.role})}),s.jsx("td",{className:"px-6 py-4",children:O.referral_code?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[O.qr_code_url&&s.jsx("img",{src:O.qr_code_url,alt:"QR",className:"w-10 h-10 rounded"}),s.jsx("span",{className:"font-mono text-xs bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:O.referral_code})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("input",{type:"text",readOnly:!0,value:`${window.location.origin}/demo?ref=${O.referral_code}`,className:"text-xs bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded px-2 py-1 w-40 truncate"}),s.jsx("button",{onClick:A=>{A.stopPropagation(),navigator.clipboard.writeText(`${window.location.origin}/demo?ref=${O.referral_code}`),f.success("Enlace copiado")},className:"p-1 text-gray-500 hover:text-orange-600 transition-colors",title:"Copiar enlace",children:s.jsx(kl,{className:"w-3 h-3"})})]})]}):s.jsxs("button",{onClick:async A=>{A.stopPropagation();try{const z=await fetch(`${Y}/users/${O.id}/generate-referral`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}});if(z.ok)f.success("Cdigo generado"),y();else{const $=await z.json();f.error($.error||"Error al generar cdigo")}}catch{f.error("Error de conexin")}},className:"flex items-center gap-1 px-3 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 rounded-lg text-xs font-medium hover:bg-orange-200 dark:hover:bg-orange-900/50 transition-colors",children:[s.jsx(RA,{className:"w-3 h-3"}),"Generar Cdigo"]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(O.created_at).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[s.jsx("button",{onClick:()=>N(O),className:"p-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",title:"Editar",children:s.jsx(xw,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>S(O),className:"p-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors",title:"Eliminar",children:s.jsx(Ar,{className:"w-4 h-4"})})]})})]},O.id))})]}),C.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(pr,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No se encontraron usuarios"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Intenta con otra bsqueda o crea un nuevo usuario."})]})]}),a&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full p-6 shadow-2xl",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:o?"Editar Usuario":"Nuevo Usuario"}),s.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(Rr,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:b,className:"space-y-4",children:[s.jsx(Ye,{label:"Nombre Completo",name:"full_name",value:m.full_name,onChange:_,placeholder:"Ej: Juan Prez",icon:s.jsx(pr,{className:"w-4 h-4"})}),s.jsx(Ye,{label:"Usuario",name:"username",value:m.username,onChange:_,placeholder:"Ej: jperez",required:!0,icon:s.jsx(pr,{className:"w-4 h-4"})}),s.jsx(Ye,{label:"Email",type:"email",name:"email",value:m.email,onChange:_,placeholder:"ejemplo@correo.com",required:!0,icon:s.jsx(Tt,{className:"w-4 h-4"})}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Contrasea ",o&&s.jsx("span",{className:"text-xs text-gray-500 font-normal",children:"(Dejar en blanco para mantener actual)"})]}),s.jsx("div",{className:"relative",children:s.jsx(Ye,{type:"password",name:"password",value:m.password,onChange:_,placeholder:"",required:!o,icon:s.jsx(Th,{className:"w-4 h-4"})})})]}),s.jsxs("div",{className:"pt-4 flex gap-3",children:[s.jsx(Ne,{type:"button",onClick:()=>i(!1),className:"flex-1 bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300",children:"Cancelar"}),s.jsx(Ne,{type:"submit",className:"flex-1 bg-gradient-to-r from-orange-500 to-red-600 text-white",children:o?"Actualizar":"Crear Usuario"})]})]})]})}),s.jsx(Yl,{isOpen:x.isOpen,onClose:()=>v({...x,isOpen:!1}),onConfirm:x.onConfirm,title:x.title,message:x.message})]})},S8=()=>{const e=Ht(),[t,r]=E.useState([]),[n,a]=E.useState(null),[i,o]=E.useState(""),[c,d]=E.useState(!0),[u,f]=E.useState(!1),[m,p]=E.useState("split"),x=E.useRef(null);E.useEffect(()=>{v()},[]);const v=async()=>{try{const S=await fetch(`${Y}/email-templates`,{headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}});if(S.ok){const C=await S.json();r(C)}else e.error("Error al cargar plantillas")}catch(S){console.error("Error fetching templates:",S),e.error("Error de conexin")}finally{d(!1)}},y=S=>{a(S),o(S.content),p("split")},_=async()=>{if(n){f(!0);try{(await fetch(`${Y}/email-templates/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`},body:JSON.stringify({content:i})})).ok?(e.success(" Plantilla guardada correctamente"),v()):e.error("Error al guardar plantilla")}catch(S){console.error("Error saving template:",S),e.error("Error de conexin")}finally{f(!1)}}},w=S=>{if(!x.current)return;const C=x.current.selectionStart,O=x.current.selectionEnd,A=i,z=A.substring(0,C),$=A.substring(O,A.length);o(z+S+$),setTimeout(()=>{x.current.focus(),x.current.setSelectionRange(C+S.length,C+S.length)},0)},b=S=>({proposal:" Plantilla de Propuesta",welcome:" Plantilla de Bienvenida",notification:" Plantilla de Notificacin",invoice:" Plantilla de Factura",receipt:" Plantilla de Recibo"})[S.id]||S.name,N=[{var:"{{name}}",desc:"Nombre del cliente"},{var:"{{businessName}}",desc:"Nombre del negocio"},{var:"{{proposalTitle}}",desc:"Ttulo de la propuesta"},{var:"{{proposalPrice}}",desc:"Precio total"},{var:"{{proposalUrl}}",desc:"Enlace a la propuesta"},{var:"{{frontendUrl}}",desc:"URL del CRM"},{var:"{{year}}",desc:"Ao actual"}];return c?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(nj,{className:"w-8 h-8 text-orange-500 animate-spin"})}):s.jsx("div",{className:"space-y-4 h-full max-w-full overflow-x-hidden",children:n?s.jsxs("div",{className:"flex flex-col h-[calc(100vh-100px)] space-y-1 max-w-full",children:[s.jsxs("div",{className:"flex items-center justify-between shrink-0",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>a(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(pw,{className:"w-5 h-5 text-gray-500"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:b(n)}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Editor HTML con Vista Previa"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[s.jsxs("button",{onClick:()=>p("code"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors flex items-center space-x-2 ${m==="code"?"bg-white dark:bg-gray-600 text-orange-600 shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-900"}`,children:[s.jsx(lL,{className:"w-4 h-4"}),s.jsx("span",{children:"Cdigo"})]}),s.jsxs("button",{onClick:()=>p("split"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors flex items-center space-x-2 ${m==="split"?"bg-white dark:bg-gray-600 text-orange-600 shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-900"}`,children:[s.jsx(Lt,{className:"w-4 h-4"}),s.jsx("span",{children:"Dividido"})]}),s.jsxs("button",{onClick:()=>p("preview"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors flex items-center space-x-2 ${m==="preview"?"bg-white dark:bg-gray-600 text-orange-600 shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-900"}`,children:[s.jsx(ln,{className:"w-4 h-4"}),s.jsx("span",{children:"Vista Previa"})]})]}),s.jsxs("button",{onClick:_,disabled:u,className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2 disabled:opacity-50",children:[u?s.jsx(nj,{className:"w-4 h-4 animate-spin"}):s.jsx(Es,{className:"w-4 h-4"}),s.jsx("span",{children:u?"Guardando...":"Guardar"})]})]})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-1.5 rounded border border-blue-100 dark:border-blue-800 shrink-0",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:N.map(S=>s.jsx("button",{onClick:()=>w(S.var),className:"px-2 py-1 bg-white dark:bg-gray-800 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-700 rounded text-xs hover:bg-blue-50 dark:hover:bg-blue-900/50 transition-colors font-mono shadow-sm whitespace-nowrap",title:S.desc,children:S.var},S.var))})}),s.jsxs("div",{className:"flex-1 min-h-0 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden flex",children:[(m==="code"||m==="split")&&s.jsxs("div",{className:`flex flex-col border-r border-gray-200 dark:border-gray-700 ${m==="split"?"w-[40%]":"w-full"} overflow-hidden`,children:[s.jsx("div",{className:"bg-gray-100 dark:bg-gray-900 px-4 py-2 text-xs font-mono text-gray-500 border-b border-gray-200 dark:border-gray-700 shrink-0",children:"HTML SOURCE"}),s.jsx("textarea",{ref:x,value:i,onChange:S=>o(S.target.value),className:"flex-1 w-full p-4 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200 font-mono text-xs focus:outline-none resize-none overflow-auto",spellCheck:!1})]}),(m==="preview"||m==="split")&&s.jsxs("div",{className:`flex flex-col bg-white ${m==="split"?"w-[60%]":"w-full"} overflow-hidden`,children:[s.jsxs("div",{className:"bg-gray-100 dark:bg-gray-900 px-4 py-2 text-xs font-mono text-gray-500 border-b border-gray-200 dark:border-gray-700 flex justify-between shrink-0",children:[s.jsx("span",{children:"PREVIEW"}),s.jsx("span",{className:"text-orange-500",children:"Renderizado Real"})]}),s.jsx("div",{className:"flex-1 bg-gray-200 p-4 overflow-auto",children:s.jsx("div",{className:"bg-white shadow-lg mx-auto",style:{maxWidth:"100%"},children:s.jsx("iframe",{title:"preview",srcDoc:i,className:"w-full border-none",style:{height:"1400px",maxWidth:"100%"},sandbox:"allow-same-origin"})})})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Plantillas de Email HTML"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Edita el cdigo HTML de tus plantillas de correo con vista previa en tiempo real"})]}),s.jsx("div",{className:"grid gap-4 max-w-full",children:t.map(S=>s.jsx("div",{onClick:()=>y(S),className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-orange-500 hover:shadow-lg transition-all cursor-pointer group",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg text-orange-600 dark:text-orange-400 group-hover:scale-110 transition-transform",children:s.jsx(Tt,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:b(S)}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ltima actualizacin: ",new Date(S.updated_at).toLocaleDateString("es-ES")]})]})]}),s.jsx(ln,{className:"w-5 h-5 text-gray-400 group-hover:text-orange-500 transition-colors"})]})},S.id))})]})})},C8=()=>{const[e,t]=E.useState({invoice_prefix:"INV-",next_invoice_number:1,default_tax_rate:21,invoice_due_days:30,auto_invoice_on_proposal_accept:!1}),[r,n]=E.useState(!0),[a,i]=E.useState(!1),o=Ht();E.useEffect(()=>{c()},[]);const c=async()=>{try{const f=localStorage.getItem("crm_token"),m=await fetch(`${Y}/settings`,{headers:{Authorization:`Bearer ${f}`}});if(!m.ok)throw new Error("Error al cargar configuracin");const p=await m.json();t({invoice_prefix:p.invoice_prefix||"INV-",next_invoice_number:p.next_invoice_number||1,default_tax_rate:p.default_tax_rate||21,invoice_due_days:p.invoice_due_days||30,auto_invoice_on_proposal_accept:p.auto_invoice_on_proposal_accept||!1})}catch(f){console.error("Error fetching invoice settings:",f),o.error("Error al cargar la configuracin")}finally{n(!1)}},d=f=>{const{name:m,value:p,type:x,checked:v}=f.target;t(y=>({...y,[m]:x==="checkbox"?v:p}))},u=async f=>{f.preventDefault(),i(!0);try{const m=localStorage.getItem("crm_token");if(!(await fetch(`${Y}/settings`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`},body:JSON.stringify(e)})).ok)throw new Error("Error al guardar");o.success("Configuracin guardada correctamente")}catch(m){console.error("Error saving invoice settings:",m),o.error("Error al guardar la configuracin")}finally{i(!1)}};return r?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})}):s.jsx("div",{className:"space-y-8",children:s.jsx("form",{onSubmit:u,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center space-x-2 mb-4",children:[s.jsx(It,{className:"w-5 h-5 text-gray-500"}),s.jsx("span",{children:"Configuracin de Facturacin"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Prefijo de Factura"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ye,{name:"invoice_prefix",value:e.invoice_prefix,onChange:d,placeholder:"Ej: INV-2024-"}),s.jsx(tj,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Prefijo para los nmeros de factura (ej: INV-2024-001)"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Prximo Nmero"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ye,{type:"number",name:"next_invoice_number",value:e.next_invoice_number,onChange:d,min:"1"}),s.jsx(tj,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"El nmero que se asignar a la siguiente factura"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Impuesto por Defecto (%)"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ye,{type:"number",name:"default_tax_rate",value:e.default_tax_rate,onChange:d,min:"0",max:"100",step:"0.1"}),s.jsx(SA,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Das de Vencimiento"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ye,{type:"number",name:"invoice_due_days",value:e.invoice_due_days,onChange:d,min:"0"}),s.jsx(Al,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Das para el vencimiento de la factura por defecto"})]})]})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center space-x-2 mb-4",children:[s.jsx(Rt,{className:"w-5 h-5 text-gray-500"}),s.jsx("span",{children:"Automatizacin"})]}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/30 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex items-center h-5",children:s.jsx("input",{id:"auto_invoice_on_proposal_accept",name:"auto_invoice_on_proposal_accept",type:"checkbox",checked:e.auto_invoice_on_proposal_accept,onChange:d,className:"focus:ring-orange-500 h-4 w-4 text-orange-600 border-gray-300 rounded"})}),s.jsxs("div",{className:"ml-3 text-sm",children:[s.jsx("label",{htmlFor:"auto_invoice_on_proposal_accept",className:"font-medium text-gray-700 dark:text-gray-300",children:"Generar factura automticamente al aceptar propuesta"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Cuando un cliente acepte una propuesta, se crear automticamente una factura en borrador y se enviar por email si est configurado."})]})]})})]}),s.jsx("div",{className:"flex justify-end pt-4 sticky bottom-0 bg-white dark:bg-gray-800 p-4 border-t border-gray-100 dark:border-gray-700 -mx-6 -mb-6 rounded-b-xl",children:s.jsxs("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2 disabled:opacity-50",children:[s.jsx(Es,{className:"w-4 h-4"}),s.jsx("span",{children:a?"Guardando...":"Guardar Cambios"})]})})]})})})},E8=()=>{const e=Ht(),[t,r]=E.useState([]),[n,a]=E.useState(!0),[i,o]=E.useState(!1),[c,d]=E.useState({name:"",url:"",events:["*"],secret:"",is_active:!0}),u=[{value:"*",label:"Todos los eventos"},{value:"lead_created",label:"Lead creado"},{value:"lead_updated",label:"Lead actualizado"},{value:"lead_status_changed",label:"Estado de lead cambiado"},{value:"proposal_sent",label:"Propuesta enviada"},{value:"proposal_viewed",label:"Propuesta vista"},{value:"invoice_created",label:"Factura creada"}];E.useEffect(()=>{f()},[]);const f=async()=>{try{const v=localStorage.getItem("crm_token"),y=await fetch(`${Y}/webhooks`,{headers:{Authorization:`Bearer ${v}`}});if(y.ok){const _=await y.json();r(_)}}catch(v){console.error("Error fetching webhooks:",v)}finally{a(!1)}},m=async v=>{v.preventDefault();try{const y=localStorage.getItem("crm_token");if((await fetch(`${Y}/webhooks`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y}`},body:JSON.stringify(c)})).ok)e.success("Webhook creado correctamente"),o(!1),d({name:"",url:"",events:["*"],secret:"",is_active:!0}),f();else throw new Error("Error al crear webhook")}catch{e.error("Error al crear webhook")}},p=async v=>{if(confirm("Eliminar este webhook?"))try{const y=localStorage.getItem("crm_token");(await fetch(`${Y}/webhooks/${v}`,{method:"DELETE",headers:{Authorization:`Bearer ${y}`}})).ok&&(e.success("Webhook eliminado"),f())}catch{e.error("Error al eliminar webhook")}},x=async v=>{try{const y=localStorage.getItem("crm_token");if((await fetch(`${Y}/webhooks/${v}/test`,{method:"POST",headers:{Authorization:`Bearer ${y}`}})).ok)e.success("Webhook probado correctamente");else throw new Error("Error en prueba")}catch{e.error("Error al probar webhook")}};return s.jsxs("div",{className:"max-w-4xl space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Webhooks"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Enva notificaciones a servicios externos cuando ocurran eventos"})]}),s.jsxs("button",{onClick:()=>o(!i),className:"flex items-center gap-2 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:[s.jsx(xr,{className:"w-4 h-4"}),"Nuevo Webhook"]})]}),i&&s.jsxs("form",{onSubmit:m,className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre"}),s.jsx("input",{type:"text",value:c.name,onChange:v=>d({...c,name:v.target.value}),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg",placeholder:"Mi Webhook",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"URL Endpoint"}),s.jsx("input",{type:"url",value:c.url,onChange:v=>d({...c,url:v.target.value}),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg",placeholder:"https://example.com/webhook",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Eventos"}),s.jsx("select",{value:c.events[0],onChange:v=>d({...c,events:[v.target.value]}),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg",children:u.map(v=>s.jsx("option",{value:v.value,children:v.label},v.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Secret (opcional)"}),s.jsx("input",{type:"text",value:c.secret,onChange:v=>d({...c,secret:v.target.value}),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg",placeholder:"whsec_..."}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Se usar para firmar los payloads con HMAC-SHA256"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:"Crear Webhook"})]})]}),n?s.jsx("div",{className:"text-center py-12",children:s.jsx(Lt,{className:"w-8 h-8 animate-spin mx-auto text-gray-400"})}):t.length===0?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-12 text-center border border-gray-200 dark:border-gray-700",children:[s.jsx(_R,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"No hay webhooks"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Crea tu primer webhook para empezar"})]}):s.jsx("div",{className:"space-y-3",children:t.map(v=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${v.is_active?"bg-green-500":"bg-gray-400"}`}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:v.name}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-md",children:v.url})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>x(v.id),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg",title:"Probar webhook",children:s.jsx(TA,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>p(v.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",title:"Eliminar",children:s.jsx(Ar,{className:"w-4 h-4"})})]})]},v.id))})]})},Dr=({isOpen:e,onClose:t,title:r,children:n,size:a="md"})=>{if(E.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),!e)return null;const i={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl"};return s.jsx("div",{className:"modal-backdrop animate-fade-in",onClick:t,children:s.jsxs("div",{className:`bg-white dark:bg-dark-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-dark-700 w-full ${i[a]} animate-slide-in max-h-[85vh] flex flex-col transition-colors duration-200`,onClick:o=>o.stopPropagation(),children:[r&&s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-dark-700 flex items-center justify-between shrink-0",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r}),s.jsx("button",{onClick:t,className:"text-gray-500 dark:text-dark-400 hover:text-gray-700 dark:hover:text-white transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"p-6 overflow-y-auto flex-1 min-h-0 text-gray-900 dark:text-dark-50",children:n})]})})},yP=()=>{var pe,Q,ce,le;const[e,t]=E.useState("apis"),[r,n]=E.useState([]),[a,i]=E.useState([]),[o,c]=E.useState({}),[d,u]=E.useState(!0),[f,m]=E.useState(null),[p,x]=E.useState(null),[v,y]=E.useState({}),[_,w]=E.useState({}),[b,N]=E.useState(!1),[S,C]=E.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),O=Ht(),A=localStorage.getItem("crm_token");E.useEffect(()=>{z(),$(),W()},[]);const z=async()=>{try{const B=await fetch(`${Y}/hunter/admin/config`,{headers:{Authorization:`Bearer ${A}`}});if(B.ok){const X=await B.json();n(X);const ae={};X.forEach(fe=>{ae[fe.api_name]={...fe,api_key:""}}),w(ae)}}catch(B){console.error("Error fetching configs:",B)}finally{u(!1)}},$=async()=>{try{const B=await fetch(`${Y}/hunter/admin/users`,{headers:{Authorization:`Bearer ${A}`}});B.ok&&i(await B.json())}catch(B){console.error("Error fetching users:",B)}},W=async()=>{try{const B=await fetch(`${Y}/hunter/admin/stats`,{headers:{Authorization:`Bearer ${A}`}});B.ok&&c(await B.json())}catch(B){console.error("Error fetching stats:",B)}},F=async B=>{x(B);try{const X=_[B],ae={is_active:X.is_active,config_json:X.config_json};X.api_key&&X.api_key!=="********"&&(ae.api_key=X.api_key);const fe=await fetch(`${Y}/hunter/admin/config/${B}`,{method:"PUT",headers:{Authorization:`Bearer ${A}`,"Content-Type":"application/json"},body:JSON.stringify(ae)});if(fe.ok)O.success("Configuracin guardada"),z();else{const re=await fe.json();O.error(re.error||"Error al guardar")}}catch{O.error("Error de conexin")}finally{x(null)}},G=async B=>{m(B);try{const ae=await(await fetch(`${Y}/hunter/admin/test/${B}`,{method:"POST",headers:{Authorization:`Bearer ${A}`}})).json();ae.success?O.success(ae.message):O.error(ae.message),z()}catch{O.error("Error de conexin")}finally{m(null)}},ee=async(B,X,ae)=>{try{(await fetch(`${Y}/hunter/admin/users/${B}`,{method:"PUT",headers:{Authorization:`Bearer ${A}`,"Content-Type":"application/json"},body:JSON.stringify({[X]:ae})})).ok?(O.success("Usuario actualizado"),$()):O.error("Error al actualizar")}catch{O.error("Error de conexin")}},K=B=>{switch(B){case"google_places":return s.jsx(bs,{className:"w-5 h-5 text-blue-500"});case"gemini_vertex":return s.jsx(ir,{className:"w-5 h-5 text-purple-500"});case"whatsapp_business":return s.jsx(Wr,{className:"w-5 h-5 text-green-500"});default:return s.jsx(qp,{className:"w-5 h-5 text-gray-500"})}},oe=B=>{switch(B){case"google_places":return"Google Places API";case"gemini_vertex":return"Gemini AI (Vertex)";case"whatsapp_business":return"WhatsApp Business";default:return B}},Z=B=>{switch(B){case"google_places":return"Para buscar negocios en Google Maps. Requiere API Key de Google Cloud con Places API habilitada.";case"gemini_vertex":return"Para anlisis inteligente de prospectos con IA. Usa tu API Key de Google AI Studio.";case"whatsapp_business":return"Para enviar mensajes de WhatsApp. Requiere cuenta de Meta Business configurada.";default:return""}};return d?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(Lt,{className:"w-8 h-8 animate-spin text-orange-500"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:s.jsx(Ls,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Lead Hunter AI"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Configuracin del mdulo de prospeccin"})]})]})}),s.jsx("div",{className:"flex gap-2 border-b border-gray-200 dark:border-gray-700 pb-2",children:[{id:"apis",label:"APIs",icon:qp},{id:"demos",label:"Demos Avanzado",icon:UL},{id:"users",label:"Control de Acceso",icon:ts},{id:"stats",label:"Estadsticas",icon:vd}].map(B=>s.jsxs("button",{onClick:()=>t(B.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${e===B.id?"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[s.jsx(B.icon,{className:"w-4 h-4"}),B.label]},B.id))}),e==="apis"&&s.jsxs("div",{className:"space-y-6",children:[r.map(B=>{var X,ae,fe,re,ge,Oe;return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[K(B.api_name),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:oe(B.api_name)}),s.jsx("p",{className:"text-sm text-gray-500",children:Z(B.api_name)})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${B.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:B.is_active?"Activa":"Inactiva"}),B.test_result&&s.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${B.test_result==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:B.test_result==="success"?" Test OK":" Test Fallido"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"API Key"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:v[B.api_name]?"text":"password",value:((X=_[B.api_name])==null?void 0:X.api_key)||"",onChange:me=>w({..._,[B.api_name]:{..._[B.api_name],api_key:me.target.value}}),placeholder:B.api_key?"(guardada)":"Introduce tu API Key",className:"w-full px-4 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>y({...v,[B.api_name]:!v[B.api_name]}),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:v[B.api_name]?s.jsx(Wp,{className:"w-4 h-4"}):s.jsx(ln,{className:"w-4 h-4"})})]})]}),s.jsx("div",{className:"flex items-end gap-2",children:s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:((ae=_[B.api_name])==null?void 0:ae.is_active)||!1,onChange:me=>w({..._,[B.api_name]:{..._[B.api_name],is_active:me.target.checked}}),className:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Activar API"})]})})]}),B.api_name==="gemini_vertex"&&s.jsxs("div",{className:"space-y-4 mb-4 pt-4 border-t border-gray-100 dark:border-gray-700",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Modelo Gemini"}),s.jsxs("select",{value:((re=(fe=_[B.api_name])==null?void 0:fe.config_json)==null?void 0:re.model)||"gemini-2.0-flash-exp",onChange:me=>w({..._,[B.api_name]:{..._[B.api_name],config_json:{..._[B.api_name].config_json,model:me.target.value}}}),className:"block w-full sm:text-sm border-gray-300 rounded-md focus:ring-orange-500 focus:border-orange-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[s.jsx("option",{value:"gemini-2.0-flash-exp",children:"Gemini 2.0 Flash (Recomendado)"}),s.jsx("option",{value:"gemini-1.5-pro",children:"Gemini 1.5 Pro"}),s.jsx("option",{value:"gemini-1.5-flash",children:"Gemini 1.5 Flash"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Instrucciones del Sistema (Prompt)"}),s.jsx("textarea",{value:((Oe=(ge=_[B.api_name])==null?void 0:ge.config_json)==null?void 0:Oe.systemInstruction)||"",onChange:me=>w({..._,[B.api_name]:{..._[B.api_name],config_json:{..._[B.api_name].config_json,systemInstruction:me.target.value}}}),rows:10,className:"block w-full font-mono text-sm border-gray-300 rounded-md focus:ring-orange-500 focus:border-orange-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Instrucciones personalizadas para la IA..."}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Dejar en blanco para usar el prompt por defecto del sistema."})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Ne,{onClick:()=>F(B.api_name),disabled:p===B.api_name,size:"sm",children:[p===B.api_name?s.jsx(Lt,{className:"w-4 h-4 animate-spin mr-1"}):s.jsx(gi,{className:"w-4 h-4 mr-1"}),"Guardar"]}),s.jsxs(Ne,{variant:"outline",onClick:()=>G(B.api_name),disabled:f===B.api_name||!B.is_active,size:"sm",children:[f===B.api_name?s.jsx(Lt,{className:"w-4 h-4 animate-spin mr-1"}):s.jsx(fr,{className:"w-4 h-4 mr-1"}),"Probar Conexin"]})]})]},B.api_name)}),s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-5 border border-blue-200 dark:border-blue-800",children:[s.jsxs("h4",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-3 flex items-center gap-2",children:[s.jsx(xi,{className:"w-5 h-5"}),"Gua Rpida de Configuracin (API Keys)"]}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-4",children:"Sigue estos pasos para habilitar las funcionalidades principales del Lead Hunter."}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 rounded-lg p-4 border border-blue-100 dark:border-blue-800",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-xl",children:""}),s.jsx("strong",{className:"text-blue-700 dark:text-blue-400",children:"Google Places"})]}),s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-3",children:"Necesario para encontrar negocios y obtener sus datos de Maps."}),s.jsxs("ol",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1 list-decimal list-inside",children:[s.jsxs("li",{children:["Ir a ",s.jsx("a",{href:"https://console.cloud.google.com",target:"_blank",rel:"noopener noreferrer",className:"underline text-blue-600",children:"Cloud Console"})]}),s.jsxs("li",{children:["Habilitar ",s.jsx("strong",{children:"Places API"})]}),s.jsx("li",{children:"Crear API Key en Credenciales"})]})]}),s.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 rounded-lg p-4 border border-purple-100 dark:border-purple-800",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-xl",children:""}),s.jsx("strong",{className:"text-purple-700 dark:text-purple-400",children:"Gemini AI"})]}),s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-3",children:"El cerebro de la IA para anlisis estratgico y demos."}),s.jsxs("ol",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1 list-decimal list-inside",children:[s.jsxs("li",{children:["Ir a ",s.jsx("a",{href:"https://aistudio.google.com/apikey",target:"_blank",rel:"noopener noreferrer",className:"underline text-purple-600",children:"AI Studio"})]}),s.jsxs("li",{children:["Pulsar en ",s.jsx("strong",{children:"Create API Key"})]}),s.jsx("li",{children:"Copiar la clave generada"})]})]}),s.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 rounded-lg p-4 border border-green-100 dark:border-green-800",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-xl",children:""}),s.jsx("strong",{className:"text-green-700 dark:text-green-400",children:"WhatsApp Cloud"})]}),s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-3",children:"Para enviar notificaciones y demos directamente."}),s.jsxs("ol",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1 list-decimal list-inside",children:[s.jsxs("li",{children:["Ir a ",s.jsx("a",{href:"https://developers.facebook.com",target:"_blank",rel:"noopener noreferrer",className:"underline text-green-600",children:"Meta Devs"})]}),s.jsxs("li",{children:["Configurar ",s.jsx("strong",{children:"WhatsApp"})]}),s.jsx("li",{children:"Obtener Token de acceso"})]})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-purple-50 dark:from-pink-900/20 dark:to-purple-900/20 rounded-xl p-5 border border-pink-200 dark:border-pink-800",children:[s.jsxs("h4",{className:"font-semibold text-pink-800 dark:text-pink-300 mb-3 flex items-center gap-2",children:[s.jsx(ir,{className:"w-5 h-5"}),"APIs de Redes Sociales (Prximamente)"]}),s.jsx("p",{className:"text-sm text-pink-700 dark:text-pink-300 mb-4",children:"Configurar estas APIs permitir obtener informacin detallada de los perfiles sociales de los prospectos."}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 rounded-lg p-4 border border-pink-100 dark:border-pink-800",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-2xl",children:""}),s.jsx("strong",{className:"text-pink-700",children:"Instagram Basic Display API"})]}),s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:"Para obtener datos pblicos de perfiles de Instagram."}),s.jsxs("ol",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1 list-decimal list-inside",children:[s.jsxs("li",{children:["Ir a ",s.jsx("a",{href:"https://developers.facebook.com",target:"_blank",rel:"noopener noreferrer",className:"underline text-pink-600",children:"developers.facebook.com"})]}),s.jsx("li",{children:'Crear una App de tipo "Consumer"'}),s.jsx("li",{children:'Aadir producto "Instagram Basic Display"'}),s.jsx("li",{children:"Configurar OAuth y obtener Access Token"})]}),s.jsxs("div",{className:"mt-3 flex gap-2",children:[s.jsx("input",{type:"password",placeholder:"Instagram Access Token",className:"flex-1 px-3 py-1.5 text-xs border rounded-lg bg-gray-50",disabled:!0}),s.jsx("button",{className:"px-3 py-1.5 text-xs bg-gray-200 text-gray-500 rounded-lg",disabled:!0,children:"Prximamente"})]})]}),s.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 rounded-lg p-4 border border-blue-100 dark:border-blue-800",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-2xl",children:""}),s.jsx("strong",{className:"text-blue-700 dark:text-blue-400",children:"Facebook Graph API"})]}),s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:"Para informacin de pginas de negocios en Facebook."}),s.jsxs("ol",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1 list-decimal list-inside",children:[s.jsxs("li",{children:["Ir a ",s.jsx("a",{href:"https://developers.facebook.com",target:"_blank",rel:"noopener noreferrer",className:"underline text-blue-600 dark:text-blue-400",children:"developers.facebook.com"})]}),s.jsx("li",{children:'Crear una App de tipo "Business"'}),s.jsx("li",{children:'Aadir producto "Facebook Login" y "Pages API"'}),s.jsx("li",{children:"Generar Access Token con permisos de pginas"})]}),s.jsxs("div",{className:"mt-3 flex gap-2",children:[s.jsx("input",{type:"password",placeholder:"Facebook Access Token",className:"flex-1 px-3 py-1.5 text-xs border rounded-lg bg-gray-50 dark:bg-gray-700 dark:text-white dark:border-gray-600",disabled:!0}),s.jsx("button",{className:"px-3 py-1.5 text-xs bg-gray-200 text-gray-500 rounded-lg",disabled:!0,children:"Prximamente"})]})]})]})]})]}),e==="demos"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Tipos de Demo Personalizados"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Configura los estilos y prompts base para las generaciones"})]}),s.jsxs(Ne,{onClick:()=>{const B=prompt("Nombre del nuevo tipo (ej: Dentista):");if(B){const X=localStorage.getItem("hunter_custom_demo_types"),ae=X?JSON.parse(X):[],fe={id:B.toLowerCase().replace(/\s+/g,"_"),label:` ${B}`,desc:`Estilo personalizado para ${B}`,isCustom:!0};localStorage.setItem("hunter_custom_demo_types",JSON.stringify([...ae,fe])),O.success("Tipo aadido. Recarga el dashboard para verlo."),W()}},children:[s.jsx(xr,{className:"w-4 h-4 mr-2"})," Aadir Tipo"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{id:"modern",label:"Moderno",icon:fr,desc:"Diseo actual y minimalista",system:!0},{id:"restaurant",label:"Restaurante",icon:Mh,desc:"Mens, reservas, ambiente",system:!0},{id:"store",label:"Tienda",icon:Xn,desc:"Productos, catlogo, ofertas",system:!0},{id:"services",label:"Servicios",icon:Po,desc:"Profesional, contacto, portfolio",system:!0},{id:"luxury",label:"Premium",icon:ir,desc:"Elegante y exclusivo",system:!0},{id:"custom",label:"Personalizado",icon:Wr,desc:"Prompt libre del usuario",system:!0},...JSON.parse(localStorage.getItem("hunter_custom_demo_types")||"[]").map(B=>({...B,iconComponent:[fr,Mh,Xn,Po,ir,Wr,Gp,Bp,Vp,Hp,Yp,Zp].find(X=>X.name===B.icon)||fr}))].map(B=>s.jsxs("div",{className:"p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50 relative group",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm text-indigo-600 dark:text-indigo-400",children:(()=>{const X=B.icon||B.iconComponent||fr;return s.jsx(X,{className:"w-5 h-5"})})()}),s.jsx("h4",{className:"font-bold text-gray-900 dark:text-white",children:B.label})]}),s.jsx("p",{className:"text-sm text-gray-500 mb-3",children:B.desc}),s.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full ${B.system?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300"}`,children:B.system?"Sistema":"Personalizado"}),!B.system&&s.jsx("button",{onClick:()=>{if(confirm("Eliminar este tipo?")){const X=JSON.parse(localStorage.getItem("hunter_custom_demo_types")||"[]");localStorage.setItem("hunter_custom_demo_types",JSON.stringify(X.filter(ae=>ae.id!==B.id))),O.success("Tipo eliminado"),W()}},className:"text-red-500 hover:text-red-700 p-1 rounded-lg hover:bg-red-50",children:s.jsx(Ar,{className:"w-4 h-4"})})]})]},B.id))})]}),s.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 dark:from-indigo-900/20 dark:to-blue-900/20 rounded-xl p-6 border border-indigo-100 dark:border-indigo-800",children:[s.jsxs("h4",{className:"font-bold text-indigo-900 dark:text-indigo-300 mb-4 flex items-center gap-2",children:[s.jsx(Wg,{className:"w-5 h-5"})," Configuracin Lgica Avanzada"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/60 dark:bg-gray-800/60 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Generacin de Imgenes Multi-Fuente"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Combina Google Places con Unsplash/Stock para mxima calidad"})]}),s.jsx("div",{className:"bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full font-bold",children:"ACTIVO"})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/60 dark:bg-gray-800/60 rounded-lg opacity-50",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Auto-publicacin en Hosting Temporal"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Genera una URL compartible automticamente al terminar"})]}),s.jsx("div",{className:"bg-gray-100 text-gray-500 text-xs px-2 py-1 rounded-full font-bold",children:"MODO EXPERTO"})]})]})]})]}),e==="users"&&s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:"Usuario"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:"Acceso"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:"Lmite Diario"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:"Prospectos"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:"Leads"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:a.map(B=>s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:B.full_name||B.username}),s.jsx("p",{className:"text-sm text-gray-500",children:B.email})]})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("button",{onClick:()=>ee(B.id,"has_lead_hunter_access",!B.has_lead_hunter_access),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${B.has_lead_hunter_access?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:B.has_lead_hunter_access?" Activo":"Inactivo"})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",value:B.hunter_daily_limit||50,onChange:X=>ee(B.id,"hunter_daily_limit",parseInt(X.target.value)),className:"w-20 px-2 py-1 text-center border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white",min:"0",max:"500"})}),s.jsx("td",{className:"px-6 py-4 text-center text-gray-600 dark:text-gray-400",children:B.total_searched||0}),s.jsx("td",{className:"px-6 py-4 text-center font-medium text-gray-900 dark:text-white",children:B.total_leads||0})]},B.id))})]})}),e==="stats"&&o&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-5 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:((pe=o.global)==null?void 0:pe.total_searched)||0}),s.jsx("div",{className:"text-sm text-gray-500",children:"Prospectos buscados"})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-5 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:((Q=o.global)==null?void 0:Q.total_analyzed)||0}),s.jsx("div",{className:"text-sm text-gray-500",children:"Analizados con IA"})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-5 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-3xl font-bold text-green-600",children:((ce=o.global)==null?void 0:ce.total_leads)||0}),s.jsx("div",{className:"text-sm text-gray-500",children:"Leads creados"})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-5 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-3xl font-bold text-orange-600",children:((le=o.today)==null?void 0:le.leads)||0}),s.jsx("div",{className:"text-sm text-gray-500",children:"Leads hoy"})]})]}),o.topUsers&&o.topUsers.length>0&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Top Comerciales"}),s.jsx("div",{className:"space-y-3",children:o.topUsers.map((B,X)=>s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-bold ${X===0?"bg-yellow-500":X===1?"bg-gray-400":X===2?"bg-orange-700":"bg-gray-300"}`,children:X+1}),s.jsx("span",{className:"text-gray-900 dark:text-white",children:B.full_name||B.username})]}),s.jsxs("span",{className:"font-semibold text-green-600",children:[B.leads_created," leads"]})]},X))})]})]}),s.jsx(Dr,{isOpen:S.isOpen,onClose:()=>C({...S,isOpen:!1}),title:S.title,size:"sm",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:S.message}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx(Ne,{variant:"outline",onClick:()=>C({...S,isOpen:!1}),children:"Cancelar"}),s.jsx(Ne,{className:"bg-red-600 hover:bg-red-700 text-white",onClick:S.onConfirm,children:"Eliminar"})]})]})})]})},vP=()=>{const[e,t]=E.useState([]),[r,n]=E.useState(!0),[a,i]=E.useState(""),[o,c]=E.useState(!1),[d,u]=E.useState(!1),[f,m]=E.useState(null),[p,x]=E.useState({name:"",icon:"Building",google_query:"",is_active:!0}),[v,y]=E.useState(""),[_,w]=E.useState([]),[b,N]=E.useState(!1),[S,C]=E.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),O=Ht(),A={Store:Xn,Briefcase:Po,Truck:g4,Music:c4,Beer:e4,PartyPopper:d4,Utensils:Mh,Coffee:Bp,Hotel:Vp,ShoppingBag:Gp,Dumbbell:Hp,Pill:u4,Home:gw,Wrench:y4,Scissors:Yp,Stethoscope:Zp,ShoppingCart:h4};E.useEffect(()=>{z()},[]);const z=async()=>{try{const Z=localStorage.getItem("crm_token"),pe=await fetch(`${Y}/business-types`,{headers:{Authorization:`Bearer ${Z}`}});if(pe.ok){const Q=await pe.json();t(Q)}}catch(Z){console.error("Error fetching business types:",Z),O.error("Error cargando tipos de negocio")}finally{n(!1)}},$=async Z=>{Z.preventDefault();try{const pe=localStorage.getItem("crm_token"),Q=f?`${Y}/business-types/${f.id}`:`${Y}/business-types`;if(!(await fetch(Q,{method:f?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${pe}`},body:JSON.stringify(p)})).ok)throw new Error("Error guardando tipo");O.success(f?"Tipo actualizado":"Tipo creado"),z(),c(!1),m(null),x({name:"",icon:"Building",google_query:"",is_active:!0})}catch(pe){console.error("Error saving:",pe),O.error("Error guardando tipo de negocio")}},W=Z=>{C({isOpen:!0,title:"Eliminar tipo de negocio?",message:"Esta accin borrar este tipo de negocio. Los prospectos asociados perdern su clasificacin.",onConfirm:()=>F(Z)})},F=async Z=>{try{const pe=localStorage.getItem("crm_token");if(!(await fetch(`${Y}/business-types/${Z}`,{method:"DELETE",headers:{Authorization:`Bearer ${pe}`}})).ok)throw new Error("Error deleting");O.success("Tipo eliminado"),z()}catch(pe){console.error("Error deleting:",pe),O.error("Error eliminando tipo")}finally{C({...S,isOpen:!1})}},G=async()=>{if(v){N(!0);try{const Z=localStorage.getItem("crm_token"),pe=await fetch(`${Y}/business-types/ai-suggest`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Z}`},body:JSON.stringify({topic:v})});if(pe.ok){const Q=await pe.json();w(Q)}}catch(Z){console.error("Error AI suggest:",Z),O.error("Error generando sugerencias")}finally{N(!1)}}},ee=Z=>{x({name:Z.name,icon:Z.icon||"Store",google_query:Z.google_query,is_active:!0}),u(!1),c(!0)},K=e.filter(Z=>Z.name.toLowerCase().includes(a.toLowerCase())),oe=({name:Z,className:pe})=>{const Q=A[Z]||Xn;return s.jsx(Q,{className:pe})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"relative flex-1 max-w-sm",children:[s.jsx("input",{type:"text",placeholder:"Buscar tipos...",value:a,onChange:Z=>i(Z.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500"}),s.jsx(Ls,{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition flex items-center space-x-2",children:[s.jsx(xv,{className:"w-5 h-5"}),s.jsx("span",{children:"Asistente IA"})]}),s.jsxs("button",{onClick:()=>{m(null),x({name:"",icon:"Store",google_query:"",is_active:!0}),c(!0)},className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition flex items-center space-x-2",children:[s.jsx(xr,{className:"w-5 h-5"}),s.jsx("span",{children:"Nuevo Tipo"})]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:K.map(Z=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-orange-100 dark:bg-orange-900/30 rounded-lg flex items-center justify-center text-orange-600 dark:text-orange-400",children:s.jsx(oe,{name:Z.icon,className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:Z.name}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 max-w-[150px] truncate",title:Z.google_query,children:Z.google_query})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>{m(Z),x(Z),c(!0)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-gray-500 hover:text-blue-600 transition",children:s.jsx(jA,{className:"w-4 h-4"})}),s.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>W(Z.id),className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:s.jsx(Ar,{className:"w-4 h-4"})})]})]},Z.id))}),o&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl w-full max-w-md shadow-2xl",children:[s.jsx("h2",{className:"text-xl font-bold mb-4 dark:text-white",children:f?"Editar Tipo":"Nuevo Tipo de Negocio"}),s.jsxs("form",{onSubmit:$,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Nombre"}),s.jsx("input",{type:"text",value:p.name,onChange:Z=>x({...p,name:Z.target.value}),className:"w-full p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Icono"}),s.jsx("div",{className:"grid grid-cols-6 gap-2 p-2 border rounded-lg dark:border-gray-600 max-h-32 overflow-y-auto",children:Object.keys(A).map(Z=>s.jsx("button",{type:"button",onClick:()=>x({...p,icon:Z}),className:`p-2 rounded-lg flex justify-center ${p.icon===Z?"bg-orange-100 text-orange-600":"hover:bg-gray-100 dark:hover:bg-gray-700 dark:text-gray-300"}`,title:Z,children:s.jsx(oe,{name:Z,className:"w-5 h-5"})},Z))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Query de Bsqueda (Google Maps)"}),s.jsx("input",{type:"text",value:p.google_query,onChange:Z=>x({...p,google_query:Z.target.value}),placeholder:"ej: restaurant food dining",className:"w-full p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Palabras clave en ingls/espaol para mejorar resultados en Maps"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg dark:text-gray-300 dark:hover:bg-gray-700",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700",children:"Guardar"})]})]})]})}),d&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl w-full max-w-lg shadow-2xl",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-xl font-bold dark:text-white flex items-center",children:[s.jsx(xv,{className:"w-5 h-5 mr-2 text-purple-600"}),"Asistente IA"]}),s.jsx("button",{onClick:()=>u(!1),children:s.jsx(Rr,{className:"w-5 h-5 text-gray-500"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Qu tipo de negocios buscas?"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"text",value:v,onChange:Z=>y(Z.target.value),placeholder:"Ej: vida nocturna, mascotas, salud...",className:"flex-1 p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{onClick:G,disabled:b||!v,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:b?"Pensando...":"Sugerir"})]})]}),_.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 mb-2",children:"Sugerencias encontradas:"}),s.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:_.map((Z,pe)=>s.jsxs("button",{onClick:()=>ee(Z),className:"w-full text-left p-3 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/20 transition flex items-center justify-between group",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(oe,{name:Z.icon,className:"w-5 h-5 text-gray-500 group-hover:text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium dark:text-white",children:Z.name}),s.jsx("p",{className:"text-xs text-gray-500",children:Z.google_query})]})]}),s.jsx(xr,{className:"w-4 h-4 text-purple-600 opacity-0 group-hover:opacity-100"})]},pe))})]})]})]})}),s.jsx(Dr,{isOpen:S.isOpen,onClose:()=>C({...S,isOpen:!1}),title:S.title,size:"sm",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:S.message}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx(Ne,{variant:"outline",onClick:()=>C({...S,isOpen:!1}),children:"Cancelar"}),s.jsx(Ne,{className:"bg-red-600 hover:bg-red-700 text-white",onClick:S.onConfirm,children:"Eliminar"})]})]})})]})},Pv=()=>{const[e,t]=E.useState([]),[r,n]=E.useState(!0),[a,i]=E.useState(null),[o,c]=E.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),d=Ht(),u=[{name:"Target",icon:To},{name:"Scale",icon:BA},{name:"Laptop",icon:FL},{name:"Spy",icon:SL},{name:"Zap",icon:fr},{name:"Store",icon:Xn},{name:"Briefcase",icon:Po},{name:"Search",icon:Ls},{name:"Sparkles",icon:ir},{name:"MessageSquare",icon:Wr}];E.useEffect(()=>{f()},[]);const f=async()=>{try{const y=localStorage.getItem("crm_token"),_=await fetch(`${Y}/hunter-strategies`,{headers:{Authorization:`Bearer ${y}`}});_.ok&&t(await _.json())}catch(y){console.error("Error loading strategies:",y)}finally{n(!1)}},m=async y=>{y.preventDefault();try{const _=localStorage.getItem("crm_token"),w=a.id?`${Y}/hunter-strategies/${a.id}`:`${Y}/hunter-strategies`,b=a.id?"PUT":"POST";(await fetch(w,{method:b,headers:{Authorization:`Bearer ${_}`,"Content-Type":"application/json"},body:JSON.stringify(a)})).ok?(d.success(a.id?"Estrategia actualizada":"Estrategia creada"),i(null),f()):d.error("Error al guardar estrategia")}catch{d.error("Error de conexin")}},p=y=>{c({isOpen:!0,title:"Eliminar estrategia?",message:"Eliminar esta estrategia podra afectar a los anlisis futuros. Ests seguro?",onConfirm:()=>x(y)})},x=async y=>{try{const _=localStorage.getItem("crm_token");(await fetch(`${Y}/hunter-strategies/${y}`,{method:"DELETE",headers:{Authorization:`Bearer ${_}`}})).ok?(d.success("Estrategia eliminada"),f()):d.error("No se pudo eliminar")}catch{d.error("Error de conexin")}finally{c({...o,isOpen:!1})}},v=y=>{var w;const _=((w=u.find(b=>b.name===y))==null?void 0:w.icon)||To;return s.jsx(_,{className:"w-5 h-5"})};return r?s.jsx("div",{className:"p-4 text-center",children:"Cargando estrategias..."}):a?s.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:a.id?"Editar Estrategia":"Nueva Estrategia IA"}),s.jsx("button",{onClick:()=>i(null),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Rr,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:m,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre de la Estrategia"}),s.jsx("input",{type:"text",required:!0,value:a.name||"",onChange:y=>i({...a,name:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-orange-500",placeholder:"Ej: Venta Agresiva, Novedades 2025..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Icono"}),s.jsx("select",{value:a.icon||"Target",onChange:y=>i({...a,icon:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",children:u.map(y=>s.jsx("option",{value:y.name,children:y.name},y.name))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Descripcin Corta"}),s.jsx("input",{type:"text",value:a.description||"",onChange:y=>i({...a,description:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"Breve explicacin para el usuario..."})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 flex items-center gap-2",children:["Instrucciones del Sistema (Prompt)",s.jsx("span",{className:"text-xs text-gray-500 font-normal",children:"(Define cmo debe actuar la IA)"})]}),s.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-1 focus-within:ring-2 focus-within:ring-orange-500 bg-white dark:bg-gray-700",children:s.jsx("textarea",{required:!0,value:a.prompt_template||"",onChange:y=>i({...a,prompt_template:y.target.value}),rows:8,className:"w-full px-3 py-2 border-none bg-transparent dark:text-white focus:ring-0 resize-y text-sm font-mono",placeholder:"Instrucciones detalladas para Gemini..."})})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[s.jsx(Ne,{type:"button",variant:"outline",onClick:()=>i(null),children:"Cancelar"}),s.jsxs(Ne,{type:"submit",children:[s.jsx(Es,{className:"w-4 h-4 mr-2"}),"Guardar Estrategia"]})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center bg-purple-50 dark:bg-purple-900/20 p-4 rounded-xl border border-purple-100 dark:border-purple-800",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-800 rounded-lg text-purple-600 dark:text-purple-300",children:s.jsx(fr,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-900 dark:text-white",children:"Estrategias de IA"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Define cmo la IA analiza y contacta a los prospectos."})]})]}),s.jsxs(Ne,{onClick:()=>i({name:"",icon:"Target",prompt_template:""}),children:[s.jsx(xr,{className:"w-4 h-4 mr-2"}),"Nueva Estrategia"]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.map(y=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl hover:shadow-md transition-all",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`p-3 rounded-xl ${y.is_active?"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300":"bg-red-50 text-red-400"}`,children:v(y.icon)}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[y.name,y.is_system&&s.jsx("span",{className:"px-2 py-0.5 text-xs bg-blue-50 text-blue-600 border border-blue-100 rounded-full",children:"Sistema"})]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 max-w-md truncate",children:y.description||"Sin descripcin"})]})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>i(y),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-lg dark:hover:bg-blue-900/30 dark:text-blue-400",title:"Editar estrategia",children:s.jsx(xw,{className:"w-4 h-4"})}),!y.is_system&&s.jsx("button",{onClick:()=>p(y.id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-lg dark:hover:bg-red-900/30 dark:text-red-400",title:"Eliminar estrategia",children:s.jsx(Ar,{className:"w-4 h-4"})})]})})]},y.id)),e.length===0&&s.jsx("div",{className:"text-center py-8 text-gray-500 bg-gray-50 dark:bg-gray-800 rounded-xl border border-dashed border-gray-300",children:"No hay estrategias personalizadas definidas."})]}),s.jsx(Dr,{isOpen:o.isOpen,onClose:()=>c({...o,isOpen:!1}),title:o.title,size:"sm",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:o.message}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx(Ne,{variant:"outline",onClick:()=>c({...o,isOpen:!1}),children:"Cancelar"}),s.jsx(Ne,{className:"bg-red-600 hover:bg-red-700 text-white",onClick:o.onConfirm,children:"Eliminar"})]})]})})]})},P8=()=>{var v,y;const[e,t]=E.useState("general"),r=[{id:"general",label:"General",icon:s.jsx(Wg,{className:"w-5 h-5"})},{id:"company",label:"Datos Empresa",icon:s.jsx(nd,{className:"w-5 h-5"})},{id:"users",label:"Usuarios",icon:s.jsx(pr,{className:"w-5 h-5"})},{id:"statuses",label:"Estados",icon:s.jsx(hf,{className:"w-5 h-5"})},{id:"automation",label:"Automatizacin",icon:s.jsx(Jk,{className:"w-5 h-5"})},{id:"lead_hunter",label:"Lead Hunter",icon:s.jsx(Ls,{className:"w-5 h-5"})},{id:"business_types",label:"Tipos de Negocio",icon:s.jsx(Xn,{className:"w-5 h-5"})},{id:"strategy_ia",label:"Estrategia IA",icon:s.jsx(Jk,{className:"w-5 h-5"})},{id:"invoices",label:"Facturacin",icon:s.jsx(It,{className:"w-5 h-5"})},{id:"integrations",label:"Integraciones",icon:s.jsx(sj,{className:"w-5 h-5"})},{id:"email_templates",label:"Plantillas Email",icon:s.jsx(Tt,{className:"w-5 h-5"})},{id:"proposal_templates",label:"Plantillas Propuestas",icon:s.jsx(It,{className:"w-5 h-5"})},{id:"smtp",label:"Email (SMTP)",icon:s.jsx(Tt,{className:"w-5 h-5"})},{id:"webhooks",label:"Webhooks",icon:s.jsx(bs,{className:"w-5 h-5"})},{id:"notifications",label:"Notificaciones",icon:s.jsx(t4,{className:"w-5 h-5"})}],[n,a]=E.useState({api_url:"",frontend_url:"",demo_url:"",chat_title:"Soporte NoahPro",chat_welcome_message:"Hola! En qu podemos ayudarte hoy?",chat_primary_color:"#f97316",chat_enabled:!0,pusher_app_id:"",pusher_key:"",pusher_secret:"",pusher_cluster:"eu",company_name:"",company_address:"",company_city:"",company_postal_code:"",company_nif:"",company_phone:"",company_email:"",company_website:"",company_logo:"",smtp_host:"",smtp_port:587,smtp_user:"",smtp_password:"",smtp_secure:!0,smtp_from_name:"NoahPro CRM",smtp_from_email:""}),[i,o]=E.useState(!0),[c,d]=E.useState(!1),[u,f]=E.useState({type:"",text:""});E.useEffect(()=>{m()},[]);const m=async()=>{try{const _=localStorage.getItem("crm_token"),w=await fetch(`${Y}/settings`,{headers:{Authorization:`Bearer ${_}`}});if(!w.ok)throw new Error("Error al cargar configuracin");const b=await w.json();a({demo_url:b.demo_url||"",chat_title:b.chat_title||"Soporte NoahPro",chat_welcome_message:b.chat_welcome_message||"Hola! En qu podemos ayudarte hoy?",chat_primary_color:b.chat_primary_color||"#f97316",chat_enabled:b.chat_enabled!==void 0?b.chat_enabled:!0,pusher_app_id:b.pusher_app_id||"",pusher_key:b.pusher_key||"",pusher_secret:b.pusher_secret||"",pusher_cluster:b.pusher_cluster||"eu",company_name:b.company_name||"",company_address:b.company_address||"",company_city:b.company_city||"",company_postal_code:b.company_postal_code||"",company_nif:b.company_nif||"",company_phone:b.company_phone||"",company_email:b.company_email||"",company_website:b.company_website||"",company_logo:b.company_logo||"",smtp_host:b.smtp_host||"",smtp_port:b.smtp_port||587,smtp_user:b.smtp_user||"",smtp_password:b.smtp_password||"",smtp_secure:b.smtp_secure!==void 0?b.smtp_secure:!0,smtp_from_name:b.smtp_from_name||"NoahPro CRM",smtp_from_email:b.smtp_from_email||""})}catch(_){console.error("Error fetching settings:",_),f({type:"error",text:"Error al cargar la configuracin"})}finally{o(!1)}},p=_=>{const{name:w,value:b,type:N,checked:S}=_.target;a(C=>({...C,[w]:N==="checkbox"?S:b}))},x=async _=>{_.preventDefault(),d(!0),f({type:"",text:""});try{const w=localStorage.getItem("crm_token");if(!(await fetch(`${Y}/settings`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${w}`},body:JSON.stringify(n)})).ok)throw new Error("Error al guardar");f({type:"success",text:"Configuracin guardada correctamente"}),setTimeout(()=>f({type:"",text:""}),3e3)}catch(w){console.error("Error saving settings:",w),f({type:"error",text:"Error al guardar la configuracin"})}finally{d(!1)}};return i?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})}):s.jsxs("div",{className:"flex flex-col md:flex-row gap-6 min-h-[600px]",children:[s.jsx("div",{className:"w-full md:w-64 flex-shrink-0",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden sticky top-6",children:[s.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Configuracin"})}),s.jsx("nav",{className:"p-2 space-y-1",children:r.map(_=>s.jsxs("button",{onClick:()=>t(_.id),className:`w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all ${e===_.id?"bg-orange-50 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[_.icon,s.jsx("span",{children:_.label})]},_.id))})]})}),s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 min-h-full",children:[s.jsxs("div",{className:"md:hidden p-4 border-b border-gray-200 dark:border-gray-700 flex items-center space-x-2",children:[(v=r.find(_=>_.id===e))==null?void 0:v.icon,s.jsx("h2",{className:"font-bold text-gray-900 dark:text-white",children:(y=r.find(_=>_.id===e))==null?void 0:y.label})]}),s.jsxs("div",{className:"p-6",children:[e==="users"&&s.jsx(N8,{}),e==="statuses"&&s.jsx(_8,{}),e==="automation"&&s.jsx(k8,{}),e==="lead_hunter"&&s.jsx(yP,{}),e==="business_types"&&s.jsx(vP,{}),e==="strategy_ia"&&s.jsx(Pv,{}),e==="invoices"&&s.jsx(C8,{}),e==="integrations"&&s.jsx(j8,{}),e==="email_templates"&&s.jsx(S8,{}),e==="proposal_templates"&&s.jsx(w8,{}),e==="webhooks"&&s.jsx(E8,{}),e==="smtp"&&s.jsx("div",{className:"space-y-8",children:s.jsx("form",{onSubmit:x,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center space-x-2 mb-4",children:[s.jsx(Tt,{className:"w-5 h-5 text-gray-500"}),s.jsx("span",{children:"Configuracin SMTP (Envo de Emails)"})]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"Configura el servidor de correo para enviar facturas y comprobantes."}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Servidor SMTP (Host)"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ye,{name:"smtp_host",value:n.smtp_host,onChange:p,placeholder:"smtp.gmail.com"}),s.jsx(jl,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Puerto"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ye,{type:"number",name:"smtp_port",value:n.smtp_port,onChange:p,placeholder:"587"}),s.jsx(sj,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Seguridad (SSL/TLS)"}),s.jsx("div",{className:"flex items-center space-x-2 mt-2",children:s.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",name:"smtp_secure",checked:n.smtp_secure,onChange:_=>a(w=>({...w,smtp_secure:_.target.checked})),className:"form-checkbox h-5 w-5 text-orange-500 rounded border-gray-300 focus:ring-orange-500"}),s.jsx("span",{className:"ml-2 text-gray-700 dark:text-gray-300",children:"Usar conexin segura"})]})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Usuario SMTP"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ye,{name:"smtp_user",value:n.smtp_user,onChange:p,placeholder:"usuario@dominio.com"}),s.jsx(pr,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Contrasea SMTP"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ye,{type:"password",name:"smtp_password",value:n.smtp_password,onChange:p,placeholder:"********"}),s.jsx(qp,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre del Remitente"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ye,{name:"smtp_from_name",value:n.smtp_from_name,onChange:p,placeholder:"Mi Empresa"}),s.jsx(pr,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email del Remitente"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ye,{type:"email",name:"smtp_from_email",value:n.smtp_from_email,onChange:p,placeholder:"no-reply@dominio.com"}),s.jsx(Tt,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]})]}),s.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[s.jsxs("h4",{className:"text-sm font-semibold text-blue-800 dark:text-blue-300 mb-3 flex items-center space-x-2",children:[s.jsx(Tt,{className:"w-4 h-4"}),s.jsx("span",{children:"Probar Configuracin SMTP"})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[s.jsx("div",{className:"flex-1",children:s.jsx(Ye,{type:"email",name:"test_email",value:n.test_email||"",onChange:p,placeholder:"correo@ejemplo.com"})}),s.jsxs("button",{type:"button",onClick:async()=>{if(!n.test_email){alert("Introduce un correo para enviar la prueba");return}try{const _=localStorage.getItem("crm_token"),w=await fetch(`${Y}/settings/test-email`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`},body:JSON.stringify({email:n.test_email,smtp_config:{host:n.smtp_host,port:n.smtp_port,secure:n.smtp_secure,user:n.smtp_user,password:n.smtp_password,from_name:n.smtp_from_name,from_email:n.smtp_from_email}})}),b=await w.json();w.ok?alert(" Correo de prueba enviado correctamente"):alert(" Error: "+(b.error||"No se pudo enviar el correo"))}catch(_){alert(" Error de conexin: "+_.message)}},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2 whitespace-nowrap",children:[s.jsx(Tt,{className:"w-4 h-4"}),s.jsx("span",{children:"Enviar Correo de Prueba"})]})]}),s.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-2",children:"Enva un correo de prueba para verificar que la configuracin SMTP es correcta."})]})]}),s.jsx("div",{className:"flex justify-end pt-4 sticky bottom-0 bg-white dark:bg-gray-800 p-4 border-t border-gray-100 dark:border-gray-700 -mx-6 -mb-6 rounded-b-xl",children:s.jsxs("button",{type:"submit",disabled:c,className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2 disabled:opacity-50",children:[s.jsx(Es,{className:"w-4 h-4"}),s.jsx("span",{children:c?"Guardando...":"Guardar Cambios"})]})})]})})}),e==="notifications"&&s.jsx("div",{className:"space-y-8",children:s.jsx("form",{onSubmit:x,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center space-x-2 mb-4",children:[s.jsx(aj,{className:"w-5 h-5 text-gray-500"}),s.jsx("span",{children:"Pusher (Tiempo Real)"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"App ID"}),s.jsx(Ye,{name:"pusher_app_id",value:n.pusher_app_id||"",onChange:p,placeholder:"Ej: 1234567"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Key"}),s.jsx(Ye,{name:"pusher_key",value:n.pusher_key||"",onChange:p,placeholder:"Ej: a1b2c3d4e5..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Secret"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ye,{name:"pusher_secret",type:"password",value:n.pusher_secret||"",onChange:p,placeholder:"Ej: f9e8d7c6b5..."}),s.jsx(qp,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cluster"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ye,{name:"pusher_cluster",value:n.pusher_cluster||"",onChange:p,placeholder:"Ej: eu"}),s.jsx(jl,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]})]})]}),u.text&&s.jsxs("div",{className:`p-4 rounded-lg flex items-center space-x-2 ${u.type==="success"?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`,children:[u.type==="success"?s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}):s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),s.jsx("span",{children:u.text})]}),s.jsx("div",{className:"flex justify-end pt-4 sticky bottom-0 bg-white dark:bg-gray-800 p-4 border-t border-gray-100 dark:border-gray-700 -mx-6 -mb-6 rounded-b-xl",children:s.jsxs("button",{type:"submit",disabled:c,className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2 disabled:opacity-50",children:[s.jsx(Es,{className:"w-4 h-4"}),s.jsx("span",{children:c?"Guardando...":"Guardar Cambios"})]})})]})})}),e==="company"&&s.jsx("div",{className:"space-y-8",children:s.jsx("form",{onSubmit:x,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center space-x-2 mb-4",children:[s.jsx(nd,{className:"w-5 h-5 text-gray-500"}),s.jsx("span",{children:"Datos Fiscales y de Contacto"})]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"Esta informacin aparecer en tus facturas y documentos."}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre Fiscal / Razn Social"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ye,{name:"company_name",value:n.company_name,onChange:p,placeholder:"Ej: Mi Empresa S.L."}),s.jsx(nd,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"NIF / CIF"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ye,{name:"company_nif",value:n.company_nif,onChange:p,placeholder:"Ej: B12345678"}),s.jsx(hL,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Telfono"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ye,{name:"company_phone",value:n.company_phone,onChange:p,placeholder:"Ej: +34 900 000 000"}),s.jsx(Kn,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Direccin"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ye,{name:"company_address",value:n.company_address,onChange:p,placeholder:"Calle Principal 123"}),s.jsx(Lc,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cdigo Postal"}),s.jsx(Ye,{name:"company_postal_code",value:n.company_postal_code,onChange:p,placeholder:"28000"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ciudad"}),s.jsx(Ye,{name:"company_city",value:n.company_city,onChange:p,placeholder:"Madrid"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email de Contacto"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ye,{type:"email",name:"company_email",value:n.company_email,onChange:p,placeholder:"facturacion@miempresa.com"}),s.jsx(Tt,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sitio Web"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ye,{type:"url",name:"company_website",value:n.company_website,onChange:p,placeholder:"https://miempresa.com"}),s.jsx(bs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"URL del Logo"}),s.jsx(Ye,{type:"url",name:"company_logo",value:n.company_logo,onChange:p,placeholder:"https://miempresa.com/logo.png"}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"URL pblica de la imagen de tu logo."})]})]})]}),u.text&&s.jsxs("div",{className:`p-4 rounded-lg flex items-center space-x-2 ${u.type==="success"?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`,children:[u.type==="success"?s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}):s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),s.jsx("span",{children:u.text})]}),s.jsx("div",{className:"flex justify-end pt-4 sticky bottom-0 bg-white dark:bg-gray-800 p-4 border-t border-gray-100 dark:border-gray-700 -mx-6 -mb-6 rounded-b-xl",children:s.jsxs("button",{type:"submit",disabled:c,className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2 disabled:opacity-50",children:[s.jsx(Es,{className:"w-4 h-4"}),s.jsx("span",{children:c?"Guardando...":"Guardar Cambios"})]})})]})})}),e==="general"&&s.jsx("div",{className:"space-y-8",children:s.jsxs("form",{onSubmit:x,children:[s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center space-x-2 mb-4",children:[s.jsx(jl,{className:"w-5 h-5 text-gray-500"}),s.jsx("span",{children:"URLs del Sistema"})]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"Configura las URLs de la API y del frontend. Estas URLs se usan para la comunicacin entre el frontend y el backend."}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"URL de la API"}),s.jsx("div",{className:"flex space-x-2",children:s.jsx(Ye,{name:"api_url",type:"url",value:n.api_url||Y,onChange:p,placeholder:"https://noahpro.es/api",className:"flex-1"})}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["URL actual: ",Y]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"URL del Frontend"}),s.jsx(Ye,{name:"frontend_url",type:"url",value:n.frontend_url||window.location.origin,onChange:p,placeholder:"https://noahpro.es"}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["URL actual: ",window.location.origin]})]})]}),s.jsx("div",{className:"mt-4",children:s.jsxs("button",{type:"button",onClick:async()=>{f({type:"",text:""});try{const _=n.api_url||Y,w=await fetch(`${_}/settings/public`);if(w.ok){const b=await w.json();f({type:"success",text:` Conexin exitosa! API respondi correctamente. Chat: ${b.chat_enabled?"Habilitado":"Deshabilitado"}`})}else f({type:"error",text:` Error: La API respondi con cdigo ${w.status}`})}catch(_){f({type:"error",text:` Error de conexin: ${_.message}. Verifica que la URL de la API sea correcta.`})}},className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors space-x-2",children:[s.jsx(aj,{className:"w-4 h-4"}),s.jsx("span",{children:"Probar Conexin"})]})})]})}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6 mt-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center space-x-2 mb-4",children:[s.jsx(bs,{className:"w-5 h-5 text-gray-500"}),s.jsx("span",{children:"Configuracin Web"})]}),s.jsx("div",{className:"grid gap-6",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:'URL del Botn "Ver Demo"'}),s.jsx(Ye,{name:"demo_url",type:"url",value:n.demo_url,onChange:p,placeholder:"https://tu-dominio.com/demo",required:!0})]})})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center space-x-2 mb-4",children:[s.jsx(Wr,{className:"w-5 h-5 text-gray-500"}),s.jsx("span",{children:"Chat en Vivo"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center p-4 bg-gray-50 dark:bg-gray-700/30 rounded-lg border border-gray-200 dark:border-gray-700",children:[s.jsx("input",{type:"checkbox",id:"chat_enabled",name:"chat_enabled",checked:n.chat_enabled,onChange:p,className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"chat_enabled",className:"ml-3 block text-sm font-medium text-gray-900 dark:text-white",children:"Habilitar Chat en Landing Page"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ttulo del Chat"}),s.jsx(Ye,{name:"chat_title",value:n.chat_title,onChange:p,placeholder:"Soporte"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Mensaje de Bienvenida"}),s.jsx("textarea",{name:"chat_welcome_message",value:n.chat_welcome_message,onChange:p,rows:"3",className:"w-full rounded-lg border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color Principal"}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"color",name:"chat_primary_color",value:n.chat_primary_color,onChange:p,className:"h-10 w-20 rounded border border-gray-300 cursor-pointer"}),s.jsx("span",{className:"text-sm font-mono text-gray-500",children:n.chat_primary_color})]})]})]}),s.jsxs("div",{className:"bg-gray-100 dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 p-6 flex items-center justify-center relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-2 left-2 text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Vista Previa"}),n.chat_enabled?s.jsxs("div",{className:"w-72 bg-white dark:bg-gray-800 rounded-t-xl shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden mt-8",children:[s.jsxs("div",{className:"p-3 flex justify-between items-center text-white",style:{backgroundColor:n.chat_primary_color},children:[s.jsx("span",{className:"font-bold text-sm",children:n.chat_title}),s.jsx("span",{className:"text-xs opacity-80",children:""})]}),s.jsxs("div",{className:"h-48 bg-gray-50 dark:bg-gray-900 p-3 flex flex-col",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 p-2 rounded-lg rounded-tl-none shadow-sm max-w-[85%] self-start mb-3",children:s.jsx("p",{className:"text-xs text-gray-800 dark:text-gray-200",children:n.chat_welcome_message})}),s.jsx("div",{className:"bg-orange-100 dark:bg-orange-900/30 p-2 rounded-lg rounded-tr-none shadow-sm max-w-[85%] self-end mb-3",children:s.jsx("p",{className:"text-xs text-gray-800 dark:text-gray-200",children:"Hola, me gustara saber ms..."})})]}),s.jsx("div",{className:"p-2 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:s.jsx("div",{className:"h-8 bg-gray-100 dark:bg-gray-700 rounded-full w-full"})})]}):s.jsx("div",{className:"text-gray-400 text-sm italic",children:"Chat deshabilitado"})]})]})]}),u.text&&s.jsxs("div",{className:`p-4 rounded-lg flex items-center space-x-2 ${u.type==="success"?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`,children:[u.type==="success"?s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}):s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),s.jsx("span",{children:u.text})]}),s.jsx("div",{className:"flex justify-end pt-4 sticky bottom-0 bg-white dark:bg-gray-800 p-4 border-t border-gray-100 dark:border-gray-700 -mx-6 -mb-6 rounded-b-xl",children:s.jsxs("button",{type:"submit",disabled:c,className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2 disabled:opacity-50",children:[s.jsx(Es,{className:"w-4 h-4"}),s.jsx("span",{children:c?"Guardando...":"Guardar Cambios"})]})})]})})]})]})})]})},Ta=Object.create(null);Ta.open="0";Ta.close="1";Ta.ping="2";Ta.pong="3";Ta.message="4";Ta.upgrade="5";Ta.noop="6";const np=Object.create(null);Object.keys(Ta).forEach(e=>{np[Ta[e]]=e});const Tv={type:"error",data:"parser error"},bP=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",wP=typeof ArrayBuffer=="function",_P=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Rw=({type:e,data:t},r,n)=>bP&&t instanceof Blob?r?n(t):jN(t,n):wP&&(t instanceof ArrayBuffer||_P(t))?r?n(t):jN(new Blob([t]),n):n(Ta[e]+(t||"")),jN=(e,t)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];t("b"+(n||""))},r.readAsDataURL(e)};function NN(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Yx;function T8(e,t){if(bP&&e.data instanceof Blob)return e.data.arrayBuffer().then(NN).then(t);if(wP&&(e.data instanceof ArrayBuffer||_P(e.data)))return t(NN(e.data));Rw(e,!1,r=>{Yx||(Yx=new TextEncoder),t(Yx.encode(r))})}const SN="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<SN.length;e++)Vu[SN.charCodeAt(e)]=e;const M8=e=>{let t=e.length*.75,r=e.length,n,a=0,i,o,c,d;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),f=new Uint8Array(u);for(n=0;n<r;n+=4)i=Vu[e.charCodeAt(n)],o=Vu[e.charCodeAt(n+1)],c=Vu[e.charCodeAt(n+2)],d=Vu[e.charCodeAt(n+3)],f[a++]=i<<2|o>>4,f[a++]=(o&15)<<4|c>>2,f[a++]=(c&3)<<6|d&63;return u},O8=typeof ArrayBuffer=="function",zw=(e,t)=>{if(typeof e!="string")return{type:"message",data:kP(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:D8(e.substring(1),t)}:np[r]?e.length>1?{type:np[r],data:e.substring(1)}:{type:np[r]}:Tv},D8=(e,t)=>{if(O8){const r=M8(e);return kP(r,t)}else return{base64:!0,data:e}},kP=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},jP="",L8=(e,t)=>{const r=e.length,n=new Array(r);let a=0;e.forEach((i,o)=>{Rw(i,!1,c=>{n[o]=c,++a===r&&t(n.join(jP))})})},A8=(e,t)=>{const r=e.split(jP),n=[];for(let a=0;a<r.length;a++){const i=zw(r[a],t);if(n.push(i),i.type==="error")break}return n};function R8(){return new TransformStream({transform(e,t){T8(e,r=>{const n=r.length;let a;if(n<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,n);else if(n<65536){a=new Uint8Array(3);const i=new DataView(a.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{a=new Uint8Array(9);const i=new DataView(a.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(r)})}})}let Gx;function Sm(e){return e.reduce((t,r)=>t+r.length,0)}function Cm(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let n=0;for(let a=0;a<t;a++)r[a]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function z8(e,t){Gx||(Gx=new TextDecoder);const r=[];let n=0,a=-1,i=!1;return new TransformStream({transform(o,c){for(r.push(o);;){if(n===0){if(Sm(r)<1)break;const d=Cm(r,1);i=(d[0]&128)===128,a=d[0]&127,a<126?n=3:a===126?n=1:n=2}else if(n===1){if(Sm(r)<2)break;const d=Cm(r,2);a=new DataView(d.buffer,d.byteOffset,d.length).getUint16(0),n=3}else if(n===2){if(Sm(r)<8)break;const d=Cm(r,8),u=new DataView(d.buffer,d.byteOffset,d.length),f=u.getUint32(0);if(f>Math.pow(2,21)-1){c.enqueue(Tv);break}a=f*Math.pow(2,32)+u.getUint32(4),n=3}else{if(Sm(r)<a)break;const d=Cm(r,a);c.enqueue(zw(i?d:Gx.decode(d),t)),n=0}if(a===0||a>e){c.enqueue(Tv);break}}}})}const NP=4;function gr(e){if(e)return $8(e)}function $8(e){for(var t in gr.prototype)e[t]=gr.prototype[t];return e}gr.prototype.on=gr.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};gr.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};gr.prototype.off=gr.prototype.removeListener=gr.prototype.removeAllListeners=gr.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,a=0;a<r.length;a++)if(n=r[a],n===t||n.fn===t){r.splice(a,1);break}return r.length===0&&delete this._callbacks["$"+e],this};gr.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,a=r.length;n<a;++n)r[n].apply(this,t)}return this};gr.prototype.emitReserved=gr.prototype.emit;gr.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};gr.prototype.hasListeners=function(e){return!!this.listeners(e).length};const e0=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),js=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),I8="arraybuffer";function SP(e,...t){return t.reduce((r,n)=>(e.hasOwnProperty(n)&&(r[n]=e[n]),r),{})}const F8=js.setTimeout,B8=js.clearTimeout;function t0(e,t){t.useNativeTimers?(e.setTimeoutFn=F8.bind(js),e.clearTimeoutFn=B8.bind(js)):(e.setTimeoutFn=js.setTimeout.bind(js),e.clearTimeoutFn=js.clearTimeout.bind(js))}const H8=1.33;function W8(e){return typeof e=="string"?U8(e):Math.ceil((e.byteLength||e.size)*H8)}function U8(e){let t=0,r=0;for(let n=0,a=e.length;n<a;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}function CP(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function V8(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function q8(e){let t={},r=e.split("&");for(let n=0,a=r.length;n<a;n++){let i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class Y8 extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class $w extends gr{constructor(t){super(),this.writable=!1,t0(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,n){return super.emitReserved("error",new Y8(t,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=zw(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=V8(t);return r.length?"?"+r:""}}class G8 extends $w{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};A8(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,L8(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=CP()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let EP=!1;try{EP=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Z8=EP;function K8(){}class X8 extends G8{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(a,i)=>{this.onError("xhr post error",a,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}class Ca extends gr{constructor(t,r,n){super(),this.createRequest=t,t0(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const r=SP(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&n.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var a;n.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=Ca.requestsCount++,Ca.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=K8,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ca.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ca.requestsCount=0;Ca.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",CN);else if(typeof addEventListener=="function"){const e="onpagehide"in js?"pagehide":"unload";addEventListener(e,CN,!1)}}function CN(){for(let e in Ca.requests)Ca.requests.hasOwnProperty(e)&&Ca.requests[e].abort()}const J8=function(){const e=PP({xdomain:!1});return e&&e.responseType!==null}();class Q8 extends X8{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=J8&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Ca(PP,this.uri(),t)}}function PP(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Z8))return new XMLHttpRequest}catch{}if(!t)try{return new js[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const TP=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class e9 extends $w{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,n=TP?{}:SP(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,n)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],a=r===t.length-1;Rw(n,this.supportsBinary,i=>{try{this.doWrite(n,i)}catch{}a&&e0(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=CP()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const Zx=js.WebSocket||js.MozWebSocket;class t9 extends e9{createSocket(t,r,n){return TP?new Zx(t,r,n):r?new Zx(t,r):new Zx(t)}doWrite(t,r){this.ws.send(r)}}class r9 extends $w{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=z8(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(r).getReader(),a=R8();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const i=()=>{n.read().then(({done:c,value:d})=>{c||(this.onPacket(d),i())}).catch(c=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],a=r===t.length-1;this._writer.write(n).then(()=>{a&&e0(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const n9={websocket:t9,webtransport:r9,polling:Q8},s9=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,a9=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Mv(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),n=e.indexOf("]");r!=-1&&n!=-1&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let a=s9.exec(e||""),i={},o=14;for(;o--;)i[a9[o]]=a[o]||"";return r!=-1&&n!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=i9(i,i.path),i.queryKey=o9(i,i.query),i}function i9(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function o9(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,a,i){a&&(r[a]=i)}),r}const Ov=typeof addEventListener=="function"&&typeof removeEventListener=="function",sp=[];Ov&&addEventListener("offline",()=>{sp.forEach(e=>e())},!1);class jo extends gr{constructor(t,r){if(super(),this.binaryType=I8,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const n=Mv(t);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=Mv(r.host).host);t0(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const a=n.prototype.name;this.transports.push(a),this._transportsByName[a]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=q8(this.opts.query)),Ov&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},sp.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=NP,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&jo.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",jo.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const a=this.writeBuffer[n].data;if(a&&(r+=W8(a)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,e0(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,n){return this._sendPacket("message",t,r,n),this}send(t,r,n){return this._sendPacket("message",t,r,n),this}_sendPacket(t,r,n,a){if(typeof r=="function"&&(a=r,r=void 0),typeof n=="function"&&(a=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:t,data:r,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(jo.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Ov&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=sp.indexOf(this._offlineEventListener);n!==-1&&sp.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}jo.protocol=NP;class l9 extends jo{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),n=!1;jo.priorWebsocketSuccess=!1;const a=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",m=>{if(!n)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;jo.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(f(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=r.name,this.emitReserved("upgradeError",p)}}))};function i(){n||(n=!0,f(),r.close(),r=null)}const o=m=>{const p=new Error("probe error: "+m);p.transport=r.name,i(),this.emitReserved("upgradeError",p)};function c(){o("transport closed")}function d(){o("socket closed")}function u(m){r&&m.name!==r.name&&i()}const f=()=>{r.removeListener("open",a),r.removeListener("error",o),r.removeListener("close",c),this.off("close",d),this.off("upgrading",u)};r.once("open",a),r.once("error",o),r.once("close",c),this.once("close",d),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}}let c9=class extends l9{constructor(t,r={}){const n=typeof t=="object"?t:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(a=>n9[a]).filter(a=>!!a)),super(t,n)}};function d9(e,t="",r){let n=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),n=Mv(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+t,n.href=n.protocol+"://"+i+(r&&r.port===n.port?"":":"+n.port),n}const u9=typeof ArrayBuffer=="function",h9=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,MP=Object.prototype.toString,f9=typeof Blob=="function"||typeof Blob<"u"&&MP.call(Blob)==="[object BlobConstructor]",m9=typeof File=="function"||typeof File<"u"&&MP.call(File)==="[object FileConstructor]";function Iw(e){return u9&&(e instanceof ArrayBuffer||h9(e))||f9&&e instanceof Blob||m9&&e instanceof File}function ap(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(ap(e[r]))return!0;return!1}if(Iw(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return ap(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&ap(e[r]))return!0;return!1}function p9(e){const t=[],r=e.data,n=e;return n.data=Dv(r,t),n.attachments=t.length,{packet:n,buffers:t}}function Dv(e,t){if(!e)return e;if(Iw(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=Dv(e[n],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=Dv(e[n],t));return r}return e}function g9(e,t){return e.data=Lv(e.data,t),delete e.attachments,e}function Lv(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=Lv(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Lv(e[r],t));return e}const x9=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],y9=5;var ht;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(ht||(ht={}));class v9{constructor(t){this.replacer=t}encode(t){return(t.type===ht.EVENT||t.type===ht.ACK)&&ap(t)?this.encodeAsBinary({type:t.type===ht.EVENT?ht.BINARY_EVENT:ht.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===ht.BINARY_EVENT||t.type===ht.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=p9(t),n=this.encodeAsString(r.packet),a=r.buffers;return a.unshift(n),a}}function EN(e){return Object.prototype.toString.call(e)==="[object Object]"}class Fw extends gr{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const n=r.type===ht.BINARY_EVENT;n||r.type===ht.BINARY_ACK?(r.type=n?ht.EVENT:ht.ACK,this.reconstructor=new b9(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Iw(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if(ht[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===ht.BINARY_EVENT||n.type===ht.BINARY_ACK){const i=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const o=t.substring(i,r);if(o!=Number(o)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(t.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(i,r)}else n.nsp="/";const a=t.charAt(r+1);if(a!==""&&Number(a)==a){const i=r+1;for(;++r;){const o=t.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===t.length)break}n.id=Number(t.substring(i,r+1))}if(t.charAt(++r)){const i=this.tryParse(t.substr(r));if(Fw.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case ht.CONNECT:return EN(r);case ht.DISCONNECT:return r===void 0;case ht.CONNECT_ERROR:return typeof r=="string"||EN(r);case ht.EVENT:case ht.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&x9.indexOf(r[0])===-1);case ht.ACK:case ht.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class b9{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=g9(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const w9=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Fw,Encoder:v9,get PacketType(){return ht},protocol:y9},Symbol.toStringTag,{value:"Module"}));function ta(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const _9=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class OP extends gr{constructor(t,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[ta(t,"open",this.onopen.bind(this)),ta(t,"packet",this.onpacket.bind(this)),ta(t,"error",this.onerror.bind(this)),ta(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var n,a,i;if(_9.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const o={type:ht.EVENT,data:r};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const f=this.ids++,m=r.pop();this._registerAckCallback(f,m),o.id=f}const c=(a=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||a===void 0?void 0:a.writable,d=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!c||(d?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,r){var n;const a=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(a===void 0){this.acks[t]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===t&&this.sendBuffer.splice(c,1);r.call(this,new Error("operation has timed out"))},a),o=(...c)=>{this.io.clearTimeoutFn(i),r.apply(this,c)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...r){return new Promise((n,a)=>{const i=(o,c)=>o?a(o):n(c);i.withError=!0,r.push(i),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...i)=>n!==this._queue[0]?void 0:(a!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(a)):(this._queue.shift(),r&&r(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:ht.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case ht.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ht.EVENT:case ht.BINARY_EVENT:this.onevent(t);break;case ht.ACK:case ht.BINARY_ACK:this.onack(t);break;case ht.DISCONNECT:this.ondisconnect();break;case ht.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let n=!1;return function(...a){n||(n=!0,r.packet({type:ht.ACK,id:t,data:a}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ht.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function Fd(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Fd.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};Fd.prototype.reset=function(){this.attempts=0};Fd.prototype.setMin=function(e){this.ms=e};Fd.prototype.setMax=function(e){this.max=e};Fd.prototype.setJitter=function(e){this.jitter=e};class Av extends gr{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,t0(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Fd({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const a=r.parser||w9;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new c9(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const a=ta(r,"open",function(){n.onopen(),t&&t()}),i=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),t?t(c):this.maybeReconnectOnOpen()},o=ta(r,"error",i);if(this._timeout!==!1){const c=this._timeout,d=this.setTimeoutFn(()=>{a(),i(new Error("timeout")),r.close()},c);this.opts.autoUnref&&d.unref(),this.subs.push(()=>{this.clearTimeoutFn(d)})}return this.subs.push(a),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(ta(t,"ping",this.onping.bind(this)),ta(t,"data",this.ondata.bind(this)),ta(t,"error",this.onerror.bind(this)),ta(t,"close",this.onclose.bind(this)),ta(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){e0(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new OP(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Cu={};function ip(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=d9(e,t.path||"/socket.io"),n=r.source,a=r.id,i=r.path,o=Cu[a]&&i in Cu[a].nsps,c=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let d;return c?d=new Av(n,t):(Cu[a]||(Cu[a]=new Av(n,t)),d=Cu[a]),r.query&&!t.query&&(t.query=r.queryKey),d.socket(r.path,t)}Object.assign(ip,{Manager:Av,Socket:OP,io:ip,connect:ip});const k9=()=>{const[e,t]=E.useState([]),[r,n]=E.useState(null),[a,i]=E.useState([]),[o,c]=E.useState(""),[d,u]=E.useState(null),f=E.useRef(null);E.useEffect(()=>{const v=ip(f6);return u(v),v.on("admin_notification",y=>{y.type==="new_message"&&(m(),r&&r.session_id===y.sessionId&&i(_=>[..._,{senderType:"visitor",message:y.message,created_at:new Date().toISOString()}]))}),m(),()=>v.close()},[r]),E.useEffect(()=>{r&&(p(r.session_id),d==null||d.emit("join_room",r.session_id))},[r]),E.useEffect(()=>{var v;(v=f.current)==null||v.scrollIntoView({behavior:"smooth"})},[a]);const m=async()=>{try{const v=await fetch(`${Y}/chat/conversations`);if(v.ok){const y=await v.json();t(y)}}catch(v){console.error("Error fetching conversations:",v)}},p=async v=>{try{const y=await fetch(`${Y}/chat/conversations/${v}/messages`);if(y.ok){const _=await y.json();i(_)}}catch(y){console.error("Error fetching messages:",y)}},x=v=>{if(v.preventDefault(),!o.trim()||!r||!d)return;const y={sessionId:r.session_id,senderType:"admin",senderName:"Agente",message:o,timestamp:new Date};d.emit("send_message",y),i(_=>[..._,{senderType:"admin",message:o,created_at:new Date().toISOString()}]),c("")};return s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[calc(100vh-12rem)]",children:[s.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden flex flex-col",children:[s.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Conversaciones Activas"})}),s.jsx("div",{className:"overflow-y-auto flex-1 p-2 space-y-2",children:e.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay chats activos"}):e.map(v=>s.jsxs("div",{onClick:()=>n(v),className:`p-3 rounded-lg cursor-pointer transition-colors border ${(r==null?void 0:r.id)===v.id?"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800":"hover:bg-gray-50 dark:hover:bg-gray-700/50 border-transparent"}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-1",children:[s.jsxs("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:["Visitante ",v.session_id.substring(0,8)]}),s.jsx("span",{className:"text-xs text-gray-400",children:new Date(v.updated_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:v.last_message||"Nueva conversacin"})]},v.id))})]}),s.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden flex flex-col",children:r?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-gray-900/50",children:s.jsxs("div",{children:[s.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white",children:["Chat con Visitante ",r.session_id.substring(0,8)]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",r.session_id]})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50 dark:bg-gray-900/30 flex flex-col space-y-4",children:[a.map((v,y)=>s.jsx("div",{className:`flex ${v.senderType==="admin"?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`p-3 rounded-2xl shadow-sm max-w-[80%] ${v.senderType==="admin"?"bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-tr-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-tl-none border border-gray-200 dark:border-gray-700"}`,children:[s.jsx("p",{className:"text-sm",children:v.message}),s.jsx("p",{className:`text-[10px] mt-1 ${v.senderType==="admin"?"text-orange-100":"text-gray-400"}`,children:new Date(v.created_at||Date.now()).toLocaleTimeString()})]})},y)),s.jsx("div",{ref:f})]}),s.jsx("form",{onSubmit:x,className:"p-4 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"text",value:o,onChange:v=>c(v.target.value),placeholder:"Escribe una respuesta...",className:"flex-1 rounded-lg border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500"}),s.jsx("button",{type:"submit",disabled:!o.trim(),className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Enviar"})]})})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[s.jsx("span",{className:"text-4xl mb-2",children:""}),s.jsx("p",{children:"Selecciona una conversacin para chatear"})]})})]})},j9=({isOpen:e,onClose:t,onSave:r,event:n=null,leads:a=[]})=>{const[i,o]=E.useState({title:"",description:"",start_time:"",end_time:"",type:"meeting",lead_id:"",created_by:"Admin"}),[c,d]=E.useState({});E.useEffect(()=>{o(n?{title:n.title||"",description:n.description||"",start_time:n.start_time?new Date(n.start_time).toISOString().slice(0,16):"",end_time:n.end_time?new Date(n.end_time).toISOString().slice(0,16):"",type:n.type||"meeting",lead_id:n.lead_id||"",created_by:n.created_by||"Admin"}:{title:"",description:"",start_time:"",end_time:"",type:"meeting",lead_id:"",created_by:"Admin"}),d({})},[n,e]);const u=()=>{const m={};return i.title.trim()||(m.title="El ttulo es requerido"),i.start_time||(m.start_time="La fecha de inicio es requerida"),i.end_time||(m.end_time="La fecha de fin es requerida"),i.start_time&&i.end_time&&new Date(i.start_time)>=new Date(i.end_time)&&(m.end_time="La fecha de fin debe ser posterior a la de inicio"),d(m),Object.keys(m).length===0},f=m=>{m.preventDefault(),u()&&(r(i),t())};return e?s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[9999] p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-4xl w-full shadow-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800 z-10",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:n?"Editar Evento":"Nuevo Evento"}),s.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(Rr,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),s.jsxs("form",{onSubmit:f,className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ttulo *"}),s.jsx("input",{type:"text",value:i.title,onChange:m=>o({...i,title:m.target.value}),className:`w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${c.title?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Ej: Reunin con cliente"}),c.title&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:c.title})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tipo de Evento"}),s.jsxs("select",{value:i.type,onChange:m=>o({...i,type:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"meeting",children:"Reunin"}),s.jsx("option",{value:"call",children:"Llamada"}),s.jsx("option",{value:"demo",children:"Demo"}),s.jsx("option",{value:"followup",children:"Seguimiento"}),s.jsx("option",{value:"other",children:"Otro"})]})]}),a&&a.length>0&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Asociar con Lead (opcional)"}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:i.lead_id,onChange:m=>o({...i,lead_id:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"",children:"Sin asociar"}),a.map(m=>s.jsxs("option",{value:m.id,children:[m.name," - ",m.business_name||"Sin empresa"]},m.id))]}),s.jsx(pr,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha y Hora de Inicio *"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"datetime-local",value:i.start_time,onChange:m=>o({...i,start_time:m.target.value}),className:`w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${c.start_time?"border-red-500":"border-gray-300 dark:border-gray-600"}`}),s.jsx(Ms,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})]}),c.start_time&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:c.start_time})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha y Hora de Fin *"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"datetime-local",value:i.end_time,onChange:m=>o({...i,end_time:m.target.value}),className:`w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${c.end_time?"border-red-500":"border-gray-300 dark:border-gray-600"}`}),s.jsx(Ms,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})]}),c.end_time&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:c.end_time})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),s.jsx("textarea",{value:i.description,onChange:m=>o({...i,description:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:"4",placeholder:"Detalles del evento..."})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all",children:n?"Guardar Cambios":"Crear Evento"})]})]})]})}):null},N9=({compact:e=!1})=>{const[t,r]=E.useState(new Date),[n,a]=E.useState([]),[i,o]=E.useState(null),[c,d]=E.useState(!1),[u,f]=E.useState(null),[m,p]=E.useState([]);E.useEffect(()=>{x(),v()},[t]);const x=async()=>{try{const z=localStorage.getItem("crm_token"),$=await fetch(`${Y}/calendar/events`,{headers:{Authorization:`Bearer ${z}`}});if($.ok){const W=await $.json();W.length===0?a([]):a(W.map(F=>({...F,date:new Date(F.start_time)})))}}catch(z){console.error("Error fetching events:",z),a([])}},v=async()=>{try{const z=localStorage.getItem("crm_token"),$=await fetch(`${Y}/leads`,{headers:{Authorization:`Bearer ${z}`}});if($.ok){const W=await $.json();p(W)}}catch(z){console.error("Error fetching leads:",z)}},y=async z=>{try{const $=u?`${Y}/calendar/events/${u.id}`:`${Y}/calendar/events`,W=u?"PUT":"POST",F=localStorage.getItem("crm_token");(await fetch($,{method:W,headers:{"Content-Type":"application/json",Authorization:`Bearer ${F}`},body:JSON.stringify(z)})).ok&&(x(),f(null))}catch($){console.error("Error saving event:",$)}},_=z=>{const $=z.getFullYear(),W=z.getMonth(),F=new Date($,W,1),ee=new Date($,W+1,0).getDate(),K=F.getDay();return{daysInMonth:ee,startingDayOfWeek:K}},w=z=>n.filter($=>{const W=new Date($.date);return W.getDate()===z.getDate()&&W.getMonth()===z.getMonth()&&W.getFullYear()===z.getFullYear()}),b=()=>{r(new Date(t.getFullYear(),t.getMonth()-1))},N=()=>{r(new Date(t.getFullYear(),t.getMonth()+1))},{daysInMonth:S,startingDayOfWeek:C}=_(t),O=t.toLocaleString("es-ES",{month:"long",year:"numeric"}),A=()=>{const z=[],$=new Date;for(let W=0;W<C;W++)z.push(s.jsx("div",{className:"min-h-[120px] bg-gray-50/30 dark:bg-gray-800/30 border-b border-r border-gray-200 dark:border-gray-700"},`empty-${W}`));for(let W=1;W<=S;W++){const F=new Date(t.getFullYear(),t.getMonth(),W),G=w(F),ee=F.toDateString()===$.toDateString(),K=i&&F.toDateString()===i.toDateString();z.push(s.jsxs("div",{onClick:()=>o(F),className:`min-h-[120px] p-2 border-b border-r border-gray-200 dark:border-gray-700 transition-colors relative group
                        ${ee?"bg-orange-50/50 dark:bg-orange-900/10":"bg-white dark:bg-gray-800"}
                        ${K?"ring-2 ring-inset ring-orange-500 z-10":"hover:bg-gray-50 dark:hover:bg-gray-700"}
                    `,children:[s.jsxs("div",{className:"flex justify-between items-start mb-1",children:[s.jsx("span",{className:`
                            text-sm font-semibold w-7 h-7 flex items-center justify-center rounded-full
                            ${ee?"bg-orange-600 text-white":"text-gray-700 dark:text-gray-300"}
                        `,children:W}),s.jsx("button",{onClick:oe=>{oe.stopPropagation(),f(null),d(!0)},className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full transition-opacity",children:s.jsx(xr,{className:"w-3 h-3 text-gray-500"})})]}),s.jsx("div",{className:"space-y-1 overflow-y-auto max-h-[80px] custom-scrollbar",children:G.map(oe=>s.jsxs("div",{onClick:Z=>{Z.stopPropagation(),f(oe),d(!0)},className:`
                                    text-xs px-2 py-1 rounded cursor-pointer truncate border-l-2 shadow-sm transition-all hover:brightness-95
                                    ${oe.type==="meeting"?"bg-blue-100 text-blue-700 border-blue-500 dark:bg-blue-900/40 dark:text-blue-200":oe.type==="call"?"bg-green-100 text-green-700 border-green-500 dark:bg-green-900/40 dark:text-green-200":oe.type==="demo"?"bg-purple-100 text-purple-700 border-purple-500 dark:bg-purple-900/40 dark:text-purple-200":"bg-gray-100 text-gray-700 border-gray-500 dark:bg-gray-700 dark:text-gray-300"}
                                `,title:`${oe.title} (${new Date(oe.start_time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})`,children:[s.jsx("span",{className:"font-medium mr-1",children:new Date(oe.start_time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),oe.title]},oe.id))})]},W))}return z};return e?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center space-x-2",children:[s.jsx(Al,{className:"w-5 h-5"}),s.jsx("span",{children:"Calendario"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:b,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:s.jsx(Qk,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 capitalize",children:O}),s.jsx("button",{onClick:N,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:s.jsx(pv,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]})]}),s.jsxs("div",{className:"grid grid-cols-7 gap-1 text-xs",children:[["D","L","M","X","J","V","S"].map(z=>s.jsx("div",{className:"text-center font-medium text-gray-500 dark:text-gray-400 p-1",children:z},z)),A()]})]}):s.jsxs("div",{className:"p-4 pb-24",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Calendario"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Gestiona tus reuniones y eventos"})]}),s.jsxs("button",{onClick:()=>{f(null),d(!0)},className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2",children:[s.jsx(xr,{className:"w-4 h-4"}),s.jsx("span",{children:"Nuevo Evento"})]})]}),s.jsxs("div",{className:"flex flex-col gap-6 h-auto lg:h-[600px]",children:[s.jsxs("div",{className:"flex-1 flex flex-col lg:grid lg:grid-cols-3 gap-6 h-auto lg:min-h-0",children:[s.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white capitalize",children:O}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:b,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(Qk,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),s.jsx("button",{onClick:N,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(pv,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]})]}),s.jsx("div",{className:"grid grid-cols-7 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:["Dum","Lun","Mar","Mi","Jue","Vie","Sb"].map(z=>s.jsx("div",{className:"text-center font-semibold text-xs sm:text-sm text-gray-600 dark:text-gray-400 p-2 sm:p-3 border-r last:border-r-0 border-gray-200 dark:border-gray-700",children:z},z))}),s.jsx("div",{className:"flex-1 grid grid-cols-7 auto-rows-fr bg-white dark:bg-gray-800 min-h-[300px]",children:A()})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 sm:p-6 flex flex-col h-64 lg:h-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Prximos Eventos"}),s.jsxs("span",{className:"text-xs font-normal text-gray-500 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full",children:[n.length," total"]})]}),s.jsx("div",{className:"space-y-3 overflow-y-auto flex-1 pr-2 custom-scrollbar",children:n.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500 text-sm",children:"No hay eventos prximos"}):n.slice(0,5).map(z=>s.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors cursor-pointer border border-gray-100 dark:border-gray-600",onClick:()=>{f(z),d(!0)},children:[s.jsx("div",{className:"flex justify-between items-start",children:s.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm line-clamp-1",children:z.title})}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 flex items-center gap-1",children:[s.jsx(Al,{className:"w-3 h-3"}),new Date(z.date).toLocaleString("es-ES",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})]})]},z.id))}),s.jsxs("button",{onClick:()=>{f(null),d(!0)},className:"mt-4 w-full py-2 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-600 dark:text-gray-300 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2",children:[s.jsx(xr,{className:"w-4 h-4"}),"Nuevo Evento"]})]})]}),c&&Hg.createPortal(s.jsx(j9,{isOpen:c,onClose:()=>{d(!1),f(null)},onSave:y,event:u,leads:m}),document.body)]})]})},S9=({isOpen:e,onClose:t,onSave:r,task:n=null})=>{const[a,i]=E.useState({title:"",description:"",priority:"medium",due_date:"",assigned_to:""}),[o,c]=E.useState({});E.useEffect(()=>{i(n?{title:n.title||"",description:n.description||"",priority:n.priority||"medium",due_date:n.due_date?new Date(n.due_date).toISOString().slice(0,16):"",assigned_to:n.assigned_to||""}:{title:"",description:"",priority:"medium",due_date:"",assigned_to:""}),c({})},[n,e]);const d=()=>{const f={};return a.title.trim()||(f.title="El ttulo es requerido"),c(f),Object.keys(f).length===0},u=f=>{f.preventDefault(),d()&&(r(a),t())};return e?s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[9999] p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full shadow-2xl",children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:n?"Editar Tarea":"Nueva Tarea"}),s.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(Rr,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),s.jsxs("form",{onSubmit:u,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ttulo *"}),s.jsx("input",{type:"text",value:a.title,onChange:f=>i({...a,title:f.target.value}),className:`w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${o.title?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Ej: Llamar a cliente"}),o.title&&s.jsxs("p",{className:"mt-1 text-sm text-red-500 flex items-center space-x-1",children:[s.jsx(xi,{className:"w-4 h-4"}),s.jsx("span",{children:o.title})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),s.jsx("textarea",{value:a.description,onChange:f=>i({...a,description:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:"3",placeholder:"Detalles de la tarea..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Prioridad"}),s.jsxs("select",{value:a.priority,onChange:f=>i({...a,priority:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"low",children:"Baja"}),s.jsx("option",{value:"medium",children:"Media"}),s.jsx("option",{value:"high",children:"Alta"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha Lmite"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"datetime-local",value:a.due_date,onChange:f=>i({...a,due_date:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),s.jsx(Al,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Asignado a"}),s.jsx("input",{type:"text",value:a.assigned_to,onChange:f=>i({...a,assigned_to:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Nombre del responsable"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:n?"Guardar Cambios":"Crear Tarea"})]})]})]})}):null};var DP={exports:{}},mf={},Rv={exports:{}};(function(e,t){(function(r,n){n(t)})(kn,function(r){function n(me){return function($e,Pe,Le,Ge,et,ue,Ae){return me($e,Pe,Ae)}}function a(me){return function($e,Pe,Le,Ge){if(!$e||!Pe||typeof $e!="object"||typeof Pe!="object")return me($e,Pe,Le,Ge);var et=Ge.get($e),ue=Ge.get(Pe);if(et&&ue)return et===Pe&&ue===$e;Ge.set($e,Pe),Ge.set(Pe,$e);var Ae=me($e,Pe,Le,Ge);return Ge.delete($e),Ge.delete(Pe),Ae}}function i(me,_e){var $e={};for(var Pe in me)$e[Pe]=me[Pe];for(var Pe in _e)$e[Pe]=_e[Pe];return $e}function o(me){return me.constructor===Object||me.constructor==null}function c(me){return typeof me.then=="function"}function d(me,_e){return me===_e||me!==me&&_e!==_e}var u="[object Arguments]",f="[object Boolean]",m="[object Date]",p="[object RegExp]",x="[object Map]",v="[object Number]",y="[object Object]",_="[object Set]",w="[object String]",b=Object.prototype.toString;function N(me){var _e=me.areArraysEqual,$e=me.areDatesEqual,Pe=me.areMapsEqual,Le=me.areObjectsEqual,Ge=me.areRegExpsEqual,et=me.areSetsEqual,ue=me.createIsNestedEqual,Ae=ue(lt);function lt(Ke,V,st){if(Ke===V)return!0;if(!Ke||!V||typeof Ke!="object"||typeof V!="object")return Ke!==Ke&&V!==V;if(o(Ke)&&o(V))return Le(Ke,V,Ae,st);var Ut=Array.isArray(Ke),br=Array.isArray(V);if(Ut||br)return Ut===br&&_e(Ke,V,Ae,st);var vt=b.call(Ke);return vt!==b.call(V)?!1:vt===m?$e(Ke,V,Ae,st):vt===p?Ge(Ke,V,Ae,st):vt===x?Pe(Ke,V,Ae,st):vt===_?et(Ke,V,Ae,st):vt===y||vt===u?c(Ke)||c(V)?!1:Le(Ke,V,Ae,st):vt===f||vt===v||vt===w?d(Ke.valueOf(),V.valueOf()):!1}return lt}function S(me,_e,$e,Pe){var Le=me.length;if(_e.length!==Le)return!1;for(;Le-- >0;)if(!$e(me[Le],_e[Le],Le,Le,me,_e,Pe))return!1;return!0}var C=a(S);function O(me,_e){return d(me.valueOf(),_e.valueOf())}function A(me,_e,$e,Pe){var Le=me.size===_e.size;if(!Le)return!1;if(!me.size)return!0;var Ge={},et=0;return me.forEach(function(ue,Ae){if(Le){var lt=!1,Ke=0;_e.forEach(function(V,st){!lt&&!Ge[Ke]&&(lt=$e(Ae,st,et,Ke,me,_e,Pe)&&$e(ue,V,Ae,st,me,_e,Pe))&&(Ge[Ke]=!0),Ke++}),et++,Le=lt}}),Le}var z=a(A),$="_owner",W=Object.prototype.hasOwnProperty;function F(me,_e,$e,Pe){var Le=Object.keys(me),Ge=Le.length;if(Object.keys(_e).length!==Ge)return!1;for(var et;Ge-- >0;){if(et=Le[Ge],et===$){var ue=!!me.$$typeof,Ae=!!_e.$$typeof;if((ue||Ae)&&ue!==Ae)return!1}if(!W.call(_e,et)||!$e(me[et],_e[et],et,et,me,_e,Pe))return!1}return!0}var G=a(F);function ee(me,_e){return me.source===_e.source&&me.flags===_e.flags}function K(me,_e,$e,Pe){var Le=me.size===_e.size;if(!Le)return!1;if(!me.size)return!0;var Ge={};return me.forEach(function(et,ue){if(Le){var Ae=!1,lt=0;_e.forEach(function(Ke,V){!Ae&&!Ge[lt]&&(Ae=$e(et,Ke,ue,V,me,_e,Pe))&&(Ge[lt]=!0),lt++}),Le=Ae}}),Le}var oe=a(K),Z=Object.freeze({areArraysEqual:S,areDatesEqual:O,areMapsEqual:A,areObjectsEqual:F,areRegExpsEqual:ee,areSetsEqual:K,createIsNestedEqual:n}),pe=Object.freeze({areArraysEqual:C,areDatesEqual:O,areMapsEqual:z,areObjectsEqual:G,areRegExpsEqual:ee,areSetsEqual:oe,createIsNestedEqual:n}),Q=N(Z);function ce(me,_e){return Q(me,_e,void 0)}var le=N(i(Z,{createIsNestedEqual:function(){return d}}));function B(me,_e){return le(me,_e,void 0)}var X=N(pe);function ae(me,_e){return X(me,_e,new WeakMap)}var fe=N(i(pe,{createIsNestedEqual:function(){return d}}));function re(me,_e){return fe(me,_e,new WeakMap)}function ge(me){return N(i(Z,me(Z)))}function Oe(me){var _e=N(i(pe,me(pe)));return function($e,Pe,Le){return Le===void 0&&(Le=new WeakMap),_e($e,Pe,Le)}}r.circularDeepEqual=ae,r.circularShallowEqual=re,r.createCustomCircularEqual=Oe,r.createCustomEqual=ge,r.deepEqual=ce,r.sameValueZeroEqual=d,r.shallowEqual=B,Object.defineProperty(r,"__esModule",{value:!0})})})(Rv,Rv.exports);var Bw=Rv.exports,zv={exports:{}};function LP(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=LP(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function PN(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=LP(e))&&(n&&(n+=" "),n+=t);return n}zv.exports=PN,zv.exports.clsx=PN;var Hw=zv.exports,nt={},C9=function(t,r,n){return t===r?!0:t.className===r.className&&n(t.style,r.style)&&t.width===r.width&&t.autoSize===r.autoSize&&t.cols===r.cols&&t.draggableCancel===r.draggableCancel&&t.draggableHandle===r.draggableHandle&&n(t.verticalCompact,r.verticalCompact)&&n(t.compactType,r.compactType)&&n(t.layout,r.layout)&&n(t.margin,r.margin)&&n(t.containerPadding,r.containerPadding)&&t.rowHeight===r.rowHeight&&t.maxRows===r.maxRows&&t.isBounded===r.isBounded&&t.isDraggable===r.isDraggable&&t.isResizable===r.isResizable&&t.allowOverlap===r.allowOverlap&&t.preventCollision===r.preventCollision&&t.useCSSTransforms===r.useCSSTransforms&&t.transformScale===r.transformScale&&t.isDroppable===r.isDroppable&&n(t.resizeHandles,r.resizeHandles)&&n(t.resizeHandle,r.resizeHandle)&&t.onLayoutChange===r.onLayoutChange&&t.onDragStart===r.onDragStart&&t.onDrag===r.onDrag&&t.onDragStop===r.onDragStop&&t.onResizeStart===r.onResizeStart&&t.onResize===r.onResize&&t.onResizeStop===r.onResizeStop&&t.onDrop===r.onDrop&&n(t.droppingItem,r.droppingItem)&&n(t.innerRef,r.innerRef)};Object.defineProperty(nt,"__esModule",{value:!0});nt.bottom=r0;nt.childrenEqual=D9;nt.cloneLayout=AP;nt.cloneLayoutItem=Sl;nt.collides=n0;nt.compact=zP;nt.compactItem=$P;nt.compactType=Y9;nt.correctBounds=IP;nt.fastPositionEqual=L9;nt.fastRGLPropsEqual=void 0;nt.getAllCollisions=FP;nt.getFirstCollision=xl;nt.getLayoutItem=Ww;nt.getStatics=Uw;nt.modifyLayout=RP;nt.moveElement=Yu;nt.moveElementAwayFromCollision=Iv;nt.noop=void 0;nt.perc=R9;nt.resizeItemInDirection=H9;nt.setTopLeft=U9;nt.setTransform=W9;nt.sortLayoutItems=Kw;nt.sortLayoutItemsByColRow=VP;nt.sortLayoutItemsByRowCol=UP;nt.synchronizeLayoutWithChildren=V9;nt.validateLayout=q9;nt.withLayoutItem=O9;var TN=Bw,qu=E9(E);function E9(e){return e&&e.__esModule?e:{default:e}}function MN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ig(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MN(Object(r),!0).forEach(function(n){P9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function P9(e,t,r){return(t=T9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T9(e){var t=M9(e,"string");return typeof t=="symbol"?t:t+""}function M9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function r0(e){let t=0,r;for(let n=0,a=e.length;n<a;n++)r=e[n].y+e[n].h,r>t&&(t=r);return t}function AP(e){const t=Array(e.length);for(let r=0,n=e.length;r<n;r++)t[r]=Sl(e[r]);return t}function RP(e,t){const r=Array(e.length);for(let n=0,a=e.length;n<a;n++)t.i===e[n].i?r[n]=t:r[n]=e[n];return r}function O9(e,t,r){let n=Ww(e,t);return n?(n=r(Sl(n)),e=RP(e,n),[e,n]):[e,null]}function Sl(e){return{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,minW:e.minW,maxW:e.maxW,minH:e.minH,maxH:e.maxH,moved:!!e.moved,static:!!e.static,isDraggable:e.isDraggable,isResizable:e.isResizable,resizeHandles:e.resizeHandles,isBounded:e.isBounded}}function D9(e,t){return(0,TN.deepEqual)(qu.default.Children.map(e,r=>r==null?void 0:r.key),qu.default.Children.map(t,r=>r==null?void 0:r.key))&&(0,TN.deepEqual)(qu.default.Children.map(e,r=>r==null?void 0:r.props["data-grid"]),qu.default.Children.map(t,r=>r==null?void 0:r.props["data-grid"]))}nt.fastRGLPropsEqual=C9;function L9(e,t){return e.left===t.left&&e.top===t.top&&e.width===t.width&&e.height===t.height}function n0(e,t){return!(e.i===t.i||e.x+e.w<=t.x||e.x>=t.x+t.w||e.y+e.h<=t.y||e.y>=t.y+t.h)}function zP(e,t,r,n){const a=Uw(e);let i=r0(a);const o=Kw(e,t),c=Array(e.length);for(let d=0,u=o.length;d<u;d++){let f=Sl(o[d]);f.static||(f=$P(a,f,t,r,o,n,i),i=Math.max(i,f.y+f.h),a.push(f)),c[e.indexOf(o[d])]=f,f.moved=!1}return c}const A9={x:"w",y:"h"};function $v(e,t,r,n){const a=A9[n];t[n]+=1;const i=e.map(o=>o.i).indexOf(t.i);for(let o=i+1;o<e.length;o++){const c=e[o];if(!c.static){if(c.y>t.y+t.h)break;n0(t,c)&&$v(e,c,r+t[a],n)}}t[n]=r}function $P(e,t,r,n,a,i,o){const c=r==="vertical",d=r==="horizontal";if(c)for(typeof o=="number"?t.y=Math.min(o,t.y):t.y=Math.min(r0(e),t.y);t.y>0&&!xl(e,t);)t.y--;else if(d)for(;t.x>0&&!xl(e,t);)t.x--;let u;for(;(u=xl(e,t))&&!(r===null&&i);)if(d?$v(a,t,u.x+u.w,"x"):$v(a,t,u.y+u.h,"y"),d&&t.x+t.w>n)for(t.x=n-t.w,t.y++;t.x>0&&!xl(e,t);)t.x--;return t.y=Math.max(t.y,0),t.x=Math.max(t.x,0),t}function IP(e,t){const r=Uw(e);for(let n=0,a=e.length;n<a;n++){const i=e[n];if(i.x+i.w>t.cols&&(i.x=t.cols-i.w),i.x<0&&(i.x=0,i.w=t.cols),!i.static)r.push(i);else for(;xl(r,i);)i.y++}return e}function Ww(e,t){for(let r=0,n=e.length;r<n;r++)if(e[r].i===t)return e[r]}function xl(e,t){for(let r=0,n=e.length;r<n;r++)if(n0(e[r],t))return e[r]}function FP(e,t){return e.filter(r=>n0(r,t))}function Uw(e){return e.filter(t=>t.static)}function Yu(e,t,r,n,a,i,o,c,d){if(t.static&&t.isDraggable!==!0||t.y===n&&t.x===r)return e;"Moving element ".concat(t.i," to [").concat(String(r),",").concat(String(n),"] from [").concat(t.x,",").concat(t.y,"]");const u=t.x,f=t.y;typeof r=="number"&&(t.x=r),typeof n=="number"&&(t.y=n),t.moved=!0;let m=Kw(e,o);(o==="vertical"&&typeof n=="number"?f>=n:o==="horizontal"&&typeof r=="number"?u>=r:!1)&&(m=m.reverse());const x=FP(m,t),v=x.length>0;if(v&&d)return AP(e);if(v&&i)return"Collision prevented on ".concat(t.i,", reverting."),t.x=u,t.y=f,t.moved=!1,e;for(let y=0,_=x.length;y<_;y++){const w=x[y];"Resolving collision between ".concat(t.i," at [").concat(t.x,",").concat(t.y,"] and ").concat(w.i," at [").concat(w.x,",").concat(w.y,"]"),!w.moved&&(w.static?e=Iv(e,w,t,a,o):e=Iv(e,t,w,a,o))}return e}function Iv(e,t,r,n,a,i){const o=a==="horizontal",c=a==="vertical",d=t.static;if(n){n=!1;const m={x:o?Math.max(t.x-r.w,0):r.x,y:c?Math.max(t.y-r.h,0):r.y,w:r.w,h:r.h,i:"-1"},p=xl(e,m),x=p&&p.y+p.h>t.y,v=p&&t.x+t.w>p.x;if(p){if(x&&c)return Yu(e,r,void 0,r.y+1,n,d,a);if(x&&a==null)return t.y=r.y,r.y=r.y+r.h,e;if(v&&o)return Yu(e,t,r.x,void 0,n,d,a)}else return"Doing reverse collision on ".concat(r.i," up to [").concat(m.x,",").concat(m.y,"]."),Yu(e,r,o?m.x:void 0,c?m.y:void 0,n,d,a)}const u=o?r.x+1:void 0,f=c?r.y+1:void 0;return u==null&&f==null?e:Yu(e,r,o?r.x+1:void 0,c?r.y+1:void 0,n,d,a)}function R9(e){return e*100+"%"}const BP=(e,t,r,n)=>e+r>n?t:r,HP=(e,t,r)=>e<0?t:r,WP=e=>Math.max(0,e),Vw=e=>Math.max(0,e),qw=(e,t,r)=>{let{left:n,height:a,width:i}=t;const o=e.top-(a-e.height);return{left:n,width:i,height:HP(o,e.height,a),top:Vw(o)}},Yw=(e,t,r)=>{let{top:n,left:a,height:i,width:o}=t;return{top:n,height:i,width:BP(e.left,e.width,o,r),left:WP(a)}},Gw=(e,t,r)=>{let{top:n,height:a,width:i}=t;const o=e.left-(i-e.width);return{height:a,width:o<0?e.width:BP(e.left,e.width,i,r),top:Vw(n),left:WP(o)}},Zw=(e,t,r)=>{let{top:n,left:a,height:i,width:o}=t;return{width:o,left:a,height:HP(n,e.height,i),top:Vw(n)}},z9=function(){return qw(arguments.length<=0?void 0:arguments[0],Yw(...arguments))},$9=function(){return qw(arguments.length<=0?void 0:arguments[0],Gw(...arguments))},I9=function(){return Zw(arguments.length<=0?void 0:arguments[0],Yw(...arguments))},F9=function(){return Zw(arguments.length<=0?void 0:arguments[0],Gw(...arguments))},B9={n:qw,ne:z9,e:Yw,se:I9,s:Zw,sw:F9,w:Gw,nw:$9};function H9(e,t,r,n){const a=B9[e];return a?a(t,ig(ig({},t),r),n):r}function W9(e){let{top:t,left:r,width:n,height:a}=e;const i="translate(".concat(r,"px,").concat(t,"px)");return{transform:i,WebkitTransform:i,MozTransform:i,msTransform:i,OTransform:i,width:"".concat(n,"px"),height:"".concat(a,"px"),position:"absolute"}}function U9(e){let{top:t,left:r,width:n,height:a}=e;return{top:"".concat(t,"px"),left:"".concat(r,"px"),width:"".concat(n,"px"),height:"".concat(a,"px"),position:"absolute"}}function Kw(e,t){return t==="horizontal"?VP(e):t==="vertical"?UP(e):e}function UP(e){return e.slice(0).sort(function(t,r){return t.y>r.y||t.y===r.y&&t.x>r.x?1:t.y===r.y&&t.x===r.x?0:-1})}function VP(e){return e.slice(0).sort(function(t,r){return t.x>r.x||t.x===r.x&&t.y>r.y?1:-1})}function V9(e,t,r,n,a){e=e||[];const i=[];qu.default.Children.forEach(t,c=>{if((c==null?void 0:c.key)==null)return;const d=Ww(e,String(c.key)),u=c.props["data-grid"];d&&u==null?i.push(Sl(d)):u?i.push(Sl(ig(ig({},u),{},{i:c.key}))):i.push(Sl({w:1,h:1,x:0,y:r0(i),i:String(c.key)}))});const o=IP(i,{cols:r});return a?o:zP(o,n,r)}function q9(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Layout";const r=["x","y","w","h"];if(!Array.isArray(e))throw new Error(t+" must be an array!");for(let n=0,a=e.length;n<a;n++){const i=e[n];for(let o=0;o<r.length;o++){const c=r[o],d=i[c];if(typeof d!="number"||Number.isNaN(d))throw new Error("ReactGridLayout: ".concat(t,"[").concat(n,"].").concat(c," must be a number! Received: ").concat(d," (").concat(typeof d,")"))}if(typeof i.i<"u"&&typeof i.i!="string")throw new Error("ReactGridLayout: ".concat(t,"[").concat(n,"].i must be a string! Received: ").concat(i.i," (").concat(typeof i.i,")"))}}function Y9(e){const{verticalCompact:t,compactType:r}=e||{};return t===!1?null:r}const G9=()=>{};nt.noop=G9;var Oa={};Object.defineProperty(Oa,"__esModule",{value:!0});Oa.calcGridColWidth=s0;Oa.calcGridItemPosition=Z9;Oa.calcGridItemWHPx=Fv;Oa.calcWH=X9;Oa.calcXY=K9;Oa.clamp=yl;function s0(e){const{margin:t,containerPadding:r,containerWidth:n,cols:a}=e;return(n-t[0]*(a-1)-r[0]*2)/a}function Fv(e,t,r){return Number.isFinite(e)?Math.round(t*e+Math.max(0,e-1)*r):e}function Z9(e,t,r,n,a,i){const{margin:o,containerPadding:c,rowHeight:d}=e,u=s0(e),f={};return i&&i.resizing?(f.width=Math.round(i.resizing.width),f.height=Math.round(i.resizing.height)):(f.width=Fv(n,u,o[0]),f.height=Fv(a,d,o[1])),i&&i.dragging?(f.top=Math.round(i.dragging.top),f.left=Math.round(i.dragging.left)):i&&i.resizing&&typeof i.resizing.top=="number"&&typeof i.resizing.left=="number"?(f.top=Math.round(i.resizing.top),f.left=Math.round(i.resizing.left)):(f.top=Math.round((d+o[1])*r+c[1]),f.left=Math.round((u+o[0])*t+c[0])),f}function K9(e,t,r,n,a){const{margin:i,containerPadding:o,cols:c,rowHeight:d,maxRows:u}=e,f=s0(e);let m=Math.round((r-o[0])/(f+i[0])),p=Math.round((t-o[1])/(d+i[1]));return m=yl(m,0,c-n),p=yl(p,0,u-a),{x:m,y:p}}function X9(e,t,r,n,a,i){const{margin:o,maxRows:c,cols:d,rowHeight:u}=e,f=s0(e);let m=Math.round((t+o[0])/(f+o[0])),p=Math.round((r+o[1])/(u+o[1])),x=yl(m,0,d-n),v=yl(p,0,c-a);return["sw","w","nw"].indexOf(i)!==-1&&(x=yl(m,0,d)),["nw","n","ne"].indexOf(i)!==-1&&(v=yl(p,0,c)),{w:x,h:v}}function yl(e,t,r){return Math.max(Math.min(e,r),t)}var a0={},i0={exports:{}},qP={},Bv={exports:{}};function YP(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=YP(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ON(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=YP(e))&&(n&&(n+=" "),n+=t);return n}Bv.exports=ON,Bv.exports.clsx=ON;var J9=Bv.exports,sr={},Da={};Object.defineProperty(Da,"__esModule",{value:!0});Da.dontSetMe=nF;Da.findInArray=Q9;Da.int=rF;Da.isFunction=eF;Da.isNum=tF;function Q9(e,t){for(let r=0,n=e.length;r<n;r++)if(t.apply(t,[e[r],r,e]))return e[r]}function eF(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function tF(e){return typeof e=="number"&&!isNaN(e)}function rF(e){return parseInt(e,10)}function nF(e,t,r){if(e[t])return new Error(`Invalid prop ${t} passed to ${r} - do not set this, set it on the child.`)}var Zl={};Object.defineProperty(Zl,"__esModule",{value:!0});Zl.browserPrefixToKey=ZP;Zl.browserPrefixToStyle=sF;Zl.default=void 0;Zl.getPrefix=GP;const Kx=["Moz","Webkit","O","ms"];function GP(){var r,n;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const t=(n=(r=window.document)==null?void 0:r.documentElement)==null?void 0:n.style;if(!t||e in t)return"";for(let a=0;a<Kx.length;a++)if(ZP(e,Kx[a])in t)return Kx[a];return""}function ZP(e,t){return t?`${t}${aF(e)}`:e}function sF(e,t){return t?`-${t.toLowerCase()}-${e}`:e}function aF(e){let t="",r=!0;for(let n=0;n<e.length;n++)r?(t+=e[n].toUpperCase(),r=!1):e[n]==="-"?r=!0:t+=e[n];return t}Zl.default=GP();Object.defineProperty(sr,"__esModule",{value:!0});sr.addClassName=JP;sr.addEvent=oF;sr.addUserSelectStyles=yF;sr.createCSSTransform=mF;sr.createSVGTransform=pF;sr.getTouch=gF;sr.getTouchIdentifier=xF;sr.getTranslation=Xw;sr.innerHeight=uF;sr.innerWidth=hF;sr.matchesSelector=XP;sr.matchesSelectorAndParentsTo=iF;sr.offsetXYFromParent=fF;sr.outerHeight=cF;sr.outerWidth=dF;sr.removeClassName=QP;sr.removeEvent=lF;sr.scheduleRemoveUserSelectStyles=vF;var rs=Da,DN=KP(Zl);function KP(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(KP=function(a,i){if(!i&&a&&a.__esModule)return a;var o,c,d={__proto__:null,default:a};if(a===null||typeof a!="object"&&typeof a!="function")return d;if(o=i?n:r){if(o.has(a))return o.get(a);o.set(a,d)}for(const u in a)u!=="default"&&{}.hasOwnProperty.call(a,u)&&((c=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(a,u))&&(c.get||c.set)?o(d,u,c):d[u]=a[u]);return d})(e,t)}let Em="";function XP(e,t){return Em||(Em=(0,rs.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(r){return(0,rs.isFunction)(e[r])})),(0,rs.isFunction)(e[Em])?e[Em](t):!1}function iF(e,t,r){let n=e;do{if(XP(n,t))return!0;if(n===r)return!1;n=n.parentNode}while(n);return!1}function oF(e,t,r,n){if(!e)return;const a={capture:!0,...n};e.addEventListener?e.addEventListener(t,r,a):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r}function lF(e,t,r,n){if(!e)return;const a={capture:!0,...n};e.removeEventListener?e.removeEventListener(t,r,a):e.detachEvent?e.detachEvent("on"+t,r):e["on"+t]=null}function cF(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,rs.int)(r.borderTopWidth),t+=(0,rs.int)(r.borderBottomWidth),t}function dF(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,rs.int)(r.borderLeftWidth),t+=(0,rs.int)(r.borderRightWidth),t}function uF(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,rs.int)(r.paddingTop),t-=(0,rs.int)(r.paddingBottom),t}function hF(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,rs.int)(r.paddingLeft),t-=(0,rs.int)(r.paddingRight),t}function fF(e,t,r){const a=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),i=(e.clientX+t.scrollLeft-a.left)/r,o=(e.clientY+t.scrollTop-a.top)/r;return{x:i,y:o}}function mF(e,t){const r=Xw(e,t,"px");return{[(0,DN.browserPrefixToKey)("transform",DN.default)]:r}}function pF(e,t){return Xw(e,t,"")}function Xw(e,t,r){let{x:n,y:a}=e,i=`translate(${n}${r},${a}${r})`;if(t){const o=`${typeof t.x=="string"?t.x:t.x+r}`,c=`${typeof t.y=="string"?t.y:t.y+r}`;i=`translate(${o}, ${c})`+i}return i}function gF(e,t){return e.targetTouches&&(0,rs.findInArray)(e.targetTouches,r=>t===r.identifier)||e.changedTouches&&(0,rs.findInArray)(e.changedTouches,r=>t===r.identifier)}function xF(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier}function yF(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,e.getElementsByTagName("head")[0].appendChild(t)),e.body&&JP(e.body,"react-draggable-transparent-selection")}function vF(e){window.requestAnimationFrame?window.requestAnimationFrame(()=>{LN(e)}):LN(e)}function LN(e){if(e)try{if(e.body&&QP(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function JP(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp(`(?:^|\\s)${t}(?!\\S)`))||(e.className+=` ${t}`)}function QP(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp(`(?:^|\\s)${t}(?!\\S)`,"g"),"")}var La={};Object.defineProperty(La,"__esModule",{value:!0});La.canDragX=_F;La.canDragY=kF;La.createCoreData=NF;La.createDraggableData=SF;La.getBoundPosition=bF;La.getControlPosition=jF;La.snapToGrid=wF;var Gn=Da,Zc=sr;function bF(e,t,r){if(!e.props.bounds)return[t,r];let{bounds:n}=e.props;n=typeof n=="string"?n:CF(n);const a=Jw(e);if(typeof n=="string"){const{ownerDocument:i}=a,o=i.defaultView;let c;if(n==="parent"?c=a.parentNode:c=a.getRootNode().querySelector(n),!(c instanceof o.HTMLElement))throw new Error('Bounds selector "'+n+'" could not find an element.');const d=c,u=o.getComputedStyle(a),f=o.getComputedStyle(d);n={left:-a.offsetLeft+(0,Gn.int)(f.paddingLeft)+(0,Gn.int)(u.marginLeft),top:-a.offsetTop+(0,Gn.int)(f.paddingTop)+(0,Gn.int)(u.marginTop),right:(0,Zc.innerWidth)(d)-(0,Zc.outerWidth)(a)-a.offsetLeft+(0,Gn.int)(f.paddingRight)-(0,Gn.int)(u.marginRight),bottom:(0,Zc.innerHeight)(d)-(0,Zc.outerHeight)(a)-a.offsetTop+(0,Gn.int)(f.paddingBottom)-(0,Gn.int)(u.marginBottom)}}return(0,Gn.isNum)(n.right)&&(t=Math.min(t,n.right)),(0,Gn.isNum)(n.bottom)&&(r=Math.min(r,n.bottom)),(0,Gn.isNum)(n.left)&&(t=Math.max(t,n.left)),(0,Gn.isNum)(n.top)&&(r=Math.max(r,n.top)),[t,r]}function wF(e,t,r){const n=Math.round(t/e[0])*e[0],a=Math.round(r/e[1])*e[1];return[n,a]}function _F(e){return e.props.axis==="both"||e.props.axis==="x"}function kF(e){return e.props.axis==="both"||e.props.axis==="y"}function jF(e,t,r){const n=typeof t=="number"?(0,Zc.getTouch)(e,t):null;if(typeof t=="number"&&!n)return null;const a=Jw(r),i=r.props.offsetParent||a.offsetParent||a.ownerDocument.body;return(0,Zc.offsetXYFromParent)(n||e,i,r.props.scale)}function NF(e,t,r){const n=!(0,Gn.isNum)(e.lastX),a=Jw(e);return n?{node:a,deltaX:0,deltaY:0,lastX:t,lastY:r,x:t,y:r}:{node:a,deltaX:t-e.lastX,deltaY:r-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:r}}function SF(e,t){const r=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/r,y:e.state.y+t.deltaY/r,deltaX:t.deltaX/r,deltaY:t.deltaY/r,lastX:e.state.x,lastY:e.state.y}}function CF(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function Jw(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var o0={},l0={};Object.defineProperty(l0,"__esModule",{value:!0});l0.default=EF;function EF(){}Object.defineProperty(o0,"__esModule",{value:!0});o0.default=void 0;var Xx=e5(E),yn=Qw(Pi),PF=Qw(zd),Qr=sr,Ji=La,Jx=Da,Eu=Qw(l0);function Qw(e){return e&&e.__esModule?e:{default:e}}function e5(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(e5=function(a,i){if(!i&&a&&a.__esModule)return a;var o,c,d={__proto__:null,default:a};if(a===null||typeof a!="object"&&typeof a!="function")return d;if(o=i?n:r){if(o.has(a))return o.get(a);o.set(a,d)}for(const u in a)u!=="default"&&{}.hasOwnProperty.call(a,u)&&((c=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(a,u))&&(c.get||c.set)?o(d,u,c):d[u]=a[u]);return d})(e,t)}function vn(e,t,r){return(t=TF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TF(e){var t=MF(e,"string");return typeof t=="symbol"?t:t+""}function MF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const Xs={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Qi=Xs.mouse,c0=class extends Xx.Component{constructor(){super(...arguments),vn(this,"dragging",!1),vn(this,"lastX",NaN),vn(this,"lastY",NaN),vn(this,"touchIdentifier",null),vn(this,"mounted",!1),vn(this,"handleDragStart",t=>{if(this.props.onMouseDown(t),!this.props.allowAnyClick&&typeof t.button=="number"&&t.button!==0)return!1;const r=this.findDOMNode();if(!r||!r.ownerDocument||!r.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:n}=r;if(this.props.disabled||!(t.target instanceof n.defaultView.Node)||this.props.handle&&!(0,Qr.matchesSelectorAndParentsTo)(t.target,this.props.handle,r)||this.props.cancel&&(0,Qr.matchesSelectorAndParentsTo)(t.target,this.props.cancel,r))return;t.type==="touchstart"&&!this.props.allowMobileScroll&&t.preventDefault();const a=(0,Qr.getTouchIdentifier)(t);this.touchIdentifier=a;const i=(0,Ji.getControlPosition)(t,a,this);if(i==null)return;const{x:o,y:c}=i,d=(0,Ji.createCoreData)(this,o,c);(0,Eu.default)("DraggableCore: handleDragStart: %j",d),(0,Eu.default)("calling",this.props.onStart),!(this.props.onStart(t,d)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,Qr.addUserSelectStyles)(n),this.dragging=!0,this.lastX=o,this.lastY=c,(0,Qr.addEvent)(n,Qi.move,this.handleDrag),(0,Qr.addEvent)(n,Qi.stop,this.handleDragStop))}),vn(this,"handleDrag",t=>{const r=(0,Ji.getControlPosition)(t,this.touchIdentifier,this);if(r==null)return;let{x:n,y:a}=r;if(Array.isArray(this.props.grid)){let c=n-this.lastX,d=a-this.lastY;if([c,d]=(0,Ji.snapToGrid)(this.props.grid,c,d),!c&&!d)return;n=this.lastX+c,a=this.lastY+d}const i=(0,Ji.createCoreData)(this,n,a);if((0,Eu.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(t,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const d=document.createEvent("MouseEvents");d.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(d)}return}this.lastX=n,this.lastY=a}),vn(this,"handleDragStop",t=>{if(!this.dragging)return;const r=(0,Ji.getControlPosition)(t,this.touchIdentifier,this);if(r==null)return;let{x:n,y:a}=r;if(Array.isArray(this.props.grid)){let d=n-this.lastX||0,u=a-this.lastY||0;[d,u]=(0,Ji.snapToGrid)(this.props.grid,d,u),n=this.lastX+d,a=this.lastY+u}const i=(0,Ji.createCoreData)(this,n,a);if(this.props.onStop(t,i)===!1||this.mounted===!1)return!1;const c=this.findDOMNode();c&&this.props.enableUserSelectHack&&(0,Qr.scheduleRemoveUserSelectStyles)(c.ownerDocument),(0,Eu.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,c&&((0,Eu.default)("DraggableCore: Removing handlers"),(0,Qr.removeEvent)(c.ownerDocument,Qi.move,this.handleDrag),(0,Qr.removeEvent)(c.ownerDocument,Qi.stop,this.handleDragStop))}),vn(this,"onMouseDown",t=>(Qi=Xs.mouse,this.handleDragStart(t))),vn(this,"onMouseUp",t=>(Qi=Xs.mouse,this.handleDragStop(t))),vn(this,"onTouchStart",t=>(Qi=Xs.touch,this.handleDragStart(t))),vn(this,"onTouchEnd",t=>(Qi=Xs.touch,this.handleDragStop(t)))}componentDidMount(){this.mounted=!0;const t=this.findDOMNode();t&&(0,Qr.addEvent)(t,Xs.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const t=this.findDOMNode();if(t){const{ownerDocument:r}=t;(0,Qr.removeEvent)(r,Xs.mouse.move,this.handleDrag),(0,Qr.removeEvent)(r,Xs.touch.move,this.handleDrag),(0,Qr.removeEvent)(r,Xs.mouse.stop,this.handleDragStop),(0,Qr.removeEvent)(r,Xs.touch.stop,this.handleDragStop),(0,Qr.removeEvent)(t,Xs.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Qr.scheduleRemoveUserSelectStyles)(r)}}findDOMNode(){var t,r,n;return(t=this.props)!=null&&t.nodeRef?(n=(r=this.props)==null?void 0:r.nodeRef)==null?void 0:n.current:PF.default.findDOMNode(this)}render(){return Xx.cloneElement(Xx.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};o0.default=c0;vn(c0,"displayName","DraggableCore");vn(c0,"propTypes",{allowAnyClick:yn.default.bool,allowMobileScroll:yn.default.bool,children:yn.default.node.isRequired,disabled:yn.default.bool,enableUserSelectHack:yn.default.bool,offsetParent:function(e,t){if(e[t]&&e[t].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:yn.default.arrayOf(yn.default.number),handle:yn.default.string,cancel:yn.default.string,nodeRef:yn.default.object,onStart:yn.default.func,onDrag:yn.default.func,onStop:yn.default.func,onMouseDown:yn.default.func,scale:yn.default.number,className:Jx.dontSetMe,style:Jx.dontSetMe,transform:Jx.dontSetMe});vn(c0,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return d.default}}),e.default=void 0;var t=m(E),r=f(Pi),n=f(zd),a=J9,i=sr,o=La,c=Da,d=f(o0),u=f(l0);function f(w){return w&&w.__esModule?w:{default:w}}function m(w,b){if(typeof WeakMap=="function")var N=new WeakMap,S=new WeakMap;return(m=function(C,O){if(!O&&C&&C.__esModule)return C;var A,z,$={__proto__:null,default:C};if(C===null||typeof C!="object"&&typeof C!="function")return $;if(A=O?S:N){if(A.has(C))return A.get(C);A.set(C,$)}for(const W in C)W!=="default"&&{}.hasOwnProperty.call(C,W)&&((z=(A=Object.defineProperty)&&Object.getOwnPropertyDescriptor(C,W))&&(z.get||z.set)?A($,W,z):$[W]=C[W]);return $})(w,b)}function p(){return p=Object.assign?Object.assign.bind():function(w){for(var b=1;b<arguments.length;b++){var N=arguments[b];for(var S in N)({}).hasOwnProperty.call(N,S)&&(w[S]=N[S])}return w},p.apply(null,arguments)}function x(w,b,N){return(b=v(b))in w?Object.defineProperty(w,b,{value:N,enumerable:!0,configurable:!0,writable:!0}):w[b]=N,w}function v(w){var b=y(w,"string");return typeof b=="symbol"?b:b+""}function y(w,b){if(typeof w!="object"||!w)return w;var N=w[Symbol.toPrimitive];if(N!==void 0){var S=N.call(w,b);if(typeof S!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(w)}class _ extends t.Component{static getDerivedStateFromProps(b,N){let{position:S}=b,{prevPropsPosition:C}=N;return S&&(!C||S.x!==C.x||S.y!==C.y)?((0,u.default)("Draggable: getDerivedStateFromProps %j",{position:S,prevPropsPosition:C}),{x:S.x,y:S.y,prevPropsPosition:{...S}}):null}constructor(b){super(b),x(this,"onDragStart",(N,S)=>{if((0,u.default)("Draggable: onDragStart: %j",S),this.props.onStart(N,(0,o.createDraggableData)(this,S))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),x(this,"onDrag",(N,S)=>{if(!this.state.dragging)return!1;(0,u.default)("Draggable: onDrag: %j",S);const C=(0,o.createDraggableData)(this,S),O={x:C.x,y:C.y,slackX:0,slackY:0};if(this.props.bounds){const{x:z,y:$}=O;O.x+=this.state.slackX,O.y+=this.state.slackY;const[W,F]=(0,o.getBoundPosition)(this,O.x,O.y);O.x=W,O.y=F,O.slackX=this.state.slackX+(z-O.x),O.slackY=this.state.slackY+($-O.y),C.x=O.x,C.y=O.y,C.deltaX=O.x-this.state.x,C.deltaY=O.y-this.state.y}if(this.props.onDrag(N,C)===!1)return!1;this.setState(O)}),x(this,"onDragStop",(N,S)=>{if(!this.state.dragging||this.props.onStop(N,(0,o.createDraggableData)(this,S))===!1)return!1;(0,u.default)("Draggable: onDragStop: %j",S);const O={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:z,y:$}=this.props.position;O.x=z,O.y=$}this.setState(O)}),this.state={dragging:!1,dragged:!1,x:b.position?b.position.x:b.defaultPosition.x,y:b.position?b.position.y:b.defaultPosition.y,prevPropsPosition:{...b.position},slackX:0,slackY:0,isElementSVG:!1},b.position&&!(b.onDrag||b.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var b,N;return((N=(b=this.props)==null?void 0:b.nodeRef)==null?void 0:N.current)??n.default.findDOMNode(this)}render(){const{axis:b,bounds:N,children:S,defaultPosition:C,defaultClassName:O,defaultClassNameDragging:A,defaultClassNameDragged:z,position:$,positionOffset:W,scale:F,...G}=this.props;let ee={},K=null;const Z=!!!$||this.state.dragging,pe=$||C,Q={x:(0,o.canDragX)(this)&&Z?this.state.x:pe.x,y:(0,o.canDragY)(this)&&Z?this.state.y:pe.y};this.state.isElementSVG?K=(0,i.createSVGTransform)(Q,W):ee=(0,i.createCSSTransform)(Q,W);const ce=(0,a.clsx)(S.props.className||"",O,{[A]:this.state.dragging,[z]:this.state.dragged});return t.createElement(d.default,p({},G,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(S),{className:ce,style:{...S.props.style,...ee},transform:K}))}}e.default=_,x(_,"displayName","Draggable"),x(_,"propTypes",{...d.default.propTypes,axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:c.dontSetMe,style:c.dontSetMe,transform:c.dontSetMe}),x(_,"defaultProps",{...d.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(qP);const{default:t5,DraggableCore:OF}=qP;i0.exports=t5;i0.exports.default=t5;i0.exports.DraggableCore=OF;var r5=i0.exports,d0={exports:{}},pf={},e_={};e_.__esModule=!0;e_.cloneElement=$F;var DF=LF(E);function LF(e){return e&&e.__esModule?e:{default:e}}function AN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function RN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AN(Object(r),!0).forEach(function(n){AF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AF(e,t,r){return t=RF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RF(e){var t=zF(e,"string");return typeof t=="symbol"?t:String(t)}function zF(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $F(e,t){return t.style&&e.props.style&&(t.style=RN(RN({},e.props.style),t.style)),t.className&&e.props.className&&(t.className=e.props.className+" "+t.className),DF.default.cloneElement(e,t)}var gf={};gf.__esModule=!0;gf.resizableProps=void 0;var Xe=IF(Pi);function IF(e){return e&&e.__esModule?e:{default:e}}var FF={axis:Xe.default.oneOf(["both","x","y","none"]),className:Xe.default.string,children:Xe.default.element.isRequired,draggableOpts:Xe.default.shape({allowAnyClick:Xe.default.bool,cancel:Xe.default.string,children:Xe.default.node,disabled:Xe.default.bool,enableUserSelectHack:Xe.default.bool,offsetParent:Xe.default.node,grid:Xe.default.arrayOf(Xe.default.number),handle:Xe.default.string,nodeRef:Xe.default.object,onStart:Xe.default.func,onDrag:Xe.default.func,onStop:Xe.default.func,onMouseDown:Xe.default.func,scale:Xe.default.number}),height:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(a.axis==="both"||a.axis==="y"){var i;return(i=Xe.default.number).isRequired.apply(i,r)}return Xe.default.number.apply(Xe.default,r)},handle:Xe.default.oneOfType([Xe.default.node,Xe.default.func]),handleSize:Xe.default.arrayOf(Xe.default.number),lockAspectRatio:Xe.default.bool,maxConstraints:Xe.default.arrayOf(Xe.default.number),minConstraints:Xe.default.arrayOf(Xe.default.number),onResizeStop:Xe.default.func,onResizeStart:Xe.default.func,onResize:Xe.default.func,resizeHandles:Xe.default.arrayOf(Xe.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:Xe.default.number,width:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(a.axis==="both"||a.axis==="x"){var i;return(i=Xe.default.number).isRequired.apply(i,r)}return Xe.default.number.apply(Xe.default,r)}};gf.resizableProps=FF;pf.__esModule=!0;pf.default=void 0;var Pu=VF(E),BF=r5,HF=e_,WF=gf,UF=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function n5(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(n5=function(a){return a?r:t})(e)}function VF(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=n5(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function Hv(){return Hv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hv.apply(this,arguments)}function qF(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function zN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zN(Object(r),!0).forEach(function(n){YF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YF(e,t,r){return t=GF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GF(e){var t=ZF(e,"string");return typeof t=="symbol"?t:String(t)}function ZF(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KF(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Wv(e,t)}function Wv(e,t){return Wv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Wv(e,t)}var t_=function(e){KF(t,e);function t(){for(var n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,n.handleRefs={},n.lastHandleRect=null,n.slack=null,n}var r=t.prototype;return r.componentWillUnmount=function(){this.resetData()},r.resetData=function(){this.lastHandleRect=this.slack=null},r.runConstraints=function(a,i){var o=this.props,c=o.minConstraints,d=o.maxConstraints,u=o.lockAspectRatio;if(!c&&!d&&!u)return[a,i];if(u){var f=this.props.width/this.props.height,m=a-this.props.width,p=i-this.props.height;Math.abs(m)>Math.abs(p*f)?i=a/f:a=i*f}var x=a,v=i,y=this.slack||[0,0],_=y[0],w=y[1];return a+=_,i+=w,c&&(a=Math.max(c[0],a),i=Math.max(c[1],i)),d&&(a=Math.min(d[0],a),i=Math.min(d[1],i)),this.slack=[_+(x-a),w+(v-i)],[a,i]},r.resizeHandler=function(a,i){var o=this;return function(c,d){var u=d.node,f=d.deltaX,m=d.deltaY;a==="onResizeStart"&&o.resetData();var p=(o.props.axis==="both"||o.props.axis==="x")&&i!=="n"&&i!=="s",x=(o.props.axis==="both"||o.props.axis==="y")&&i!=="e"&&i!=="w";if(!(!p&&!x)){var v=i[0],y=i[i.length-1],_=u.getBoundingClientRect();if(o.lastHandleRect!=null){if(y==="w"){var w=_.left-o.lastHandleRect.left;f+=w}if(v==="n"){var b=_.top-o.lastHandleRect.top;m+=b}}o.lastHandleRect=_,y==="w"&&(f=-f),v==="n"&&(m=-m);var N=o.props.width+(p?f/o.props.transformScale:0),S=o.props.height+(x?m/o.props.transformScale:0),C=o.runConstraints(N,S);N=C[0],S=C[1];var O=N!==o.props.width||S!==o.props.height,A=typeof o.props[a]=="function"?o.props[a]:null,z=a==="onResize"&&!O;A&&!z&&(c.persist==null||c.persist(),A(c,{node:u,size:{width:N,height:S},handle:i})),a==="onResizeStop"&&o.resetData()}}},r.renderResizeHandle=function(a,i){var o=this.props.handle;if(!o)return Pu.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+a,ref:i});if(typeof o=="function")return o(a,i);var c=typeof o.type=="string",d=Qx({ref:i},c?{}:{handleAxis:a});return Pu.cloneElement(o,d)},r.render=function(){var a=this,i=this.props,o=i.children,c=i.className,d=i.draggableOpts;i.width,i.height,i.handle,i.handleSize,i.lockAspectRatio,i.axis,i.minConstraints,i.maxConstraints,i.onResize,i.onResizeStop,i.onResizeStart;var u=i.resizeHandles;i.transformScale;var f=qF(i,UF);return(0,HF.cloneElement)(o,Qx(Qx({},f),{},{className:(c?c+" ":"")+"react-resizable",children:[].concat(o.props.children,u.map(function(m){var p,x=(p=a.handleRefs[m])!=null?p:a.handleRefs[m]=Pu.createRef();return Pu.createElement(BF.DraggableCore,Hv({},d,{nodeRef:x,key:"resizableHandle-"+m,onStop:a.resizeHandler("onResizeStop",m),onStart:a.resizeHandler("onResizeStart",m),onDrag:a.resizeHandler("onResize",m)}),a.renderResizeHandle(m,x))}))}))},t}(Pu.Component);pf.default=t_;t_.propTypes=WF.resizableProps;t_.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var u0={};u0.__esModule=!0;u0.default=void 0;var ey=tB(E),XF=s5(Pi),JF=s5(pf),QF=gf,eB=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function s5(e){return e&&e.__esModule?e:{default:e}}function a5(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(a5=function(a){return a?r:t})(e)}function tB(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=a5(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function Uv(){return Uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uv.apply(this,arguments)}function $N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function og(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$N(Object(r),!0).forEach(function(n){rB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$N(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rB(e,t,r){return t=nB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nB(e){var t=sB(e,"string");return typeof t=="symbol"?t:String(t)}function sB(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aB(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function iB(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Vv(e,t)}function Vv(e,t){return Vv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Vv(e,t)}var i5=function(e){iB(t,e);function t(){for(var n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,n.state={width:n.props.width,height:n.props.height,propsWidth:n.props.width,propsHeight:n.props.height},n.onResize=function(c,d){var u=d.size;n.props.onResize?(c.persist==null||c.persist(),n.setState(u,function(){return n.props.onResize&&n.props.onResize(c,d)})):n.setState(u)},n}t.getDerivedStateFromProps=function(a,i){return i.propsWidth!==a.width||i.propsHeight!==a.height?{width:a.width,height:a.height,propsWidth:a.width,propsHeight:a.height}:null};var r=t.prototype;return r.render=function(){var a=this.props,i=a.handle,o=a.handleSize;a.onResize;var c=a.onResizeStart,d=a.onResizeStop,u=a.draggableOpts,f=a.minConstraints,m=a.maxConstraints,p=a.lockAspectRatio,x=a.axis;a.width,a.height;var v=a.resizeHandles,y=a.style,_=a.transformScale,w=aB(a,eB);return ey.createElement(JF.default,{axis:x,draggableOpts:u,handle:i,handleSize:o,height:this.state.height,lockAspectRatio:p,maxConstraints:m,minConstraints:f,onResizeStart:c,onResize:this.onResize,onResizeStop:d,resizeHandles:v,transformScale:_,width:this.state.width},ey.createElement("div",Uv({},w,{style:og(og({},y),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},t}(ey.Component);u0.default=i5;i5.propTypes=og(og({},QF.resizableProps),{},{children:XF.default.element});d0.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")};d0.exports.Resizable=pf.default;d0.exports.ResizableBox=u0.default;var oB=d0.exports,yi={};Object.defineProperty(yi,"__esModule",{value:!0});yi.resizeHandleType=yi.resizeHandleAxesType=yi.default=void 0;var Qe=o5(Pi),lB=o5(E);function o5(e){return e&&e.__esModule?e:{default:e}}const cB=yi.resizeHandleAxesType=Qe.default.arrayOf(Qe.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),dB=yi.resizeHandleType=Qe.default.oneOfType([Qe.default.node,Qe.default.func]);yi.default={className:Qe.default.string,style:Qe.default.object,width:Qe.default.number,autoSize:Qe.default.bool,cols:Qe.default.number,draggableCancel:Qe.default.string,draggableHandle:Qe.default.string,verticalCompact:function(e){e.verticalCompact},compactType:Qe.default.oneOf(["vertical","horizontal"]),layout:function(e){var t=e.layout;t!==void 0&&nt.validateLayout(t,"layout")},margin:Qe.default.arrayOf(Qe.default.number),containerPadding:Qe.default.arrayOf(Qe.default.number),rowHeight:Qe.default.number,maxRows:Qe.default.number,isBounded:Qe.default.bool,isDraggable:Qe.default.bool,isResizable:Qe.default.bool,allowOverlap:Qe.default.bool,preventCollision:Qe.default.bool,useCSSTransforms:Qe.default.bool,transformScale:Qe.default.number,isDroppable:Qe.default.bool,resizeHandles:cB,resizeHandle:dB,onLayoutChange:Qe.default.func,onDragStart:Qe.default.func,onDrag:Qe.default.func,onDragStop:Qe.default.func,onResizeStart:Qe.default.func,onResize:Qe.default.func,onResizeStop:Qe.default.func,onDrop:Qe.default.func,droppingItem:Qe.default.shape({i:Qe.default.string.isRequired,w:Qe.default.number.isRequired,h:Qe.default.number.isRequired}),children:function(e,t){const r=e[t],n={};lB.default.Children.forEach(r,function(a){if((a==null?void 0:a.key)!=null){if(n[a.key])throw new Error('Duplicate child key "'+a.key+'" found! This will cause problems in ReactGridLayout.');n[a.key]=!0}})},innerRef:Qe.default.any};Object.defineProperty(a0,"__esModule",{value:!0});a0.default=void 0;var Tc=r_(E),IN=zd,bt=r_(Pi),uB=r5,hB=oB,Mc=nt,Ir=Oa,FN=yi,fB=r_(Hw);function r_(e){return e&&e.__esModule?e:{default:e}}function BN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ty(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BN(Object(r),!0).forEach(function(n){Qs(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qs(e,t,r){return(t=mB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mB(e){var t=pB(e,"string");return typeof t=="symbol"?t:t+""}function pB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class n_ extends Tc.default.Component{constructor(){super(...arguments),Qs(this,"state",{resizing:null,dragging:null,className:""}),Qs(this,"elementRef",Tc.default.createRef()),Qs(this,"onDragStart",(t,r)=>{let{node:n}=r;const{onDragStart:a,transformScale:i}=this.props;if(!a)return;const o={top:0,left:0},{offsetParent:c}=n;if(!c)return;const d=c.getBoundingClientRect(),u=n.getBoundingClientRect(),f=u.left/i,m=d.left/i,p=u.top/i,x=d.top/i;o.left=f-m+c.scrollLeft,o.top=p-x+c.scrollTop,this.setState({dragging:o});const{x:v,y}=(0,Ir.calcXY)(this.getPositionParams(),o.top,o.left,this.props.w,this.props.h);return a.call(this,this.props.i,v,y,{e:t,node:n,newPosition:o})}),Qs(this,"onDrag",(t,r,n)=>{let{node:a,deltaX:i,deltaY:o}=r;const{onDrag:c}=this.props;if(!c)return;if(!this.state.dragging)throw new Error("onDrag called before onDragStart.");let d=this.state.dragging.top+o,u=this.state.dragging.left+i;const{isBounded:f,i:m,w:p,h:x,containerWidth:v}=this.props,y=this.getPositionParams();if(f){const{offsetParent:N}=a;if(N){const{margin:S,rowHeight:C}=this.props,O=N.clientHeight-(0,Ir.calcGridItemWHPx)(x,C,S[1]);d=(0,Ir.clamp)(d,0,O);const A=(0,Ir.calcGridColWidth)(y),z=v-(0,Ir.calcGridItemWHPx)(p,A,S[0]);u=(0,Ir.clamp)(u,0,z)}}const _={top:d,left:u};n?this.setState({dragging:_}):(0,IN.flushSync)(()=>{this.setState({dragging:_})});const{x:w,y:b}=(0,Ir.calcXY)(y,d,u,p,x);return c.call(this,m,w,b,{e:t,node:a,newPosition:_})}),Qs(this,"onDragStop",(t,r)=>{let{node:n}=r;const{onDragStop:a}=this.props;if(!a)return;if(!this.state.dragging)throw new Error("onDragEnd called before onDragStart.");const{w:i,h:o,i:c}=this.props,{left:d,top:u}=this.state.dragging,f={top:u,left:d};this.setState({dragging:null});const{x:m,y:p}=(0,Ir.calcXY)(this.getPositionParams(),u,d,i,o);return a.call(this,c,m,p,{e:t,node:n,newPosition:f})}),Qs(this,"onResizeStop",(t,r,n)=>this.onResizeHandler(t,r,n,"onResizeStop")),Qs(this,"onResizeStart",(t,r,n)=>this.onResizeHandler(t,r,n,"onResizeStart")),Qs(this,"onResize",(t,r,n)=>this.onResizeHandler(t,r,n,"onResize"))}shouldComponentUpdate(t,r){if(this.props.children!==t.children||this.props.droppingPosition!==t.droppingPosition)return!0;const n=(0,Ir.calcGridItemPosition)(this.getPositionParams(this.props),this.props.x,this.props.y,this.props.w,this.props.h,this.state),a=(0,Ir.calcGridItemPosition)(this.getPositionParams(t),t.x,t.y,t.w,t.h,r);return!(0,Mc.fastPositionEqual)(n,a)||this.props.useCSSTransforms!==t.useCSSTransforms}componentDidMount(){this.moveDroppingItem({})}componentDidUpdate(t){this.moveDroppingItem(t)}moveDroppingItem(t){const{droppingPosition:r}=this.props;if(!r)return;const n=this.elementRef.current;if(!n)return;const a=t.droppingPosition||{left:0,top:0},{dragging:i}=this.state,o=i&&r.left!==a.left||r.top!==a.top;if(!i)this.onDragStart(r.e,{node:n,deltaX:r.left,deltaY:r.top});else if(o){const c=r.left-i.left,d=r.top-i.top;this.onDrag(r.e,{node:n,deltaX:c,deltaY:d},!0)}}getPositionParams(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return{cols:t.cols,containerPadding:t.containerPadding,containerWidth:t.containerWidth,margin:t.margin,maxRows:t.maxRows,rowHeight:t.rowHeight}}createStyle(t){const{usePercentages:r,containerWidth:n,useCSSTransforms:a}=this.props;let i;return a?i=(0,Mc.setTransform)(t):(i=(0,Mc.setTopLeft)(t),r&&(i.left=(0,Mc.perc)(t.left/n),i.width=(0,Mc.perc)(t.width/n))),i}mixinDraggable(t,r){return Tc.default.createElement(uB.DraggableCore,{disabled:!r,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:""),scale:this.props.transformScale,nodeRef:this.elementRef},t)}curryResizeHandler(t,r){return(n,a)=>r(n,a,t)}mixinResizable(t,r,n){const{cols:a,minW:i,minH:o,maxW:c,maxH:d,transformScale:u,resizeHandles:f,resizeHandle:m}=this.props,p=this.getPositionParams(),x=(0,Ir.calcGridItemPosition)(p,0,0,a,0).width,v=(0,Ir.calcGridItemPosition)(p,0,0,i,o),y=(0,Ir.calcGridItemPosition)(p,0,0,c,d),_=[v.width,v.height],w=[Math.min(y.width,x),Math.min(y.height,1/0)];return Tc.default.createElement(hB.Resizable,{draggableOpts:{disabled:!n},className:n?void 0:"react-resizable-hide",width:r.width,height:r.height,minConstraints:_,maxConstraints:w,onResizeStop:this.curryResizeHandler(r,this.onResizeStop),onResizeStart:this.curryResizeHandler(r,this.onResizeStart),onResize:this.curryResizeHandler(r,this.onResize),transformScale:u,resizeHandles:f,handle:m},t)}onResizeHandler(t,r,n,a){let{node:i,size:o,handle:c}=r;const d=this.props[a];if(!d)return;const{x:u,y:f,i:m,maxH:p,minH:x,containerWidth:v}=this.props,{minW:y,maxW:_}=this.props;let w=o;i&&(w=(0,Mc.resizeItemInDirection)(c,n,o,v),(0,IN.flushSync)(()=>{this.setState({resizing:a==="onResizeStop"?null:w})}));let{w:b,h:N}=(0,Ir.calcWH)(this.getPositionParams(),w.width,w.height,u,f,c);b=(0,Ir.clamp)(b,Math.max(y,1),_),N=(0,Ir.clamp)(N,x,p),d.call(this,m,b,N,{e:t,node:i,size:w,handle:c})}render(){const{x:t,y:r,w:n,h:a,isDraggable:i,isResizable:o,droppingPosition:c,useCSSTransforms:d}=this.props,u=(0,Ir.calcGridItemPosition)(this.getPositionParams(),t,r,n,a,this.state),f=Tc.default.Children.only(this.props.children);let m=Tc.default.cloneElement(f,{ref:this.elementRef,className:(0,fB.default)("react-grid-item",f.props.className,this.props.className,{static:this.props.static,resizing:!!this.state.resizing,"react-draggable":i,"react-draggable-dragging":!!this.state.dragging,dropping:!!c,cssTransforms:d}),style:ty(ty(ty({},this.props.style),f.props.style),this.createStyle(u))});return m=this.mixinResizable(m,u,o),m=this.mixinDraggable(m,i),m}}a0.default=n_;Qs(n_,"propTypes",{children:bt.default.element,cols:bt.default.number.isRequired,containerWidth:bt.default.number.isRequired,rowHeight:bt.default.number.isRequired,margin:bt.default.array.isRequired,maxRows:bt.default.number.isRequired,containerPadding:bt.default.array.isRequired,x:bt.default.number.isRequired,y:bt.default.number.isRequired,w:bt.default.number.isRequired,h:bt.default.number.isRequired,minW:function(e,t){const r=e[t];if(typeof r!="number")return new Error("minWidth not Number");if(r>e.w||r>e.maxW)return new Error("minWidth larger than item width/maxWidth")},maxW:function(e,t){const r=e[t];if(typeof r!="number")return new Error("maxWidth not Number");if(r<e.w||r<e.minW)return new Error("maxWidth smaller than item width/minWidth")},minH:function(e,t){const r=e[t];if(typeof r!="number")return new Error("minHeight not Number");if(r>e.h||r>e.maxH)return new Error("minHeight larger than item height/maxHeight")},maxH:function(e,t){const r=e[t];if(typeof r!="number")return new Error("maxHeight not Number");if(r<e.h||r<e.minH)return new Error("maxHeight smaller than item height/minHeight")},i:bt.default.string.isRequired,resizeHandles:FN.resizeHandleAxesType,resizeHandle:FN.resizeHandleType,onDragStop:bt.default.func,onDragStart:bt.default.func,onDrag:bt.default.func,onResizeStop:bt.default.func,onResizeStart:bt.default.func,onResize:bt.default.func,isDraggable:bt.default.bool.isRequired,isResizable:bt.default.bool.isRequired,isBounded:bt.default.bool.isRequired,static:bt.default.bool,useCSSTransforms:bt.default.bool.isRequired,transformScale:bt.default.number,className:bt.default.string,handle:bt.default.string,cancel:bt.default.string,droppingPosition:bt.default.shape({e:bt.default.object.isRequired,left:bt.default.number.isRequired,top:bt.default.number.isRequired})});Qs(n_,"defaultProps",{className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0,transformScale:1});Object.defineProperty(mf,"__esModule",{value:!0});mf.default=void 0;var nl=l5(E),ry=Bw,gB=s_(Hw),qe=nt,xB=Oa,HN=s_(a0),yB=s_(yi);function s_(e){return e&&e.__esModule?e:{default:e}}function l5(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(l5=function(a,i){if(!i&&a&&a.__esModule)return a;var o,c,d={__proto__:null,default:a};if(a===null||typeof a!="object"&&typeof a!="function")return d;if(o=i?n:r){if(o.has(a))return o.get(a);o.set(a,d)}for(const u in a)u!=="default"&&{}.hasOwnProperty.call(a,u)&&((c=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(a,u))&&(c.get||c.set)?o(d,u,c):d[u]=a[u]);return d})(e,t)}function WN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WN(Object(r),!0).forEach(function(n){Br(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Br(e,t,r){return(t=vB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vB(e){var t=bB(e,"string");return typeof t=="symbol"?t:t+""}function bB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const UN="react-grid-layout";let c5=!1;try{c5=/firefox/i.test(navigator.userAgent)}catch{}class h0 extends nl.Component{constructor(){super(...arguments),Br(this,"state",{activeDrag:null,layout:(0,qe.synchronizeLayoutWithChildren)(this.props.layout,this.props.children,this.props.cols,(0,qe.compactType)(this.props),this.props.allowOverlap),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null,resizing:!1,droppingDOMNode:null,children:[]}),Br(this,"dragEnterCounter",0),Br(this,"onDragStart",(t,r,n,a)=>{let{e:i,node:o}=a;const{layout:c}=this.state,d=(0,qe.getLayoutItem)(c,t);if(!d)return;const u={w:d.w,h:d.h,x:d.x,y:d.y,placeholder:!0,i:t};return this.setState({oldDragItem:(0,qe.cloneLayoutItem)(d),oldLayout:c,activeDrag:u}),this.props.onDragStart(c,d,d,null,i,o)}),Br(this,"onDrag",(t,r,n,a)=>{let{e:i,node:o}=a;const{oldDragItem:c}=this.state;let{layout:d}=this.state;const{cols:u,allowOverlap:f,preventCollision:m}=this.props,p=(0,qe.getLayoutItem)(d,t);if(!p)return;const x={w:p.w,h:p.h,x:p.x,y:p.y,placeholder:!0,i:t};d=(0,qe.moveElement)(d,p,r,n,!0,m,(0,qe.compactType)(this.props),u,f),this.props.onDrag(d,c,p,x,i,o),this.setState({layout:f?d:(0,qe.compact)(d,(0,qe.compactType)(this.props),u),activeDrag:x})}),Br(this,"onDragStop",(t,r,n,a)=>{let{e:i,node:o}=a;if(!this.state.activeDrag)return;const{oldDragItem:c}=this.state;let{layout:d}=this.state;const{cols:u,preventCollision:f,allowOverlap:m}=this.props,p=(0,qe.getLayoutItem)(d,t);if(!p)return;d=(0,qe.moveElement)(d,p,r,n,!0,f,(0,qe.compactType)(this.props),u,m);const v=m?d:(0,qe.compact)(d,(0,qe.compactType)(this.props),u);this.props.onDragStop(v,c,p,null,i,o);const{oldLayout:y}=this.state;this.setState({activeDrag:null,layout:v,oldDragItem:null,oldLayout:null}),this.onLayoutMaybeChanged(v,y)}),Br(this,"onResizeStart",(t,r,n,a)=>{let{e:i,node:o}=a;const{layout:c}=this.state,d=(0,qe.getLayoutItem)(c,t);d&&(this.setState({oldResizeItem:(0,qe.cloneLayoutItem)(d),oldLayout:this.state.layout,resizing:!0}),this.props.onResizeStart(c,d,d,null,i,o))}),Br(this,"onResize",(t,r,n,a)=>{let{e:i,node:o,size:c,handle:d}=a;const{oldResizeItem:u}=this.state,{layout:f}=this.state,{cols:m,preventCollision:p,allowOverlap:x}=this.props;let v=!1,y,_,w;const[b,N]=(0,qe.withLayoutItem)(f,t,C=>{let O;return _=C.x,w=C.y,["sw","w","nw","n","ne"].indexOf(d)!==-1&&(["sw","nw","w"].indexOf(d)!==-1&&(_=C.x+(C.w-r),r=C.x!==_&&_<0?C.w:r,_=_<0?0:_),["ne","n","nw"].indexOf(d)!==-1&&(w=C.y+(C.h-n),n=C.y!==w&&w<0?C.h:n,w=w<0?0:w),v=!0),p&&!x&&(O=(0,qe.getAllCollisions)(f,sl(sl({},C),{},{w:r,h:n,x:_,y:w})).filter(z=>z.i!==C.i).length>0,O&&(w=C.y,n=C.h,_=C.x,r=C.w,v=!1)),C.w=r,C.h=n,C});if(!N)return;y=b,v&&(y=(0,qe.moveElement)(b,N,_,w,!0,this.props.preventCollision,(0,qe.compactType)(this.props),m,x));const S={w:N.w,h:N.h,x:N.x,y:N.y,static:!0,i:t};this.props.onResize(y,u,N,S,i,o),this.setState({layout:x?y:(0,qe.compact)(y,(0,qe.compactType)(this.props),m),activeDrag:S})}),Br(this,"onResizeStop",(t,r,n,a)=>{let{e:i,node:o}=a;const{layout:c,oldResizeItem:d}=this.state,{cols:u,allowOverlap:f}=this.props,m=(0,qe.getLayoutItem)(c,t),p=f?c:(0,qe.compact)(c,(0,qe.compactType)(this.props),u);this.props.onResizeStop(p,d,m,null,i,o);const{oldLayout:x}=this.state;this.setState({activeDrag:null,layout:p,oldResizeItem:null,oldLayout:null,resizing:!1}),this.onLayoutMaybeChanged(p,x)}),Br(this,"onDragOver",t=>{var r;if(t.preventDefault(),t.stopPropagation(),c5&&!((r=t.nativeEvent.target)!==null&&r!==void 0&&r.classList.contains(UN)))return!1;const{droppingItem:n,onDropDragOver:a,margin:i,cols:o,rowHeight:c,maxRows:d,width:u,containerPadding:f,transformScale:m}=this.props,p=a==null?void 0:a(t);if(p===!1)return this.state.droppingDOMNode&&this.removeDroppingPlaceholder(),!1;const x=sl(sl({},n),p),{layout:v}=this.state,y=t.currentTarget.getBoundingClientRect(),_=t.clientX-y.left,w=t.clientY-y.top,b={left:_/m,top:w/m,e:t};if(this.state.droppingDOMNode){if(this.state.droppingPosition){const{left:N,top:S}=this.state.droppingPosition;(N!=_||S!=w)&&this.setState({droppingPosition:b})}}else{const N={cols:o,margin:i,maxRows:d,rowHeight:c,containerWidth:u,containerPadding:f||i},S=(0,xB.calcXY)(N,w,_,x.w,x.h);this.setState({droppingDOMNode:nl.createElement("div",{key:x.i}),droppingPosition:b,layout:[...v,sl(sl({},x),{},{x:S.x,y:S.y,static:!1,isDraggable:!0})]})}}),Br(this,"removeDroppingPlaceholder",()=>{const{droppingItem:t,cols:r}=this.props,{layout:n}=this.state,a=(0,qe.compact)(n.filter(i=>i.i!==t.i),(0,qe.compactType)(this.props),r,this.props.allowOverlap);this.setState({layout:a,droppingDOMNode:null,activeDrag:null,droppingPosition:void 0})}),Br(this,"onDragLeave",t=>{t.preventDefault(),t.stopPropagation(),this.dragEnterCounter--,this.dragEnterCounter===0&&this.removeDroppingPlaceholder()}),Br(this,"onDragEnter",t=>{t.preventDefault(),t.stopPropagation(),this.dragEnterCounter++}),Br(this,"onDrop",t=>{t.preventDefault(),t.stopPropagation();const{droppingItem:r}=this.props,{layout:n}=this.state,a=n.find(i=>i.i===r.i);this.dragEnterCounter=0,this.removeDroppingPlaceholder(),this.props.onDrop(n,a,t)})}componentDidMount(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)}static getDerivedStateFromProps(t,r){let n;return r.activeDrag?null:(!(0,ry.deepEqual)(t.layout,r.propsLayout)||t.compactType!==r.compactType?n=t.layout:(0,qe.childrenEqual)(t.children,r.children)||(n=r.layout),n?{layout:(0,qe.synchronizeLayoutWithChildren)(n,t.children,t.cols,(0,qe.compactType)(t),t.allowOverlap),compactType:t.compactType,children:t.children,propsLayout:t.layout}:null)}shouldComponentUpdate(t,r){return this.props.children!==t.children||!(0,qe.fastRGLPropsEqual)(this.props,t,ry.deepEqual)||this.state.activeDrag!==r.activeDrag||this.state.mounted!==r.mounted||this.state.droppingPosition!==r.droppingPosition}componentDidUpdate(t,r){if(!this.state.activeDrag){const n=this.state.layout,a=r.layout;this.onLayoutMaybeChanged(n,a)}}containerHeight(){if(!this.props.autoSize)return;const t=(0,qe.bottom)(this.state.layout),r=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return t*this.props.rowHeight+(t-1)*this.props.margin[1]+r*2+"px"}onLayoutMaybeChanged(t,r){r||(r=this.state.layout),(0,ry.deepEqual)(r,t)||this.props.onLayoutChange(t)}placeholder(){const{activeDrag:t}=this.state;if(!t)return null;const{width:r,cols:n,margin:a,containerPadding:i,rowHeight:o,maxRows:c,useCSSTransforms:d,transformScale:u}=this.props;return nl.createElement(HN.default,{w:t.w,h:t.h,x:t.x,y:t.y,i:t.i,className:"react-grid-placeholder ".concat(this.state.resizing?"placeholder-resizing":""),containerWidth:r,cols:n,margin:a,containerPadding:i||a,maxRows:c,rowHeight:o,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:d,transformScale:u},nl.createElement("div",null))}processGridItem(t,r){if(!t||!t.key)return;const n=(0,qe.getLayoutItem)(this.state.layout,String(t.key));if(!n)return null;const{width:a,cols:i,margin:o,containerPadding:c,rowHeight:d,maxRows:u,isDraggable:f,isResizable:m,isBounded:p,useCSSTransforms:x,transformScale:v,draggableCancel:y,draggableHandle:_,resizeHandles:w,resizeHandle:b}=this.props,{mounted:N,droppingPosition:S}=this.state,C=typeof n.isDraggable=="boolean"?n.isDraggable:!n.static&&f,O=typeof n.isResizable=="boolean"?n.isResizable:!n.static&&m,A=n.resizeHandles||w,z=C&&p&&n.isBounded!==!1;return nl.createElement(HN.default,{containerWidth:a,cols:i,margin:o,containerPadding:c||o,maxRows:u,rowHeight:d,cancel:y,handle:_,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:C,isResizable:O,isBounded:z,useCSSTransforms:x&&N,usePercentages:!N,transformScale:v,w:n.w,h:n.h,x:n.x,y:n.y,i:n.i,minH:n.minH,minW:n.minW,maxH:n.maxH,maxW:n.maxW,static:n.static,droppingPosition:r?S:void 0,resizeHandles:A,resizeHandle:b},t)}render(){const{className:t,style:r,isDroppable:n,innerRef:a}=this.props,i=(0,gB.default)(UN,t),o=sl({height:this.containerHeight()},r);return nl.createElement("div",{ref:a,className:i,style:o,onDrop:n?this.onDrop:qe.noop,onDragLeave:n?this.onDragLeave:qe.noop,onDragEnter:n?this.onDragEnter:qe.noop,onDragOver:n?this.onDragOver:qe.noop},nl.Children.map(this.props.children,c=>this.processGridItem(c)),n&&this.state.droppingDOMNode&&this.processGridItem(this.state.droppingDOMNode,!0),this.placeholder())}}mf.default=h0;Br(h0,"displayName","ReactGridLayout");Br(h0,"propTypes",yB.default);Br(h0,"defaultProps",{autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isBounded:!1,isDraggable:!0,isResizable:!0,allowOverlap:!1,isDroppable:!1,useCSSTransforms:!0,transformScale:1,verticalCompact:!0,compactType:"vertical",preventCollision:!1,droppingItem:{i:"__dropping-elem__",h:1,w:1},resizeHandles:["se"],onLayoutChange:qe.noop,onDragStart:qe.noop,onDrag:qe.noop,onDragStop:qe.noop,onResizeStart:qe.noop,onResize:qe.noop,onResizeStop:qe.noop,onDrop:qe.noop,onDropDragOver:qe.noop});var f0={},Kl={};Object.defineProperty(Kl,"__esModule",{value:!0});Kl.findOrGenerateResponsiveLayout=kB;Kl.getBreakpointFromWidth=wB;Kl.getColsFromBreakpoint=_B;Kl.sortBreakpoints=a_;var Pm=nt;function wB(e,t){const r=a_(e);let n=r[0];for(let a=1,i=r.length;a<i;a++){const o=r[a];t>e[o]&&(n=o)}return n}function _B(e,t){if(!t[e])throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+e+" is missing!");return t[e]}function kB(e,t,r,n,a,i){if(e[r])return(0,Pm.cloneLayout)(e[r]);let o=e[n];const c=a_(t),d=c.slice(c.indexOf(r));for(let u=0,f=d.length;u<f;u++){const m=d[u];if(e[m]){o=e[m];break}}return o=(0,Pm.cloneLayout)(o||[]),(0,Pm.compact)((0,Pm.correctBounds)(o,{cols:a}),i,a)}function a_(e){return Object.keys(e).sort(function(r,n){return e[r]-e[n]})}Object.defineProperty(f0,"__esModule",{value:!0});f0.default=void 0;var VN=u5(E),Mn=d5(Pi),ny=Bw,od=nt,al=Kl,jB=d5(mf);const NB=["breakpoint","breakpoints","cols","layouts","margin","containerPadding","onBreakpointChange","onLayoutChange","onWidthChange"];function d5(e){return e&&e.__esModule?e:{default:e}}function u5(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(u5=function(a,i){if(!i&&a&&a.__esModule)return a;var o,c,d={__proto__:null,default:a};if(a===null||typeof a!="object"&&typeof a!="function")return d;if(o=i?n:r){if(o.has(a))return o.get(a);o.set(a,d)}for(const u in a)u!=="default"&&{}.hasOwnProperty.call(a,u)&&((c=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(a,u))&&(c.get||c.set)?o(d,u,c):d[u]=a[u]);return d})(e,t)}function qv(){return qv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qv.apply(null,arguments)}function SB(e,t){if(e==null)return{};var r,n,a=CB(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function CB(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function qN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qN(Object(r),!0).forEach(function(n){Fh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fh(e,t,r){return(t=EB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EB(e){var t=PB(e,"string");return typeof t=="symbol"?t:t+""}function PB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const YN=e=>Object.prototype.toString.call(e);function Tm(e,t){return e==null?null:Array.isArray(e)?e:e[t]}class i_ extends VN.Component{constructor(){super(...arguments),Fh(this,"state",this.generateInitialState()),Fh(this,"onLayoutChange",t=>{this.props.onLayoutChange(t,sy(sy({},this.props.layouts),{},{[this.state.breakpoint]:t}))})}generateInitialState(){const{width:t,breakpoints:r,layouts:n,cols:a}=this.props,i=(0,al.getBreakpointFromWidth)(r,t),o=(0,al.getColsFromBreakpoint)(i,a),c=this.props.verticalCompact===!1?null:this.props.compactType;return{layout:(0,al.findOrGenerateResponsiveLayout)(n,r,i,i,o,c),breakpoint:i,cols:o}}static getDerivedStateFromProps(t,r){if(!(0,ny.deepEqual)(t.layouts,r.layouts)){const{breakpoint:n,cols:a}=r;return{layout:(0,al.findOrGenerateResponsiveLayout)(t.layouts,t.breakpoints,n,n,a,t.compactType),layouts:t.layouts}}return null}componentDidUpdate(t){(this.props.width!=t.width||this.props.breakpoint!==t.breakpoint||!(0,ny.deepEqual)(this.props.breakpoints,t.breakpoints)||!(0,ny.deepEqual)(this.props.cols,t.cols))&&this.onWidthChange(t)}onWidthChange(t){const{breakpoints:r,cols:n,layouts:a,compactType:i}=this.props,o=this.props.breakpoint||(0,al.getBreakpointFromWidth)(this.props.breakpoints,this.props.width),c=this.state.breakpoint,d=(0,al.getColsFromBreakpoint)(o,n),u=sy({},a);if(c!==o||t.breakpoints!==r||t.cols!==n){c in u||(u[c]=(0,od.cloneLayout)(this.state.layout));let p=(0,al.findOrGenerateResponsiveLayout)(u,r,o,c,d,i);p=(0,od.synchronizeLayoutWithChildren)(p,this.props.children,d,i,this.props.allowOverlap),u[o]=p,this.props.onBreakpointChange(o,d),this.props.onLayoutChange(p,u),this.setState({breakpoint:o,layout:p,cols:d})}const f=Tm(this.props.margin,o),m=Tm(this.props.containerPadding,o);this.props.onWidthChange(this.props.width,f,d,m)}render(){const t=this.props,{breakpoint:r,breakpoints:n,cols:a,layouts:i,margin:o,containerPadding:c,onBreakpointChange:d,onLayoutChange:u,onWidthChange:f}=t,m=SB(t,NB);return VN.createElement(jB.default,qv({},m,{margin:Tm(o,this.state.breakpoint),containerPadding:Tm(c,this.state.breakpoint),onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))}}f0.default=i_;Fh(i_,"propTypes",{breakpoint:Mn.default.string,breakpoints:Mn.default.object,allowOverlap:Mn.default.bool,cols:Mn.default.object,margin:Mn.default.oneOfType([Mn.default.array,Mn.default.object]),containerPadding:Mn.default.oneOfType([Mn.default.array,Mn.default.object]),layouts(e,t){if(YN(e[t])!=="[object Object]")throw new Error("Layout property must be an object. Received: "+YN(e[t]));Object.keys(e[t]).forEach(r=>{if(!(r in e.breakpoints))throw new Error("Each key in layouts must align with a key in breakpoints.");(0,od.validateLayout)(e.layouts[r],"layouts."+r)})},width:Mn.default.number.isRequired,onBreakpointChange:Mn.default.func,onLayoutChange:Mn.default.func,onWidthChange:Mn.default.func});Fh(i_,"defaultProps",{breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},containerPadding:{lg:null,md:null,sm:null,xs:null,xxs:null},layouts:{},margin:[10,10],allowOverlap:!1,onBreakpointChange:od.noop,onLayoutChange:od.noop,onWidthChange:od.noop});var o_={},h5=function(){if(typeof Map<"u")return Map;function e(t,r){var n=-1;return t.some(function(a,i){return a[0]===r?(n=i,!0):!1}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var n=e(this.__entries__,r),a=this.__entries__[n];return a&&a[1]},t.prototype.set=function(r,n){var a=e(this.__entries__,r);~a?this.__entries__[a][1]=n:this.__entries__.push([r,n])},t.prototype.delete=function(r){var n=this.__entries__,a=e(n,r);~a&&n.splice(a,1)},t.prototype.has=function(r){return!!~e(this.__entries__,r)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(r,n){n===void 0&&(n=null);for(var a=0,i=this.__entries__;a<i.length;a++){var o=i[a];r.call(n,o[1],o[0])}},t}()}(),Yv=typeof window<"u"&&typeof document<"u"&&window.document===document,lg=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),TB=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(lg):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),MB=2;function OB(e,t){var r=!1,n=!1,a=0;function i(){r&&(r=!1,e()),n&&c()}function o(){TB(i)}function c(){var d=Date.now();if(r){if(d-a<MB)return;n=!0}else r=!0,n=!1,setTimeout(o,t);a=d}return c}var DB=20,LB=["top","right","bottom","left","width","height","size","weight"],AB=typeof MutationObserver<"u",RB=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=OB(this.refresh.bind(this),DB)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var r=this.observers_,n=r.indexOf(t);~n&&r.splice(n,1),!r.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return t.forEach(function(r){return r.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!Yv||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),AB?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!Yv||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var r=t.propertyName,n=r===void 0?"":r,a=LB.some(function(i){return!!~n.indexOf(i)});a&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),f5=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var a=n[r];Object.defineProperty(e,a,{value:t[a],enumerable:!1,writable:!1,configurable:!0})}return e},jd=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||lg},m5=m0(0,0,0,0);function cg(e){return parseFloat(e)||0}function GN(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(n,a){var i=e["border-"+a+"-width"];return n+cg(i)},0)}function zB(e){for(var t=["top","right","bottom","left"],r={},n=0,a=t;n<a.length;n++){var i=a[n],o=e["padding-"+i];r[i]=cg(o)}return r}function $B(e){var t=e.getBBox();return m0(0,0,t.width,t.height)}function IB(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return m5;var n=jd(e).getComputedStyle(e),a=zB(n),i=a.left+a.right,o=a.top+a.bottom,c=cg(n.width),d=cg(n.height);if(n.boxSizing==="border-box"&&(Math.round(c+i)!==t&&(c-=GN(n,"left","right")+i),Math.round(d+o)!==r&&(d-=GN(n,"top","bottom")+o)),!BB(e)){var u=Math.round(c+i)-t,f=Math.round(d+o)-r;Math.abs(u)!==1&&(c-=u),Math.abs(f)!==1&&(d-=f)}return m0(a.left,a.top,c,d)}var FB=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof jd(e).SVGGraphicsElement}:function(e){return e instanceof jd(e).SVGElement&&typeof e.getBBox=="function"}}();function BB(e){return e===jd(e).document.documentElement}function HB(e){return Yv?FB(e)?$B(e):IB(e):m5}function WB(e){var t=e.x,r=e.y,n=e.width,a=e.height,i=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(i.prototype);return f5(o,{x:t,y:r,width:n,height:a,top:r,right:t+n,bottom:a+r,left:t}),o}function m0(e,t,r,n){return{x:e,y:t,width:r,height:n}}var UB=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=m0(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=HB(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),VB=function(){function e(t,r){var n=WB(r);f5(this,{target:t,contentRect:n})}return e}(),qB=function(){function e(t,r,n){if(this.activeObservations_=[],this.observations_=new h5,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=r,this.callbackCtx_=n}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof jd(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)||(r.set(t,new UB(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof jd(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)&&(r.delete(t),r.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&t.activeObservations_.push(r)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,r=this.activeObservations_.map(function(n){return new VB(n.target,n.broadcastRect())});this.callback_.call(t,r,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),p5=typeof WeakMap<"u"?new WeakMap:new h5,g5=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=RB.getInstance(),n=new qB(t,r,this);p5.set(this,n)}return e}();["observe","unobserve","disconnect"].forEach(function(e){g5.prototype[e]=function(){var t;return(t=p5.get(this))[e].apply(t,arguments)}});var YB=function(){return typeof lg.ResizeObserver<"u"?lg.ResizeObserver:g5}();const GB=Object.freeze(Object.defineProperty({__proto__:null,default:YB},Symbol.toStringTag,{value:"Module"})),ZB=zM(GB);Object.defineProperty(o_,"__esModule",{value:!0});o_.default=aH;var Mm=x5(E),KB=l_(Pi),XB=l_(ZB),JB=l_(Hw);const QB=["measureBeforeMount"];function l_(e){return e&&e.__esModule?e:{default:e}}function x5(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(x5=function(a,i){if(!i&&a&&a.__esModule)return a;var o,c,d={__proto__:null,default:a};if(a===null||typeof a!="object"&&typeof a!="function")return d;if(o=i?n:r){if(o.has(a))return o.get(a);o.set(a,d)}for(const u in a)u!=="default"&&{}.hasOwnProperty.call(a,u)&&((c=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(a,u))&&(c.get||c.set)?o(d,u,c):d[u]=a[u]);return d})(e,t)}function Gv(){return Gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gv.apply(null,arguments)}function eH(e,t){if(e==null)return{};var r,n,a=tH(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function tH(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Oc(e,t,r){return(t=rH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rH(e){var t=nH(e,"string");return typeof t=="symbol"?t:t+""}function nH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const sH="react-grid-layout";function aH(e){var t;return t=class extends Mm.Component{constructor(){super(...arguments),Oc(this,"state",{width:1280}),Oc(this,"elementRef",Mm.createRef()),Oc(this,"mounted",!1),Oc(this,"resizeObserver",void 0)}componentDidMount(){this.mounted=!0,this.resizeObserver=new XB.default(a=>{if(this.elementRef.current instanceof HTMLElement){const o=a[0].contentRect.width;this.setState({width:o})}});const n=this.elementRef.current;n instanceof HTMLElement&&this.resizeObserver.observe(n)}componentWillUnmount(){this.mounted=!1;const n=this.elementRef.current;n instanceof HTMLElement&&this.resizeObserver.unobserve(n),this.resizeObserver.disconnect()}render(){const n=this.props,{measureBeforeMount:a}=n,i=eH(n,QB);return a&&!this.mounted?Mm.createElement("div",{className:(0,JB.default)(this.props.className,sH),style:this.props.style,ref:this.elementRef}):Mm.createElement(e,Gv({innerRef:this.elementRef},i,this.state))}},Oc(t,"defaultProps",{measureBeforeMount:!1}),Oc(t,"propTypes",{measureBeforeMount:KB.default.bool}),t}(function(e){e.exports=mf.default,e.exports.utils=nt,e.exports.calculateUtils=Oa,e.exports.Responsive=f0.default,e.exports.Responsive.utils=Kl,e.exports.WidthProvider=o_.default})(DP);var ZN=DP.exports;const iH=ZN.WidthProvider(ZN.Responsive),oH=()=>{const[e,t]=E.useState(!1),[r,n]=E.useState({totalLeads:0,newLeads:0,activeProposals:0,wonDeals:0,conversionRate:0,revenue:0}),[a,i]=E.useState([]),[o,c]=E.useState([]),[d,u]=E.useState(!1),[f,m]=E.useState(null),[p,x]=E.useState(!1),v={lg:[{i:"stats",x:0,y:0,w:12,h:2,minW:12,maxW:12,minH:2,maxH:2},{i:"conversion",x:0,y:2,w:4,h:4,minW:3,minH:3},{i:"revenue",x:4,y:2,w:4,h:4,minW:3,minH:3},{i:"activity",x:8,y:2,w:4,h:4,minW:3,minH:3},{i:"tasks",x:0,y:6,w:6,h:5,minW:4,minH:4},{i:"calendar",x:6,y:6,w:6,h:6,minW:6,minH:5}],md:[{i:"stats",x:0,y:0,w:12,h:2,minW:12,maxW:12,minH:2,maxH:2},{i:"conversion",x:0,y:2,w:6,h:4,minW:4,minH:3},{i:"revenue",x:6,y:2,w:6,h:4,minW:4,minH:3},{i:"activity",x:0,y:6,w:12,h:4,minW:6,minH:3},{i:"tasks",x:0,y:10,w:6,h:5,minW:4,minH:4},{i:"calendar",x:6,y:10,w:6,h:6,minW:6,minH:5}],sm:[{i:"stats",x:0,y:0,w:12,h:2,minW:12,maxW:12,minH:2,maxH:2},{i:"conversion",x:0,y:2,w:12,h:3,minW:12,minH:3},{i:"revenue",x:0,y:5,w:12,h:3,minW:12,minH:3},{i:"activity",x:0,y:8,w:12,h:4,minW:12,minH:3},{i:"tasks",x:0,y:12,w:12,h:4,minW:12,minH:4},{i:"calendar",x:0,y:16,w:12,h:18,minW:12,minH:15}]},[y,_]=E.useState(()=>{const F=localStorage.getItem("dashboardLayouts");return F?JSON.parse(F):v});E.useEffect(()=>{t(!0),A(),w()},[]);const w=async()=>{try{const F=localStorage.getItem("crm_token"),G=await fetch(`${Y}/tasks?completed=false`,{headers:{Authorization:`Bearer ${F}`}});if(G.ok){const ee=await G.json();c(ee)}}catch(F){console.error("Error fetching tasks:",F)}},b=async F=>{try{const G=f?`${Y}/tasks/${f.id}`:`${Y}/tasks`,ee=f?"PUT":"POST",K=localStorage.getItem("crm_token");(await fetch(G,{method:ee,headers:{"Content-Type":"application/json",Authorization:`Bearer ${K}`},body:JSON.stringify(F)})).ok&&(w(),m(null))}catch(G){console.error("Error saving task:",G)}},N=async F=>{try{const G=localStorage.getItem("crm_token");(await fetch(`${Y}/tasks/${F}/toggle`,{method:"PATCH",headers:{Authorization:`Bearer ${G}`}})).ok&&w()}catch(G){console.error("Error toggling task:",G)}},S=async F=>{try{const G=localStorage.getItem("crm_token");(await fetch(`${Y}/tasks/${F}`,{method:"DELETE",headers:{Authorization:`Bearer ${G}`}})).ok&&w()}catch(G){console.error("Error deleting task:",G)}},C=F=>{const G=new Date,ee=new Date(F),K=G-ee,oe=Math.floor(K/(1e3*60)),Z=Math.floor(oe/60),pe=Math.floor(Z/24);return oe<1?"Ahora mismo":oe<60?`Hace ${oe} min`:Z<24?`Hace ${Z} horas`:`Hace ${pe} das`},O=F=>({lead_created:"",proposal_sent:"",deal_won:"",meeting_scheduled:"",note_added:"",status_changed:""})[F]||"",A=async()=>{try{const F=localStorage.getItem("crm_token"),G=await fetch(`${Y}/leads`,{headers:{Authorization:`Bearer ${F}`}});if(G.ok){const K=await G.json(),oe=K.filter(Q=>Q.status==="new").length,Z=K.filter(Q=>Q.status==="won").length,pe=K.length>0?(Z/K.length*100).toFixed(1):0;n({totalLeads:K.length,newLeads:oe,activeProposals:K.filter(Q=>Q.status==="proposal_sent").length,wonDeals:Z,conversionRate:pe,revenue:Z*2500})}const ee=await fetch(`${Y}/activities?limit=10`,{headers:{Authorization:`Bearer ${F}`}});if(ee.ok){const K=await ee.json();i(K.map(oe=>({id:oe.id,type:oe.type,description:oe.description,time:C(oe.created_at),icon:O(oe.type)})))}}catch(F){console.error("Error fetching dashboard data:",F)}},z=(F,G)=>{_(G),localStorage.setItem("dashboardLayouts",JSON.stringify(G))},$=[{label:"Total Leads",value:r.totalLeads,icon:s.jsx(ts,{className:"w-6 h-6"}),color:"blue",change:"+12%",progress:75},{label:"Nuevos",value:r.newLeads,icon:s.jsx(ir,{className:"w-6 h-6"}),color:"green",change:"+5%",progress:60},{label:"Propuestas Activas",value:r.activeProposals,icon:s.jsx(It,{className:"w-6 h-6"}),color:"yellow",change:"+8%",progress:45},{label:"Deals Ganados",value:r.wonDeals,icon:s.jsx(uR,{className:"w-6 h-6"}),color:"purple",change:"+3%",progress:30}],W=F=>{const G={blue:"bg-orange-50 text-orange-700 border-orange-200 dark:bg-orange-900/30 dark:text-orange-300 dark:border-orange-700",green:"bg-green-50 text-green-700 border-green-200 dark:bg-green-900/30 dark:text-green-300 dark:border-green-700",yellow:"bg-yellow-50 text-yellow-700 border-yellow-200 dark:bg-yellow-900/30 dark:text-yellow-300 dark:border-yellow-700",purple:"bg-purple-50 text-purple-700 border-purple-200 dark:bg-purple-900/30 dark:text-purple-300 dark:border-purple-700"};return G[F]||G.blue};return e?s.jsxs("div",{className:"p-4 pb-24",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Dashboard"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Vista general de tu CRM"})]}),s.jsx("div",{className:"flex items-center space-x-3",children:p?s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>x(!1),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),s.jsx("span",{children:"Guardar Layout"})]}),s.jsx("button",{onClick:()=>{localStorage.removeItem("dashboardLayouts"),_(v)},className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:" Restaurar"})]}):s.jsxs("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),s.jsx("span",{children:"Editar Layout"})]})})]}),s.jsxs(iH,{className:"layout",layouts:y,breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:12,sm:12,xs:12,xxs:12},rowHeight:80,onLayoutChange:z,draggableHandle:".drag-handle",margin:[16,16],containerPadding:[0,0],style:{width:"100%"},isDraggable:p,isResizable:p,resizeHandles:["se","sw","ne","nw"],useCSSTransforms:e,children:[s.jsx("div",{className:"bg-transparent",children:s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 h-full",children:$.map((F,G)=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-lg border flex items-center justify-center ${W(F.color)}`,children:F.icon}),s.jsx("span",{className:"text-xs font-medium text-green-600 dark:text-green-400",children:F.change})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:F.label}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:F.value})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mt-3",children:s.jsx("div",{className:"h-1.5 rounded-full bg-gradient-to-r from-orange-500 to-red-600 transition-all duration-500",style:{width:`${F.progress}%`}})})]},G))})},"stats"),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[s.jsx("div",{className:"drag-handle p-4 border-b border-gray-200 dark:border-gray-700 cursor-move bg-gray-50 dark:bg-gray-900/50",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Tasa de Conversin"})}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-5xl font-bold text-orange-600 dark:text-orange-400 mb-2",children:[r.conversionRate,"%"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Leads convertidos a clientes"}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-orange-500 to-red-600 transition-all duration-500",style:{width:`${r.conversionRate}%`}})})]})})]},"conversion"),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[s.jsx("div",{className:"drag-handle p-4 border-b border-gray-200 dark:border-gray-700 cursor-move bg-gray-50 dark:bg-gray-900/50",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Ingresos Estimados"})}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-4xl font-bold text-green-600 dark:text-green-400 mb-2",children:["",r.revenue.toLocaleString()]}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:["De ",r.wonDeals," deals ganados"]}),s.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm",children:[s.jsx("span",{className:"text-green-600 dark:text-green-400",children:""}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"+15% vs mes anterior"})]})]})})]},"revenue"),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[s.jsx("div",{className:"drag-handle p-4 border-b border-gray-200 dark:border-gray-700 cursor-move bg-gray-50 dark:bg-gray-900/50",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Actividad Reciente"})}),s.jsx("div",{className:"p-4 space-y-3 overflow-y-auto",style:{maxHeight:"calc(100% - 60px)"},children:a.map(F=>s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-700/60 rounded-lg border border-gray-100 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 transition-all",children:[s.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-white dark:bg-gray-800 shadow-sm flex-shrink-0",children:s.jsx("span",{className:"text-lg",children:F.icon})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:F.description}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:F.time})]})]},F.id))})]},"activity"),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[s.jsxs("div",{className:"drag-handle p-4 border-b border-gray-200 dark:border-gray-700 cursor-move bg-gray-50 dark:bg-gray-900/50 flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Tareas Pendientes"}),s.jsx("button",{onClick:()=>{m(null),u(!0)},className:"p-1.5 hover:bg-orange-100 dark:hover:bg-orange-900/30 rounded-lg transition-colors",children:s.jsx(xr,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})})]}),s.jsx("div",{className:"p-4 space-y-2 overflow-y-auto",style:{maxHeight:"calc(100% - 60px)"},children:o.length===0?s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-4",children:"No hay tareas pendientes"}):o.map(F=>s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg group hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:F.completed,onChange:()=>N(F.id),className:"w-4 h-4 text-orange-600 rounded cursor-pointer focus:ring-orange-500"}),s.jsx("span",{className:`text-sm flex-1 ${F.completed?"line-through text-gray-400":"text-gray-900 dark:text-white"}`,children:F.title}),s.jsx("button",{onClick:()=>S(F.id),className:"opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-700 text-xs transition-opacity",children:""})]},F.id))})]},"tasks"),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[s.jsx("div",{className:"drag-handle p-4 border-b border-gray-200 dark:border-gray-700 cursor-move bg-gray-50 dark:bg-gray-900/50",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Calendario"})}),s.jsx("div",{className:"p-4",style:{height:"calc(100% - 60px)"},children:s.jsx(N9,{})})]},"calendar")]}),Hg.createPortal(s.jsx(S9,{isOpen:d,onClose:()=>{u(!1),m(null)},onSave:b,task:f}),document.body)]}):null},lH=()=>{const[e,t]=E.useState([]),[r,n]=E.useState(!0),[a,i]=E.useState("all"),[o,c]=E.useState(""),[d,u]=E.useState("date"),[f,m]=E.useState(!1),[p,x]=E.useState([]),[v,y]=E.useState(null),[_,w]=E.useState({title:"",price:"",description:""}),[b,N]=E.useState(!1);E.useEffect(()=>{S()},[]);const S=async()=>{try{const K=await fetch(`${Y}/proposals`,{headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}});if(K.ok){const oe=await K.json();t(oe)}}catch(K){console.error("Error fetching proposals:",K)}finally{n(!1)}},C=async()=>{try{const[K,oe]=await Promise.all([fetch(`${Y}/leads`,{headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}}),fetch(`${Y}/proposals`,{headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}})]);if(K.ok&&oe.ok){const Z=await K.json(),Q=(await oe.json()).map(le=>le.lead_id),ce=Z.filter(le=>!Q.includes(le.id));x(ce)}}catch(K){console.error("Error fetching leads:",K)}},O=()=>{C(),m(!0)},A=async K=>{if(K.preventDefault(),!!v){N(!0);try{if(!(await fetch(`${Y}/proposals`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`},body:JSON.stringify({leadId:v.id,title:_.title,description:_.description,totalPrice:parseFloat(_.price)})})).ok)throw new Error("Error al crear propuesta");alert("Propuesta creada y enviada exitosamente"),m(!1),y(null),w({title:"",price:"",description:""}),S()}catch(oe){console.error("Error:",oe),alert("Error al crear propuesta")}finally{N(!1)}}},z=async K=>{try{if(!(await fetch(`${Y}/proposals/${K}/resend-email`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}})).ok)throw new Error("Error al reenviar email");alert("Email reenviado exitosamente")}catch(oe){console.error("Error:",oe),alert("Error al reenviar el email")}},$=K=>{const oe={pending:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 border border-yellow-200 dark:border-yellow-800",accepted:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800",rejected:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-800",expired:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-600"};return oe[K]||oe.pending},W=K=>({pending:"Pendiente",accepted:"Aceptada",rejected:"Rechazada",expired:"Expirada"})[K]||K,F=K=>({pending:s.jsx(Ms,{className:"w-3 h-3"}),accepted:s.jsx(Rt,{className:"w-3 h-3"}),rejected:s.jsx(sh,{className:"w-3 h-3"}),expired:s.jsx(xi,{className:"w-3 h-3"})})[K]||s.jsx(Ms,{className:"w-3 h-3"}),G=e.filter(K=>a==="all"||K.status===a).filter(K=>{var oe,Z;return o===""||((oe=K.title)==null?void 0:oe.toLowerCase().includes(o.toLowerCase()))||((Z=K.lead_name)==null?void 0:Z.toLowerCase().includes(o.toLowerCase()))}),ee={total:e.length,pending:e.filter(K=>K.status==="pending").length,accepted:e.filter(K=>K.status==="accepted").length,rejected:e.filter(K=>K.status==="rejected").length,totalViews:e.reduce((K,oe)=>K+(oe.views||0),0)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx("span",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg text-orange-600 dark:text-orange-400",children:s.jsx(It,{className:"w-5 h-5"})}),"Propuestas"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 ml-11",children:"Gestiona todas tus propuestas comerciales"})]}),s.jsxs("button",{onClick:O,className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2",children:[s.jsx(It,{className:"w-4 h-4"}),s.jsx("span",{children:"Nueva Propuesta"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:ee.total})]}),s.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:s.jsx(It,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Pendientes"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:ee.pending})]}),s.jsx("div",{className:"p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:s.jsx(Ms,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Aceptadas"}),s.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:ee.accepted})]}),s.jsx("div",{className:"p-2 bg-green-50 dark:bg-green-900/20 rounded-lg",children:s.jsx(Rt,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Rechazadas"}),s.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mt-1",children:ee.rejected})]}),s.jsx("div",{className:"p-2 bg-red-50 dark:bg-red-900/20 rounded-lg",children:s.jsx(sh,{className:"w-6 h-6 text-red-600 dark:text-red-400"})})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Vistas Totales"}),s.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400 mt-1",children:ee.totalViews})]}),s.jsx("div",{className:"p-2 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:s.jsx(ln,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})})]})})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 shadow-sm",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(Ls,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Buscar por ttulo o lead...",className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all",value:o,onChange:K=>c(K.target.value)})]})}),s.jsxs("div",{className:"relative",children:[s.jsx(Up,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsxs("select",{value:a,onChange:K=>i(K.target.value),className:"pl-10 pr-8 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent appearance-none cursor-pointer",children:[s.jsx("option",{value:"all",children:"Todos los estados"}),s.jsx("option",{value:"pending",children:"Pendientes"}),s.jsx("option",{value:"accepted",children:"Aceptadas"}),s.jsx("option",{value:"rejected",children:"Rechazadas"}),s.jsx("option",{value:"expired",children:"Expiradas"})]})]}),s.jsxs("button",{className:"px-4 py-2.5 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors flex items-center space-x-2 font-medium text-sm",children:[s.jsx(n4,{className:"w-4 h-4"}),s.jsx("span",{children:"Exportar"})]})]})}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Lead"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Ttulo"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Creada"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Enviada"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Engagement"}),s.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:G.map(K=>s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors group",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:K.lead_name}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:K.lead_email})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(It,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-900 dark:text-white font-medium",children:K.title})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("span",{className:`inline-flex items-center space-x-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${$(K.status)}`,children:[F(K.status),s.jsx("span",{children:W(K.status)})]})}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:new Date(K.created_at).toLocaleDateString("es-ES")}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:K.sent_at?s.jsxs("div",{className:"flex items-center space-x-1.5",children:[s.jsx($d,{className:"w-3 h-3 text-gray-400"}),s.jsx("span",{children:new Date(K.sent_at).toLocaleDateString("es-ES")})]}):"-"}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-1.5",title:"Vistas",children:[s.jsx(ln,{className:`w-4 h-4 ${K.views>0?"text-purple-500":"text-gray-300"}`}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:K.views||0})]}),s.jsxs("div",{className:"flex items-center space-x-1.5",title:"Email Abierto",children:[s.jsx(Tt,{className:`w-4 h-4 ${K.email_opened?"text-green-500":"text-gray-300"}`}),s.jsx("span",{className:"text-xs text-gray-500",children:K.last_email_open||"-"})]})]})}),s.jsx("td",{className:"px-6 py-4 text-right",children:s.jsxs("div",{className:"flex items-center justify-end space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:()=>z(K.id),className:"p-1.5 text-gray-500 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Reenviar Email",children:s.jsx(Tt,{className:"w-4 h-4"})}),s.jsx("button",{className:"p-1.5 text-gray-500 hover:text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"Ver Detalles",children:s.jsx(T6,{className:"w-4 h-4"})}),s.jsx("button",{className:"p-1.5 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Analytics",children:s.jsx(vd,{className:"w-4 h-4"})})]})})]},K.id))})]})}),G.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:s.jsx(It,{className:"w-8 h-8 text-gray-400"})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:"No se encontraron propuestas"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Prueba ajustando los filtros o crea una nueva propuesta."})]})]}),f&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-2xl w-full p-6 shadow-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Crear Nueva Propuesta"}),s.jsx("button",{onClick:()=>{m(!1),y(null),w({title:"",price:"",description:""})},className:"text-gray-400 hover:text-gray-600",children:s.jsx(sh,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:A,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Seleccionar Lead"}),p.length===0?s.jsx("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800",children:s.jsx("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:" Todos los leads ya tienen propuestas asignadas. Crea un nuevo lead desde el Pipeline de Ventas para poder crear ms propuestas."})}):s.jsxs("select",{value:(v==null?void 0:v.id)||"",onChange:K=>{const oe=p.find(Z=>Z.id===parseInt(K.target.value));y(oe)},className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500",required:!0,children:[s.jsx("option",{value:"",children:"-- Selecciona un lead --"}),p.map(K=>s.jsxs("option",{value:K.id,children:[K.name," - ",K.business_name||"Sin empresa"," (",K.email,")"]},K.id))]})]}),v&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ttulo de la Propuesta"}),s.jsx("input",{type:"text",value:_.title,onChange:K=>w({..._,title:K.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500",placeholder:"Ej: Propuesta Instalacin Solar",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Precio Total ()"}),s.jsx("input",{type:"number",step:"0.01",value:_.price,onChange:K=>w({..._,price:K.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500",placeholder:"0.00",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),s.jsx("textarea",{value:_.description,onChange:K=>w({..._,description:K.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500",rows:"4",placeholder:"Describe los detalles de la propuesta..."})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>{m(!1),y(null),w({title:"",price:"",description:""})},className:"flex-1 px-4 py-3 border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-semibold hover:bg-gray-50 dark:hover:bg-gray-700 transition-all",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:b,className:"flex-1 px-4 py-3 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg font-semibold hover:shadow-lg hover:shadow-orange-500/50 transition-all disabled:opacity-50",children:b?"Creando...":"Crear Propuesta"})]})]})]})]})})]})},cH=()=>{const[e,t]=E.useState([]),[r,n]=E.useState(!0),[a,i]=E.useState(null),[o,c]=E.useState(!1),[d,u]=E.useState(null),[f,m]=E.useState({name:"",subject:"",body:"",type:"initial_proposal"}),p={initial_proposal:"Propuesta Inicial",reminder_1:"Recordatorio 1",reminder_2:"Recordatorio 2",custom:"Personalizada"},x=[{var:"{{lead_name}}",desc:"Nombre del lead"},{var:"{{business_name}}",desc:"Nombre del negocio"},{var:"{{proposal_link}}",desc:"Link a la propuesta"},{var:"{{proposal_title}}",desc:"Ttulo de la propuesta"},{var:"{{company_name}}",desc:"Nombre de tu empresa"}];E.useEffect(()=>{v()},[]);const v=async()=>{try{t([{id:1,name:"Propuesta Inicial Estndar",subject:"Tu propuesta personalizada de {{company_name}}",body:`Hola {{lead_name}},

Nos complace presentarte nuestra propuesta para {{business_name}}.

Puedes revisarla aqu: {{proposal_link}}

Saludos,
Equipo {{company_name}}`,type:"initial_proposal",created_at:"2025-12-01"},{id:2,name:"Recordatorio Amigable",subject:"Recordatorio: {{proposal_title}}",body:`Hola {{lead_name}},

Queremos recordarte que tienes una propuesta pendiente de revisin.

Link: {{proposal_link}}

Tienes alguna duda?

Saludos`,type:"reminder_1",created_at:"2025-12-01"}])}catch(C){console.error("Error fetching templates:",C)}finally{n(!1)}},y=async C=>{C.preventDefault();try{if(a)t(e.map(O=>O.id===a.id?{...O,...f}:O));else{const O={id:Math.max(...e.map(A=>A.id),0)+1,...f,created_at:new Date().toISOString().split("T")[0]};t([...e,O])}b()}catch(O){console.error("Error saving template:",O)}},_=C=>{i(C),m({name:C.name,subject:C.subject,body:C.body,type:C.type}),c(!0)},w=async C=>{confirm("Ests seguro de eliminar esta plantilla?")&&t(e.filter(O=>O.id!==C))},b=()=>{c(!1),i(null),m({name:"",subject:"",body:"",type:"initial_proposal"})},N=C=>{m({...f,body:f.body+C})},S=C=>{let O=C.body;return O=O.replace(/{{lead_name}}/g,"Juan Prez"),O=O.replace(/{{business_name}}/g,"Empresa Demo S.L."),O=O.replace(/{{proposal_link}}/g,"https://tucrm.com/propuesta/123"),O=O.replace(/{{proposal_title}}/g,"Propuesta Comercial 2025"),O=O.replace(/{{company_name}}/g,"Tu Empresa"),O};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Plantillas de Email"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Gestiona los correos para la automatizacin de marketing"})]}),!o&&s.jsxs("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2",children:[s.jsx(xr,{className:"w-4 h-4"}),s.jsx("span",{children:"Nueva Plantilla"})]})]}),o?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-4 mb-6 pb-4 border-b border-gray-100 dark:border-gray-700",children:[s.jsx("button",{onClick:b,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(pw,{className:"w-5 h-5 text-gray-500"})}),s.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center space-x-2",children:[s.jsx(It,{className:"w-5 h-5 text-orange-500"}),s.jsx("span",{children:a?"Editar Plantilla":"Nueva Plantilla"})]})]}),s.jsxs("form",{onSubmit:y,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre Interno"}),s.jsx(Ye,{id:"name",value:f.name,onChange:C=>m({...f,name:C.target.value}),placeholder:"Ej: Propuesta Inicial Estndar",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tipo de Email"}),s.jsx("select",{id:"type",value:f.type,onChange:C=>m({...f,type:C.target.value}),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500 transition-shadow",children:Object.entries(p).map(([C,O])=>s.jsx("option",{value:C,children:O},C))})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Asunto del Correo"}),s.jsx(Ye,{id:"subject",value:f.subject,onChange:C=>m({...f,subject:C.target.value}),placeholder:"Ej: Propuesta comercial para {{business_name}}",required:!0})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("label",{htmlFor:"body",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Cuerpo del Email"}),s.jsx("span",{className:"text-xs text-gray-500",children:"Soporta variables dinmicas"})]}),s.jsx("textarea",{id:"body",value:f.body,onChange:C=>m({...f,body:C.target.value}),rows:"10",className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white font-mono text-sm focus:ring-2 focus:ring-orange-500 transition-shadow",required:!0,placeholder:"Escribe el contenido de tu email aqu..."})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-100 dark:border-blue-800",children:[s.jsxs("p",{className:"text-sm font-semibold text-blue-800 dark:text-blue-300 mb-3 flex items-center space-x-2",children:[s.jsx(kl,{className:"w-4 h-4"}),s.jsx("span",{children:"Variables Disponibles"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(C=>s.jsx("button",{type:"button",onClick:()=>N(C.var),className:"px-3 py-1.5 bg-white dark:bg-gray-800 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-700 rounded-md text-xs hover:bg-blue-50 dark:hover:bg-blue-900/50 transition-colors font-mono shadow-sm",title:C.desc,children:C.var},C.var))})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-100 dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:b,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancelar"}),s.jsxs("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all flex items-center space-x-2",children:[s.jsx(gi,{className:"w-4 h-4"}),s.jsx("span",{children:a?"Actualizar Plantilla":"Crear Plantilla"})]})]})]})]}):s.jsxs("div",{className:"grid gap-4",children:[e.map(C=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-xl border border-gray-200 dark:border-gray-700 flex justify-between items-center hover:shadow-md transition-shadow group",children:[s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg text-orange-600 dark:text-orange-400",children:s.jsx(Tt,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:C.name}),s.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs font-medium rounded-full border border-gray-200 dark:border-gray-600",children:p[C.type]})]}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[s.jsx("span",{className:"font-medium",children:"Asunto:"})," ",C.subject]}),s.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Creada el ",new Date(C.created_at).toLocaleDateString("es-ES")]})]})]}),s.jsxs("div",{className:"flex space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:()=>u(C),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"Vista Previa",children:s.jsx(ln,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>_(C),className:"p-2 text-gray-500 hover:text-orange-600 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-lg transition-colors",title:"Editar",children:s.jsx(Ug,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>w(C.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Eliminar",children:s.jsx(Ar,{className:"w-5 h-5"})})]})]},C.id)),e.length===0&&!r&&s.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800/50 rounded-xl border-2 border-dashed border-gray-200 dark:border-gray-700",children:[s.jsx(Tt,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No hay plantillas de email creadas an."}),s.jsx("button",{onClick:()=>c(!0),className:"mt-4 text-orange-600 hover:text-orange-700 font-medium text-sm",children:"Crear la primera plantilla"})]})]}),d&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 backdrop-blur-sm",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-2xl w-full mx-4 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-gray-800/50 rounded-t-xl",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center space-x-2",children:[s.jsx(ln,{className:"w-5 h-5 text-gray-500"}),s.jsx("span",{children:"Vista Previa"})]}),s.jsx("button",{onClick:()=>u(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:s.jsx(Rr,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:"Asunto"}),s.jsx("p",{className:"text-gray-900 dark:text-white font-medium text-lg",children:d.subject})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2",children:"Cuerpo del Mensaje"}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-6 rounded-xl border border-gray-100 dark:border-gray-700",children:s.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-800 dark:text-gray-200 font-sans leading-relaxed",children:S(d)})})]}),s.jsx("div",{className:"flex justify-end pt-2",children:s.jsx("button",{onClick:()=>u(null),className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cerrar Vista Previa"})})]})]})})]})},dH=({tag:e,onRemove:t,size:r="sm"})=>{const n={xs:"px-1.5 py-0.5 text-[10px]",sm:"px-2 py-1 text-xs",md:"px-3 py-1.5 text-sm"};return s.jsxs("span",{className:`inline-flex items-center rounded-full font-medium ${n[r]} transition-all`,style:{backgroundColor:`${e.color}20`,color:e.color,border:`1px solid ${e.color}40`},children:[e.name,t&&s.jsx("button",{onClick:a=>{a.stopPropagation(),t(e.id)},className:"ml-1 hover:opacity-70 transition-opacity",children:s.jsx(Rr,{className:"w-3 h-3"})})]})},y5=({tags:e=[],maxVisible:t=2,size:r="xs",onRemove:n})=>{if(!e||e.length===0)return null;const a=e.slice(0,t),i=e.length-t;return s.jsxs("div",{className:"flex flex-wrap gap-1 items-center",children:[a.map(o=>s.jsx(dH,{tag:o,size:r,onRemove:n},o.id)),i>0&&s.jsxs("span",{className:"text-[10px] text-gray-400 dark:text-gray-500 font-medium",children:["+",i]})]})},v5=({leads:e,onLeadClick:t,onStatusChange:r,onDeleteLead:n,selectedLeads:a=[],onToggleSelect:i})=>{const[o,c]=E.useState({isOpen:!1,title:"",message:"",leadToDelete:null}),[d,u]=E.useState({isOpen:!1,lead:null}),[f,m]=E.useState("date"),[p,x]=E.useState("all"),v=Ht(),y=async(O,A)=>{O.stopPropagation(),u({isOpen:!0,lead:A})},_=async()=>{if(d.lead)try{const O=await fetch(`${Y}/clients/convert-lead`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`},body:JSON.stringify({leadId:d.lead.id})});if(O.ok)v.success("Lead convertido a cliente exitosamente"),r(d.lead.id,"won"),u({isOpen:!1,lead:null});else{const A=await O.json();v.error(A.error||"Error al convertir lead")}}catch(O){console.error("Error converting lead:",O),v.error("Error de conexin")}},w=async(O,A)=>{O.stopPropagation(),c({isOpen:!0,title:"Eliminar Lead",message:`Ests seguro de eliminar el lead "${A.name}"? Esta accin no se puede deshacer.`,leadToDelete:A})},b=async()=>{if(o.leadToDelete)try{if((await fetch(`${Y}/leads/${o.leadToDelete.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}})).ok)v.success("Lead eliminado correctamente"),n&&n(o.leadToDelete.id);else throw new Error("Error al eliminar")}catch(O){v.error("Error al eliminar el lead"),console.error(O)}finally{c({...o,isOpen:!1,leadToDelete:null})}},N=O=>{const A={new:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300",contacted:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300",qualified:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300",proposal_sent:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300",won:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300",lost:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300"};return A[O]||A.new},S=O=>({new:"Nuevo",contacted:"Contactado",qualified:"Calificado",proposal_sent:"Propuesta Enviada",won:"Ganado",lost:"Perdido"})[O]||O,C=e.filter(O=>p==="all"||O.status===p);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("select",{value:p,onChange:O=>x(O.target.value),className:"px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white w-full sm:w-auto",children:[s.jsx("option",{value:"all",children:"Todos los estados"}),s.jsx("option",{value:"new",children:"Nuevos"}),s.jsx("option",{value:"contacted",children:"Contactados"}),s.jsx("option",{value:"qualified",children:"Calificados"}),s.jsx("option",{value:"proposal_sent",children:"Propuesta Enviada"}),s.jsx("option",{value:"won",children:"Ganados"}),s.jsx("option",{value:"lost",children:"Perdidos"})]})}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[C.length," leads"]})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[900px]",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("tr",{children:[i&&s.jsx("th",{className:"px-4 py-4 w-12"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:"Lead"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:"Empresa"}),s.jsx("th",{className:"px-4 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:"Tags"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:"Estado"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:"Propuesta"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:"Acciones"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:C.map(O=>s.jsxs("tr",{onClick:()=>t(O),className:`hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-colors ${a.includes(O.id)?"bg-orange-50 dark:bg-orange-900/20":""}`,children:[i&&s.jsx("td",{className:"px-4 py-4",children:s.jsx("button",{onClick:A=>{A.stopPropagation(),i(O.id)},className:"text-gray-400 hover:text-orange-500 transition-colors",children:a.includes(O.id)?s.jsx(f4,{className:"w-5 h-5 text-orange-500"}):s.jsx(m4,{className:"w-5 h-5"})})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:O.name}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:O.email})]})}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:O.business_name||"-"}),s.jsx("td",{className:"px-4 py-4",children:O.tags&&O.tags.length>0?s.jsx(y5,{tags:O.tags,maxVisible:2,size:"xs"}):s.jsx("span",{className:"text-gray-400",children:"-"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N(O.status)}`,children:S(O.status)})}),s.jsx("td",{className:"px-6 py-4",children:O.has_proposal?s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300",children:" Enviada"}):s.jsx("span",{className:"text-sm text-gray-400 dark:text-gray-500",children:"-"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:A=>{A.stopPropagation(),t(O)},className:"p-2 text-gray-500 hover:text-orange-600 dark:text-gray-400 dark:hover:text-orange-400 transition-colors rounded-lg hover:bg-orange-50 dark:hover:bg-orange-900/20",title:"Ver detalles",children:s.jsx(ln,{size:18})}),O.status!=="won"&&s.jsx("button",{onClick:A=>y(A,O),className:"p-2 text-gray-500 hover:text-green-600 dark:text-gray-400 dark:hover:text-green-400 transition-colors rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20",title:"Convertir a Cliente",children:s.jsx(yw,{size:18})}),s.jsx("button",{onClick:A=>w(A,O),className:"p-2 text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400 transition-colors rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20",title:"Eliminar Lead",children:s.jsx(Ar,{size:18})})]})})]},O.id))})]})}),s.jsx(Yl,{isOpen:o.isOpen,onClose:()=>c({...o,isOpen:!1,leadToDelete:null}),onConfirm:b,title:o.title,message:o.message,type:"danger"}),d.isOpen&&d.lead&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-lg w-full p-6 shadow-2xl",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Convertir a Cliente"}),s.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 mb-6 border border-green-200 dark:border-green-800",children:s.jsx("p",{className:"text-sm text-green-800 dark:text-green-200 mb-2",children:"Ests seguro de convertir este lead a cliente?"})}),s.jsxs("div",{className:"space-y-3 mb-6",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-3",children:[s.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Nombre"}),s.jsx("p",{className:"text-gray-900 dark:text-white font-semibold mt-1",children:d.lead.name})]}),d.lead.business_name&&s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-3",children:[s.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Empresa"}),s.jsx("p",{className:"text-gray-900 dark:text-white font-semibold mt-1",children:d.lead.business_name})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-3",children:[s.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Email"}),s.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:d.lead.email})]}),d.lead.phone&&s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-3",children:[s.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Telfono"}),s.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:d.lead.phone})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(Ne,{variant:"secondary",onClick:()=>u({isOpen:!1,lead:null}),className:"flex-1",children:"Cancelar"}),s.jsx(Ne,{onClick:_,className:"flex-1",children:"Convertir a Cliente"})]})]})})]})},uH=({leads:e,onLeadClick:t,onStatusChange:r,statuses:n,onDeleteLead:a,selectedLeads:i=[],onToggleSelect:o})=>{const c=Ht(),[d,u]=E.useState({isOpen:!1,title:"",message:"",leadToDelete:null}),f=async(N,S)=>{N.stopPropagation(),u({isOpen:!0,title:"Eliminar Lead",message:"Ests seguro de eliminar este lead? Esta accin no se puede deshacer.",leadToDelete:{id:S}})},m=async()=>{if(d.leadToDelete)try{if((await fetch(`${Y}/leads/${d.leadToDelete.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}})).ok)c.success("Lead eliminado correctamente"),a&&a(d.leadToDelete.id);else throw new Error("Error al eliminar")}catch(N){c.error("Error al eliminar el lead"),console.error(N)}finally{u({...d,isOpen:!1,leadToDelete:null})}},p=(N,S)=>{N.dataTransfer.setData("leadId",S.id.toString())},x=N=>{N.preventDefault()},v=(N,S)=>{N.preventDefault();const C=parseInt(N.dataTransfer.getData("leadId"));r(C,S)},y={Star:wn,User:pr,Phone:Kn,Mail:Tt,FileText:It,Send:$d,MessageSquare:Wr,CheckCircle:Rt,XCircle:sh,Clock:Ms,AlertCircle:xi,Flag:s4,Briefcase:Po,Target:To,Award:JE,Ban:QE},_=N=>{const S=y[N]||wn;return s.jsx(S,{className:"w-4 h-4"})},w=N=>{const S={blue:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",green:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300",yellow:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300",red:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300",purple:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300",orange:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300",gray:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"};return S[N]||S.gray},b=n||[];return s.jsxs("div",{className:"flex space-x-4 overflow-x-auto pb-4 min-h-[calc(100vh-250px)]",children:[b.map(N=>{const S=e.filter(C=>C.status===N.id||C.status==N.id||C.status===N.name||N.id===7&&C.status==="new"||N.id===8&&(C.status==="contacted"||C.status==="qualified"||C.status==="proposal_sent")||N.id===9&&C.status==="won"||N.id===10&&C.status==="lost");return s.jsxs("div",{className:"flex-shrink-0 w-72",onDragOver:x,onDrop:C=>v(C,N.id),children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-t-xl p-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between sticky top-0 z-10 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:`p-1.5 rounded-md ${w(N.color)}`,children:_(N.icon)}),s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm truncate max-w-[120px]",title:N.name||N.label,children:N.name||N.label})]}),s.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 rounded-full text-xs font-medium text-gray-600 dark:text-gray-400",children:S.length})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-b-xl p-2 space-y-2 min-h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar",children:[S.map(C=>s.jsxs("div",{draggable:!0,onDragStart:O=>p(O,C),onClick:()=>t(C),className:`bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border cursor-move hover:shadow-md transition-all group relative ${i.includes(C.id)?"border-orange-500 ring-2 ring-orange-200 dark:ring-orange-900":"border-gray-200 dark:border-gray-700"}`,children:[s.jsxs("div",{className:"mb-2 flex items-start gap-2",children:[o&&s.jsx("button",{onClick:O=>{O.stopPropagation(),o(C.id)},className:"mt-0.5 text-gray-400 hover:text-orange-500 transition-colors",children:i.includes(C.id)?s.jsx(f4,{className:"w-4 h-4 text-orange-500"}):s.jsx(m4,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm leading-tight mb-0.5 group-hover:text-orange-600 dark:group-hover:text-orange-400 transition-colors",children:C.name}),C.business_name&&s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:C.business_name})]})]}),C.tags&&C.tags.length>0&&s.jsx("div",{className:"mb-2",children:s.jsx(y5,{tags:C.tags,maxVisible:2,size:"xs"})}),C.has_proposal&&s.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[s.jsxs("div",{className:"inline-flex items-center space-x-1 px-1.5 py-0.5 bg-green-50 dark:bg-green-900/30 border border-green-100 dark:border-green-800 rounded text-[10px]",children:[s.jsx(It,{className:"w-3 h-3 text-green-600 dark:text-green-400"}),s.jsx("span",{className:"font-medium text-green-700 dark:text-green-300",children:"Propuesta"})]}),C.proposal_views>0&&s.jsxs("div",{className:"flex items-center space-x-1 text-[10px] text-gray-500",children:[s.jsx(ln,{className:"w-3 h-3"}),s.jsx("span",{children:C.proposal_views})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-50 dark:border-gray-700/50",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[C.email&&s.jsx("div",{className:"text-gray-400",title:C.email,children:s.jsx(Tt,{className:"w-3 h-3"})}),C.phone&&s.jsx("div",{className:"text-gray-400",title:C.phone,children:s.jsx(Kn,{className:"w-3 h-3"})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"text-[10px] text-gray-400",children:new Date(C.created_at).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit"})}),s.jsx("button",{onClick:O=>f(O,C.id),className:"opacity-0 group-hover:opacity-100 p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-all rounded hover:bg-red-50 dark:hover:bg-red-900/20",title:"Eliminar Lead",children:s.jsx(Ar,{size:14})})]})]})]},C.id)),S.length===0&&s.jsxs("div",{className:"text-center py-8 opacity-40",children:[s.jsx("div",{className:"w-12 h-12 mx-auto mb-2 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:_(N.icon)}),s.jsx("p",{className:"text-xs text-gray-500",children:"Vaco"})]})]})]},N.id)}),s.jsx(Yl,{isOpen:d.isOpen,onClose:()=>u({...d,isOpen:!1,leadToDelete:null}),onConfirm:m,title:d.title,message:d.message,type:"danger"})]})};function hl(e,t,r){return(t=v4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ct(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KN(Object(r),!0).forEach(function(n){hl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dn(e,t,r){return t=bd(t),b4(e,vw()?Reflect.construct(t,r||[],bd(e).constructor):t.apply(e,r))}function b5(e){if(Array.isArray(e))return e}function hH(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);d=!0);}catch(f){u=!0,a=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return c}}function Zv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c_(e,t){if(e){if(typeof e=="string")return Zv(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Zv(e,t):void 0}}function w5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ss(e,t){return b5(e)||hH(e,t)||c_(e,t)||w5()}function _5(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=_5(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function nr(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=_5(e))&&(n&&(n+=" "),n+=t);return n}var fH=function(e,t,r,n,a,i,o,c){if(!e){var d;if(t===void 0)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,a,i,o,c],f=0;d=new Error(t.replace(/%s/g,function(){return u[f++]})),d.name="Invariant Violation"}throw d.framesToPop=1,d}},mH=fH;const Bh=Yr(mH);var pH=function(){};function gH(e,t){var r={};return Object.keys(e).forEach(function(n){r[op(n)]=pH}),r}function XN(e,t){return e[t]!==void 0}function op(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function xH(e){return!!e&&(typeof e!="function"||e.prototype&&e.prototype.isReactComponent)}function yH(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Kp(e,t)}function k5(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function j5(e){function t(r){var n=this.constructor.getDerivedStateFromProps(e,r);return n??null}this.setState(t.bind(this))}function N5(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}k5.__suppressDeprecationWarning=!0;j5.__suppressDeprecationWarning=!0;N5.__suppressDeprecationWarning=!0;function vH(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var r=null,n=null,a=null;if(typeof t.componentWillMount=="function"?r="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?a="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(a="UNSAFE_componentWillUpdate"),r!==null||n!==null||a!==null){var i=e.displayName||e.name,o=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+i+" uses "+o+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(n!==null?`
  `+n:"")+(a!==null?`
  `+a:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=k5,t.componentWillReceiveProps=j5),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=N5;var c=t.componentDidUpdate;t.componentDidUpdate=function(u,f,m){var p=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:m;c.call(this,u,f,p)}}return e}var bH="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function S5(e,t,r){r===void 0&&(r=[]);var n=e.displayName||e.name||"Component",a=xH(e),i=Object.keys(t),o=i.map(op);a||!r.length||Bh(!1);var c=function(u){yH(f,u);function f(){for(var p,x=arguments.length,v=new Array(x),y=0;y<x;y++)v[y]=arguments[y];p=u.call.apply(u,[this].concat(v))||this,p.handlers=Object.create(null),i.forEach(function(w){var b=t[w],N=function(C){if(p.props[b]){var O;p._notifying=!0;for(var A=arguments.length,z=new Array(A>1?A-1:0),$=1;$<A;$++)z[$-1]=arguments[$];(O=p.props)[b].apply(O,[C].concat(z)),p._notifying=!1}p.unmounted||p.setState(function(W){var F,G=W.values;return{values:Xt(Object.create(null),G,(F={},F[w]=C,F))}})};p.handlers[b]=N}),r.length&&(p.attachRef=function(w){p.inner=w});var _=Object.create(null);return i.forEach(function(w){_[w]=p.props[op(w)]}),p.state={values:_,prevProps:{}},p}var m=f.prototype;return m.shouldComponentUpdate=function(){return!this._notifying},f.getDerivedStateFromProps=function(x,v){var y=v.values,_=v.prevProps,w={values:Xt(Object.create(null),y),prevProps:{}};return i.forEach(function(b){w.prevProps[b]=x[b],!XN(x,b)&&XN(_,b)&&(w.values[b]=x[op(b)])}),w},m.componentWillUnmount=function(){this.unmounted=!0},m.render=function(){var x=this,v=this.props,y=v.innerRef,_=Vg(v,["innerRef"]);o.forEach(function(b){delete _[b]});var w={};return i.forEach(function(b){var N=x.props[b];w[b]=N!==void 0?N:x.state.values[b]}),J.createElement(e,Xt({},_,w,this.handlers,{ref:y||this.attachRef}))},f}(J.Component);vH(c),c.displayName="Uncontrolled("+n+")",c.propTypes=Xt({innerRef:function(){}},gH(t)),r.forEach(function(u){c.prototype[u]=function(){var m;return(m=this.inner)[u].apply(m,arguments)}});var d=c;return J.forwardRef&&(d=J.forwardRef(function(u,f){return J.createElement(c,Xt({},u,{innerRef:f,__source:{fileName:bH,lineNumber:128},__self:this}))}),d.propTypes=c.propTypes),d.ControlledComponent=e,d.deferControlTo=function(u,f,m){return f===void 0&&(f={}),S5(u,Xt({},t,f),m)},d}var dg="milliseconds",Hh="seconds",Wh="minutes",Uh="hours",$l="day",Nd="week",Vh="month",Il="year",Fl="decade",Bl="century",C5={milliseconds:1,seconds:1e3,minutes:60*1e3,hours:60*60*1e3,day:24*60*60*1e3,week:7*24*60*60*1e3},wH={month:1,year:12,decade:10*12,century:100*12};function _H(e){return[31,kH(e),31,30,31,30,31,31,30,31,30,31]}function kH(e){return e%4===0&&e%100!==0||e%400===0?29:28}function la(e,t,r){switch(e=new Date(e),r){case dg:case Hh:case Wh:case Uh:case $l:case Nd:return jH(e,t*C5[r]);case Vh:case Il:case Fl:case Bl:return NH(e,t*wH[r])}throw new TypeError('Invalid units: "'+r+'"')}function jH(e,t){var r=new Date(+e+t);return SH(e,r)}function NH(e,t){var r=e.getFullYear(),n=e.getMonth(),a=e.getDate(),i=r*12+n+t,o=Math.trunc(i/12),c=i%12,d=Math.min(a,_H(o)[c]),u=new Date(e);return u.setFullYear(o),u.setDate(1),u.setMonth(c),u.setDate(d),u}function SH(e,t){var r=e.getTimezoneOffset(),n=t.getTimezoneOffset(),a=n-r;return new Date(+t+a*C5.minutes)}function qh(e,t,r){return la(e,-t,r)}function qr(e,t,r){switch(e=new Date(e),t){case Bl:case Fl:case Il:e=hg(e,0);case Vh:e=O5(e,1);case Nd:case $l:e=Zh(e,0);case Uh:e=Sd(e,0);case Wh:e=Gh(e,0);case Hh:e=Yh(e,0)}return t===Fl&&(e=qh(e,Hl(e)%10,"year")),t===Bl&&(e=qh(e,Hl(e)%100,"year")),t===Nd&&(e=D5(e,0,r)),e}function ug(e,t,r){switch(e=new Date(e),e=qr(e,t,r),t){case Bl:case Fl:case Il:case Vh:case Nd:e=la(e,1,t),e=qh(e,1,$l),e.setHours(23,59,59,999);break;case $l:e.setHours(23,59,59,999);break;case Uh:case Wh:case Hh:e=la(e,1,t),e=qh(e,1,dg)}return e}var xf=Hd(function(e,t){return e===t}),d_=Hd(function(e,t){return e!==t}),p0=Hd(function(e,t){return e>t}),yf=Hd(function(e,t){return e>=t}),u_=Hd(function(e,t){return e<t}),Bd=Hd(function(e,t){return e<=t});function E5(){return new Date(Math.min.apply(Math,arguments))}function P5(){return new Date(Math.max.apply(Math,arguments))}function T5(e,t,r,n){return n=n||"day",(!t||yf(e,t,n))&&(!r||Bd(e,r,n))}var Yh=zo("Milliseconds"),Gh=zo("Seconds"),Sd=zo("Minutes"),Zh=zo("Hours"),M5=zo("Day"),O5=zo("Date"),hg=zo("Month"),Hl=zo("FullYear");function CH(e,t){return t===void 0?Hl(qr(e,Fl)):la(e,t+10,Il)}function EH(e,t){return t===void 0?Hl(qr(e,Bl)):la(e,t+100,Il)}function D5(e,t,r){var n=(M5(e)+7-(r||0))%7;return t===void 0?n:la(e,t-n,$l)}function PH(e,t,r,n){var a,i,o;switch(r){case dg:case Hh:case Wh:case Uh:case $l:case Nd:a=t.getTime()-e.getTime();break;case Vh:case Il:case Fl:case Bl:a=(Hl(t)-Hl(e))*12+hg(t)-hg(e);break;default:throw new TypeError('Invalid units: "'+r+'"')}switch(r){case dg:i=1;break;case Hh:i=1e3;break;case Wh:i=1e3*60;break;case Uh:i=1e3*60*60;break;case $l:i=1e3*60*60*24;break;case Nd:i=1e3*60*60*24*7;break;case Vh:i=1;break;case Il:i=12;break;case Fl:i=120;break;case Bl:i=1200;break;default:throw new TypeError('Invalid units: "'+r+'"')}return o=a/i,n?o:Math.round(o)}function zo(e){var t=function(r){switch(r){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(e);return function(r,n){if(n===void 0)return r["get"+e]();var a=new Date(r);return a["set"+e](n),t&&a["get"+e]()!=n&&(e==="Hours"||n>=t&&a.getHours()-r.getHours()<Math.floor(n/t))&&a["set"+e](n+t),a}}function Hd(e){return function(t,r,n){return e(+qr(t,n),+qr(r,n))}}const JN=Object.freeze(Object.defineProperty({__proto__:null,add:la,century:EH,date:O5,day:M5,decade:CH,diff:PH,endOf:ug,eq:xf,gt:p0,gte:yf,hours:Zh,inRange:T5,lt:u_,lte:Bd,max:P5,milliseconds:Yh,min:E5,minutes:Sd,month:hg,neq:d_,seconds:Gh,startOf:qr,subtract:qh,weekday:D5,year:Hl},Symbol.toStringTag,{value:"Module"}));function TH(e){if(Array.isArray(e))return Zv(e)}function L5(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function MH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lp(e){return TH(e)||L5(e)||c_(e)||MH()}function OH(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var A5=OH;function DH(e,t){return e===t||e!==e&&t!==t}var vf=DH,LH=typeof kn=="object"&&kn&&kn.Object===Object&&kn,R5=LH,AH=R5,RH=typeof self=="object"&&self&&self.Object===Object&&self,zH=AH||RH||Function("return this")(),Aa=zH,$H=Aa,IH=$H.Symbol,Wd=IH,QN=Wd,z5=Object.prototype,FH=z5.hasOwnProperty,BH=z5.toString,Tu=QN?QN.toStringTag:void 0;function HH(e){var t=FH.call(e,Tu),r=e[Tu];try{e[Tu]=void 0;var n=!0}catch{}var a=BH.call(e);return n&&(t?e[Tu]=r:delete e[Tu]),a}var WH=HH,UH=Object.prototype,VH=UH.toString;function qH(e){return VH.call(e)}var YH=qH,e2=Wd,GH=WH,ZH=YH,KH="[object Null]",XH="[object Undefined]",t2=e2?e2.toStringTag:void 0;function JH(e){return e==null?e===void 0?XH:KH:t2&&t2 in Object(e)?GH(e):ZH(e)}var Ud=JH;function QH(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Mi=QH,eW=Ud,tW=Mi,rW="[object AsyncFunction]",nW="[object Function]",sW="[object GeneratorFunction]",aW="[object Proxy]";function iW(e){if(!tW(e))return!1;var t=eW(e);return t==nW||t==sW||t==rW||t==aW}var h_=iW,oW=9007199254740991;function lW(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=oW}var f_=lW,cW=h_,dW=f_;function uW(e){return e!=null&&dW(e.length)&&!cW(e)}var bf=uW,hW=9007199254740991,fW=/^(?:0|[1-9]\d*)$/;function mW(e,t){var r=typeof e;return t=t??hW,!!t&&(r=="number"||r!="symbol"&&fW.test(e))&&e>-1&&e%1==0&&e<t}var m_=mW,pW=vf,gW=bf,xW=m_,yW=Mi;function vW(e,t,r){if(!yW(r))return!1;var n=typeof t;return(n=="number"?gW(r)&&xW(t,r.length):n=="string"&&t in r)?pW(r[t],e):!1}var g0=vW,bW=/\s/;function wW(e){for(var t=e.length;t--&&bW.test(e.charAt(t)););return t}var _W=wW,kW=_W,jW=/^\s+/;function NW(e){return e&&e.slice(0,kW(e)+1).replace(jW,"")}var SW=NW;function CW(e){return e!=null&&typeof e=="object"}var $o=CW,EW=Ud,PW=$o,TW="[object Symbol]";function MW(e){return typeof e=="symbol"||PW(e)&&EW(e)==TW}var wf=MW,OW=SW,r2=Mi,DW=wf,n2=NaN,LW=/^[-+]0x[0-9a-f]+$/i,AW=/^0b[01]+$/i,RW=/^0o[0-7]+$/i,zW=parseInt;function $W(e){if(typeof e=="number")return e;if(DW(e))return n2;if(r2(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=r2(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=OW(e);var r=AW.test(e);return r||RW.test(e)?zW(e.slice(2),r?2:8):LW.test(e)?n2:+e}var IW=$W,FW=IW,s2=1/0,BW=17976931348623157e292;function HW(e){if(!e)return e===0?e:0;if(e=FW(e),e===s2||e===-s2){var t=e<0?-1:1;return t*BW}return e===e?e:0}var $5=HW,WW=$5;function UW(e){var t=WW(e),r=t%1;return t===t?r?t-r:t:0}var I5=UW,VW=A5,qW=g0,YW=I5,GW=Math.ceil,ZW=Math.max;function KW(e,t,r){(r?qW(e,t,r):t===void 0)?t=1:t=ZW(YW(t),0);var n=e==null?0:e.length;if(!n||t<1)return[];for(var a=0,i=0,o=Array(GW(n/t));a<n;)o[i++]=VW(e,a,a+=t);return o}var XW=KW;const JW=Yr(XW);function _f(e){return e&&e.ownerDocument||document}function QW(e){var t=_f(e);return t&&t.defaultView||window}function eU(e,t){return QW(e).getComputedStyle(e,t)}var tU=/([A-Z])/g;function rU(e){return e.replace(tU,"-$1").toLowerCase()}var nU=/^ms-/;function Om(e){return rU(e).replace(nU,"-ms-")}var sU=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function aU(e){return!!(e&&sU.test(e))}function Ac(e,t){var r="",n="";if(typeof t=="string")return e.style.getPropertyValue(Om(t))||eU(e).getPropertyValue(Om(t));Object.keys(t).forEach(function(a){var i=t[a];!i&&i!==0?e.style.removeProperty(Om(a)):aU(a)?n+=a+"("+i+") ":r+=Om(a)+": "+i+";"}),n&&(r+="transform: "+n+";"),e.style.cssText+=";"+r}function Kh(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}function iU(e){return"nodeType"in e&&e.nodeType===document.DOCUMENT_NODE}function p_(e){return"window"in e&&e.window===e?e:iU(e)&&e.defaultView||!1}function F5(e){var t=e==="pageXOffset"?"scrollLeft":"scrollTop";function r(n,a){var i=p_(n);if(a===void 0)return i?i[e]:n[t];i?i.scrollTo(i[e],a):n[t]=a}return r}const B5=F5("pageXOffset"),H5=F5("pageYOffset");function Cl(e){var t=_f(e),r={top:0,left:0,height:0,width:0},n=t&&t.documentElement;return!n||!Kh(n,e)||(e.getBoundingClientRect!==void 0&&(r=e.getBoundingClientRect()),r={top:r.top+H5(n)-(n.clientTop||0),left:r.left+B5(n)-(n.clientLeft||0),width:r.width,height:r.height}),r}var oU=function(t){return!!t&&"offsetParent"in t};function lU(e){for(var t=_f(e),r=e&&e.offsetParent;oU(r)&&r.nodeName!=="HTML"&&Ac(r,"position")==="static";)r=r.offsetParent;return r||t.documentElement}var cU=function(t){return t.nodeName&&t.nodeName.toLowerCase()};function W5(e,t){var r={top:0,left:0},n;if(Ac(e,"position")==="fixed")n=e.getBoundingClientRect();else{var a=t||lU(e);n=Cl(e),cU(a)!=="html"&&(r=Cl(a));var i=String(Ac(a,"borderTopWidth")||0);r.top+=parseInt(i,10)-H5(a)||0;var o=String(Ac(a,"borderLeftWidth")||0);r.left+=parseInt(o,10)-B5(a)||0}var c=String(Ac(e,"marginTop")||0),d=String(Ac(e,"marginLeft")||0);return Xt({},n,{top:n.top-r.top-(parseInt(c,10)||0),left:n.left-r.left-(parseInt(d,10)||0)})}const g_=!!(typeof window<"u"&&window.document&&window.document.createElement);var a2=new Date().getTime();function dU(e){var t=new Date().getTime(),r=Math.max(0,16-(t-a2)),n=setTimeout(e,r);return a2=t,n}var uU=["","webkit","moz","o","ms"],Kv="clearTimeout",Xv=dU,i2=function(t,r){return t+(t?r[0].toUpperCase()+r.substr(1):r)+"AnimationFrame"};g_&&uU.some(function(e){var t=i2(e,"request");return t in window&&(Kv=i2(e,"cancel"),Xv=function(n){return window[t](n)}),!!Xv});var o2=function(t){typeof window[Kv]=="function"&&window[Kv](t)},U5=Xv,ay;function hU(e,t){if(!ay){var r=document.body,n=r.matches||r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector;ay=function(i,o){return n.call(i,o)}}return ay(e,t)}var fU=Function.prototype.bind.call(Function.prototype.call,[].slice);function mU(e,t){return fU(e.querySelectorAll(t))}var Jv=!1,Qv=!1;try{var iy={get passive(){return Jv=!0},get once(){return Qv=Jv=!0}};g_&&(window.addEventListener("test",iy,iy),window.removeEventListener("test",iy,!0))}catch{}function pU(e,t,r,n){if(n&&typeof n!="boolean"&&!Qv){var a=n.once,i=n.capture,o=r;!Qv&&a&&(o=r.__once||function c(d){this.removeEventListener(t,c,i),r.call(this,d)},r.__once=o),e.addEventListener(t,o,Jv?n:i)}e.addEventListener(t,r,n)}function gU(e){const t=E.useRef(e);return E.useEffect(()=>{t.current=e},[e]),t}function l2(e){const t=gU(e);return E.useCallback(function(...r){return t.current&&t.current(...r)},[t])}function c2(){return E.useState(null)}function xU(){const e=E.useRef(!0),t=E.useRef(()=>e.current);return E.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function yU(e){const t=xU();return[e[0],E.useCallback(r=>{if(t())return e[1](r)},[t,e[1]])]}var In="top",Rs="bottom",zs="right",Fn="left",x_="auto",kf=[In,Rs,zs,Fn],Cd="start",Xh="end",vU="clippingParents",V5="viewport",Mu="popper",bU="reference",d2=kf.reduce(function(e,t){return e.concat([t+"-"+Cd,t+"-"+Xh])},[]),y_=[].concat(kf,[x_]).reduce(function(e,t){return e.concat([t,t+"-"+Cd,t+"-"+Xh])},[]),wU="beforeRead",_U="read",kU="afterRead",jU="beforeMain",NU="main",SU="afterMain",CU="beforeWrite",EU="write",PU="afterWrite",TU=[wU,_U,kU,jU,NU,SU,CU,EU,PU];function Ea(e){return e.split("-")[0]}function ss(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Wl(e){var t=ss(e).Element;return e instanceof t||e instanceof Element}function Pa(e){var t=ss(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function v_(e){if(typeof ShadowRoot>"u")return!1;var t=ss(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var El=Math.max,fg=Math.min,Ed=Math.round;function eb(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function q5(){return!/^((?!chrome|android).)*safari/i.test(eb())}function Pd(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),a=1,i=1;t&&Pa(e)&&(a=e.offsetWidth>0&&Ed(n.width)/e.offsetWidth||1,i=e.offsetHeight>0&&Ed(n.height)/e.offsetHeight||1);var o=Wl(e)?ss(e):window,c=o.visualViewport,d=!q5()&&r,u=(n.left+(d&&c?c.offsetLeft:0))/a,f=(n.top+(d&&c?c.offsetTop:0))/i,m=n.width/a,p=n.height/i;return{width:m,height:p,top:f,right:u+m,bottom:f+p,left:u,x:u,y:f}}function b_(e){var t=Pd(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function Y5(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&v_(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Oo(e){return e?(e.nodeName||"").toLowerCase():null}function Si(e){return ss(e).getComputedStyle(e)}function MU(e){return["table","td","th"].indexOf(Oo(e))>=0}function Io(e){return((Wl(e)?e.ownerDocument:e.document)||window.document).documentElement}function x0(e){return Oo(e)==="html"?e:e.assignedSlot||e.parentNode||(v_(e)?e.host:null)||Io(e)}function u2(e){return!Pa(e)||Si(e).position==="fixed"?null:e.offsetParent}function OU(e){var t=/firefox/i.test(eb()),r=/Trident/i.test(eb());if(r&&Pa(e)){var n=Si(e);if(n.position==="fixed")return null}var a=x0(e);for(v_(a)&&(a=a.host);Pa(a)&&["html","body"].indexOf(Oo(a))<0;){var i=Si(a);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return a;a=a.parentNode}return null}function jf(e){for(var t=ss(e),r=u2(e);r&&MU(r)&&Si(r).position==="static";)r=u2(r);return r&&(Oo(r)==="html"||Oo(r)==="body"&&Si(r).position==="static")?t:r||OU(e)||t}function w_(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function ch(e,t,r){return El(e,fg(t,r))}function DU(e,t,r){var n=ch(e,t,r);return n>r?r:n}function G5(){return{top:0,right:0,bottom:0,left:0}}function Z5(e){return Object.assign({},G5(),e)}function K5(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var LU=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,Z5(typeof t!="number"?t:K5(t,kf))};function AU(e){var t,r=e.state,n=e.name,a=e.options,i=r.elements.arrow,o=r.modifiersData.popperOffsets,c=Ea(r.placement),d=w_(c),u=[Fn,zs].indexOf(c)>=0,f=u?"height":"width";if(!(!i||!o)){var m=LU(a.padding,r),p=b_(i),x=d==="y"?In:Fn,v=d==="y"?Rs:zs,y=r.rects.reference[f]+r.rects.reference[d]-o[d]-r.rects.popper[f],_=o[d]-r.rects.reference[d],w=jf(i),b=w?d==="y"?w.clientHeight||0:w.clientWidth||0:0,N=y/2-_/2,S=m[x],C=b-p[f]-m[v],O=b/2-p[f]/2+N,A=ch(S,O,C),z=d;r.modifiersData[n]=(t={},t[z]=A,t.centerOffset=A-O,t)}}function RU(e){var t=e.state,r=e.options,n=r.element,a=n===void 0?"[data-popper-arrow]":n;a!=null&&(typeof a=="string"&&(a=t.elements.popper.querySelector(a),!a)||Y5(t.elements.popper,a)&&(t.elements.arrow=a))}const zU={name:"arrow",enabled:!0,phase:"main",fn:AU,effect:RU,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Td(e){return e.split("-")[1]}var $U={top:"auto",right:"auto",bottom:"auto",left:"auto"};function IU(e,t){var r=e.x,n=e.y,a=t.devicePixelRatio||1;return{x:Ed(r*a)/a||0,y:Ed(n*a)/a||0}}function h2(e){var t,r=e.popper,n=e.popperRect,a=e.placement,i=e.variation,o=e.offsets,c=e.position,d=e.gpuAcceleration,u=e.adaptive,f=e.roundOffsets,m=e.isFixed,p=o.x,x=p===void 0?0:p,v=o.y,y=v===void 0?0:v,_=typeof f=="function"?f({x,y}):{x,y};x=_.x,y=_.y;var w=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),N=Fn,S=In,C=window;if(u){var O=jf(r),A="clientHeight",z="clientWidth";if(O===ss(r)&&(O=Io(r),Si(O).position!=="static"&&c==="absolute"&&(A="scrollHeight",z="scrollWidth")),O=O,a===In||(a===Fn||a===zs)&&i===Xh){S=Rs;var $=m&&O===C&&C.visualViewport?C.visualViewport.height:O[A];y-=$-n.height,y*=d?1:-1}if(a===Fn||(a===In||a===Rs)&&i===Xh){N=zs;var W=m&&O===C&&C.visualViewport?C.visualViewport.width:O[z];x-=W-n.width,x*=d?1:-1}}var F=Object.assign({position:c},u&&$U),G=f===!0?IU({x,y},ss(r)):{x,y};if(x=G.x,y=G.y,d){var ee;return Object.assign({},F,(ee={},ee[S]=b?"0":"",ee[N]=w?"0":"",ee.transform=(C.devicePixelRatio||1)<=1?"translate("+x+"px, "+y+"px)":"translate3d("+x+"px, "+y+"px, 0)",ee))}return Object.assign({},F,(t={},t[S]=b?y+"px":"",t[N]=w?x+"px":"",t.transform="",t))}function FU(e){var t=e.state,r=e.options,n=r.gpuAcceleration,a=n===void 0?!0:n,i=r.adaptive,o=i===void 0?!0:i,c=r.roundOffsets,d=c===void 0?!0:c,u={placement:Ea(t.placement),variation:Td(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,h2(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:d})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,h2(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const BU={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:FU,data:{}};var Dm={passive:!0};function HU(e){var t=e.state,r=e.instance,n=e.options,a=n.scroll,i=a===void 0?!0:a,o=n.resize,c=o===void 0?!0:o,d=ss(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&u.forEach(function(f){f.addEventListener("scroll",r.update,Dm)}),c&&d.addEventListener("resize",r.update,Dm),function(){i&&u.forEach(function(f){f.removeEventListener("scroll",r.update,Dm)}),c&&d.removeEventListener("resize",r.update,Dm)}}const WU={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:HU,data:{}};var UU={left:"right",right:"left",bottom:"top",top:"bottom"};function cp(e){return e.replace(/left|right|bottom|top/g,function(t){return UU[t]})}var VU={start:"end",end:"start"};function f2(e){return e.replace(/start|end/g,function(t){return VU[t]})}function __(e){var t=ss(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function k_(e){return Pd(Io(e)).left+__(e).scrollLeft}function qU(e,t){var r=ss(e),n=Io(e),a=r.visualViewport,i=n.clientWidth,o=n.clientHeight,c=0,d=0;if(a){i=a.width,o=a.height;var u=q5();(u||!u&&t==="fixed")&&(c=a.offsetLeft,d=a.offsetTop)}return{width:i,height:o,x:c+k_(e),y:d}}function YU(e){var t,r=Io(e),n=__(e),a=(t=e.ownerDocument)==null?void 0:t.body,i=El(r.scrollWidth,r.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),o=El(r.scrollHeight,r.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),c=-n.scrollLeft+k_(e),d=-n.scrollTop;return Si(a||r).direction==="rtl"&&(c+=El(r.clientWidth,a?a.clientWidth:0)-i),{width:i,height:o,x:c,y:d}}function j_(e){var t=Si(e),r=t.overflow,n=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+a+n)}function X5(e){return["html","body","#document"].indexOf(Oo(e))>=0?e.ownerDocument.body:Pa(e)&&j_(e)?e:X5(x0(e))}function dh(e,t){var r;t===void 0&&(t=[]);var n=X5(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),i=ss(n),o=a?[i].concat(i.visualViewport||[],j_(n)?n:[]):n,c=t.concat(o);return a?c:c.concat(dh(x0(o)))}function tb(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function GU(e,t){var r=Pd(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function m2(e,t,r){return t===V5?tb(qU(e,r)):Wl(t)?GU(t,r):tb(YU(Io(e)))}function ZU(e){var t=dh(x0(e)),r=["absolute","fixed"].indexOf(Si(e).position)>=0,n=r&&Pa(e)?jf(e):e;return Wl(n)?t.filter(function(a){return Wl(a)&&Y5(a,n)&&Oo(a)!=="body"}):[]}function KU(e,t,r,n){var a=t==="clippingParents"?ZU(e):[].concat(t),i=[].concat(a,[r]),o=i[0],c=i.reduce(function(d,u){var f=m2(e,u,n);return d.top=El(f.top,d.top),d.right=fg(f.right,d.right),d.bottom=fg(f.bottom,d.bottom),d.left=El(f.left,d.left),d},m2(e,o,n));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function J5(e){var t=e.reference,r=e.element,n=e.placement,a=n?Ea(n):null,i=n?Td(n):null,o=t.x+t.width/2-r.width/2,c=t.y+t.height/2-r.height/2,d;switch(a){case In:d={x:o,y:t.y-r.height};break;case Rs:d={x:o,y:t.y+t.height};break;case zs:d={x:t.x+t.width,y:c};break;case Fn:d={x:t.x-r.width,y:c};break;default:d={x:t.x,y:t.y}}var u=a?w_(a):null;if(u!=null){var f=u==="y"?"height":"width";switch(i){case Cd:d[u]=d[u]-(t[f]/2-r[f]/2);break;case Xh:d[u]=d[u]+(t[f]/2-r[f]/2);break}}return d}function Jh(e,t){t===void 0&&(t={});var r=t,n=r.placement,a=n===void 0?e.placement:n,i=r.strategy,o=i===void 0?e.strategy:i,c=r.boundary,d=c===void 0?vU:c,u=r.rootBoundary,f=u===void 0?V5:u,m=r.elementContext,p=m===void 0?Mu:m,x=r.altBoundary,v=x===void 0?!1:x,y=r.padding,_=y===void 0?0:y,w=Z5(typeof _!="number"?_:K5(_,kf)),b=p===Mu?bU:Mu,N=e.rects.popper,S=e.elements[v?b:p],C=KU(Wl(S)?S:S.contextElement||Io(e.elements.popper),d,f,o),O=Pd(e.elements.reference),A=J5({reference:O,element:N,placement:a}),z=tb(Object.assign({},N,A)),$=p===Mu?z:O,W={top:C.top-$.top+w.top,bottom:$.bottom-C.bottom+w.bottom,left:C.left-$.left+w.left,right:$.right-C.right+w.right},F=e.modifiersData.offset;if(p===Mu&&F){var G=F[a];Object.keys(W).forEach(function(ee){var K=[zs,Rs].indexOf(ee)>=0?1:-1,oe=[In,Rs].indexOf(ee)>=0?"y":"x";W[ee]+=G[oe]*K})}return W}function XU(e,t){t===void 0&&(t={});var r=t,n=r.placement,a=r.boundary,i=r.rootBoundary,o=r.padding,c=r.flipVariations,d=r.allowedAutoPlacements,u=d===void 0?y_:d,f=Td(n),m=f?c?d2:d2.filter(function(v){return Td(v)===f}):kf,p=m.filter(function(v){return u.indexOf(v)>=0});p.length===0&&(p=m);var x=p.reduce(function(v,y){return v[y]=Jh(e,{placement:y,boundary:a,rootBoundary:i,padding:o})[Ea(y)],v},{});return Object.keys(x).sort(function(v,y){return x[v]-x[y]})}function JU(e){if(Ea(e)===x_)return[];var t=cp(e);return[f2(e),t,f2(t)]}function QU(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var a=r.mainAxis,i=a===void 0?!0:a,o=r.altAxis,c=o===void 0?!0:o,d=r.fallbackPlacements,u=r.padding,f=r.boundary,m=r.rootBoundary,p=r.altBoundary,x=r.flipVariations,v=x===void 0?!0:x,y=r.allowedAutoPlacements,_=t.options.placement,w=Ea(_),b=w===_,N=d||(b||!v?[cp(_)]:JU(_)),S=[_].concat(N).reduce(function(fe,re){return fe.concat(Ea(re)===x_?XU(t,{placement:re,boundary:f,rootBoundary:m,padding:u,flipVariations:v,allowedAutoPlacements:y}):re)},[]),C=t.rects.reference,O=t.rects.popper,A=new Map,z=!0,$=S[0],W=0;W<S.length;W++){var F=S[W],G=Ea(F),ee=Td(F)===Cd,K=[In,Rs].indexOf(G)>=0,oe=K?"width":"height",Z=Jh(t,{placement:F,boundary:f,rootBoundary:m,altBoundary:p,padding:u}),pe=K?ee?zs:Fn:ee?Rs:In;C[oe]>O[oe]&&(pe=cp(pe));var Q=cp(pe),ce=[];if(i&&ce.push(Z[G]<=0),c&&ce.push(Z[pe]<=0,Z[Q]<=0),ce.every(function(fe){return fe})){$=F,z=!1;break}A.set(F,ce)}if(z)for(var le=v?3:1,B=function(re){var ge=S.find(function(Oe){var me=A.get(Oe);if(me)return me.slice(0,re).every(function(_e){return _e})});if(ge)return $=ge,"break"},X=le;X>0;X--){var ae=B(X);if(ae==="break")break}t.placement!==$&&(t.modifiersData[n]._skip=!0,t.placement=$,t.reset=!0)}}const eV={name:"flip",enabled:!0,phase:"main",fn:QU,requiresIfExists:["offset"],data:{_skip:!1}};function p2(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function g2(e){return[In,zs,Rs,Fn].some(function(t){return e[t]>=0})}function tV(e){var t=e.state,r=e.name,n=t.rects.reference,a=t.rects.popper,i=t.modifiersData.preventOverflow,o=Jh(t,{elementContext:"reference"}),c=Jh(t,{altBoundary:!0}),d=p2(o,n),u=p2(c,a,i),f=g2(d),m=g2(u);t.modifiersData[r]={referenceClippingOffsets:d,popperEscapeOffsets:u,isReferenceHidden:f,hasPopperEscaped:m},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":m})}const rV={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:tV};function nV(e,t,r){var n=Ea(e),a=[Fn,In].indexOf(n)>=0?-1:1,i=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,o=i[0],c=i[1];return o=o||0,c=(c||0)*a,[Fn,zs].indexOf(n)>=0?{x:c,y:o}:{x:o,y:c}}function sV(e){var t=e.state,r=e.options,n=e.name,a=r.offset,i=a===void 0?[0,0]:a,o=y_.reduce(function(f,m){return f[m]=nV(m,t.rects,i),f},{}),c=o[t.placement],d=c.x,u=c.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=d,t.modifiersData.popperOffsets.y+=u),t.modifiersData[n]=o}const aV={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:sV};function iV(e){var t=e.state,r=e.name;t.modifiersData[r]=J5({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const oV={name:"popperOffsets",enabled:!0,phase:"read",fn:iV,data:{}};function lV(e){return e==="x"?"y":"x"}function cV(e){var t=e.state,r=e.options,n=e.name,a=r.mainAxis,i=a===void 0?!0:a,o=r.altAxis,c=o===void 0?!1:o,d=r.boundary,u=r.rootBoundary,f=r.altBoundary,m=r.padding,p=r.tether,x=p===void 0?!0:p,v=r.tetherOffset,y=v===void 0?0:v,_=Jh(t,{boundary:d,rootBoundary:u,padding:m,altBoundary:f}),w=Ea(t.placement),b=Td(t.placement),N=!b,S=w_(w),C=lV(S),O=t.modifiersData.popperOffsets,A=t.rects.reference,z=t.rects.popper,$=typeof y=="function"?y(Object.assign({},t.rects,{placement:t.placement})):y,W=typeof $=="number"?{mainAxis:$,altAxis:$}:Object.assign({mainAxis:0,altAxis:0},$),F=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,G={x:0,y:0};if(O){if(i){var ee,K=S==="y"?In:Fn,oe=S==="y"?Rs:zs,Z=S==="y"?"height":"width",pe=O[S],Q=pe+_[K],ce=pe-_[oe],le=x?-z[Z]/2:0,B=b===Cd?A[Z]:z[Z],X=b===Cd?-z[Z]:-A[Z],ae=t.elements.arrow,fe=x&&ae?b_(ae):{width:0,height:0},re=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:G5(),ge=re[K],Oe=re[oe],me=ch(0,A[Z],fe[Z]),_e=N?A[Z]/2-le-me-ge-W.mainAxis:B-me-ge-W.mainAxis,$e=N?-A[Z]/2+le+me+Oe+W.mainAxis:X+me+Oe+W.mainAxis,Pe=t.elements.arrow&&jf(t.elements.arrow),Le=Pe?S==="y"?Pe.clientTop||0:Pe.clientLeft||0:0,Ge=(ee=F==null?void 0:F[S])!=null?ee:0,et=pe+_e-Ge-Le,ue=pe+$e-Ge,Ae=ch(x?fg(Q,et):Q,pe,x?El(ce,ue):ce);O[S]=Ae,G[S]=Ae-pe}if(c){var lt,Ke=S==="x"?In:Fn,V=S==="x"?Rs:zs,st=O[C],Ut=C==="y"?"height":"width",br=st+_[Ke],vt=st-_[V],se=[In,Fn].indexOf(w)!==-1,Se=(lt=F==null?void 0:F[C])!=null?lt:0,dr=se?br:st-A[Ut]-z[Ut]-Se+W.altAxis,un=se?st+A[Ut]+z[Ut]-Se-W.altAxis:vt,Pr=x&&se?DU(dr,st,un):ch(x?dr:br,st,x?un:vt);O[C]=Pr,G[C]=Pr-st}t.modifiersData[n]=G}}const dV={name:"preventOverflow",enabled:!0,phase:"main",fn:cV,requiresIfExists:["offset"]};function uV(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function hV(e){return e===ss(e)||!Pa(e)?__(e):uV(e)}function fV(e){var t=e.getBoundingClientRect(),r=Ed(t.width)/e.offsetWidth||1,n=Ed(t.height)/e.offsetHeight||1;return r!==1||n!==1}function mV(e,t,r){r===void 0&&(r=!1);var n=Pa(t),a=Pa(t)&&fV(t),i=Io(t),o=Pd(e,a,r),c={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(n||!n&&!r)&&((Oo(t)!=="body"||j_(i))&&(c=hV(t)),Pa(t)?(d=Pd(t,!0),d.x+=t.clientLeft,d.y+=t.clientTop):i&&(d.x=k_(i))),{x:o.left+c.scrollLeft-d.x,y:o.top+c.scrollTop-d.y,width:o.width,height:o.height}}function pV(e){var t=new Map,r=new Set,n=[];e.forEach(function(i){t.set(i.name,i)});function a(i){r.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(c){if(!r.has(c)){var d=t.get(c);d&&a(d)}}),n.push(i)}return e.forEach(function(i){r.has(i.name)||a(i)}),n}function gV(e){var t=pV(e);return TU.reduce(function(r,n){return r.concat(t.filter(function(a){return a.phase===n}))},[])}function xV(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function yV(e){var t=e.reduce(function(r,n){var a=r[n.name];return r[n.name]=a?Object.assign({},a,n,{options:Object.assign({},a.options,n.options),data:Object.assign({},a.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var x2={placement:"bottom",modifiers:[],strategy:"absolute"};function y2(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function vV(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,a=t.defaultOptions,i=a===void 0?x2:a;return function(c,d,u){u===void 0&&(u=i);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},x2,i),modifiersData:{},elements:{reference:c,popper:d},attributes:{},styles:{}},m=[],p=!1,x={state:f,setOptions:function(w){var b=typeof w=="function"?w(f.options):w;y(),f.options=Object.assign({},i,f.options,b),f.scrollParents={reference:Wl(c)?dh(c):c.contextElement?dh(c.contextElement):[],popper:dh(d)};var N=gV(yV([].concat(n,f.options.modifiers)));return f.orderedModifiers=N.filter(function(S){return S.enabled}),v(),x.update()},forceUpdate:function(){if(!p){var w=f.elements,b=w.reference,N=w.popper;if(y2(b,N)){f.rects={reference:mV(b,jf(N),f.options.strategy==="fixed"),popper:b_(N)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(W){return f.modifiersData[W.name]=Object.assign({},W.data)});for(var S=0;S<f.orderedModifiers.length;S++){if(f.reset===!0){f.reset=!1,S=-1;continue}var C=f.orderedModifiers[S],O=C.fn,A=C.options,z=A===void 0?{}:A,$=C.name;typeof O=="function"&&(f=O({state:f,options:z,name:$,instance:x})||f)}}}},update:xV(function(){return new Promise(function(_){x.forceUpdate(),_(f)})}),destroy:function(){y(),p=!0}};if(!y2(c,d))return x;x.setOptions(u).then(function(_){!p&&u.onFirstUpdate&&u.onFirstUpdate(_)});function v(){f.orderedModifiers.forEach(function(_){var w=_.name,b=_.options,N=b===void 0?{}:b,S=_.effect;if(typeof S=="function"){var C=S({state:f,name:w,instance:x,options:N}),O=function(){};m.push(C||O)}})}function y(){m.forEach(function(_){return _()}),m=[]}return x}}var bV=vV({defaultModifiers:[rV,oV,BU,WU,aV,eV,dV,zU]}),v2=function(t){return{position:t,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},wV={name:"applyStyles",enabled:!1},_V={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(t){var r=t.state;return function(){var n=r.elements,a=n.reference,i=n.popper;if("removeAttribute"in a){var o=(a.getAttribute("aria-describedby")||"").split(",").filter(function(c){return c.trim()!==i.id});o.length?a.setAttribute("aria-describedby",o.join(",")):a.removeAttribute("aria-describedby")}}},fn:function(t){var r,n=t.state,a=n.elements,i=a.popper,o=a.reference,c=(r=i.getAttribute("role"))==null?void 0:r.toLowerCase();if(i.id&&c==="tooltip"&&"setAttribute"in o){var d=o.getAttribute("aria-describedby");if(d&&d.split(",").indexOf(i.id)!==-1)return;o.setAttribute("aria-describedby",d?d+","+i.id:i.id)}}},kV=[];function jV(e,t,r){var n=r===void 0?{}:r,a=n.enabled,i=a===void 0?!0:a,o=n.placement,c=o===void 0?"bottom":o,d=n.strategy,u=d===void 0?"absolute":d,f=n.modifiers,m=f===void 0?kV:f,p=Vg(n,["enabled","placement","strategy","modifiers"]),x=E.useRef(),v=E.useCallback(function(){var S;(S=x.current)==null||S.update()},[]),y=E.useCallback(function(){var S;(S=x.current)==null||S.forceUpdate()},[]),_=yU(E.useState({placement:c,update:v,forceUpdate:y,attributes:{},styles:{popper:v2(u),arrow:{}}})),w=_[0],b=_[1],N=E.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(C){var O=C.state,A={},z={};Object.keys(O.elements).forEach(function($){A[$]=O.styles[$],z[$]=O.attributes[$]}),b({state:O,styles:A,attributes:z,update:v,forceUpdate:y,placement:O.placement})}}},[v,y,b]);return E.useEffect(function(){!x.current||!i||x.current.setOptions({placement:c,strategy:u,modifiers:[].concat(m,[N,wV])})},[u,c,N,i]),E.useEffect(function(){if(!(!i||e==null||t==null))return x.current=bV(e,t,Xt({},p,{placement:c,strategy:u,modifiers:[].concat(m,[_V,N])})),function(){x.current!=null&&(x.current.destroy(),x.current=void 0,b(function(S){return Xt({},S,{attributes:{},styles:{popper:v2(u)}})}))}},[i,e,t]),w}function NV(e,t,r,n){var a=n&&typeof n!="boolean"?n.capture:n;e.removeEventListener(t,r,a),r.__once&&e.removeEventListener(t,r.__once,a)}function Gu(e,t,r,n){return pU(e,t,r,n),function(){NV(e,t,r,n)}}var SV=function(){},CV=SV;const EV=Yr(CV);function PV(e){return e&&"setState"in e?Hg.findDOMNode(e):e??null}const TV=function(e){return _f(PV(e))};var MV=27,b2=function(){};function OV(e){return e.button===0}function DV(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var w2=function(t){return t&&("current"in t?t.current:t)};function LV(e,t,r){var n=r===void 0?{}:r,a=n.disabled,i=n.clickTrigger,o=i===void 0?"click":i,c=E.useRef(!1),d=t||b2,u=E.useCallback(function(p){var x,v=w2(e);EV(!!v,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),c.current=!v||DV(p)||!OV(p)||!!Kh(v,(x=p.composedPath==null?void 0:p.composedPath()[0])!=null?x:p.target)},[e]),f=l2(function(p){c.current||d(p)}),m=l2(function(p){p.keyCode===MV&&d(p)});E.useEffect(function(){if(!(a||e==null)){var p=window.event,x=TV(w2(e)),v=Gu(x,o,u,!0),y=Gu(x,o,function(b){if(b===p){p=void 0;return}f(b)}),_=Gu(x,"keyup",function(b){if(b===p){p=void 0;return}m(b)}),w=[];return"ontouchstart"in x.documentElement&&(w=[].slice.call(x.body.children).map(function(b){return Gu(b,"mousemove",b2)})),function(){v(),y(),_(),w.forEach(function(b){return b()})}}},[e,a,o,u,f,m])}function AV(e){var t={};return Array.isArray(e)?(e==null||e.forEach(function(r){t[r.name]=r}),t):e||t}function RV(e){return e===void 0&&(e={}),Array.isArray(e)?e:Object.keys(e).map(function(t){return e[t].name=t,e[t]})}function zV(e){var t,r,n,a,i=e.enabled,o=e.enableEvents,c=e.placement,d=e.flip,u=e.offset,f=e.fixed,m=e.containerPadding,p=e.arrowElement,x=e.popperConfig,v=x===void 0?{}:x,y=AV(v.modifiers);return Xt({},v,{placement:c,enabled:i,strategy:f?"fixed":v.strategy,modifiers:RV(Xt({},y,{eventListeners:{enabled:o},preventOverflow:Xt({},y.preventOverflow,{options:m?Xt({padding:m},(t=y.preventOverflow)==null?void 0:t.options):(r=y.preventOverflow)==null?void 0:r.options}),offset:{options:Xt({offset:u},(n=y.offset)==null?void 0:n.options)},arrow:Xt({},y.arrow,{enabled:!!p,options:Xt({},(a=y.arrow)==null?void 0:a.options,{element:p})}),flip:Xt({enabled:!!d},y.flip)}))})}function $V(e,t){return e.classList?e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function IV(e,t){e.classList?e.classList.add(t):$V(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function _2(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function FV(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=_2(e.className,t):e.setAttribute("class",_2(e.className&&e.className.baseVal||"",t))}var Lm;function N_(e){if((!Lm&&Lm!==0||e)&&g_){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Lm=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Lm}var oy=function(t){var r;return typeof document>"u"?null:t==null?_f().body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),(r=t)!=null&&r.nodeType&&t||null)};function k2(e,t){var r=E.useState(function(){return oy(e)}),n=r[0],a=r[1];if(!n){var i=oy(e);i&&a(i)}return E.useEffect(function(){},[t,n]),E.useEffect(function(){var o=oy(e);o!==n&&a(o)},[e,n]),n}const j2=e=>!e||typeof e=="function"?e:t=>{e.current=t};function BV(e,t){const r=j2(e),n=j2(t);return a=>{r&&r(a),n&&n(a)}}function HV(e,t){return E.useMemo(()=>BV(e,t),[e,t])}var S_=J.forwardRef(function(e,t){var r=e.flip,n=e.offset,a=e.placement,i=e.containerPadding,o=i===void 0?5:i,c=e.popperConfig,d=c===void 0?{}:c,u=e.transition,f=c2(),m=f[0],p=f[1],x=c2(),v=x[0],y=x[1],_=HV(p,t),w=k2(e.container),b=k2(e.target),N=E.useState(!e.show),S=N[0],C=N[1],O=jV(b,m,zV({placement:a,enableEvents:!!e.show,containerPadding:o||5,flip:r,offset:n,arrowElement:v,popperConfig:d})),A=O.styles,z=O.attributes,$=Vg(O,["styles","attributes"]);e.show?S&&C(!1):!e.transition&&!S&&C(!0);var W=function(){C(!0),e.onExited&&e.onExited.apply(e,arguments)},F=e.show||u&&!S;if(LV(m,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!F)return null;var G=e.children(Xt({},$,{show:!!e.show,props:Xt({},z.popper,{style:A.popper,ref:_}),arrowProps:Xt({},z.arrow,{style:A.arrow,ref:y})}));if(u){var ee=e.onExit,K=e.onExiting,oe=e.onEnter,Z=e.onEntering,pe=e.onEntered;G=J.createElement(u,{in:e.show,appear:!0,onExit:ee,onExiting:K,onExited:W,onEnter:oe,onEntering:Z,onEntered:pe},G)}return w?Hg.createPortal(G,w):null});S_.displayName="Overlay";S_.propTypes={show:ve.bool,placement:ve.oneOf(y_),target:ve.any,container:ve.any,flip:ve.bool,children:ve.func.isRequired,containerPadding:ve.number,popperConfig:ve.object,rootClose:ve.bool,rootCloseEvent:ve.oneOf(["click","mousedown"]),rootCloseDisabled:ve.bool,onHide:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];if(t.rootClose){var i;return(i=ve.func).isRequired.apply(i,[t].concat(n))}return ve.func.apply(ve,[t].concat(n))},transition:ve.elementType,onEnter:ve.func,onEntering:ve.func,onEntered:ve.func,onExit:ve.func,onExiting:ve.func,onExited:ve.func};function WV(){this.__data__=[],this.size=0}var UV=WV,VV=vf;function qV(e,t){for(var r=e.length;r--;)if(VV(e[r][0],t))return r;return-1}var y0=qV,YV=y0,GV=Array.prototype,ZV=GV.splice;function KV(e){var t=this.__data__,r=YV(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():ZV.call(t,r,1),--this.size,!0}var XV=KV,JV=y0;function QV(e){var t=this.__data__,r=JV(t,e);return r<0?void 0:t[r][1]}var eq=QV,tq=y0;function rq(e){return tq(this.__data__,e)>-1}var nq=rq,sq=y0;function aq(e,t){var r=this.__data__,n=sq(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var iq=aq,oq=UV,lq=XV,cq=eq,dq=nq,uq=iq;function Vd(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Vd.prototype.clear=oq;Vd.prototype.delete=lq;Vd.prototype.get=cq;Vd.prototype.has=dq;Vd.prototype.set=uq;var v0=Vd,hq=v0;function fq(){this.__data__=new hq,this.size=0}var mq=fq;function pq(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var gq=pq;function xq(e){return this.__data__.get(e)}var yq=xq;function vq(e){return this.__data__.has(e)}var bq=vq,wq=Aa,_q=wq["__core-js_shared__"],kq=_q,ly=kq,N2=function(){var e=/[^.]+$/.exec(ly&&ly.keys&&ly.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function jq(e){return!!N2&&N2 in e}var Nq=jq,Sq=Function.prototype,Cq=Sq.toString;function Eq(e){if(e!=null){try{return Cq.call(e)}catch{}try{return e+""}catch{}}return""}var Q5=Eq,Pq=h_,Tq=Nq,Mq=Mi,Oq=Q5,Dq=/[\\^$.*+?()[\]{}|]/g,Lq=/^\[object .+?Constructor\]$/,Aq=Function.prototype,Rq=Object.prototype,zq=Aq.toString,$q=Rq.hasOwnProperty,Iq=RegExp("^"+zq.call($q).replace(Dq,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Fq(e){if(!Mq(e)||Tq(e))return!1;var t=Pq(e)?Iq:Lq;return t.test(Oq(e))}var Bq=Fq;function Hq(e,t){return e==null?void 0:e[t]}var Wq=Hq,Uq=Bq,Vq=Wq;function qq(e,t){var r=Vq(e,t);return Uq(r)?r:void 0}var Xl=qq,Yq=Xl,Gq=Aa,Zq=Yq(Gq,"Map"),C_=Zq,Kq=Xl,Xq=Kq(Object,"create"),b0=Xq,S2=b0;function Jq(){this.__data__=S2?S2(null):{},this.size=0}var Qq=Jq;function eY(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var tY=eY,rY=b0,nY="__lodash_hash_undefined__",sY=Object.prototype,aY=sY.hasOwnProperty;function iY(e){var t=this.__data__;if(rY){var r=t[e];return r===nY?void 0:r}return aY.call(t,e)?t[e]:void 0}var oY=iY,lY=b0,cY=Object.prototype,dY=cY.hasOwnProperty;function uY(e){var t=this.__data__;return lY?t[e]!==void 0:dY.call(t,e)}var hY=uY,fY=b0,mY="__lodash_hash_undefined__";function pY(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=fY&&t===void 0?mY:t,this}var gY=pY,xY=Qq,yY=tY,vY=oY,bY=hY,wY=gY;function qd(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}qd.prototype.clear=xY;qd.prototype.delete=yY;qd.prototype.get=vY;qd.prototype.has=bY;qd.prototype.set=wY;var _Y=qd,C2=_Y,kY=v0,jY=C_;function NY(){this.size=0,this.__data__={hash:new C2,map:new(jY||kY),string:new C2}}var SY=NY;function CY(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var EY=CY,PY=EY;function TY(e,t){var r=e.__data__;return PY(t)?r[typeof t=="string"?"string":"hash"]:r.map}var w0=TY,MY=w0;function OY(e){var t=MY(this,e).delete(e);return this.size-=t?1:0,t}var DY=OY,LY=w0;function AY(e){return LY(this,e).get(e)}var RY=AY,zY=w0;function $Y(e){return zY(this,e).has(e)}var IY=$Y,FY=w0;function BY(e,t){var r=FY(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var HY=BY,WY=SY,UY=DY,VY=RY,qY=IY,YY=HY;function Yd(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Yd.prototype.clear=WY;Yd.prototype.delete=UY;Yd.prototype.get=VY;Yd.prototype.has=qY;Yd.prototype.set=YY;var E_=Yd,GY=v0,ZY=C_,KY=E_,XY=200;function JY(e,t){var r=this.__data__;if(r instanceof GY){var n=r.__data__;if(!ZY||n.length<XY-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new KY(n)}return r.set(e,t),this.size=r.size,this}var QY=JY,eG=v0,tG=mq,rG=gq,nG=yq,sG=bq,aG=QY;function Gd(e){var t=this.__data__=new eG(e);this.size=t.size}Gd.prototype.clear=tG;Gd.prototype.delete=rG;Gd.prototype.get=nG;Gd.prototype.has=sG;Gd.prototype.set=aG;var P_=Gd,iG="__lodash_hash_undefined__";function oG(e){return this.__data__.set(e,iG),this}var lG=oG;function cG(e){return this.__data__.has(e)}var dG=cG,uG=E_,hG=lG,fG=dG;function mg(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new uG;++t<r;)this.add(e[t])}mg.prototype.add=mg.prototype.push=hG;mg.prototype.has=fG;var mG=mg;function pG(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var gG=pG;function xG(e,t){return e.has(t)}var yG=xG,vG=mG,bG=gG,wG=yG,_G=1,kG=2;function jG(e,t,r,n,a,i){var o=r&_G,c=e.length,d=t.length;if(c!=d&&!(o&&d>c))return!1;var u=i.get(e),f=i.get(t);if(u&&f)return u==t&&f==e;var m=-1,p=!0,x=r&kG?new vG:void 0;for(i.set(e,t),i.set(t,e);++m<c;){var v=e[m],y=t[m];if(n)var _=o?n(y,v,m,t,e,i):n(v,y,m,e,t,i);if(_!==void 0){if(_)continue;p=!1;break}if(x){if(!bG(t,function(w,b){if(!wG(x,b)&&(v===w||a(v,w,r,n,i)))return x.push(b)})){p=!1;break}}else if(!(v===y||a(v,y,r,n,i))){p=!1;break}}return i.delete(e),i.delete(t),p}var eT=jG,NG=Aa,SG=NG.Uint8Array,tT=SG;function CG(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var EG=CG;function PG(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var TG=PG,E2=Wd,P2=tT,MG=vf,OG=eT,DG=EG,LG=TG,AG=1,RG=2,zG="[object Boolean]",$G="[object Date]",IG="[object Error]",FG="[object Map]",BG="[object Number]",HG="[object RegExp]",WG="[object Set]",UG="[object String]",VG="[object Symbol]",qG="[object ArrayBuffer]",YG="[object DataView]",T2=E2?E2.prototype:void 0,cy=T2?T2.valueOf:void 0;function GG(e,t,r,n,a,i,o){switch(r){case YG:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case qG:return!(e.byteLength!=t.byteLength||!i(new P2(e),new P2(t)));case zG:case $G:case BG:return MG(+e,+t);case IG:return e.name==t.name&&e.message==t.message;case HG:case UG:return e==t+"";case FG:var c=DG;case WG:var d=n&AG;if(c||(c=LG),e.size!=t.size&&!d)return!1;var u=o.get(e);if(u)return u==t;n|=RG,o.set(e,t);var f=OG(c(e),c(t),n,a,i,o);return o.delete(e),f;case VG:if(cy)return cy.call(e)==cy.call(t)}return!1}var ZG=GG;function KG(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var T_=KG,XG=Array.isArray,$s=XG,JG=T_,QG=$s;function eZ(e,t,r){var n=t(e);return QG(e)?n:JG(n,r(e))}var rT=eZ;function tZ(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}var rZ=tZ;function nZ(){return[]}var nT=nZ,sZ=rZ,aZ=nT,iZ=Object.prototype,oZ=iZ.propertyIsEnumerable,M2=Object.getOwnPropertySymbols,lZ=M2?function(e){return e==null?[]:(e=Object(e),sZ(M2(e),function(t){return oZ.call(e,t)}))}:aZ,M_=lZ;function cZ(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var dZ=cZ,uZ=Ud,hZ=$o,fZ="[object Arguments]";function mZ(e){return hZ(e)&&uZ(e)==fZ}var pZ=mZ,O2=pZ,gZ=$o,sT=Object.prototype,xZ=sT.hasOwnProperty,yZ=sT.propertyIsEnumerable,vZ=O2(function(){return arguments}())?O2:function(e){return gZ(e)&&xZ.call(e,"callee")&&!yZ.call(e,"callee")},O_=vZ,pg={exports:{}};function bZ(){return!1}var wZ=bZ;pg.exports;(function(e,t){var r=Aa,n=wZ,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,c=o?r.Buffer:void 0,d=c?c.isBuffer:void 0,u=d||n;e.exports=u})(pg,pg.exports);var _0=pg.exports,_Z=Ud,kZ=f_,jZ=$o,NZ="[object Arguments]",SZ="[object Array]",CZ="[object Boolean]",EZ="[object Date]",PZ="[object Error]",TZ="[object Function]",MZ="[object Map]",OZ="[object Number]",DZ="[object Object]",LZ="[object RegExp]",AZ="[object Set]",RZ="[object String]",zZ="[object WeakMap]",$Z="[object ArrayBuffer]",IZ="[object DataView]",FZ="[object Float32Array]",BZ="[object Float64Array]",HZ="[object Int8Array]",WZ="[object Int16Array]",UZ="[object Int32Array]",VZ="[object Uint8Array]",qZ="[object Uint8ClampedArray]",YZ="[object Uint16Array]",GZ="[object Uint32Array]",At={};At[FZ]=At[BZ]=At[HZ]=At[WZ]=At[UZ]=At[VZ]=At[qZ]=At[YZ]=At[GZ]=!0;At[NZ]=At[SZ]=At[$Z]=At[CZ]=At[IZ]=At[EZ]=At[PZ]=At[TZ]=At[MZ]=At[OZ]=At[DZ]=At[LZ]=At[AZ]=At[RZ]=At[zZ]=!1;function ZZ(e){return jZ(e)&&kZ(e.length)&&!!At[_Z(e)]}var KZ=ZZ;function XZ(e){return function(t){return e(t)}}var k0=XZ,gg={exports:{}};gg.exports;(function(e,t){var r=R5,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i&&r.process,c=function(){try{var d=a&&a.require&&a.require("util").types;return d||o&&o.binding&&o.binding("util")}catch{}}();e.exports=c})(gg,gg.exports);var D_=gg.exports,JZ=KZ,QZ=k0,D2=D_,L2=D2&&D2.isTypedArray,eK=L2?QZ(L2):JZ,L_=eK,tK=dZ,rK=O_,nK=$s,sK=_0,aK=m_,iK=L_,oK=Object.prototype,lK=oK.hasOwnProperty;function cK(e,t){var r=nK(e),n=!r&&rK(e),a=!r&&!n&&sK(e),i=!r&&!n&&!a&&iK(e),o=r||n||a||i,c=o?tK(e.length,String):[],d=c.length;for(var u in e)(t||lK.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||aK(u,d)))&&c.push(u);return c}var aT=cK,dK=Object.prototype;function uK(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||dK;return e===r}var A_=uK;function hK(e,t){return function(r){return e(t(r))}}var iT=hK,fK=iT,mK=fK(Object.keys,Object),pK=mK,gK=A_,xK=pK,yK=Object.prototype,vK=yK.hasOwnProperty;function bK(e){if(!gK(e))return xK(e);var t=[];for(var r in Object(e))vK.call(e,r)&&r!="constructor"&&t.push(r);return t}var wK=bK,_K=aT,kK=wK,jK=bf;function NK(e){return jK(e)?_K(e):kK(e)}var Nf=NK,SK=rT,CK=M_,EK=Nf;function PK(e){return SK(e,EK,CK)}var oT=PK,A2=oT,TK=1,MK=Object.prototype,OK=MK.hasOwnProperty;function DK(e,t,r,n,a,i){var o=r&TK,c=A2(e),d=c.length,u=A2(t),f=u.length;if(d!=f&&!o)return!1;for(var m=d;m--;){var p=c[m];if(!(o?p in t:OK.call(t,p)))return!1}var x=i.get(e),v=i.get(t);if(x&&v)return x==t&&v==e;var y=!0;i.set(e,t),i.set(t,e);for(var _=o;++m<d;){p=c[m];var w=e[p],b=t[p];if(n)var N=o?n(b,w,p,t,e,i):n(w,b,p,e,t,i);if(!(N===void 0?w===b||a(w,b,r,n,i):N)){y=!1;break}_||(_=p=="constructor")}if(y&&!_){var S=e.constructor,C=t.constructor;S!=C&&"constructor"in e&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof C=="function"&&C instanceof C)&&(y=!1)}return i.delete(e),i.delete(t),y}var LK=DK,AK=Xl,RK=Aa,zK=AK(RK,"DataView"),$K=zK,IK=Xl,FK=Aa,BK=IK(FK,"Promise"),HK=BK,WK=Xl,UK=Aa,VK=WK(UK,"Set"),qK=VK,YK=Xl,GK=Aa,ZK=YK(GK,"WeakMap"),KK=ZK,rb=$K,nb=C_,sb=HK,ab=qK,ib=KK,lT=Ud,Zd=Q5,R2="[object Map]",XK="[object Object]",z2="[object Promise]",$2="[object Set]",I2="[object WeakMap]",F2="[object DataView]",JK=Zd(rb),QK=Zd(nb),eX=Zd(sb),tX=Zd(ab),rX=Zd(ib),ul=lT;(rb&&ul(new rb(new ArrayBuffer(1)))!=F2||nb&&ul(new nb)!=R2||sb&&ul(sb.resolve())!=z2||ab&&ul(new ab)!=$2||ib&&ul(new ib)!=I2)&&(ul=function(e){var t=lT(e),r=t==XK?e.constructor:void 0,n=r?Zd(r):"";if(n)switch(n){case JK:return F2;case QK:return R2;case eX:return z2;case tX:return $2;case rX:return I2}return t});var j0=ul,dy=P_,nX=eT,sX=ZG,aX=LK,B2=j0,H2=$s,W2=_0,iX=L_,oX=1,U2="[object Arguments]",V2="[object Array]",Am="[object Object]",lX=Object.prototype,q2=lX.hasOwnProperty;function cX(e,t,r,n,a,i){var o=H2(e),c=H2(t),d=o?V2:B2(e),u=c?V2:B2(t);d=d==U2?Am:d,u=u==U2?Am:u;var f=d==Am,m=u==Am,p=d==u;if(p&&W2(e)){if(!W2(t))return!1;o=!0,f=!1}if(p&&!f)return i||(i=new dy),o||iX(e)?nX(e,t,r,n,a,i):sX(e,t,d,r,n,a,i);if(!(r&oX)){var x=f&&q2.call(e,"__wrapped__"),v=m&&q2.call(t,"__wrapped__");if(x||v){var y=x?e.value():e,_=v?t.value():t;return i||(i=new dy),a(y,_,r,n,i)}}return p?(i||(i=new dy),aX(e,t,r,n,a,i)):!1}var dX=cX,uX=dX,Y2=$o;function cT(e,t,r,n,a){return e===t?!0:e==null||t==null||!Y2(e)&&!Y2(t)?e!==e&&t!==t:uX(e,t,r,n,cT,a)}var R_=cT,hX=R_;function fX(e,t){return hX(e,t)}var mX=fX;const pX=Yr(mX);function uy(e,t){var r=p_(e);return r?r.innerHeight:Cl(e).height}function dT(e,t,r){e.closest&&!r&&e.closest(t);var n=e;do{if(hU(n,t))return n;n=n.parentElement}while(n&&n!==r&&n.nodeType===document.ELEMENT_NODE);return null}function gX(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var xX=gX,yX=P_,vX=R_,bX=1,wX=2;function _X(e,t,r,n){var a=r.length,i=a,o=!n;if(e==null)return!i;for(e=Object(e);a--;){var c=r[a];if(o&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<i;){c=r[a];var d=c[0],u=e[d],f=c[1];if(o&&c[2]){if(u===void 0&&!(d in e))return!1}else{var m=new yX;if(n)var p=n(u,f,d,e,t,m);if(!(p===void 0?vX(f,u,bX|wX,n,m):p))return!1}}return!0}var kX=_X,jX=Mi;function NX(e){return e===e&&!jX(e)}var uT=NX,SX=uT,CX=Nf;function EX(e){for(var t=CX(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,SX(a)]}return t}var PX=EX;function TX(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var hT=TX,MX=kX,OX=PX,DX=hT;function LX(e){var t=OX(e);return t.length==1&&t[0][2]?DX(t[0][0],t[0][1]):function(r){return r===e||MX(r,e,t)}}var AX=LX,RX=$s,zX=wf,$X=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,IX=/^\w*$/;function FX(e,t){if(RX(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||zX(e)?!0:IX.test(e)||!$X.test(e)||t!=null&&e in Object(t)}var z_=FX,fT=E_,BX="Expected a function";function $_(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(BX);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new($_.Cache||fT),r}$_.Cache=fT;var HX=$_,WX=HX,UX=500;function VX(e){var t=WX(e,function(n){return r.size===UX&&r.clear(),n}),r=t.cache;return t}var qX=VX,YX=qX,GX=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ZX=/\\(\\)?/g,KX=YX(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(GX,function(r,n,a,i){t.push(a?i.replace(ZX,"$1"):n||r)}),t}),XX=KX;function JX(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var I_=JX,G2=Wd,QX=I_,eJ=$s,tJ=wf,Z2=G2?G2.prototype:void 0,K2=Z2?Z2.toString:void 0;function mT(e){if(typeof e=="string")return e;if(eJ(e))return QX(e,mT)+"";if(tJ(e))return K2?K2.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var rJ=mT,nJ=rJ;function sJ(e){return e==null?"":nJ(e)}var aJ=sJ,iJ=$s,oJ=z_,lJ=XX,cJ=aJ;function dJ(e,t){return iJ(e)?e:oJ(e,t)?[e]:lJ(cJ(e))}var N0=dJ,uJ=wf;function hJ(e){if(typeof e=="string"||uJ(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Sf=hJ,fJ=N0,mJ=Sf;function pJ(e,t){t=fJ(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[mJ(t[r++])];return r&&r==n?e:void 0}var S0=pJ,gJ=S0;function xJ(e,t,r){var n=e==null?void 0:gJ(e,t);return n===void 0?r:n}var yJ=xJ;function vJ(e,t){return e!=null&&t in Object(e)}var bJ=vJ,wJ=N0,_J=O_,kJ=$s,jJ=m_,NJ=f_,SJ=Sf;function CJ(e,t,r){t=wJ(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var o=SJ(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&NJ(a)&&jJ(o,a)&&(kJ(e)||_J(e)))}var EJ=CJ,PJ=bJ,TJ=EJ;function MJ(e,t){return e!=null&&TJ(e,t,PJ)}var OJ=MJ,DJ=R_,LJ=yJ,AJ=OJ,RJ=z_,zJ=uT,$J=hT,IJ=Sf,FJ=1,BJ=2;function HJ(e,t){return RJ(e)&&zJ(t)?$J(IJ(e),t):function(r){var n=LJ(r,e);return n===void 0&&n===t?AJ(r,e):DJ(t,n,FJ|BJ)}}var WJ=HJ;function UJ(e){return e}var C0=UJ;function VJ(e){return function(t){return t==null?void 0:t[e]}}var qJ=VJ,YJ=S0;function GJ(e){return function(t){return YJ(t,e)}}var ZJ=GJ,KJ=qJ,XJ=ZJ,JJ=z_,QJ=Sf;function eQ(e){return JJ(e)?KJ(QJ(e)):XJ(e)}var tQ=eQ,rQ=AX,nQ=WJ,sQ=C0,aQ=$s,iQ=tQ;function oQ(e){return typeof e=="function"?e:e==null?sQ:typeof e=="object"?aQ(e)?nQ(e[0],e[1]):rQ(e):iQ(e)}var E0=oQ,lQ=xX,cQ=E0,dQ=I5,uQ=Math.max;function hQ(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:dQ(r);return a<0&&(a=uQ(n+a,0)),lQ(e,cQ(t),a)}var fQ=hQ;const mQ=Yr(fQ);var pQ=Math.ceil,gQ=Math.max;function xQ(e,t,r,n){for(var a=-1,i=gQ(pQ((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++a]=e,e+=r;return o}var yQ=xQ,vQ=yQ,bQ=g0,hy=$5;function wQ(e){return function(t,r,n){return n&&typeof n!="number"&&bQ(t,r,n)&&(r=n=void 0),t=hy(t),r===void 0?(r=t,t=0):r=hy(r),n=n===void 0?t<r?1:-1:hy(n),vQ(t,r,n,e)}}var _Q=wQ,kQ=_Q,jQ=kQ(),NQ=jQ;const SQ=Yr(NQ);var X2=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function CQ(e,t){return!!(e===t||X2(e)&&X2(t))}function EQ(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!CQ(e[r],t[r]))return!1;return!0}function pT(e,t){t===void 0&&(t=EQ);var r=null;function n(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var o=e.apply(this,a);return r={lastResult:o,lastArgs:a,lastThis:this},o}return n.clear=function(){r=null},n}function ob(e,t){var r=p_(e);return r?r.innerWidth:t?e.clientWidth:Cl(e).width}var J2=Wd,PQ=O_,TQ=$s,Q2=J2?J2.isConcatSpreadable:void 0;function MQ(e){return TQ(e)||PQ(e)||!!(Q2&&e&&e[Q2])}var OQ=MQ,DQ=T_,LQ=OQ;function gT(e,t,r,n,a){var i=-1,o=e.length;for(r||(r=LQ),a||(a=[]);++i<o;){var c=e[i];t>0&&r(c)?t>1?gT(c,t-1,r,n,a):DQ(a,c):n||(a[a.length]=c)}return a}var xT=gT;function AQ(e){return function(t,r,n){for(var a=-1,i=Object(t),o=n(t),c=o.length;c--;){var d=o[e?c:++a];if(r(i[d],d,i)===!1)break}return t}}var RQ=AQ,zQ=RQ,$Q=zQ(),IQ=$Q,FQ=IQ,BQ=Nf;function HQ(e,t){return e&&FQ(e,t,BQ)}var F_=HQ,WQ=bf;function UQ(e,t){return function(r,n){if(r==null)return r;if(!WQ(r))return e(r,n);for(var a=r.length,i=t?a:-1,o=Object(r);(t?i--:++i<a)&&n(o[i],i,o)!==!1;);return r}}var VQ=UQ,qQ=F_,YQ=VQ,GQ=YQ(qQ),ZQ=GQ,KQ=ZQ,XQ=bf;function JQ(e,t){var r=-1,n=XQ(e)?Array(e.length):[];return KQ(e,function(a,i,o){n[++r]=t(a,i,o)}),n}var QQ=JQ;function eee(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var tee=eee,eS=wf;function ree(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=eS(e),o=t!==void 0,c=t===null,d=t===t,u=eS(t);if(!c&&!u&&!i&&e>t||i&&o&&d&&!c&&!u||n&&o&&d||!r&&d||!a)return 1;if(!n&&!i&&!u&&e<t||u&&r&&a&&!n&&!i||c&&r&&a||!o&&a||!d)return-1}return 0}var nee=ree,see=nee;function aee(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,o=a.length,c=r.length;++n<o;){var d=see(a[n],i[n]);if(d){if(n>=c)return d;var u=r[n];return d*(u=="desc"?-1:1)}}return e.index-t.index}var iee=aee,fy=I_,oee=S0,lee=E0,cee=QQ,dee=tee,uee=k0,hee=iee,fee=C0,mee=$s;function pee(e,t,r){t.length?t=fy(t,function(i){return mee(i)?function(o){return oee(o,i.length===1?i[0]:i)}:i}):t=[fee];var n=-1;t=fy(t,uee(lee));var a=cee(e,function(i,o,c){var d=fy(t,function(u){return u(i)});return{criteria:d,index:++n,value:i}});return dee(a,function(i,o){return hee(i,o,r)})}var gee=pee;function xee(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var yee=xee,vee=yee,tS=Math.max;function bee(e,t,r){return t=tS(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=tS(n.length-t,0),o=Array(i);++a<i;)o[a]=n[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=n[a];return c[t]=r(o),vee(e,this,c)}}var yT=bee;function wee(e){return function(){return e}}var _ee=wee,kee=Xl,jee=function(){try{var e=kee(Object,"defineProperty");return e({},"",{}),e}catch{}}(),vT=jee,Nee=_ee,rS=vT,See=C0,Cee=rS?function(e,t){return rS(e,"toString",{configurable:!0,enumerable:!1,value:Nee(t),writable:!0})}:See,Eee=Cee,Pee=800,Tee=16,Mee=Date.now;function Oee(e){var t=0,r=0;return function(){var n=Mee(),a=Tee-(n-r);if(r=n,a>0){if(++t>=Pee)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Dee=Oee,Lee=Eee,Aee=Dee,Ree=Aee(Lee),bT=Ree,zee=C0,$ee=yT,Iee=bT;function Fee(e,t){return Iee($ee(e,t,zee),e+"")}var wT=Fee,Bee=xT,Hee=gee,Wee=wT,nS=g0,Uee=Wee(function(e,t){if(e==null)return[];var r=t.length;return r>1&&nS(e,t[0],t[1])?t=[]:r>2&&nS(t[0],t[1],t[2])&&(t=[t[0]]),Hee(e,Bee(t,1),[])}),Vee=Uee;const qee=Yr(Vee);function _T(e){return b5(e)||L5(e)||c_(e)||w5()}function Yee(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var Gee=Yee,Zee=Mi,Kee=A_,Xee=Gee,Jee=Object.prototype,Qee=Jee.hasOwnProperty;function ete(e){if(!Zee(e))return Xee(e);var t=Kee(e),r=[];for(var n in e)n=="constructor"&&(t||!Qee.call(e,n))||r.push(n);return r}var tte=ete,rte=aT,nte=tte,ste=bf;function ate(e){return ste(e)?rte(e,!0):nte(e)}var P0=ate,ite=wT,ote=vf,lte=g0,cte=P0,kT=Object.prototype,dte=kT.hasOwnProperty,ute=ite(function(e,t){e=Object(e);var r=-1,n=t.length,a=n>2?t[2]:void 0;for(a&&lte(t[0],t[1],a)&&(n=1);++r<n;)for(var i=t[r],o=cte(i),c=-1,d=o.length;++c<d;){var u=o[c],f=e[u];(f===void 0||ote(f,kT[u])&&!dte.call(e,u))&&(e[u]=i[u])}return e}),hte=ute;const fte=Yr(hte);var sS=vT;function mte(e,t,r){t=="__proto__"&&sS?sS(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var B_=mte,pte=B_,gte=F_,xte=E0;function yte(e,t){var r={};return t=xte(t),gte(e,function(n,a,i){pte(r,a,t(n,a,i))}),r}var vte=yte;const bte=Yr(vte);function wte(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var jT=wte,_te=B_,kte=vf,jte=Object.prototype,Nte=jte.hasOwnProperty;function Ste(e,t,r){var n=e[t];(!(Nte.call(e,t)&&kte(n,r))||r===void 0&&!(t in e))&&_te(e,t,r)}var NT=Ste,Cte=NT,Ete=B_;function Pte(e,t,r,n){var a=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var c=t[i],d=n?n(r[c],e[c],c,r,e):void 0;d===void 0&&(d=e[c]),a?Ete(r,c,d):Cte(r,c,d)}return r}var Cf=Pte,Tte=Cf,Mte=Nf;function Ote(e,t){return e&&Tte(t,Mte(t),e)}var Dte=Ote,Lte=Cf,Ate=P0;function Rte(e,t){return e&&Lte(t,Ate(t),e)}var zte=Rte,xg={exports:{}};xg.exports;(function(e,t){var r=Aa,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i?r.Buffer:void 0,c=o?o.allocUnsafe:void 0;function d(u,f){if(f)return u.slice();var m=u.length,p=c?c(m):new u.constructor(m);return u.copy(p),p}e.exports=d})(xg,xg.exports);var $te=xg.exports;function Ite(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var Fte=Ite,Bte=Cf,Hte=M_;function Wte(e,t){return Bte(e,Hte(e),t)}var Ute=Wte,Vte=iT,qte=Vte(Object.getPrototypeOf,Object),T0=qte,Yte=T_,Gte=T0,Zte=M_,Kte=nT,Xte=Object.getOwnPropertySymbols,Jte=Xte?function(e){for(var t=[];e;)Yte(t,Zte(e)),e=Gte(e);return t}:Kte,ST=Jte,Qte=Cf,ere=ST;function tre(e,t){return Qte(e,ere(e),t)}var rre=tre,nre=rT,sre=ST,are=P0;function ire(e){return nre(e,are,sre)}var CT=ire,ore=Object.prototype,lre=ore.hasOwnProperty;function cre(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&lre.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var dre=cre,aS=tT;function ure(e){var t=new e.constructor(e.byteLength);return new aS(t).set(new aS(e)),t}var H_=ure,hre=H_;function fre(e,t){var r=t?hre(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var mre=fre,pre=/\w*$/;function gre(e){var t=new e.constructor(e.source,pre.exec(e));return t.lastIndex=e.lastIndex,t}var xre=gre,iS=Wd,oS=iS?iS.prototype:void 0,lS=oS?oS.valueOf:void 0;function yre(e){return lS?Object(lS.call(e)):{}}var vre=yre,bre=H_;function wre(e,t){var r=t?bre(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var _re=wre,kre=H_,jre=mre,Nre=xre,Sre=vre,Cre=_re,Ere="[object Boolean]",Pre="[object Date]",Tre="[object Map]",Mre="[object Number]",Ore="[object RegExp]",Dre="[object Set]",Lre="[object String]",Are="[object Symbol]",Rre="[object ArrayBuffer]",zre="[object DataView]",$re="[object Float32Array]",Ire="[object Float64Array]",Fre="[object Int8Array]",Bre="[object Int16Array]",Hre="[object Int32Array]",Wre="[object Uint8Array]",Ure="[object Uint8ClampedArray]",Vre="[object Uint16Array]",qre="[object Uint32Array]";function Yre(e,t,r){var n=e.constructor;switch(t){case Rre:return kre(e);case Ere:case Pre:return new n(+e);case zre:return jre(e,r);case $re:case Ire:case Fre:case Bre:case Hre:case Wre:case Ure:case Vre:case qre:return Cre(e,r);case Tre:return new n;case Mre:case Lre:return new n(e);case Ore:return Nre(e);case Dre:return new n;case Are:return Sre(e)}}var Gre=Yre,Zre=Mi,cS=Object.create,Kre=function(){function e(){}return function(t){if(!Zre(t))return{};if(cS)return cS(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),ET=Kre,Xre=ET,Jre=T0,Qre=A_;function ene(e){return typeof e.constructor=="function"&&!Qre(e)?Xre(Jre(e)):{}}var tne=ene,rne=j0,nne=$o,sne="[object Map]";function ane(e){return nne(e)&&rne(e)==sne}var ine=ane,one=ine,lne=k0,dS=D_,uS=dS&&dS.isMap,cne=uS?lne(uS):one,dne=cne,une=j0,hne=$o,fne="[object Set]";function mne(e){return hne(e)&&une(e)==fne}var pne=mne,gne=pne,xne=k0,hS=D_,fS=hS&&hS.isSet,yne=fS?xne(fS):gne,vne=yne,bne=P_,wne=jT,_ne=NT,kne=Dte,jne=zte,Nne=$te,Sne=Fte,Cne=Ute,Ene=rre,Pne=oT,Tne=CT,Mne=j0,One=dre,Dne=Gre,Lne=tne,Ane=$s,Rne=_0,zne=dne,$ne=Mi,Ine=vne,Fne=Nf,Bne=P0,Hne=1,Wne=2,Une=4,PT="[object Arguments]",Vne="[object Array]",qne="[object Boolean]",Yne="[object Date]",Gne="[object Error]",TT="[object Function]",Zne="[object GeneratorFunction]",Kne="[object Map]",Xne="[object Number]",MT="[object Object]",Jne="[object RegExp]",Qne="[object Set]",ese="[object String]",tse="[object Symbol]",rse="[object WeakMap]",nse="[object ArrayBuffer]",sse="[object DataView]",ase="[object Float32Array]",ise="[object Float64Array]",ose="[object Int8Array]",lse="[object Int16Array]",cse="[object Int32Array]",dse="[object Uint8Array]",use="[object Uint8ClampedArray]",hse="[object Uint16Array]",fse="[object Uint32Array]",Pt={};Pt[PT]=Pt[Vne]=Pt[nse]=Pt[sse]=Pt[qne]=Pt[Yne]=Pt[ase]=Pt[ise]=Pt[ose]=Pt[lse]=Pt[cse]=Pt[Kne]=Pt[Xne]=Pt[MT]=Pt[Jne]=Pt[Qne]=Pt[ese]=Pt[tse]=Pt[dse]=Pt[use]=Pt[hse]=Pt[fse]=!0;Pt[Gne]=Pt[TT]=Pt[rse]=!1;function dp(e,t,r,n,a,i){var o,c=t&Hne,d=t&Wne,u=t&Une;if(r&&(o=a?r(e,n,a,i):r(e)),o!==void 0)return o;if(!$ne(e))return e;var f=Ane(e);if(f){if(o=One(e),!c)return Sne(e,o)}else{var m=Mne(e),p=m==TT||m==Zne;if(Rne(e))return Nne(e,c);if(m==MT||m==PT||p&&!a){if(o=d||p?{}:Lne(e),!c)return d?Ene(e,jne(o,e)):Cne(e,kne(o,e))}else{if(!Pt[m])return a?e:{};o=Dne(e,m,c)}}i||(i=new bne);var x=i.get(e);if(x)return x;i.set(e,o),Ine(e)?e.forEach(function(_){o.add(dp(_,t,r,_,e,i))}):zne(e)&&e.forEach(function(_,w){o.set(w,dp(_,t,r,w,e,i))});var v=u?d?Tne:Pne:d?Bne:Fne,y=f?void 0:v(e);return wne(y||e,function(_,w){y&&(w=_,_=e[w]),_ne(o,w,dp(_,t,r,w,e,i))}),o}var mse=dp;function pse(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var gse=pse,xse=S0,yse=A5;function vse(e,t){return t.length<2?e:xse(e,yse(t,0,-1))}var bse=vse,wse=N0,_se=gse,kse=bse,jse=Sf;function Nse(e,t){return t=wse(t,e),e=kse(e,t),e==null||delete e[jse(_se(t))]}var Sse=Nse,Cse=Ud,Ese=T0,Pse=$o,Tse="[object Object]",Mse=Function.prototype,Ose=Object.prototype,OT=Mse.toString,Dse=Ose.hasOwnProperty,Lse=OT.call(Object);function Ase(e){if(!Pse(e)||Cse(e)!=Tse)return!1;var t=Ese(e);if(t===null)return!0;var r=Dse.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&OT.call(r)==Lse}var Rse=Ase,zse=Rse;function $se(e){return zse(e)?void 0:e}var Ise=$se,Fse=xT;function Bse(e){var t=e==null?0:e.length;return t?Fse(e,1):[]}var Hse=Bse,Wse=Hse,Use=yT,Vse=bT;function qse(e){return Vse(Use(e,void 0,Wse),e+"")}var Yse=qse,Gse=I_,Zse=mse,Kse=Sse,Xse=N0,Jse=Cf,Qse=Ise,eae=Yse,tae=CT,rae=1,nae=2,sae=4,aae=eae(function(e,t){var r={};if(e==null)return r;var n=!1;t=Gse(t,function(i){return i=Xse(i,e),n||(n=i.length>1),i}),Jse(e,tae(e),r),n&&(r=Zse(r,rae|nae|sae,Qse));for(var a=t.length;a--;)Kse(r,t[a]);return r}),iae=aae;const oae=Yr(iae);var lae=jT,cae=ET,dae=F_,uae=E0,hae=T0,fae=$s,mae=_0,pae=h_,gae=Mi,xae=L_;function yae(e,t,r){var n=fae(e),a=n||mae(e)||xae(e);if(t=uae(t),r==null){var i=e&&e.constructor;a?r=n?new i:[]:gae(e)?r=pae(i)?cae(hae(e)):{}:r={}}return(a?lae:dae)(e,function(o,c,d){return t(r,o,c,d)}),r}var vae=yae;const bae=Yr(vae);var wae={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(kn,function(){return function(r,n,a){n.prototype.isBetween=function(i,o,c,d){var u=a(i),f=a(o),m=(d=d||"()")[0]==="(",p=d[1]===")";return(m?this.isAfter(u,c):!this.isBefore(u,c))&&(p?this.isBefore(f,c):!this.isAfter(f,c))||(m?this.isBefore(u,c):!this.isAfter(u,c))&&(p?this.isAfter(f,c):!this.isBefore(f,c))}}})})(wae);var _ae={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(kn,function(){return function(r,n){n.prototype.isSameOrAfter=function(a,i){return this.isSame(a,i)||this.isAfter(a,i)}}})})(_ae);var kae={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(kn,function(){return function(r,n){n.prototype.isSameOrBefore=function(a,i){return this.isSame(a,i)||this.isBefore(a,i)}}})})(kae);var jae={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(kn,function(){return function(r,n,a){var i=n.prototype,o=function(m){return m&&(m.indexOf?m:m.s)},c=function(m,p,x,v,y){var _=m.name?m:m.$locale(),w=o(_[p]),b=o(_[x]),N=w||b.map(function(C){return C.slice(0,v)});if(!y)return N;var S=_.weekStart;return N.map(function(C,O){return N[(O+(S||0))%7]})},d=function(){return a.Ls[a.locale()]},u=function(m,p){return m.formats[p]||function(x){return x.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(v,y,_){return y||_.slice(1)})}(m.formats[p.toUpperCase()])},f=function(){var m=this;return{months:function(p){return p?p.format("MMMM"):c(m,"months")},monthsShort:function(p){return p?p.format("MMM"):c(m,"monthsShort","months",3)},firstDayOfWeek:function(){return m.$locale().weekStart||0},weekdays:function(p){return p?p.format("dddd"):c(m,"weekdays")},weekdaysMin:function(p){return p?p.format("dd"):c(m,"weekdaysMin","weekdays",2)},weekdaysShort:function(p){return p?p.format("ddd"):c(m,"weekdaysShort","weekdays",3)},longDateFormat:function(p){return u(m.$locale(),p)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};i.localeData=function(){return f.bind(this)()},a.localeData=function(){var m=d();return{firstDayOfWeek:function(){return m.weekStart||0},weekdays:function(){return a.weekdays()},weekdaysShort:function(){return a.weekdaysShort()},weekdaysMin:function(){return a.weekdaysMin()},months:function(){return a.months()},monthsShort:function(){return a.monthsShort()},longDateFormat:function(p){return u(m,p)},meridiem:m.meridiem,ordinal:m.ordinal}},a.months=function(){return c(d(),"months")},a.monthsShort=function(){return c(d(),"monthsShort","months",3)},a.weekdays=function(m){return c(d(),"weekdays",null,null,m)},a.weekdaysShort=function(m){return c(d(),"weekdaysShort","weekdays",3,m)},a.weekdaysMin=function(m){return c(d(),"weekdaysMin","weekdays",2,m)}}})})(jae);var Nae={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(kn,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(n,a,i){var o=a.prototype,c=o.format;i.en.formats=r,o.format=function(d){d===void 0&&(d="YYYY-MM-DDTHH:mm:ssZ");var u=this.$locale().formats,f=function(m,p){return m.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(x,v,y){var _=y&&y.toUpperCase();return v||p[y]||r[y]||p[_].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(w,b,N){return b||N.slice(1)})})}(d,u===void 0?{}:u);return c.call(this,f)}}})})(Nae);var Sae={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(kn,function(){return function(r,n,a){var i=function(o,c){if(!c||!c.length||c.length===1&&!c[0]||c.length===1&&Array.isArray(c[0])&&!c[0].length)return null;var d;c.length===1&&c[0].length>0&&(c=c[0]),d=(c=c.filter(function(f){return f}))[0];for(var u=1;u<c.length;u+=1)c[u].isValid()&&!c[u][o](d)||(d=c[u]);return d};a.max=function(){var o=[].slice.call(arguments,0);return i("isAfter",o)},a.min=function(){var o=[].slice.call(arguments,0);return i("isBefore",o)}}})})(Sae);var Cae={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(kn,function(){var r="minute",n=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(i,o,c){var d=o.prototype;c.utc=function(y){var _={date:y,utc:!0,args:arguments};return new o(_)},d.utc=function(y){var _=c(this.toDate(),{locale:this.$L,utc:!0});return y?_.add(this.utcOffset(),r):_},d.local=function(){return c(this.toDate(),{locale:this.$L,utc:!1})};var u=d.parse;d.parse=function(y){y.utc&&(this.$u=!0),this.$utils().u(y.$offset)||(this.$offset=y.$offset),u.call(this,y)};var f=d.init;d.init=function(){if(this.$u){var y=this.$d;this.$y=y.getUTCFullYear(),this.$M=y.getUTCMonth(),this.$D=y.getUTCDate(),this.$W=y.getUTCDay(),this.$H=y.getUTCHours(),this.$m=y.getUTCMinutes(),this.$s=y.getUTCSeconds(),this.$ms=y.getUTCMilliseconds()}else f.call(this)};var m=d.utcOffset;d.utcOffset=function(y,_){var w=this.$utils().u;if(w(y))return this.$u?0:w(this.$offset)?m.call(this):this.$offset;if(typeof y=="string"&&(y=function(C){C===void 0&&(C="");var O=C.match(n);if(!O)return null;var A=(""+O[0]).match(a)||["-",0,0],z=A[0],$=60*+A[1]+ +A[2];return $===0?0:z==="+"?$:-$}(y),y===null))return this;var b=Math.abs(y)<=16?60*y:y;if(b===0)return this.utc(_);var N=this.clone();if(_)return N.$offset=b,N.$u=!1,N;var S=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(N=this.local().add(b+S,r)).$offset=b,N.$x.$localOffset=S,N};var p=d.format;d.format=function(y){var _=y||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return p.call(this,_)},d.valueOf=function(){var y=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*y},d.isUTC=function(){return!!this.$u},d.toISOString=function(){return this.toDate().toISOString()},d.toString=function(){return this.toDate().toUTCString()};var x=d.toDate;d.toDate=function(y){return y==="s"&&this.$offset?c(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():x.call(this)};var v=d.diff;d.diff=function(y,_,w){if(y&&this.$u===y.$u)return v.call(this,y,_,w);var b=this.local(),N=c(y).local();return v.call(b,N,_,w)}}})})(Cae);var Eae={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(kn,function(){return function(r,n){n.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}})})(Eae);function _a(e){return e.children}var Bn={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"},_n={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},mS=Object.keys(_n).map(function(e){return _n[e]});ve.oneOfType([ve.string,ve.func]);ve.any;ve.func;ve.oneOfType([ve.arrayOf(ve.oneOf(mS)),ve.objectOf(function(e,t){var r=mS.indexOf(t)!==-1&&typeof e[t]=="boolean";if(r)return null;for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];return ve.elementType.apply(ve,[e,t].concat(a))})]);ve.oneOfType([ve.oneOf(["overlap","no-overlap"]),ve.func]);var pS={seconds:1e3,minutes:1e3*60,hours:1e3*60*60,day:1e3*60*60*24};function DT(e,t){var r=qr(e,"month");return qr(r,"week",t.startOfWeek())}function LT(e,t){var r=ug(e,"month");return ug(r,"week",t.startOfWeek())}function Pae(e,t){for(var r=DT(e,t),n=LT(e,t),a=[];Bd(r,n,"day");)a.push(r),r=la(r,1,"day");return a}function Tae(e,t){var r=qr(e,t);return xf(r,e)?r:la(r,1,t)}function Mae(e,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",n=e,a=[];Bd(n,t,r);)a.push(n),n=la(n,1,r);return a}function Oae(e,t){return t==null&&e==null?null:(t==null&&(t=new Date),e==null&&(e=new Date),e=qr(e,"day"),e=Zh(e,Zh(t)),e=Sd(e,Sd(t)),e=Gh(e,Gh(t)),Yh(e,Yh(t)))}function gS(e){return Zh(e)===0&&Sd(e)===0&&Gh(e)===0&&Yh(e)===0}function Dae(e,t,r,n){return r==="day"&&(r="date"),Math.abs(JN[r](e,void 0,n)-JN[r](t,void 0,n))}function W_(e,t,r){return!r||r==="milliseconds"?Math.abs(+e-+t):Math.round(Math.abs(+qr(e,r)/pS[r]-+qr(t,r)/pS[r]))}var Lae=ve.oneOfType([ve.string,ve.func]);function Aae(e,t,r,n,a){var i=typeof n=="function"?n(r,a,e):t.call(e,r,n,a);return Bh(i==null||typeof i=="string","`localizer format(..)` must return a string, null, or undefined"),i}function Rae(e,t,r){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,t+r,0,0)}function U_(e,t){return e.getTimezoneOffset()-t.getTimezoneOffset()}function zae(e,t){return W_(e,t,"minutes")+U_(e,t)}function $ae(e){var t=qr(e,"day");return W_(t,e,"minutes")+U_(t,e)}function Iae(e,t){return u_(e,t,"day")}function Fae(e,t,r){var n=xf(e,t,"minutes");return n?yf(t,r,"minutes"):p0(t,r,"minutes")}function lb(e,t){return Dae(e,t,"day")}function Bae(e){var t=e.evtA,r=t.start,n=t.end,a=t.allDay,i=e.evtB,o=i.start,c=i.end,d=i.allDay,u=+qr(r,"day")-+qr(o,"day"),f=lb(r,n),m=lb(o,c);return u||m-f||!!d-!!a||+r-+o||+n-+c}function Hae(e){var t=e.event,r=t.start,n=t.end,a=e.range,i=a.start,o=a.end,c=qr(r,"day"),d=Bd(c,o,"day"),u=d_(c,n,"minutes"),f=u?p0(n,i,"minutes"):yf(n,i,"minutes");return d&&f}function Wae(e,t){return xf(e,t,"day")}function Uae(e,t){return gS(e)&&gS(t)}var Vae=yr(function e(t){var r=this;vr(this,e),Bh(typeof t.format=="function","date localizer `format(..)` must be a function"),Bh(typeof t.firstOfWeek=="function","date localizer `firstOfWeek(..)` must be a function"),this.propType=t.propType||Lae,this.formats=t.formats,this.format=function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return Aae.apply(void 0,[r,t.format].concat(a))},this.startOfWeek=t.firstOfWeek,this.merge=t.merge||Oae,this.inRange=t.inRange||T5,this.lt=t.lt||u_,this.lte=t.lte||Bd,this.gt=t.gt||p0,this.gte=t.gte||yf,this.eq=t.eq||xf,this.neq=t.neq||d_,this.startOf=t.startOf||qr,this.endOf=t.endOf||ug,this.add=t.add||la,this.range=t.range||Mae,this.diff=t.diff||W_,this.ceil=t.ceil||Tae,this.min=t.min||E5,this.max=t.max||P5,this.minutes=t.minutes||Sd,this.daySpan=t.daySpan||lb,this.firstVisibleDay=t.firstVisibleDay||DT,this.lastVisibleDay=t.lastVisibleDay||LT,this.visibleDays=t.visibleDays||Pae,this.getSlotDate=t.getSlotDate||Rae,this.getTimezoneOffset=t.getTimezoneOffset||function(n){return n.getTimezoneOffset()},this.getDstOffset=t.getDstOffset||U_,this.getTotalMin=t.getTotalMin||zae,this.getMinutesFromMidnight=t.getMinutesFromMidnight||$ae,this.continuesPrior=t.continuesPrior||Iae,this.continuesAfter=t.continuesAfter||Fae,this.sortEvents=t.sortEvents||Bae,this.inEventRange=t.inEventRange||Hae,this.isSameDate=t.isSameDate||Wae,this.startAndEndAreDateOnly=t.startAndEndAreDateOnly||Uae,this.segmentOffset=t.browserTZOffset?t.browserTZOffset():0});function qae(e,t,r,n){var a=Ct(Ct({},e.formats),r);return Ct(Ct({},e),{},{messages:n,startOfWeek:function(){return e.startOfWeek(t)},format:function(o,c){return e.format(o,a[c]||c,t)}})}var Yae=function(e){function t(){var r;vr(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=dn(this,t,[].concat(a)),r.navigate=function(o){r.props.onNavigate(o)},r.view=function(o){r.props.onView(o)},r}return Gr(t,e),yr(t,[{key:"render",value:function(){var n=this.props,a=n.localizer.messages,i=n.label;return J.createElement("div",{className:"rbc-toolbar"},J.createElement("span",{className:"rbc-btn-group"},J.createElement("button",{type:"button",onClick:this.navigate.bind(null,Bn.TODAY)},a.today),J.createElement("button",{type:"button",onClick:this.navigate.bind(null,Bn.PREVIOUS)},a.previous),J.createElement("button",{type:"button",onClick:this.navigate.bind(null,Bn.NEXT)},a.next)),J.createElement("span",{className:"rbc-toolbar-label"},i),J.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(a)))}},{key:"viewNamesGroup",value:function(n){var a=this,i=this.props.views,o=this.props.view;if(i.length>1)return i.map(function(c){return J.createElement("button",{type:"button",key:c,className:nr({"rbc-active":o===c}),onClick:a.view.bind(null,c)},n[c])})}}])}(J.Component);function $t(e,t){e&&e.apply(null,[].concat(t))}var Gae={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(t){return"+".concat(t," more")}};function Zae(e){return Ct(Ct({},Gae),e)}function Kae(e){var t=e.ref,r=e.callback;E.useEffect(function(){var n=function(i){t.current&&!t.current.contains(i.target)&&r()};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}},[t,r])}var Xae=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],AT=function(e){function t(){return vr(this,t),dn(this,t,arguments)}return Gr(t,e),yr(t,[{key:"render",value:function(){var n=this.props,a=n.style,i=n.className,o=n.event,c=n.selected,d=n.isAllDay,u=n.onSelect,f=n.onDoubleClick,m=n.onKeyPress,p=n.localizer,x=n.continuesPrior,v=n.continuesAfter,y=n.accessors,_=n.getters,w=n.children,b=n.components,N=b.event,S=b.eventWrapper,C=n.slotStart,O=n.slotEnd,A=oa(n,Xae);delete A.resizable;var z=y.title(o),$=y.tooltip(o),W=y.end(o),F=y.start(o),G=y.allDay(o),ee=d||G||p.diff(F,p.ceil(W,"day"),"day")>1,K=_.eventProp(o,F,W,c),oe=J.createElement("div",{className:"rbc-event-content",title:$||void 0},N?J.createElement(N,{event:o,continuesPrior:x,continuesAfter:v,title:z,isAllDay:G,localizer:p,slotStart:C,slotEnd:O}):z);return J.createElement(S,Object.assign({},this.props,{type:"date"}),J.createElement("div",Object.assign({},A,{style:Ct(Ct({},K.style),a),className:nr("rbc-event",i,K.className,{"rbc-selected":c,"rbc-event-allday":ee,"rbc-event-continues-prior":x,"rbc-event-continues-after":v}),onClick:function(pe){return u&&u(o,pe)},onDoubleClick:function(pe){return f&&f(o,pe)},onKeyDown:function(pe){return m&&m(o,pe)}}),typeof w=="function"?w(oe):oe))}}])}(J.Component);function M0(e,t){return!e||t==null?!1:pX(e,t)}function RT(e,t){var r=e.right-e.left,n=r/t;return n}function zT(e,t,r,n){var a=RT(e,n);return r?n-1-Math.floor((t-e.left)/a):Math.floor((t-e.left)/a)}function Jae(e,t){var r=t.x,n=t.y;return n>=e.top&&n<=e.bottom&&r>=e.left&&r<=e.right}function Qae(e,t,r,n,a){var i=-1,o=-1,c=n-1,d=RT(t,n),u=zT(t,r.x,a,n),f=t.top<r.y&&t.bottom>r.y,m=t.top<e.y&&t.bottom>e.y,p=e.y>t.bottom,x=t.top>e.y,v=r.top<t.top&&r.bottom>t.bottom;return v&&(i=0,o=c),f&&(x?(i=0,o=u):p&&(i=u,o=c)),m&&(i=o=a?c-Math.floor((e.x-t.left)/d):Math.floor((e.x-t.left)/d),f?u<i?i=u:o=u:e.y<r.y?o=c:i=0),{startIdx:i,endIdx:o}}function eie(e){var t=e.target,r=e.offset,n=e.container,a=e.box,i=Cl(t),o=i.top,c=i.left,d=i.width,u=i.height,f=Cl(n),m=f.top,p=f.left,x=f.width,v=f.height,y=Cl(a),_=y.width,w=y.height,b=m+v,N=p+x,S=o+w,C=c+_,O=r.x,A=r.y,z=S>b?o-w-A:o+A+u,$=C>N?c+O-_+d:c+O;return{topOffset:z,leftOffset:$}}function tie(e){var t=e.containerRef,r=e.accessors,n=e.getters,a=e.selected,i=e.components,o=e.localizer,c=e.position,d=e.show,u=e.events,f=e.slotStart,m=e.slotEnd,p=e.onSelect,x=e.onDoubleClick,v=e.onKeyPress,y=e.handleDragStart,_=e.popperRef,w=e.target,b=e.offset;Kae({ref:_,callback:d}),E.useLayoutEffect(function(){var C=eie({target:w,offset:b,container:t.current,box:_.current}),O=C.topOffset,A=C.leftOffset;_.current.style.top="".concat(O,"px"),_.current.style.left="".concat(A,"px")},[b.x,b.y,w]);var N=c.width,S={minWidth:N+N/2};return J.createElement("div",{style:S,className:"rbc-overlay",ref:_},J.createElement("div",{className:"rbc-overlay-header"},o.format(f,"dayHeaderFormat")),u.map(function(C,O){return J.createElement(AT,{key:O,type:"popup",localizer:o,event:C,getters:n,onSelect:p,accessors:r,components:i,onDoubleClick:x,onKeyPress:v,continuesPrior:o.lt(r.end(C),f,"day"),continuesAfter:o.gte(r.start(C),m,"day"),slotStart:f,slotEnd:m,selected:M0(C,a),draggable:!0,onDragStart:function(){return y(C)},onDragEnd:function(){return d()}})}))}var $T=J.forwardRef(function(e,t){return J.createElement(tie,Object.assign({},e,{popperRef:t}))});$T.propTypes={accessors:ve.object.isRequired,getters:ve.object.isRequired,selected:ve.object,components:ve.object.isRequired,localizer:ve.object.isRequired,position:ve.object.isRequired,show:ve.func.isRequired,events:ve.array.isRequired,slotStart:ve.instanceOf(Date).isRequired,slotEnd:ve.instanceOf(Date),onSelect:ve.func,onDoubleClick:ve.func,onKeyPress:ve.func,handleDragStart:ve.func,style:ve.object,offset:ve.shape({x:ve.number,y:ve.number})};function rie(e){var t=e.containerRef,r=e.popupOffset,n=r===void 0?5:r,a=e.overlay,i=e.accessors,o=e.localizer,c=e.components,d=e.getters,u=e.selected,f=e.handleSelectEvent,m=e.handleDoubleClickEvent,p=e.handleKeyPressEvent,x=e.handleDragStart,v=e.onHide,y=e.overlayDisplay,_=E.useRef(null);if(!a.position)return null;var w=n;isNaN(n)||(w={x:n,y:n});var b=a.position,N=a.events,S=a.date,C=a.end;return J.createElement(S_,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:v,target:a.target},function(O){var A=O.props;return J.createElement($T,Object.assign({},A,{containerRef:t,ref:_,target:a.target,offset:w,accessors:i,getters:d,selected:u,components:c,localizer:o,position:b,show:y,events:N,slotStart:S,slotEnd:C,onSelect:f,onDoubleClick:m,onKeyPress:p,handleDragStart:x}))})}var V_=J.forwardRef(function(e,t){return J.createElement(rie,Object.assign({},e,{containerRef:t}))});V_.propTypes={popupOffset:ve.oneOfType([ve.number,ve.shape({x:ve.number,y:ve.number})]),overlay:ve.shape({position:ve.object,events:ve.array,date:ve.instanceOf(Date),end:ve.instanceOf(Date)}),accessors:ve.object.isRequired,localizer:ve.object.isRequired,components:ve.object.isRequired,getters:ve.object.isRequired,selected:ve.object,handleSelectEvent:ve.func,handleDoubleClickEvent:ve.func,handleKeyPressEvent:ve.func,handleDragStart:ve.func,onHide:ve.func,overlayDisplay:ve.func};function en(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return Gu(r,e,t,{passive:!1})}function nie(e,t,r){return!e||Kh(e,document.elementFromPoint(t,r))}function sie(e,t){var r=t.clientX,n=t.clientY,a=document.elementFromPoint(r,n);return dT(a,".rbc-event",e)}function aie(e,t){var r=t.clientX,n=t.clientY,a=document.elementFromPoint(r,n);return dT(a,".rbc-show-more",e)}function yg(e,t){return!!sie(e,t)}function iie(e,t){return!!aie(e,t)}function Ou(e){var t=e;return e.touches&&e.touches.length&&(t=e.touches[0]),{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}}var xS=5,oie=250,IT=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.global,a=n===void 0?!1:n,i=r.longPressThreshold,o=i===void 0?250:i,c=r.validContainers,d=c===void 0?[]:c;vr(this,e),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=t,this.globalMouse=!t||a,this.longPressThreshold=o,this.validContainers=d,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=en("touchmove",function(){},window),this._removeKeyDownListener=en("keydown",this._keyListener),this._removeKeyUpListener=en("keyup",this._keyListener),this._removeDropFromOutsideListener=en("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=en("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return yr(e,[{key:"on",value:function(r,n){var a=this._listeners[r]||(this._listeners[r]=[]);return a.push(n),{remove:function(){var o=a.indexOf(n);o!==-1&&a.splice(o,1)}}}},{key:"emit",value:function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];var o,c=this._listeners[r]||[];return c.forEach(function(d){o===void 0&&(o=d.apply(void 0,a))}),o}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(r){var n=this._selectRect;return!n||!this.selecting?!1:yS(n,Ul(r))}},{key:"filter",value:function(r){var n=this._selectRect;return!n||!this.selecting?[]:r.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(r,n){var a=this,i=null,o=null,c=null,d=function(p){i=setTimeout(function(){f(),r(p)},a.longPressThreshold),o=en("touchmove",function(){return f()}),c=en("touchend",function(){return f()})},u=en("touchstart",d),f=function(){i&&clearTimeout(i),o&&o(),c&&c(),i=null,o=null,c=null};return n&&d(n),function(){f(),u()}}},{key:"_addInitialEventListener",value:function(){var r=this,n=en("mousedown",function(i){r._removeInitialEventListener(),r._handleInitialEvent(i),r._removeInitialEventListener=en("mousedown",r._handleInitialEvent)}),a=en("touchstart",function(i){r._removeInitialEventListener(),r._removeInitialEventListener=r._addLongPressListener(r._handleInitialEvent,i)});this._removeInitialEventListener=function(){n(),a()}}},{key:"_dropFromOutsideListener",value:function(r){var n=Ou(r),a=n.pageX,i=n.pageY,o=n.clientX,c=n.clientY;this.emit("dropFromOutside",{x:a,y:i,clientX:o,clientY:c}),r.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(r){var n=Ou(r),a=n.pageX,i=n.pageY,o=n.clientX,c=n.clientY;this.emit("dragOverFromOutside",{x:a,y:i,clientX:o,clientY:c}),r.preventDefault()}},{key:"_handleInitialEvent",value:function(r){if(this._initialEvent=r,!this.isDetached){var n=Ou(r),a=n.clientX,i=n.clientY,o=n.pageX,c=n.pageY,d=this.container(),u,f;if(!(r.which===3||r.button===2||!nie(d,a,i))){if(!this.globalMouse&&d&&!Kh(d,r.target)){var m=lie(0),p=m.top,x=m.left,v=m.bottom,y=m.right;if(f=Ul(d),u=yS({top:f.top-p,left:f.left-x,bottom:f.bottom+v,right:f.right+y},{top:c,left:o}),!u)return}var _=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(r.type),x:o,y:c,clientX:a,clientY:i});if(_!==!1)switch(r.type){case"mousedown":this._removeEndListener=en("mouseup",this._handleTerminatingEvent),this._onEscListener=en("keydown",this._handleTerminatingEvent),this._removeMoveListener=en("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(r),this._removeEndListener=en("touchend",this._handleTerminatingEvent),this._removeMoveListener=en("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(r){var n=r.target,a=this.validContainers;return!a||!a.length||!n?!0:a.some(function(i){return!!n.closest(i)})}},{key:"_handleTerminatingEvent",value:function(r){var n=this.selecting,a=this._selectRect;if(!n&&r.type.includes("key")&&(r=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!r){var i=!this.container||Kh(this.container(),r.target),o=this._isWithinValidContainer(r);return r.key==="Escape"||!o?this.emit("reset"):!n&&i?this._handleClickEvent(r):n?this.emit("select",a):this.emit("reset")}}},{key:"_handleClickEvent",value:function(r){var n=Ou(r),a=n.pageX,i=n.pageY,o=n.clientX,c=n.clientY,d=new Date().getTime();return this._lastClickData&&d-this._lastClickData.timestamp<oie?(this._lastClickData=null,this.emit("doubleClick",{x:a,y:i,clientX:o,clientY:c})):(this._lastClickData={timestamp:d},this.emit("click",{x:a,y:i,clientX:o,clientY:c}))}},{key:"_handleMoveEvent",value:function(r){if(!(this._initialEventData===null||this.isDetached)){var n=this._initialEventData,a=n.x,i=n.y,o=Ou(r),c=o.pageX,d=o.pageY,u=Math.abs(a-c),f=Math.abs(i-d),m=Math.min(c,a),p=Math.min(d,i),x=this.selecting,v=this.isClick(c,d);v&&!x&&!(u||f)||(!x&&!v&&this.emit("selectStart",this._initialEventData),v||(this.selecting=!0,this._selectRect={top:p,left:m,x:c,y:d,right:m+u,bottom:p+f},this.emit("selecting",this._selectRect)),r.preventDefault())}}},{key:"_keyListener",value:function(r){this.ctrl=r.metaKey||r.ctrlKey}},{key:"isClick",value:function(r,n){var a=this._initialEventData,i=a.x,o=a.y,c=a.isTouch;return!c&&Math.abs(r-i)<=xS&&Math.abs(n-o)<=xS}}])}();function lie(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return Ni(e)!=="object"&&(e={top:e,left:e,right:e,bottom:e}),e}function yS(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=Ul(e),a=n.top,i=n.left,o=n.right,c=o===void 0?i:o,d=n.bottom,u=d===void 0?a:d,f=Ul(t),m=f.top,p=f.left,x=f.right,v=x===void 0?p:x,y=f.bottom,_=y===void 0?m:y;return!(u-r<m||a+r>_||c-r<p||i+r>v)}function Ul(e){if(!e.getBoundingClientRect)return e;var t=e.getBoundingClientRect(),r=t.left+vS("left"),n=t.top+vS("top");return{top:n,left:r,right:(e.offsetWidth||0)+r,bottom:(e.offsetHeight||0)+n}}function vS(e){if(e==="left")return window.pageXOffset||document.body.scrollLeft||0;if(e==="top")return window.pageYOffset||document.body.scrollTop||0}var cie=function(e){function t(r,n){var a;return vr(this,t),a=dn(this,t,[r,n]),a.state={selecting:!1},a.containerRef=E.createRef(),a}return Gr(t,e),yr(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(n){!n.selectable&&this.props.selectable&&this._selectable(),n.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var n=this.props,a=n.range,i=n.getNow,o=n.getters,c=n.date,d=n.components.dateCellWrapper,u=n.localizer,f=this.state,m=f.selecting,p=f.startIdx,x=f.endIdx,v=i();return J.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},a.map(function(y,_){var w=m&&_>=p&&_<=x,b=o.dayProp(y),N=b.className,S=b.style;return J.createElement(d,{key:_,value:y,range:a},J.createElement("div",{style:S,className:nr("rbc-day-bg",N,w&&"rbc-selected-cell",u.isSameDate(y,v)&&"rbc-today",c&&u.neq(c,y,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var n=this,a=this.containerRef.current,i=this._selector=new IT(this.props.container,{longPressThreshold:this.props.longPressThreshold}),o=function(d,u){if(!yg(a,d)&&!iie(a,d)){var f=Ul(a),m=n.props,p=m.range,x=m.rtl;if(Jae(f,d)){var v=zT(f,d.x,x,p.length);n._selectSlot({startIdx:v,endIdx:v,action:u,box:d})}}n._initial={},n.setState({selecting:!1})};i.on("selecting",function(c){var d=n.props,u=d.range,f=d.rtl,m=-1,p=-1;if(n.state.selecting||($t(n.props.onSelectStart,[c]),n._initial={x:c.x,y:c.y}),i.isSelected(a)){var x=Ul(a),v=Qae(n._initial,x,c,u.length,f);m=v.startIdx,p=v.endIdx}n.setState({selecting:!0,startIdx:m,endIdx:p})}),i.on("beforeSelect",function(c){if(n.props.selectable==="ignoreEvents")return!yg(n.containerRef.current,c)}),i.on("click",function(c){return o(c,"click")}),i.on("doubleClick",function(c){return o(c,"doubleClick")}),i.on("select",function(c){n._selectSlot(Ct(Ct({},n.state),{},{action:"select",bounds:c})),n._initial={},n.setState({selecting:!1}),$t(n.props.onSelectEnd,[n.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(n){var a=n.endIdx,i=n.startIdx,o=n.action,c=n.bounds,d=n.box;a!==-1&&i!==-1&&this.props.onSelectSlot&&this.props.onSelectSlot({start:i,end:a,action:o,bounds:c,box:d,resourceId:this.props.resourceId})}}])}(J.Component),ws={propTypes:{slotMetrics:ve.object.isRequired,selected:ve.object,isAllDay:ve.bool,accessors:ve.object.isRequired,localizer:ve.object.isRequired,components:ve.object.isRequired,getters:ve.object.isRequired,onSelect:ve.func,onDoubleClick:ve.func,onKeyPress:ve.func},defaultProps:{segments:[],selected:{}},renderEvent:function(t,r){var n=t.selected;t.isAllDay;var a=t.accessors,i=t.getters,o=t.onSelect,c=t.onDoubleClick,d=t.onKeyPress,u=t.localizer,f=t.slotMetrics,m=t.components,p=t.resizable,x=f.continuesPrior(r),v=f.continuesAfter(r);return J.createElement(AT,{event:r,getters:i,localizer:u,accessors:a,components:m,onSelect:o,onDoubleClick:c,onKeyPress:d,continuesPrior:x,continuesAfter:v,slotStart:f.first,slotEnd:f.last,selected:M0(r,n),resizable:p})},renderSpan:function(t,r,n){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",i=Math.abs(r)/t*100+"%";return J.createElement("div",{key:n,className:"rbc-row-segment",style:{WebkitFlexBasis:i,flexBasis:i,maxWidth:i}},a)}},FT=function(e){function t(){return vr(this,t),dn(this,t,arguments)}return Gr(t,e),yr(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.segments,o=a.slotMetrics.slots,c=a.className,d=1;return J.createElement("div",{className:nr(c,"rbc-row")},i.reduce(function(u,f,m){var p=f.event,x=f.left,v=f.right,y=f.span,_="_lvl_"+m,w=x-d,b=ws.renderEvent(n.props,p);return w&&u.push(ws.renderSpan(o,w,"".concat(_,"_gap"))),u.push(ws.renderSpan(o,y,_,b)),d=v+1,u},[]))}}])}(J.Component);FT.defaultProps=Ct({},ws.defaultProps);function BT(e){var t=e.dateRange,r=e.unit,n=r===void 0?"day":r,a=e.localizer;return{first:t[0],last:a.add(t[t.length-1],1,n)}}function die(e,t,r,n){var a=BT({dateRange:t,localizer:n}),i=a.first,o=a.last,c=n.diff(i,o,"day"),d=n.max(n.startOf(r.start(e),"day"),i),u=n.min(n.ceil(r.end(e),"day"),o),f=mQ(t,function(p){return n.isSameDate(p,d)}),m=n.diff(d,u,"day");return m=Math.min(m,c),m=Math.max(m-n.segmentOffset,1),{event:e,span:m,left:f+1,right:Math.max(f+m,1)}}function cb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,r,n,a,i=[],o=[];for(r=0;r<e.length;r++){for(a=e[r],n=0;n<i.length&&uie(a,i[n]);n++);n>=t?o.push(a):(i[n]||(i[n]=[])).push(a)}for(r=0;r<i.length;r++)i[r].sort(function(c,d){return c.left-d.left});return{levels:i,extra:o}}function Qh(e,t,r,n,a){var i={start:n.start(e),end:n.end(e)},o={start:t,end:r};return a.inEventRange({event:i,range:o})}function uie(e,t){return t.some(function(r){return r.left<=e.right&&r.right>=e.left})}function hie(e,t,r){var n=lp(e),a=[],i=[];n.forEach(function(d){var u=t.start(d),f=t.end(d);r.daySpan(u,f)>1?a.push(d):i.push(d)});var o=a.sort(function(d,u){return db(d,u,t,r)}),c=i.sort(function(d,u){return db(d,u,t,r)});return[].concat(lp(o),lp(c))}function db(e,t,r,n){var a={start:r.start(e),end:r.end(e),allDay:r.allDay(e)},i={start:r.start(t),end:r.end(t),allDay:r.allDay(t)};return n.sortEvents({evtA:a,evtB:i})}var ub=function(t,r){return t.left<=r&&t.right>=r},my=function(t,r){return t.filter(function(n){return ub(n,r)}).map(function(n){return n.event})},HT=function(e){function t(){return vr(this,t),dn(this,t,arguments)}return Gr(t,e),yr(t,[{key:"render",value:function(){for(var n=this.props,a=n.segments,i=n.slotMetrics.slots,o=cb(a).levels[0],c=1,d=1,u=[];c<=i;){var f="_lvl_"+c,m=o.filter(function(S){return ub(S,c)})[0]||{},p=m.event,x=m.left,v=m.right,y=m.span;if(!p){var _=this.getHiddenEventsForSlot(a,c);if(_.length>0){var w=c-d;w&&u.push(ws.renderSpan(i,w,f+"_gap")),u.push(ws.renderSpan(i,1,f,this.renderShowMore(a,c))),d=c=c+1;continue}c++;continue}var b=Math.max(0,x-d);if(this.canRenderSlotEvent(x,y)){var N=ws.renderEvent(this.props,p);b&&u.push(ws.renderSpan(i,b,f+"_gap")),u.push(ws.renderSpan(i,y,f,N)),d=c=v+1}else b&&u.push(ws.renderSpan(i,b,f+"_gap")),u.push(ws.renderSpan(i,1,f,this.renderShowMore(a,c))),d=c=c+1}return J.createElement("div",{className:"rbc-row"},u)}},{key:"getHiddenEventsForSlot",value:function(n,a){var i=my(n,a),o=cb(n).levels[0],c=o.filter(function(d){return ub(d,a)}).map(function(d){return d.event});return i.filter(function(d){return!c.some(function(u){return u===d})})}},{key:"canRenderSlotEvent",value:function(n,a){var i=this.props.segments;return SQ(n,n+a).every(function(o){var c=my(i,o).length;return c===1})}},{key:"renderShowMore",value:function(n,a){var i=this,o=this.props,c=o.localizer,d=o.slotMetrics,u=o.components,f=d.getEventsForSlot(a),m=my(n,a),p=m.length;if(u!=null&&u.showMore){var x=u.showMore,v=d.getDateForSlot(a-1);return p?J.createElement(x,{localizer:c,slotDate:v,slot:a,count:p,events:f,remainingEvents:m}):!1}return p?J.createElement("button",{type:"button",key:"sm_"+a,className:nr("rbc-button-link","rbc-show-more"),onClick:function(_){return i.showMore(a,_)}},c.messages.showMore(p,m,f)):!1}},{key:"showMore",value:function(n,a){a.preventDefault(),a.stopPropagation(),this.props.onShowMore(n,a.target)}}])}(J.Component);HT.defaultProps=Ct({},ws.defaultProps);var fie=function(t){var r=t.children;return J.createElement("div",{className:"rbc-row-content-scroll-container"},r)},mie=function(t,r){return t.left<=r&&t.right>=r},pie=function(t,r){return t[0].range===r[0].range&&t[0].events===r[0].events};function WT(){return pT(function(e){for(var t=e.range,r=e.events,n=e.maxRows,a=e.minRows,i=e.accessors,o=e.localizer,c=BT({dateRange:t,localizer:o}),d=c.first,u=c.last,f=r.map(function(y){return die(y,t,i,o)}),m=cb(f,Math.max(n-1,1)),p=m.levels,x=m.extra,v=x.length>0?a-1:a;p.length<v;)p.push([]);return{first:d,last:u,levels:p,extra:x,range:t,slots:t.length,clone:function(_){var w=WT();return w(Ct(Ct({},e),_))},getDateForSlot:function(_){return t[_]},getSlotForDate:function(_){return t.find(function(w){return o.isSameDate(w,_)})},getEventsForSlot:function(_){return f.filter(function(w){return mie(w,_)}).map(function(w){return w.event})},continuesPrior:function(_){return o.continuesPrior(i.start(_),d)},continuesAfter:function(_){var w=i.start(_),b=i.end(_);return o.continuesAfter(w,b,u)}}},pie)}var ef=function(e){function t(){var r;vr(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=dn(this,t,[].concat(a)),r.handleSelectSlot=function(o){var c=r.props,d=c.range,u=c.onSelectSlot;u(d.slice(o.start,o.end+1),o)},r.handleShowMore=function(o,c){var d=r.props,u=d.range,f=d.onShowMore,m=r.slotMetrics(r.props),p=mU(r.containerRef.current,".rbc-row-bg")[0],x;p&&(x=p.children[o-1]);var v=m.getEventsForSlot(o);f(v,u[o-1],x,o,c)},r.getContainer=function(){var o=r.props.container;return o?o():r.containerRef.current},r.renderHeadingCell=function(o,c){var d=r.props,u=d.renderHeader,f=d.getNow,m=d.localizer;return u({date:o,key:"header_".concat(c),className:nr("rbc-date-cell",m.isSameDate(o,f())&&"rbc-now")})},r.renderDummy=function(){var o=r.props,c=o.className,d=o.range,u=o.renderHeader,f=o.showAllEvents;return J.createElement("div",{className:c,ref:r.containerRef},J.createElement("div",{className:nr("rbc-row-content",f&&"rbc-row-content-scrollable")},u&&J.createElement("div",{className:"rbc-row",ref:r.headingRowRef},d.map(r.renderHeadingCell)),J.createElement("div",{className:"rbc-row",ref:r.eventRowRef},J.createElement("div",{className:"rbc-row-segment"},J.createElement("div",{className:"rbc-event"},J.createElement("div",{className:"rbc-event-content"},""))))))},r.containerRef=E.createRef(),r.headingRowRef=E.createRef(),r.eventRowRef=E.createRef(),r.slotMetrics=WT(),r}return Gr(t,e),yr(t,[{key:"getRowLimit",value:function(){var n,a=uy(this.eventRowRef.current),i=(n=this.headingRowRef)!==null&&n!==void 0&&n.current?uy(this.headingRowRef.current):0,o=uy(this.containerRef.current)-i;return Math.max(Math.floor(o/a),1)}},{key:"render",value:function(){var n=this.props,a=n.date,i=n.rtl,o=n.range,c=n.className,d=n.selected,u=n.selectable,f=n.renderForMeasure,m=n.accessors,p=n.getters,x=n.components,v=n.getNow,y=n.renderHeader,_=n.onSelect,w=n.localizer,b=n.onSelectStart,N=n.onSelectEnd,S=n.onDoubleClick,C=n.onKeyPress,O=n.resourceId,A=n.longPressThreshold,z=n.isAllDay,$=n.resizable,W=n.showAllEvents;if(f)return this.renderDummy();var F=this.slotMetrics(this.props),G=F.levels,ee=F.extra,K=W?fie:_a,oe=x.weekWrapper,Z={selected:d,accessors:m,getters:p,localizer:w,components:x,onSelect:_,onDoubleClick:S,onKeyPress:C,resourceId:O,slotMetrics:F,resizable:$};return J.createElement("div",{className:c,role:"rowgroup",ref:this.containerRef},J.createElement(cie,{localizer:w,date:a,getNow:v,rtl:i,range:o,selectable:u,container:this.getContainer,getters:p,onSelectStart:b,onSelectEnd:N,onSelectSlot:this.handleSelectSlot,components:x,longPressThreshold:A,resourceId:O}),J.createElement("div",{className:nr("rbc-row-content",W&&"rbc-row-content-scrollable"),role:"row"},y&&J.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},o.map(this.renderHeadingCell)),J.createElement(K,null,J.createElement(oe,Object.assign({isAllDay:z},Z,{rtl:this.props.rtl}),G.map(function(pe,Q){return J.createElement(FT,Object.assign({key:Q,segments:pe},Z))}),!!ee.length&&J.createElement(HT,Object.assign({segments:ee,onShowMore:this.handleShowMore},Z))))))}}])}(J.Component);ef.defaultProps={minRows:0,maxRows:1/0};var q_=function(t){var r=t.label;return J.createElement("span",{role:"columnheader","aria-sort":"none"},r)},gie=function(t){var r=t.label,n=t.drilldownView,a=t.onDrillDown;return n?J.createElement("button",{type:"button",className:"rbc-button-link",onClick:a},r):J.createElement("span",null,r)},xie=["date","className"],yie=function(t,r,n,a,i){return t.filter(function(o){return Qh(o,r,n,a,i)})},O0=function(e){function t(){var r;vr(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=dn(this,t,[].concat(a)),r.getContainer=function(){return r.containerRef.current},r.renderWeek=function(o,c){var d=r.props,u=d.events,f=d.components,m=d.selectable,p=d.getNow,x=d.selected,v=d.date,y=d.localizer,_=d.longPressThreshold,w=d.accessors,b=d.getters,N=d.showAllEvents,S=r.state,C=S.needLimitMeasure,O=S.rowLimit,A=yie(lp(u),o[0],o[o.length-1],w,y),z=hie(A,w,y);return J.createElement(ef,{key:c,ref:c===0?r.slotRowRef:void 0,container:r.getContainer,className:"rbc-month-row",getNow:p,date:v,range:o,events:z,maxRows:N?1/0:O,selected:x,selectable:m,components:f,accessors:w,getters:b,localizer:y,renderHeader:r.readerDateHeading,renderForMeasure:C,onShowMore:r.handleShowMore,onSelect:r.handleSelectEvent,onDoubleClick:r.handleDoubleClickEvent,onKeyPress:r.handleKeyPressEvent,onSelectSlot:r.handleSelectSlot,longPressThreshold:_,rtl:r.props.rtl,resizable:r.props.resizable,showAllEvents:N})},r.readerDateHeading=function(o){var c=o.date,d=o.className,u=oa(o,xie),f=r.props,m=f.date,p=f.getDrilldownView,x=f.localizer,v=x.neq(m,c,"month"),y=x.isSameDate(c,m),_=p(c),w=x.format(c,"dateFormat"),b=r.props.components.dateHeader||gie;return J.createElement("div",Object.assign({},u,{className:nr(d,v&&"rbc-off-range",y&&"rbc-current"),role:"cell"}),J.createElement(b,{label:w,date:c,drilldownView:_,isOffRange:v,onDrillDown:function(S){return r.handleHeadingClick(c,_,S)}}))},r.handleSelectSlot=function(o,c){r._pendingSelection=r._pendingSelection.concat(o),clearTimeout(r._selectTimer),r._selectTimer=setTimeout(function(){return r.selectDates(c)})},r.handleHeadingClick=function(o,c,d){d.preventDefault(),r.clearSelection(),$t(r.props.onDrillDown,[o,c])},r.handleSelectEvent=function(){r.clearSelection();for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];$t(r.props.onSelectEvent,c)},r.handleDoubleClickEvent=function(){r.clearSelection();for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];$t(r.props.onDoubleClickEvent,c)},r.handleKeyPressEvent=function(){r.clearSelection();for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];$t(r.props.onKeyPressEvent,c)},r.handleShowMore=function(o,c,d,u,f){var m=r.props,p=m.popup,x=m.onDrillDown,v=m.onShowMore,y=m.getDrilldownView,_=m.doShowMoreDrillDown;if(r.clearSelection(),p){var w=W5(d,r.containerRef.current);r.setState({overlay:{date:c,events:o,position:w,target:f}})}else _&&$t(x,[c,y(c)||_n.DAY]);$t(v,[o,c,u])},r.overlayDisplay=function(){r.setState({overlay:null})},r.state={rowLimit:5,needLimitMeasure:!0,date:null},r.containerRef=E.createRef(),r.slotRowRef=E.createRef(),r._bgRows=[],r._pendingSelection=[],r}return Gr(t,e),yr(t,[{key:"componentDidMount",value:function(){var n=this,a;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){a||U5(function(){a=!1,n.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var n=this.props,a=n.date,i=n.localizer,o=n.className,c=i.visibleDays(a,i),d=JW(c,7);return this._weekCount=d.length,J.createElement("div",{className:nr("rbc-month-view",o),role:"table","aria-label":"Month View",ref:this.containerRef},J.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(d[0])),d.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(n){var a=this.props,i=a.localizer,o=a.components,c=n[0],d=n[n.length-1],u=o.header||q_;return i.range(c,d,"day").map(function(f,m){return J.createElement("div",{key:"header_"+m,className:"rbc-header"},J.createElement(u,{date:f,localizer:i,label:i.format(f,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var n,a,i=this,o=(n=(a=this.state)===null||a===void 0?void 0:a.overlay)!==null&&n!==void 0?n:{},c=this.props,d=c.accessors,u=c.localizer,f=c.components,m=c.getters,p=c.selected,x=c.popupOffset,v=c.handleDragStart,y=function(){return i.setState({overlay:null})};return J.createElement(V_,{overlay:o,accessors:d,localizer:u,components:f,getters:m,selected:p,popupOffset:x,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:v,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:y})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(n){var a=this._pendingSelection.slice();this._pendingSelection=[],a.sort(function(c,d){return+c-+d});var i=new Date(a[0]),o=new Date(a[a.length-1]);o.setDate(a[a.length-1].getDate()+1),$t(this.props.onSelectSlot,{slots:a,start:i,end:o,action:n.action,bounds:n.bounds,box:n.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(n,a){var i=n.date,o=n.localizer;return{date:i,needLimitMeasure:o.neq(i,a.date,"month")}}}])}(J.Component);O0.range=function(e,t){var r=t.localizer,n=r.firstVisibleDay(e,r),a=r.lastVisibleDay(e,r);return{start:n,end:a}};O0.navigate=function(e,t,r){var n=r.localizer;switch(t){case Bn.PREVIOUS:return n.add(e,-1,"month");case Bn.NEXT:return n.add(e,1,"month");default:return e}};O0.title=function(e,t){var r=t.localizer;return r.format(e,"monthHeaderFormat")};var bS=function(t){var r=t.min,n=t.max,a=t.step,i=t.slots,o=t.localizer;return"".concat(+o.startOf(r,"minutes"))+"".concat(+o.startOf(n,"minutes"))+"".concat(a,"-").concat(i)};function Y_(e){for(var t=e.min,r=e.max,n=e.step,a=e.timeslots,i=e.localizer,o=bS({step:n,localizer:i}),c=1+i.getTotalMin(t,r),d=i.getMinutesFromMidnight(t),u=Math.ceil((c-1)/(n*a)),f=u*a,m=new Array(u),p=new Array(f),x=0;x<u;x++){m[x]=new Array(a);for(var v=0;v<a;v++){var y=x*a+v,_=y*n;p[y]=m[x][v]=i.getSlotDate(t,d,_)}}var w=p.length*n;p.push(i.getSlotDate(t,d,w));function b(N){var S=i.diff(t,N,"minutes")+i.getDstOffset(t,N);return Math.min(S,c)}return{groups:m,update:function(S){return bS(S)!==o?Y_(S):this},dateIsInGroup:function(S,C){var O=m[C+1];return i.inRange(S,m[C][0],O?O[0]:r,"minutes")},nextSlot:function(S){var C=p[Math.min(p.findIndex(function(O){return O===S||i.eq(O,S)})+1,p.length-1)];return i.eq(C,S)&&(C=i.add(S,n,"minutes")),C},closestSlotToPosition:function(S){var C=Math.min(p.length-1,Math.max(0,Math.floor(S*f)));return p[C]},closestSlotFromPoint:function(S,C){var O=Math.abs(C.top-C.bottom);return this.closestSlotToPosition((S.y-C.top)/O)},closestSlotFromDate:function(S){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(i.lt(S,t,"minutes"))return p[0];if(i.gt(S,r,"minutes"))return p[p.length-1];var O=i.diff(t,S,"minutes");return p[(O-O%n)/n+C]},startsBeforeDay:function(S){return i.lt(S,t,"day")},startsAfterDay:function(S){return i.gt(S,r,"day")},startsBefore:function(S){return i.lt(i.merge(t,S),t,"minutes")},startsAfter:function(S){return i.gt(i.merge(r,S),r,"minutes")},getRange:function(S,C,O,A){O||(S=i.min(r,i.max(t,S))),A||(C=i.min(r,i.max(t,C)));var z=b(S),$=b(C),W=$>n*f&&!i.eq(r,C)?(z-n)/(n*f)*100:z/(n*f)*100;return{top:W,height:$/(n*f)*100-W,start:b(S),startDate:S,end:b(C),endDate:C}},getCurrentTimePosition:function(S){var C=b(S),O=C/(n*f)*100;return O}}}var vie=function(){function e(t,r){var n=r.accessors,a=r.slotMetrics;vr(this,e);var i=a.getRange(n.start(t),n.end(t)),o=i.start,c=i.startDate,d=i.end,u=i.endDate,f=i.top,m=i.height;this.start=o,this.end=d,this.startMs=+c,this.endMs=+u,this.top=f,this.height=m,this.data=t}return yr(e,[{key:"_width",get:function(){if(this.rows){var r=this.rows.reduce(function(a,i){return Math.max(a,i.leaves.length+1)},0)+1;return 100/r}if(this.leaves){var n=100-this.container._width;return n/(this.leaves.length+1)}return this.row._width}},{key:"width",get:function(){var r=this._width,n=Math.min(100,this._width*1.7);if(this.rows)return n;if(this.leaves)return this.leaves.length>0?n:r;var a=this.row.leaves,i=a.indexOf(this);return i===a.length-1?r:n}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var r=this.row,n=r.leaves,a=r.xOffset,i=r._width,o=n.indexOf(this)+1;return a+o*i}}])}();function bie(e,t,r){return Math.abs(t.start-e.start)<r||t.start>e.start&&t.start<e.end}function wie(e){for(var t=qee(e,["startMs",function(c){return-c.endMs}]),r=[];t.length>0;){var n=t.shift();r.push(n);for(var a=0;a<t.length;a++){var i=t[a];if(!(n.endMs>i.startMs)){if(a>0){var o=t.splice(a,1)[0];r.push(o)}break}}}return r}function UT(e){for(var t=e.events,r=e.minimumStartDifference,n=e.slotMetrics,a=e.accessors,i=t.map(function(f){return new vie(f,{slotMetrics:n,accessors:a})}),o=wie(i),c=[],d=function(){var m=o[u],p=c.find(function(y){return y.end>m.start||Math.abs(m.start-y.start)<r});if(!p)return m.rows=[],c.push(m),1;m.container=p;for(var x=null,v=p.rows.length-1;!x&&v>=0;v--)bie(p.rows[v],m,r)&&(x=p.rows[v]);x?(x.leaves.push(m),m.row=x):(m.leaves=[],p.rows.push(m))},u=0;u<o.length;u++)d();return o.map(function(f){return{event:f.data,style:{top:f.top,height:f.height,width:f.width,xOffset:Math.max(0,f.xOffset)}}})}function VT(e,t,r){for(var n=0;n<e.friends.length;++n)if(!(r.indexOf(e.friends[n])>-1)){t=t>e.friends[n].idx?t:e.friends[n].idx,r.push(e.friends[n]);var a=VT(e.friends[n],t,r);t=t>a?t:a}return t}function _ie(e){var t=e.events,r=e.minimumStartDifference,n=e.slotMetrics,a=e.accessors,i=UT({events:t,minimumStartDifference:r,slotMetrics:n,accessors:a});i.sort(function(oe,Z){return oe=oe.style,Z=Z.style,oe.top!==Z.top?oe.top>Z.top?1:-1:oe.height!==Z.height?oe.top+oe.height<Z.top+Z.height?1:-1:0});for(var o=0;o<i.length;++o)i[o].friends=[],delete i[o].style.left,delete i[o].style.left,delete i[o].idx,delete i[o].size;for(var c=0;c<i.length-1;++c)for(var d=i[c],u=d.style.top,f=d.style.top+d.style.height,m=c+1;m<i.length;++m){var p=i[m],x=p.style.top,v=p.style.top+p.style.height;(x>=u&&v<=f||v>u&&v<=f||x>=u&&x<f)&&(d.friends.push(p),p.friends.push(d))}for(var y=0;y<i.length;++y){for(var _=i[y],w=[],b=0;b<100;++b)w.push(1);for(var N=0;N<_.friends.length;++N)_.friends[N].idx!==void 0&&(w[_.friends[N].idx]=0);_.idx=w.indexOf(1)}for(var S=0;S<i.length;++S){var C=0;if(!i[S].size){var O=[],A=VT(i[S],0,O);C=100/(A+1),i[S].size=C;for(var z=0;z<O.length;++z)O[z].size=C}}for(var $=0;$<i.length;++$){var W=i[$];W.style.left=W.idx*W.size;for(var F=0,G=0;G<W.friends.length;++G){var ee=W.friends[G].idx;F=F>ee?F:ee}F<=W.idx&&(W.size=100-W.idx*W.size);var K=W.idx===0?0:3;W.style.width="calc(".concat(W.size,"% - ").concat(K,"px)"),W.style.height="calc(".concat(W.style.height,"% - 2px)"),W.style.xOffset="calc(".concat(W.style.left,"% + ").concat(K,"px)")}return i}var wS={overlap:UT,"no-overlap":_ie};function kie(e){return!!(e&&e.constructor&&e.call&&e.apply)}function jie(e){e.events,e.minimumStartDifference,e.slotMetrics,e.accessors;var t=e.dayLayoutAlgorithm,r=t;return t in wS&&(r=wS[t]),kie(r)?r.apply(this,arguments):[]}var qT=function(e){function t(){return vr(this,t),dn(this,t,arguments)}return Gr(t,e),yr(t,[{key:"render",value:function(){var n=this.props,a=n.renderSlot,i=n.resource,o=n.group,c=n.getters,d=n.components,u=d===void 0?{}:d,f=u.timeSlotWrapper,m=f===void 0?_a:f,p=c?c.slotGroupProp(o):{};return J.createElement("div",Object.assign({className:"rbc-timeslot-group"},p),o.map(function(x,v){var y=c?c.slotProp(x,i):{};return J.createElement(m,{key:v,value:x,resource:i},J.createElement("div",Object.assign({},y,{className:nr("rbc-time-slot",y.className)}),a&&a(x,v)))}))}}])}(E.Component);function Rm(e){return typeof e=="string"?e:e+"%"}function Nie(e){var t=e.style,r=e.className,n=e.event,a=e.accessors,i=e.rtl,o=e.selected,c=e.label,d=e.continuesPrior,u=e.continuesAfter,f=e.getters,m=e.onClick,p=e.onDoubleClick,x=e.isBackgroundEvent,v=e.onKeyPress,y=e.components,_=y.event,w=y.eventWrapper,b=a.title(n),N=a.tooltip(n),S=a.end(n),C=a.start(n),O=f.eventProp(n,C,S,o),A=[J.createElement("div",{key:"1",className:"rbc-event-label"},c),J.createElement("div",{key:"2",className:"rbc-event-content"},_?J.createElement(_,{event:n,title:b}):b)],z=t.height,$=t.top,W=t.width,F=t.xOffset,G=Ct(Ct({},O.style),{},hl({top:Rm($),height:Rm(z),width:Rm(W)},i?"right":"left",Rm(F)));return J.createElement(w,Object.assign({type:"time"},e),J.createElement("div",{role:"button",tabIndex:0,onClick:m,onDoubleClick:p,style:G,onKeyDown:v,title:N?(typeof c=="string"?c+": ":"")+N:void 0,className:nr(x?"rbc-background-event":"rbc-event",r,O.className,{"rbc-selected":o,"rbc-event-continues-earlier":d,"rbc-event-continues-later":u})},A))}var Sie=function(t){var r=t.children,n=t.className,a=t.style,i=t.innerRef;return J.createElement("div",{className:n,style:a,ref:i},r)},Cie=J.forwardRef(function(e,t){return J.createElement(Sie,Object.assign({},e,{innerRef:t}))}),Eie=["dayProp"],Pie=["eventContainerWrapper","timeIndicatorWrapper"],YT=function(e){function t(){var r;vr(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=dn(this,t,[].concat(a)),r.state={selecting:!1,timeIndicatorPosition:null},r.intervalTriggered=!1,r.renderEvents=function(o){var c=o.events,d=o.isBackgroundEvent,u=r.props,f=u.rtl,m=u.selected,p=u.accessors,x=u.localizer,v=u.getters,y=u.components,_=u.step,w=u.timeslots,b=u.dayLayoutAlgorithm,N=u.resizable,S=r,C=S.slotMetrics,O=x.messages,A=jie({events:c,accessors:p,slotMetrics:C,minimumStartDifference:Math.ceil(_*w/2),dayLayoutAlgorithm:b});return A.map(function(z,$){var W,F=z.event,G=z.style,ee=p.end(F),K=p.start(F),oe=(W=p.eventId(F))!==null&&W!==void 0?W:"evt_"+$,Z="eventTimeRangeFormat",pe,Q=C.startsBeforeDay(K),ce=C.startsAfterDay(ee);Q?Z="eventTimeRangeEndFormat":ce&&(Z="eventTimeRangeStartFormat"),Q&&ce?pe=O.allDay:pe=x.format({start:K,end:ee},Z);var le=Q||C.startsBefore(K),B=ce||C.startsAfter(ee);return J.createElement(Nie,{style:G,event:F,label:pe,key:oe,getters:v,rtl:f,components:y,continuesPrior:le,continuesAfter:B,accessors:p,resource:r.props.resource,selected:M0(F,m),onClick:function(ae){return r._select(Ct(Ct(Ct({},F),r.props.resource&&{sourceResource:r.props.resource}),d&&{isBackgroundEvent:!0}),ae)},onDoubleClick:function(ae){return r._doubleClick(F,ae)},isBackgroundEvent:d,onKeyPress:function(ae){return r._keyPress(F,ae)},resizable:N})})},r._selectable=function(){var o=r.containerRef.current,c=r.props,d=c.longPressThreshold,u=c.localizer,f=r._selector=new IT(function(){return o},{longPressThreshold:d}),m=function(y){var _=r.props.onSelecting,w=r.state||{},b=p(y),N=b.startDate,S=b.endDate;_&&(u.eq(w.startDate,N,"minutes")&&u.eq(w.endDate,S,"minutes")||_({start:N,end:S,resourceId:r.props.resource})===!1)||(r.state.start!==b.start||r.state.end!==b.end||r.state.selecting!==b.selecting)&&r.setState(b)},p=function(y){var _=r.slotMetrics.closestSlotFromPoint(y,Ul(o));r.state.selecting||(r._initialSlot=_);var w=r._initialSlot;u.lte(w,_)?_=r.slotMetrics.nextSlot(_):u.gt(w,_)&&(w=r.slotMetrics.nextSlot(w));var b=r.slotMetrics.getRange(u.min(w,_),u.max(w,_));return Ct(Ct({},b),{},{selecting:!0,top:"".concat(b.top,"%"),height:"".concat(b.height,"%")})},x=function(y,_){if(!yg(r.containerRef.current,y)){var w=p(y),b=w.startDate,N=w.endDate;r._selectSlot({startDate:b,endDate:N,action:_,box:y})}r.setState({selecting:!1})};f.on("selecting",m),f.on("selectStart",m),f.on("beforeSelect",function(v){if(r.props.selectable==="ignoreEvents")return!yg(r.containerRef.current,v)}),f.on("click",function(v){return x(v,"click")}),f.on("doubleClick",function(v){return x(v,"doubleClick")}),f.on("select",function(v){r.state.selecting&&(r._selectSlot(Ct(Ct({},r.state),{},{action:"select",bounds:v})),r.setState({selecting:!1}))}),f.on("reset",function(){r.state.selecting&&r.setState({selecting:!1})})},r._teardownSelectable=function(){r._selector&&(r._selector.teardown(),r._selector=null)},r._selectSlot=function(o){for(var c=o.startDate,d=o.endDate,u=o.action,f=o.bounds,m=o.box,p=c,x=[];r.props.localizer.lte(p,d);)x.push(p),p=new Date(+p+r.props.step*60*1e3);$t(r.props.onSelectSlot,{slots:x,start:c,end:d,resourceId:r.props.resource,action:u,bounds:f,box:m})},r._select=function(){for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];$t(r.props.onSelectEvent,c)},r._doubleClick=function(){for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];$t(r.props.onDoubleClickEvent,c)},r._keyPress=function(){for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];$t(r.props.onKeyPressEvent,c)},r.slotMetrics=Y_(r.props),r.containerRef=E.createRef(),r}return Gr(t,e),yr(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(n,a){this.props.selectable&&!n.selectable&&this._selectable(),!this.props.selectable&&n.selectable&&this._teardownSelectable();var i=this.props,o=i.getNow,c=i.isNow,d=i.localizer,u=i.date,f=i.min,m=i.max,p=d.neq(n.getNow(),o(),"minutes");if(n.isNow!==c||p){if(this.clearTimeIndicatorInterval(),c){var x=!p&&d.eq(n.date,u,"minutes")&&a.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(x)}}else c&&(d.neq(n.min,f,"minutes")||d.neq(n.max,m,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var n=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!this.intervalTriggered&&!a&&this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){n.intervalTriggered=!0,n.positionTimeIndicator(),n.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var n=this.props,a=n.min,i=n.max,o=n.getNow,c=o();if(c>=a&&c<=i){var d=this.slotMetrics.getCurrentTimePosition(c);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:d})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var n=this.props,a=n.date,i=n.max,o=n.rtl,c=n.isNow,d=n.resource,u=n.accessors,f=n.localizer,m=n.getters,p=m.dayProp,x=oa(m,Eie),v=n.components,y=v.eventContainerWrapper,_=v.timeIndicatorWrapper,w=oa(v,Pie);this.slotMetrics=this.slotMetrics.update(this.props);var b=this.slotMetrics,N=this.state,S=N.selecting,C=N.top,O=N.height,A=N.startDate,z=N.endDate,$={start:A,end:z},W=p(i,d),F=W.className,G=W.style,ee={className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}},K=w.dayColumnWrapper||Cie;return J.createElement(K,{ref:this.containerRef,date:a,style:G,className:nr(F,"rbc-day-slot","rbc-time-column",c&&"rbc-now",c&&"rbc-today",S&&"rbc-slot-selecting"),slotMetrics:b,resource:d},b.groups.map(function(oe,Z){return J.createElement(qT,{key:Z,group:oe,resource:d,getters:x,components:w})}),J.createElement(y,{localizer:f,resource:d,accessors:u,getters:x,components:w,slotMetrics:b},J.createElement("div",{className:nr("rbc-events-container",o&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),S&&J.createElement("div",{className:"rbc-slot-selection",style:{top:C,height:O}},J.createElement("span",null,f.format($,"selectRangeFormat"))),c&&this.intervalTriggered&&J.createElement(_,ee,J.createElement("div",ee)))}}])}(J.Component);YT.defaultProps={dragThroughEvents:!0,timeslots:2};var GT=function(t){var r=t.label;return J.createElement(J.Fragment,null,r)},Tie=function(e){function t(){var r;vr(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=dn(this,t,[].concat(a)),r.handleHeaderClick=function(o,c,d){d.preventDefault(),$t(r.props.onDrillDown,[o,c])},r.renderRow=function(o){var c=r.props,d=c.events,u=c.rtl,f=c.selectable,m=c.getNow,p=c.range,x=c.getters,v=c.localizer,y=c.accessors,_=c.components,w=c.resizable,b=y.resourceId(o),N=o?d.filter(function(S){return y.resource(S)===b}):d;return J.createElement(ef,{isAllDay:!0,rtl:u,getNow:m,minRows:2,maxRows:r.props.allDayMaxRows+1,range:p,events:N,resourceId:b,className:"rbc-allday-cell",selectable:f,selected:r.props.selected,components:_,accessors:y,getters:x,localizer:v,onSelect:r.props.onSelectEvent,onShowMore:r.props.onShowMore,onDoubleClick:r.props.onDoubleClickEvent,onKeyPress:r.props.onKeyPressEvent,onSelectSlot:r.props.onSelectSlot,longPressThreshold:r.props.longPressThreshold,resizable:w})},r}return Gr(t,e),yr(t,[{key:"renderHeaderCells",value:function(n){var a=this,i=this.props,o=i.localizer,c=i.getDrilldownView,d=i.getNow,u=i.getters.dayProp,f=i.components.header,m=f===void 0?q_:f,p=d();return n.map(function(x,v){var y=c(x),_=o.format(x,"dayFormat"),w=u(x),b=w.className,N=w.style,S=J.createElement(m,{date:x,label:_,localizer:o});return J.createElement("div",{key:v,style:N,className:nr("rbc-header",b,o.isSameDate(x,p)&&"rbc-today")},y?J.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(O){return a.handleHeaderClick(x,y,O)}},S):J.createElement("span",null,S))})}},{key:"render",value:function(){var n=this,a=this.props,i=a.width,o=a.rtl,c=a.resources,d=a.range,u=a.events,f=a.getNow,m=a.accessors,p=a.selectable,x=a.components,v=a.getters,y=a.scrollRef,_=a.localizer,w=a.isOverflowing,b=a.components,N=b.timeGutterHeader,S=b.resourceHeader,C=S===void 0?GT:S,O=a.resizable,A={};w&&(A[o?"marginLeft":"marginRight"]="".concat(N_()-1,"px"));var z=c.groupEvents(u);return J.createElement("div",{style:A,ref:y,className:nr("rbc-time-header",w&&"rbc-overflowing")},J.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:i,minWidth:i,maxWidth:i}},N&&J.createElement(N,null)),c.map(function($,W){var F=Ss($,2),G=F[0],ee=F[1];return J.createElement("div",{className:"rbc-time-header-content",key:G||W},ee&&J.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(W)},J.createElement("div",{className:"rbc-header"},J.createElement(C,{index:W,label:m.resourceTitle(ee),resource:ee}))),J.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(d.length<=1?" rbc-time-header-cell-single-day":"")},n.renderHeaderCells(d)),J.createElement(ef,{isAllDay:!0,rtl:o,getNow:f,minRows:2,maxRows:n.props.allDayMaxRows+1,range:d,events:z.get(G)||[],resourceId:ee&&G,className:"rbc-allday-cell",selectable:p,selected:n.props.selected,components:x,accessors:m,getters:v,localizer:_,onSelect:n.props.onSelectEvent,onShowMore:n.props.onShowMore,onDoubleClick:n.props.onDoubleClickEvent,onKeyDown:n.props.onKeyPressEvent,onSelectSlot:n.props.onSelectSlot,longPressThreshold:n.props.longPressThreshold,resizable:O}))}))}}])}(J.Component),Mie=function(e){function t(){var r;vr(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=dn(this,t,[].concat(a)),r.handleHeaderClick=function(o,c,d){d.preventDefault(),$t(r.props.onDrillDown,[o,c])},r}return Gr(t,e),yr(t,[{key:"renderHeaderCells",value:function(n){var a=this,i=this.props,o=i.localizer,c=i.getDrilldownView,d=i.getNow,u=i.getters.dayProp,f=i.components,m=f.header,p=m===void 0?q_:m,x=f.resourceHeader,v=x===void 0?GT:x,y=i.resources,_=i.accessors,w=i.events,b=i.rtl,N=i.selectable,S=i.components,C=i.getters,O=i.resizable,A=d(),z=y.groupEvents(w);return n.map(function($,W){var F=c($),G=o.format($,"dayFormat"),ee=u($),K=ee.className,oe=ee.style,Z=J.createElement(p,{date:$,label:G,localizer:o});return J.createElement("div",{key:W,className:"rbc-time-header-content rbc-resource-grouping"},J.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(n.length<=1?" rbc-time-header-cell-single-day":"")},J.createElement("div",{style:oe,className:nr("rbc-header",K,o.isSameDate($,A)&&"rbc-today")},F?J.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(Q){return a.handleHeaderClick($,F,Q)}},Z):J.createElement("span",null,Z))),J.createElement("div",{className:"rbc-row"},y.map(function(pe,Q){var ce=Ss(pe,2),le=ce[0],B=ce[1];return J.createElement("div",{key:"resource_".concat(le,"_").concat(Q),className:nr("rbc-header",K,o.isSameDate($,A)&&"rbc-today")},J.createElement(v,{index:Q,label:_.resourceTitle(B),resource:B}))})),J.createElement("div",{className:"rbc-row rbc-m-b-negative-3 rbc-h-full"},y.map(function(pe,Q){var ce=Ss(pe,2),le=ce[0],B=ce[1],X=(z.get(le)||[]).filter(function(ae){return o.isSameDate(ae.start,$)||o.isSameDate(ae.end,$)});return J.createElement(ef,{key:"resource_".concat(le,"_").concat(Q),isAllDay:!0,rtl:b,getNow:d,minRows:2,maxRows:a.props.allDayMaxRows+1,range:[$],events:X,resourceId:B&&le,className:"rbc-allday-cell",selectable:N,selected:a.props.selected,components:S,accessors:_,getters:C,localizer:o,onSelect:a.props.onSelectEvent,onShowMore:a.props.onShowMore,onDoubleClick:a.props.onDoubleClickEvent,onKeyDown:a.props.onKeyPressEvent,onSelectSlot:a.props.onSelectSlot,longPressThreshold:a.props.longPressThreshold,resizable:O})})))})}},{key:"render",value:function(){var n=this.props,a=n.width,i=n.rtl,o=n.range,c=n.scrollRef,d=n.isOverflowing,u=n.components.timeGutterHeader,f={};return d&&(f[i?"marginLeft":"marginRight"]="".concat(N_()-1,"px")),J.createElement("div",{style:f,ref:c,className:nr("rbc-time-header",d&&"rbc-overflowing")},J.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:a,minWidth:a,maxWidth:a}},u&&J.createElement(u,null)),this.renderHeaderCells(o))}}])}(J.Component);function Oie(e){var t=e.min,r=e.max,n=e.localizer;return n.getTimezoneOffset(t)!==n.getTimezoneOffset(r)?{start:n.add(t,-1,"day"),end:n.add(r,-1,"day")}:{start:t,end:r}}var Die=function(t){var r=t.min,n=t.max,a=t.timeslots,i=t.step,o=t.localizer,c=t.getNow,d=t.resource,u=t.components,f=t.getters,m=t.gutterRef,p=u.timeGutterWrapper,x=E.useMemo(function(){return Oie({min:r,max:n,localizer:o})},[r==null?void 0:r.toISOString(),n==null?void 0:n.toISOString(),o]),v=x.start,y=x.end,_=E.useState(Y_({min:v,max:y,timeslots:a,step:i,localizer:o})),w=Ss(_,2),b=w[0],N=w[1];E.useEffect(function(){b&&N(b.update({min:v,max:y,timeslots:a,step:i,localizer:o}))},[v==null?void 0:v.toISOString(),y==null?void 0:y.toISOString(),a,i]);var S=E.useCallback(function(C,O){if(O)return null;var A=b.dateIsInGroup(c(),O);return J.createElement("span",{className:nr("rbc-label",A&&"rbc-now")},o.format(C,"timeGutterFormat"))},[b,o,c]);return J.createElement(p,{slotMetrics:b},J.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:m},b.groups.map(function(C,O){return J.createElement(qT,{key:O,group:C,resource:d,components:u,renderSlot:S,getters:f})})))},Lie=J.forwardRef(function(e,t){return J.createElement(Die,Object.assign({gutterRef:t},e))}),py={};function Aie(e,t){return{map:function(n){return e?e.map(function(a,i){return n([t.resourceId(a),a],i)}):[n([py,null],0)]},groupEvents:function(n){var a=new Map;return e?(n.forEach(function(i){var o=t.resource(i)||py;if(Array.isArray(o))o.forEach(function(d){var u=a.get(d)||[];u.push(i),a.set(d,u)});else{var c=a.get(o)||[];c.push(i),a.set(o,c)}}),a):(a.set(py,n),a)}}}var Kd=function(e){function t(r){var n;return vr(this,t),n=dn(this,t,[r]),n.handleScroll=function(a){n.scrollRef.current&&(n.scrollRef.current.scrollLeft=a.target.scrollLeft)},n.handleResize=function(){o2(n.rafHandle),n.rafHandle=U5(n.checkOverflow)},n.handleKeyPressEvent=function(){n.clearSelection();for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];$t(n.props.onKeyPressEvent,i)},n.handleSelectEvent=function(){n.clearSelection();for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];$t(n.props.onSelectEvent,i)},n.handleDoubleClickEvent=function(){n.clearSelection();for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];$t(n.props.onDoubleClickEvent,i)},n.handleShowMore=function(a,i,o,c,d){var u=n.props,f=u.popup,m=u.onDrillDown,p=u.onShowMore,x=u.getDrilldownView,v=u.doShowMoreDrillDown;if(n.clearSelection(),f){var y=W5(o,n.containerRef.current);n.setState({overlay:{date:i,events:a,position:Ct(Ct({},y),{},{width:"200px"}),target:d}})}else v&&$t(m,[i,x(i)||_n.DAY]);$t(p,[a,i,c])},n.handleSelectAllDaySlot=function(a,i){var o=n.props.onSelectSlot,c=new Date(a[0]),d=new Date(a[a.length-1]);d.setDate(a[a.length-1].getDate()+1),$t(o,{slots:a,start:c,end:d,action:i.action,resourceId:i.resourceId})},n.overlayDisplay=function(){n.setState({overlay:null})},n.checkOverflow=function(){if(!n._updatingOverflow){var a=n.contentRef.current;if(a!=null&&a.scrollHeight){var i=a.scrollHeight>a.clientHeight;n.state.isOverflowing!==i&&(n._updatingOverflow=!0,n.setState({isOverflowing:i},function(){n._updatingOverflow=!1}))}}},n.memoizedResources=pT(function(a,i){return Aie(a,i)}),n.state={gutterWidth:void 0,isOverflowing:null},n.scrollRef=J.createRef(),n.contentRef=J.createRef(),n.containerRef=J.createRef(),n._scrollRatio=null,n.gutterRef=E.createRef(),n}return Gr(t,e),yr(t,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){this.props.width==null&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),o2(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderDayColumn",value:function(n,a,i,o,c,d,u,f,m,p){var x=this.props,v=x.min,y=x.max,_=(o.get(a)||[]).filter(function(b){return d.inRange(n,u.start(b),u.end(b),"day")}),w=(c.get(a)||[]).filter(function(b){return d.inRange(n,u.start(b),u.end(b),"day")});return J.createElement(YT,Object.assign({},this.props,{localizer:d,min:d.merge(n,v),max:d.merge(n,y),resource:i&&a,components:f,isNow:d.isSameDate(n,p),key:"".concat(a,"-").concat(n),date:n,events:_,backgroundEvents:w,dayLayoutAlgorithm:m}))}},{key:"renderResourcesFirst",value:function(n,a,i,o,c,d,u,f,m){var p=this;return a.map(function(x){var v=Ss(x,2),y=v[0],_=v[1];return n.map(function(w){return p.renderDayColumn(w,y,_,i,o,c,d,f,m,u)})})}},{key:"renderRangeFirst",value:function(n,a,i,o,c,d,u,f,m){var p=this;return n.map(function(x){return J.createElement("div",{style:{display:"flex",minHeight:"100%",flex:1},key:x},a.map(function(v){var y=Ss(v,2),_=y[0],w=y[1];return J.createElement("div",{style:{flex:1},key:d.resourceId(w)},p.renderDayColumn(x,_,w,i,o,c,d,f,m,u))}))})}},{key:"renderEvents",value:function(n,a,i,o){var c=this.props,d=c.accessors,u=c.localizer,f=c.resourceGroupingLayout,m=c.components,p=c.dayLayoutAlgorithm,x=this.memoizedResources(this.props.resources,d),v=x.groupEvents(a),y=x.groupEvents(i);return f?this.renderRangeFirst(n,x,v,y,u,d,o,m,p):this.renderResourcesFirst(n,x,v,y,u,d,o,m,p)}},{key:"render",value:function(){var n,a=this.props,i=a.events,o=a.backgroundEvents,c=a.range,d=a.width,u=a.rtl,f=a.selected,m=a.getNow,p=a.resources,x=a.components,v=a.accessors,y=a.getters,_=a.localizer,w=a.min,b=a.max,N=a.showMultiDayTimes,S=a.longPressThreshold,C=a.resizable,O=a.resourceGroupingLayout;d=d||this.state.gutterWidth;var A=c[0],z=c[c.length-1];this.slots=c.length;var $=[],W=[],F=[];i.forEach(function(ee){if(Qh(ee,A,z,v,_)){var K=v.start(ee),oe=v.end(ee);v.allDay(ee)||_.startAndEndAreDateOnly(K,oe)||!N&&!_.isSameDate(K,oe)?$.push(ee):W.push(ee)}}),o.forEach(function(ee){Qh(ee,A,z,v,_)&&F.push(ee)}),$.sort(function(ee,K){return db(ee,K,v,_)});var G={range:c,events:$,width:d,rtl:u,getNow:m,localizer:_,selected:f,allDayMaxRows:this.props.showAllEvents?1/0:(n=this.props.allDayMaxRows)!==null&&n!==void 0?n:1/0,resources:this.memoizedResources(p,v),selectable:this.props.selectable,accessors:v,getters:y,components:x,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:S,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:C};return J.createElement("div",{className:nr("rbc-time-view",p&&"rbc-time-view-resources"),ref:this.containerRef},p&&p.length>1&&O?J.createElement(Mie,G):J.createElement(Tie,G),this.props.popup&&this.renderOverlay(),J.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},J.createElement(Lie,{date:A,ref:this.gutterRef,localizer:_,min:_.merge(A,w),max:_.merge(A,b),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:x,className:"rbc-time-gutter",getters:y}),this.renderEvents(c,W,F,m())))}},{key:"renderOverlay",value:function(){var n,a,i=this,o=(n=(a=this.state)===null||a===void 0?void 0:a.overlay)!==null&&n!==void 0?n:{},c=this.props,d=c.accessors,u=c.localizer,f=c.components,m=c.getters,p=c.selected,x=c.popupOffset,v=c.handleDragStart,y=function(){return i.setState({overlay:null})};return J.createElement(V_,{overlay:o,accessors:d,localizer:u,components:f,getters:m,selected:p,popupOffset:x,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:v,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:y})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var n=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var a,i=(a=n.gutterRef)!==null&&a!==void 0&&a.current?ob(n.gutterRef.current):void 0;i&&n.state.gutterWidth!==i&&n.setState({gutterWidth:i})})}},{key:"applyScroll",value:function(){if(this._scrollRatio!=null&&this.props.enableAutoScroll===!0){var n=this.contentRef.current;n.scrollTop=n.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,a=n.min,i=n.max,o=n.scrollToTime,c=n.localizer,d=c.diff(c.merge(o,a),o,"milliseconds"),u=c.diff(a,i,"milliseconds");this._scrollRatio=d/u}}])}(E.Component);Kd.defaultProps={step:30,timeslots:2,resourceGroupingLayout:!1};var Rie=["date","localizer","min","max","scrollToTime","enableAutoScroll"],D0=function(e){function t(){return vr(this,t),dn(this,t,arguments)}return Gr(t,e),yr(t,[{key:"render",value:function(){var n=this.props,a=n.date,i=n.localizer,o=n.min,c=o===void 0?i.startOf(new Date,"day"):o,d=n.max,u=d===void 0?i.endOf(new Date,"day"):d,f=n.scrollToTime,m=f===void 0?i.startOf(new Date,"day"):f,p=n.enableAutoScroll,x=p===void 0?!0:p,v=oa(n,Rie),y=t.range(a,{localizer:i});return J.createElement(Kd,Object.assign({},v,{range:y,eventOffset:10,localizer:i,min:c,max:u,scrollToTime:m,enableAutoScroll:x}))}}])}(J.Component);D0.range=function(e,t){var r=t.localizer;return[r.startOf(e,"day")]};D0.navigate=function(e,t,r){var n=r.localizer;switch(t){case Bn.PREVIOUS:return n.add(e,-1,"day");case Bn.NEXT:return n.add(e,1,"day");default:return e}};D0.title=function(e,t){var r=t.localizer;return r.format(e,"dayHeaderFormat")};var zie=["date","localizer","min","max","scrollToTime","enableAutoScroll"],Do=function(e){function t(){return vr(this,t),dn(this,t,arguments)}return Gr(t,e),yr(t,[{key:"render",value:function(){var n=this.props,a=n.date,i=n.localizer,o=n.min,c=o===void 0?i.startOf(new Date,"day"):o,d=n.max,u=d===void 0?i.endOf(new Date,"day"):d,f=n.scrollToTime,m=f===void 0?i.startOf(new Date,"day"):f,p=n.enableAutoScroll,x=p===void 0?!0:p,v=oa(n,zie),y=t.range(a,this.props);return J.createElement(Kd,Object.assign({},v,{range:y,eventOffset:15,localizer:i,min:c,max:u,scrollToTime:m,enableAutoScroll:x}))}}])}(J.Component);Do.defaultProps=Kd.defaultProps;Do.navigate=function(e,t,r){var n=r.localizer;switch(t){case Bn.PREVIOUS:return n.add(e,-1,"week");case Bn.NEXT:return n.add(e,1,"week");default:return e}};Do.range=function(e,t){var r=t.localizer,n=r.startOfWeek(),a=r.startOf(e,"week",n),i=r.endOf(e,"week",n);return r.range(a,i)};Do.title=function(e,t){var r=t.localizer,n=Do.range(e,{localizer:r}),a=_T(n),i=a[0],o=a.slice(1);return r.format({start:i,end:o.pop()},"dayRangeHeaderFormat")};var $ie=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function G_(e,t){return Do.range(e,t).filter(function(r){return[6,0].indexOf(r.getDay())===-1})}var Ef=function(e){function t(){return vr(this,t),dn(this,t,arguments)}return Gr(t,e),yr(t,[{key:"render",value:function(){var n=this.props,a=n.date,i=n.localizer,o=n.min,c=o===void 0?i.startOf(new Date,"day"):o,d=n.max,u=d===void 0?i.endOf(new Date,"day"):d,f=n.scrollToTime,m=f===void 0?i.startOf(new Date,"day"):f,p=n.enableAutoScroll,x=p===void 0?!0:p,v=oa(n,$ie),y=G_(a,this.props);return J.createElement(Kd,Object.assign({},v,{range:y,eventOffset:15,localizer:i,min:c,max:u,scrollToTime:m,enableAutoScroll:x}))}}])}(J.Component);Ef.defaultProps=Kd.defaultProps;Ef.range=G_;Ef.navigate=Do.navigate;Ef.title=function(e,t){var r=t.localizer,n=G_(e,{localizer:r}),a=_T(n),i=a[0],o=a.slice(1);return r.format({start:i,end:o.pop()},"dayRangeHeaderFormat")};var L0=30;function A0(e){var t=e.accessors,r=e.components,n=e.date,a=e.events,i=e.getters,o=e.length,c=o===void 0?L0:o,d=e.localizer,u=e.onDoubleClickEvent,f=e.onSelectEvent,m=e.selected,p=E.useRef(null),x=E.useRef(null),v=E.useRef(null),y=E.useRef(null),_=E.useRef(null);E.useEffect(function(){N()});var w=function(z,$,W){var F=r.event,G=r.date;return $=$.filter(function(ee){return Qh(ee,d.startOf(z,"day"),d.endOf(z,"day"),t,d)}),$.map(function(ee,K){var oe=t.title(ee),Z=t.end(ee),pe=t.start(ee),Q=i.eventProp(ee,pe,Z,M0(ee,m)),ce=K===0&&d.format(z,"agendaDateFormat"),le=K===0?J.createElement("td",{rowSpan:$.length,className:"rbc-agenda-date-cell"},G?J.createElement(G,{day:z,label:ce}):ce):!1;return J.createElement("tr",{key:W+"_"+K,className:Q.className,style:Q.style},le,J.createElement("td",{className:"rbc-agenda-time-cell"},b(z,ee)),J.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(X){return f&&f(ee,X)},onDoubleClick:function(X){return u&&u(ee,X)}},F?J.createElement(F,{event:ee,title:oe}):oe))},[])},b=function(z,$){var W="",F=r.time,G=d.messages.allDay,ee=t.end($),K=t.start($);return t.allDay($)||(d.eq(K,ee)?G=d.format(K,"agendaTimeFormat"):d.isSameDate(K,ee)?G=d.format({start:K,end:ee},"agendaTimeRangeFormat"):d.isSameDate(z,K)?G=d.format(K,"agendaTimeFormat"):d.isSameDate(z,ee)&&(G=d.format(ee,"agendaTimeFormat"))),d.gt(z,K,"day")&&(W="rbc-continues-prior"),d.lt(z,ee,"day")&&(W+=" rbc-continues-after"),J.createElement("span",{className:W.trim()},F?J.createElement(F,{event:$,day:z,label:G}):G)},N=function(){if(_.current){var z=p.current,$=_.current.firstChild;if($){var W=y.current.scrollHeight>y.current.clientHeight,F=[],G=F;F=[ob($.children[0]),ob($.children[1])],(G[0]!==F[0]||G[1]!==F[1])&&(x.current.style.width=F[0]+"px",v.current.style.width=F[1]+"px"),W?(IV(z,"rbc-header-overflowing"),z.style.marginRight=N_()+"px"):FV(z,"rbc-header-overflowing")}}},S=d.messages,C=d.add(n,c,"day"),O=d.range(n,C,"day");return a=a.filter(function(A){return Qh(A,d.startOf(n,"day"),d.endOf(C,"day"),t,d)}),a.sort(function(A,z){return+t.start(A)-+t.start(z)}),J.createElement("div",{className:"rbc-agenda-view"},a.length!==0?J.createElement(J.Fragment,null,J.createElement("table",{ref:p,className:"rbc-agenda-table"},J.createElement("thead",null,J.createElement("tr",null,J.createElement("th",{className:"rbc-header",ref:x},S.date),J.createElement("th",{className:"rbc-header",ref:v},S.time),J.createElement("th",{className:"rbc-header"},S.event)))),J.createElement("div",{className:"rbc-agenda-content",ref:y},J.createElement("table",{className:"rbc-agenda-table"},J.createElement("tbody",{ref:_},O.map(function(A,z){return w(A,a,z)}))))):J.createElement("span",{className:"rbc-agenda-empty"},S.noEventsInRange))}A0.range=function(e,t){var r=t.length,n=r===void 0?L0:r,a=t.localizer,i=a.add(e,n,"day");return{start:e,end:i}};A0.navigate=function(e,t,r){var n=r.length,a=n===void 0?L0:n,i=r.localizer;switch(t){case Bn.PREVIOUS:return i.add(e,-a,"day");case Bn.NEXT:return i.add(e,a,"day");default:return e}};A0.title=function(e,t){var r=t.length,n=r===void 0?L0:r,a=t.localizer,i=a.add(e,n,"day");return a.format({start:e,end:i},"agendaHeaderFormat")};var up=hl(hl(hl(hl(hl({},_n.MONTH,O0),_n.WEEK,Do),_n.WORK_WEEK,Ef),_n.DAY,D0),_n.AGENDA,A0),Iie=["action","date","today"];function Fie(e,t){var r=t.action,n=t.date,a=t.today,i=oa(t,Iie);switch(e=typeof e=="string"?up[e]:e,r){case Bn.TODAY:n=a||new Date;break;case Bn.DATE:break;default:Bh(e&&typeof e.navigate=="function","Calendar View components must implement a static `.navigate(date, action)` method.s"),n=e.navigate(n,r,i)}return n}function Bie(e,t){var r=null;return typeof t=="function"?r=t(e):typeof t=="string"&&Ni(e)==="object"&&e!=null&&t in e&&(r=e[t]),r}var ti=function(t){return function(r){return Bie(r,t)}},Hie=["view","date","getNow","onNavigate"],Wie=["view","toolbar","events","backgroundEvents","resourceGroupingLayout","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function ZT(e){if(Array.isArray(e))return e;for(var t=[],r=0,n=Object.entries(e);r<n.length;r++){var a=Ss(n[r],2),i=a[0],o=a[1];o&&t.push(i)}return t}function Uie(e,t){var r=t.views,n=ZT(r);return n.indexOf(e)!==-1}var KT=function(e){function t(){var r;vr(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=dn(this,t,[].concat(a)),r.getViews=function(){var o=r.props.views;return Array.isArray(o)?bae(o,function(c,d){return c[d]=up[d]},{}):Ni(o)==="object"?bte(o,function(c,d){return c===!0?up[d]:c}):up},r.getView=function(){var o=r.getViews();return o[r.props.view]},r.getDrilldownView=function(o){var c=r.props,d=c.view,u=c.drilldownView,f=c.getDrilldownView;return f?f(o,d,Object.keys(r.getViews())):u},r.handleRangeChange=function(o,c,d){var u=r.props,f=u.onRangeChange,m=u.localizer;f&&c.range&&f(c.range(o,{localizer:m}),d)},r.handleNavigate=function(o,c){var d=r.props,u=d.view,f=d.date,m=d.getNow,p=d.onNavigate,x=oa(d,Hie),v=r.getView(),y=m();f=Fie(v,Ct(Ct({},x),{},{action:o,date:c||f||y,today:y})),p(f,u,o),r.handleRangeChange(f,v)},r.handleViewChange=function(o){o!==r.props.view&&Uie(o,r.props)&&r.props.onView(o);var c=r.getViews();r.handleRangeChange(r.props.date||r.props.getNow(),c[o],o)},r.handleSelectEvent=function(){for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];$t(r.props.onSelectEvent,c)},r.handleDoubleClickEvent=function(){for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];$t(r.props.onDoubleClickEvent,c)},r.handleKeyPressEvent=function(){for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];$t(r.props.onKeyPressEvent,c)},r.handleSelectSlot=function(o){$t(r.props.onSelectSlot,o)},r.handleDrillDown=function(o,c){var d=r.props.onDrillDown;if(d){d(o,c,r.drilldownView);return}c&&r.handleViewChange(c),r.handleNavigate(Bn.DATE,o)},r.state={context:t.getContext(r.props)},r}return Gr(t,e),yr(t,[{key:"render",value:function(){var n=this.props,a=n.view,i=n.toolbar,o=n.events,c=n.backgroundEvents,d=n.resourceGroupingLayout,u=n.style,f=n.className,m=n.elementProps,p=n.date,x=n.getNow,v=n.length,y=n.showMultiDayTimes,_=n.onShowMore,w=n.doShowMoreDrillDown;n.components,n.formats,n.messages,n.culture;var b=oa(n,Wie);p=p||x();var N=this.getView(),S=this.state.context,C=S.accessors,O=S.components,A=S.getters,z=S.localizer,$=S.viewNames,W=O.toolbar||Yae,F=N.title(p,{localizer:z,length:v});return J.createElement("div",Object.assign({},m,{className:nr(f,"rbc-calendar",b.rtl&&"rbc-rtl"),style:u}),i&&J.createElement(W,{date:p,view:a,views:$,label:F,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:z}),J.createElement(N,Object.assign({},b,{events:o,backgroundEvents:c,date:p,getNow:x,length:v,localizer:z,getters:A,components:O,accessors:C,showMultiDayTimes:y,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:_,doShowMoreDrillDown:w,resourceGroupingLayout:d})))}}],[{key:"getDerivedStateFromProps",value:function(n){return{context:t.getContext(n)}}},{key:"getContext",value:function(n){var a=n.startAccessor,i=n.endAccessor,o=n.allDayAccessor,c=n.tooltipAccessor,d=n.titleAccessor,u=n.resourceAccessor,f=n.resourceIdAccessor,m=n.resourceTitleAccessor,p=n.eventIdAccessor,x=n.eventPropGetter,v=n.backgroundEventPropGetter,y=n.slotPropGetter,_=n.slotGroupPropGetter,w=n.dayPropGetter,b=n.view,N=n.views,S=n.localizer,C=n.culture,O=n.messages,A=O===void 0?{}:O,z=n.components,$=z===void 0?{}:z,W=n.formats,F=W===void 0?{}:W,G=ZT(N),ee=Zae(A);return{viewNames:G,localizer:qae(S,C,F,ee),getters:{eventProp:function(){return x&&x.apply(void 0,arguments)||{}},backgroundEventProp:function(){return v&&v.apply(void 0,arguments)||{}},slotProp:function(){return y&&y.apply(void 0,arguments)||{}},slotGroupProp:function(){return _&&_.apply(void 0,arguments)||{}},dayProp:function(){return w&&w.apply(void 0,arguments)||{}}},components:fte($[b]||{},oae($,G),{eventWrapper:_a,backgroundEventWrapper:_a,eventContainerWrapper:_a,dateCellWrapper:_a,weekWrapper:_a,timeSlotWrapper:_a,timeGutterWrapper:_a,timeIndicatorWrapper:_a}),accessors:{start:ti(a),end:ti(i),allDay:ti(o),tooltip:ti(c),title:ti(d),resource:ti(u),resourceId:ti(f),resourceTitle:ti(m),eventId:ti(p)}}}}])}(J.Component);KT.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:_n.MONTH,views:[_n.MONTH,_n.WEEK,_n.DAY,_n.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:_n.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",eventIdAccessor:"id",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var Vie=S5(KT,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),qie=function(t,r,n){var a=t.start,i=t.end;return n.format(a,"MMMM DD",r)+"  "+n.format(i,n.eq(a,i,"month")?"DD":"MMMM DD",r)},Yie=function(t,r,n){var a=t.start,i=t.end;return n.format(a,"L",r)+"  "+n.format(i,"L",r)},gy=function(t,r,n){var a=t.start,i=t.end;return n.format(a,"LT",r)+"  "+n.format(i,"LT",r)},Gie=function(t,r,n){var a=t.start;return n.format(a,"LT",r)+"  "},Zie=function(t,r,n){var a=t.end;return"  "+n.format(a,"LT",r)},Kie={dateFormat:"DD",dayFormat:"DD ddd",weekdayFormat:"ddd",selectRangeFormat:gy,eventTimeRangeFormat:gy,eventTimeRangeStartFormat:Gie,eventTimeRangeEndFormat:Zie,timeGutterFormat:"LT",monthHeaderFormat:"MMMM YYYY",dayHeaderFormat:"dddd MMM DD",dayRangeHeaderFormat:qie,agendaHeaderFormat:Yie,agendaDateFormat:"ddd MMM DD",agendaTimeFormat:"LT",agendaTimeRangeFormat:gy};function eo(e){var t=e&&e.toLowerCase();return t==="FullYear"?t="year":t||(t=void 0),t}function Xie(e){var t=function(X,ae){return ae?X.locale(ae):X};function r(B){return e(B).toDate().getTimezoneOffset()}function n(B,X){var ae,fe,re=e(B).local(),ge=e(X).local();if(!e.tz)return re.toDate().getTimezoneOffset()-ge.toDate().getTimezoneOffset();var Oe=(ae=re==null||(fe=re._z)===null||fe===void 0?void 0:fe.name)!==null&&ae!==void 0?ae:e.tz.guess(),me=e.tz.zone(Oe).utcOffset(+re),_e=e.tz.zone(Oe).utcOffset(+ge);return me-_e}function a(B){var X=e(B).startOf("day");return n(X,B)}function i(B,X,ae){var fe=eo(ae),re=fe?e(B).startOf(fe):e(B),ge=fe?e(X).startOf(fe):e(X);return[re,ge,fe]}function o(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,X=arguments.length>1?arguments[1]:void 0,ae=eo(X);return ae?e(B).startOf(ae).toDate():e(B).toDate()}function c(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,X=arguments.length>1?arguments[1]:void 0,ae=eo(X);return ae?e(B).endOf(ae).toDate():e(B).toDate()}function d(B,X,ae){var fe=i(B,X,ae),re=Ss(fe,3),ge=re[0],Oe=re[1],me=re[2];return ge.isSame(Oe,me)}function u(B,X,ae){return!d(B,X,ae)}function f(B,X,ae){var fe=i(B,X,ae),re=Ss(fe,3),ge=re[0],Oe=re[1],me=re[2];return ge.isAfter(Oe,me)}function m(B,X,ae){var fe=i(B,X,ae),re=Ss(fe,3),ge=re[0],Oe=re[1],me=re[2];return ge.isBefore(Oe,me)}function p(B,X,ae){var fe=i(B,X,ae),re=Ss(fe,3),ge=re[0],Oe=re[1],me=re[2];return ge.isSameOrBefore(Oe,me)}function x(B,X,ae){var fe=i(B,X,ae),re=Ss(fe,3),ge=re[0],Oe=re[1],me=re[2];return ge.isSameOrBefore(Oe,me)}function v(B,X,ae){var fe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"day",re=eo(fe),ge=e(B),Oe=e(X),me=e(ae);return ge.isBetween(Oe,me,re,"[]")}function y(B,X){var ae=e(B),fe=e(X),re=e.min(ae,fe);return re.toDate()}function _(B,X){var ae=e(B),fe=e(X),re=e.max(ae,fe);return re.toDate()}function w(B,X){if(!B&&!X)return null;var ae=e(X).format("HH:mm:ss"),fe=e(B).startOf("day").format("MM/DD/YYYY");return e("".concat(fe," ").concat(ae),"MM/DD/YYYY HH:mm:ss").toDate()}function b(B,X,ae){var fe=eo(ae);return e(B).add(X,fe).toDate()}function N(B,X){for(var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",fe=eo(ae),re=e(B).toDate(),ge=[];x(re,X);)ge.push(re),re=b(re,1,fe);return ge}function S(B,X){var ae=eo(X),fe=o(B,ae);return d(fe,B)?fe:b(fe,1,ae)}function C(B,X){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",fe=eo(ae),re=e(B),ge=e(X);return ge.diff(re,fe)}function O(B){var X=e(B);return X.minutes()}function A(B){var X=B?e.localeData(B):e.localeData();return X?X.firstDayOfWeek():0}function z(B){return e(B).startOf("month").startOf("week").toDate()}function $(B){return e(B).endOf("month").endOf("week").toDate()}function W(B){for(var X=z(B),ae=$(B),fe=[];x(X,ae);)fe.push(X),X=b(X,1,"d");return fe}function F(B,X,ae){return e(B).startOf("day").minute(X+ae).toDate()}function G(B,X){return C(B,X,"minutes")}function ee(B){var X=e(B).startOf("day"),ae=e(B);return ae.diff(X,"minutes")+a(B)}function K(B,X){var ae=e(B),fe=e(X);return ae.isBefore(fe,"day")}function oe(B,X,ae){var fe=e(X),re=e(ae);return fe.isSameOrAfter(re,"minutes")}function Z(B,X){var ae=e(B),fe=e(X),re=e.duration(fe.diff(ae));return re.days()}function pe(B){var X=B.evtA,ae=X.start,fe=X.end,re=X.allDay,ge=B.evtB,Oe=ge.start,me=ge.end,_e=ge.allDay,$e=+o(ae,"day")-+o(Oe,"day"),Pe=Z(ae,fe),Le=Z(Oe,me);return $e||Le-Pe||!!_e-!!re||+ae-+Oe||+fe-+me}function Q(B){var X=B.event,ae=X.start,fe=X.end,re=B.range,ge=re.start,Oe=re.end,me=e(ae).startOf("day"),_e=e(fe),$e=e(ge),Pe=e(Oe),Le=me.isSameOrBefore(Pe,"day"),Ge=!me.isSame(_e,"minutes"),et=Ge?_e.isAfter($e,"minutes"):_e.isSameOrAfter($e,"minutes");return Le&&et}function ce(B,X){var ae=e(B),fe=e(X);return ae.isSame(fe,"day")}function le(){var B=new Date,X=/-/.test(B.toString())?"-":"",ae=B.getTimezoneOffset(),fe=Number("".concat(X).concat(Math.abs(ae))),re=e().utcOffset();return re>fe?1:0}return new Vae({formats:Kie,firstOfWeek:A,firstVisibleDay:z,lastVisibleDay:$,visibleDays:W,format:function(X,ae,fe){return t(e(X),fe).format(ae)},lt:m,lte:x,gt:f,gte:p,eq:d,neq:u,merge:w,inRange:v,startOf:o,endOf:c,range:N,add:b,diff:C,ceil:S,min:y,max:_,minutes:O,getSlotDate:F,getTimezoneOffset:r,getDstOffset:n,getTotalMin:G,getMinutesFromMidnight:ee,continuesPrior:K,continuesAfter:oe,sortEvents:pe,inEventRange:Q,isSameDate:ce,daySpan:Z,browserTZOffset:le})}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var XT;function Ce(){return XT.apply(null,arguments)}function Jie(e){XT=e}function ca(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function Pl(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function xt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Z_(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(xt(e,t))return!1;return!0}function On(e){return e===void 0}function Ci(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function Pf(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function JT(e,t){var r=[],n,a=e.length;for(n=0;n<a;++n)r.push(t(e[n],n));return r}function fo(e,t){for(var r in t)xt(t,r)&&(e[r]=t[r]);return xt(t,"toString")&&(e.toString=t.toString),xt(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Ra(e,t,r,n){return w3(e,t,r,n,!0).utc()}function Qie(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Je(e){return e._pf==null&&(e._pf=Qie()),e._pf}var hb;Array.prototype.some?hb=Array.prototype.some:hb=function(e){var t=Object(this),r=t.length>>>0,n;for(n=0;n<r;n++)if(n in t&&e.call(this,t[n],n,t))return!0;return!1};function K_(e){var t=null,r=!1,n=e._d&&!isNaN(e._d.getTime());if(n&&(t=Je(e),r=hb.call(t.parsedDateParts,function(a){return a!=null}),n=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r),e._strict&&(n=n&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=n;else return n;return e._isValid}function R0(e){var t=Ra(NaN);return e!=null?fo(Je(t),e):Je(t).userInvalidated=!0,t}var _S=Ce.momentProperties=[],xy=!1;function X_(e,t){var r,n,a,i=_S.length;if(On(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),On(t._i)||(e._i=t._i),On(t._f)||(e._f=t._f),On(t._l)||(e._l=t._l),On(t._strict)||(e._strict=t._strict),On(t._tzm)||(e._tzm=t._tzm),On(t._isUTC)||(e._isUTC=t._isUTC),On(t._offset)||(e._offset=t._offset),On(t._pf)||(e._pf=Je(t)),On(t._locale)||(e._locale=t._locale),i>0)for(r=0;r<i;r++)n=_S[r],a=t[n],On(a)||(e[n]=a);return e}function Tf(e){X_(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),xy===!1&&(xy=!0,Ce.updateOffset(this),xy=!1)}function da(e){return e instanceof Tf||e!=null&&e._isAMomentObject!=null}function QT(e){Ce.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function Is(e,t){var r=!0;return fo(function(){if(Ce.deprecationHandler!=null&&Ce.deprecationHandler(null,e),r){var n=[],a,i,o,c=arguments.length;for(i=0;i<c;i++){if(a="",typeof arguments[i]=="object"){a+=`
[`+i+"] ";for(o in arguments[0])xt(arguments[0],o)&&(a+=o+": "+arguments[0][o]+", ");a=a.slice(0,-2)}else a=arguments[i];n.push(a)}QT(e+`
Arguments: `+Array.prototype.slice.call(n).join("")+`
`+new Error().stack),r=!1}return t.apply(this,arguments)},t)}var kS={};function e3(e,t){Ce.deprecationHandler!=null&&Ce.deprecationHandler(e,t),kS[e]||(QT(t),kS[e]=!0)}Ce.suppressDeprecationWarnings=!1;Ce.deprecationHandler=null;function za(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function eoe(e){var t,r;for(r in e)xt(e,r)&&(t=e[r],za(t)?this[r]=t:this["_"+r]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function fb(e,t){var r=fo({},e),n;for(n in t)xt(t,n)&&(Pl(e[n])&&Pl(t[n])?(r[n]={},fo(r[n],e[n]),fo(r[n],t[n])):t[n]!=null?r[n]=t[n]:delete r[n]);for(n in e)xt(e,n)&&!xt(t,n)&&Pl(e[n])&&(r[n]=fo({},r[n]));return r}function J_(e){e!=null&&this.set(e)}var mb;Object.keys?mb=Object.keys:mb=function(e){var t,r=[];for(t in e)xt(e,t)&&r.push(t);return r};var toe={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function roe(e,t,r){var n=this._calendar[e]||this._calendar.sameElse;return za(n)?n.call(t,r):n}function Ma(e,t,r){var n=""+Math.abs(e),a=t-n.length,i=e>=0;return(i?r?"+":"":"-")+Math.pow(10,Math.max(0,a)).toString().substr(1)+n}var Q_=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,zm=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,yy={},ld={};function Fe(e,t,r,n){var a=n;typeof n=="string"&&(a=function(){return this[n]()}),e&&(ld[e]=a),t&&(ld[t[0]]=function(){return Ma(a.apply(this,arguments),t[1],t[2])}),r&&(ld[r]=function(){return this.localeData().ordinal(a.apply(this,arguments),e)})}function noe(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function soe(e){var t=e.match(Q_),r,n;for(r=0,n=t.length;r<n;r++)ld[t[r]]?t[r]=ld[t[r]]:t[r]=noe(t[r]);return function(a){var i="",o;for(o=0;o<n;o++)i+=za(t[o])?t[o].call(a,e):t[o];return i}}function hp(e,t){return e.isValid()?(t=t3(t,e.localeData()),yy[t]=yy[t]||soe(t),yy[t](e)):e.localeData().invalidDate()}function t3(e,t){var r=5;function n(a){return t.longDateFormat(a)||a}for(zm.lastIndex=0;r>=0&&zm.test(e);)e=e.replace(zm,n),zm.lastIndex=0,r-=1;return e}var aoe={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function ioe(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return t||!r?t:(this._longDateFormat[e]=r.match(Q_).map(function(n){return n==="MMMM"||n==="MM"||n==="DD"||n==="dddd"?n.slice(1):n}).join(""),this._longDateFormat[e])}var ooe="Invalid date";function loe(){return this._invalidDate}var coe="%d",doe=/\d{1,2}/;function uoe(e){return this._ordinal.replace("%d",e)}var hoe={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function foe(e,t,r,n){var a=this._relativeTime[r];return za(a)?a(e,t,r,n):a.replace(/%d/i,e)}function moe(e,t){var r=this._relativeTime[e>0?"future":"past"];return za(r)?r(t):r.replace(/%s/i,t)}var jS={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Fs(e){return typeof e=="string"?jS[e]||jS[e.toLowerCase()]:void 0}function e1(e){var t={},r,n;for(n in e)xt(e,n)&&(r=Fs(n),r&&(t[r]=e[n]));return t}var poe={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function goe(e){var t=[],r;for(r in e)xt(e,r)&&t.push({unit:r,priority:poe[r]});return t.sort(function(n,a){return n.priority-a.priority}),t}var r3=/\d/,os=/\d\d/,n3=/\d{3}/,t1=/\d{4}/,z0=/[+-]?\d{6}/,Wt=/\d\d?/,s3=/\d\d\d\d?/,a3=/\d\d\d\d\d\d?/,$0=/\d{1,3}/,r1=/\d{1,4}/,I0=/[+-]?\d{1,6}/,Xd=/\d+/,F0=/[+-]?\d+/,xoe=/Z|[+-]\d\d:?\d\d/gi,B0=/Z|[+-]\d\d(?::?\d\d)?/gi,yoe=/[+-]?\d+(\.\d{1,3})?/,Mf=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Jd=/^[1-9]\d?/,n1=/^([1-9]\d|\d)/,vg;vg={};function Me(e,t,r){vg[e]=za(t)?t:function(n,a){return n&&r?r:t}}function voe(e,t){return xt(vg,e)?vg[e](t._strict,t._locale):new RegExp(boe(e))}function boe(e){return vi(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,r,n,a,i){return r||n||a||i}))}function vi(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ns(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function dt(e){var t=+e,r=0;return t!==0&&isFinite(t)&&(r=Ns(t)),r}var pb={};function jt(e,t){var r,n=t,a;for(typeof e=="string"&&(e=[e]),Ci(t)&&(n=function(i,o){o[t]=dt(i)}),a=e.length,r=0;r<a;r++)pb[e[r]]=n}function Of(e,t){jt(e,function(r,n,a,i){a._w=a._w||{},t(r,a._w,a,i)})}function woe(e,t,r){t!=null&&xt(pb,e)&&pb[e](t,r._a,r,e)}function H0(e){return e%4===0&&e%100!==0||e%400===0}var an=0,fi=1,ja=2,Cr=3,na=4,mi=5,vl=6,_oe=7,koe=8;Fe("Y",0,0,function(){var e=this.year();return e<=9999?Ma(e,4):"+"+e});Fe(0,["YY",2],0,function(){return this.year()%100});Fe(0,["YYYY",4],0,"year");Fe(0,["YYYYY",5],0,"year");Fe(0,["YYYYYY",6,!0],0,"year");Me("Y",F0);Me("YY",Wt,os);Me("YYYY",r1,t1);Me("YYYYY",I0,z0);Me("YYYYYY",I0,z0);jt(["YYYYY","YYYYYY"],an);jt("YYYY",function(e,t){t[an]=e.length===2?Ce.parseTwoDigitYear(e):dt(e)});jt("YY",function(e,t){t[an]=Ce.parseTwoDigitYear(e)});jt("Y",function(e,t){t[an]=parseInt(e,10)});function uh(e){return H0(e)?366:365}Ce.parseTwoDigitYear=function(e){return dt(e)+(dt(e)>68?1900:2e3)};var i3=Qd("FullYear",!0);function joe(){return H0(this.year())}function Qd(e,t){return function(r){return r!=null?(o3(this,e,r),Ce.updateOffset(this,t),this):tf(this,e)}}function tf(e,t){if(!e.isValid())return NaN;var r=e._d,n=e._isUTC;switch(t){case"Milliseconds":return n?r.getUTCMilliseconds():r.getMilliseconds();case"Seconds":return n?r.getUTCSeconds():r.getSeconds();case"Minutes":return n?r.getUTCMinutes():r.getMinutes();case"Hours":return n?r.getUTCHours():r.getHours();case"Date":return n?r.getUTCDate():r.getDate();case"Day":return n?r.getUTCDay():r.getDay();case"Month":return n?r.getUTCMonth():r.getMonth();case"FullYear":return n?r.getUTCFullYear():r.getFullYear();default:return NaN}}function o3(e,t,r){var n,a,i,o,c;if(!(!e.isValid()||isNaN(r))){switch(n=e._d,a=e._isUTC,t){case"Milliseconds":return void(a?n.setUTCMilliseconds(r):n.setMilliseconds(r));case"Seconds":return void(a?n.setUTCSeconds(r):n.setSeconds(r));case"Minutes":return void(a?n.setUTCMinutes(r):n.setMinutes(r));case"Hours":return void(a?n.setUTCHours(r):n.setHours(r));case"Date":return void(a?n.setUTCDate(r):n.setDate(r));case"FullYear":break;default:return}i=r,o=e.month(),c=e.date(),c=c===29&&o===1&&!H0(i)?28:c,a?n.setUTCFullYear(i,o,c):n.setFullYear(i,o,c)}}function Noe(e){return e=Fs(e),za(this[e])?this[e]():this}function Soe(e,t){if(typeof e=="object"){e=e1(e);var r=goe(e),n,a=r.length;for(n=0;n<a;n++)this[r[n].unit](e[r[n].unit])}else if(e=Fs(e),za(this[e]))return this[e](t);return this}function Coe(e,t){return(e%t+t)%t}var or;Array.prototype.indexOf?or=Array.prototype.indexOf:or=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function s1(e,t){if(isNaN(e)||isNaN(t))return NaN;var r=Coe(t,12);return e+=(t-r)/12,r===1?H0(e)?29:28:31-r%7%2}Fe("M",["MM",2],"Mo",function(){return this.month()+1});Fe("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});Fe("MMMM",0,0,function(e){return this.localeData().months(this,e)});Me("M",Wt,Jd);Me("MM",Wt,os);Me("MMM",function(e,t){return t.monthsShortRegex(e)});Me("MMMM",function(e,t){return t.monthsRegex(e)});jt(["M","MM"],function(e,t){t[fi]=dt(e)-1});jt(["MMM","MMMM"],function(e,t,r,n){var a=r._locale.monthsParse(e,n,r._strict);a!=null?t[fi]=a:Je(r).invalidMonth=e});var Eoe="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),l3="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),c3=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Poe=Mf,Toe=Mf;function Moe(e,t){return e?ca(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||c3).test(t)?"format":"standalone"][e.month()]:ca(this._months)?this._months:this._months.standalone}function Ooe(e,t){return e?ca(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[c3.test(t)?"format":"standalone"][e.month()]:ca(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Doe(e,t,r){var n,a,i,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)i=Ra([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(i,"").toLocaleLowerCase();return r?t==="MMM"?(a=or.call(this._shortMonthsParse,o),a!==-1?a:null):(a=or.call(this._longMonthsParse,o),a!==-1?a:null):t==="MMM"?(a=or.call(this._shortMonthsParse,o),a!==-1?a:(a=or.call(this._longMonthsParse,o),a!==-1?a:null)):(a=or.call(this._longMonthsParse,o),a!==-1?a:(a=or.call(this._shortMonthsParse,o),a!==-1?a:null))}function Loe(e,t,r){var n,a,i;if(this._monthsParseExact)return Doe.call(this,e,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(a=Ra([2e3,n]),r&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),!r&&!this._monthsParse[n]&&(i="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[n]=new RegExp(i.replace(".",""),"i")),r&&t==="MMMM"&&this._longMonthsParse[n].test(e))return n;if(r&&t==="MMM"&&this._shortMonthsParse[n].test(e))return n;if(!r&&this._monthsParse[n].test(e))return n}}function d3(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=dt(t);else if(t=e.localeData().monthsParse(t),!Ci(t))return e}var r=t,n=e.date();return n=n<29?n:Math.min(n,s1(e.year(),r)),e._isUTC?e._d.setUTCMonth(r,n):e._d.setMonth(r,n),e}function u3(e){return e!=null?(d3(this,e),Ce.updateOffset(this,!0),this):tf(this,"Month")}function Aoe(){return s1(this.year(),this.month())}function Roe(e){return this._monthsParseExact?(xt(this,"_monthsRegex")||h3.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(xt(this,"_monthsShortRegex")||(this._monthsShortRegex=Poe),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function zoe(e){return this._monthsParseExact?(xt(this,"_monthsRegex")||h3.call(this),e?this._monthsStrictRegex:this._monthsRegex):(xt(this,"_monthsRegex")||(this._monthsRegex=Toe),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function h3(){function e(d,u){return u.length-d.length}var t=[],r=[],n=[],a,i,o,c;for(a=0;a<12;a++)i=Ra([2e3,a]),o=vi(this.monthsShort(i,"")),c=vi(this.months(i,"")),t.push(o),r.push(c),n.push(c),n.push(o);t.sort(e),r.sort(e),n.sort(e),this._monthsRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function $oe(e,t,r,n,a,i,o){var c;return e<100&&e>=0?(c=new Date(e+400,t,r,n,a,i,o),isFinite(c.getFullYear())&&c.setFullYear(e)):c=new Date(e,t,r,n,a,i,o),c}function rf(e){var t,r;return e<100&&e>=0?(r=Array.prototype.slice.call(arguments),r[0]=e+400,t=new Date(Date.UTC.apply(null,r)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function bg(e,t,r){var n=7+t-r,a=(7+rf(e,0,n).getUTCDay()-t)%7;return-a+n-1}function f3(e,t,r,n,a){var i=(7+r-n)%7,o=bg(e,n,a),c=1+7*(t-1)+i+o,d,u;return c<=0?(d=e-1,u=uh(d)+c):c>uh(e)?(d=e+1,u=c-uh(e)):(d=e,u=c),{year:d,dayOfYear:u}}function nf(e,t,r){var n=bg(e.year(),t,r),a=Math.floor((e.dayOfYear()-n-1)/7)+1,i,o;return a<1?(o=e.year()-1,i=a+bi(o,t,r)):a>bi(e.year(),t,r)?(i=a-bi(e.year(),t,r),o=e.year()+1):(o=e.year(),i=a),{week:i,year:o}}function bi(e,t,r){var n=bg(e,t,r),a=bg(e+1,t,r);return(uh(e)-n+a)/7}Fe("w",["ww",2],"wo","week");Fe("W",["WW",2],"Wo","isoWeek");Me("w",Wt,Jd);Me("ww",Wt,os);Me("W",Wt,Jd);Me("WW",Wt,os);Of(["w","ww","W","WW"],function(e,t,r,n){t[n.substr(0,1)]=dt(e)});function Ioe(e){return nf(e,this._week.dow,this._week.doy).week}var Foe={dow:0,doy:6};function Boe(){return this._week.dow}function Hoe(){return this._week.doy}function Woe(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function Uoe(e){var t=nf(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}Fe("d",0,"do","day");Fe("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});Fe("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});Fe("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});Fe("e",0,0,"weekday");Fe("E",0,0,"isoWeekday");Me("d",Wt);Me("e",Wt);Me("E",Wt);Me("dd",function(e,t){return t.weekdaysMinRegex(e)});Me("ddd",function(e,t){return t.weekdaysShortRegex(e)});Me("dddd",function(e,t){return t.weekdaysRegex(e)});Of(["dd","ddd","dddd"],function(e,t,r,n){var a=r._locale.weekdaysParse(e,n,r._strict);a!=null?t.d=a:Je(r).invalidWeekday=e});Of(["d","e","E"],function(e,t,r,n){t[n]=dt(e)});function Voe(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function qoe(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function a1(e,t){return e.slice(t,7).concat(e.slice(0,t))}var Yoe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),m3="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Goe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Zoe=Mf,Koe=Mf,Xoe=Mf;function Joe(e,t){var r=ca(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?a1(r,this._week.dow):e?r[e.day()]:r}function Qoe(e){return e===!0?a1(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function ele(e){return e===!0?a1(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function tle(e,t,r){var n,a,i,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)i=Ra([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(i,"").toLocaleLowerCase();return r?t==="dddd"?(a=or.call(this._weekdaysParse,o),a!==-1?a:null):t==="ddd"?(a=or.call(this._shortWeekdaysParse,o),a!==-1?a:null):(a=or.call(this._minWeekdaysParse,o),a!==-1?a:null):t==="dddd"?(a=or.call(this._weekdaysParse,o),a!==-1||(a=or.call(this._shortWeekdaysParse,o),a!==-1)?a:(a=or.call(this._minWeekdaysParse,o),a!==-1?a:null)):t==="ddd"?(a=or.call(this._shortWeekdaysParse,o),a!==-1||(a=or.call(this._weekdaysParse,o),a!==-1)?a:(a=or.call(this._minWeekdaysParse,o),a!==-1?a:null)):(a=or.call(this._minWeekdaysParse,o),a!==-1||(a=or.call(this._weekdaysParse,o),a!==-1)?a:(a=or.call(this._shortWeekdaysParse,o),a!==-1?a:null))}function rle(e,t,r){var n,a,i;if(this._weekdaysParseExact)return tle.call(this,e,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(a=Ra([2e3,1]).day(n),r&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(a,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(a,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(a,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(i="^"+this.weekdays(a,"")+"|^"+this.weekdaysShort(a,"")+"|^"+this.weekdaysMin(a,""),this._weekdaysParse[n]=new RegExp(i.replace(".",""),"i")),r&&t==="dddd"&&this._fullWeekdaysParse[n].test(e))return n;if(r&&t==="ddd"&&this._shortWeekdaysParse[n].test(e))return n;if(r&&t==="dd"&&this._minWeekdaysParse[n].test(e))return n;if(!r&&this._weekdaysParse[n].test(e))return n}}function nle(e){if(!this.isValid())return e!=null?this:NaN;var t=tf(this,"Day");return e!=null?(e=Voe(e,this.localeData()),this.add(e-t,"d")):t}function sle(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function ale(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=qoe(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function ile(e){return this._weekdaysParseExact?(xt(this,"_weekdaysRegex")||i1.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(xt(this,"_weekdaysRegex")||(this._weekdaysRegex=Zoe),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function ole(e){return this._weekdaysParseExact?(xt(this,"_weekdaysRegex")||i1.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(xt(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Koe),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function lle(e){return this._weekdaysParseExact?(xt(this,"_weekdaysRegex")||i1.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(xt(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Xoe),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function i1(){function e(f,m){return m.length-f.length}var t=[],r=[],n=[],a=[],i,o,c,d,u;for(i=0;i<7;i++)o=Ra([2e3,1]).day(i),c=vi(this.weekdaysMin(o,"")),d=vi(this.weekdaysShort(o,"")),u=vi(this.weekdays(o,"")),t.push(c),r.push(d),n.push(u),a.push(c),a.push(d),a.push(u);t.sort(e),r.sort(e),n.sort(e),a.sort(e),this._weekdaysRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function o1(){return this.hours()%12||12}function cle(){return this.hours()||24}Fe("H",["HH",2],0,"hour");Fe("h",["hh",2],0,o1);Fe("k",["kk",2],0,cle);Fe("hmm",0,0,function(){return""+o1.apply(this)+Ma(this.minutes(),2)});Fe("hmmss",0,0,function(){return""+o1.apply(this)+Ma(this.minutes(),2)+Ma(this.seconds(),2)});Fe("Hmm",0,0,function(){return""+this.hours()+Ma(this.minutes(),2)});Fe("Hmmss",0,0,function(){return""+this.hours()+Ma(this.minutes(),2)+Ma(this.seconds(),2)});function p3(e,t){Fe(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}p3("a",!0);p3("A",!1);function g3(e,t){return t._meridiemParse}Me("a",g3);Me("A",g3);Me("H",Wt,n1);Me("h",Wt,Jd);Me("k",Wt,Jd);Me("HH",Wt,os);Me("hh",Wt,os);Me("kk",Wt,os);Me("hmm",s3);Me("hmmss",a3);Me("Hmm",s3);Me("Hmmss",a3);jt(["H","HH"],Cr);jt(["k","kk"],function(e,t,r){var n=dt(e);t[Cr]=n===24?0:n});jt(["a","A"],function(e,t,r){r._isPm=r._locale.isPM(e),r._meridiem=e});jt(["h","hh"],function(e,t,r){t[Cr]=dt(e),Je(r).bigHour=!0});jt("hmm",function(e,t,r){var n=e.length-2;t[Cr]=dt(e.substr(0,n)),t[na]=dt(e.substr(n)),Je(r).bigHour=!0});jt("hmmss",function(e,t,r){var n=e.length-4,a=e.length-2;t[Cr]=dt(e.substr(0,n)),t[na]=dt(e.substr(n,2)),t[mi]=dt(e.substr(a)),Je(r).bigHour=!0});jt("Hmm",function(e,t,r){var n=e.length-2;t[Cr]=dt(e.substr(0,n)),t[na]=dt(e.substr(n))});jt("Hmmss",function(e,t,r){var n=e.length-4,a=e.length-2;t[Cr]=dt(e.substr(0,n)),t[na]=dt(e.substr(n,2)),t[mi]=dt(e.substr(a))});function dle(e){return(e+"").toLowerCase().charAt(0)==="p"}var ule=/[ap]\.?m?\.?/i,hle=Qd("Hours",!0);function fle(e,t,r){return e>11?r?"pm":"PM":r?"am":"AM"}var x3={calendar:toe,longDateFormat:aoe,invalidDate:ooe,ordinal:coe,dayOfMonthOrdinalParse:doe,relativeTime:hoe,months:Eoe,monthsShort:l3,week:Foe,weekdays:Yoe,weekdaysMin:Goe,weekdaysShort:m3,meridiemParse:ule},qt={},Du={},sf;function mle(e,t){var r,n=Math.min(e.length,t.length);for(r=0;r<n;r+=1)if(e[r]!==t[r])return r;return n}function NS(e){return e&&e.toLowerCase().replace("_","-")}function ple(e){for(var t=0,r,n,a,i;t<e.length;){for(i=NS(e[t]).split("-"),r=i.length,n=NS(e[t+1]),n=n?n.split("-"):null;r>0;){if(a=W0(i.slice(0,r).join("-")),a)return a;if(n&&n.length>=r&&mle(i,n)>=r-1)break;r--}t++}return sf}function gle(e){return!!(e&&e.match("^[^/\\\\]*$"))}function W0(e){var t=null,r;if(qt[e]===void 0&&typeof pp<"u"&&pp&&pp.exports&&gle(e))try{t=sf._abbr,r=require,r("./locale/"+e),No(t)}catch{qt[e]=null}return qt[e]}function No(e,t){var r;return e&&(On(t)?r=Oi(e):r=l1(e,t),r?sf=r:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),sf._abbr}function l1(e,t){if(t!==null){var r,n=x3;if(t.abbr=e,qt[e]!=null)e3("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=qt[e]._config;else if(t.parentLocale!=null)if(qt[t.parentLocale]!=null)n=qt[t.parentLocale]._config;else if(r=W0(t.parentLocale),r!=null)n=r._config;else return Du[t.parentLocale]||(Du[t.parentLocale]=[]),Du[t.parentLocale].push({name:e,config:t}),null;return qt[e]=new J_(fb(n,t)),Du[e]&&Du[e].forEach(function(a){l1(a.name,a.config)}),No(e),qt[e]}else return delete qt[e],null}function xle(e,t){if(t!=null){var r,n,a=x3;qt[e]!=null&&qt[e].parentLocale!=null?qt[e].set(fb(qt[e]._config,t)):(n=W0(e),n!=null&&(a=n._config),t=fb(a,t),n==null&&(t.abbr=e),r=new J_(t),r.parentLocale=qt[e],qt[e]=r),No(e)}else qt[e]!=null&&(qt[e].parentLocale!=null?(qt[e]=qt[e].parentLocale,e===No()&&No(e)):qt[e]!=null&&delete qt[e]);return qt[e]}function Oi(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return sf;if(!ca(e)){if(t=W0(e),t)return t;e=[e]}return ple(e)}function yle(){return mb(qt)}function c1(e){var t,r=e._a;return r&&Je(e).overflow===-2&&(t=r[fi]<0||r[fi]>11?fi:r[ja]<1||r[ja]>s1(r[an],r[fi])?ja:r[Cr]<0||r[Cr]>24||r[Cr]===24&&(r[na]!==0||r[mi]!==0||r[vl]!==0)?Cr:r[na]<0||r[na]>59?na:r[mi]<0||r[mi]>59?mi:r[vl]<0||r[vl]>999?vl:-1,Je(e)._overflowDayOfYear&&(t<an||t>ja)&&(t=ja),Je(e)._overflowWeeks&&t===-1&&(t=_oe),Je(e)._overflowWeekday&&t===-1&&(t=koe),Je(e).overflow=t),e}var vle=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ble=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,wle=/Z|[+-]\d\d(?::?\d\d)?/,$m=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],vy=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],_le=/^\/?Date\((-?\d+)/i,kle=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,jle={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function y3(e){var t,r,n=e._i,a=vle.exec(n)||ble.exec(n),i,o,c,d,u=$m.length,f=vy.length;if(a){for(Je(e).iso=!0,t=0,r=u;t<r;t++)if($m[t][1].exec(a[1])){o=$m[t][0],i=$m[t][2]!==!1;break}if(o==null){e._isValid=!1;return}if(a[3]){for(t=0,r=f;t<r;t++)if(vy[t][1].exec(a[3])){c=(a[2]||" ")+vy[t][0];break}if(c==null){e._isValid=!1;return}}if(!i&&c!=null){e._isValid=!1;return}if(a[4])if(wle.exec(a[4]))d="Z";else{e._isValid=!1;return}e._f=o+(c||"")+(d||""),u1(e)}else e._isValid=!1}function Nle(e,t,r,n,a,i){var o=[Sle(e),l3.indexOf(t),parseInt(r,10),parseInt(n,10),parseInt(a,10)];return i&&o.push(parseInt(i,10)),o}function Sle(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Cle(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Ele(e,t,r){if(e){var n=m3.indexOf(e),a=new Date(t[0],t[1],t[2]).getDay();if(n!==a)return Je(r).weekdayMismatch=!0,r._isValid=!1,!1}return!0}function Ple(e,t,r){if(e)return jle[e];if(t)return 0;var n=parseInt(r,10),a=n%100,i=(n-a)/100;return i*60+a}function v3(e){var t=kle.exec(Cle(e._i)),r;if(t){if(r=Nle(t[4],t[3],t[2],t[5],t[6],t[7]),!Ele(t[1],r,e))return;e._a=r,e._tzm=Ple(t[8],t[9],t[10]),e._d=rf.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),Je(e).rfc2822=!0}else e._isValid=!1}function Tle(e){var t=_le.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(y3(e),e._isValid===!1)delete e._isValid;else return;if(v3(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:Ce.createFromInputFallback(e)}Ce.createFromInputFallback=Is("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Rc(e,t,r){return e??t??r}function Mle(e){var t=new Date(Ce.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function d1(e){var t,r,n=[],a,i,o;if(!e._d){for(a=Mle(e),e._w&&e._a[ja]==null&&e._a[fi]==null&&Ole(e),e._dayOfYear!=null&&(o=Rc(e._a[an],a[an]),(e._dayOfYear>uh(o)||e._dayOfYear===0)&&(Je(e)._overflowDayOfYear=!0),r=rf(o,0,e._dayOfYear),e._a[fi]=r.getUTCMonth(),e._a[ja]=r.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=n[t]=a[t];for(;t<7;t++)e._a[t]=n[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[Cr]===24&&e._a[na]===0&&e._a[mi]===0&&e._a[vl]===0&&(e._nextDay=!0,e._a[Cr]=0),e._d=(e._useUTC?rf:$oe).apply(null,n),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Cr]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==i&&(Je(e).weekdayMismatch=!0)}}function Ole(e){var t,r,n,a,i,o,c,d,u;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(i=1,o=4,r=Rc(t.GG,e._a[an],nf(Bt(),1,4).year),n=Rc(t.W,1),a=Rc(t.E,1),(a<1||a>7)&&(d=!0)):(i=e._locale._week.dow,o=e._locale._week.doy,u=nf(Bt(),i,o),r=Rc(t.gg,e._a[an],u.year),n=Rc(t.w,u.week),t.d!=null?(a=t.d,(a<0||a>6)&&(d=!0)):t.e!=null?(a=t.e+i,(t.e<0||t.e>6)&&(d=!0)):a=i),n<1||n>bi(r,i,o)?Je(e)._overflowWeeks=!0:d!=null?Je(e)._overflowWeekday=!0:(c=f3(r,n,a,i,o),e._a[an]=c.year,e._dayOfYear=c.dayOfYear)}Ce.ISO_8601=function(){};Ce.RFC_2822=function(){};function u1(e){if(e._f===Ce.ISO_8601){y3(e);return}if(e._f===Ce.RFC_2822){v3(e);return}e._a=[],Je(e).empty=!0;var t=""+e._i,r,n,a,i,o,c=t.length,d=0,u,f;for(a=t3(e._f,e._locale).match(Q_)||[],f=a.length,r=0;r<f;r++)i=a[r],n=(t.match(voe(i,e))||[])[0],n&&(o=t.substr(0,t.indexOf(n)),o.length>0&&Je(e).unusedInput.push(o),t=t.slice(t.indexOf(n)+n.length),d+=n.length),ld[i]?(n?Je(e).empty=!1:Je(e).unusedTokens.push(i),woe(i,n,e)):e._strict&&!n&&Je(e).unusedTokens.push(i);Je(e).charsLeftOver=c-d,t.length>0&&Je(e).unusedInput.push(t),e._a[Cr]<=12&&Je(e).bigHour===!0&&e._a[Cr]>0&&(Je(e).bigHour=void 0),Je(e).parsedDateParts=e._a.slice(0),Je(e).meridiem=e._meridiem,e._a[Cr]=Dle(e._locale,e._a[Cr],e._meridiem),u=Je(e).era,u!==null&&(e._a[an]=e._locale.erasConvertYear(u,e._a[an])),d1(e),c1(e)}function Dle(e,t,r){var n;return r==null?t:e.meridiemHour!=null?e.meridiemHour(t,r):(e.isPM!=null&&(n=e.isPM(r),n&&t<12&&(t+=12),!n&&t===12&&(t=0)),t)}function Lle(e){var t,r,n,a,i,o,c=!1,d=e._f.length;if(d===0){Je(e).invalidFormat=!0,e._d=new Date(NaN);return}for(a=0;a<d;a++)i=0,o=!1,t=X_({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[a],u1(t),K_(t)&&(o=!0),i+=Je(t).charsLeftOver,i+=Je(t).unusedTokens.length*10,Je(t).score=i,c?i<n&&(n=i,r=t):(n==null||i<n||o)&&(n=i,r=t,o&&(c=!0));fo(e,r||t)}function Ale(e){if(!e._d){var t=e1(e._i),r=t.day===void 0?t.date:t.day;e._a=JT([t.year,t.month,r,t.hour,t.minute,t.second,t.millisecond],function(n){return n&&parseInt(n,10)}),d1(e)}}function Rle(e){var t=new Tf(c1(b3(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function b3(e){var t=e._i,r=e._f;return e._locale=e._locale||Oi(e._l),t===null||r===void 0&&t===""?R0({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),da(t)?new Tf(c1(t)):(Pf(t)?e._d=t:ca(r)?Lle(e):r?u1(e):zle(e),K_(e)||(e._d=null),e))}function zle(e){var t=e._i;On(t)?e._d=new Date(Ce.now()):Pf(t)?e._d=new Date(t.valueOf()):typeof t=="string"?Tle(e):ca(t)?(e._a=JT(t.slice(0),function(r){return parseInt(r,10)}),d1(e)):Pl(t)?Ale(e):Ci(t)?e._d=new Date(t):Ce.createFromInputFallback(e)}function w3(e,t,r,n,a){var i={};return(t===!0||t===!1)&&(n=t,t=void 0),(r===!0||r===!1)&&(n=r,r=void 0),(Pl(e)&&Z_(e)||ca(e)&&e.length===0)&&(e=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=a,i._l=r,i._i=e,i._f=t,i._strict=n,Rle(i)}function Bt(e,t,r,n){return w3(e,t,r,n,!1)}var $le=Is("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Bt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:R0()}),Ile=Is("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Bt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:R0()});function _3(e,t){var r,n;if(t.length===1&&ca(t[0])&&(t=t[0]),!t.length)return Bt();for(r=t[0],n=1;n<t.length;++n)(!t[n].isValid()||t[n][e](r))&&(r=t[n]);return r}function Fle(){var e=[].slice.call(arguments,0);return _3("isBefore",e)}function Ble(){var e=[].slice.call(arguments,0);return _3("isAfter",e)}var Hle=function(){return Date.now?Date.now():+new Date},Lu=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Wle(e){var t,r=!1,n,a=Lu.length;for(t in e)if(xt(e,t)&&!(or.call(Lu,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(n=0;n<a;++n)if(e[Lu[n]]){if(r)return!1;parseFloat(e[Lu[n]])!==dt(e[Lu[n]])&&(r=!0)}return!0}function Ule(){return this._isValid}function Vle(){return ua(NaN)}function U0(e){var t=e1(e),r=t.year||0,n=t.quarter||0,a=t.month||0,i=t.week||t.isoWeek||0,o=t.day||0,c=t.hour||0,d=t.minute||0,u=t.second||0,f=t.millisecond||0;this._isValid=Wle(t),this._milliseconds=+f+u*1e3+d*6e4+c*1e3*60*60,this._days=+o+i*7,this._months=+a+n*3+r*12,this._data={},this._locale=Oi(),this._bubble()}function fp(e){return e instanceof U0}function gb(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function qle(e,t,r){var n=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),i=0,o;for(o=0;o<n;o++)dt(e[o])!==dt(t[o])&&i++;return i+a}function k3(e,t){Fe(e,0,0,function(){var r=this.utcOffset(),n="+";return r<0&&(r=-r,n="-"),n+Ma(~~(r/60),2)+t+Ma(~~r%60,2)})}k3("Z",":");k3("ZZ","");Me("Z",B0);Me("ZZ",B0);jt(["Z","ZZ"],function(e,t,r){r._useUTC=!0,r._tzm=h1(B0,e)});var Yle=/([\+\-]|\d\d)/gi;function h1(e,t){var r=(t||"").match(e),n,a,i;return r===null?null:(n=r[r.length-1]||[],a=(n+"").match(Yle)||["-",0,0],i=+(a[1]*60)+dt(a[2]),i===0?0:a[0]==="+"?i:-i)}function f1(e,t){var r,n;return t._isUTC?(r=t.clone(),n=(da(e)||Pf(e)?e.valueOf():Bt(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+n),Ce.updateOffset(r,!1),r):Bt(e).local()}function xb(e){return-Math.round(e._d.getTimezoneOffset())}Ce.updateOffset=function(){};function Gle(e,t,r){var n=this._offset||0,a;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=h1(B0,e),e===null)return this}else Math.abs(e)<16&&!r&&(e=e*60);return!this._isUTC&&t&&(a=xb(this)),this._offset=e,this._isUTC=!0,a!=null&&this.add(a,"m"),n!==e&&(!t||this._changeInProgress?S3(this,ua(e-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Ce.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?n:xb(this)}function Zle(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Kle(e){return this.utcOffset(0,e)}function Xle(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(xb(this),"m")),this}function Jle(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=h1(xoe,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Qle(e){return this.isValid()?(e=e?Bt(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function ece(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function tce(){if(!On(this._isDSTShifted))return this._isDSTShifted;var e={},t;return X_(e,this),e=b3(e),e._a?(t=e._isUTC?Ra(e._a):Bt(e._a),this._isDSTShifted=this.isValid()&&qle(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function rce(){return this.isValid()?!this._isUTC:!1}function nce(){return this.isValid()?this._isUTC:!1}function j3(){return this.isValid()?this._isUTC&&this._offset===0:!1}var sce=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,ace=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function ua(e,t){var r=e,n=null,a,i,o;return fp(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:Ci(e)||!isNaN(+e)?(r={},t?r[t]=+e:r.milliseconds=+e):(n=sce.exec(e))?(a=n[1]==="-"?-1:1,r={y:0,d:dt(n[ja])*a,h:dt(n[Cr])*a,m:dt(n[na])*a,s:dt(n[mi])*a,ms:dt(gb(n[vl]*1e3))*a}):(n=ace.exec(e))?(a=n[1]==="-"?-1:1,r={y:il(n[2],a),M:il(n[3],a),w:il(n[4],a),d:il(n[5],a),h:il(n[6],a),m:il(n[7],a),s:il(n[8],a)}):r==null?r={}:typeof r=="object"&&("from"in r||"to"in r)&&(o=ice(Bt(r.from),Bt(r.to)),r={},r.ms=o.milliseconds,r.M=o.months),i=new U0(r),fp(e)&&xt(e,"_locale")&&(i._locale=e._locale),fp(e)&&xt(e,"_isValid")&&(i._isValid=e._isValid),i}ua.fn=U0.prototype;ua.invalid=Vle;function il(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function SS(e,t){var r={};return r.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(r.months,"M").isAfter(t)&&--r.months,r.milliseconds=+t-+e.clone().add(r.months,"M"),r}function ice(e,t){var r;return e.isValid()&&t.isValid()?(t=f1(t,e),e.isBefore(t)?r=SS(e,t):(r=SS(t,e),r.milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}function N3(e,t){return function(r,n){var a,i;return n!==null&&!isNaN(+n)&&(e3(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=r,r=n,n=i),a=ua(r,n),S3(this,a,e),this}}function S3(e,t,r,n){var a=t._milliseconds,i=gb(t._days),o=gb(t._months);e.isValid()&&(n=n??!0,o&&d3(e,tf(e,"Month")+o*r),i&&o3(e,"Date",tf(e,"Date")+i*r),a&&e._d.setTime(e._d.valueOf()+a*r),n&&Ce.updateOffset(e,i||o))}var oce=N3(1,"add"),lce=N3(-1,"subtract");function C3(e){return typeof e=="string"||e instanceof String}function cce(e){return da(e)||Pf(e)||C3(e)||Ci(e)||uce(e)||dce(e)||e===null||e===void 0}function dce(e){var t=Pl(e)&&!Z_(e),r=!1,n=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],a,i,o=n.length;for(a=0;a<o;a+=1)i=n[a],r=r||xt(e,i);return t&&r}function uce(e){var t=ca(e),r=!1;return t&&(r=e.filter(function(n){return!Ci(n)&&C3(e)}).length===0),t&&r}function hce(e){var t=Pl(e)&&!Z_(e),r=!1,n=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],a,i;for(a=0;a<n.length;a+=1)i=n[a],r=r||xt(e,i);return t&&r}function fce(e,t){var r=e.diff(t,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"}function mce(e,t){arguments.length===1&&(arguments[0]?cce(arguments[0])?(e=arguments[0],t=void 0):hce(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var r=e||Bt(),n=f1(r,this).startOf("day"),a=Ce.calendarFormat(this,n)||"sameElse",i=t&&(za(t[a])?t[a].call(this,r):t[a]);return this.format(i||this.localeData().calendar(a,this,Bt(r)))}function pce(){return new Tf(this)}function gce(e,t){var r=da(e)?e:Bt(e);return this.isValid()&&r.isValid()?(t=Fs(t)||"millisecond",t==="millisecond"?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(t).valueOf()):!1}function xce(e,t){var r=da(e)?e:Bt(e);return this.isValid()&&r.isValid()?(t=Fs(t)||"millisecond",t==="millisecond"?this.valueOf()<r.valueOf():this.clone().endOf(t).valueOf()<r.valueOf()):!1}function yce(e,t,r,n){var a=da(e)?e:Bt(e),i=da(t)?t:Bt(t);return this.isValid()&&a.isValid()&&i.isValid()?(n=n||"()",(n[0]==="("?this.isAfter(a,r):!this.isBefore(a,r))&&(n[1]===")"?this.isBefore(i,r):!this.isAfter(i,r))):!1}function vce(e,t){var r=da(e)?e:Bt(e),n;return this.isValid()&&r.isValid()?(t=Fs(t)||"millisecond",t==="millisecond"?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf())):!1}function bce(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function wce(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function _ce(e,t,r){var n,a,i;if(!this.isValid())return NaN;if(n=f1(e,this),!n.isValid())return NaN;switch(a=(n.utcOffset()-this.utcOffset())*6e4,t=Fs(t),t){case"year":i=mp(this,n)/12;break;case"month":i=mp(this,n);break;case"quarter":i=mp(this,n)/3;break;case"second":i=(this-n)/1e3;break;case"minute":i=(this-n)/6e4;break;case"hour":i=(this-n)/36e5;break;case"day":i=(this-n-a)/864e5;break;case"week":i=(this-n-a)/6048e5;break;default:i=this-n}return r?i:Ns(i)}function mp(e,t){if(e.date()<t.date())return-mp(t,e);var r=(t.year()-e.year())*12+(t.month()-e.month()),n=e.clone().add(r,"months"),a,i;return t-n<0?(a=e.clone().add(r-1,"months"),i=(t-n)/(n-a)):(a=e.clone().add(r+1,"months"),i=(t-n)/(a-n)),-(r+i)||0}Ce.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";Ce.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function kce(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function jce(e){if(!this.isValid())return null;var t=e!==!0,r=t?this.clone().utc():this;return r.year()<0||r.year()>9999?hp(r,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):za(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",hp(r,"Z")):hp(r,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Nce(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",r,n,a,i;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),r="["+e+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",a="-MM-DD[T]HH:mm:ss.SSS",i=t+'[")]',this.format(r+n+a+i)}function Sce(e){e||(e=this.isUtc()?Ce.defaultFormatUtc:Ce.defaultFormat);var t=hp(this,e);return this.localeData().postformat(t)}function Cce(e,t){return this.isValid()&&(da(e)&&e.isValid()||Bt(e).isValid())?ua({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Ece(e){return this.from(Bt(),e)}function Pce(e,t){return this.isValid()&&(da(e)&&e.isValid()||Bt(e).isValid())?ua({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Tce(e){return this.to(Bt(),e)}function E3(e){var t;return e===void 0?this._locale._abbr:(t=Oi(e),t!=null&&(this._locale=t),this)}var P3=Is("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function T3(){return this._locale}var wg=1e3,cd=60*wg,_g=60*cd,M3=(365*400+97)*24*_g;function dd(e,t){return(e%t+t)%t}function O3(e,t,r){return e<100&&e>=0?new Date(e+400,t,r)-M3:new Date(e,t,r).valueOf()}function D3(e,t,r){return e<100&&e>=0?Date.UTC(e+400,t,r)-M3:Date.UTC(e,t,r)}function Mce(e){var t,r;if(e=Fs(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?D3:O3,e){case"year":t=r(this.year(),0,1);break;case"quarter":t=r(this.year(),this.month()-this.month()%3,1);break;case"month":t=r(this.year(),this.month(),1);break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=r(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=dd(t+(this._isUTC?0:this.utcOffset()*cd),_g);break;case"minute":t=this._d.valueOf(),t-=dd(t,cd);break;case"second":t=this._d.valueOf(),t-=dd(t,wg);break}return this._d.setTime(t),Ce.updateOffset(this,!0),this}function Oce(e){var t,r;if(e=Fs(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?D3:O3,e){case"year":t=r(this.year()+1,0,1)-1;break;case"quarter":t=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=r(this.year(),this.month()+1,1)-1;break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=_g-dd(t+(this._isUTC?0:this.utcOffset()*cd),_g)-1;break;case"minute":t=this._d.valueOf(),t+=cd-dd(t,cd)-1;break;case"second":t=this._d.valueOf(),t+=wg-dd(t,wg)-1;break}return this._d.setTime(t),Ce.updateOffset(this,!0),this}function Dce(){return this._d.valueOf()-(this._offset||0)*6e4}function Lce(){return Math.floor(this.valueOf()/1e3)}function Ace(){return new Date(this.valueOf())}function Rce(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function zce(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function $ce(){return this.isValid()?this.toISOString():null}function Ice(){return K_(this)}function Fce(){return fo({},Je(this))}function Bce(){return Je(this).overflow}function Hce(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Fe("N",0,0,"eraAbbr");Fe("NN",0,0,"eraAbbr");Fe("NNN",0,0,"eraAbbr");Fe("NNNN",0,0,"eraName");Fe("NNNNN",0,0,"eraNarrow");Fe("y",["y",1],"yo","eraYear");Fe("y",["yy",2],0,"eraYear");Fe("y",["yyy",3],0,"eraYear");Fe("y",["yyyy",4],0,"eraYear");Me("N",m1);Me("NN",m1);Me("NNN",m1);Me("NNNN",Qce);Me("NNNNN",ede);jt(["N","NN","NNN","NNNN","NNNNN"],function(e,t,r,n){var a=r._locale.erasParse(e,n,r._strict);a?Je(r).era=a:Je(r).invalidEra=e});Me("y",Xd);Me("yy",Xd);Me("yyy",Xd);Me("yyyy",Xd);Me("yo",tde);jt(["y","yy","yyy","yyyy"],an);jt(["yo"],function(e,t,r,n){var a;r._locale._eraYearOrdinalRegex&&(a=e.match(r._locale._eraYearOrdinalRegex)),r._locale.eraYearOrdinalParse?t[an]=r._locale.eraYearOrdinalParse(e,a):t[an]=parseInt(e,10)});function Wce(e,t){var r,n,a,i=this._eras||Oi("en")._eras;for(r=0,n=i.length;r<n;++r){switch(typeof i[r].since){case"string":a=Ce(i[r].since).startOf("day"),i[r].since=a.valueOf();break}switch(typeof i[r].until){case"undefined":i[r].until=1/0;break;case"string":a=Ce(i[r].until).startOf("day").valueOf(),i[r].until=a.valueOf();break}}return i}function Uce(e,t,r){var n,a,i=this.eras(),o,c,d;for(e=e.toUpperCase(),n=0,a=i.length;n<a;++n)if(o=i[n].name.toUpperCase(),c=i[n].abbr.toUpperCase(),d=i[n].narrow.toUpperCase(),r)switch(t){case"N":case"NN":case"NNN":if(c===e)return i[n];break;case"NNNN":if(o===e)return i[n];break;case"NNNNN":if(d===e)return i[n];break}else if([o,c,d].indexOf(e)>=0)return i[n]}function Vce(e,t){var r=e.since<=e.until?1:-1;return t===void 0?Ce(e.since).year():Ce(e.since).year()+(t-e.offset)*r}function qce(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].name;return""}function Yce(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].narrow;return""}function Gce(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].abbr;return""}function Zce(){var e,t,r,n,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(r=a[e].since<=a[e].until?1:-1,n=this.clone().startOf("day").valueOf(),a[e].since<=n&&n<=a[e].until||a[e].until<=n&&n<=a[e].since)return(this.year()-Ce(a[e].since).year())*r+a[e].offset;return this.year()}function Kce(e){return xt(this,"_erasNameRegex")||p1.call(this),e?this._erasNameRegex:this._erasRegex}function Xce(e){return xt(this,"_erasAbbrRegex")||p1.call(this),e?this._erasAbbrRegex:this._erasRegex}function Jce(e){return xt(this,"_erasNarrowRegex")||p1.call(this),e?this._erasNarrowRegex:this._erasRegex}function m1(e,t){return t.erasAbbrRegex(e)}function Qce(e,t){return t.erasNameRegex(e)}function ede(e,t){return t.erasNarrowRegex(e)}function tde(e,t){return t._eraYearOrdinalRegex||Xd}function p1(){var e=[],t=[],r=[],n=[],a,i,o,c,d,u=this.eras();for(a=0,i=u.length;a<i;++a)o=vi(u[a].name),c=vi(u[a].abbr),d=vi(u[a].narrow),t.push(o),e.push(c),r.push(d),n.push(o),n.push(c),n.push(d);this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}Fe(0,["gg",2],0,function(){return this.weekYear()%100});Fe(0,["GG",2],0,function(){return this.isoWeekYear()%100});function V0(e,t){Fe(0,[e,e.length],0,t)}V0("gggg","weekYear");V0("ggggg","weekYear");V0("GGGG","isoWeekYear");V0("GGGGG","isoWeekYear");Me("G",F0);Me("g",F0);Me("GG",Wt,os);Me("gg",Wt,os);Me("GGGG",r1,t1);Me("gggg",r1,t1);Me("GGGGG",I0,z0);Me("ggggg",I0,z0);Of(["gggg","ggggg","GGGG","GGGGG"],function(e,t,r,n){t[n.substr(0,2)]=dt(e)});Of(["gg","GG"],function(e,t,r,n){t[n]=Ce.parseTwoDigitYear(e)});function rde(e){return L3.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function nde(e){return L3.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function sde(){return bi(this.year(),1,4)}function ade(){return bi(this.isoWeekYear(),1,4)}function ide(){var e=this.localeData()._week;return bi(this.year(),e.dow,e.doy)}function ode(){var e=this.localeData()._week;return bi(this.weekYear(),e.dow,e.doy)}function L3(e,t,r,n,a){var i;return e==null?nf(this,n,a).year:(i=bi(e,n,a),t>i&&(t=i),lde.call(this,e,t,r,n,a))}function lde(e,t,r,n,a){var i=f3(e,t,r,n,a),o=rf(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}Fe("Q",0,"Qo","quarter");Me("Q",r3);jt("Q",function(e,t){t[fi]=(dt(e)-1)*3});function cde(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}Fe("D",["DD",2],"Do","date");Me("D",Wt,Jd);Me("DD",Wt,os);Me("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});jt(["D","DD"],ja);jt("Do",function(e,t){t[ja]=dt(e.match(Wt)[0])});var A3=Qd("Date",!0);Fe("DDD",["DDDD",3],"DDDo","dayOfYear");Me("DDD",$0);Me("DDDD",n3);jt(["DDD","DDDD"],function(e,t,r){r._dayOfYear=dt(e)});function dde(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}Fe("m",["mm",2],0,"minute");Me("m",Wt,n1);Me("mm",Wt,os);jt(["m","mm"],na);var ude=Qd("Minutes",!1);Fe("s",["ss",2],0,"second");Me("s",Wt,n1);Me("ss",Wt,os);jt(["s","ss"],mi);var hde=Qd("Seconds",!1);Fe("S",0,0,function(){return~~(this.millisecond()/100)});Fe(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Fe(0,["SSS",3],0,"millisecond");Fe(0,["SSSS",4],0,function(){return this.millisecond()*10});Fe(0,["SSSSS",5],0,function(){return this.millisecond()*100});Fe(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Fe(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Fe(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Fe(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Me("S",$0,r3);Me("SS",$0,os);Me("SSS",$0,n3);var mo,R3;for(mo="SSSS";mo.length<=9;mo+="S")Me(mo,Xd);function fde(e,t){t[vl]=dt(("0."+e)*1e3)}for(mo="S";mo.length<=9;mo+="S")jt(mo,fde);R3=Qd("Milliseconds",!1);Fe("z",0,0,"zoneAbbr");Fe("zz",0,0,"zoneName");function mde(){return this._isUTC?"UTC":""}function pde(){return this._isUTC?"Coordinated Universal Time":""}var we=Tf.prototype;we.add=oce;we.calendar=mce;we.clone=pce;we.diff=_ce;we.endOf=Oce;we.format=Sce;we.from=Cce;we.fromNow=Ece;we.to=Pce;we.toNow=Tce;we.get=Noe;we.invalidAt=Bce;we.isAfter=gce;we.isBefore=xce;we.isBetween=yce;we.isSame=vce;we.isSameOrAfter=bce;we.isSameOrBefore=wce;we.isValid=Ice;we.lang=P3;we.locale=E3;we.localeData=T3;we.max=Ile;we.min=$le;we.parsingFlags=Fce;we.set=Soe;we.startOf=Mce;we.subtract=lce;we.toArray=Rce;we.toObject=zce;we.toDate=Ace;we.toISOString=jce;we.inspect=Nce;typeof Symbol<"u"&&Symbol.for!=null&&(we[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});we.toJSON=$ce;we.toString=kce;we.unix=Lce;we.valueOf=Dce;we.creationData=Hce;we.eraName=qce;we.eraNarrow=Yce;we.eraAbbr=Gce;we.eraYear=Zce;we.year=i3;we.isLeapYear=joe;we.weekYear=rde;we.isoWeekYear=nde;we.quarter=we.quarters=cde;we.month=u3;we.daysInMonth=Aoe;we.week=we.weeks=Woe;we.isoWeek=we.isoWeeks=Uoe;we.weeksInYear=ide;we.weeksInWeekYear=ode;we.isoWeeksInYear=sde;we.isoWeeksInISOWeekYear=ade;we.date=A3;we.day=we.days=nle;we.weekday=sle;we.isoWeekday=ale;we.dayOfYear=dde;we.hour=we.hours=hle;we.minute=we.minutes=ude;we.second=we.seconds=hde;we.millisecond=we.milliseconds=R3;we.utcOffset=Gle;we.utc=Kle;we.local=Xle;we.parseZone=Jle;we.hasAlignedHourOffset=Qle;we.isDST=ece;we.isLocal=rce;we.isUtcOffset=nce;we.isUtc=j3;we.isUTC=j3;we.zoneAbbr=mde;we.zoneName=pde;we.dates=Is("dates accessor is deprecated. Use date instead.",A3);we.months=Is("months accessor is deprecated. Use month instead",u3);we.years=Is("years accessor is deprecated. Use year instead",i3);we.zone=Is("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Zle);we.isDSTShifted=Is("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",tce);function gde(e){return Bt(e*1e3)}function xde(){return Bt.apply(null,arguments).parseZone()}function z3(e){return e}var yt=J_.prototype;yt.calendar=roe;yt.longDateFormat=ioe;yt.invalidDate=loe;yt.ordinal=uoe;yt.preparse=z3;yt.postformat=z3;yt.relativeTime=foe;yt.pastFuture=moe;yt.set=eoe;yt.eras=Wce;yt.erasParse=Uce;yt.erasConvertYear=Vce;yt.erasAbbrRegex=Xce;yt.erasNameRegex=Kce;yt.erasNarrowRegex=Jce;yt.months=Moe;yt.monthsShort=Ooe;yt.monthsParse=Loe;yt.monthsRegex=zoe;yt.monthsShortRegex=Roe;yt.week=Ioe;yt.firstDayOfYear=Hoe;yt.firstDayOfWeek=Boe;yt.weekdays=Joe;yt.weekdaysMin=ele;yt.weekdaysShort=Qoe;yt.weekdaysParse=rle;yt.weekdaysRegex=ile;yt.weekdaysShortRegex=ole;yt.weekdaysMinRegex=lle;yt.isPM=dle;yt.meridiem=fle;function kg(e,t,r,n){var a=Oi(),i=Ra().set(n,t);return a[r](i,e)}function $3(e,t,r){if(Ci(e)&&(t=e,e=void 0),e=e||"",t!=null)return kg(e,t,r,"month");var n,a=[];for(n=0;n<12;n++)a[n]=kg(e,n,r,"month");return a}function g1(e,t,r,n){typeof e=="boolean"?(Ci(t)&&(r=t,t=void 0),t=t||""):(t=e,r=t,e=!1,Ci(t)&&(r=t,t=void 0),t=t||"");var a=Oi(),i=e?a._week.dow:0,o,c=[];if(r!=null)return kg(t,(r+i)%7,n,"day");for(o=0;o<7;o++)c[o]=kg(t,(o+i)%7,n,"day");return c}function yde(e,t){return $3(e,t,"months")}function vde(e,t){return $3(e,t,"monthsShort")}function bde(e,t,r){return g1(e,t,r,"weekdays")}function wde(e,t,r){return g1(e,t,r,"weekdaysShort")}function _de(e,t,r){return g1(e,t,r,"weekdaysMin")}No("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,r=dt(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+r}});Ce.lang=Is("moment.lang is deprecated. Use moment.locale instead.",No);Ce.langData=Is("moment.langData is deprecated. Use moment.localeData instead.",Oi);var ri=Math.abs;function kde(){var e=this._data;return this._milliseconds=ri(this._milliseconds),this._days=ri(this._days),this._months=ri(this._months),e.milliseconds=ri(e.milliseconds),e.seconds=ri(e.seconds),e.minutes=ri(e.minutes),e.hours=ri(e.hours),e.months=ri(e.months),e.years=ri(e.years),this}function I3(e,t,r,n){var a=ua(t,r);return e._milliseconds+=n*a._milliseconds,e._days+=n*a._days,e._months+=n*a._months,e._bubble()}function jde(e,t){return I3(this,e,t,1)}function Nde(e,t){return I3(this,e,t,-1)}function CS(e){return e<0?Math.floor(e):Math.ceil(e)}function Sde(){var e=this._milliseconds,t=this._days,r=this._months,n=this._data,a,i,o,c,d;return e>=0&&t>=0&&r>=0||e<=0&&t<=0&&r<=0||(e+=CS(yb(r)+t)*864e5,t=0,r=0),n.milliseconds=e%1e3,a=Ns(e/1e3),n.seconds=a%60,i=Ns(a/60),n.minutes=i%60,o=Ns(i/60),n.hours=o%24,t+=Ns(o/24),d=Ns(F3(t)),r+=d,t-=CS(yb(d)),c=Ns(r/12),r%=12,n.days=t,n.months=r,n.years=c,this}function F3(e){return e*4800/146097}function yb(e){return e*146097/4800}function Cde(e){if(!this.isValid())return NaN;var t,r,n=this._milliseconds;if(e=Fs(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+n/864e5,r=this._months+F3(t),e){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(t=this._days+Math.round(yb(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return t*24+n/36e5;case"minute":return t*1440+n/6e4;case"second":return t*86400+n/1e3;case"millisecond":return Math.floor(t*864e5)+n;default:throw new Error("Unknown unit "+e)}}function Di(e){return function(){return this.as(e)}}var B3=Di("ms"),Ede=Di("s"),Pde=Di("m"),Tde=Di("h"),Mde=Di("d"),Ode=Di("w"),Dde=Di("M"),Lde=Di("Q"),Ade=Di("y"),Rde=B3;function zde(){return ua(this)}function $de(e){return e=Fs(e),this.isValid()?this[e+"s"]():NaN}function Jl(e){return function(){return this.isValid()?this._data[e]:NaN}}var Ide=Jl("milliseconds"),Fde=Jl("seconds"),Bde=Jl("minutes"),Hde=Jl("hours"),Wde=Jl("days"),Ude=Jl("months"),Vde=Jl("years");function qde(){return Ns(this.days()/7)}var ii=Math.round,Kc={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Yde(e,t,r,n,a){return a.relativeTime(t||1,!!r,e,n)}function Gde(e,t,r,n){var a=ua(e).abs(),i=ii(a.as("s")),o=ii(a.as("m")),c=ii(a.as("h")),d=ii(a.as("d")),u=ii(a.as("M")),f=ii(a.as("w")),m=ii(a.as("y")),p=i<=r.ss&&["s",i]||i<r.s&&["ss",i]||o<=1&&["m"]||o<r.m&&["mm",o]||c<=1&&["h"]||c<r.h&&["hh",c]||d<=1&&["d"]||d<r.d&&["dd",d];return r.w!=null&&(p=p||f<=1&&["w"]||f<r.w&&["ww",f]),p=p||u<=1&&["M"]||u<r.M&&["MM",u]||m<=1&&["y"]||["yy",m],p[2]=t,p[3]=+e>0,p[4]=n,Yde.apply(null,p)}function Zde(e){return e===void 0?ii:typeof e=="function"?(ii=e,!0):!1}function Kde(e,t){return Kc[e]===void 0?!1:t===void 0?Kc[e]:(Kc[e]=t,e==="s"&&(Kc.ss=t-1),!0)}function Xde(e,t){if(!this.isValid())return this.localeData().invalidDate();var r=!1,n=Kc,a,i;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(r=e),typeof t=="object"&&(n=Object.assign({},Kc,t),t.s!=null&&t.ss==null&&(n.ss=t.s-1)),a=this.localeData(),i=Gde(this,!r,n,a),r&&(i=a.pastFuture(+this,i)),a.postformat(i)}var by=Math.abs;function Dc(e){return(e>0)-(e<0)||+e}function q0(){if(!this.isValid())return this.localeData().invalidDate();var e=by(this._milliseconds)/1e3,t=by(this._days),r=by(this._months),n,a,i,o,c=this.asSeconds(),d,u,f,m;return c?(n=Ns(e/60),a=Ns(n/60),e%=60,n%=60,i=Ns(r/12),r%=12,o=e?e.toFixed(3).replace(/\.?0+$/,""):"",d=c<0?"-":"",u=Dc(this._months)!==Dc(c)?"-":"",f=Dc(this._days)!==Dc(c)?"-":"",m=Dc(this._milliseconds)!==Dc(c)?"-":"",d+"P"+(i?u+i+"Y":"")+(r?u+r+"M":"")+(t?f+t+"D":"")+(a||n||e?"T":"")+(a?m+a+"H":"")+(n?m+n+"M":"")+(e?m+o+"S":"")):"P0D"}var ft=U0.prototype;ft.isValid=Ule;ft.abs=kde;ft.add=jde;ft.subtract=Nde;ft.as=Cde;ft.asMilliseconds=B3;ft.asSeconds=Ede;ft.asMinutes=Pde;ft.asHours=Tde;ft.asDays=Mde;ft.asWeeks=Ode;ft.asMonths=Dde;ft.asQuarters=Lde;ft.asYears=Ade;ft.valueOf=Rde;ft._bubble=Sde;ft.clone=zde;ft.get=$de;ft.milliseconds=Ide;ft.seconds=Fde;ft.minutes=Bde;ft.hours=Hde;ft.days=Wde;ft.weeks=qde;ft.months=Ude;ft.years=Vde;ft.humanize=Xde;ft.toISOString=q0;ft.toString=q0;ft.toJSON=q0;ft.locale=E3;ft.localeData=T3;ft.toIsoString=Is("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",q0);ft.lang=P3;Fe("X",0,0,"unix");Fe("x",0,0,"valueOf");Me("x",F0);Me("X",yoe);jt("X",function(e,t,r){r._d=new Date(parseFloat(e)*1e3)});jt("x",function(e,t,r){r._d=new Date(dt(e))});//! moment.js
Ce.version="2.30.1";Jie(Bt);Ce.fn=we;Ce.min=Fle;Ce.max=Ble;Ce.now=Hle;Ce.utc=Ra;Ce.unix=gde;Ce.months=yde;Ce.isDate=Pf;Ce.locale=No;Ce.invalid=R0;Ce.duration=ua;Ce.isMoment=da;Ce.weekdays=bde;Ce.parseZone=xde;Ce.localeData=Oi;Ce.isDuration=fp;Ce.monthsShort=vde;Ce.weekdaysMin=_de;Ce.defineLocale=l1;Ce.updateLocale=xle;Ce.locales=yle;Ce.weekdaysShort=wde;Ce.normalizeUnits=Fs;Ce.relativeTimeRounding=Zde;Ce.relativeTimeThreshold=Kde;Ce.calendarFormat=fce;Ce.prototype=we;Ce.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const Jde=Xie(Ce),Qde=({leads:e,onLeadClick:t,statuses:r=[]})=>{const n=c=>{const d=r.find(f=>c===f.id||c==f.id||c===f.name||f.id===7&&c==="new"||f.id===8&&(c==="contacted"||c==="qualified"||c==="proposal_sent")||f.id===9&&c==="won"||f.id===10&&c==="lost");return d?{blue:{backgroundColor:"#3b82f6",borderColor:"#2563eb"},yellow:{backgroundColor:"#eab308",borderColor:"#ca8a04"},purple:{backgroundColor:"#a855f7",borderColor:"#9333ea"},orange:{backgroundColor:"#f97316",borderColor:"#ea580c"},green:{backgroundColor:"#22c55e",borderColor:"#16a34a"},red:{backgroundColor:"#ef4444",borderColor:"#dc2626"},gray:{backgroundColor:"#64748b",borderColor:"#475569"}}[d.color]||{backgroundColor:"#64748b",borderColor:"#475569"}:{backgroundColor:"#64748b",borderColor:"#475569"}},a=E.useMemo(()=>e.map(c=>({id:c.id,title:`${c.name} - ${c.business_name||"Sin empresa"}`,start:new Date(c.created_at),end:new Date(c.created_at),resource:c,allDay:!0})),[e]),i=c=>{const d=c.resource,u=n(d.status);return{style:{...u,borderRadius:"4px",opacity:.9,color:"white",border:`2px solid ${u.borderColor}`,display:"block",fontSize:"0.875rem",padding:"2px 4px"}}},o=c=>{t(c.resource)};return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Vista de Calendario"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Leads organizados por fecha de creacin"})]}),s.jsx("div",{className:"flex flex-wrap gap-3 mb-4 pb-4 border-b border-gray-200 dark:border-gray-700",children:r.map(c=>{const d=n(c.id||c.value);return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:d.backgroundColor}}),s.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:c.name||c.label})]},c.id||c.value)})}),s.jsx("div",{className:"h-[600px]",children:s.jsx(Vie,{localizer:Jde,events:a,startAccessor:"start",endAccessor:"end",style:{height:"100%"},eventPropGetter:i,onSelectEvent:o,views:["month","week","day"],defaultView:"month",popup:!0})})]})},Li=()=>({"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`}),H3=async(e={})=>{try{const t=new URLSearchParams;Object.keys(e).forEach(n=>{e[n]!==void 0&&e[n]!==null&&t.append(n,e[n])});const r=await fetch(`${Y}/invoices?${t.toString()}`,{headers:Li()});if(!r.ok)throw new Error("Error fetching invoices");return await r.json()}catch(t){throw console.error("getInvoices error:",t),t}},W3=async e=>{try{const t=await fetch(`${Y}/invoices/${e}`,{headers:Li()});if(!t.ok)throw new Error("Error fetching invoice");return await t.json()}catch(t){throw console.error("getInvoiceById error:",t),t}},eue=async e=>{try{const t=await fetch(`${Y}/invoices`,{method:"POST",headers:Li(),body:JSON.stringify(e)});if(!t.ok){const r=await t.json();throw new Error(r.message||"Error creating invoice")}return await t.json()}catch(t){throw console.error("createInvoice error:",t),t}},tue=async(e,t)=>{try{const r=await fetch(`${Y}/invoices/${e}`,{method:"PUT",headers:Li(),body:JSON.stringify(t)});if(!r.ok){const n=await r.json();throw new Error(n.message||"Error updating invoice")}return await r.json()}catch(r){throw console.error("updateInvoice error:",r),r}},rue=async e=>{try{const t=await fetch(`${Y}/invoices/${e}`,{method:"DELETE",headers:Li()});if(!t.ok)throw new Error("Error deleting invoice");return await t.json()}catch(t){throw console.error("deleteInvoice error:",t),t}},nue=async(e,t)=>{try{const r=await fetch(`${Y}/invoices/${e}/payments`,{method:"POST",headers:Li(),body:JSON.stringify(t)});if(!r.ok){const n=await r.json();throw new Error(n.error||"Error al registrar pago")}return r.json()}catch(r){throw console.error("registerPayment error:",r),r}},sue=async e=>{try{const t=await fetch(`${Y}/invoices/payments/${e}`,{method:"DELETE",headers:Li()});if(!t.ok){const r=await t.json();throw new Error(r.error||"Error al eliminar pago")}return t.json()}catch(t){throw console.error("deletePayment error:",t),t}},aue=async e=>{try{const t=await fetch(`${Y}/invoices/payments/${e}/resend-receipt`,{method:"POST",headers:Li()});if(!t.ok){const r=await t.json();throw new Error(r.error||"Error al enviar recibo")}return t.json()}catch(t){throw console.error("resendReceipt error:",t),t}},iue=async e=>{try{const t=await fetch(`${Y}/invoices/${e}/send`,{method:"POST",headers:Li()});if(!t.ok){const r=await t.json();throw new Error(r.message||"Error al enviar la factura por email")}return await t.json()}catch(t){throw console.error("resendInvoiceEmail error:",t),t}},oue=async e=>{try{const t=await fetch(`${Y}/invoices/public/${e}`);if(!t.ok){const r=await t.json();throw new Error(r.error||"Error al obtener factura pblica")}return t.json()}catch(t){throw console.error("getPublicInvoice error:",t),t}};var U3={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ES=J.createContext&&J.createContext(U3),lue=["attr","size","title"];function cue(e,t){if(e==null)return{};var r=due(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function due(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function jg(){return jg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jg.apply(this,arguments)}function PS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ng(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PS(Object(r),!0).forEach(function(n){uue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uue(e,t,r){return t=hue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hue(e){var t=fue(e,"string");return typeof t=="symbol"?t:t+""}function fue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V3(e){return e&&e.map((t,r)=>J.createElement(t.tag,Ng({key:r},t.attr),V3(t.child)))}function Er(e){return t=>J.createElement(mue,jg({attr:Ng({},e.attr)},t),V3(e.child))}function mue(e){var t=r=>{var{attr:n,size:a,title:i}=e,o=cue(e,lue),c=a||r.size||"1em",d;return r.className&&(d=r.className),e.className&&(d=(d?d+" ":"")+e.className),J.createElement("svg",jg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:d,style:Ng(Ng({color:e.color||r.color},r.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),i&&J.createElement("title",null,i),e.children)};return ES!==void 0?J.createElement(ES.Consumer,null,r=>t(r)):t(U3)}function pue(e){return Er({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(e)}function ud(e){return Er({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(e)}function gue(e){return Er({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(e)}function TS(e){return Er({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(e)}function Md(e){return Er({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(e)}function af(e){return Er({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(e)}function Od(e){return Er({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(e)}function q3(e){return Er({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(e)}function Y3(e){return Er({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(e)}function xue(e){return Er({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"},child:[]},{tag:"polyline",attr:{points:"15 3 21 3 21 9"},child:[]},{tag:"line",attr:{x1:"10",y1:"14",x2:"21",y2:"3"},child:[]}]})(e)}function x1(e){return Er({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}function So(e){return Er({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(e)}function yue(e){return Er({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(e)}function G3(e){return Er({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(e)}function Dd(e){return Er({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(e)}function Z3(e){return Er({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(e)}function vue(e){return Er({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(e)}function y1(e){return Er({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(e)}function K3(e){return Er({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(e)}const bue=({leadId:e,leadName:t})=>{const{showToast:r}=Ht(),[n,a]=E.useState([]),[i,o]=E.useState(!0),[c,d]=E.useState({total:0,paid:0,pending:0});E.useEffect(()=>{e&&u()},[e]);const u=async()=>{try{o(!0);const x=await H3({lead_id:e,limit:100});a(x.invoices);const v=x.invoices.reduce((y,_)=>({total:y.total+parseFloat(_.total_amount),paid:y.paid+parseFloat(_.paid_amount),pending:y.pending+parseFloat(_.remaining_amount)}),{total:0,paid:0,pending:0});d(v)}catch{r("Error al cargar facturas","error")}finally{o(!1)}},f=x=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(x),m=x=>x?new Date(x).toLocaleDateString("es-ES"):"-",p=x=>{const v={pending:{label:"Pendiente",color:"bg-red-100 text-red-800",icon:af},partial:{label:"Parcial",color:"bg-yellow-100 text-yellow-800",icon:ud},paid:{label:"Pagada",color:"bg-green-100 text-green-800",icon:Md}},y=v[x]||v.pending,_=y.icon;return s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${y.color}`,children:[s.jsx(_,{className:"w-3 h-3"}),y.label]})};return i?s.jsx("div",{className:"flex justify-center items-center h-32",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total Facturado"}),s.jsx("p",{className:"text-2xl font-bold text-blue-900 mt-1",children:f(c.total)})]}),s.jsx(So,{className:"w-8 h-8 text-blue-400"})]})}),s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Total Pagado"}),s.jsx("p",{className:"text-2xl font-bold text-green-900 mt-1",children:f(c.paid)})]}),s.jsx(Md,{className:"w-8 h-8 text-green-400"})]})}),s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Total Pendiente"}),s.jsx("p",{className:"text-2xl font-bold text-red-900 mt-1",children:f(c.pending)})]}),s.jsx(af,{className:"w-8 h-8 text-red-400"})]})})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{onClick:()=>{window.location.href=`/invoices/new?lead_id=${e}`},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Dd,{className:"w-4 h-4"}),"Nueva Factura para ",t]})}),n.length===0?s.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[s.jsx(So,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay facturas"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Este cliente an no tiene facturas registradas"}),s.jsxs("button",{onClick:()=>window.location.href=`/invoices/new?lead_id=${e}`,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[s.jsx(Dd,{className:"w-4 h-4"}),"Crear Primera Factura"]})]}):s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nmero"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pagado"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pendiente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(x=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(So,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:x.invoice_number})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m(x.issue_date)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:f(x.total_amount)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:f(x.paid_amount)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600",children:f(x.remaining_amount)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p(x.payment_status)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx("button",{onClick:()=>window.location.href=`/invoices/${x.id}`,className:"text-blue-600 hover:text-blue-900",title:"Ver detalle",children:s.jsx(x1,{className:"w-4 h-4"})}),x.payment_status!=="paid"&&s.jsx("button",{onClick:()=>window.location.href=`/invoices/${x.id}?tab=payments`,className:"text-green-600 hover:text-green-900",title:"Registrar pago",children:s.jsx(Od,{className:"w-4 h-4"})})]})})]},x.id))})]})})]})},X3=({onClientSelect:e})=>{const[t,r]=E.useState({isOpen:!1,title:"",message:"",clientToDelete:null}),[n,a]=E.useState([]),[i,o]=E.useState(!0),[c,d]=E.useState(""),[u,f]=E.useState(!1),[m,p]=E.useState(!1),[x,v]=E.useState({name:"",email:"",phone:"",nif:"",address:"",city:"",postal_code:""}),y=Ht();E.useEffect(()=>{_()},[]);const _=async()=>{try{const C=await fetch(`${Y}/clients`,{headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}});if(C.ok){const O=await C.json();a(O)}}catch(C){console.error("Error fetching clients:",C),y.error("Error al cargar clientes")}finally{o(!1)}},w=async C=>{C.preventDefault(),p(!0);try{const O=await fetch(`${Y}/clients`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`},body:JSON.stringify(x)});if(O.ok)y.success("Cliente creado exitosamente"),f(!1),v({name:"",email:"",phone:"",nif:"",address:"",city:"",postal_code:""}),_();else{const A=await O.json();y.error(A.message||"Error al crear cliente")}}catch(O){console.error("Error:",O),y.error("Error de conexin")}finally{p(!1)}},b=async(C,O)=>{C.stopPropagation(),r({isOpen:!0,title:"Eliminar Cliente",message:"Ests seguro de eliminar este cliente? Esta accin no se puede deshacer.",clientToDelete:{id:O}})},N=async()=>{if(t.clientToDelete)try{if((await fetch(`${Y}/clients/${t.clientToDelete.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}})).ok)y.success("Cliente eliminado correctamente"),_();else throw new Error("Error al eliminar")}catch(C){y.error("Error al eliminar el cliente"),console.error(C)}finally{r({...t,isOpen:!1,clientToDelete:null})}},S=n.filter(C=>{var O,A;return C.name.toLowerCase().includes(c.toLowerCase())||((O=C.email)==null?void 0:O.toLowerCase().includes(c.toLowerCase()))||((A=C.phone)==null?void 0:A.includes(c))});return i?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx("span",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg text-orange-600 dark:text-orange-400",children:s.jsx(ts,{className:"w-5 h-5"})}),"Cartera de Clientes"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 ml-11",children:"Gestin de clientes e instalaciones"})]}),s.jsxs("button",{onClick:()=>f(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all",children:[s.jsx(xr,{className:"h-5 w-5"}),s.jsx("span",{children:"Nuevo Cliente"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Clientes"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:n.length})]}),s.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:s.jsx(ts,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Activos"}),s.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mt-2",children:n.filter(C=>C.status==="active").length})]}),s.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:s.jsx(Rt,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Con Instalaciones"}),s.jsx("p",{className:"text-3xl font-bold text-orange-600 dark:text-orange-400 mt-2",children:n.filter(C=>C.installations&&C.installations.length>0).length})]}),s.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:s.jsx(jl,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})})]})})]}),s.jsxs("div",{className:"flex space-x-4 bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Ls,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Buscar por nombre, email o telfono...",value:c,onChange:C=>d(C.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),s.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:[s.jsx(Up,{className:"h-4 w-4"}),s.jsx("span",{children:"Filtros"})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Cliente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Contacto"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Instalacin"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:S.map(C=>s.jsxs("tr",{onClick:()=>e(C.id),className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-orange-400 to-red-500 flex items-center justify-center text-white font-bold",children:C.name.charAt(0)}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:C.name}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["ID: #",C.id]})]})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:C.email}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:C.phone})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${C.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:C.status==="active"?"Activo":"Inactivo"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 dark:text-gray-400",children:[s.jsx(jl,{size:16}),s.jsx("span",{className:"text-sm",children:"Ver detalles"})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx("button",{onClick:O=>{O.stopPropagation(),e(C.id)},className:"p-2 text-gray-500 hover:text-orange-600 dark:text-gray-400 dark:hover:text-orange-400 transition-colors rounded-lg hover:bg-orange-50 dark:hover:bg-orange-900/20",title:"Ver detalles",children:s.jsx(ln,{size:18})}),s.jsx("button",{onClick:O=>b(O,C.id),className:"p-2 text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400 transition-colors rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20",title:"Eliminar Cliente",children:s.jsx(Ar,{size:18})})]})})]},C.id))})]}),S.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(r4,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No hay clientes"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Convierte leads para verlos aqu."})]})]}),u&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Nuevo Cliente"}),s.jsx("button",{onClick:()=>f(!1),className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:s.jsx(Rr,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:w,className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nombre / Empresa *"}),s.jsx("input",{type:"text",required:!0,value:x.name,onChange:C=>v({...x,name:C.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"NIF / CIF"}),s.jsx("input",{type:"text",value:x.nif,onChange:C=>v({...x,nif:C.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),s.jsx("input",{type:"email",value:x.email,onChange:C=>v({...x,email:C.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Telfono"}),s.jsx("input",{type:"tel",value:x.phone,onChange:C=>v({...x,phone:C.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Direccin"}),s.jsx("input",{type:"text",value:x.address,onChange:C=>v({...x,address:C.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Ciudad"}),s.jsx("input",{type:"text",value:x.city,onChange:C=>v({...x,city:C.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Cdigo Postal"}),s.jsx("input",{type:"text",value:x.postal_code,onChange:C=>v({...x,postal_code:C.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:()=>f(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:m,className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all disabled:opacity-50",children:m?"Creando...":"Crear Cliente"})]})]})]})}),s.jsx(Yl,{isOpen:t.isOpen,onClose:()=>r({...t,isOpen:!1,clientToDelete:null}),onConfirm:N,title:t.title,message:t.message,type:"danger"})]})},wue=({invoiceId:e,remainingAmount:t,onSuccess:r,onCancel:n})=>{const a=Ht(),[i,o]=E.useState(!1),[c,d]=E.useState({amount:t,payment_method:"transfer",payment_date:new Date().toISOString().split("T")[0],reference:"",notes:""}),u=async m=>{var p,x;if(m.preventDefault(),parseFloat(c.amount)>parseFloat(t)){a.error("El monto no puede exceder el pendiente");return}try{o(!0),await nue(e,c),a.success("Pago registrado exitosamente"),r()}catch(v){a.error(((x=(p=v.response)==null?void 0:p.data)==null?void 0:x.error)||"Error al registrar pago")}finally{o(!1)}},f=m=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(m);return s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Registrar Pago"}),s.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:s.jsx(K3,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:s.jsxs("div",{className:"text-sm text-blue-900",children:["Monto pendiente: ",s.jsx("span",{className:"font-semibold",children:f(t)})]})}),s.jsxs("form",{onSubmit:u,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monto del Pago *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Od,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"number",value:c.amount,onChange:m=>d({...c,amount:m.target.value}),min:"0.01",max:t,step:"0.01",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mtodo de Pago"}),s.jsxs("select",{value:c.payment_method,onChange:m=>d({...c,payment_method:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"transfer",children:"Transferencia"}),s.jsx("option",{value:"cash",children:"Efectivo"}),s.jsx("option",{value:"card",children:"Tarjeta"}),s.jsx("option",{value:"check",children:"Cheque"}),s.jsx("option",{value:"other",children:"Otro"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Pago *"}),s.jsx("input",{type:"date",value:c.payment_date,onChange:m=>d({...c,payment_date:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referencia"}),s.jsx("input",{type:"text",value:c.reference,onChange:m=>d({...c,reference:m.target.value}),placeholder:"N transferencia, recibo, etc.",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas"}),s.jsx("textarea",{value:c.notes,onChange:m=>d({...c,notes:m.target.value}),placeholder:"Notas adicionales sobre el pago...",rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[s.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),s.jsxs("button",{type:"submit",disabled:i,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[s.jsx(Z3,{className:"w-4 h-4"}),i?"Registrando...":"Registrar Pago"]})]})]})]})},_ue=({invoiceId:e,payments:t,onUpdate:r})=>{const{showToast:n}=Ht(),a=async(f,m)=>{if(window.confirm(`Eliminar pago de ${o(m)}?`))try{await sue(f),n("Pago eliminado exitosamente","success"),r()}catch{n("Error al eliminar pago","error")}},i=async f=>{try{await aue(f),n("Recibo enviado exitosamente","success"),r()}catch{n("Error al enviar recibo","error")}},o=f=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(f),c=f=>f?new Date(f).toLocaleDateString("es-ES"):"-",d=f=>({transfer:"Transferencia",cash:"Efectivo",card:"Tarjeta",check:"Cheque",other:"Otro"})[f]||f;if(t.length===0)return s.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[s.jsx(Od,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay pagos registrados"}),s.jsx("p",{className:"text-gray-600",children:"Los pagos aparecern aqu una vez registrados"})]});const u=t.reduce((f,m)=>f+parseFloat(m.amount),0);return s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("div",{className:"text-sm text-green-900",children:"Total Pagado"}),s.jsx("div",{className:"text-2xl font-bold text-green-700",children:o(u)})]})}),s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Recibo"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mtodo"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Referencia"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Monto"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(f=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:c(f.payment_date)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:f.receipt_number}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:d(f.payment_method)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:f.reference||"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600 text-right",children:o(f.amount)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx("button",{onClick:()=>i(f.id),className:"text-blue-600 hover:text-blue-900",title:"Reenviar recibo",children:s.jsx(G3,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>a(f.id,f.amount),className:"text-red-600 hover:text-red-900",title:"Eliminar pago",children:s.jsx(y1,{className:"w-4 h-4"})})]})})]},f.id))})]})}),t.some(f=>f.notes)&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Notas de Pagos:"}),t.filter(f=>f.notes).map(f=>s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:[f.receipt_number," - ",c(f.payment_date)]}),s.jsx("div",{className:"text-sm text-gray-900",children:f.notes})]},f.id))]})]})},J3=({invoiceId:e,onBack:t,initialTab:r="info"})=>{var S;const n=e,a=Ht(),[i,o]=E.useState(null),[c,d]=E.useState(!0),[u,f]=E.useState(r),[m,p]=E.useState(!1);E.useEffect(()=>{x()},[n]);const x=async()=>{try{d(!0);const C=await W3(n);o(C)}catch{a.error("Error al cargar factura"),t&&t()}finally{d(!1)}},v=async()=>{try{await iue(n),a.success("Email enviado exitosamente"),x()}catch{a.error("Error al enviar email")}},y=()=>{p(!1),x()},_=C=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(C),w=C=>C?new Date(C).toLocaleDateString("es-ES"):"-",b=C=>{const O={pending:{label:"Pendiente",color:"bg-red-100 text-red-800",icon:af},partial:{label:"Pago Parcial",color:"bg-yellow-100 text-yellow-800",icon:ud},paid:{label:"Pagada",color:"bg-green-100 text-green-800",icon:Md}},A=O[C]||O.pending,z=A.icon;return s.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium ${A.color}`,children:[s.jsx(z,{className:"w-4 h-4"}),A.label]})};if(c)return s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!i)return null;const N=`${window.location.origin}/invoice/${i.token}`;return s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-6",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("button",{onClick:()=>window.location.href="/invoices",className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(gue,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:i.invoice_number}),b(i.payment_status)]}),s.jsx("p",{className:"text-gray-600",children:i.title}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Cliente: ",i.client_name||i.lead_name,i.business_name&&` - ${i.business_name}`]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>window.location.href=`/invoices/${n}/edit`,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx(Y3,{className:"w-4 h-4"}),"Editar"]}),s.jsxs("button",{onClick:v,className:"flex items-center gap-2 px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(G3,{className:"w-4 h-4"}),"Enviar Email"]}),s.jsxs("a",{href:N,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx(xue,{className:"w-4 h-4"}),"Ver Pblica"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[s.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total"}),s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:_(i.total_amount)})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[s.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Pagado"}),s.jsx("div",{className:"text-2xl font-bold text-green-600",children:_(i.paid_amount)})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[s.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Pendiente"}),s.jsx("div",{className:"text-2xl font-bold text-red-600",children:_(i.remaining_amount)})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[s.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Vencimiento"}),s.jsx("div",{className:"text-lg font-semibold text-gray-900",children:w(i.due_date)})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsxs("nav",{className:"flex -mb-px",children:[s.jsxs("button",{onClick:()=>f("info"),className:`flex items-center gap-2 px-6 py-4 border-b-2 font-medium text-sm transition-colors ${u==="info"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(So,{className:"w-4 h-4"}),"Informacin"]}),s.jsxs("button",{onClick:()=>f("payments"),className:`flex items-center gap-2 px-6 py-4 border-b-2 font-medium text-sm transition-colors ${u==="payments"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(Od,{className:"w-4 h-4"}),"Pagos (",((S=i.payments)==null?void 0:S.length)||0,")"]}),s.jsxs("button",{onClick:()=>f("activity"),className:`flex items-center gap-2 px-6 py-4 border-b-2 font-medium text-sm transition-colors ${u==="activity"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(pue,{className:"w-4 h-4"}),"Actividad"]})]})}),s.jsxs("div",{className:"p-6",children:[u==="info"&&s.jsxs("div",{className:"space-y-6",children:[i.company&&i.company.company_name&&s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6 border border-gray-100",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Emisor"}),s.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:[s.jsxs("div",{children:[i.company.company_logo&&s.jsx("img",{src:i.company.company_logo,alt:"Logo",className:"h-10 w-auto mb-2 object-contain"}),s.jsx("div",{className:"font-medium text-gray-900",children:i.company.company_name}),i.company.company_nif&&s.jsxs("div",{className:"text-sm text-gray-600",children:["NIF: ",i.company.company_nif]})]}),s.jsxs("div",{className:"text-sm text-gray-600 space-y-1 text-right",children:[i.company.company_address&&s.jsx("div",{children:i.company.company_address}),i.company.company_phone&&s.jsx("div",{children:i.company.company_phone}),i.company.company_email&&s.jsx("div",{children:i.company.company_email}),i.company.company_website&&s.jsx("a",{href:i.company.company_website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:i.company.company_website})]})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 p-4 rounded-lg mb-6 shadow-sm",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Cliente"}),s.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900 text-lg",children:i.client_name||i.lead_name}),i.business_name&&s.jsxs("div",{className:"text-sm text-gray-600",children:["NIF/CIF: ",i.business_name]})]}),s.jsxs("div",{className:"text-sm text-gray-600 space-y-1 text-right",children:[i.client_address&&s.jsx("div",{children:i.client_address}),(i.client_city||i.client_postal_code)&&s.jsxs("div",{children:[i.client_postal_code&&s.jsxs("span",{children:[i.client_postal_code," "]}),i.client_city&&s.jsx("span",{children:i.client_city})]}),(i.client_province||i.client_country)&&s.jsxs("div",{children:[i.client_province&&s.jsx("span",{children:i.client_province}),i.client_province&&i.client_country&&s.jsx("span",{children:", "}),i.client_country&&s.jsx("span",{children:i.client_country})]}),i.client_email&&s.jsx("div",{children:i.client_email}),i.phone&&s.jsx("div",{children:i.phone})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Emisin"}),s.jsx("div",{className:"text-gray-900",children:w(i.issue_date)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Vencimiento"}),s.jsx("div",{className:"text-gray-900",children:w(i.due_date)})]}),i.paid_date&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Pago"}),s.jsx("div",{className:"text-gray-900",children:w(i.paid_date)})]})]}),i.description&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripcin"}),s.jsx("p",{className:"text-gray-900",children:i.description})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Items"}),s.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Descripcin"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Cantidad"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Precio"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.items.map((C,O)=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:C.description}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:C.quantity}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:_(C.price)}),s.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 text-right",children:_(C.total)})]},O))})]})})]}),s.jsx("div",{className:"border-t pt-4",children:s.jsxs("div",{className:"max-w-md ml-auto space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),s.jsx("span",{className:"font-medium",children:_(i.subtotal)})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-600",children:["IVA (",i.tax_rate,"%):"]}),s.jsx("span",{className:"font-medium",children:_(i.tax_amount)})]}),s.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[s.jsx("span",{children:"Total:"}),s.jsx("span",{className:"text-blue-600",children:_(i.total_amount)})]})]})}),i.notes&&s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas Internas"}),s.jsx("p",{className:"text-gray-900 text-sm",children:i.notes})]})]}),u==="payments"&&s.jsxs("div",{className:"space-y-4",children:[i.payment_status!=="paid"&&s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[s.jsx(Od,{className:"w-4 h-4"}),"Registrar Pago"]})}),m&&s.jsx(wue,{invoiceId:n,remainingAmount:i.remaining_amount,onSuccess:y,onCancel:()=>p(!1)}),s.jsx(_ue,{invoiceId:n,payments:i.payments||[],onUpdate:x})]}),u==="activity"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Email Enviado"}),s.jsx("div",{className:"text-lg font-semibold text-gray-900",children:i.email_sent?"S":"No"}),i.email_sent_at&&s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:w(i.email_sent_at)})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Email Abierto"}),s.jsx("div",{className:"text-lg font-semibold text-gray-900",children:i.email_opened?"S":"No"}),i.email_opened_at&&s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:w(i.email_opened_at)})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Factura Visualizada"}),s.jsx("div",{className:"text-lg font-semibold text-gray-900",children:i.viewed?"S":"No"}),i.viewed_at&&s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:w(i.viewed_at)})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Nmero de Vistas"}),s.jsx("div",{className:"text-lg font-semibold text-gray-900",children:i.view_count})]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("div",{className:"text-sm font-medium text-blue-900 mb-2",children:"Enlace Pblico"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:N,readOnly:!0,className:"flex-1 px-3 py-2 bg-white border border-blue-300 rounded text-sm"}),s.jsx("button",{onClick:()=>{navigator.clipboard.writeText(N),showToast("Enlace copiado","success")},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Copiar"})]})]})]})]})]})]})},kue=({clientId:e})=>{const[t,r]=E.useState([]),[n,a]=E.useState(!0),[i,o]=E.useState("all"),[c,d]=E.useState(null);Ht(),E.useEffect(()=>{u()},[e]);const u=async()=>{try{a(!0);const v=localStorage.getItem("crm_token"),y=await fetch(`${Y}/invoices?client_id=${e}`,{headers:{Authorization:`Bearer ${v}`}});if(!y.ok)throw new Error("Error al cargar facturas");const _=await y.json();r(_.invoices||[])}catch(v){console.error("Error fetching invoices:",v)}finally{a(!1)}},f=(v,y)=>{const _=y&&new Date(y)<new Date&&v!=="paid";return v==="paid"?s.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 border border-green-200",children:"Pagada"}):_?s.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800 border border-red-200",children:"Vencida"}):v==="partial"?s.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800 border border-yellow-200",children:"Parcial"}):s.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 border border-blue-200",children:"Pendiente"})},m=v=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(v),p=v=>v?new Date(v).toLocaleDateString("es-ES"):"-",x=t.filter(v=>{if(i==="all")return!0;const y=v.due_date&&new Date(v.due_date)<new Date&&v.payment_status!=="paid";return i==="overdue"?y:v.payment_status===i});return c?s.jsx("div",{className:"animate-fade-in",children:s.jsx(J3,{invoiceId:c,onBack:()=>{d(null),u()}})}):n?s.jsx("div",{className:"text-center p-8 text-gray-500",children:"Cargando facturas..."}):t.length===0?s.jsxs("div",{className:"text-center p-8 bg-gray-50 rounded-lg border border-dashed border-gray-300",children:[s.jsx(So,{className:"mx-auto h-12 w-12 text-gray-400 mb-2"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No hay facturas"}),s.jsx("p",{className:"text-gray-500",children:"Este cliente an no tiene facturas registradas."})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Historial de Facturacin"}),s.jsx("div",{className:"flex gap-2",children:s.jsxs("select",{value:i,onChange:v=>o(v.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white focus:ring-2 focus:ring-blue-500 outline-none",children:[s.jsx("option",{value:"all",children:"Todas"}),s.jsx("option",{value:"paid",children:"Pagadas"}),s.jsx("option",{value:"pending",children:"Pendientes"}),s.jsx("option",{value:"overdue",children:"Vencidas"})]})})]}),s.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nmero"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vencimiento"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Importe"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(v=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600",children:v.invoice_number}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:p(v.issue_date)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:p(v.due_date)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right font-medium",children:m(v.total_amount)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:f(v.payment_status,v.due_date)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>d(v.id),className:"text-gray-400 hover:text-blue-600 transition-colors",title:"Ver detalles",children:s.jsx(x1,{className:"w-5 h-5"})}),s.jsx("a",{href:`/invoice/${v.token}`,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-green-600 transition-colors",title:"Ver pblica / Imprimir",children:s.jsx(q3,{className:"w-5 h-5"})})]})})]},v.id))})]})})]})},Q3=({clientId:e,onBack:t})=>{const[r,n]=E.useState(null),[a,i]=E.useState(!0),[o,c]=E.useState("info"),[d,u]=E.useState({}),[f,m]=E.useState({}),[p,x]=E.useState(!1),[v,y]=E.useState({}),_=Ht();E.useEffect(()=>{w()},[e]);const w=async()=>{try{const A=await fetch(`${Y}/clients/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}});if(A.ok){const z=await A.json();n(z),z.installation&&m(z.installation),y({name:z.name||"",nif:z.nif||"",email:z.email||"",phone:z.phone||"",address:z.address||"",city:z.city||"",postal_code:z.postal_code||"",province:z.province||"",country:z.country||""})}else _.error("Error al cargar detalles del cliente")}catch(A){console.error("Error fetching client details:",A),_.error("Error de conexin")}finally{i(!1)}},b=A=>{const{name:z,value:$}=A.target;m(W=>({...W,[z]:$}))},N=A=>{const{name:z,value:$}=A.target;y(W=>({...W,[z]:$}))},S=async()=>{try{(await fetch(`${Y}/clients/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`},body:JSON.stringify(v)})).ok?(_.success("Informacin del cliente actualizada"),x(!1),w()):_.error("Error al actualizar cliente")}catch(A){console.error("Error updating client:",A),_.error("Error de conexin")}},C=A=>{u(z=>({...z,[A]:!z[A]}))},O=async()=>{try{(await fetch(`${Y}/clients/${e}/installation`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`},body:JSON.stringify(f)})).ok?(_.success("Datos de instalacin actualizados"),w()):_.error("Error al guardar datos")}catch(A){console.error("Error saving installation:",A),_.error("Error de conexin")}};return a?s.jsx("div",{className:"p-8 text-center",children:"Cargando..."}):r?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(pw,{className:"w-6 h-6 text-gray-600 dark:text-gray-300"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.name}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[r.email,"  ",r.phone]})]})]}),s.jsx("div",{className:"flex space-x-3",children:s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${r.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:r.status==="active"?"Activo":"Inactivo"})})]}),s.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:s.jsxs("nav",{className:"-mb-px flex space-x-8",children:[s.jsx("button",{onClick:()=>c("info"),className:`py-4 px-1 border-b-2 font-medium text-sm ${o==="info"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Informacin General"}),s.jsx("button",{onClick:()=>c("installation"),className:`py-4 px-1 border-b-2 font-medium text-sm ${o==="installation"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Instalacin Tcnica"}),s.jsx("button",{onClick:()=>c("invoices"),className:`py-4 px-1 border-b-2 font-medium text-sm ${o==="invoices"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Facturacin"})]})}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[o==="info"&&s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute top-0 right-0 flex gap-2",children:p?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>x(!1),className:"p-2 text-gray-500 hover:text-gray-700 bg-gray-100 rounded-full dark:bg-gray-700 dark:text-gray-300",children:s.jsx(Rr,{size:20})}),s.jsx("button",{onClick:S,className:"p-2 text-white bg-green-500 hover:bg-green-600 rounded-full",children:s.jsx(Es,{size:20})})]}):s.jsx("button",{onClick:()=>x(!0),className:"p-2 text-gray-500 hover:text-orange-500 hover:bg-orange-50 dark:hover:bg-gray-700 rounded-full transition-colors",children:s.jsx(xw,{size:20})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-8",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre Comercial"}),p?s.jsx("input",{name:"name",value:v.name,onChange:N,className:"w-full p-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}):s.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-gray-900 dark:text-white",children:r.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"NIF/CIF"}),p?s.jsx("input",{name:"nif",value:v.nif,onChange:N,className:"w-full p-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}):s.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-gray-900 dark:text-white",children:r.nif||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),p?s.jsx("input",{name:"email",value:v.email,onChange:N,className:"w-full p-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}):s.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-gray-900 dark:text-white",children:r.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Telfono"}),p?s.jsx("input",{name:"phone",value:v.phone,onChange:N,className:"w-full p-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}):s.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-gray-900 dark:text-white",children:r.phone})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Direccin"}),p?s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("input",{name:"address",placeholder:"Direccin",value:v.address,onChange:N,className:"col-span-2 w-full p-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("input",{name:"city",placeholder:"Ciudad",value:v.city,onChange:N,className:"w-full p-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("input",{name:"postal_code",placeholder:"C.P.",value:v.postal_code,onChange:N,className:"w-full p-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("input",{name:"province",placeholder:"Provincia",value:v.province,onChange:N,className:"w-full p-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("input",{name:"country",placeholder:"Pas",value:v.country,onChange:N,className:"w-full p-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}):s.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-gray-900 dark:text-white",children:[r.address,(r.city||r.postal_code)&&`, ${r.city} ${r.postal_code}`,(r.province||r.country)&&`, ${r.province} (${r.country})`]})]})]})]}),o==="installation"&&s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(jl,{className:"w-5 h-5 mr-2 text-orange-500"}),"Servidor y Dominio"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Dominio"}),s.jsxs("div",{className:"relative",children:[s.jsx(bs,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",name:"domain",value:f.domain||"",onChange:b,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500",placeholder:"ejemplo.com"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"IP del Servidor"}),s.jsxs("div",{className:"relative",children:[s.jsx(jl,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",name:"server_ip",value:f.server_ip||"",onChange:b,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500",placeholder:"192.168.1.1"})]})]})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(Th,{className:"w-5 h-5 mr-2 text-orange-500"}),"Acceso Panel Admin"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"URL Admin"}),s.jsx("input",{type:"text",name:"admin_url",value:f.admin_url||"",onChange:b,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500",placeholder:"https://app.ejemplo.com/admin"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Usuario"}),s.jsx("input",{type:"text",name:"admin_user",value:f.admin_user||"",onChange:b,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Contrasea"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:d.admin?"text":"password",name:"admin_password",value:f.admin_password||"",onChange:b,className:"w-full pl-4 pr-10 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"}),s.jsx("button",{type:"button",onClick:()=>C("admin"),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:d.admin?s.jsx(Wp,{size:18}):s.jsx(ln,{size:18})})]})]})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(r4,{className:"w-5 h-5 mr-2 text-orange-500"}),"Base de Datos"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre BD"}),s.jsx("input",{type:"text",name:"db_name",value:f.db_name||"",onChange:b,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Usuario BD"}),s.jsx("input",{type:"text",name:"db_user",value:f.db_user||"",onChange:b,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Contrasea BD"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:d.db?"text":"password",name:"db_password",value:f.db_password||"",onChange:b,className:"w-full pl-4 pr-10 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500"}),s.jsx("button",{type:"button",onClick:()=>C("db"),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:d.db?s.jsx(Wp,{size:18}):s.jsx(ln,{size:18})})]})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notas Tcnicas"}),s.jsx("textarea",{name:"notes",rows:"4",value:f.notes||"",onChange:b,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500",placeholder:"Detalles adicionales sobre la instalacin..."})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{onClick:O,className:"flex items-center space-x-2 px-6 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg font-medium transition-colors",children:[s.jsx(Es,{size:20}),s.jsx("span",{children:"Guardar Cambios"})]})})]}),o==="invoices"&&s.jsx(kue,{clientId:e})]})]}):s.jsx("div",{className:"p-8 text-center",children:"Cliente no encontrado"})},jue=()=>({"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`}),Nue=async()=>{const e=await fetch(`${Y}/clients`,{headers:jue()});if(!e.ok){const t=await e.json();throw new Error(t.error||"Error al obtener clientes")}return e.json()},Sue=({items:e,onChange:t})=>{const r=()=>{t([...e,{description:"",quantity:1,price:0,total:0}])},n=o=>{const c=e.filter((d,u)=>u!==o);t(c)},a=(o,c,d)=>{const u=[...e];if(u[o][c]=d,c==="quantity"||c==="price"){const f=parseFloat(u[o].quantity)||0,m=parseFloat(u[o].price)||0;u[o].total=f*m}t(u)},i=o=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(o);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Items de la Factura"}),s.jsxs("button",{type:"button",onClick:r,className:"flex items-center gap-2 px-3 py-1 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Dd,{className:"w-4 h-4"}),"Aadir Item"]})]}),e.length===0?s.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[s.jsx("p",{className:"text-gray-500 mb-3",children:"No hay items en la factura"}),s.jsxs("button",{type:"button",onClick:r,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[s.jsx(Dd,{className:"w-4 h-4"}),"Aadir Primer Item"]})]}):s.jsx("div",{className:"space-y-3",children:e.map((o,c)=>s.jsxs("div",{className:"flex gap-3 items-start bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Descripcin"}),s.jsx("input",{type:"text",value:o.description,onChange:d=>a(c,"description",d.target.value),placeholder:"Descripcin del servicio/producto",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Cantidad"}),s.jsx("input",{type:"number",value:o.quantity,onChange:d=>a(c,"quantity",d.target.value),min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Precio Unitario"}),s.jsx("input",{type:"number",value:o.price,onChange:d=>a(c,"price",d.target.value),min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),s.jsxs("div",{className:"flex flex-col items-end gap-2",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Total"}),s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:i(o.total)})]}),s.jsx("button",{type:"button",onClick:()=>n(c),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Eliminar item",children:s.jsx(y1,{className:"w-4 h-4"})})]})]},c))})]})},Cue=({invoiceId:e,onSuccess:t,onCancel:r})=>{const n=Ht(),a=!!e,i=e,[o,c]=E.useState(!1),[d,u]=E.useState([]),[f,m]=E.useState({client_id:"",title:"",description:"",items:[],tax_rate:21,issue_date:new Date().toISOString().split("T")[0],due_date:"",notes:""});E.useEffect(()=>{p(),a&&x()},[i]);const p=async()=>{try{const b=await Nue();u(b)}catch{n.error("Error al cargar clientes")}},x=async()=>{try{c(!0);const b=await W3(i);m({client_id:b.client_id,title:b.title,description:b.description||"",items:b.items||[],tax_rate:b.tax_rate,issue_date:b.issue_date.split("T")[0],due_date:b.due_date?b.due_date.split("T")[0]:"",notes:b.notes||""})}catch(b){console.error("Error fetching invoice:",b),n.error("Error al cargar la factura"),r&&r()}finally{c(!1)}},v=()=>{const b=f.items.reduce((C,O)=>C+(O.total||0),0),N=b*f.tax_rate/100,S=b+N;return{subtotal:b.toFixed(2),taxAmount:N.toFixed(2),total:S.toFixed(2)}},y=async b=>{var N,S;if(b.preventDefault(),!f.client_id){n.error("Debes seleccionar un cliente");return}if(f.items.length===0){n.error("Debes aadir al menos un item");return}try{c(!0),a?(await tue(i,f),n.success("Factura actualizada exitosamente")):(await eue(f),n.success("Factura creada exitosamente")),t&&t()}catch(C){n.error(((S=(N=C.response)==null?void 0:N.data)==null?void 0:S.error)||"Error al guardar factura")}finally{c(!1)}},_=b=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(b),w=v();return o&&a?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a?"Editar Factura":"Nueva Factura"}),s.jsx("p",{className:"text-gray-600 mt-1",children:a?"Modifica los datos de la factura":"Crea una nueva factura para un cliente"})]}),s.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx(K3,{className:"w-5 h-5"}),"Cancelar"]})]}),s.jsxs("form",{onSubmit:y,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informacin General"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente *"}),s.jsxs("select",{value:f.client_id,onChange:b=>m({...f,client_id:b.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,disabled:a,children:[s.jsx("option",{value:"",children:"Seleccionar cliente"}),d.map(b=>s.jsxs("option",{value:b.id,children:[b.name," ",b.company&&`- ${b.company}`]},b.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ttulo *"}),s.jsx("input",{type:"text",value:f.title,onChange:b=>m({...f,title:b.target.value}),placeholder:"Ej: Servicios de consultora",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Emisin *"}),s.jsxs("div",{className:"relative",children:[s.jsx(TS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"date",value:f.issue_date,onChange:b=>m({...f,issue_date:b.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Vencimiento"}),s.jsxs("div",{className:"relative",children:[s.jsx(TS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"date",value:f.due_date,onChange:b=>m({...f,due_date:b.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IVA (%)"}),s.jsx("input",{type:"number",value:f.tax_rate,onChange:b=>m({...f,tax_rate:parseFloat(b.target.value)}),min:"0",max:"100",step:"0.01",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripcin"}),s.jsx("textarea",{value:f.description,onChange:b=>m({...f,description:b.target.value}),placeholder:"Descripcin general de la factura...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsx(Sue,{items:f.items,onChange:b=>m({...f,items:b})})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"max-w-md ml-auto space-y-3",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),s.jsx("span",{className:"font-medium",children:_(w.subtotal)})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-600",children:["IVA (",f.tax_rate,"%):"]}),s.jsx("span",{className:"font-medium",children:_(w.taxAmount)})]}),s.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-3",children:[s.jsx("span",{children:"Total:"}),s.jsx("span",{className:"text-blue-600",children:_(w.total)})]})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas Internas"}),s.jsx("textarea",{value:f.notes,onChange:b=>m({...f,notes:b.target.value}),placeholder:"Notas adicionales (no visibles para el cliente)...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:r,className:"px-6 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),s.jsxs("button",{type:"submit",disabled:o,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[s.jsx(Z3,{className:"w-5 h-5"}),o?"Guardando...":a?"Actualizar Factura":"Crear Factura"]})]})]})]})},Eue=()=>{const{showToast:e}=Ht(),[t,r]=E.useState([]),[n,a]=E.useState(!0),[i,o]=E.useState({status:"",search:"",page:1,limit:20}),[c,d]=E.useState({}),[u,f]=E.useState("list"),[m,p]=E.useState(null),x=async()=>{try{a(!0);const b=await H3(i);r(b.invoices||[]),d(b.pagination||{})}catch(b){console.error("Error fetching invoices:",b),r([]),d({})}finally{a(!1)}};E.useEffect(()=>{x()},[i.status,i.search,i.page]);const v=async(b,N)=>{if(window.confirm(`Eliminar factura ${N}?`))try{await rue(b),e("Factura eliminada exitosamente","success"),x()}catch{e("Error al eliminar factura","error")}},y=b=>{const N={pending:{label:"Pendiente",color:"bg-red-100 text-red-800",icon:af},partial:{label:"Pago Parcial",color:"bg-yellow-100 text-yellow-800",icon:ud},paid:{label:"Pagada",color:"bg-green-100 text-green-800",icon:Md}},S=N[b]||N.pending,C=S.icon;return s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${S.color}`,children:[s.jsx(C,{className:"w-3 h-3"}),S.label]})},_=b=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(b),w=b=>b?new Date(b).toLocaleDateString("es-ES"):"-";return s.jsxs("div",{className:"p-3 md:p-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Facturas"}),s.jsx("p",{className:"text-gray-600 mt-1 text-sm md:text-base",children:"Gestiona las facturas de tus clientes"})]}),u==="list"&&s.jsxs("button",{onClick:()=>{p(null),f("create")},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Dd,{className:"w-5 h-5"}),"Nueva Factura"]})]}),u==="create"||u==="edit"?s.jsx(Cue,{invoiceId:m,onSuccess:()=>{f("list"),x()},onCancel:()=>f("list")}):u==="detail"?s.jsx(J3,{invoiceId:m,onBack:()=>f("list")}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(vue,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Buscar por nmero, ttulo o cliente...",value:i.search,onChange:b=>o({...i,search:b.target.value,page:1}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(yue,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsxs("select",{value:i.status,onChange:b=>o({...i,status:b.target.value,page:1}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[s.jsx("option",{value:"",children:"Todos los estados"}),s.jsx("option",{value:"pending",children:"Pendiente"}),s.jsx("option",{value:"partial",children:"Pago Parcial"}),s.jsx("option",{value:"paid",children:"Pagada"})]})]}),(i.search||i.status)&&s.jsx("button",{onClick:()=>o({status:"",search:"",page:1,limit:20}),className:"px-4 py-2 text-gray-600 hover:text-gray-900 transition-colors",children:"Limpiar filtros"})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:n?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):t.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(So,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay facturas"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Crea tu primera factura para comenzar"}),s.jsxs("button",{onClick:()=>{p(null),f("create")},className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[s.jsx(Dd,{className:"w-5 h-5"}),"Nueva Factura"]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nmero"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pagado"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pendiente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(b=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(So,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:b.invoice_number})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm text-gray-900",children:b.client_name}),b.business_name&&s.jsx("div",{className:"text-sm text-gray-500",children:b.business_name})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:w(b.issue_date)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:_(b.total_amount)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:_(b.paid_amount)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600",children:_(b.remaining_amount)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:y(b.payment_status)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx("button",{onClick:()=>{p(b.id),f("detail")},className:"text-blue-600 hover:text-blue-900",title:"Ver detalle",children:s.jsx(x1,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>{p(b.id),f("edit")},className:"text-gray-600 hover:text-gray-900",title:"Editar",children:s.jsx(Y3,{className:"w-5 h-5"})}),b.payment_status!=="paid"&&s.jsx("button",{onClick:()=>{p(b.id),f("detail")},className:"text-green-600 hover:text-green-900",title:"Registrar pago",children:s.jsx(Od,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>v(b.id,b.invoice_number),className:"text-red-600 hover:text-red-900",title:"Eliminar",children:s.jsx(y1,{className:"w-5 h-5"})})]})})]},b.id))})]}),c.pages>1&&s.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[s.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[s.jsx("button",{onClick:()=>o({...i,page:i.page-1}),disabled:i.page===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Anterior"}),s.jsx("button",{onClick:()=>o({...i,page:i.page+1}),disabled:i.page===c.pages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Siguiente"})]}),s.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[s.jsx("div",{children:s.jsxs("p",{className:"text-sm text-gray-700",children:["Mostrando ",s.jsx("span",{className:"font-medium",children:(i.page-1)*i.limit+1})," a"," ",s.jsx("span",{className:"font-medium",children:Math.min(i.page*i.limit,c.total)})," ","de ",s.jsx("span",{className:"font-medium",children:c.total})," resultados"]})}),s.jsx("div",{children:s.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[s.jsx("button",{onClick:()=>o({...i,page:i.page-1}),disabled:i.page===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Anterior"}),[...Array(c.pages)].map((b,N)=>s.jsx("button",{onClick:()=>o({...i,page:N+1}),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${i.page===N+1?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:N+1},N+1)),s.jsx("button",{onClick:()=>o({...i,page:i.page+1}),disabled:i.page===c.pages,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Siguiente"})]})})]})]})]})})]})]})},Pue=()=>{var vt;const[e,t]=E.useState("commercials"),[r,n]=E.useState([]),[a,i]=E.useState([]),[o,c]=E.useState([]),[d,u]=E.useState(!1),[f,m]=E.useState(!1),[p,x]=E.useState(!1),[v,y]=E.useState(!1),[_,w]=E.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},type:"danger"}),[b,N]=E.useState(null),[S,C]=E.useState(null),[O,A]=E.useState([]),[z,$]=E.useState(""),W=Ht(),[F,G]=E.useState({username:"",password:"",email:"",full_name:"",phone:""}),[ee,K]=E.useState({title:"",description:"",type:"document",video_url:"",content:"",external_url:"",is_public:!0,commercial_id:"",category:""}),[oe,Z]=E.useState(!1),[pe,Q]=E.useState(null),[ce,le]=E.useState(!1),[B,X]=E.useState(null),[ae,fe]=E.useState(null),re=localStorage.getItem("crm_token");E.useEffect(()=>{e==="commercials"&&ge(),e==="training"&&Le(),e==="support"&&ue()},[e]);const ge=async()=>{try{console.log("Fetching commercials with token:",re);const se=await fetch(`${Y}/commercials`,{headers:{Authorization:`Bearer ${re}`}});if(console.log("Fetch response status:",se.status),se.ok){const Se=await se.json();console.log("Commercials data:",Se),n(Se)}else console.error("Fetch failed:",await se.text()),se.status===401&&W.error("Sesin expirada. Por favor, recarga la pgina.")}catch(se){console.error("Error:",se)}},Oe=async se=>{se.preventDefault(),Z(!0);try{const Se=new AbortController,dr=setTimeout(()=>Se.abort(),3e4),un=ce?`${Y}/commercials/${B}`:`${Y}/commercials`,Pr=ce?"PUT":"POST",ls={...F};ce&&!ls.password&&delete ls.password;const cs=await fetch(un,{method:Pr,headers:{"Content-Type":"application/json",Authorization:`Bearer ${re}`},body:JSON.stringify(ls),signal:Se.signal});if(clearTimeout(dr),!cs.ok){const gt=await cs.json();throw new Error(gt.error||(ce?"Error al actualizar":"Error al crear"))}W.success(ce?"Comercial actualizado":"Comercial creado correctamente"),u(!1),G({username:"",password:"",email:"",full_name:"",phone:""}),le(!1),X(null),ge()}catch(Se){Se.name==="AbortError"?W.error("Tiempo de espera agotado."):W.error(Se.message)}finally{Z(!1)}},me=se=>{G({username:se.username,password:"",email:se.email,full_name:se.full_name,phone:se.phone||""}),le(!0),X(se.id),u(!0)},_e=async se=>{try{const Se=await fetch(`${Y}/commercials/${se.id}`,{headers:{Authorization:`Bearer ${re}`}});Se.ok&&(N(await Se.json()),m(!0))}catch{W.error("Error al cargar detalles")}},$e=se=>{w({isOpen:!0,title:"Eliminar comercial?",message:"Ests seguro de eliminar este comercial y todos sus datos asociados?",confirmText:"Eliminar",type:"danger",onConfirm:async()=>{Q(se);try{if(!(await fetch(`${Y}/commercials/${se}`,{method:"DELETE",headers:{Authorization:`Bearer ${re}`}})).ok)throw new Error("Error al eliminar");W.success("Comercial eliminado"),ge()}catch(Se){W.error(Se.message)}finally{Q(null)}}})},Pe=async se=>{try{if(!(await fetch(`${Y}/commercials/${se}/resend-welcome`,{method:"POST",headers:{Authorization:`Bearer ${re}`}})).ok)throw new Error("Error al reenviar email");W.success("Email de bienvenida reenviado correctamente")}catch(Se){W.error(Se.message)}},Le=async()=>{try{const se=await fetch(`${Y}/training`,{headers:{Authorization:`Bearer ${re}`}});se.ok&&i(await se.json())}catch(se){console.error("Error:",se)}},Ge=async se=>{se.preventDefault(),Z(!0);try{const Se=new FormData;if(Object.entries(ee).forEach(([un,Pr])=>Se.append(un,Pr)),ae&&Se.append("file",ae),!(await fetch(`${Y}/training`,{method:"POST",headers:{Authorization:`Bearer ${re}`},body:Se})).ok)throw new Error("Error al crear material");W.success("Material creado"),x(!1),K({title:"",description:"",type:"document",video_url:"",content:"",external_url:"",is_public:!0,commercial_id:"",category:""}),fe(null),Le()}catch(Se){W.error(Se.message)}finally{Z(!1)}},et=se=>{w({isOpen:!0,title:"Eliminar material?",message:"Ests seguro de eliminar este material de formacin?",confirmText:"Eliminar",type:"danger",onConfirm:async()=>{try{await fetch(`${Y}/training/${se}`,{method:"DELETE",headers:{Authorization:`Bearer ${re}`}}),W.success("Material eliminado"),Le()}catch{W.error("Error al eliminar")}}})},ue=async()=>{try{const se=await fetch(`${Y}/support`,{headers:{Authorization:`Bearer ${re}`}});se.ok&&c(await se.json())}catch(se){console.error("Error:",se)}},Ae=async se=>{try{const Se=await fetch(`${Y}/support/${se.id}`,{headers:{Authorization:`Bearer ${re}`}});if(Se.ok){const dr=await Se.json();C(dr),A(dr.messages||[]),y(!0)}}catch{W.error("Error al cargar ticket")}},lt=async()=>{if(z.trim())try{(await fetch(`${Y}/support/${S.id}/reply`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${re}`},body:JSON.stringify({message:z})})).ok&&($(""),Ae(S))}catch{W.error("Error al enviar")}},Ke=async se=>{try{await fetch(`${Y}/support/${S.id}/status`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${re}`},body:JSON.stringify({status:se})}),W.success("Estado actualizado"),Ae({...S,status:se}),ue()}catch{W.error("Error")}},V=se=>{navigator.clipboard.writeText(se),W.success("Copiado")},st=[{id:"commercials",label:"Comerciales",icon:ts},{id:"training",label:"Formacin",icon:_l},{id:"support",label:"Soporte",icon:Ph}],Ut={open:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",in_progress:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",resolved:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",closed:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"},br={video:x4,document:It,tutorial:_l,link:a4};return s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gestin de Comerciales"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Equipo comercial, formacin y soporte"})]}),s.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-700 rounded-xl p-1",children:st.map(se=>s.jsxs("button",{onClick:()=>t(se.id),className:`flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-all ${e===se.id?"bg-white dark:bg-gray-600 text-indigo-600 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900"}`,children:[s.jsx(se.icon,{className:"w-4 h-4 mr-2"}),se.label,se.id==="support"&&o.filter(Se=>Se.status==="open").length>0&&s.jsx("span",{className:"ml-2 bg-red-500 text-white text-xs rounded-full px-2 py-0.5",children:o.filter(Se=>Se.status==="open").length})]},se.id))})]}),e==="commercials"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex justify-end mb-4",children:s.jsxs(Ne,{onClick:()=>u(!0),children:[s.jsx(xr,{className:"w-4 h-4 mr-2"}),"Nuevo Comercial"]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Comercial"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Cdigo"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Email"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Acciones"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[r.map(se=>{var Se;return s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold",children:((Se=se.full_name)==null?void 0:Se.charAt(0))||"C"}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:se.full_name}),s.jsxs("div",{className:"text-xs text-gray-500",children:["@",se.username]})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"px-2 py-1 text-xs font-mono rounded bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400",children:se.commercial_code||"N/A"})}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:se.email}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("button",{onClick:()=>_e(se),className:"text-indigo-600 hover:text-indigo-900 flex items-center text-sm",children:[s.jsx(ln,{className:"w-4 h-4 mr-1"})," Ver Ficha"]}),s.jsxs("button",{onClick:()=>me(se),className:"text-blue-600 hover:text-blue-900 flex items-center text-sm",children:[s.jsx(Ug,{className:"w-4 h-4 mr-1"})," Editar"]}),s.jsxs("button",{onClick:()=>$e(se.id),disabled:pe===se.id,className:"text-red-600 hover:text-red-900 flex items-center text-sm disabled:opacity-50",children:[s.jsx(Ar,{className:"w-4 h-4 mr-1"})," ",pe===se.id?"...":"Eliminar"]})]})})]},se.id)}),r.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"px-6 py-8 text-center text-gray-500",children:"No hay comerciales"})})]})]})})]}),e==="training"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex justify-end mb-4",children:s.jsxs(Ne,{onClick:()=>x(!0),children:[s.jsx(xr,{className:"w-4 h-4 mr-2"}),"Nuevo Material"]})}),s.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.map(se=>{const Se=br[se.type]||It;return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-10 w-10 rounded-lg bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center",children:s.jsx(Se,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:se.title}),s.jsx("span",{className:"text-xs text-gray-500 capitalize",children:se.type})]})]}),s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${se.is_public?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:se.is_public?"Pblico":"Privado"})]}),se.description&&s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:se.description}),s.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-100 dark:border-gray-700",children:[s.jsx("span",{className:"text-xs text-gray-400",children:se.category||"Sin categora"}),s.jsx("button",{onClick:()=>et(se.id),className:"text-red-500 hover:text-red-700 text-sm",children:s.jsx(Ar,{className:"w-4 h-4"})})]})]},se.id)}),a.length===0&&s.jsxs("div",{className:"col-span-full text-center py-12 text-gray-500",children:[s.jsx(_l,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"No hay materiales de formacin"})]})]})]}),e==="support"&&s.jsxs("div",{className:"space-y-4",children:[o.map(se=>s.jsx("div",{onClick:()=>Ae(se),className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg transition-shadow cursor-pointer",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${Ut[se.status]}`,children:se.status==="open"?"Abierto":se.status==="in_progress"?"En progreso":se.status==="resolved"?"Resuelto":"Cerrado"}),se.unread_count>0&&s.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-0.5",children:se.unread_count})]}),s.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:se.subject}),s.jsxs("p",{className:"text-sm text-gray-500",children:["De: ",se.commercial_name," (",se.commercial_email,")"]})]}),s.jsx("span",{className:"text-xs text-gray-400",children:new Date(se.created_at).toLocaleDateString()})]})},se.id)),o.length===0&&s.jsxs("div",{className:"text-center py-12 text-gray-500",children:[s.jsx(Ph,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"No hay tickets de soporte"})]})]}),s.jsx(Dr,{isOpen:d,onClose:()=>{u(!1),le(!1)},title:ce?"Editar Comercial":"Nuevo Comercial",children:s.jsxs("form",{onSubmit:Oe,className:"space-y-4",children:[s.jsx(Ye,{label:"Nombre Completo",name:"full_name",value:F.full_name,onChange:se=>G({...F,full_name:se.target.value}),required:!0,icon:s.jsx(pr,{className:"w-4 h-4"})}),s.jsx(Ye,{label:"Email",name:"email",type:"email",value:F.email,onChange:se=>G({...F,email:se.target.value}),required:!0,icon:s.jsx(Tt,{className:"w-4 h-4"})}),s.jsx(Ye,{label:"Telfono",name:"phone",value:F.phone,onChange:se=>G({...F,phone:se.target.value}),icon:s.jsx(Kn,{className:"w-4 h-4"})}),s.jsx(Ye,{label:"Usuario",name:"username",value:F.username,onChange:se=>G({...F,username:se.target.value}),required:!0,icon:s.jsx(pr,{className:"w-4 h-4"})}),s.jsx(Ye,{label:ce?"Nueva Contrasea (dejar en blanco para no cambiar)":"Contrasea",name:"password",type:"password",value:F.password,onChange:se=>G({...F,password:se.target.value}),required:!ce,icon:s.jsx(Th,{className:"w-4 h-4"})}),s.jsxs("div",{className:"pt-4 flex justify-end space-x-3",children:[s.jsx(Ne,{variant:"ghost",onClick:()=>{u(!1),le(!1)},children:"Cancelar"}),s.jsx(Ne,{type:"submit",disabled:oe,children:oe?"Guardando...":ce?"Actualizar Comercial":"Crear Comercial"})]})]})}),s.jsx(Dr,{isOpen:f,onClose:()=>m(!1),title:"Ficha del Comercial",children:b&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"h-16 w-16 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold text-2xl",children:(vt=b.full_name)==null?void 0:vt.charAt(0)}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:b.full_name}),s.jsxs("p",{className:"text-sm text-gray-500",children:["@",b.username]})]})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Cdigo Comercial"}),s.jsxs("button",{onClick:()=>V(b.commercial_code),className:"text-indigo-600 hover:text-indigo-800 flex items-center text-sm",children:[s.jsx(kl,{className:"w-4 h-4 mr-1"})," Copiar"]})]}),s.jsx("div",{className:"font-mono text-lg font-bold text-indigo-600 dark:text-indigo-400",children:b.commercial_code}),b.qr_code_url&&s.jsxs("div",{className:"mt-4 flex flex-col items-center gap-3",children:[s.jsx("div",{className:"bg-white p-3 rounded-xl shadow-sm",children:s.jsx("img",{src:b.qr_code_url,alt:"QR",className:"w-40 h-40 object-contain"})}),s.jsxs("button",{onClick:()=>Pe(b.id),className:"flex items-center gap-2 px-4 py-2 text-sm bg-indigo-50 text-indigo-600 hover:bg-indigo-100 rounded-lg transition-colors",children:[s.jsx(Tt,{className:"w-4 h-4"}),"Reenviar Email de Bienvenida"]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-gray-500",children:"Email"}),s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:b.email})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-gray-500",children:"Telfono"}),s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:b.phone||"N/A"})]})]}),b.stats&&s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:b.stats.total_leads}),s.jsx("div",{className:"text-xs text-gray-500",children:"Total Leads"})]}),s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-xl p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:b.stats.won_leads}),s.jsx("div",{className:"text-xs text-gray-500",children:"Ganados"})]}),s.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-xl p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-amber-600",children:b.stats.new_leads}),s.jsx("div",{className:"text-xs text-gray-500",children:"Nuevos"})]})]})]})}),s.jsx(Dr,{isOpen:p,onClose:()=>x(!1),title:"Nuevo Material de Formacin",children:s.jsxs("form",{onSubmit:Ge,className:"space-y-4",children:[s.jsx(Ye,{label:"Ttulo",value:ee.title,onChange:se=>K({...ee,title:se.target.value}),required:!0}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tipo"}),s.jsxs("select",{value:ee.type,onChange:se=>K({...ee,type:se.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",children:[s.jsx("option",{value:"document",children:"Documento"}),s.jsx("option",{value:"video",children:"Video"}),s.jsx("option",{value:"tutorial",children:"Tutorial"}),s.jsx("option",{value:"link",children:"Enlace"})]})]}),s.jsx("textarea",{placeholder:"Descripcin",value:ee.description,onChange:se=>K({...ee,description:se.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",rows:2}),ee.type==="video"&&s.jsx(Ye,{label:"URL del Video (YouTube, Vimeo...)",value:ee.video_url,onChange:se=>K({...ee,video_url:se.target.value})}),ee.type==="link"&&s.jsx(Ye,{label:"URL del Enlace",value:ee.external_url,onChange:se=>K({...ee,external_url:se.target.value})}),ee.type==="tutorial"&&s.jsx("textarea",{placeholder:"Contenido del tutorial (HTML permitido)",value:ee.content,onChange:se=>K({...ee,content:se.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",rows:6}),ee.type==="document"&&s.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center",children:[s.jsx("input",{type:"file",onChange:se=>fe(se.target.files[0]),className:"hidden",id:"fileInput"}),s.jsxs("label",{htmlFor:"fileInput",className:"cursor-pointer",children:[s.jsx(mR,{className:"w-8 h-8 mx-auto text-gray-400 mb-2"}),s.jsx("p",{className:"text-sm text-gray-500",children:ae?ae.name:"Click para subir archivo"})]})]}),s.jsx(Ye,{label:"Categora",value:ee.category,onChange:se=>K({...ee,category:se.target.value}),placeholder:"Ej: Ventas, Producto..."}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:ee.is_public,onChange:se=>K({...ee,is_public:se.target.checked}),className:"mr-2"}),s.jsx("span",{className:"text-sm",children:"Visible para todos"})]}),!ee.is_public&&s.jsxs("select",{value:ee.commercial_id,onChange:se=>K({...ee,commercial_id:se.target.value}),className:"flex-1 px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 text-sm",children:[s.jsx("option",{value:"",children:"Seleccionar comercial..."}),r.map(se=>s.jsx("option",{value:se.id,children:se.full_name},se.id))]})]}),s.jsxs("div",{className:"pt-4 flex justify-end space-x-3",children:[s.jsx(Ne,{variant:"ghost",onClick:()=>x(!1),children:"Cancelar"}),s.jsx(Ne,{type:"submit",disabled:oe,children:oe?"Guardando...":"Guardar Material"})]})]})}),s.jsx(Dr,{isOpen:v,onClose:()=>y(!1),title:(S==null?void 0:S.subject)||"Ticket",children:S&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${Ut[S.status]}`,children:S.status==="open"?"Abierto":S.status==="in_progress"?"En progreso":S.status==="resolved"?"Resuelto":"Cerrado"}),s.jsxs("span",{className:"text-sm text-gray-500",children:["De: ",S.commercial_name]})]}),s.jsxs("select",{value:S.status,onChange:se=>Ke(se.target.value),className:"text-sm px-2 py-1 border rounded dark:bg-gray-700 dark:border-gray-600",children:[s.jsx("option",{value:"open",children:"Abierto"}),s.jsx("option",{value:"in_progress",children:"En progreso"}),s.jsx("option",{value:"resolved",children:"Resuelto"}),s.jsx("option",{value:"closed",children:"Cerrado"})]})]}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4 max-h-80 overflow-y-auto space-y-3",children:O.map(se=>s.jsx("div",{className:`flex ${se.sender_role==="admin"?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-[80%] rounded-xl px-4 py-2 ${se.sender_role==="admin"?"bg-indigo-600 text-white":"bg-white dark:bg-gray-600 text-gray-900 dark:text-white border dark:border-gray-500"}`,children:[s.jsx("p",{className:"text-sm",children:se.message}),s.jsxs("p",{className:`text-xs mt-1 ${se.sender_role==="admin"?"text-indigo-200":"text-gray-400"}`,children:[se.sender_name,"  ",new Date(se.created_at).toLocaleTimeString()]})]})},se.id))}),S.status!=="closed"&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{value:z,onChange:se=>$(se.target.value),placeholder:"Escribe una respuesta...",className:"flex-1 px-4 py-2 border rounded-xl dark:bg-gray-700 dark:border-gray-600",onKeyPress:se=>se.key==="Enter"&&lt()}),s.jsx(Ne,{onClick:lt,children:s.jsx(Wr,{className:"w-4 h-4"})})]})]})}),s.jsx(Yl,{isOpen:_.isOpen,onClose:()=>w({..._,isOpen:!1}),onConfirm:_.onConfirm,title:_.title,message:_.message,confirmText:_.confirmText,type:_.type})]})},Tue=({selectedCount:e,onUpdateStatus:t,onAssign:r,onAddTag:n,onDelete:a,onCancel:i})=>e===0?null:s.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 animate-slide-up",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 p-4 flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 px-4 py-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:[s.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-bold text-lg",children:e}),s.jsx("span",{className:"text-blue-600 dark:text-blue-400 text-sm",children:"seleccionados"})]}),s.jsx("div",{className:"h-8 w-px bg-gray-300 dark:bg-gray-600"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{className:"relative group",children:[s.jsx("button",{className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg text-sm font-medium transition-colors",children:"Cambiar Estado"}),s.jsx("div",{className:"absolute bottom-full left-0 mb-2 hidden group-hover:block bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 p-2 min-w-[150px]",children:["new","contacted","qualified","proposal_sent","won","lost"].map(o=>s.jsxs("button",{onClick:()=>t(o),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[o==="new"&&"Nuevo",o==="contacted"&&"Contactado",o==="qualified"&&"Cualificado",o==="proposal_sent"&&"Propuesta Enviada",o==="won"&&"Ganado",o==="lost"&&"Perdido"]},o))})]}),s.jsx(Ne,{variant:"secondary",onClick:n,size:"sm",children:" Agregar Tag"}),s.jsx(Ne,{variant:"secondary",onClick:a,size:"sm",className:"text-red-600 hover:bg-red-50",children:" Eliminar"}),s.jsx("div",{className:"h-8 w-px bg-gray-300 dark:bg-gray-600"}),s.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Cancelar",children:""})]})]})});function eM(e,t){const r=E.useRef(t);E.useEffect(function(){t!==r.current&&e.attributionControl!=null&&(r.current!=null&&e.attributionControl.removeAttribution(r.current),t!=null&&e.attributionControl.addAttribution(t)),r.current=t},[e,t])}function Mue(e,t,r){t.center!==r.center&&e.setLatLng(t.center),t.radius!=null&&t.radius!==r.radius&&e.setRadius(t.radius)}const Oue=1;function Due(e){return Object.freeze({__version:Oue,map:e})}function tM(e,t){return Object.freeze({...e,...t})}const rM=E.createContext(null),nM=rM.Provider;function Y0(){const e=E.useContext(rM);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function sM(e){function t(r,n){const{instance:a,context:i}=e(r).current;return E.useImperativeHandle(n,()=>a),r.children==null?null:J.createElement(nM,{value:i},r.children)}return E.forwardRef(t)}function Lue(e){function t(r,n){const[a,i]=E.useState(!1),{instance:o}=e(r,i).current;E.useImperativeHandle(n,()=>o),E.useEffect(function(){a&&o.update()},[o,a,r.children]);const c=o._contentNode;return c?zd.createPortal(r.children,c):null}return E.forwardRef(t)}function Aue(e){function t(r,n){const{instance:a}=e(r).current;return E.useImperativeHandle(n,()=>a),null}return E.forwardRef(t)}function v1(e,t){const r=E.useRef();E.useEffect(function(){return t!=null&&e.instance.on(t),r.current=t,function(){r.current!=null&&e.instance.off(r.current),r.current=null}},[e,t])}function G0(e,t){const r=e.pane??t.pane;return r?{...e,pane:r}:e}function Rue(e,t){return function(n,a){const i=Y0(),o=e(G0(n,i),i);return eM(i.map,n.attribution),v1(o.current,n.eventHandlers),t(o.current,i,n,a),o}}var vb={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(r,n){n(t)})(kn,function(r){var n="1.9.4";function a(l){var h,g,k,P;for(g=1,k=arguments.length;g<k;g++){P=arguments[g];for(h in P)l[h]=P[h]}return l}var i=Object.create||function(){function l(){}return function(h){return l.prototype=h,new l}}();function o(l,h){var g=Array.prototype.slice;if(l.bind)return l.bind.apply(l,g.call(arguments,1));var k=g.call(arguments,2);return function(){return l.apply(h,k.length?k.concat(g.call(arguments)):arguments)}}var c=0;function d(l){return"_leaflet_id"in l||(l._leaflet_id=++c),l._leaflet_id}function u(l,h,g){var k,P,R,q;return q=function(){k=!1,P&&(R.apply(g,P),P=!1)},R=function(){k?P=arguments:(l.apply(g,arguments),setTimeout(q,h),k=!0)},R}function f(l,h,g){var k=h[1],P=h[0],R=k-P;return l===k&&g?l:((l-P)%R+R)%R+P}function m(){return!1}function p(l,h){if(h===!1)return l;var g=Math.pow(10,h===void 0?6:h);return Math.round(l*g)/g}function x(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function v(l){return x(l).split(/\s+/)}function y(l,h){Object.prototype.hasOwnProperty.call(l,"options")||(l.options=l.options?i(l.options):{});for(var g in h)l.options[g]=h[g];return l.options}function _(l,h,g){var k=[];for(var P in l)k.push(encodeURIComponent(g?P.toUpperCase():P)+"="+encodeURIComponent(l[P]));return(!h||h.indexOf("?")===-1?"?":"&")+k.join("&")}var w=/\{ *([\w_ -]+) *\}/g;function b(l,h){return l.replace(w,function(g,k){var P=h[k];if(P===void 0)throw new Error("No value provided for variable "+g);return typeof P=="function"&&(P=P(h)),P})}var N=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function S(l,h){for(var g=0;g<l.length;g++)if(l[g]===h)return g;return-1}var C="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function O(l){return window["webkit"+l]||window["moz"+l]||window["ms"+l]}var A=0;function z(l){var h=+new Date,g=Math.max(0,16-(h-A));return A=h+g,window.setTimeout(l,g)}var $=window.requestAnimationFrame||O("RequestAnimationFrame")||z,W=window.cancelAnimationFrame||O("CancelAnimationFrame")||O("CancelRequestAnimationFrame")||function(l){window.clearTimeout(l)};function F(l,h,g){if(g&&$===z)l.call(h);else return $.call(window,o(l,h))}function G(l){l&&W.call(window,l)}var ee={__proto__:null,extend:a,create:i,bind:o,get lastId(){return c},stamp:d,throttle:u,wrapNum:f,falseFn:m,formatNum:p,trim:x,splitWords:v,setOptions:y,getParamString:_,template:b,isArray:N,indexOf:S,emptyImageUrl:C,requestFn:$,cancelFn:W,requestAnimFrame:F,cancelAnimFrame:G};function K(){}K.extend=function(l){var h=function(){y(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},g=h.__super__=this.prototype,k=i(g);k.constructor=h,h.prototype=k;for(var P in this)Object.prototype.hasOwnProperty.call(this,P)&&P!=="prototype"&&P!=="__super__"&&(h[P]=this[P]);return l.statics&&a(h,l.statics),l.includes&&(oe(l.includes),a.apply(null,[k].concat(l.includes))),a(k,l),delete k.statics,delete k.includes,k.options&&(k.options=g.options?i(g.options):{},a(k.options,l.options)),k._initHooks=[],k.callInitHooks=function(){if(!this._initHooksCalled){g.callInitHooks&&g.callInitHooks.call(this),this._initHooksCalled=!0;for(var R=0,q=k._initHooks.length;R<q;R++)k._initHooks[R].call(this)}},h},K.include=function(l){var h=this.prototype.options;return a(this.prototype,l),l.options&&(this.prototype.options=h,this.mergeOptions(l.options)),this},K.mergeOptions=function(l){return a(this.prototype.options,l),this},K.addInitHook=function(l){var h=Array.prototype.slice.call(arguments,1),g=typeof l=="function"?l:function(){this[l].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(g),this};function oe(l){if(!(typeof L>"u"||!L||!L.Mixin)){l=N(l)?l:[l];for(var h=0;h<l.length;h++)l[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Z={on:function(l,h,g){if(typeof l=="object")for(var k in l)this._on(k,l[k],h);else{l=v(l);for(var P=0,R=l.length;P<R;P++)this._on(l[P],h,g)}return this},off:function(l,h,g){if(!arguments.length)delete this._events;else if(typeof l=="object")for(var k in l)this._off(k,l[k],h);else{l=v(l);for(var P=arguments.length===1,R=0,q=l.length;R<q;R++)P?this._off(l[R]):this._off(l[R],h,g)}return this},_on:function(l,h,g,k){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(l,h,g)===!1){g===this&&(g=void 0);var P={fn:h,ctx:g};k&&(P.once=!0),this._events=this._events||{},this._events[l]=this._events[l]||[],this._events[l].push(P)}},_off:function(l,h,g){var k,P,R;if(this._events&&(k=this._events[l],!!k)){if(arguments.length===1){if(this._firingCount)for(P=0,R=k.length;P<R;P++)k[P].fn=m;delete this._events[l];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var q=this._listens(l,h,g);if(q!==!1){var te=k[q];this._firingCount&&(te.fn=m,this._events[l]=k=k.slice()),k.splice(q,1)}}},fire:function(l,h,g){if(!this.listens(l,g))return this;var k=a({},h,{type:l,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var P=this._events[l];if(P){this._firingCount=this._firingCount+1||1;for(var R=0,q=P.length;R<q;R++){var te=P[R],ie=te.fn;te.once&&this.off(l,ie,te.ctx),ie.call(te.ctx||this,k)}this._firingCount--}}return g&&this._propagateEvent(k),this},listens:function(l,h,g,k){typeof l!="string"&&console.warn('"string" type argument expected');var P=h;typeof h!="function"&&(k=!!h,P=void 0,g=void 0);var R=this._events&&this._events[l];if(R&&R.length&&this._listens(l,P,g)!==!1)return!0;if(k){for(var q in this._eventParents)if(this._eventParents[q].listens(l,h,g,k))return!0}return!1},_listens:function(l,h,g){if(!this._events)return!1;var k=this._events[l]||[];if(!h)return!!k.length;g===this&&(g=void 0);for(var P=0,R=k.length;P<R;P++)if(k[P].fn===h&&k[P].ctx===g)return P;return!1},once:function(l,h,g){if(typeof l=="object")for(var k in l)this._on(k,l[k],h,!0);else{l=v(l);for(var P=0,R=l.length;P<R;P++)this._on(l[P],h,g,!0)}return this},addEventParent:function(l){return this._eventParents=this._eventParents||{},this._eventParents[d(l)]=l,this},removeEventParent:function(l){return this._eventParents&&delete this._eventParents[d(l)],this},_propagateEvent:function(l){for(var h in this._eventParents)this._eventParents[h].fire(l.type,a({layer:l.target,propagatedFrom:l.target},l),!0)}};Z.addEventListener=Z.on,Z.removeEventListener=Z.clearAllEventListeners=Z.off,Z.addOneTimeEventListener=Z.once,Z.fireEvent=Z.fire,Z.hasEventListeners=Z.listens;var pe=K.extend(Z);function Q(l,h,g){this.x=g?Math.round(l):l,this.y=g?Math.round(h):h}var ce=Math.trunc||function(l){return l>0?Math.floor(l):Math.ceil(l)};Q.prototype={clone:function(){return new Q(this.x,this.y)},add:function(l){return this.clone()._add(le(l))},_add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.clone()._subtract(le(l))},_subtract:function(l){return this.x-=l.x,this.y-=l.y,this},divideBy:function(l){return this.clone()._divideBy(l)},_divideBy:function(l){return this.x/=l,this.y/=l,this},multiplyBy:function(l){return this.clone()._multiplyBy(l)},_multiplyBy:function(l){return this.x*=l,this.y*=l,this},scaleBy:function(l){return new Q(this.x*l.x,this.y*l.y)},unscaleBy:function(l){return new Q(this.x/l.x,this.y/l.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ce(this.x),this.y=ce(this.y),this},distanceTo:function(l){l=le(l);var h=l.x-this.x,g=l.y-this.y;return Math.sqrt(h*h+g*g)},equals:function(l){return l=le(l),l.x===this.x&&l.y===this.y},contains:function(l){return l=le(l),Math.abs(l.x)<=Math.abs(this.x)&&Math.abs(l.y)<=Math.abs(this.y)},toString:function(){return"Point("+p(this.x)+", "+p(this.y)+")"}};function le(l,h,g){return l instanceof Q?l:N(l)?new Q(l[0],l[1]):l==null?l:typeof l=="object"&&"x"in l&&"y"in l?new Q(l.x,l.y):new Q(l,h,g)}function B(l,h){if(l)for(var g=h?[l,h]:l,k=0,P=g.length;k<P;k++)this.extend(g[k])}B.prototype={extend:function(l){var h,g;if(!l)return this;if(l instanceof Q||typeof l[0]=="number"||"x"in l)h=g=le(l);else if(l=X(l),h=l.min,g=l.max,!h||!g)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=g.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(g.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(g.y,this.max.y)),this},getCenter:function(l){return le((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,l)},getBottomLeft:function(){return le(this.min.x,this.max.y)},getTopRight:function(){return le(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var h,g;return typeof l[0]=="number"||l instanceof Q?l=le(l):l=X(l),l instanceof B?(h=l.min,g=l.max):h=g=l,h.x>=this.min.x&&g.x<=this.max.x&&h.y>=this.min.y&&g.y<=this.max.y},intersects:function(l){l=X(l);var h=this.min,g=this.max,k=l.min,P=l.max,R=P.x>=h.x&&k.x<=g.x,q=P.y>=h.y&&k.y<=g.y;return R&&q},overlaps:function(l){l=X(l);var h=this.min,g=this.max,k=l.min,P=l.max,R=P.x>h.x&&k.x<g.x,q=P.y>h.y&&k.y<g.y;return R&&q},isValid:function(){return!!(this.min&&this.max)},pad:function(l){var h=this.min,g=this.max,k=Math.abs(h.x-g.x)*l,P=Math.abs(h.y-g.y)*l;return X(le(h.x-k,h.y-P),le(g.x+k,g.y+P))},equals:function(l){return l?(l=X(l),this.min.equals(l.getTopLeft())&&this.max.equals(l.getBottomRight())):!1}};function X(l,h){return!l||l instanceof B?l:new B(l,h)}function ae(l,h){if(l)for(var g=h?[l,h]:l,k=0,P=g.length;k<P;k++)this.extend(g[k])}ae.prototype={extend:function(l){var h=this._southWest,g=this._northEast,k,P;if(l instanceof re)k=l,P=l;else if(l instanceof ae){if(k=l._southWest,P=l._northEast,!k||!P)return this}else return l?this.extend(ge(l)||fe(l)):this;return!h&&!g?(this._southWest=new re(k.lat,k.lng),this._northEast=new re(P.lat,P.lng)):(h.lat=Math.min(k.lat,h.lat),h.lng=Math.min(k.lng,h.lng),g.lat=Math.max(P.lat,g.lat),g.lng=Math.max(P.lng,g.lng)),this},pad:function(l){var h=this._southWest,g=this._northEast,k=Math.abs(h.lat-g.lat)*l,P=Math.abs(h.lng-g.lng)*l;return new ae(new re(h.lat-k,h.lng-P),new re(g.lat+k,g.lng+P))},getCenter:function(){return new re((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new re(this.getNorth(),this.getWest())},getSouthEast:function(){return new re(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){typeof l[0]=="number"||l instanceof re||"lat"in l?l=ge(l):l=fe(l);var h=this._southWest,g=this._northEast,k,P;return l instanceof ae?(k=l.getSouthWest(),P=l.getNorthEast()):k=P=l,k.lat>=h.lat&&P.lat<=g.lat&&k.lng>=h.lng&&P.lng<=g.lng},intersects:function(l){l=fe(l);var h=this._southWest,g=this._northEast,k=l.getSouthWest(),P=l.getNorthEast(),R=P.lat>=h.lat&&k.lat<=g.lat,q=P.lng>=h.lng&&k.lng<=g.lng;return R&&q},overlaps:function(l){l=fe(l);var h=this._southWest,g=this._northEast,k=l.getSouthWest(),P=l.getNorthEast(),R=P.lat>h.lat&&k.lat<g.lat,q=P.lng>h.lng&&k.lng<g.lng;return R&&q},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(l,h){return l?(l=fe(l),this._southWest.equals(l.getSouthWest(),h)&&this._northEast.equals(l.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function fe(l,h){return l instanceof ae?l:new ae(l,h)}function re(l,h,g){if(isNaN(l)||isNaN(h))throw new Error("Invalid LatLng object: ("+l+", "+h+")");this.lat=+l,this.lng=+h,g!==void 0&&(this.alt=+g)}re.prototype={equals:function(l,h){if(!l)return!1;l=ge(l);var g=Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng));return g<=(h===void 0?1e-9:h)},toString:function(l){return"LatLng("+p(this.lat,l)+", "+p(this.lng,l)+")"},distanceTo:function(l){return me.distance(this,ge(l))},wrap:function(){return me.wrapLatLng(this)},toBounds:function(l){var h=180*l/40075017,g=h/Math.cos(Math.PI/180*this.lat);return fe([this.lat-h,this.lng-g],[this.lat+h,this.lng+g])},clone:function(){return new re(this.lat,this.lng,this.alt)}};function ge(l,h,g){return l instanceof re?l:N(l)&&typeof l[0]!="object"?l.length===3?new re(l[0],l[1],l[2]):l.length===2?new re(l[0],l[1]):null:l==null?l:typeof l=="object"&&"lat"in l?new re(l.lat,"lng"in l?l.lng:l.lon,l.alt):h===void 0?null:new re(l,h,g)}var Oe={latLngToPoint:function(l,h){var g=this.projection.project(l),k=this.scale(h);return this.transformation._transform(g,k)},pointToLatLng:function(l,h){var g=this.scale(h),k=this.transformation.untransform(l,g);return this.projection.unproject(k)},project:function(l){return this.projection.project(l)},unproject:function(l){return this.projection.unproject(l)},scale:function(l){return 256*Math.pow(2,l)},zoom:function(l){return Math.log(l/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite)return null;var h=this.projection.bounds,g=this.scale(l),k=this.transformation.transform(h.min,g),P=this.transformation.transform(h.max,g);return new B(k,P)},infinite:!1,wrapLatLng:function(l){var h=this.wrapLng?f(l.lng,this.wrapLng,!0):l.lng,g=this.wrapLat?f(l.lat,this.wrapLat,!0):l.lat,k=l.alt;return new re(g,h,k)},wrapLatLngBounds:function(l){var h=l.getCenter(),g=this.wrapLatLng(h),k=h.lat-g.lat,P=h.lng-g.lng;if(k===0&&P===0)return l;var R=l.getSouthWest(),q=l.getNorthEast(),te=new re(R.lat-k,R.lng-P),ie=new re(q.lat-k,q.lng-P);return new ae(te,ie)}},me=a({},Oe,{wrapLng:[-180,180],R:6371e3,distance:function(l,h){var g=Math.PI/180,k=l.lat*g,P=h.lat*g,R=Math.sin((h.lat-l.lat)*g/2),q=Math.sin((h.lng-l.lng)*g/2),te=R*R+Math.cos(k)*Math.cos(P)*q*q,ie=2*Math.atan2(Math.sqrt(te),Math.sqrt(1-te));return this.R*ie}}),_e=6378137,$e={R:_e,MAX_LATITUDE:85.0511287798,project:function(l){var h=Math.PI/180,g=this.MAX_LATITUDE,k=Math.max(Math.min(g,l.lat),-g),P=Math.sin(k*h);return new Q(this.R*l.lng*h,this.R*Math.log((1+P)/(1-P))/2)},unproject:function(l){var h=180/Math.PI;return new re((2*Math.atan(Math.exp(l.y/this.R))-Math.PI/2)*h,l.x*h/this.R)},bounds:function(){var l=_e*Math.PI;return new B([-l,-l],[l,l])}()};function Pe(l,h,g,k){if(N(l)){this._a=l[0],this._b=l[1],this._c=l[2],this._d=l[3];return}this._a=l,this._b=h,this._c=g,this._d=k}Pe.prototype={transform:function(l,h){return this._transform(l.clone(),h)},_transform:function(l,h){return h=h||1,l.x=h*(this._a*l.x+this._b),l.y=h*(this._c*l.y+this._d),l},untransform:function(l,h){return h=h||1,new Q((l.x/h-this._b)/this._a,(l.y/h-this._d)/this._c)}};function Le(l,h,g,k){return new Pe(l,h,g,k)}var Ge=a({},me,{code:"EPSG:3857",projection:$e,transformation:function(){var l=.5/(Math.PI*$e.R);return Le(l,.5,-l,.5)}()}),et=a({},Ge,{code:"EPSG:900913"});function ue(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function Ae(l,h){var g="",k,P,R,q,te,ie;for(k=0,R=l.length;k<R;k++){for(te=l[k],P=0,q=te.length;P<q;P++)ie=te[P],g+=(P?"L":"M")+ie.x+" "+ie.y;g+=h?Re.svg?"z":"x":""}return g||"M0 0"}var lt=document.documentElement.style,Ke="ActiveXObject"in window,V=Ke&&!document.addEventListener,st="msLaunchUri"in navigator&&!("documentMode"in document),Ut=hn("webkit"),br=hn("android"),vt=hn("android 2")||hn("android 3"),se=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Se=br&&hn("Google")&&se<537&&!("AudioNode"in window),dr=!!window.opera,un=!st&&hn("chrome"),Pr=hn("gecko")&&!Ut&&!dr&&!Ke,ls=!un&&hn("safari"),cs=hn("phantom"),gt="OTransition"in lt,$a=navigator.platform.indexOf("Win")===0,tr=Ke&&"transition"in lt,wr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!vt,Gt="MozPerspective"in lt,Ai=!window.L_DISABLE_3D&&(tr||wr||Gt)&&!gt&&!cs,de=typeof orientation<"u"||hn("mobile"),Ie=de&&Ut,He=de&&wr,mt=!window.PointerEvent&&window.MSPointerEvent,Ia=!!(window.PointerEvent||mt),ur="ontouchstart"in window||!!window.TouchEvent,Bs=!window.L_NO_TOUCH&&(ur||Ia),Ql=de&&dr,Ri=de&&Pr,ec=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ds=function(){var l=!1;try{var h=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassiveEventSupport",m,h),window.removeEventListener("testPassiveEventSupport",m,h)}catch{}return l}(),Hs=function(){return!!document.createElement("canvas").getContext}(),zi=!!(document.createElementNS&&ue("svg").createSVGRect),tc=!!zi&&function(){var l=document.createElement("div");return l.innerHTML="<svg/>",(l.firstChild&&l.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Cn=!zi&&function(){try{var l=document.createElement("div");l.innerHTML='<v:shape adj="1"/>';var h=l.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}}(),tu=navigator.platform.indexOf("Mac")===0,ru=navigator.platform.indexOf("Linux")===0;function hn(l){return navigator.userAgent.toLowerCase().indexOf(l)>=0}var Re={ie:Ke,ielt9:V,edge:st,webkit:Ut,android:br,android23:vt,androidStock:Se,opera:dr,chrome:un,gecko:Pr,safari:ls,phantom:cs,opera12:gt,win:$a,ie3d:tr,webkit3d:wr,gecko3d:Gt,any3d:Ai,mobile:de,mobileWebkit:Ie,mobileWebkit3d:He,msPointer:mt,pointer:Ia,touch:Bs,touchNative:ur,mobileOpera:Ql,mobileGecko:Ri,retina:ec,passiveEvents:ds,canvas:Hs,svg:zi,vml:Cn,inlineSvg:tc,mac:tu,linux:ru},rc=Re.msPointer?"MSPointerDown":"pointerdown",nc=Re.msPointer?"MSPointerMove":"pointermove",Fa=Re.msPointer?"MSPointerUp":"pointerup",Tr=Re.msPointer?"MSPointerCancel":"pointercancel",Ws={touchstart:rc,touchmove:nc,touchend:Fa,touchcancel:Tr},us={touchstart:Ii,touchmove:Ba,touchend:Ba,touchcancel:Ba},hs={},Fo=!1;function Bo(l,h,g){return h==="touchstart"&&Df(),us[h]?(g=us[h].bind(this,g),l.addEventListener(Ws[h],g,!1),g):(console.warn("wrong event specified:",h),m)}function Hn(l,h,g){if(!Ws[h]){console.warn("wrong event specified:",h);return}l.removeEventListener(Ws[h],g,!1)}function Us(l){hs[l.pointerId]=l}function fs(l){hs[l.pointerId]&&(hs[l.pointerId]=l)}function $i(l){delete hs[l.pointerId]}function Df(){Fo||(document.addEventListener(rc,Us,!0),document.addEventListener(nc,fs,!0),document.addEventListener(Fa,$i,!0),document.addEventListener(Tr,$i,!0),Fo=!0)}function Ba(l,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var g in hs)h.touches.push(hs[g]);h.changedTouches=[h],l(h)}}function Ii(l,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&ar(h),Ba(l,h)}function sc(l){var h={},g,k;for(k in l)g=l[k],h[k]=g&&g.bind?g.bind(l):g;return l=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var ha=200;function ac(l,h){l.addEventListener("dblclick",h);var g=0,k;function P(R){if(R.detail!==1){k=R.detail;return}if(!(R.pointerType==="mouse"||R.sourceCapabilities&&!R.sourceCapabilities.firesTouchEvents)){var q=Ui(R);if(!(q.some(function(ie){return ie instanceof HTMLLabelElement&&ie.attributes.for})&&!q.some(function(ie){return ie instanceof HTMLInputElement||ie instanceof HTMLSelectElement}))){var te=Date.now();te-g<=ha?(k++,k===2&&h(sc(R))):k=1,g=te}}}return l.addEventListener("click",P),{dblclick:h,simDblclick:P}}function nu(l,h){l.removeEventListener("dblclick",h.dblclick),l.removeEventListener("click",h.simDblclick)}var Fi=Bi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Zr=Bi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ic=Zr==="webkitTransition"||Zr==="OTransition"?Zr+"End":"transitionend";function Vs(l){return typeof l=="string"?document.getElementById(l):l}function ms(l,h){var g=l.style[h]||l.currentStyle&&l.currentStyle[h];if((!g||g==="auto")&&document.defaultView){var k=document.defaultView.getComputedStyle(l,null);g=k?k[h]:null}return g==="auto"?null:g}function at(l,h,g){var k=document.createElement(l);return k.className=h||"",g&&g.appendChild(k),k}function Nt(l){var h=l.parentNode;h&&h.removeChild(l)}function Ho(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function fa(l){var h=l.parentNode;h&&h.lastChild!==l&&h.appendChild(l)}function qs(l){var h=l.parentNode;h&&h.firstChild!==l&&h.insertBefore(l,h.firstChild)}function Wo(l,h){if(l.classList!==void 0)return l.classList.contains(h);var g=Wn(l);return g.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(g)}function Ze(l,h){if(l.classList!==void 0)for(var g=v(h),k=0,P=g.length;k<P;k++)l.classList.add(g[k]);else if(!Wo(l,h)){var R=Wn(l);Ys(l,(R?R+" ":"")+h)}}function St(l,h){l.classList!==void 0?l.classList.remove(h):Ys(l,x((" "+Wn(l)+" ").replace(" "+h+" "," ")))}function Ys(l,h){l.className.baseVal===void 0?l.className=h:l.className.baseVal=h}function Wn(l){return l.correspondingElement&&(l=l.correspondingElement),l.className.baseVal===void 0?l.className:l.className.baseVal}function Kr(l,h){"opacity"in l.style?l.style.opacity=h:"filter"in l.style&&Ha(l,h)}function Ha(l,h){var g=!1,k="DXImageTransform.Microsoft.Alpha";try{g=l.filters.item(k)}catch{if(h===1)return}h=Math.round(h*100),g?(g.Enabled=h!==100,g.Opacity=h):l.style.filter+=" progid:"+k+"(opacity="+h+")"}function Bi(l){for(var h=document.documentElement.style,g=0;g<l.length;g++)if(l[g]in h)return l[g];return!1}function je(l,h,g){var k=h||new Q(0,0);l.style[Fi]=(Re.ie3d?"translate("+k.x+"px,"+k.y+"px)":"translate3d("+k.x+"px,"+k.y+"px,0)")+(g?" scale("+g+")":"")}function ke(l,h){l._leaflet_pos=h,Re.any3d?je(l,h):(l.style.left=h.x+"px",l.style.top=h.y+"px")}function ps(l){return l._leaflet_pos||new Q(0,0)}var Wa,Ua,zr;if("onselectstart"in document)Wa=function(){Ue(window,"selectstart",ar)},Ua=function(){ut(window,"selectstart",ar)};else{var Gs=Bi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Wa=function(){if(Gs){var l=document.documentElement.style;zr=l[Gs],l[Gs]="none"}},Ua=function(){Gs&&(document.documentElement.style[Gs]=zr,zr=void 0)}}function $r(){Ue(window,"dragstart",ar)}function Un(){ut(window,"dragstart",ar)}var fn,Vn;function Zs(l){for(;l.tabIndex===-1;)l=l.parentNode;l.style&&(qn(),fn=l,Vn=l.style.outlineStyle,l.style.outlineStyle="none",Ue(window,"keydown",qn))}function qn(){fn&&(fn.style.outlineStyle=Vn,fn=void 0,Vn=void 0,ut(window,"keydown",qn))}function Uo(l){do l=l.parentNode;while((!l.offsetWidth||!l.offsetHeight)&&l!==document.body);return l}function Hi(l){var h=l.getBoundingClientRect();return{x:h.width/l.offsetWidth||1,y:h.height/l.offsetHeight||1,boundingClientRect:h}}var oc={__proto__:null,TRANSFORM:Fi,TRANSITION:Zr,TRANSITION_END:ic,get:Vs,getStyle:ms,create:at,remove:Nt,empty:Ho,toFront:fa,toBack:qs,hasClass:Wo,addClass:Ze,removeClass:St,setClass:Ys,getClass:Wn,setOpacity:Kr,testProp:Bi,setTransform:je,setPosition:ke,getPosition:ps,get disableTextSelection(){return Wa},get enableTextSelection(){return Ua},disableImageDrag:$r,enableImageDrag:Un,preventOutline:Zs,restoreOutline:qn,getSizedParentNode:Uo,getScale:Hi};function Ue(l,h,g,k){if(h&&typeof h=="object")for(var P in h)Wi(l,P,h[P],g);else{h=v(h);for(var R=0,q=h.length;R<q;R++)Wi(l,h[R],g,k)}return this}var mn="_leaflet_events";function ut(l,h,g,k){if(arguments.length===1)Va(l),delete l[mn];else if(h&&typeof h=="object")for(var P in h)Vo(l,P,h[P],g);else if(h=v(h),arguments.length===2)Va(l,function(te){return S(h,te)!==-1});else for(var R=0,q=h.length;R<q;R++)Vo(l,h[R],g,k);return this}function Va(l,h){for(var g in l[mn]){var k=g.split(/\d/)[0];(!h||h(k))&&Vo(l,k,null,null,g)}}var gs={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Wi(l,h,g,k){var P=h+d(g)+(k?"_"+d(k):"");if(l[mn]&&l[mn][P])return this;var R=function(te){return g.call(k||l,te||window.event)},q=R;!Re.touchNative&&Re.pointer&&h.indexOf("touch")===0?R=Bo(l,h,R):Re.touch&&h==="dblclick"?R=ac(l,R):"addEventListener"in l?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?l.addEventListener(gs[h]||h,R,Re.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?(R=function(te){te=te||window.event,Vi(l,te)&&q(te)},l.addEventListener(gs[h],R,!1)):l.addEventListener(h,q,!1):l.attachEvent("on"+h,R),l[mn]=l[mn]||{},l[mn][P]=R}function Vo(l,h,g,k,P){P=P||h+d(g)+(k?"_"+d(k):"");var R=l[mn]&&l[mn][P];if(!R)return this;!Re.touchNative&&Re.pointer&&h.indexOf("touch")===0?Hn(l,h,R):Re.touch&&h==="dblclick"?nu(l,R):"removeEventListener"in l?l.removeEventListener(gs[h]||h,R,!1):l.detachEvent("on"+h,R),l[mn][P]=null}function _r(l){return l.stopPropagation?l.stopPropagation():l.originalEvent?l.originalEvent._stopped=!0:l.cancelBubble=!0,this}function ma(l){return Wi(l,"wheel",_r),this}function qa(l){return Ue(l,"mousedown touchstart dblclick contextmenu",_r),l._leaflet_disable_click=!0,this}function ar(l){return l.preventDefault?l.preventDefault():l.returnValue=!1,this}function Be(l){return ar(l),_r(l),this}function Ui(l){if(l.composedPath)return l.composedPath();for(var h=[],g=l.target;g;)h.push(g),g=g.parentNode;return h}function Ya(l,h){if(!h)return new Q(l.clientX,l.clientY);var g=Hi(h),k=g.boundingClientRect;return new Q((l.clientX-k.left)/g.x-h.clientLeft,(l.clientY-k.top)/g.y-h.clientTop)}var lc=Re.linux&&Re.chrome?window.devicePixelRatio:Re.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function qo(l){return Re.edge?l.wheelDeltaY/2:l.deltaY&&l.deltaMode===0?-l.deltaY/lc:l.deltaY&&l.deltaMode===1?-l.deltaY*20:l.deltaY&&l.deltaMode===2?-l.deltaY*60:l.deltaX||l.deltaZ?0:l.wheelDelta?(l.wheelDeltaY||l.wheelDelta)/2:l.detail&&Math.abs(l.detail)<32765?-l.detail*20:l.detail?l.detail/-32765*60:0}function Vi(l,h){var g=h.relatedTarget;if(!g)return!0;try{for(;g&&g!==l;)g=g.parentNode}catch{return!1}return g!==l}var cc={__proto__:null,on:Ue,off:ut,stopPropagation:_r,disableScrollPropagation:ma,disableClickPropagation:qa,preventDefault:ar,stop:Be,getPropagationPath:Ui,getMousePosition:Ya,getWheelDelta:qo,isExternalTarget:Vi,addListener:Ue,removeListener:ut},dc=pe.extend({run:function(l,h,g,k){this.stop(),this._el=l,this._inProgress=!0,this._duration=g||.25,this._easeOutPower=1/Math.max(k||.5,.2),this._startPos=ps(l),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=F(this._animate,this),this._step()},_step:function(l){var h=+new Date-this._startTime,g=this._duration*1e3;h<g?this._runFrame(this._easeOut(h/g),l):(this._runFrame(1),this._complete())},_runFrame:function(l,h){var g=this._startPos.add(this._offset.multiplyBy(l));h&&g._round(),ke(this._el,g),this.fire("step")},_complete:function(){G(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(l){return 1-Math.pow(1-l,this._easeOutPower)}}),tt=pe.extend({options:{crs:Ge,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(l,h){h=y(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(l),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(ge(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Zr&&Re.any3d&&!Re.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ue(this._proxy,ic,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(l,h,g){if(h=h===void 0?this._zoom:this._limitZoom(h),l=this._limitCenter(ge(l),h,this.options.maxBounds),g=g||{},this._stop(),this._loaded&&!g.reset&&g!==!0){g.animate!==void 0&&(g.zoom=a({animate:g.animate},g.zoom),g.pan=a({animate:g.animate,duration:g.duration},g.pan));var k=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,h,g.zoom):this._tryAnimatedPan(l,g.pan);if(k)return clearTimeout(this._sizeTimer),this}return this._resetView(l,h,g.pan&&g.pan.noMoveStart),this},setZoom:function(l,h){return this._loaded?this.setView(this.getCenter(),l,{zoom:h}):(this._zoom=l,this)},zoomIn:function(l,h){return l=l||(Re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+l,h)},zoomOut:function(l,h){return l=l||(Re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-l,h)},setZoomAround:function(l,h,g){var k=this.getZoomScale(h),P=this.getSize().divideBy(2),R=l instanceof Q?l:this.latLngToContainerPoint(l),q=R.subtract(P).multiplyBy(1-1/k),te=this.containerPointToLatLng(P.add(q));return this.setView(te,h,{zoom:g})},_getBoundsCenterZoom:function(l,h){h=h||{},l=l.getBounds?l.getBounds():fe(l);var g=le(h.paddingTopLeft||h.padding||[0,0]),k=le(h.paddingBottomRight||h.padding||[0,0]),P=this.getBoundsZoom(l,!1,g.add(k));if(P=typeof h.maxZoom=="number"?Math.min(h.maxZoom,P):P,P===1/0)return{center:l.getCenter(),zoom:P};var R=k.subtract(g).divideBy(2),q=this.project(l.getSouthWest(),P),te=this.project(l.getNorthEast(),P),ie=this.unproject(q.add(te).divideBy(2).add(R),P);return{center:ie,zoom:P}},fitBounds:function(l,h){if(l=fe(l),!l.isValid())throw new Error("Bounds are not valid.");var g=this._getBoundsCenterZoom(l,h);return this.setView(g.center,g.zoom,h)},fitWorld:function(l){return this.fitBounds([[-90,-180],[90,180]],l)},panTo:function(l,h){return this.setView(l,this._zoom,{pan:h})},panBy:function(l,h){if(l=le(l).round(),h=h||{},!l.x&&!l.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(l))return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new dc,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){Ze(this._mapPane,"leaflet-pan-anim");var g=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,g,h.duration||.25,h.easeLinearity)}else this._rawPanBy(l),this.fire("move").fire("moveend");return this},flyTo:function(l,h,g){if(g=g||{},g.animate===!1||!Re.any3d)return this.setView(l,h,g);this._stop();var k=this.project(this.getCenter()),P=this.project(l),R=this.getSize(),q=this._zoom;l=ge(l),h=h===void 0?q:h;var te=Math.max(R.x,R.y),ie=te*this.getZoomScale(q,h),ye=P.distanceTo(k)||1,Ee=1.42,We=Ee*Ee;function rt(hr){var Vf=hr?-1:1,TM=hr?ie:te,MM=ie*ie-te*te+Vf*We*We*ye*ye,OM=2*TM*We*ye,ax=MM/OM,F1=Math.sqrt(ax*ax+1)-ax,DM=F1<1e-9?-18:Math.log(F1);return DM}function xn(hr){return(Math.exp(hr)-Math.exp(-hr))/2}function Mr(hr){return(Math.exp(hr)+Math.exp(-hr))/2}function ys(hr){return xn(hr)/Mr(hr)}var Pn=rt(0);function jc(hr){return te*(Mr(Pn)/Mr(Pn+Ee*hr))}function SM(hr){return te*(Mr(Pn)*ys(Pn+Ee*hr)-xn(Pn))/We}function CM(hr){return 1-Math.pow(1-hr,1.5)}var EM=Date.now(),$1=(rt(1)-Pn)/Ee,PM=g.duration?1e3*g.duration:1e3*$1*.8;function I1(){var hr=(Date.now()-EM)/PM,Vf=CM(hr)*$1;hr<=1?(this._flyToFrame=F(I1,this),this._move(this.unproject(k.add(P.subtract(k).multiplyBy(SM(Vf)/ye)),q),this.getScaleZoom(te/jc(Vf),q),{flyTo:!0})):this._move(l,h)._moveEnd(!0)}return this._moveStart(!0,g.noMoveStart),I1.call(this),this},flyToBounds:function(l,h){var g=this._getBoundsCenterZoom(l,h);return this.flyTo(g.center,g.zoom,h)},setMaxBounds:function(l){return l=fe(l),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),l.isValid()?(this.options.maxBounds=l,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(l){var h=this.options.minZoom;return this.options.minZoom=l,this._loaded&&h!==l&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(l):this},setMaxZoom:function(l){var h=this.options.maxZoom;return this.options.maxZoom=l,this._loaded&&h!==l&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(l):this},panInsideBounds:function(l,h){this._enforcingBounds=!0;var g=this.getCenter(),k=this._limitCenter(g,this._zoom,fe(l));return g.equals(k)||this.panTo(k,h),this._enforcingBounds=!1,this},panInside:function(l,h){h=h||{};var g=le(h.paddingTopLeft||h.padding||[0,0]),k=le(h.paddingBottomRight||h.padding||[0,0]),P=this.project(this.getCenter()),R=this.project(l),q=this.getPixelBounds(),te=X([q.min.add(g),q.max.subtract(k)]),ie=te.getSize();if(!te.contains(R)){this._enforcingBounds=!0;var ye=R.subtract(te.getCenter()),Ee=te.extend(R).getSize().subtract(ie);P.x+=ye.x<0?-Ee.x:Ee.x,P.y+=ye.y<0?-Ee.y:Ee.y,this.panTo(this.unproject(P),h),this._enforcingBounds=!1}return this},invalidateSize:function(l){if(!this._loaded)return this;l=a({animate:!1,pan:!0},l===!0?{animate:!0}:l);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var g=this.getSize(),k=h.divideBy(2).round(),P=g.divideBy(2).round(),R=k.subtract(P);return!R.x&&!R.y?this:(l.animate&&l.pan?this.panBy(R):(l.pan&&this._rawPanBy(R),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:g}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=a({timeout:1e4,watch:!1},l),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=o(this._handleGeolocationResponse,this),g=o(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,g,l):navigator.geolocation.getCurrentPosition(h,g,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){if(this._container._leaflet_id){var h=l.code,g=l.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+g+"."})}},_handleGeolocationResponse:function(l){if(this._container._leaflet_id){var h=l.coords.latitude,g=l.coords.longitude,k=new re(h,g),P=k.toBounds(l.coords.accuracy*2),R=this._locateOptions;if(R.setView){var q=this.getBoundsZoom(P);this.setView(k,R.maxZoom?Math.min(q,R.maxZoom):q)}var te={latlng:k,bounds:P,timestamp:l.timestamp};for(var ie in l.coords)typeof l.coords[ie]=="number"&&(te[ie]=l.coords[ie]);this.fire("locationfound",te)}},addHandler:function(l,h){if(!h)return this;var g=this[l]=new h(this);return this._handlers.push(g),this.options[l]&&g.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Nt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(G(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var l;for(l in this._layers)this._layers[l].remove();for(l in this._panes)Nt(this._panes[l]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(l,h){var g="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),k=at("div",g,h||this._mapPane);return l&&(this._panes[l]=k),k},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),h=this.unproject(l.getBottomLeft()),g=this.unproject(l.getTopRight());return new ae(h,g)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(l,h,g){l=fe(l),g=le(g||[0,0]);var k=this.getZoom()||0,P=this.getMinZoom(),R=this.getMaxZoom(),q=l.getNorthWest(),te=l.getSouthEast(),ie=this.getSize().subtract(g),ye=X(this.project(te,k),this.project(q,k)).getSize(),Ee=Re.any3d?this.options.zoomSnap:1,We=ie.x/ye.x,rt=ie.y/ye.y,xn=h?Math.max(We,rt):Math.min(We,rt);return k=this.getScaleZoom(xn,k),Ee&&(k=Math.round(k/(Ee/100))*(Ee/100),k=h?Math.ceil(k/Ee)*Ee:Math.floor(k/Ee)*Ee),Math.max(P,Math.min(R,k))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,h){var g=this._getTopLeftPoint(l,h);return new B(g,g.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(l){return this.options.crs.getProjectedBounds(l===void 0?this.getZoom():l)},getPane:function(l){return typeof l=="string"?this._panes[l]:l},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,h){var g=this.options.crs;return h=h===void 0?this._zoom:h,g.scale(l)/g.scale(h)},getScaleZoom:function(l,h){var g=this.options.crs;h=h===void 0?this._zoom:h;var k=g.zoom(l*g.scale(h));return isNaN(k)?1/0:k},project:function(l,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(ge(l),h)},unproject:function(l,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(le(l),h)},layerPointToLatLng:function(l){var h=le(l).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(l){var h=this.project(ge(l))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(l){return this.options.crs.wrapLatLng(ge(l))},wrapLatLngBounds:function(l){return this.options.crs.wrapLatLngBounds(fe(l))},distance:function(l,h){return this.options.crs.distance(ge(l),ge(h))},containerPointToLayerPoint:function(l){return le(l).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(l){return le(l).add(this._getMapPanePos())},containerPointToLatLng:function(l){var h=this.containerPointToLayerPoint(le(l));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(l){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ge(l)))},mouseEventToContainerPoint:function(l){return Ya(l,this._container)},mouseEventToLayerPoint:function(l){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(l))},mouseEventToLatLng:function(l){return this.layerPointToLatLng(this.mouseEventToLayerPoint(l))},_initContainer:function(l){var h=this._container=Vs(l);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ue(h,"scroll",this._onScroll,this),this._containerId=d(h)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&Re.any3d,Ze(l,"leaflet-container"+(Re.touch?" leaflet-touch":"")+(Re.retina?" leaflet-retina":"")+(Re.ielt9?" leaflet-oldie":"")+(Re.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=ms(l,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(l.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var l=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ke(this._mapPane,new Q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ze(l.markerPane,"leaflet-zoom-hide"),Ze(l.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,h,g){ke(this._mapPane,new Q(0,0));var k=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var P=this._zoom!==h;this._moveStart(P,g)._move(l,h)._moveEnd(P),this.fire("viewreset"),k&&this.fire("load")},_moveStart:function(l,h){return l&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(l,h,g,k){h===void 0&&(h=this._zoom);var P=this._zoom!==h;return this._zoom=h,this._lastCenter=l,this._pixelOrigin=this._getNewPixelOrigin(l),k?g&&g.pinch&&this.fire("zoom",g):((P||g&&g.pinch)&&this.fire("zoom",g),this.fire("move",g)),this},_moveEnd:function(l){return l&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return G(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(l){ke(this._mapPane,this._getMapPanePos().subtract(l))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(l){this._targets={},this._targets[d(this._container)]=this;var h=l?ut:Ue;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),Re.any3d&&this.options.transform3DLimit&&(l?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){G(this._resizeRequest),this._resizeRequest=F(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var l=this._getMapPanePos();Math.max(Math.abs(l.x),Math.abs(l.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(l,h){for(var g=[],k,P=h==="mouseout"||h==="mouseover",R=l.target||l.srcElement,q=!1;R;){if(k=this._targets[d(R)],k&&(h==="click"||h==="preclick")&&this._draggableMoved(k)){q=!0;break}if(k&&k.listens(h,!0)&&(P&&!Vi(R,l)||(g.push(k),P))||R===this._container)break;R=R.parentNode}return!g.length&&!q&&!P&&this.listens(h,!0)&&(g=[this]),g},_isClickDisabled:function(l){for(;l&&l!==this._container;){if(l._leaflet_disable_click)return!0;l=l.parentNode}},_handleDOMEvent:function(l){var h=l.target||l.srcElement;if(!(!this._loaded||h._leaflet_disable_events||l.type==="click"&&this._isClickDisabled(h))){var g=l.type;g==="mousedown"&&Zs(h),this._fireDOMEvent(l,g)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(l,h,g){if(l.type==="click"){var k=a({},l);k.type="preclick",this._fireDOMEvent(k,k.type,g)}var P=this._findEventTargets(l,h);if(g){for(var R=[],q=0;q<g.length;q++)g[q].listens(h,!0)&&R.push(g[q]);P=R.concat(P)}if(P.length){h==="contextmenu"&&ar(l);var te=P[0],ie={originalEvent:l};if(l.type!=="keypress"&&l.type!=="keydown"&&l.type!=="keyup"){var ye=te.getLatLng&&(!te._radius||te._radius<=10);ie.containerPoint=ye?this.latLngToContainerPoint(te.getLatLng()):this.mouseEventToContainerPoint(l),ie.layerPoint=this.containerPointToLayerPoint(ie.containerPoint),ie.latlng=ye?te.getLatLng():this.layerPointToLatLng(ie.layerPoint)}for(q=0;q<P.length;q++)if(P[q].fire(h,ie,!0),ie.originalEvent._stopped||P[q].options.bubblingMouseEvents===!1&&S(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(l){return l=l.dragging&&l.dragging.enabled()?l:this,l.dragging&&l.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var l=0,h=this._handlers.length;l<h;l++)this._handlers[l].disable()},whenReady:function(l,h){return this._loaded?l.call(h||this,{target:this}):this.on("load",l,h),this},_getMapPanePos:function(){return ps(this._mapPane)||new Q(0,0)},_moved:function(){var l=this._getMapPanePos();return l&&!l.equals([0,0])},_getTopLeftPoint:function(l,h){var g=l&&h!==void 0?this._getNewPixelOrigin(l,h):this.getPixelOrigin();return g.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,h){var g=this.getSize()._divideBy(2);return this.project(l,h)._subtract(g)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,h,g){var k=this._getNewPixelOrigin(g,h);return this.project(l,h)._subtract(k)},_latLngBoundsToNewLayerBounds:function(l,h,g){var k=this._getNewPixelOrigin(g,h);return X([this.project(l.getSouthWest(),h)._subtract(k),this.project(l.getNorthWest(),h)._subtract(k),this.project(l.getSouthEast(),h)._subtract(k),this.project(l.getNorthEast(),h)._subtract(k)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(l){return this.latLngToLayerPoint(l).subtract(this._getCenterLayerPoint())},_limitCenter:function(l,h,g){if(!g)return l;var k=this.project(l,h),P=this.getSize().divideBy(2),R=new B(k.subtract(P),k.add(P)),q=this._getBoundsOffset(R,g,h);return Math.abs(q.x)<=1&&Math.abs(q.y)<=1?l:this.unproject(k.add(q),h)},_limitOffset:function(l,h){if(!h)return l;var g=this.getPixelBounds(),k=new B(g.min.add(l),g.max.add(l));return l.add(this._getBoundsOffset(k,h))},_getBoundsOffset:function(l,h,g){var k=X(this.project(h.getNorthEast(),g),this.project(h.getSouthWest(),g)),P=k.min.subtract(l.min),R=k.max.subtract(l.max),q=this._rebound(P.x,-R.x),te=this._rebound(P.y,-R.y);return new Q(q,te)},_rebound:function(l,h){return l+h>0?Math.round(l-h)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(h))},_limitZoom:function(l){var h=this.getMinZoom(),g=this.getMaxZoom(),k=Re.any3d?this.options.zoomSnap:1;return k&&(l=Math.round(l/k)*k),Math.max(h,Math.min(g,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){St(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,h){var g=this._getCenterOffset(l)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(g)?!1:(this.panBy(g,h),!0)},_createAnimProxy:function(){var l=this._proxy=at("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(l),this.on("zoomanim",function(h){var g=Fi,k=this._proxy.style[g];je(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),k===this._proxy.style[g]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Nt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var l=this.getCenter(),h=this.getZoom();je(this._proxy,this.project(l,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(l){this._animatingZoom&&l.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,h,g){if(this._animatingZoom)return!0;if(g=g||{},!this._zoomAnimated||g.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var k=this.getZoomScale(h),P=this._getCenterOffset(l)._divideBy(1-1/k);return g.animate!==!0&&!this.getSize().contains(P)?!1:(F(function(){this._moveStart(!0,g.noMoveStart||!1)._animateZoom(l,h,!0)},this),!0)},_animateZoom:function(l,h,g,k){this._mapPane&&(g&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=h,Ze(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:h,noUpdate:k}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&St(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function su(l,h){return new tt(l,h)}var pn=K.extend({options:{position:"topright"},initialize:function(l){y(this,l)},getPosition:function(){return this.options.position},setPosition:function(l){var h=this._map;return h&&h.removeControl(this),this.options.position=l,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var h=this._container=this.onAdd(l),g=this.getPosition(),k=l._controlCorners[g];return Ze(h,"leaflet-control"),g.indexOf("bottom")!==-1?k.insertBefore(h,k.firstChild):k.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Nt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(l){this._map&&l&&l.screenX>0&&l.screenY>0&&this._map.getContainer().focus()}}),qi=function(l){return new pn(l)};tt.include({addControl:function(l){return l.addTo(this),this},removeControl:function(l){return l.remove(),this},_initControlPos:function(){var l=this._controlCorners={},h="leaflet-",g=this._controlContainer=at("div",h+"control-container",this._container);function k(P,R){var q=h+P+" "+h+R;l[P+R]=at("div",q,g)}k("top","left"),k("top","right"),k("bottom","left"),k("bottom","right")},_clearControlPos:function(){for(var l in this._controlCorners)Nt(this._controlCorners[l]);Nt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Yo=pn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,h,g,k){return g<k?-1:k<g?1:0}},initialize:function(l,h,g){y(this,g),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var k in l)this._addLayer(l[k],k);for(k in h)this._addLayer(h[k],k,!0)},onAdd:function(l){this._initLayout(),this._update(),this._map=l,l.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(l){return pn.prototype.addTo.call(this,l),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(l,h){return this._addLayer(l,h),this._map?this._update():this},addOverlay:function(l,h){return this._addLayer(l,h,!0),this._map?this._update():this},removeLayer:function(l){l.off("add remove",this._onLayerChange,this);var h=this._getLayer(d(l));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){Ze(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var l=this._map.getSize().y-(this._container.offsetTop+50);return l<this._section.clientHeight?(Ze(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=l+"px"):St(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return St(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",h=this._container=at("div",l),g=this.options.collapsed;h.setAttribute("aria-haspopup",!0),qa(h),ma(h);var k=this._section=at("section",l+"-list");g&&(this._map.on("click",this.collapse,this),Ue(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var P=this._layersLink=at("a",l+"-toggle",h);P.href="#",P.title="Layers",P.setAttribute("role","button"),Ue(P,{keydown:function(R){R.keyCode===13&&this._expandSafely()},click:function(R){ar(R),this._expandSafely()}},this),g||this.expand(),this._baseLayersList=at("div",l+"-base",k),this._separator=at("div",l+"-separator",k),this._overlaysList=at("div",l+"-overlays",k),h.appendChild(k)},_getLayer:function(l){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&d(this._layers[h].layer)===l)return this._layers[h]},_addLayer:function(l,h,g){this._map&&l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:h,overlay:g}),this.options.sortLayers&&this._layers.sort(o(function(k,P){return this.options.sortFunction(k.layer,P.layer,k.name,P.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ho(this._baseLayersList),Ho(this._overlaysList),this._layerControlInputs=[];var l,h,g,k,P=0;for(g=0;g<this._layers.length;g++)k=this._layers[g],this._addItem(k),h=h||k.overlay,l=l||!k.overlay,P+=k.overlay?0:1;return this.options.hideSingleBase&&(l=l&&P>1,this._baseLayersList.style.display=l?"":"none"),this._separator.style.display=h&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var h=this._getLayer(d(l.target)),g=h.overlay?l.type==="add"?"overlayadd":"overlayremove":l.type==="add"?"baselayerchange":null;g&&this._map.fire(g,h)},_createRadioElement:function(l,h){var g='<input type="radio" class="leaflet-control-layers-selector" name="'+l+'"'+(h?' checked="checked"':"")+"/>",k=document.createElement("div");return k.innerHTML=g,k.firstChild},_addItem:function(l){var h=document.createElement("label"),g=this._map.hasLayer(l.layer),k;l.overlay?(k=document.createElement("input"),k.type="checkbox",k.className="leaflet-control-layers-selector",k.defaultChecked=g):k=this._createRadioElement("leaflet-base-layers_"+d(this),g),this._layerControlInputs.push(k),k.layerId=d(l.layer),Ue(k,"click",this._onInputClick,this);var P=document.createElement("span");P.innerHTML=" "+l.name;var R=document.createElement("span");h.appendChild(R),R.appendChild(k),R.appendChild(P);var q=l.overlay?this._overlaysList:this._baseLayersList;return q.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){if(!this._preventClick){var l=this._layerControlInputs,h,g,k=[],P=[];this._handlingClick=!0;for(var R=l.length-1;R>=0;R--)h=l[R],g=this._getLayer(h.layerId).layer,h.checked?k.push(g):h.checked||P.push(g);for(R=0;R<P.length;R++)this._map.hasLayer(P[R])&&this._map.removeLayer(P[R]);for(R=0;R<k.length;R++)this._map.hasLayer(k[R])||this._map.addLayer(k[R]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var l=this._layerControlInputs,h,g,k=this._map.getZoom(),P=l.length-1;P>=0;P--)h=l[P],g=this._getLayer(h.layerId).layer,h.disabled=g.options.minZoom!==void 0&&k<g.options.minZoom||g.options.maxZoom!==void 0&&k>g.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var l=this._section;this._preventClick=!0,Ue(l,"click",ar),this.expand();var h=this;setTimeout(function(){ut(l,"click",ar),h._preventClick=!1})}}),uc=function(l,h,g){return new Yo(l,h,g)},Go=pn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(l){var h="leaflet-control-zoom",g=at("div",h+" leaflet-bar"),k=this.options;return this._zoomInButton=this._createButton(k.zoomInText,k.zoomInTitle,h+"-in",g,this._zoomIn),this._zoomOutButton=this._createButton(k.zoomOutText,k.zoomOutTitle,h+"-out",g,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),g},onRemove:function(l){l.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(l){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(l.shiftKey?3:1))},_zoomOut:function(l){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(l.shiftKey?3:1))},_createButton:function(l,h,g,k,P){var R=at("a",g,k);return R.innerHTML=l,R.href="#",R.title=h,R.setAttribute("role","button"),R.setAttribute("aria-label",h),qa(R),Ue(R,"click",Be),Ue(R,"click",P,this),Ue(R,"click",this._refocusOnMap,this),R},_updateDisabled:function(){var l=this._map,h="leaflet-disabled";St(this._zoomInButton,h),St(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||l._zoom===l.getMinZoom())&&(Ze(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||l._zoom===l.getMaxZoom())&&(Ze(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});tt.mergeOptions({zoomControl:!0}),tt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Go,this.addControl(this.zoomControl))});var hc=function(l){return new Go(l)},Zo=pn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var h="leaflet-control-scale",g=at("div",h),k=this.options;return this._addScales(k,h+"-line",g),l.on(k.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),g},onRemove:function(l){l.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,h,g){l.metric&&(this._mScale=at("div",h,g)),l.imperial&&(this._iScale=at("div",h,g))},_update:function(){var l=this._map,h=l.getSize().y/2,g=l.distance(l.containerPointToLatLng([0,h]),l.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(g)},_updateScales:function(l){this.options.metric&&l&&this._updateMetric(l),this.options.imperial&&l&&this._updateImperial(l)},_updateMetric:function(l){var h=this._getRoundNum(l),g=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,g,h/l)},_updateImperial:function(l){var h=l*3.2808399,g,k,P;h>5280?(g=h/5280,k=this._getRoundNum(g),this._updateScale(this._iScale,k+" mi",k/g)):(P=this._getRoundNum(h),this._updateScale(this._iScale,P+" ft",P/h))},_updateScale:function(l,h,g){l.style.width=Math.round(this.options.maxWidth*g)+"px",l.innerHTML=h},_getRoundNum:function(l){var h=Math.pow(10,(Math.floor(l)+"").length-1),g=l/h;return g=g>=10?10:g>=5?5:g>=3?3:g>=2?2:1,h*g}}),fc=function(l){return new Zo(l)},mc='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Yi=pn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Re.inlineSvg?mc+" ":"")+"Leaflet</a>"},initialize:function(l){y(this,l),this._attributions={}},onAdd:function(l){l.attributionControl=this,this._container=at("div","leaflet-control-attribution"),qa(this._container);for(var h in l._layers)l._layers[h].getAttribution&&this.addAttribution(l._layers[h].getAttribution());return this._update(),l.on("layeradd",this._addAttribution,this),this._container},onRemove:function(l){l.off("layeradd",this._addAttribution,this)},_addAttribution:function(l){l.layer.getAttribution&&(this.addAttribution(l.layer.getAttribution()),l.layer.once("remove",function(){this.removeAttribution(l.layer.getAttribution())},this))},setPrefix:function(l){return this.options.prefix=l,this._update(),this},addAttribution:function(l){return l?(this._attributions[l]||(this._attributions[l]=0),this._attributions[l]++,this._update(),this):this},removeAttribution:function(l){return l?(this._attributions[l]&&(this._attributions[l]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var h in this._attributions)this._attributions[h]&&l.push(h);var g=[];this.options.prefix&&g.push(this.options.prefix),l.length&&g.push(l.join(", ")),this._container.innerHTML=g.join(' <span aria-hidden="true">|</span> ')}}});tt.mergeOptions({attributionControl:!0}),tt.addInitHook(function(){this.options.attributionControl&&new Yi().addTo(this)});var pc=function(l){return new Yi(l)};pn.Layers=Yo,pn.Zoom=Go,pn.Scale=Zo,pn.Attribution=Yi,qi.layers=uc,qi.zoom=hc,qi.scale=fc,qi.attribution=pc;var gn=K.extend({initialize:function(l){this._map=l},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});gn.addTo=function(l,h){return l.addHandler(h,this),this};var gc={Events:Z},Ko=Re.touch?"touchstart mousedown":"mousedown",Yn=pe.extend({options:{clickTolerance:3},initialize:function(l,h,g,k){y(this,k),this._element=l,this._dragStartTarget=h||l,this._preventOutline=g},enable:function(){this._enabled||(Ue(this._dragStartTarget,Ko,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Yn._dragging===this&&this.finishDrag(!0),ut(this._dragStartTarget,Ko,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(l){if(this._enabled&&(this._moved=!1,!Wo(this._element,"leaflet-zoom-anim"))){if(l.touches&&l.touches.length!==1){Yn._dragging===this&&this.finishDrag();return}if(!(Yn._dragging||l.shiftKey||l.which!==1&&l.button!==1&&!l.touches)&&(Yn._dragging=this,this._preventOutline&&Zs(this._element),$r(),Wa(),!this._moving)){this.fire("down");var h=l.touches?l.touches[0]:l,g=Uo(this._element);this._startPoint=new Q(h.clientX,h.clientY),this._startPos=ps(this._element),this._parentScale=Hi(g);var k=l.type==="mousedown";Ue(document,k?"mousemove":"touchmove",this._onMove,this),Ue(document,k?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(l){if(this._enabled){if(l.touches&&l.touches.length>1){this._moved=!0;return}var h=l.touches&&l.touches.length===1?l.touches[0]:l,g=new Q(h.clientX,h.clientY)._subtract(this._startPoint);!g.x&&!g.y||Math.abs(g.x)+Math.abs(g.y)<this.options.clickTolerance||(g.x/=this._parentScale.x,g.y/=this._parentScale.y,ar(l),this._moved||(this.fire("dragstart"),this._moved=!0,Ze(document.body,"leaflet-dragging"),this._lastTarget=l.target||l.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ze(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(g),this._moving=!0,this._lastEvent=l,this._updatePosition())}},_updatePosition:function(){var l={originalEvent:this._lastEvent};this.fire("predrag",l),ke(this._element,this._newPos),this.fire("drag",l)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(l){St(document.body,"leaflet-dragging"),this._lastTarget&&(St(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ut(document,"mousemove touchmove",this._onMove,this),ut(document,"mouseup touchend touchcancel",this._onUp,this),Un(),Ua();var h=this._moved&&this._moving;this._moving=!1,Yn._dragging=!1,h&&this.fire("dragend",{noInertia:l,distance:this._newPos.distanceTo(this._startPos)})}});function Xo(l,h,g){var k,P=[1,4,2,8],R,q,te,ie,ye,Ee,We,rt;for(R=0,Ee=l.length;R<Ee;R++)l[R]._code=M(l[R],h);for(te=0;te<4;te++){for(We=P[te],k=[],R=0,Ee=l.length,q=Ee-1;R<Ee;q=R++)ie=l[R],ye=l[q],ie._code&We?ye._code&We||(rt=U(ye,ie,We,h,g),rt._code=M(rt,h),k.push(rt)):(ye._code&We&&(rt=U(ye,ie,We,h,g),rt._code=M(rt,h),k.push(rt)),k.push(ie));l=k}return l}function Jo(l,h){var g,k,P,R,q,te,ie,ye,Ee;if(!l||l.length===0)throw new Error("latlngs not passed");xe(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var We=ge([0,0]),rt=fe(l),xn=rt.getNorthWest().distanceTo(rt.getSouthWest())*rt.getNorthEast().distanceTo(rt.getNorthWest());xn<1700&&(We=Gi(l));var Mr=l.length,ys=[];for(g=0;g<Mr;g++){var Pn=ge(l[g]);ys.push(h.project(ge([Pn.lat-We.lat,Pn.lng-We.lng])))}for(te=ie=ye=0,g=0,k=Mr-1;g<Mr;k=g++)P=ys[g],R=ys[k],q=P.y*R.x-R.y*P.x,ie+=(P.x+R.x)*q,ye+=(P.y+R.y)*q,te+=q*3;te===0?Ee=ys[0]:Ee=[ie/te,ye/te];var jc=h.unproject(le(Ee));return ge([jc.lat+We.lat,jc.lng+We.lng])}function Gi(l){for(var h=0,g=0,k=0,P=0;P<l.length;P++){var R=ge(l[P]);h+=R.lat,g+=R.lng,k++}return ge([h/k,g/k])}var xc={__proto__:null,clipPolygon:Xo,polygonCenter:Jo,centroid:Gi};function Qo(l,h){if(!h||!l.length)return l.slice();var g=h*h;return l=j(l,g),l=yc(l,g),l}function Zt(l,h,g){return Math.sqrt(ne(l,h,g,!0))}function Zi(l,h,g){return ne(l,h,g)}function yc(l,h){var g=l.length,k=typeof Uint8Array<"u"?Uint8Array:Array,P=new k(g);P[0]=P[g-1]=1,D(l,P,h,0,g-1);var R,q=[];for(R=0;R<g;R++)P[R]&&q.push(l[R]);return q}function D(l,h,g,k,P){var R=0,q,te,ie;for(te=k+1;te<=P-1;te++)ie=ne(l[te],l[k],l[P],!0),ie>R&&(q=te,R=ie);R>g&&(h[q]=1,D(l,h,g,k,q),D(l,h,g,q,P))}function j(l,h){for(var g=[l[0]],k=1,P=0,R=l.length;k<R;k++)H(l[k],l[P])>h&&(g.push(l[k]),P=k);return P<R-1&&g.push(l[R-1]),g}var T;function I(l,h,g,k,P){var R=k?T:M(l,g),q=M(h,g),te,ie,ye;for(T=q;;){if(!(R|q))return[l,h];if(R&q)return!1;te=R||q,ie=U(l,h,te,g,P),ye=M(ie,g),te===R?(l=ie,R=ye):(h=ie,q=ye)}}function U(l,h,g,k,P){var R=h.x-l.x,q=h.y-l.y,te=k.min,ie=k.max,ye,Ee;return g&8?(ye=l.x+R*(ie.y-l.y)/q,Ee=ie.y):g&4?(ye=l.x+R*(te.y-l.y)/q,Ee=te.y):g&2?(ye=ie.x,Ee=l.y+q*(ie.x-l.x)/R):g&1&&(ye=te.x,Ee=l.y+q*(te.x-l.x)/R),new Q(ye,Ee,P)}function M(l,h){var g=0;return l.x<h.min.x?g|=1:l.x>h.max.x&&(g|=2),l.y<h.min.y?g|=4:l.y>h.max.y&&(g|=8),g}function H(l,h){var g=h.x-l.x,k=h.y-l.y;return g*g+k*k}function ne(l,h,g,k){var P=h.x,R=h.y,q=g.x-P,te=g.y-R,ie=q*q+te*te,ye;return ie>0&&(ye=((l.x-P)*q+(l.y-R)*te)/ie,ye>1?(P=g.x,R=g.y):ye>0&&(P+=q*ye,R+=te*ye)),q=l.x-P,te=l.y-R,k?q*q+te*te:new Q(P,R)}function xe(l){return!N(l[0])||typeof l[0][0]!="object"&&typeof l[0][0]<"u"}function Te(l){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),xe(l)}function Ve(l,h){var g,k,P,R,q,te,ie,ye;if(!l||l.length===0)throw new Error("latlngs not passed");xe(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Ee=ge([0,0]),We=fe(l),rt=We.getNorthWest().distanceTo(We.getSouthWest())*We.getNorthEast().distanceTo(We.getNorthWest());rt<1700&&(Ee=Gi(l));var xn=l.length,Mr=[];for(g=0;g<xn;g++){var ys=ge(l[g]);Mr.push(h.project(ge([ys.lat-Ee.lat,ys.lng-Ee.lng])))}for(g=0,k=0;g<xn-1;g++)k+=Mr[g].distanceTo(Mr[g+1])/2;if(k===0)ye=Mr[0];else for(g=0,R=0;g<xn-1;g++)if(q=Mr[g],te=Mr[g+1],P=q.distanceTo(te),R+=P,R>k){ie=(R-k)/P,ye=[te.x-ie*(te.x-q.x),te.y-ie*(te.y-q.y)];break}var Pn=h.unproject(le(ye));return ge([Pn.lat+Ee.lat,Pn.lng+Ee.lng])}var Vt={__proto__:null,simplify:Qo,pointToSegmentDistance:Zt,closestPointOnSegment:Zi,clipSegment:I,_getEdgeIntersection:U,_getBitCode:M,_sqClosestPointOnSegment:ne,isFlat:xe,_flat:Te,polylineCenter:Ve},Ga={project:function(l){return new Q(l.lng,l.lat)},unproject:function(l){return new re(l.y,l.x)},bounds:new B([-180,-90],[180,90])},au={R:6378137,R_MINOR:6356752314245179e-9,bounds:new B([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(l){var h=Math.PI/180,g=this.R,k=l.lat*h,P=this.R_MINOR/g,R=Math.sqrt(1-P*P),q=R*Math.sin(k),te=Math.tan(Math.PI/4-k/2)/Math.pow((1-q)/(1+q),R/2);return k=-g*Math.log(Math.max(te,1e-10)),new Q(l.lng*h*g,k)},unproject:function(l){for(var h=180/Math.PI,g=this.R,k=this.R_MINOR/g,P=Math.sqrt(1-k*k),R=Math.exp(-l.y/g),q=Math.PI/2-2*Math.atan(R),te=0,ie=.1,ye;te<15&&Math.abs(ie)>1e-7;te++)ye=P*Math.sin(q),ye=Math.pow((1-ye)/(1+ye),P/2),ie=Math.PI/2-2*Math.atan(R*ye)-q,q+=ie;return new re(q*h,l.x*h/g)}},Lf={__proto__:null,LonLat:Ga,Mercator:au,SphericalMercator:$e},X0=a({},me,{code:"EPSG:3395",projection:au,transformation:function(){var l=.5/(Math.PI*au.R);return Le(l,.5,-l,.5)}()}),iu=a({},me,{code:"EPSG:4326",projection:Ga,transformation:Le(1/180,1,-1/180,.5)}),J0=a({},Oe,{projection:Ga,transformation:Le(1,0,-1,0),scale:function(l){return Math.pow(2,l)},zoom:function(l){return Math.log(l)/Math.LN2},distance:function(l,h){var g=h.lng-l.lng,k=h.lat-l.lat;return Math.sqrt(g*g+k*k)},infinite:!0});Oe.Earth=me,Oe.EPSG3395=X0,Oe.EPSG3857=Ge,Oe.EPSG900913=et,Oe.EPSG4326=iu,Oe.Simple=J0;var En=pe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(l){return l.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(l){return l&&l.removeLayer(this),this},getPane:function(l){return this._map.getPane(l?this.options[l]||l:this.options.pane)},addInteractiveTarget:function(l){return this._map._targets[d(l)]=this,this},removeInteractiveTarget:function(l){return delete this._map._targets[d(l)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var h=l.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var g=this.getEvents();h.on(g,this),this.once("remove",function(){h.off(g,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});tt.include({addLayer:function(l){if(!l._layerAdd)throw new Error("The provided object is not a Layer.");var h=d(l);return this._layers[h]?this:(this._layers[h]=l,l._mapToAdd=this,l.beforeAdd&&l.beforeAdd(this),this.whenReady(l._layerAdd,l),this)},removeLayer:function(l){var h=d(l);return this._layers[h]?(this._loaded&&l.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:l}),l.fire("remove")),l._map=l._mapToAdd=null,this):this},hasLayer:function(l){return d(l)in this._layers},eachLayer:function(l,h){for(var g in this._layers)l.call(h,this._layers[g]);return this},_addLayers:function(l){l=l?N(l)?l:[l]:[];for(var h=0,g=l.length;h<g;h++)this.addLayer(l[h])},_addZoomLimit:function(l){(!isNaN(l.options.maxZoom)||!isNaN(l.options.minZoom))&&(this._zoomBoundLayers[d(l)]=l,this._updateZoomLevels())},_removeZoomLimit:function(l){var h=d(l);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var l=1/0,h=-1/0,g=this._getZoomSpan();for(var k in this._zoomBoundLayers){var P=this._zoomBoundLayers[k].options;l=P.minZoom===void 0?l:Math.min(l,P.minZoom),h=P.maxZoom===void 0?h:Math.max(h,P.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=l===1/0?void 0:l,g!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ki=En.extend({initialize:function(l,h){y(this,h),this._layers={};var g,k;if(l)for(g=0,k=l.length;g<k;g++)this.addLayer(l[g])},addLayer:function(l){var h=this.getLayerId(l);return this._layers[h]=l,this._map&&this._map.addLayer(l),this},removeLayer:function(l){var h=l in this._layers?l:this.getLayerId(l);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(l){var h=typeof l=="number"?l:this.getLayerId(l);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(l){var h=Array.prototype.slice.call(arguments,1),g,k;for(g in this._layers)k=this._layers[g],k[l]&&k[l].apply(k,h);return this},onAdd:function(l){this.eachLayer(l.addLayer,l)},onRemove:function(l){this.eachLayer(l.removeLayer,l)},eachLayer:function(l,h){for(var g in this._layers)l.call(h,this._layers[g]);return this},getLayer:function(l){return this._layers[l]},getLayers:function(){var l=[];return this.eachLayer(l.push,l),l},setZIndex:function(l){return this.invoke("setZIndex",l)},getLayerId:function(l){return d(l)}}),Q0=function(l,h){return new Ki(l,h)},xs=Ki.extend({addLayer:function(l){return this.hasLayer(l)?this:(l.addEventParent(this),Ki.prototype.addLayer.call(this,l),this.fire("layeradd",{layer:l}))},removeLayer:function(l){return this.hasLayer(l)?(l in this._layers&&(l=this._layers[l]),l.removeEventParent(this),Ki.prototype.removeLayer.call(this,l),this.fire("layerremove",{layer:l})):this},setStyle:function(l){return this.invoke("setStyle",l)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new ae;for(var h in this._layers){var g=this._layers[h];l.extend(g.getBounds?g.getBounds():g.getLatLng())}return l}}),Af=function(l,h){return new xs(l,h)},Za=K.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(l){y(this,l)},createIcon:function(l){return this._createIcon("icon",l)},createShadow:function(l){return this._createIcon("shadow",l)},_createIcon:function(l,h){var g=this._getIconUrl(l);if(!g){if(l==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var k=this._createImg(g,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(k,l),(this.options.crossOrigin||this.options.crossOrigin==="")&&(k.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),k},_setIconStyles:function(l,h){var g=this.options,k=g[h+"Size"];typeof k=="number"&&(k=[k,k]);var P=le(k),R=le(h==="shadow"&&g.shadowAnchor||g.iconAnchor||P&&P.divideBy(2,!0));l.className="leaflet-marker-"+h+" "+(g.className||""),R&&(l.style.marginLeft=-R.x+"px",l.style.marginTop=-R.y+"px"),P&&(l.style.width=P.x+"px",l.style.height=P.y+"px")},_createImg:function(l,h){return h=h||document.createElement("img"),h.src=l,h},_getIconUrl:function(l){return Re.retina&&this.options[l+"RetinaUrl"]||this.options[l+"Url"]}});function ou(l){return new Za(l)}var Ka=Za.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(l){return typeof Ka.imagePath!="string"&&(Ka.imagePath=this._detectIconPath()),(this.options.imagePath||Ka.imagePath)+Za.prototype._getIconUrl.call(this,l)},_stripUrl:function(l){var h=function(g,k,P){var R=k.exec(g);return R&&R[P]};return l=h(l,/^url\((['"])?(.+)\1\)$/,2),l&&h(l,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var l=at("div","leaflet-default-icon-path",document.body),h=ms(l,"background-image")||ms(l,"backgroundImage");if(document.body.removeChild(l),h=this._stripUrl(h),h)return h;var g=document.querySelector('link[href$="leaflet.css"]');return g?g.href.substring(0,g.href.length-11-1):""}}),lu=gn.extend({initialize:function(l){this._marker=l},addHooks:function(){var l=this._marker._icon;this._draggable||(this._draggable=new Yn(l,l,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ze(l,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&St(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var h=this._marker,g=h._map,k=this._marker.options.autoPanSpeed,P=this._marker.options.autoPanPadding,R=ps(h._icon),q=g.getPixelBounds(),te=g.getPixelOrigin(),ie=X(q.min._subtract(te).add(P),q.max._subtract(te).subtract(P));if(!ie.contains(R)){var ye=le((Math.max(ie.max.x,R.x)-ie.max.x)/(q.max.x-ie.max.x)-(Math.min(ie.min.x,R.x)-ie.min.x)/(q.min.x-ie.min.x),(Math.max(ie.max.y,R.y)-ie.max.y)/(q.max.y-ie.max.y)-(Math.min(ie.min.y,R.y)-ie.min.y)/(q.min.y-ie.min.y)).multiplyBy(k);g.panBy(ye,{animate:!1}),this._draggable._newPos._add(ye),this._draggable._startPos._add(ye),ke(h._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=F(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(l){this._marker.options.autoPan&&(G(this._panRequest),this._panRequest=F(this._adjustPan.bind(this,l)))},_onDrag:function(l){var h=this._marker,g=h._shadow,k=ps(h._icon),P=h._map.layerPointToLatLng(k);g&&ke(g,k),h._latlng=P,l.latlng=P,l.oldLatLng=this._oldLatLng,h.fire("move",l).fire("drag",l)},_onDragEnd:function(l){G(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",l)}}),vc=En.extend({options:{icon:new Ka,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(l,h){y(this,h),this._latlng=ge(l)},onAdd:function(l){this._zoomAnimated=this._zoomAnimated&&l.options.markerZoomAnimation,this._zoomAnimated&&l.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(l){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&l.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var h=this._latlng;return this._latlng=ge(l),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(l){return this.options.zIndexOffset=l,this.update()},getIcon:function(){return this.options.icon},setIcon:function(l){return this.options.icon=l,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var l=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(l)}return this},_initIcon:function(){var l=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),g=l.icon.createIcon(this._icon),k=!1;g!==this._icon&&(this._icon&&this._removeIcon(),k=!0,l.title&&(g.title=l.title),g.tagName==="IMG"&&(g.alt=l.alt||"")),Ze(g,h),l.keyboard&&(g.tabIndex="0",g.setAttribute("role","button")),this._icon=g,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ue(g,"focus",this._panOnFocus,this);var P=l.icon.createShadow(this._shadow),R=!1;P!==this._shadow&&(this._removeShadow(),R=!0),P&&(Ze(P,h),P.alt=""),this._shadow=P,l.opacity<1&&this._updateOpacity(),k&&this.getPane().appendChild(this._icon),this._initInteraction(),P&&R&&this.getPane(l.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ut(this._icon,"focus",this._panOnFocus,this),Nt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Nt(this._shadow),this._shadow=null},_setPos:function(l){this._icon&&ke(this._icon,l),this._shadow&&ke(this._shadow,l),this._zIndex=l.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(l){this._icon&&(this._icon.style.zIndex=this._zIndex+l)},_animateZoom:function(l){var h=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(Ze(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),lu)){var l=this.options.draggable;this.dragging&&(l=this.dragging.enabled(),this.dragging.disable()),this.dragging=new lu(this),l&&this.dragging.enable()}},setOpacity:function(l){return this.options.opacity=l,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var l=this.options.opacity;this._icon&&Kr(this._icon,l),this._shadow&&Kr(this._shadow,l)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var l=this._map;if(l){var h=this.options.icon.options,g=h.iconSize?le(h.iconSize):le(0,0),k=h.iconAnchor?le(h.iconAnchor):le(0,0);l.panInside(this._latlng,{paddingTopLeft:k,paddingBottomRight:g.subtract(k)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ex(l,h){return new vc(l,h)}var pa=En.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(l){this._renderer=l.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(l){return y(this,l),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&l&&Object.prototype.hasOwnProperty.call(l,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),bc=pa.extend({options:{fill:!0,radius:10},initialize:function(l,h){y(this,h),this._latlng=ge(l),this._radius=this.options.radius},setLatLng:function(l){var h=this._latlng;return this._latlng=ge(l),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(l){return this.options.radius=this._radius=l,this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var h=l&&l.radius||this._radius;return pa.prototype.setStyle.call(this,l),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,h=this._radiusY||l,g=this._clickTolerance(),k=[l+g,h+g];this._pxBounds=new B(this._point.subtract(k),this._point.add(k))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(l){return l.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Rf(l,h){return new bc(l,h)}var tx=bc.extend({initialize:function(l,h,g){if(typeof h=="number"&&(h=a({},g,{radius:h})),y(this,h),this._latlng=ge(l),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(l){return this._mRadius=l,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var l=[this._radius,this._radiusY||this._radius];return new ae(this._map.layerPointToLatLng(this._point.subtract(l)),this._map.layerPointToLatLng(this._point.add(l)))},setStyle:pa.prototype.setStyle,_project:function(){var l=this._latlng.lng,h=this._latlng.lat,g=this._map,k=g.options.crs;if(k.distance===me.distance){var P=Math.PI/180,R=this._mRadius/me.R/P,q=g.project([h+R,l]),te=g.project([h-R,l]),ie=q.add(te).divideBy(2),ye=g.unproject(ie).lat,Ee=Math.acos((Math.cos(R*P)-Math.sin(h*P)*Math.sin(ye*P))/(Math.cos(h*P)*Math.cos(ye*P)))/P;(isNaN(Ee)||Ee===0)&&(Ee=R/Math.cos(Math.PI/180*h)),this._point=ie.subtract(g.getPixelOrigin()),this._radius=isNaN(Ee)?0:ie.x-g.project([ye,l-Ee]).x,this._radiusY=ie.y-q.y}else{var We=k.unproject(k.project(this._latlng).subtract([this._mRadius,0]));this._point=g.latLngToLayerPoint(this._latlng),this._radius=this._point.x-g.latLngToLayerPoint(We).x}this._updateBounds()}});function dM(l,h,g){return new tx(l,h,g)}var Xa=pa.extend({options:{smoothFactor:1,noClip:!1},initialize:function(l,h){y(this,h),this._setLatLngs(l)},getLatLngs:function(){return this._latlngs},setLatLngs:function(l){return this._setLatLngs(l),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(l){for(var h=1/0,g=null,k=ne,P,R,q=0,te=this._parts.length;q<te;q++)for(var ie=this._parts[q],ye=1,Ee=ie.length;ye<Ee;ye++){P=ie[ye-1],R=ie[ye];var We=k(l,P,R,!0);We<h&&(h=We,g=k(l,P,R))}return g&&(g.distance=Math.sqrt(h)),g},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ve(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(l,h){return h=h||this._defaultShape(),l=ge(l),h.push(l),this._bounds.extend(l),this.redraw()},_setLatLngs:function(l){this._bounds=new ae,this._latlngs=this._convertLatLngs(l)},_defaultShape:function(){return xe(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var h=[],g=xe(l),k=0,P=l.length;k<P;k++)g?(h[k]=ge(l[k]),this._bounds.extend(h[k])):h[k]=this._convertLatLngs(l[k]);return h},_project:function(){var l=new B;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l),this._bounds.isValid()&&l.isValid()&&(this._rawPxBounds=l,this._updateBounds())},_updateBounds:function(){var l=this._clickTolerance(),h=new Q(l,l);this._rawPxBounds&&(this._pxBounds=new B([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(l,h,g){var k=l[0]instanceof re,P=l.length,R,q;if(k){for(q=[],R=0;R<P;R++)q[R]=this._map.latLngToLayerPoint(l[R]),g.extend(q[R]);h.push(q)}else for(R=0;R<P;R++)this._projectLatlngs(l[R],h,g)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,g,k,P,R,q,te,ie;for(g=0,P=0,R=this._rings.length;g<R;g++)for(ie=this._rings[g],k=0,q=ie.length;k<q-1;k++)te=I(ie[k],ie[k+1],l,k,!0),te&&(h[P]=h[P]||[],h[P].push(te[0]),(te[1]!==ie[k+1]||k===q-2)&&(h[P].push(te[1]),P++))}},_simplifyPoints:function(){for(var l=this._parts,h=this.options.smoothFactor,g=0,k=l.length;g<k;g++)l[g]=Qo(l[g],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,h){var g,k,P,R,q,te,ie=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(g=0,R=this._parts.length;g<R;g++)for(te=this._parts[g],k=0,q=te.length,P=q-1;k<q;P=k++)if(!(!h&&k===0)&&Zt(l,te[P],te[k])<=ie)return!0;return!1}});function uM(l,h){return new Xa(l,h)}Xa._flat=Te;var wc=Xa.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Jo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(l){var h=Xa.prototype._convertLatLngs.call(this,l),g=h.length;return g>=2&&h[0]instanceof re&&h[0].equals(h[g-1])&&h.pop(),h},_setLatLngs:function(l){Xa.prototype._setLatLngs.call(this,l),xe(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return xe(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,h=this.options.weight,g=new Q(h,h);if(l=new B(l.min.subtract(g),l.max.add(g)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}for(var k=0,P=this._rings.length,R;k<P;k++)R=Xo(this._rings[k],l,!0),R.length&&this._parts.push(R)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var h=!1,g,k,P,R,q,te,ie,ye;if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(R=0,ie=this._parts.length;R<ie;R++)for(g=this._parts[R],q=0,ye=g.length,te=ye-1;q<ye;te=q++)k=g[q],P=g[te],k.y>l.y!=P.y>l.y&&l.x<(P.x-k.x)*(l.y-k.y)/(P.y-k.y)+k.x&&(h=!h);return h||Xa.prototype._containsPoint.call(this,l,!0)}});function hM(l,h){return new wc(l,h)}var Ja=xs.extend({initialize:function(l,h){y(this,h),this._layers={},l&&this.addData(l)},addData:function(l){var h=N(l)?l:l.features,g,k,P;if(h){for(g=0,k=h.length;g<k;g++)P=h[g],(P.geometries||P.geometry||P.features||P.coordinates)&&this.addData(P);return this}var R=this.options;if(R.filter&&!R.filter(l))return this;var q=zf(l,R);return q?(q.feature=Ff(l),q.defaultOptions=q.options,this.resetStyle(q),R.onEachFeature&&R.onEachFeature(l,q),this.addLayer(q)):this},resetStyle:function(l){return l===void 0?this.eachLayer(this.resetStyle,this):(l.options=a({},l.defaultOptions),this._setLayerStyle(l,this.options.style),this)},setStyle:function(l){return this.eachLayer(function(h){this._setLayerStyle(h,l)},this)},_setLayerStyle:function(l,h){l.setStyle&&(typeof h=="function"&&(h=h(l.feature)),l.setStyle(h))}});function zf(l,h){var g=l.type==="Feature"?l.geometry:l,k=g?g.coordinates:null,P=[],R=h&&h.pointToLayer,q=h&&h.coordsToLatLng||rx,te,ie,ye,Ee;if(!k&&!g)return null;switch(g.type){case"Point":return te=q(k),b1(R,l,te,h);case"MultiPoint":for(ye=0,Ee=k.length;ye<Ee;ye++)te=q(k[ye]),P.push(b1(R,l,te,h));return new xs(P);case"LineString":case"MultiLineString":return ie=$f(k,g.type==="LineString"?0:1,q),new Xa(ie,h);case"Polygon":case"MultiPolygon":return ie=$f(k,g.type==="Polygon"?1:2,q),new wc(ie,h);case"GeometryCollection":for(ye=0,Ee=g.geometries.length;ye<Ee;ye++){var We=zf({geometry:g.geometries[ye],type:"Feature",properties:l.properties},h);We&&P.push(We)}return new xs(P);case"FeatureCollection":for(ye=0,Ee=g.features.length;ye<Ee;ye++){var rt=zf(g.features[ye],h);rt&&P.push(rt)}return new xs(P);default:throw new Error("Invalid GeoJSON object.")}}function b1(l,h,g,k){return l?l(h,g):new vc(g,k&&k.markersInheritOptions&&k)}function rx(l){return new re(l[1],l[0],l[2])}function $f(l,h,g){for(var k=[],P=0,R=l.length,q;P<R;P++)q=h?$f(l[P],h-1,g):(g||rx)(l[P]),k.push(q);return k}function nx(l,h){return l=ge(l),l.alt!==void 0?[p(l.lng,h),p(l.lat,h),p(l.alt,h)]:[p(l.lng,h),p(l.lat,h)]}function If(l,h,g,k){for(var P=[],R=0,q=l.length;R<q;R++)P.push(h?If(l[R],xe(l[R])?0:h-1,g,k):nx(l[R],k));return!h&&g&&P.length>0&&P.push(P[0].slice()),P}function _c(l,h){return l.feature?a({},l.feature,{geometry:h}):Ff(h)}function Ff(l){return l.type==="Feature"||l.type==="FeatureCollection"?l:{type:"Feature",properties:{},geometry:l}}var sx={toGeoJSON:function(l){return _c(this,{type:"Point",coordinates:nx(this.getLatLng(),l)})}};vc.include(sx),tx.include(sx),bc.include(sx),Xa.include({toGeoJSON:function(l){var h=!xe(this._latlngs),g=If(this._latlngs,h?1:0,!1,l);return _c(this,{type:(h?"Multi":"")+"LineString",coordinates:g})}}),wc.include({toGeoJSON:function(l){var h=!xe(this._latlngs),g=h&&!xe(this._latlngs[0]),k=If(this._latlngs,g?2:h?1:0,!0,l);return h||(k=[k]),_c(this,{type:(g?"Multi":"")+"Polygon",coordinates:k})}}),Ki.include({toMultiPoint:function(l){var h=[];return this.eachLayer(function(g){h.push(g.toGeoJSON(l).geometry.coordinates)}),_c(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(l){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(l);var g=h==="GeometryCollection",k=[];return this.eachLayer(function(P){if(P.toGeoJSON){var R=P.toGeoJSON(l);if(g)k.push(R.geometry);else{var q=Ff(R);q.type==="FeatureCollection"?k.push.apply(k,q.features):k.push(q)}}}),g?_c(this,{geometries:k,type:"GeometryCollection"}):{type:"FeatureCollection",features:k}}});function w1(l,h){return new Ja(l,h)}var fM=w1,Bf=En.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(l,h,g){this._url=l,this._bounds=fe(h),y(this,g)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ze(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Nt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(l){return this.options.opacity=l,this._image&&this._updateOpacity(),this},setStyle:function(l){return l.opacity&&this.setOpacity(l.opacity),this},bringToFront:function(){return this._map&&fa(this._image),this},bringToBack:function(){return this._map&&qs(this._image),this},setUrl:function(l){return this._url=l,this._image&&(this._image.src=l),this},setBounds:function(l){return this._bounds=fe(l),this._map&&this._reset(),this},getEvents:function(){var l={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var l=this._url.tagName==="IMG",h=this._image=l?this._url:at("img");if(Ze(h,"leaflet-image-layer"),this._zoomAnimated&&Ze(h,"leaflet-zoom-animated"),this.options.className&&Ze(h,this.options.className),h.onselectstart=m,h.onmousemove=m,h.onload=o(this.fire,this,"load"),h.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),l){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(l){var h=this._map.getZoomScale(l.zoom),g=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;je(this._image,g,h)},_reset:function(){var l=this._image,h=new B(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),g=h.getSize();ke(l,h.min),l.style.width=g.x+"px",l.style.height=g.y+"px"},_updateOpacity:function(){Kr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var l=this.options.errorOverlayUrl;l&&this._url!==l&&(this._url=l,this._image.src=l)},getCenter:function(){return this._bounds.getCenter()}}),mM=function(l,h,g){return new Bf(l,h,g)},_1=Bf.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var l=this._url.tagName==="VIDEO",h=this._image=l?this._url:at("video");if(Ze(h,"leaflet-image-layer"),this._zoomAnimated&&Ze(h,"leaflet-zoom-animated"),this.options.className&&Ze(h,this.options.className),h.onselectstart=m,h.onmousemove=m,h.onloadeddata=o(this.fire,this,"load"),l){for(var g=h.getElementsByTagName("source"),k=[],P=0;P<g.length;P++)k.push(g[P].src);this._url=g.length>0?k:[h.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var R=0;R<this._url.length;R++){var q=at("source");q.src=this._url[R],h.appendChild(q)}}});function pM(l,h,g){return new _1(l,h,g)}var k1=Bf.extend({_initImage:function(){var l=this._image=this._url;Ze(l,"leaflet-image-layer"),this._zoomAnimated&&Ze(l,"leaflet-zoom-animated"),this.options.className&&Ze(l,this.options.className),l.onselectstart=m,l.onmousemove=m}});function gM(l,h,g){return new k1(l,h,g)}var ga=En.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(l,h){l&&(l instanceof re||N(l))?(this._latlng=ge(l),y(this,h)):(y(this,l),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(l){return l=arguments.length?l:this._source._map,l.hasLayer(this)||l.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(l){return this._map?this.close():(arguments.length?this._source=l:l=this._source,this._prepareOpen(),this.openOn(l._map)),this},onAdd:function(l){this._zoomAnimated=l._zoomAnimated,this._container||this._initLayout(),l._fadeAnimated&&Kr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),l._fadeAnimated&&Kr(this._container,1),this.bringToFront(),this.options.interactive&&(Ze(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(l){l._fadeAnimated?(Kr(this._container,0),this._removeTimeout=setTimeout(o(Nt,void 0,this._container),200)):Nt(this._container),this.options.interactive&&(St(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(l){return this._latlng=ge(l),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(l){return this._content=l,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var l={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&fa(this._container),this},bringToBack:function(){return this._map&&qs(this._container),this},_prepareOpen:function(l){var h=this._source;if(!h._map)return!1;if(h instanceof xs){h=null;var g=this._source._layers;for(var k in g)if(g[k]._map){h=g[k];break}if(!h)return!1;this._source=h}if(!l)if(h.getCenter)l=h.getCenter();else if(h.getLatLng)l=h.getLatLng();else if(h.getBounds)l=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(l),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var l=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")l.innerHTML=h;else{for(;l.hasChildNodes();)l.removeChild(l.firstChild);l.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),h=le(this.options.offset),g=this._getAnchor();this._zoomAnimated?ke(this._container,l.add(g)):h=h.add(l).add(g);var k=this._containerBottom=-h.y,P=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=k+"px",this._container.style.left=P+"px"}},_getAnchor:function(){return[0,0]}});tt.include({_initOverlay:function(l,h,g,k){var P=h;return P instanceof l||(P=new l(k).setContent(h)),g&&P.setLatLng(g),P}}),En.include({_initOverlay:function(l,h,g,k){var P=g;return P instanceof l?(y(P,k),P._source=this):(P=h&&!k?h:new l(k,this),P.setContent(g)),P}});var Hf=ga.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(l){return l=arguments.length?l:this._source._map,!l.hasLayer(this)&&l._popup&&l._popup.options.autoClose&&l.removeLayer(l._popup),l._popup=this,ga.prototype.openOn.call(this,l)},onAdd:function(l){ga.prototype.onAdd.call(this,l),l.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof pa||this._source.on("preclick",_r))},onRemove:function(l){ga.prototype.onRemove.call(this,l),l.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof pa||this._source.off("preclick",_r))},getEvents:function(){var l=ga.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(l.preclick=this.close),this.options.keepInView&&(l.moveend=this._adjustPan),l},_initLayout:function(){var l="leaflet-popup",h=this._container=at("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated"),g=this._wrapper=at("div",l+"-content-wrapper",h);if(this._contentNode=at("div",l+"-content",g),qa(h),ma(this._contentNode),Ue(h,"contextmenu",_r),this._tipContainer=at("div",l+"-tip-container",h),this._tip=at("div",l+"-tip",this._tipContainer),this.options.closeButton){var k=this._closeButton=at("a",l+"-close-button",h);k.setAttribute("role","button"),k.setAttribute("aria-label","Close popup"),k.href="#close",k.innerHTML='<span aria-hidden="true">&#215;</span>',Ue(k,"click",function(P){ar(P),this.close()},this)}},_updateLayout:function(){var l=this._contentNode,h=l.style;h.width="",h.whiteSpace="nowrap";var g=l.offsetWidth;g=Math.min(g,this.options.maxWidth),g=Math.max(g,this.options.minWidth),h.width=g+1+"px",h.whiteSpace="",h.height="";var k=l.offsetHeight,P=this.options.maxHeight,R="leaflet-popup-scrolled";P&&k>P?(h.height=P+"px",Ze(l,R)):St(l,R),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var h=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),g=this._getAnchor();ke(this._container,h.add(g))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var l=this._map,h=parseInt(ms(this._container,"marginBottom"),10)||0,g=this._container.offsetHeight+h,k=this._containerWidth,P=new Q(this._containerLeft,-g-this._containerBottom);P._add(ps(this._container));var R=l.layerPointToContainerPoint(P),q=le(this.options.autoPanPadding),te=le(this.options.autoPanPaddingTopLeft||q),ie=le(this.options.autoPanPaddingBottomRight||q),ye=l.getSize(),Ee=0,We=0;R.x+k+ie.x>ye.x&&(Ee=R.x+k-ye.x+ie.x),R.x-Ee-te.x<0&&(Ee=R.x-te.x),R.y+g+ie.y>ye.y&&(We=R.y+g-ye.y+ie.y),R.y-We-te.y<0&&(We=R.y-te.y),(Ee||We)&&(this.options.keepInView&&(this._autopanning=!0),l.fire("autopanstart").panBy([Ee,We]))}},_getAnchor:function(){return le(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),xM=function(l,h){return new Hf(l,h)};tt.mergeOptions({closePopupOnClick:!0}),tt.include({openPopup:function(l,h,g){return this._initOverlay(Hf,l,h,g).openOn(this),this},closePopup:function(l){return l=arguments.length?l:this._popup,l&&l.close(),this}}),En.include({bindPopup:function(l,h){return this._popup=this._initOverlay(Hf,this._popup,l,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l){return this._popup&&(this instanceof xs||(this._popup._source=this),this._popup._prepareOpen(l||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(l){return this._popup&&this._popup.setContent(l),this},getPopup:function(){return this._popup},_openPopup:function(l){if(!(!this._popup||!this._map)){Be(l);var h=l.layer||l.target;if(this._popup._source===h&&!(h instanceof pa)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(l.latlng);return}this._popup._source=h,this.openPopup(l.latlng)}},_movePopup:function(l){this._popup.setLatLng(l.latlng)},_onKeyPress:function(l){l.originalEvent.keyCode===13&&this._openPopup(l)}});var Wf=ga.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(l){ga.prototype.onAdd.call(this,l),this.setOpacity(this.options.opacity),l.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(l){ga.prototype.onRemove.call(this,l),l.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var l=ga.prototype.getEvents.call(this);return this.options.permanent||(l.preclick=this.close),l},_initLayout:function(){var l="leaflet-tooltip",h=l+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=at("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var h,g,k=this._map,P=this._container,R=k.latLngToContainerPoint(k.getCenter()),q=k.layerPointToContainerPoint(l),te=this.options.direction,ie=P.offsetWidth,ye=P.offsetHeight,Ee=le(this.options.offset),We=this._getAnchor();te==="top"?(h=ie/2,g=ye):te==="bottom"?(h=ie/2,g=0):te==="center"?(h=ie/2,g=ye/2):te==="right"?(h=0,g=ye/2):te==="left"?(h=ie,g=ye/2):q.x<R.x?(te="right",h=0,g=ye/2):(te="left",h=ie+(Ee.x+We.x)*2,g=ye/2),l=l.subtract(le(h,g,!0)).add(Ee).add(We),St(P,"leaflet-tooltip-right"),St(P,"leaflet-tooltip-left"),St(P,"leaflet-tooltip-top"),St(P,"leaflet-tooltip-bottom"),Ze(P,"leaflet-tooltip-"+te),ke(P,l)},_updatePosition:function(){var l=this._map.latLngToLayerPoint(this._latlng);this._setPosition(l)},setOpacity:function(l){this.options.opacity=l,this._container&&Kr(this._container,l)},_animateZoom:function(l){var h=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center);this._setPosition(h)},_getAnchor:function(){return le(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),yM=function(l,h){return new Wf(l,h)};tt.include({openTooltip:function(l,h,g){return this._initOverlay(Wf,l,h,g).openOn(this),this},closeTooltip:function(l){return l.close(),this}}),En.include({bindTooltip:function(l,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Wf,this._tooltip,l,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(!(!l&&this._tooltipHandlersAdded)){var h=l?"off":"on",g={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?g.add=this._openTooltip:(g.mouseover=this._openTooltip,g.mouseout=this.closeTooltip,g.click=this._openTooltip,this._map?this._addFocusListeners():g.add=this._addFocusListeners),this._tooltip.options.sticky&&(g.mousemove=this._moveTooltip),this[h](g),this._tooltipHandlersAdded=!l}},openTooltip:function(l){return this._tooltip&&(this instanceof xs||(this._tooltip._source=this),this._tooltip._prepareOpen(l)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(l){return this._tooltip&&this._tooltip.setContent(l),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(l){var h=typeof l.getElement=="function"&&l.getElement();h&&(Ue(h,"focus",function(){this._tooltip._source=l,this.openTooltip()},this),Ue(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(l){var h=typeof l.getElement=="function"&&l.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(l){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var h=this;this._map.once("moveend",function(){h._openOnceFlag=!1,h._openTooltip(l)});return}this._tooltip._source=l.layer||l.target,this.openTooltip(this._tooltip.options.sticky?l.latlng:void 0)}},_moveTooltip:function(l){var h=l.latlng,g,k;this._tooltip.options.sticky&&l.originalEvent&&(g=this._map.mouseEventToContainerPoint(l.originalEvent),k=this._map.containerPointToLayerPoint(g),h=this._map.layerPointToLatLng(k)),this._tooltip.setLatLng(h)}});var j1=Za.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var h=l&&l.tagName==="DIV"?l:document.createElement("div"),g=this.options;if(g.html instanceof Element?(Ho(h),h.appendChild(g.html)):h.innerHTML=g.html!==!1?g.html:"",g.bgPos){var k=le(g.bgPos);h.style.backgroundPosition=-k.x+"px "+-k.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function vM(l){return new j1(l)}Za.Default=Ka;var cu=En.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Re.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(l){y(this,l)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(l){l._addZoomLimit(this)},onRemove:function(l){this._removeAllTiles(),Nt(this._container),l._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(fa(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(qs(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(l){return this.options.opacity=l,this._updateOpacity(),this},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var l=this._clampZoom(this._map.getZoom());l!==this._tileZoom&&(this._tileZoom=l,this._updateLevels()),this._update()}return this},getEvents:function(){var l={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),l.move=this._onMove),this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},createTile:function(){return document.createElement("div")},getTileSize:function(){var l=this.options.tileSize;return l instanceof Q?l:new Q(l,l)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var h=this.getPane().children,g=-l(-1/0,1/0),k=0,P=h.length,R;k<P;k++)R=h[k].style.zIndex,h[k]!==this._container&&R&&(g=l(g,+R));isFinite(g)&&(this.options.zIndex=g+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Re.ielt9){Kr(this._container,this.options.opacity);var l=+new Date,h=!1,g=!1;for(var k in this._tiles){var P=this._tiles[k];if(!(!P.current||!P.loaded)){var R=Math.min(1,(l-P.loaded)/200);Kr(P.el,R),R<1?h=!0:(P.active?g=!0:this._onOpaqueTile(P),P.active=!0)}}g&&!this._noPrune&&this._pruneTiles(),h&&(G(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=at("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var l=this._tileZoom,h=this.options.maxZoom;if(l!==void 0){for(var g in this._levels)g=Number(g),this._levels[g].el.children.length||g===l?(this._levels[g].el.style.zIndex=h-Math.abs(l-g),this._onUpdateLevel(g)):(Nt(this._levels[g].el),this._removeTilesAtZoom(g),this._onRemoveLevel(g),delete this._levels[g]);var k=this._levels[l],P=this._map;return k||(k=this._levels[l]={},k.el=at("div","leaflet-tile-container leaflet-zoom-animated",this._container),k.el.style.zIndex=h,k.origin=P.project(P.unproject(P.getPixelOrigin()),l).round(),k.zoom=l,this._setZoomTransform(k,P.getCenter(),P.getZoom()),m(k.el.offsetWidth),this._onCreateLevel(k)),this._level=k,k}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var l,h,g=this._map.getZoom();if(g>this.options.maxZoom||g<this.options.minZoom){this._removeAllTiles();return}for(l in this._tiles)h=this._tiles[l],h.retain=h.current;for(l in this._tiles)if(h=this._tiles[l],h.current&&!h.active){var k=h.coords;this._retainParent(k.x,k.y,k.z,k.z-5)||this._retainChildren(k.x,k.y,k.z,k.z+2)}for(l in this._tiles)this._tiles[l].retain||this._removeTile(l)}},_removeTilesAtZoom:function(l){for(var h in this._tiles)this._tiles[h].coords.z===l&&this._removeTile(h)},_removeAllTiles:function(){for(var l in this._tiles)this._removeTile(l)},_invalidateAll:function(){for(var l in this._levels)Nt(this._levels[l].el),this._onRemoveLevel(Number(l)),delete this._levels[l];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,h,g,k){var P=Math.floor(l/2),R=Math.floor(h/2),q=g-1,te=new Q(+P,+R);te.z=+q;var ie=this._tileCoordsToKey(te),ye=this._tiles[ie];return ye&&ye.active?(ye.retain=!0,!0):(ye&&ye.loaded&&(ye.retain=!0),q>k?this._retainParent(P,R,q,k):!1)},_retainChildren:function(l,h,g,k){for(var P=2*l;P<2*l+2;P++)for(var R=2*h;R<2*h+2;R++){var q=new Q(P,R);q.z=g+1;var te=this._tileCoordsToKey(q),ie=this._tiles[te];if(ie&&ie.active){ie.retain=!0;continue}else ie&&ie.loaded&&(ie.retain=!0);g+1<k&&this._retainChildren(P,R,g+1,k)}},_resetView:function(l){var h=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(l){this._setView(l.center,l.zoom,!0,l.noUpdate)},_clampZoom:function(l){var h=this.options;return h.minNativeZoom!==void 0&&l<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<l?h.maxNativeZoom:l},_setView:function(l,h,g,k){var P=Math.round(h);this.options.maxZoom!==void 0&&P>this.options.maxZoom||this.options.minZoom!==void 0&&P<this.options.minZoom?P=void 0:P=this._clampZoom(P);var R=this.options.updateWhenZooming&&P!==this._tileZoom;(!k||R)&&(this._tileZoom=P,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),P!==void 0&&this._update(l),g||this._pruneTiles(),this._noPrune=!!g),this._setZoomTransforms(l,h)},_setZoomTransforms:function(l,h){for(var g in this._levels)this._setZoomTransform(this._levels[g],l,h)},_setZoomTransform:function(l,h,g){var k=this._map.getZoomScale(g,l.zoom),P=l.origin.multiplyBy(k).subtract(this._map._getNewPixelOrigin(h,g)).round();Re.any3d?je(l.el,P,k):ke(l.el,P)},_resetGrid:function(){var l=this._map,h=l.options.crs,g=this._tileSize=this.getTileSize(),k=this._tileZoom,P=this._map.getPixelWorldBounds(this._tileZoom);P&&(this._globalTileRange=this._pxBoundsToTileRange(P)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,h.wrapLng[0]],k).x/g.x),Math.ceil(l.project([0,h.wrapLng[1]],k).x/g.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([h.wrapLat[0],0],k).y/g.x),Math.ceil(l.project([h.wrapLat[1],0],k).y/g.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(l){var h=this._map,g=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),k=h.getZoomScale(g,this._tileZoom),P=h.project(l,this._tileZoom).floor(),R=h.getSize().divideBy(k*2);return new B(P.subtract(R),P.add(R))},_update:function(l){var h=this._map;if(h){var g=this._clampZoom(h.getZoom());if(l===void 0&&(l=h.getCenter()),this._tileZoom!==void 0){var k=this._getTiledPixelBounds(l),P=this._pxBoundsToTileRange(k),R=P.getCenter(),q=[],te=this.options.keepBuffer,ie=new B(P.getBottomLeft().subtract([te,-te]),P.getTopRight().add([te,-te]));if(!(isFinite(P.min.x)&&isFinite(P.min.y)&&isFinite(P.max.x)&&isFinite(P.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ye in this._tiles){var Ee=this._tiles[ye].coords;(Ee.z!==this._tileZoom||!ie.contains(new Q(Ee.x,Ee.y)))&&(this._tiles[ye].current=!1)}if(Math.abs(g-this._tileZoom)>1){this._setView(l,g);return}for(var We=P.min.y;We<=P.max.y;We++)for(var rt=P.min.x;rt<=P.max.x;rt++){var xn=new Q(rt,We);if(xn.z=this._tileZoom,!!this._isValidTile(xn)){var Mr=this._tiles[this._tileCoordsToKey(xn)];Mr?Mr.current=!0:q.push(xn)}}if(q.sort(function(Pn,jc){return Pn.distanceTo(R)-jc.distanceTo(R)}),q.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ys=document.createDocumentFragment();for(rt=0;rt<q.length;rt++)this._addTile(q[rt],ys);this._level.el.appendChild(ys)}}}},_isValidTile:function(l){var h=this._map.options.crs;if(!h.infinite){var g=this._globalTileRange;if(!h.wrapLng&&(l.x<g.min.x||l.x>g.max.x)||!h.wrapLat&&(l.y<g.min.y||l.y>g.max.y))return!1}if(!this.options.bounds)return!0;var k=this._tileCoordsToBounds(l);return fe(this.options.bounds).overlaps(k)},_keyToBounds:function(l){return this._tileCoordsToBounds(this._keyToTileCoords(l))},_tileCoordsToNwSe:function(l){var h=this._map,g=this.getTileSize(),k=l.scaleBy(g),P=k.add(g),R=h.unproject(k,l.z),q=h.unproject(P,l.z);return[R,q]},_tileCoordsToBounds:function(l){var h=this._tileCoordsToNwSe(l),g=new ae(h[0],h[1]);return this.options.noWrap||(g=this._map.wrapLatLngBounds(g)),g},_tileCoordsToKey:function(l){return l.x+":"+l.y+":"+l.z},_keyToTileCoords:function(l){var h=l.split(":"),g=new Q(+h[0],+h[1]);return g.z=+h[2],g},_removeTile:function(l){var h=this._tiles[l];h&&(Nt(h.el),delete this._tiles[l],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(l)}))},_initTile:function(l){Ze(l,"leaflet-tile");var h=this.getTileSize();l.style.width=h.x+"px",l.style.height=h.y+"px",l.onselectstart=m,l.onmousemove=m,Re.ielt9&&this.options.opacity<1&&Kr(l,this.options.opacity)},_addTile:function(l,h){var g=this._getTilePos(l),k=this._tileCoordsToKey(l),P=this.createTile(this._wrapCoords(l),o(this._tileReady,this,l));this._initTile(P),this.createTile.length<2&&F(o(this._tileReady,this,l,null,P)),ke(P,g),this._tiles[k]={el:P,coords:l,current:!0},h.appendChild(P),this.fire("tileloadstart",{tile:P,coords:l})},_tileReady:function(l,h,g){h&&this.fire("tileerror",{error:h,tile:g,coords:l});var k=this._tileCoordsToKey(l);g=this._tiles[k],g&&(g.loaded=+new Date,this._map._fadeAnimated?(Kr(g.el,0),G(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this)):(g.active=!0,this._pruneTiles()),h||(Ze(g.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:g.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Re.ielt9||!this._map._fadeAnimated?F(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(l){return l.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(l){var h=new Q(this._wrapX?f(l.x,this._wrapX):l.x,this._wrapY?f(l.y,this._wrapY):l.y);return h.z=l.z,h},_pxBoundsToTileRange:function(l){var h=this.getTileSize();return new B(l.min.unscaleBy(h).floor(),l.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var l in this._tiles)if(!this._tiles[l].loaded)return!1;return!0}});function bM(l){return new cu(l)}var kc=cu.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(l,h){this._url=l,h=y(this,h),h.detectRetina&&Re.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(l,h){return this._url===l&&h===void 0&&(h=!0),this._url=l,h||this.redraw(),this},createTile:function(l,h){var g=document.createElement("img");return Ue(g,"load",o(this._tileOnLoad,this,h,g)),Ue(g,"error",o(this._tileOnError,this,h,g)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(g.referrerPolicy=this.options.referrerPolicy),g.alt="",g.src=this.getTileUrl(l),g},getTileUrl:function(l){var h={r:Re.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var g=this._globalTileRange.max.y-l.y;this.options.tms&&(h.y=g),h["-y"]=g}return b(this._url,a(h,this.options))},_tileOnLoad:function(l,h){Re.ielt9?setTimeout(o(l,this,null,h),0):l(null,h)},_tileOnError:function(l,h,g){var k=this.options.errorTileUrl;k&&h.getAttribute("src")!==k&&(h.src=k),l(g,h)},_onTileRemove:function(l){l.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom,h=this.options.maxZoom,g=this.options.zoomReverse,k=this.options.zoomOffset;return g&&(l=h-l),l+k},_getSubdomain:function(l){var h=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var l,h;for(l in this._tiles)if(this._tiles[l].coords.z!==this._tileZoom&&(h=this._tiles[l].el,h.onload=m,h.onerror=m,!h.complete)){h.src=C;var g=this._tiles[l].coords;Nt(h),delete this._tiles[l],this.fire("tileabort",{tile:h,coords:g})}},_removeTile:function(l){var h=this._tiles[l];if(h)return h.el.setAttribute("src",C),cu.prototype._removeTile.call(this,l)},_tileReady:function(l,h,g){if(!(!this._map||g&&g.getAttribute("src")===C))return cu.prototype._tileReady.call(this,l,h,g)}});function N1(l,h){return new kc(l,h)}var S1=kc.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,h){this._url=l;var g=a({},this.defaultWmsParams);for(var k in h)k in this.options||(g[k]=h[k]);h=y(this,h);var P=h.detectRetina&&Re.retina?2:1,R=this.getTileSize();g.width=R.x*P,g.height=R.y*P,this.wmsParams=g},onAdd:function(l){this._crs=this.options.crs||l.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,kc.prototype.onAdd.call(this,l)},getTileUrl:function(l){var h=this._tileCoordsToNwSe(l),g=this._crs,k=X(g.project(h[0]),g.project(h[1])),P=k.min,R=k.max,q=(this._wmsVersion>=1.3&&this._crs===iu?[P.y,P.x,R.y,R.x]:[P.x,P.y,R.x,R.y]).join(","),te=kc.prototype.getTileUrl.call(this,l);return te+_(this.wmsParams,te,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+q},setParams:function(l,h){return a(this.wmsParams,l),h||this.redraw(),this}});function wM(l,h){return new S1(l,h)}kc.WMS=S1,N1.wms=wM;var Qa=En.extend({options:{padding:.1},initialize:function(l){y(this,l),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ze(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var l={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(l.zoomanim=this._onAnimZoom),l},_onAnimZoom:function(l){this._updateTransform(l.center,l.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,h){var g=this._map.getZoomScale(h,this._zoom),k=this._map.getSize().multiplyBy(.5+this.options.padding),P=this._map.project(this._center,h),R=k.multiplyBy(-g).add(P).subtract(this._map._getNewPixelOrigin(l,h));Re.any3d?je(this._container,R,g):ke(this._container,R)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var l in this._layers)this._layers[l]._reset()},_onZoomEnd:function(){for(var l in this._layers)this._layers[l]._project()},_updatePaths:function(){for(var l in this._layers)this._layers[l]._update()},_update:function(){var l=this.options.padding,h=this._map.getSize(),g=this._map.containerPointToLayerPoint(h.multiplyBy(-l)).round();this._bounds=new B(g,g.add(h.multiplyBy(1+l*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),C1=Qa.extend({options:{tolerance:0},getEvents:function(){var l=Qa.prototype.getEvents.call(this);return l.viewprereset=this._onViewPreReset,l},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Qa.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var l=this._container=document.createElement("canvas");Ue(l,"mousemove",this._onMouseMove,this),Ue(l,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ue(l,"mouseout",this._handleMouseOut,this),l._leaflet_disable_events=!0,this._ctx=l.getContext("2d")},_destroyContainer:function(){G(this._redrawRequest),delete this._ctx,Nt(this._container),ut(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var l;this._redrawBounds=null;for(var h in this._layers)l=this._layers[h],l._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qa.prototype._update.call(this);var l=this._bounds,h=this._container,g=l.getSize(),k=Re.retina?2:1;ke(h,l.min),h.width=k*g.x,h.height=k*g.y,h.style.width=g.x+"px",h.style.height=g.y+"px",Re.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){Qa.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(l){this._updateDashArray(l),this._layers[d(l)]=l;var h=l._order={layer:l,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(l){this._requestRedraw(l)},_removePath:function(l){var h=l._order,g=h.next,k=h.prev;g?g.prev=k:this._drawLast=k,k?k.next=g:this._drawFirst=g,delete l._order,delete this._layers[d(l)],this._requestRedraw(l)},_updatePath:function(l){this._extendRedrawBounds(l),l._project(),l._update(),this._requestRedraw(l)},_updateStyle:function(l){this._updateDashArray(l),this._requestRedraw(l)},_updateDashArray:function(l){if(typeof l.options.dashArray=="string"){var h=l.options.dashArray.split(/[, ]+/),g=[],k,P;for(P=0;P<h.length;P++){if(k=Number(h[P]),isNaN(k))return;g.push(k)}l.options._dashArray=g}else l.options._dashArray=l.options.dashArray},_requestRedraw:function(l){this._map&&(this._extendRedrawBounds(l),this._redrawRequest=this._redrawRequest||F(this._redraw,this))},_extendRedrawBounds:function(l){if(l._pxBounds){var h=(l.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new B,this._redrawBounds.extend(l._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(l._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var l=this._redrawBounds;if(l){var h=l.getSize();this._ctx.clearRect(l.min.x,l.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var l,h=this._redrawBounds;if(this._ctx.save(),h){var g=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,g.x,g.y),this._ctx.clip()}this._drawing=!0;for(var k=this._drawFirst;k;k=k.next)l=k.layer,(!h||l._pxBounds&&l._pxBounds.intersects(h))&&l._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,h){if(this._drawing){var g,k,P,R,q=l._parts,te=q.length,ie=this._ctx;if(te){for(ie.beginPath(),g=0;g<te;g++){for(k=0,P=q[g].length;k<P;k++)R=q[g][k],ie[k?"lineTo":"moveTo"](R.x,R.y);h&&ie.closePath()}this._fillStroke(ie,l)}}},_updateCircle:function(l){if(!(!this._drawing||l._empty())){var h=l._point,g=this._ctx,k=Math.max(Math.round(l._radius),1),P=(Math.max(Math.round(l._radiusY),1)||k)/k;P!==1&&(g.save(),g.scale(1,P)),g.beginPath(),g.arc(h.x,h.y/P,k,0,Math.PI*2,!1),P!==1&&g.restore(),this._fillStroke(g,l)}},_fillStroke:function(l,h){var g=h.options;g.fill&&(l.globalAlpha=g.fillOpacity,l.fillStyle=g.fillColor||g.color,l.fill(g.fillRule||"evenodd")),g.stroke&&g.weight!==0&&(l.setLineDash&&l.setLineDash(h.options&&h.options._dashArray||[]),l.globalAlpha=g.opacity,l.lineWidth=g.weight,l.strokeStyle=g.color,l.lineCap=g.lineCap,l.lineJoin=g.lineJoin,l.stroke())},_onClick:function(l){for(var h=this._map.mouseEventToLayerPoint(l),g,k,P=this._drawFirst;P;P=P.next)g=P.layer,g.options.interactive&&g._containsPoint(h)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(g))&&(k=g);this._fireEvent(k?[k]:!1,l)},_onMouseMove:function(l){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(l);this._handleMouseHover(l,h)}},_handleMouseOut:function(l){var h=this._hoveredLayer;h&&(St(this._container,"leaflet-interactive"),this._fireEvent([h],l,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(l,h){if(!this._mouseHoverThrottled){for(var g,k,P=this._drawFirst;P;P=P.next)g=P.layer,g.options.interactive&&g._containsPoint(h)&&(k=g);k!==this._hoveredLayer&&(this._handleMouseOut(l),k&&(Ze(this._container,"leaflet-interactive"),this._fireEvent([k],l,"mouseover"),this._hoveredLayer=k)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,l),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(l,h,g){this._map._fireDOMEvent(h,g||h.type,l)},_bringToFront:function(l){var h=l._order;if(h){var g=h.next,k=h.prev;if(g)g.prev=k;else return;k?k.next=g:g&&(this._drawFirst=g),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(l)}},_bringToBack:function(l){var h=l._order;if(h){var g=h.next,k=h.prev;if(k)k.next=g;else return;g?g.prev=k:k&&(this._drawLast=k),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(l)}}});function E1(l){return Re.canvas?new C1(l):null}var du=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(l){return document.createElement("<lvml:"+l+' class="lvml">')}}catch{}return function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),_M={_initContainer:function(){this._container=at("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Qa.prototype._update.call(this),this.fire("update"))},_initPath:function(l){var h=l._container=du("shape");Ze(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",l._path=du("path"),h.appendChild(l._path),this._updateStyle(l),this._layers[d(l)]=l},_addPath:function(l){var h=l._container;this._container.appendChild(h),l.options.interactive&&l.addInteractiveTarget(h)},_removePath:function(l){var h=l._container;Nt(h),l.removeInteractiveTarget(h),delete this._layers[d(l)]},_updateStyle:function(l){var h=l._stroke,g=l._fill,k=l.options,P=l._container;P.stroked=!!k.stroke,P.filled=!!k.fill,k.stroke?(h||(h=l._stroke=du("stroke")),P.appendChild(h),h.weight=k.weight+"px",h.color=k.color,h.opacity=k.opacity,k.dashArray?h.dashStyle=N(k.dashArray)?k.dashArray.join(" "):k.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=k.lineCap.replace("butt","flat"),h.joinstyle=k.lineJoin):h&&(P.removeChild(h),l._stroke=null),k.fill?(g||(g=l._fill=du("fill")),P.appendChild(g),g.color=k.fillColor||k.color,g.opacity=k.fillOpacity):g&&(P.removeChild(g),l._fill=null)},_updateCircle:function(l){var h=l._point.round(),g=Math.round(l._radius),k=Math.round(l._radiusY||g);this._setPath(l,l._empty()?"M0 0":"AL "+h.x+","+h.y+" "+g+","+k+" 0,"+65535*360)},_setPath:function(l,h){l._path.v=h},_bringToFront:function(l){fa(l._container)},_bringToBack:function(l){qs(l._container)}},Uf=Re.vml?du:ue,uu=Qa.extend({_initContainer:function(){this._container=Uf("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Uf("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Nt(this._container),ut(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qa.prototype._update.call(this);var l=this._bounds,h=l.getSize(),g=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,g.setAttribute("width",h.x),g.setAttribute("height",h.y)),ke(g,l.min),g.setAttribute("viewBox",[l.min.x,l.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(l){var h=l._path=Uf("path");l.options.className&&Ze(h,l.options.className),l.options.interactive&&Ze(h,"leaflet-interactive"),this._updateStyle(l),this._layers[d(l)]=l},_addPath:function(l){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(l._path),l.addInteractiveTarget(l._path)},_removePath:function(l){Nt(l._path),l.removeInteractiveTarget(l._path),delete this._layers[d(l)]},_updatePath:function(l){l._project(),l._update()},_updateStyle:function(l){var h=l._path,g=l.options;h&&(g.stroke?(h.setAttribute("stroke",g.color),h.setAttribute("stroke-opacity",g.opacity),h.setAttribute("stroke-width",g.weight),h.setAttribute("stroke-linecap",g.lineCap),h.setAttribute("stroke-linejoin",g.lineJoin),g.dashArray?h.setAttribute("stroke-dasharray",g.dashArray):h.removeAttribute("stroke-dasharray"),g.dashOffset?h.setAttribute("stroke-dashoffset",g.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),g.fill?(h.setAttribute("fill",g.fillColor||g.color),h.setAttribute("fill-opacity",g.fillOpacity),h.setAttribute("fill-rule",g.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(l,h){this._setPath(l,Ae(l._parts,h))},_updateCircle:function(l){var h=l._point,g=Math.max(Math.round(l._radius),1),k=Math.max(Math.round(l._radiusY),1)||g,P="a"+g+","+k+" 0 1,0 ",R=l._empty()?"M0 0":"M"+(h.x-g)+","+h.y+P+g*2+",0 "+P+-g*2+",0 ";this._setPath(l,R)},_setPath:function(l,h){l._path.setAttribute("d",h)},_bringToFront:function(l){fa(l._path)},_bringToBack:function(l){qs(l._path)}});Re.vml&&uu.include(_M);function P1(l){return Re.svg||Re.vml?new uu(l):null}tt.include({getRenderer:function(l){var h=l.options.renderer||this._getPaneRenderer(l.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(l){if(l==="overlayPane"||l===void 0)return!1;var h=this._paneRenderers[l];return h===void 0&&(h=this._createRenderer({pane:l}),this._paneRenderers[l]=h),h},_createRenderer:function(l){return this.options.preferCanvas&&E1(l)||P1(l)}});var T1=wc.extend({initialize:function(l,h){wc.prototype.initialize.call(this,this._boundsToLatLngs(l),h)},setBounds:function(l){return this.setLatLngs(this._boundsToLatLngs(l))},_boundsToLatLngs:function(l){return l=fe(l),[l.getSouthWest(),l.getNorthWest(),l.getNorthEast(),l.getSouthEast()]}});function kM(l,h){return new T1(l,h)}uu.create=Uf,uu.pointsToPath=Ae,Ja.geometryToLayer=zf,Ja.coordsToLatLng=rx,Ja.coordsToLatLngs=$f,Ja.latLngToCoords=nx,Ja.latLngsToCoords=If,Ja.getFeature=_c,Ja.asFeature=Ff,tt.mergeOptions({boxZoom:!0});var M1=gn.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane,this._resetStateTimeout=0,l.on("unload",this._destroy,this)},addHooks:function(){Ue(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ut(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Nt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(l){if(!l.shiftKey||l.which!==1&&l.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Wa(),$r(),this._startPoint=this._map.mouseEventToContainerPoint(l),Ue(document,{contextmenu:Be,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=at("div","leaflet-zoom-box",this._container),Ze(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var h=new B(this._point,this._startPoint),g=h.getSize();ke(this._box,h.min),this._box.style.width=g.x+"px",this._box.style.height=g.y+"px"},_finish:function(){this._moved&&(Nt(this._box),St(this._container,"leaflet-crosshair")),Ua(),Un(),ut(document,{contextmenu:Be,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if(!(l.which!==1&&l.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var h=new ae(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(l){l.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});tt.addInitHook("addHandler","boxZoom",M1),tt.mergeOptions({doubleClickZoom:!0});var O1=gn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var h=this._map,g=h.getZoom(),k=h.options.zoomDelta,P=l.originalEvent.shiftKey?g-k:g+k;h.options.doubleClickZoom==="center"?h.setZoom(P):h.setZoomAround(l.containerPoint,P)}});tt.addInitHook("addHandler","doubleClickZoom",O1),tt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var D1=gn.extend({addHooks:function(){if(!this._draggable){var l=this._map;this._draggable=new Yn(l._mapPane,l._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),l.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),l.on("zoomend",this._onZoomEnd,this),l.whenReady(this._onZoomEnd,this))}Ze(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){St(this._map._container,"leaflet-grab"),St(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var l=this._map;if(l._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=fe(this._map.options.maxBounds);this._offsetLimit=X(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;l.fire("movestart").fire("dragstart"),l.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var h=this._lastTime=+new Date,g=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(g),this._times.push(h),this._prunePositions(h)}this._map.fire("move",l).fire("drag",l)},_prunePositions:function(l){for(;this._positions.length>1&&l-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(l).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,h){return l-(l-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var l=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;l.x<h.min.x&&(l.x=this._viscousLimit(l.x,h.min.x)),l.y<h.min.y&&(l.y=this._viscousLimit(l.y,h.min.y)),l.x>h.max.x&&(l.x=this._viscousLimit(l.x,h.max.x)),l.y>h.max.y&&(l.y=this._viscousLimit(l.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(l)}},_onPreDragWrap:function(){var l=this._worldWidth,h=Math.round(l/2),g=this._initialWorldOffset,k=this._draggable._newPos.x,P=(k-h+g)%l+h-g,R=(k+h+g)%l-h-g,q=Math.abs(P+g)<Math.abs(R+g)?P:R;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=q},_onDragEnd:function(l){var h=this._map,g=h.options,k=!g.inertia||l.noInertia||this._times.length<2;if(h.fire("dragend",l),k)h.fire("moveend");else{this._prunePositions(+new Date);var P=this._lastPos.subtract(this._positions[0]),R=(this._lastTime-this._times[0])/1e3,q=g.easeLinearity,te=P.multiplyBy(q/R),ie=te.distanceTo([0,0]),ye=Math.min(g.inertiaMaxSpeed,ie),Ee=te.multiplyBy(ye/ie),We=ye/(g.inertiaDeceleration*q),rt=Ee.multiplyBy(-We/2).round();!rt.x&&!rt.y?h.fire("moveend"):(rt=h._limitOffset(rt,h.options.maxBounds),F(function(){h.panBy(rt,{duration:We,easeLinearity:q,noMoveStart:!0,animate:!0})}))}}});tt.addInitHook("addHandler","dragging",D1),tt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var L1=gn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(l){this._map=l,this._setPanDelta(l.options.keyboardPanDelta),this._setZoomDelta(l.options.zoomDelta)},addHooks:function(){var l=this._map._container;l.tabIndex<=0&&(l.tabIndex="0"),Ue(l,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ut(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var l=document.body,h=document.documentElement,g=l.scrollTop||h.scrollTop,k=l.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(k,g)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var h=this._panKeys={},g=this.keyCodes,k,P;for(k=0,P=g.left.length;k<P;k++)h[g.left[k]]=[-1*l,0];for(k=0,P=g.right.length;k<P;k++)h[g.right[k]]=[l,0];for(k=0,P=g.down.length;k<P;k++)h[g.down[k]]=[0,l];for(k=0,P=g.up.length;k<P;k++)h[g.up[k]]=[0,-1*l]},_setZoomDelta:function(l){var h=this._zoomKeys={},g=this.keyCodes,k,P;for(k=0,P=g.zoomIn.length;k<P;k++)h[g.zoomIn[k]]=l;for(k=0,P=g.zoomOut.length;k<P;k++)h[g.zoomOut[k]]=-l},_addHooks:function(){Ue(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ut(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var h=l.keyCode,g=this._map,k;if(h in this._panKeys){if(!g._panAnim||!g._panAnim._inProgress)if(k=this._panKeys[h],l.shiftKey&&(k=le(k).multiplyBy(3)),g.options.maxBounds&&(k=g._limitOffset(le(k),g.options.maxBounds)),g.options.worldCopyJump){var P=g.wrapLatLng(g.unproject(g.project(g.getCenter()).add(k)));g.panTo(P)}else g.panBy(k)}else if(h in this._zoomKeys)g.setZoom(g.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&g._popup&&g._popup.options.closeOnEscapeKey)g.closePopup();else return;Be(l)}}});tt.addInitHook("addHandler","keyboard",L1),tt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var A1=gn.extend({addHooks:function(){Ue(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ut(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var h=qo(l),g=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var k=Math.max(g-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),k),Be(l)},_performZoom:function(){var l=this._map,h=l.getZoom(),g=this._map.options.zoomSnap||0;l._stop();var k=this._delta/(this._map.options.wheelPxPerZoomLevel*4),P=4*Math.log(2/(1+Math.exp(-Math.abs(k))))/Math.LN2,R=g?Math.ceil(P/g)*g:P,q=l._limitZoom(h+(this._delta>0?R:-R))-h;this._delta=0,this._startTime=null,q&&(l.options.scrollWheelZoom==="center"?l.setZoom(h+q):l.setZoomAround(this._lastMousePos,h+q))}});tt.addInitHook("addHandler","scrollWheelZoom",A1);var jM=600;tt.mergeOptions({tapHold:Re.touchNative&&Re.safari&&Re.mobile,tapTolerance:15});var R1=gn.extend({addHooks:function(){Ue(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ut(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(clearTimeout(this._holdTimeout),l.touches.length===1){var h=l.touches[0];this._startPos=this._newPos=new Q(h.clientX,h.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Ue(document,"touchend",ar),Ue(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),jM),Ue(document,"touchend touchcancel contextmenu",this._cancel,this),Ue(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function l(){ut(document,"touchend",ar),ut(document,"touchend touchcancel",l)},_cancel:function(){clearTimeout(this._holdTimeout),ut(document,"touchend touchcancel contextmenu",this._cancel,this),ut(document,"touchmove",this._onMove,this)},_onMove:function(l){var h=l.touches[0];this._newPos=new Q(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(l,h){var g=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});g._simulated=!0,h.target.dispatchEvent(g)}});tt.addInitHook("addHandler","tapHold",R1),tt.mergeOptions({touchZoom:Re.touch,bounceAtZoomLimits:!0});var z1=gn.extend({addHooks:function(){Ze(this._map._container,"leaflet-touch-zoom"),Ue(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){St(this._map._container,"leaflet-touch-zoom"),ut(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var h=this._map;if(!(!l.touches||l.touches.length!==2||h._animatingZoom||this._zooming)){var g=h.mouseEventToContainerPoint(l.touches[0]),k=h.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(g.add(k)._divideBy(2))),this._startDist=g.distanceTo(k),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),Ue(document,"touchmove",this._onTouchMove,this),Ue(document,"touchend touchcancel",this._onTouchEnd,this),ar(l)}},_onTouchMove:function(l){if(!(!l.touches||l.touches.length!==2||!this._zooming)){var h=this._map,g=h.mouseEventToContainerPoint(l.touches[0]),k=h.mouseEventToContainerPoint(l.touches[1]),P=g.distanceTo(k)/this._startDist;if(this._zoom=h.getScaleZoom(P,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&P<1||this._zoom>h.getMaxZoom()&&P>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,P===1)return}else{var R=g._add(k)._divideBy(2)._subtract(this._centerPoint);if(P===1&&R.x===0&&R.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract(R),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),G(this._animRequest);var q=o(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=F(q,this,!0),ar(l)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,G(this._animRequest),ut(document,"touchmove",this._onTouchMove,this),ut(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});tt.addInitHook("addHandler","touchZoom",z1),tt.BoxZoom=M1,tt.DoubleClickZoom=O1,tt.Drag=D1,tt.Keyboard=L1,tt.ScrollWheelZoom=A1,tt.TapHold=R1,tt.TouchZoom=z1,r.Bounds=B,r.Browser=Re,r.CRS=Oe,r.Canvas=C1,r.Circle=tx,r.CircleMarker=bc,r.Class=K,r.Control=pn,r.DivIcon=j1,r.DivOverlay=ga,r.DomEvent=cc,r.DomUtil=oc,r.Draggable=Yn,r.Evented=pe,r.FeatureGroup=xs,r.GeoJSON=Ja,r.GridLayer=cu,r.Handler=gn,r.Icon=Za,r.ImageOverlay=Bf,r.LatLng=re,r.LatLngBounds=ae,r.Layer=En,r.LayerGroup=Ki,r.LineUtil=Vt,r.Map=tt,r.Marker=vc,r.Mixin=gc,r.Path=pa,r.Point=Q,r.PolyUtil=xc,r.Polygon=wc,r.Polyline=Xa,r.Popup=Hf,r.PosAnimation=dc,r.Projection=Lf,r.Rectangle=T1,r.Renderer=Qa,r.SVG=uu,r.SVGOverlay=k1,r.TileLayer=kc,r.Tooltip=Wf,r.Transformation=Pe,r.Util=ee,r.VideoOverlay=_1,r.bind=o,r.bounds=X,r.canvas=E1,r.circle=dM,r.circleMarker=Rf,r.control=qi,r.divIcon=vM,r.extend=a,r.featureGroup=Af,r.geoJSON=w1,r.geoJson=fM,r.gridLayer=bM,r.icon=ou,r.imageOverlay=mM,r.latLng=ge,r.latLngBounds=fe,r.layerGroup=Q0,r.map=su,r.marker=ex,r.point=le,r.polygon=hM,r.polyline=uM,r.popup=xM,r.rectangle=kM,r.setOptions=y,r.stamp=d,r.svg=P1,r.svgOverlay=gM,r.tileLayer=N1,r.tooltip=yM,r.transformation=Le,r.version=n,r.videoOverlay=pM;var NM=window.L;r.noConflict=function(){return window.L=NM,this},window.L=r})})(vb,vb.exports);var eu=vb.exports;const aM=Yr(eu);function Z0(e,t,r){return Object.freeze({instance:e,context:t,container:r})}function K0(e,t){return t==null?function(n,a){const i=E.useRef();return i.current||(i.current=e(n,a)),i}:function(n,a){const i=E.useRef();i.current||(i.current=e(n,a));const o=E.useRef(n),{instance:c}=i.current;return E.useEffect(function(){o.current!==n&&(t(c,n,o.current),o.current=n)},[c,n,a]),i}}function iM(e,t){E.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var i;(i=t.layerContainer)==null||i.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function oM(e){return function(r){const n=Y0(),a=e(G0(r,n),n);return eM(n.map,r.attribution),v1(a.current,r.eventHandlers),iM(a.current,n),a}}function zue(e,t){const r=E.useRef();E.useEffect(function(){if(t.pathOptions!==r.current){const a=t.pathOptions??{};e.instance.setStyle(a),r.current=a}},[e,t])}function $ue(e){return function(r){const n=Y0(),a=e(G0(r,n),n);return v1(a.current,r.eventHandlers),iM(a.current,n),zue(a.current,r),a}}function Iue(e,t){const r=K0(e,t),n=oM(r);return sM(n)}function Fue(e,t){const r=K0(e),n=Rue(r,t);return Lue(n)}function Bue(e,t){const r=K0(e,t),n=$ue(r);return sM(n)}function Hue(e,t){const r=K0(e,t),n=oM(r);return Aue(n)}function Wue(e,t,r){const{opacity:n,zIndex:a}=t;n!=null&&n!==r.opacity&&e.setOpacity(n),a!=null&&a!==r.zIndex&&e.setZIndex(a)}function lM(){return Y0().map}function Uue(e){const t=lM();return E.useEffect(function(){return t.on(e),function(){t.off(e)}},[t,e]),t}const Vue=Bue(function({center:t,children:r,...n},a){const i=new eu.Circle(t,n);return Z0(i,tM(a,{overlayContainer:i}))},Mue);function bb(){return bb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bb.apply(this,arguments)}function que({bounds:e,boundsOptions:t,center:r,children:n,className:a,id:i,placeholder:o,style:c,whenReady:d,zoom:u,...f},m){const[p]=E.useState({className:a,id:i,style:c}),[x,v]=E.useState(null);E.useImperativeHandle(m,()=>(x==null?void 0:x.map)??null,[x]);const y=E.useCallback(w=>{if(w!==null&&x===null){const b=new eu.Map(w,f);r!=null&&u!=null?b.setView(r,u):e!=null&&b.fitBounds(e,t),d!=null&&b.whenReady(d),v(Due(b))}},[]);E.useEffect(()=>()=>{x==null||x.map.remove()},[x]);const _=x?J.createElement(nM,{value:x},n):o??null;return J.createElement("div",bb({},p,{ref:y}),_)}const Yue=E.forwardRef(que),Gue=Iue(function({position:t,...r},n){const a=new eu.Marker(t,r);return Z0(a,tM(n,{overlayContainer:a}))},function(t,r,n){r.position!==n.position&&t.setLatLng(r.position),r.icon!=null&&r.icon!==n.icon&&t.setIcon(r.icon),r.zIndexOffset!=null&&r.zIndexOffset!==n.zIndexOffset&&t.setZIndexOffset(r.zIndexOffset),r.opacity!=null&&r.opacity!==n.opacity&&t.setOpacity(r.opacity),t.dragging!=null&&r.draggable!==n.draggable&&(r.draggable===!0?t.dragging.enable():t.dragging.disable())}),Zue=Fue(function(t,r){const n=new eu.Popup(t,r.overlayContainer);return Z0(n,r)},function(t,r,{position:n},a){E.useEffect(function(){const{instance:o}=t;function c(u){u.popup===o&&(o.update(),a(!0))}function d(u){u.popup===o&&a(!1)}return r.map.on({popupopen:c,popupclose:d}),r.overlayContainer==null?(n!=null&&o.setLatLng(n),o.openOn(r.map)):r.overlayContainer.bindPopup(o),function(){var f;r.map.off({popupopen:c,popupclose:d}),(f=r.overlayContainer)==null||f.unbindPopup(),r.map.removeLayer(o)}},[t,r,a,n])}),Kue=Hue(function({url:t,...r},n){const a=new eu.TileLayer(t,G0(r,n));return Z0(a,n)},function(t,r,n){Wue(t,r,n);const{url:a}=r;a!=null&&a!==n.url&&t.setUrl(a)});delete aM.Icon.Default.prototype._getIconUrl;aM.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const Xue=({center:e})=>{const t=lM();return E.useEffect(()=>{e&&t.flyTo(e,13)},[e,t]),null},Jue=({position:e,setPosition:t,setLocationName:r})=>(Uue({click(n){t(n.latlng),r(`${n.latlng.lat.toFixed(4)}, ${n.latlng.lng.toFixed(4)}`)}}),e?s.jsx(Gue,{position:e,children:s.jsx(Zue,{children:"Zona seleccionada"})}):null),Que=({initialLocation:e,onLocationSelect:t,radius:r=5e3,forcedCenter:n})=>{const a=[40.416775,-3.70379],[i,o]=E.useState(null),[c,d]=E.useState(a);E.useEffect(()=>{n&&(d(n),o({lat:n[0],lng:n[1]}))},[n]),E.useEffect(()=>{if(!(e&&!e.includes(","))){if(e&&e.includes(",")){const[f,m]=e.split(",").map(Number);!isNaN(f)&&!isNaN(m)&&(o({lat:f,lng:m}),d([f,m]))}}},[e]);const u=f=>{o(f);const m=`${f.lat.toFixed(6)},${f.lng.toFixed(6)}`;t&&t(m)};return s.jsxs("div",{className:"h-[400px] w-full rounded-lg overflow-hidden border border-gray-300 dark:border-gray-600 z-0 relative",children:[s.jsxs(Yue,{center:c,zoom:6,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[s.jsx(Kue,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s.jsx(Jue,{position:i,setPosition:u,setLocationName:()=>{}}),i&&s.jsx(Vue,{center:i,radius:r,pathOptions:{color:"orange",fillColor:"orange",fillOpacity:.2}}),s.jsx(Xue,{center:c})]}),s.jsxs("div",{className:"absolute bottom-4 left-4 bg-white dark:bg-gray-800 p-2 rounded-lg shadow-lg z-[400] text-xs max-w-xs",children:[s.jsx("p",{className:"font-semibold mb-1 dark:text-white",children:"Instrucciones:"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Haz clic en el mapa para seleccionar el centro de bsqueda."})]})]})},ehe=({API_URL:e,token:t,onSelectCommercial:r})=>{const[n,a]=E.useState([]),[i,o]=E.useState(!0);E.useEffect(()=>{c()},[]);const c=async()=>{try{const d=await fetch(`${e}/hunter/admin/team`,{headers:{Authorization:`Bearer ${t}`}});d.ok&&a(await d.json())}catch(d){console.error("Error loading team:",d)}finally{o(!1)}};return i?s.jsx("div",{className:"p-8 text-center text-gray-500",children:"Cargando equipo..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(ts,{className:"w-5 h-5 text-orange-500"}),"Actividad del Equipo Comercial"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.map(d=>s.jsxs("div",{onClick:()=>r(d),className:"bg-white dark:bg-gray-800 rounded-xl p-5 border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-shadow cursor-pointer group",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-full text-orange-600 dark:text-orange-400",children:s.jsx(pr,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-900 dark:text-white",children:d.full_name}),s.jsx("p",{className:"text-xs text-gray-500",children:d.email})]})]}),s.jsx(pv,{className:"w-5 h-5 text-gray-300 group-hover:text-orange-500 transition-colors"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center divide-x divide-gray-100 dark:divide-gray-700",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:d.total_searches}),s.jsxs("div",{className:"text-xs text-gray-500 flex items-center justify-center gap-1",children:[s.jsx(Ls,{className:"w-3 h-3"})," Bsquedas"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:d.total_prospects}),s.jsxs("div",{className:"text-xs text-gray-500 flex items-center justify-center gap-1",children:[s.jsx(To,{className:"w-3 h-3"})," Prospectos"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:d.leads_generated}),s.jsxs("div",{className:"text-xs text-gray-500 flex items-center justify-center gap-1",children:[s.jsx(Rt,{className:"w-3 h-3"})," Leads"]})]})]})]},d.id)),n.length===0&&s.jsx("div",{className:"col-span-full p-8 text-center bg-gray-50 dark:bg-gray-800 rounded-xl border border-dashed border-gray-300 dark:border-gray-700 text-gray-500",children:"No hay comerciales activos en Lead Hunter."})]})]})},MS=({searches:e,onSelect:t,onDelete:r,activeTab:n})=>s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-fadeIn",children:[e.map(a=>s.jsxs("div",{onClick:()=>t(a.id),className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 cursor-pointer hover:shadow-md hover:border-orange-300 transition-all group",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg group-hover:bg-orange-100 dark:group-hover:bg-orange-900/40 transition-colors",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsx("span",{className:"text-xs font-medium text-gray-500 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full",children:new Date(a.created_at).toLocaleDateString()}),s.jsx("button",{onClick:i=>{i.stopPropagation(),r(a.id)},className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Eliminar bsqueda",children:s.jsx(Ar,{className:"w-4 h-4"})})]}),s.jsx("h4",{className:"font-bold text-lg text-gray-900 dark:text-white mb-1 truncate",children:a.query}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4 truncate flex items-center gap-1",children:[" ",a.location]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:[a.results_count," Prospectos"]}),s.jsx("span",{className:"text-orange-600 dark:text-orange-400 font-medium group-hover:translate-x-1 transition-transform",children:"Ver listado "})]})]},a.id)),e.length===0&&s.jsx("div",{className:"col-span-full text-center py-12 bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-dashed border-gray-300 dark:border-gray-700",children:s.jsx("p",{className:"text-gray-500",children:"No hay bsquedas registradas."})})]}),cM=({onNavigateSettings:e})=>{var Yo,uc,Go,hc,Zo,fc,mc,Yi,pc,gn,gc,Ko,Yn,Xo,Jo,Gi,xc,Qo,Zt,Zi,yc,D,j,T,I,U;const[t,r]=E.useState(null),[n,a]=E.useState(!0),[i,o]=E.useState("search"),[c,d]=E.useState(""),[u,f]=E.useState(!1),[m,p]=E.useState(""),[x,v]=E.useState(!1),[y,_]=E.useState(""),[w,b]=E.useState(!1),[N,S]=E.useState(""),[C,O]=E.useState(!0),[A,z]=E.useState(!1),[$,W]=E.useState([]),[F,G]=E.useState(null),[ee,K]=E.useState([]),[oe,Z]=E.useState([]),[pe,Q]=E.useState([]),[ce,le]=E.useState(null),[B,X]=E.useState(1e3),[ae,fe]=E.useState([]),[re,ge]=E.useState(""),[Oe,me]=E.useState(20),[_e,$e]=E.useState("all"),[Pe,Le]=E.useState("all"),[Ge,et]=E.useState("all"),[ue,Ae]=E.useState("all"),[lt,Ke]=E.useState("grid"),[V,st]=E.useState(null),[Ut,br]=E.useState(!1),[vt,se]=E.useState(!1),[Se,dr]=E.useState(!1),[un,Pr]=E.useState(!1),[ls,cs]=E.useState(null),[gt,$a]=E.useState("summary"),[tr,wr]=E.useState({isOpen:!1,title:"",message:"",onConfirm:null,variant:"danger"}),[Gt,Ai]=E.useState(null),[de,Ie]=E.useState(null),[He,mt]=E.useState(null),[Ia,ur]=E.useState(!1),[Bs,Ql]=E.useState("modern"),[Ri,ec]=E.useState(""),[ds,Hs]=E.useState(""),[zi,tc]=E.useState(null),[Cn,tu]=E.useState([]),[ru,hn]=E.useState(null),[Re,rc]=E.useState([]),[nc,Fa]=E.useState(!1),[Tr,Ws]=E.useState({id:"",label:"",desc:"",icon:"Zap"}),us=[{id:"modern",label:"Moderno",icon:"Zap",desc:"Diseo actual y minimalista"},{id:"restaurant",label:"Restaurante",icon:"Utensils",desc:"Mens, reservas, ambiente"},{id:"store",label:"Tienda",icon:"Store",desc:"Productos, catlogo, ofertas"},{id:"services",label:"Servicios",icon:"Briefcase",desc:"Profesional, contacto, portfolio"},{id:"luxury",label:"Premium",icon:"Sparkles",desc:"Elegante y exclusivo"},{id:"custom",label:"Personalizado",icon:"MessageSquare",desc:"Escribe tu propio prompt"}],[hs,Fo]=E.useState(()=>{const M=localStorage.getItem("hunter_custom_demo_types");return M?JSON.parse(M):[]}),Bo=[...us,...hs],[Hn,Us]=E.useState([]),[fs,$i]=E.useState(""),[Df,Ba]=E.useState(!1),[Ii,sc]=E.useState(!1),[ha,ac]=E.useState([]),[nu,Fi]=E.useState(!1),[Zr,ic]=E.useState(!1),[Vs,ms]=E.useState(!1),[at,Nt]=E.useState(!1),[Ho,fa]=E.useState([]),[qs,Wo]=E.useState(null),[Ze,St]=E.useState(!1),[Ys,Wn]=E.useState(null),Kr=(M,H="w-4 h-4")=>{const ne=ps[M]||fr;return s.jsx(ne,{className:H})},Ha=()=>{if(!Tr.id||!Tr.label){je.error("Introduce un nombre para el tipo");return}const M={id:Tr.id.toLowerCase().replace(/\s+/g,"_"),label:Tr.label,icon:Tr.icon,desc:Tr.desc||"Tipo personalizado",isCustom:!0},H=[...hs,M];Fo(H),localStorage.setItem("hunter_custom_demo_types",JSON.stringify(H)),Ws({id:"",label:"",desc:"",icon:"Zap"}),Fa(!1),je.success("Tipo de demo aadido")},Bi=M=>{Un("Eliminar tipo de demo?","Este tipo de demo personalizado se eliminar de tu lista permanentemente.",()=>{const H=hs.filter(ne=>ne.id!==M);Fo(H),localStorage.setItem("hunter_custom_demo_types",JSON.stringify(H)),je.success("Tipo eliminado")})},je=Ht(),ke=localStorage.getItem("crm_token"),ps={Store:Xn,Briefcase:Po,Truck:g4,Music:c4,Beer:e4,PartyPopper:d4,Utensils:Mh,Coffee:Bp,Hotel:Vp,ShoppingBag:Gp,Dumbbell:Hp,Pill:u4,Home:gw,Wrench:y4,Scissors:Yp,Stethoscope:Zp,ShoppingCart:h4,Building:nd,Zap:fr,Sparkles:ir,MessageSquare:Wr},Wa=M=>ps[M]||Xn,Ua=M=>({urgent:"bg-red-500",high:"bg-orange-500",medium:"bg-yellow-500",low:"bg-green-500"})[M]||"bg-gray-500",zr=M=>M?typeof M=="string"?M:typeof M=="object"&&M.url?M.url:null:null,Gs=M=>{if(!M)return!1;const H=M.toLowerCase();return H.includes("instagram.com")||H.includes("facebook.com")||H.includes("fb.com")||H.includes("twitter.com")||H.includes("x.com")||H.includes("linkedin.com")||H.includes("tiktok.com")},$r=M=>{var ne,xe;const H={instagram:null,facebook:null,hasRealWeb:!1};if((ne=M.social_media)!=null&&ne.instagram&&(H.instagram=zr(M.social_media.instagram)),(xe=M.social_media)!=null&&xe.facebook&&(H.facebook=zr(M.social_media.facebook)),M.website){const Te=M.website.toLowerCase();Te.includes("instagram.com")&&!H.instagram?H.instagram=M.website:(Te.includes("facebook.com")||Te.includes("fb.com"))&&!H.facebook?H.facebook=M.website:Gs(M.website)||(H.hasRealWeb=!0)}return H},Un=(M,H,ne,xe="danger")=>{wr({isOpen:!0,title:M,message:H,onConfirm:ne,variant:xe})},fn=E.useCallback(async()=>{const M=new AbortController,H=setTimeout(()=>M.abort(),1e4);try{const ne=await fetch(`${Y}/hunter/access`,{headers:{Authorization:`Bearer ${ke}`},signal:M.signal});if(clearTimeout(H),ne.ok){const xe=await ne.json();r(xe)}else{ne.status;const xe=await ne.json();r({hasAccess:!1,error:xe.error||"Error de acceso"})}}catch(ne){ne.name==="AbortError"?r({hasAccess:!1,error:"Tiempo de espera agotado (Timeout)"}):r({hasAccess:!1,error:"Error de conexin: "+ne.message})}finally{a(!1)}},[Y,ke]),Vn=E.useCallback(async()=>{try{const M=await fetch(`${Y}/hunter/stats`,{headers:{Authorization:`Bearer ${ke}`}});M.ok&&G(await M.json())}catch(M){console.error("Error fetching stats:",M)}},[Y,ke]),Zs=E.useCallback(async M=>{Ba(!0);try{const H=await fetch(`${Y}/hunter/prospects/${M}/notes_list`,{headers:{Authorization:`Bearer ${ke}`}});H.ok&&Us(await H.json())}catch(H){console.error(H)}finally{Ba(!1)}},[Y,ke]),qn=E.useCallback(async M=>{Fi(!0);try{const H=await fetch(`${Y}/hunter/prospects/${M}/demos`,{headers:{Authorization:`Bearer ${ke}`}});H.ok&&ac(await H.json())}catch(H){console.error(H)}finally{Fi(!1)}},[Y,ke]),Uo=E.useCallback(async M=>{try{const H=await fetch(`${Y}/hunter/prospects/${M}/contact-requests`,{headers:{Authorization:`Bearer ${ke}`}});if(H.ok){const ne=await H.json();tu(ne)}}catch(H){console.error("Error fetching contact requests:",H)}},[Y,ke]);E.useCallback(async()=>{if(V){ms(!0);try{const M=await fetch(`${Y}/hunter/prospects/${V.id}/refresh`,{method:"POST",headers:{Authorization:`Bearer ${ke}`}});if(M.ok){const H=await M.json();st(ne=>({...ne,...H})),Z(ne=>ne.map(xe=>xe.id===H.id?{...xe,...H}:xe)),je.success("Datos actualizados desde Google Places")}else je.error("Error al actualizar")}catch(M){console.error(M),je.error("Error de conexin")}finally{ms(!1)}}},[Y,ke,V,je]);const Hi=E.useCallback(M=>{Un("Eliminar demo?","Esta demo se eliminar permanentemente y el enlace pblico dejar de funcionar.",async()=>{try{(await fetch(`${Y}/hunter/demos/${M}`,{method:"DELETE",headers:{Authorization:`Bearer ${ke}`}})).ok?(ac(ne=>ne.filter(xe=>xe.id!==M)),je.success("Demo eliminada")):je.error("Error al eliminar")}catch(H){console.error(H),je.error("Error de conexin")}})},[Y,ke,je]),oc=E.useCallback(async M=>{try{const H=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(M)}&limit=1`,{headers:{"User-Agent":"NoahProCRM/1.0"}});if(H.ok){const ne=await H.json();if(ne&&ne.length>0){const xe=parseFloat(ne[0].lat),Te=parseFloat(ne[0].lon);cs([xe,Te])}}}catch(H){console.warn("Auto-map sync failed",H)}},[]),Ue=E.useCallback(async()=>{try{const M=await fetch(`${Y}/business-types`,{headers:{Authorization:`Bearer ${ke}`}});if(M.ok){const H=await M.json();K(H),H.length>0&&!c&&d(H[0].google_query)}}catch(M){console.error("Error fetching business types:",M)}},[Y,ke,c]),mn=E.useCallback(async()=>{a(!0);try{const M=new URLSearchParams;i==="converted"&&M.append("processed","true"),Pe!=="all"&&i!=="converted"&&(Pe==="processed"&&M.append("processed","true"),Pe==="pending"&&M.append("processed","false"));const H=await fetch(`${Y}/hunter/prospects?${M.toString()}`,{headers:{Authorization:`Bearer ${ke}`}});if(H.ok){const ne=await H.json();Z(ne)}}catch(M){console.error("Error fetching prospects:",M),je.error("Error al cargar prospectos")}finally{a(!1)}},[Y,ke,i,Pe,je]),ut=E.useCallback(async()=>{try{const M=await fetch(`${Y}/hunter/searches`,{headers:{Authorization:`Bearer ${ke}`}});M.ok&&Q(await M.json())}catch(M){console.error("Error fetching searches:",M)}},[Y,ke]),Va=E.useCallback(async()=>{try{const M=await fetch(`${Y}/hunter-strategies`,{headers:{Authorization:`Bearer ${ke}`}});if(M.ok){const H=await M.json();fe(H),H.length>0&&!re&&ge(H[0].id)}}catch(M){console.error("Error fetching strategies:",M)}},[Y,ke,re]),gs=E.useCallback(async M=>{if(M)try{const H=await fetch(`${Y}/hunter/searches/${M}/prospects`,{headers:{Authorization:`Bearer ${ke}`}});H.ok&&Z(await H.json())}catch(H){console.error("Error fetching prospects:",H)}},[Y,ke]);E.useCallback(async()=>{try{const M=await fetch(`${Y}/hunter/prospects`,{headers:{Authorization:`Bearer ${ke}`}});M.ok&&Z(await M.json())}catch(M){console.error("Error fetching all prospects:",M)}},[Y,ke]);const Wi=M=>{le(M),gs(M)},Vo=E.useCallback(async()=>{var H;const M=u?m:c;if(!M||!N){je.warning("Completa el tipo de negocio y la ubicacin");return}z(!0);try{const ne=await fetch(`${Y}/hunter/search`,{method:"POST",headers:{Authorization:`Bearer ${ke}`,"Content-Type":"application/json"},body:JSON.stringify({query:M,location:N,radius:B,strategy:x?"custom":re,customPrompt:x?y:null,maxResults:Oe})}),xe=await ne.json();ne.ok?(je.success(`Encontrados ${((H=xe.saved)==null?void 0:H.length)||0} nuevos prospectos`),ut(),fn(),o("prospects"),le(null)):je.error(xe.error||"Error en la bsqueda")}catch{je.error("Error de conexin")}finally{z(!1)}},[Y,ke,c,u,m,N,B,re,Oe,je,ut,fn]),_r=E.useCallback(async M=>{Ai(M);try{const H=await fetch(`${Y}/hunter/analyze/${M}`,{method:"POST",headers:{Authorization:`Bearer ${ke}`}});if(H.ok){const ne=await H.json();if(je.success("Anlisis completado"),V&&V.id===M){const xe={...V,...ne};st(xe)}Z(xe=>xe.map(Te=>Te.id===M?{...Te,...ne}:Te))}else{const ne=await H.json();je.error(`Error: ${ne.error}`)}}catch(H){console.error("Error analyzing prospect:",H),je.error("Error al realizar el anlisis")}finally{Ai(null)}},[Y,ke,V,je]);E.useCallback(async()=>{if(!fs.trim()){_r(V.id);return}try{(await fetch(`${Y}/hunter/prospects/${V.id}/notes`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ke}`},body:JSON.stringify({content:fs,use_for_analysis:!0})})).ok&&($i(""),typeof Zs=="function"&&Zs(V.id),_r(V.id))}catch(M){console.error("Error in save and analyze:",M),je.error("Error al guardar y analizar")}},[Y,ke,V,fs,_r,je,Zs]);const ma=E.useCallback(async M=>{hn(M),je.info("Iniciando bsqueda profunda en internet...");try{const H=await fetch(`${Y}/hunter/prospects/${M}/deep-analyze`,{method:"POST",headers:{Authorization:`Bearer ${ke}`}});if(H.ok){const ne=await H.json();je.success("Bsqueda profunda completada e integrada"),V&&V.id===M&&st({...V,...ne}),Z(xe=>xe.map(Te=>Te.id===M?{...Te,...ne}:Te))}else je.error("Error en bsqueda profunda")}catch(H){console.error("Error deep analyzing:",H),je.error("Error de conexin")}finally{hn(null)}},[Y,ke,V,je]),qa=E.useCallback(async M=>{tc(M);try{const H=await fetch(`${Y}/hunter/prospects/${M}/proposal`,{method:"POST",headers:{Authorization:`Bearer ${ke}`,"Content-Type":"application/json"}}),ne=await H.json();H.ok?(je.success("Propuesta generada con xito"),st(xe=>({...xe,current_proposal:ne}))):je.error(ne.error||"Error al generar propuesta")}catch{je.error("Error de conexin")}finally{tc(null)}},[Y,ke,je]),ar=E.useCallback(async M=>{Ie(M);try{const H=await fetch(`${Y}/hunter/process/${M}`,{method:"POST",headers:{Authorization:`Bearer ${ke}`,"Content-Type":"application/json"},body:JSON.stringify({})}),ne=await H.json();H.ok?(je.success(`Lead creado exitosamente (ID: ${ne.leadId})`),ce&&gs(ce),Vn(),fn(),br(!1)):je.error(ne.error||"Error al crear lead")}catch(H){console.error("Error procesando lead:",H),je.error(H.message||"Error al procesar el prospecto")}finally{Ie(null)}},[Y,ke,ce,gs,Vn,fn,je]),Be=M=>{Un("Convertir a Lead?",`Se crear un nuevo lead con los datos de "${M.name}". Esta accin agregar el prospecto a tu cartera de leads.`,()=>ar(M.id),"info")},Ui=async()=>{if(!V)return;Hs("images");const M=[];V.photos&&V.photos.length>0&&V.photos.slice(0,6).forEach((ne,xe)=>{M.push({url:ne.url||ne,source:"Google Places",label:xe===0?"Portada":`Foto ${xe+1}`})});const H=Date.now();M.push({url:`https://picsum.photos/seed/${H}1/1920/1080`,source:"Stock",label:"Hero Background"}),M.push({url:`https://picsum.photos/seed/${H}2/800/600`,source:"Stock",label:"Galera Extra 1"}),M.push({url:`https://picsum.photos/seed/${H}3/800/600`,source:"Stock",label:"Galera Extra 2"}),M.push({url:`https://picsum.photos/seed/${H}4/200/200`,source:"Stock",label:"Avatar Testimonio"}),rc(M),Hs(""),je.success(`${M.length} imgenes listas para la demo`)},Ya=E.useCallback(async M=>{try{mt(M),Hs("analyzing"),await new Promise(Ve=>setTimeout(Ve,500)),Hs("images"),await new Promise(Ve=>setTimeout(Ve,500)),Hs("generating");const H=Bo.find(Ve=>Ve.id===Bs),ne=(H==null?void 0:H.styleInstructions)||"",xe=await fetch(`${Y}/hunter/prospects/${M}/demo`,{method:"POST",headers:{Authorization:`Bearer ${ke}`,"Content-Type":"application/json"},body:JSON.stringify({demoType:Bs,customPrompt:Ri,styleInstructions:ne})});if(!xe.ok)throw new Error("Error al generar demo");const Te=await xe.json();if(Hs("done"),Te.html&&Te.publicToken){const Vt=`${Y.replace("/api","")}/api/hunter/public/demo/${Te.publicToken}`;window.open(Vt,"_blank")?je.success("Demo generada exitosamente!"):je.error("Ventana emergente bloqueada. Permite popups para ver la demo."),V&&V.id===M&&qn(M),ur(!1)}else if(Te.html){const Ve=window.open();Ve?(Ve.document.write(Te.html),Ve.document.close(),je.success("Demo generada exitosamente!")):je.error("Ventana emergente bloqueada. Permite popups para ver la demo."),V&&V.id===M&&qn(M),ur(!1)}}catch(H){console.error("Error:",H),je.error("No se pudo generar la demo")}finally{mt(null),Hs("")}},[Y,ke,Bo,Bs,Ri,V,qn,je]),lc=M=>{Un("Eliminar bsqueda?","Ests a punto de eliminar esta sesin. Los prospectos ya analizados o convertidos en leads se conservarn, pero los no procesados se borrarn permanentemente.",async()=>{try{const H=await fetch(`${Y}/hunter/searches/${M}`,{method:"DELETE",headers:{Authorization:`Bearer ${ke}`}});if(H.ok)je.success("Bsqueda eliminada"),ut(),ce===M&&le(null);else{const ne=await H.json();je.error(ne.error||"Error al eliminar bsqueda")}}catch{je.error("Error de conexin")}})},qo=E.useCallback(async()=>{if(!(!fs.trim()||!V))try{const M=await fetch(`${Y}/hunter/prospects/${V.id}/notes_entry`,{method:"POST",headers:{Authorization:`Bearer ${ke}`,"Content-Type":"application/json"},body:JSON.stringify({content:fs,useForAnalysis:!0})});if(M.ok){const H=await M.json();Us(ne=>[H,...ne]),$i(""),je.success("Nota aadida")}}catch{je.error("Error al aadir nota")}},[Y,ke,V,fs,je]);E.useCallback(async(M,H)=>{try{const ne=await fetch(`${Y}/hunter/notes/${M}`,{method:"PUT",headers:{Authorization:`Bearer ${ke}`,"Content-Type":"application/json"},body:JSON.stringify(H)});if(ne.ok){const xe=await ne.json();Us(Te=>Te.map(Ve=>Ve.id===M?xe:Ve)),je.success("Nota actualizada")}}catch{je.error("Error al actualizar nota")}},[Y,ke,je]);const Vi=E.useCallback(M=>{Un("Eliminar nota?","Esta accin eliminar permanentemente la nota seleccionada.",async()=>{try{(await fetch(`${Y}/hunter/notes/${M}`,{method:"DELETE",headers:{Authorization:`Bearer ${ke}`}})).ok&&(Us(ne=>ne.filter(xe=>xe.id!==M)),je.success("Nota eliminada"))}catch{je.error("Error al eliminar nota")}})},[Y,ke,je,Un]),cc=E.useCallback(async M=>{const H=await fetch(`${Y}/hunter/prospects/${V.id}/notes_entry`,{method:"POST",headers:{Authorization:`Bearer ${ke}`,"Content-Type":"application/json"},body:JSON.stringify({content:M,useForAnalysis:!0})});if(H.ok){const ne=await H.json();Us(xe=>[ne,...xe])}},[Y,ke,V]),dc=E.useCallback(async()=>{const M=Hn.filter(H=>H.use_for_analysis).map(H=>H.content).join(`

`);if(!M.trim()){je.error("No hay notas marcadas para analizar");return}sc(!0);try{const H=await fetch(`${Y}/hunter/prospects/${V.id}/notes/improve`,{method:"POST",headers:{Authorization:`Bearer ${ke}`,"Content-Type":"application/json"},body:JSON.stringify({notes:M})});if(H.ok){const ne=await H.json();await cc(ne.improved),je.success("Nota mejorada aadida")}else je.error("Error al mejorar notas")}catch{je.error("Error de conexin")}finally{sc(!1)}},[Y,ke,V,Hn,cc,je]);E.useCallback(async M=>{try{const H=await fetch(`${Y}/hunter/prospects/${V.id}/assign`,{method:"POST",headers:{Authorization:`Bearer ${ke}`,"Content-Type":"application/json"},body:JSON.stringify({assignedTo:M})});if(H.ok){const ne=await H.json();st({...V,...ne}),je.success("Prospecto asignado correctamente"),Nt(!1),ce&&gs(ce)}else je.error("Error al asignar prospecto")}catch{je.error("Error de conexin")}},[Y,ke,V,ce,gs,je]);const tt=E.useCallback(async()=>{try{const M=await fetch(`${Y}/hunter/admin/team`,{headers:{Authorization:`Bearer ${ke}`}});M.ok&&fa(await M.json())}catch(M){console.error(M)}},[Y,ke]),su=E.useCallback(async()=>{try{(await fetch(`${Y}/hunter/stats/reset`,{method:"POST",headers:{Authorization:`Bearer ${ke}`}})).ok&&(je.success("Estadsticas reseteadas correctamente"),fn(),Vn(),Vn())}catch{je.error("Error al resetear estadsticas")}},[Y,ke,fn,Vn,je]),pn=async()=>{if(!(!N||N.length<3))try{const M=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(N)}&limit=1`,{headers:{"User-Agent":"NoahProCRM/1.0"}});if(M.ok){const H=await M.json();H&&H.length>0&&je.info(`Mapa centrado en: ${H[0].display_name.split(",")[0]}`)}}catch(M){console.warn("Map sync failed",M)}},qi=()=>{let M=[...oe];if(i==="converted")M=M.filter(H=>H.processed===!0);else if(Pe!=="all"){const H=Pe==="processed";M=M.filter(ne=>ne.processed===H)}if(_e!=="all"&&(M=M.filter(H=>H.ai_priority===_e)),Ge!=="all"){const H=parseFloat(Ge);M=M.filter(ne=>(ne.rating||0)>=H)}return ue!=="all"&&(M=M.filter(H=>H.business_type===ue)),M};return E.useEffect(()=>{fn(),Vn(),Ue(),ut(),Va()},[fn,Vn,Ue,ut,Va]),E.useEffect(()=>{Ut&&V&&gt==="inbox"&&Uo(V.id)},[Ut,V,gt,Uo]),E.useEffect(()=>{V&&(Zs(V.id),qn(V.id),Wo(M=>M!==V.id?($a("summary"),V.id):M))},[V,Zs,qn]),E.useEffect(()=>{if(!N||N.length<3)return;const M=setTimeout(async()=>{try{if(N.includes(",")&&/\d/.test(N))return;oc(N)}catch(H){console.warn("Map sync failed",H)}},1200);return()=>clearTimeout(M)},[N,oc]),E.useEffect(()=>{i!=="search"&&!ce&&["prospects","analyzed","converted","history"].includes(i)&&(i==="history"||mn())},[i,ce,mn]),E.useEffect(()=>{if(!c||!N||N.length<3){Wn(null);return}const H=setTimeout(async()=>{St(!0);try{const ne=await fetch(`${Y}/hunter/estimate`,{method:"POST",headers:{Authorization:`Bearer ${ke}`,"Content-Type":"application/json"},body:JSON.stringify({query:c,location:N,radius:B})});if(ne.ok){const xe=await ne.json();Wn(xe)}}catch(ne){console.warn("Estimation failed",ne)}finally{St(!1)}},1e3);return()=>clearTimeout(H)},[c,N,B,Y,ke]),E.useEffect(()=>{at&&(t==null?void 0:t.role)==="admin"&&tt()},[at,t,tt]),n?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(Lt,{className:"w-8 h-8 animate-spin text-orange-500"})}):t!=null&&t.hasAccess?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-red-600 rounded-xl p-6 text-white shadow-xl shadow-orange-500/20",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-white/20 dark:bg-black/20 rounded-xl backdrop-blur-sm",children:s.jsx(ir,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Lead Hunter AI"}),s.jsx("p",{className:"text-orange-100",children:"Prospeccin inteligente con NoahPro IA"})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-3xl font-bold",children:(t==null?void 0:t.remaining)||0}),s.jsxs("div",{className:"text-sm text-orange-100 flex items-center gap-1 justify-end",children:["bsquedas restantes hoy",s.jsxs("span",{className:"relative group cursor-help",children:[s.jsx(Sc,{className:"w-3.5 h-3.5"}),s.jsx("span",{className:"absolute bottom-full right-0 mb-2 w-48 p-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50",children:"Cada bsqueda que realices descuenta 1 de tu lmite diario. El contador se reinicia a las 00:00."})]})]})]}),s.jsx(Ne,{variant:"ghost",size:"sm",className:"bg-white/10 hover:bg-white/20 text-white border-0",onClick:()=>Un("Resetear contadores?","Esto reiniciar el contador de bsquedas diarias. Normalmente se resetea automticamente a las 00:00.",su,"warning"),title:"Resetear contadores diarios",children:s.jsx(Lt,{className:"w-4 h-4"})})]})]}),F&&s.jsxs("div",{className:"grid grid-cols-5 gap-3 mt-4 pt-4 border-t border-white/20",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold",children:((Yo=F.totals)==null?void 0:Yo.total_searched)||0}),s.jsx("div",{className:"text-xs text-orange-100",children:"Buscados"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold",children:((uc=F.totals)==null?void 0:uc.total_analyzed)||0}),s.jsx("div",{className:"text-xs text-orange-100",children:"Analizados"})]}),s.jsxs("div",{className:"text-center border-l border-r border-white/20",children:[s.jsx("div",{className:"text-2xl font-bold text-green-300",children:((Go=F.totals)==null?void 0:Go.total_leads)||0}),s.jsx("div",{className:"text-xs text-orange-100",children:"Convertidos"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold",children:((hc=F.totals)==null?void 0:hc.pending_leads)||(((Zo=F.totals)==null?void 0:Zo.total_analyzed)||0)-(((fc=F.totals)==null?void 0:fc.total_leads)||0)}),s.jsx("div",{className:"text-xs text-orange-100",children:"Pendientes"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold",children:((mc=F.today)==null?void 0:mc.leads_created)||0}),s.jsx("div",{className:"text-xs text-orange-100",children:"Leads hoy"})]})]})]}),s.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("button",{onClick:()=>o("search"),className:`px-6 py-3 font-medium text-sm flex items-center gap-2 border-b-2 transition-colors ${i==="search"?"border-orange-500 text-orange-600 dark:text-orange-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[s.jsx(Ls,{className:"w-4 h-4"})," Buscador"]}),s.jsxs("button",{onClick:()=>{o("prospects"),le(null)},className:`px-6 py-3 font-medium text-sm flex items-center gap-2 border-b-2 transition-colors ${i==="prospects"?"border-orange-500 text-orange-600 dark:text-orange-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[s.jsx(gv,{className:"w-4 h-4"})," Mis Prospectos"]}),s.jsxs("button",{onClick:()=>{o("analyzed"),le(null)},className:`px-6 py-3 font-medium text-sm flex items-center gap-2 border-b-2 transition-colors ${i==="analyzed"?"border-orange-500 text-orange-600 dark:text-orange-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[s.jsx(fr,{className:"w-4 h-4"})," Leads Analizados"]}),s.jsxs("button",{onClick:()=>{o("converted"),le(null)},className:`px-6 py-3 font-medium text-sm flex items-center gap-2 border-b-2 transition-colors ${i==="converted"?"border-orange-500 text-orange-600 dark:text-orange-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[s.jsx(Rt,{className:"w-4 h-4"})," Convertidos"]}),s.jsxs("button",{onClick:()=>o("history"),className:`px-6 py-3 font-medium text-sm flex items-center gap-2 border-b-2 transition-colors ${i==="history"?"border-orange-500 text-orange-600 dark:text-orange-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[s.jsx(rj,{className:"w-4 h-4"})," Historial"]}),(t==null?void 0:t.role)==="admin"&&s.jsxs("button",{onClick:()=>{o("team"),le(null)},className:`px-6 py-3 font-medium text-sm flex items-center gap-2 border-b-2 transition-colors ${i==="team"?"border-orange-500 text-orange-600 dark:text-orange-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[s.jsx(ts,{className:"w-4 h-4"})," Equipo"]})]}),s.jsxs("div",{className:"min-h-[400px]",children:[i==="search"&&s.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(bs,{className:"w-5 h-5 text-orange-500"}),"Nueva Bsqueda"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>O(!C),className:`text-sm px-3 py-1.5 rounded-lg border flex items-center gap-1.5 transition-colors ${C?"bg-orange-50 border-orange-200 text-orange-700 dark:bg-orange-900/20 dark:border-orange-800 dark:text-orange-300":"border-gray-300 text-gray-600 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700"}`,children:[s.jsx(nA,{className:"w-4 h-4"}),C?"Ocultar Mapa":"Usar Mapa"]}),s.jsxs("button",{onClick:()=>se(!0),className:"text-sm px-3 py-1.5 rounded-lg border border-gray-300 text-gray-600 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700 flex items-center gap-1.5",children:[s.jsx(nd,{className:"w-4 h-4"}),"Tipos de Negocio"]}),s.jsxs("button",{onClick:()=>Pr(!0),className:"text-sm px-3 py-1.5 rounded-lg border border-gray-300 text-gray-600 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700 flex items-center gap-1.5",children:[s.jsx(fr,{className:"w-4 h-4 text-purple-500"}),"Estrategia IA"]}),s.jsxs("button",{onClick:()=>dr(!0),className:"text-sm px-3 py-1.5 rounded-lg border border-gray-300 text-gray-600 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700 flex items-center gap-1.5",children:[s.jsx(ir,{className:"w-4 h-4 text-orange-500"}),"Config. Avanzada"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 items-start",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1 flex items-center gap-1",children:["Tipo de Negocio",s.jsxs("span",{className:"relative group cursor-help",children:[s.jsx(Sc,{className:"w-3.5 h-3.5 text-gray-400"}),s.jsx("span",{className:"absolute bottom-full left-0 mb-2 w-64 p-2 bg-gray-900 text-white text-[10px] rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50 leading-tight",children:'Selecciona una categora predefinida o elige "Personalizado" para escribir exactamente lo que buscas (ej: "Empresas de placas solares").'})]})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:u?"custom":c,onChange:M=>{const H=M.target.value;H==="custom"?(f(!0),d("")):(f(!1),d(H))},className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white appearance-none focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all",children:[s.jsx("option",{value:"",children:"Selecciona un tipo..."}),ee.map(M=>s.jsx("option",{value:M.google_query,children:M.name},M.id)),s.jsx("option",{value:"custom",children:" Personalizado..."})]}),s.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:(()=>{if(u)return s.jsx(vA,{className:"w-5 h-5 text-orange-500"});const M=ee.find(ne=>ne.google_query===c),H=M?Wa(M.icon):Xn;return s.jsx(H,{className:"w-5 h-5 text-gray-400"})})()}),s.jsx(mv,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),u&&s.jsxs("div",{className:"mt-3 animate-in fade-in slide-in-from-top-2 duration-300",children:[s.jsx("label",{className:"block text-xs text-orange-500 font-medium mb-1 ml-1",children:"Escribe el tipo de negocio exacto:"}),s.jsxs("div",{className:"relative",children:[s.jsx(Xn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-orange-500"}),s.jsx("input",{type:"text",value:m,onChange:M=>p(M.target.value),placeholder:"Ej: Talleres mecnicos, Peluqueras...",className:"w-full pl-9 pr-4 py-2 border-2 border-orange-100 dark:border-orange-900/30 rounded-xl bg-orange-50/30 dark:bg-orange-900/10 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all",autoFocus:!0})]})]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1 flex items-center gap-1",children:["Ciudad, Zona o Coordenadas",s.jsxs("span",{className:"relative group cursor-help",children:[s.jsx(Sc,{className:"w-3.5 h-3.5 text-gray-400"}),s.jsx("span",{className:"absolute bottom-full left-0 mb-2 w-64 p-2 bg-gray-900 text-white text-[10px] rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50 leading-tight",children:"Indica el lugar donde quieres buscar. Puedes escribir una ciudad, una direccin especfica o incluso coordenadas (lat,lng)."})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Lc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",value:N,onChange:M=>S(M.target.value),onBlur:pn,placeholder:"Ej: Madrid, Calle Mayor, o click en mapa",className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1 flex justify-between items-center",children:[s.jsxs("span",{className:"flex items-center gap-1",children:["Radio",s.jsxs("span",{className:"relative group cursor-help",children:[s.jsx(Sc,{className:"w-3.5 h-3.5 text-gray-400"}),s.jsx("span",{className:"absolute bottom-full left-0 mb-2 w-64 p-2 bg-gray-900 text-white text-[10px] rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50 leading-tight",children:"Define el rea de bsqueda alrededor del punto central. A mayor radio, ms negocios potenciales pero la bsqueda ser ms dispersa."})]})]}),s.jsxs("span",{className:"text-orange-500 font-bold",children:[(B/1e3).toFixed(1)," km"]})]}),s.jsx("input",{type:"range",min:"500",max:"10000",step:"500",value:B,onChange:M=>X(parseInt(M.target.value)),className:"w-full accent-orange-500"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1 flex items-center gap-1",children:["Estrategia IA",s.jsxs("span",{className:"relative group cursor-help",children:[s.jsx(Sc,{className:"w-3.5 h-3.5 text-gray-400"}),s.jsx("span",{className:"absolute bottom-full left-0 mb-2 w-64 p-2 bg-gray-900 text-white text-[10px] rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50 leading-tight",children:'Determina cmo analizar la IA los prospectos encontrados. "Smart General" es ideal para cualquier negocio, pero puedes definir una propia.'})]})]}),s.jsxs("select",{value:x?"custom":re,onChange:M=>{const H=M.target.value;H==="custom"?(v(!0),ge("")):(v(!1),ge(H))},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500 outline-none text-sm",children:[ae.map(M=>s.jsx("option",{value:M.id,children:M.name},M.id)),ae.length===0&&s.jsx("option",{value:"general",children:"Cargando estrategias..."}),s.jsx("option",{value:"custom",children:" Custom Prompt..."})]}),s.jsx("button",{type:"button",onClick:()=>b(!0),className:"absolute right-8 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-orange-500 transition-colors",title:"Gestionar estrategias",children:s.jsx(Wg,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1 flex items-center gap-1",children:["Lmite",s.jsxs("span",{className:"relative group cursor-help",children:[s.jsx(Sc,{className:"w-3.5 h-3.5 text-gray-400"}),s.jsx("span",{className:"absolute bottom-full left-0 mb-2 w-64 p-2 bg-gray-900 text-white text-[10px] rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50 leading-tight",children:'Controla cuntos negocios descargar de Google. Una bsqueda "Profunda" barrer un rea mayor dentro del radio definido.'})]})]}),s.jsxs("select",{value:Oe,onChange:M=>me(parseInt(M.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500 outline-none text-sm",children:[s.jsx("option",{value:20,children:"20 Rpida"}),s.jsx("option",{value:40,children:"40 Normal"}),s.jsx("option",{value:60,children:"60 Profunda"})]})]})]}),x&&s.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2 duration-300 -mt-2",children:[s.jsxs("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1 flex items-center gap-2",children:[s.jsx(dm,{className:"w-4 h-4 text-purple-500"}),"Tu Prompt Personalizado"]}),s.jsxs("div",{className:"relative",children:[s.jsx("textarea",{value:y,onChange:M=>_(M.target.value),placeholder:"Escribe instrucciones detalladas para la IA. Ej: 'Analiza si el negocio tiene redes sociales activas, detecta si usan TPV antiguo, enfcate en oportunidades de digitalizacin...'",className:"w-full p-3 pr-12 border-2 border-purple-200 dark:border-purple-800/50 rounded-xl bg-purple-50/30 dark:bg-purple-900/10 text-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none h-24 resize-none",autoFocus:!0}),s.jsx("button",{type:"button",onClick:async()=>{if(y.trim())try{const H=await(await fetch(`${Y}/hunter/refine-prompt`,{method:"POST",headers:{Authorization:`Bearer ${ke}`,"Content-Type":"application/json"},body:JSON.stringify({prompt:y})})).json();H.refinedPrompt&&(_(H.refinedPrompt),je.success("Prompt optimizado!"))}catch{je.error("Error al optimizar")}},className:"absolute right-3 top-3 p-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl hover:scale-110 transition-transform shadow-lg",title:"Optimizar con IA",children:s.jsx(ir,{className:"w-5 h-5"})})]}),s.jsxs("p",{className:"text-xs text-purple-500 mt-1.5 ml-1 flex items-center gap-1",children:[s.jsx(ir,{className:"w-3 h-3"}),"Pulsa el botn  para que la IA mejore tu prompt automticamente"]})]}),s.jsx(Ne,{onClick:Vo,disabled:A||!N||!c,className:"w-full py-3 text-base shadow-lg shadow-orange-500/20",children:A?s.jsxs(s.Fragment,{children:[s.jsx(Lt,{className:"w-5 h-5 animate-spin mr-2"}),"Escaneando Zona..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ls,{className:"w-5 h-5 mr-2"}),"Buscar Prospectos"]})}),s.jsx("div",{className:"text-center min-h-[20px]",children:Ze?s.jsxs("p",{className:"text-xs text-orange-500 animate-pulse flex items-center justify-center gap-1",children:[s.jsx(Lt,{className:"w-3 h-3 animate-spin"})," Calculando prospectos potenciales..."]}):Ys?s.jsxs("p",{className:"text-sm font-medium text-green-600 dark:text-green-400 flex items-center justify-center gap-1 animate-fadeIn",children:[s.jsx(Rt,{className:"w-4 h-4"}),"Hay aprox. ",s.jsx("span",{className:"font-bold",children:Ys.displayCount})," prospectos disponibles en esta zona."]}):s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"La bsqueda puede tomar unos segundos. NoahPro IA analizar los resultados."})})]}),C&&s.jsxs("div",{className:"h-[300px] md:h-full min-h-[300px]",children:[s.jsxs("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:["Seleccin por Mapa ",s.jsx("span",{className:"text-xs font-normal text-orange-500 ml-2",children:"(Escribe una ciudad para centrar o haz clic en el mapa)"})]}),s.jsx(Que,{initialLocation:N,forcedCenter:ls,onLocationSelect:M=>S(M),radius:B})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-6 rounded-xl border border-blue-100 dark:border-blue-800",children:[s.jsxs("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2 flex items-center gap-2",children:[s.jsx(fr,{className:"w-5 h-5 text-blue-500"}),"Anlisis Automtico"]}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Cada prospecto es evaluado por IA para determinar su calidad y potencial de conversin."})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-6 rounded-xl border border-green-100 dark:border-green-800",children:[s.jsxs("h4",{className:"font-semibold text-green-900 dark:text-green-100 mb-2 flex items-center gap-2",children:[s.jsx(bs,{className:"w-5 h-5 text-green-500"}),"Datos Enriquecidos"]}),s.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Obtenemos telfonos, webs, reseas y horarios para darte una visin completa."})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-fuchsia-50 dark:from-purple-900/20 dark:to-fuchsia-900/20 p-6 rounded-xl border border-purple-100 dark:border-purple-800",children:[s.jsxs("h4",{className:"font-semibold text-purple-900 dark:text-purple-100 mb-2 flex items-center gap-2",children:[s.jsx(Wr,{className:"w-5 h-5 text-purple-500"}),"Pitch Personalizado"]}),s.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:"La IA genera un mensaje de entrada especfico para cada negocio encontrado."})]})]})]}),i==="history"&&s.jsxs("div",{className:"animate-fadeIn",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(rj,{className:"w-6 h-6 text-orange-500"}),"Historial de Bsquedas"]}),s.jsx("button",{onClick:ut,className:"p-2 text-gray-400 hover:text-orange-500 transition-colors",title:"Refrescar historial",children:s.jsx(Lt,{className:"w-5 h-5"})})]}),s.jsx(MS,{searches:pe,onSelect:Wi,onDelete:lc,activeTab:"history"})]}),i==="team"&&s.jsx("div",{className:"animate-fadeIn",children:s.jsx(ehe,{API_URL:Y,token:ke,onSelectCommercial:M=>{je.info(`Viendo actividad de ${M.full_name}`)}})}),(i==="prospects"||i==="analyzed"||i==="converted")&&s.jsx("div",{className:"space-y-6 animate-fadeIn",children:!ce&&i!=="converted"?s.jsx(MS,{searches:pe,onSelect:Wi,onDelete:lc,activeTab:i}):s.jsxs("div",{className:"space-y-6",children:[i==="converted"&&s.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm animate-fadeIn",children:[s.jsxs("div",{className:"w-full text-xs font-bold text-gray-400 uppercase mb-2 flex items-center gap-2",children:[s.jsx(Up,{className:"w-3 h-3"})," Filtrar por Tipo de Negocio"]}),s.jsx("button",{onClick:()=>Ae("all"),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${ue==="all"?"bg-orange-500 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300"}`,children:"Todos"}),[...new Set(oe.filter(M=>M.processed).map(M=>M.business_type))].filter(Boolean).map(M=>s.jsx("button",{onClick:()=>Ae(H=>H===M?"all":M),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${ue===M?"bg-orange-500 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300"}`,children:M},M))]}),ce&&s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("button",{onClick:()=>le(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-gray-500 transition-colors",children:s.jsx(mv,{className:"w-5 h-5 rotate-90"})}),s.jsx("div",{children:s.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[((Yi=pe.find(M=>M.id===ce))==null?void 0:Yi.query)||"Bsqueda",s.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",new Date((pc=pe.find(M=>M.id===ce))==null?void 0:pc.created_at).toLocaleDateString(),")"]})]})})]}),!ce&&i==="converted"&&s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Rt,{className:"w-6 h-6 text-green-500"}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Mis Leads Convertidos"})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full md:w-auto",children:[i!=="converted"&&s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsx(Up,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Estado:"}),s.jsxs("select",{value:Pe,onChange:M=>Le(M.target.value),className:"bg-transparent border-none text-sm focus:ring-0 text-gray-900 dark:text-white p-0",children:[s.jsx("option",{value:"all",children:"Todos"}),s.jsx("option",{value:"pending",children:"Pendientes"}),s.jsx("option",{value:"processed",children:"Procesados"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsx(xi,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Prioridad:"}),s.jsxs("select",{value:_e,onChange:M=>$e(M.target.value),className:"bg-transparent border-none text-sm focus:ring-0 text-gray-900 dark:text-white p-0",children:[s.jsx("option",{value:"all",children:"Todas"}),s.jsx("option",{value:"urgent",children:" Urgente"}),s.jsx("option",{value:"high",children:" Alta"}),s.jsx("option",{value:"medium",children:" Media"}),s.jsx("option",{value:"low",children:" Baja"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsx(wn,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Rating:"}),s.jsxs("select",{value:Ge,onChange:M=>et(M.target.value),className:"bg-transparent border-none text-sm focus:ring-0 text-gray-900 dark:text-white p-0",children:[s.jsx("option",{value:"all",children:"Cualquiera"}),s.jsx("option",{value:"4.5",children:"4.5+"}),s.jsx("option",{value:"4.0",children:"4.0+"}),s.jsx("option",{value:"3.5",children:"3.5+"})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(PL,{className:"w-5 h-5"})}),s.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",children:s.jsx(gv,{className:"w-5 h-5"})}),s.jsx(Ne,{size:"sm",variant:"outline",onClick:()=>gs(ce),children:s.jsx(Lt,{className:"w-4 h-4"})})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:qi().filter(M=>i!=="analyzed"||M.ai_analysis).map(M=>{var H,ne,xe;return s.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-sm border transition-all hover:shadow-lg hover:-translate-y-1 relative group cursor-pointer overflow-hidden ${M.processed?"border-green-200 dark:border-green-800/50":"border-gray-200 dark:border-gray-700 hover:border-orange-300"}`,onClick:()=>{st(M),br(!0)},children:[M.photos&&M.photos.length>0?s.jsx("div",{className:"h-32 w-full overflow-hidden",children:s.jsx("img",{src:typeof M.photos[0]=="string"?M.photos[0]:(H=M.photos[0])==null?void 0:H.url,alt:M.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:Te=>{Te.target.style.display="none"}})}):s.jsx("div",{className:"h-24 w-full bg-gradient-to-br from-orange-100 to-red-50 dark:from-gray-700 dark:to-gray-800 flex items-center justify-center",children:s.jsx(Xn,{className:"w-10 h-10 text-orange-300 dark:text-gray-600"})}),M.ai_priority&&s.jsx("div",{className:`absolute top-0 left-0 right-0 h-1 ${Ua(M.ai_priority)}`}),s.jsxs("div",{className:"absolute top-2 right-2 flex items-center bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm px-2 py-1 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx(wn,{className:"w-3.5 h-3.5 text-yellow-500 fill-yellow-500 mr-1"}),s.jsx("span",{className:"font-bold text-xs text-gray-900 dark:text-white",children:M.rating||"N/A"}),s.jsxs("span",{className:"text-[10px] text-gray-400 ml-1",children:["(",M.reviews_count||0,")"]})]}),M.processed&&s.jsx("div",{className:"absolute top-2 left-2 px-2 py-1 rounded-lg bg-green-500 text-white text-[10px] font-bold shadow-sm",children:" LEAD"}),s.jsxs("div",{className:"absolute bottom-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[!M.processed&&s.jsx("button",{onClick:Te=>{Te.stopPropagation(),Be(M)},className:"p-2 bg-green-500 hover:bg-green-600 text-white rounded-lg shadow-lg transition-all hover:scale-110",title:"Convertir a Lead",children:s.jsx(yw,{className:"w-4 h-4"})}),M.phone&&s.jsx("a",{href:`tel:${M.phone}`,onClick:Te=>Te.stopPropagation(),className:"p-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg shadow-lg transition-all hover:scale-110",title:"Llamar",children:s.jsx(Kn,{className:"w-4 h-4"})}),M.website&&s.jsx("a",{href:M.website,target:"_blank",rel:"noreferrer",onClick:Te=>Te.stopPropagation(),className:"p-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg shadow-lg transition-all hover:scale-110",title:"Abrir Web",children:s.jsx(bs,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"mb-3",children:[s.jsx("h4",{className:"font-bold text-gray-900 dark:text-white truncate text-base",title:M.name,children:M.name}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate flex items-center gap-1 mt-1",children:[s.jsx(Lc,{className:"w-3.5 h-3.5 shrink-0"}),M.address]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[s.jsx("span",{className:"px-2 py-1 rounded-md bg-orange-50 dark:bg-orange-900/20 text-xs text-orange-600 dark:text-orange-400 border border-orange-100 dark:border-orange-800",children:M.business_type||"Negocio Local"}),((ne=M.ai_analysis)==null?void 0:ne.priority)&&s.jsxs("span",{className:`px-2 py-1 rounded-md text-xs font-bold border ${M.ai_analysis.priority==="HIGH"?"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 border-red-200 dark:border-red-800":M.ai_analysis.priority==="MEDIUM"?"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-600 dark:text-yellow-400 border-yellow-200 dark:border-yellow-800":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-400 border-gray-200 dark:border-gray-600"}`,children:["PRIORIDAD: ",M.ai_analysis.priority]}),M.ai_analysis&&s.jsxs("span",{className:"px-2 py-1 rounded-md bg-indigo-50 dark:bg-indigo-900/20 text-xs text-indigo-600 dark:text-indigo-400 border border-indigo-100 dark:border-indigo-800 flex items-center gap-1",children:[s.jsx(cm,{className:"w-3 h-3"})," Analizado"]}),$r(M).instagram&&s.jsx("span",{className:"px-2 py-1 rounded-md bg-pink-50 dark:bg-pink-900/20 text-xs text-pink-600 dark:text-pink-400 border border-pink-200 dark:border-pink-800 flex items-center gap-1",children:s.jsx(Cc,{className:"w-3 h-3"})}),$r(M).facebook&&s.jsx("span",{className:"px-2 py-1 rounded-md bg-blue-50 dark:bg-blue-900/20 text-xs text-blue-600 dark:text-blue-400 border border-blue-200 dark:border-blue-800 flex items-center gap-1",children:s.jsx(um,{className:"w-3 h-3"})})]}),((xe=M.ai_analysis)==null?void 0:xe.opportunity)&&s.jsx("div",{className:"mb-3 p-2 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-100 dark:border-purple-800",children:s.jsxs("p",{className:"text-xs text-purple-700 dark:text-purple-400 font-medium truncate",children:[" ",M.ai_analysis.opportunity]})})]}),s.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 dark:text-gray-400 mb-4",children:[M.phone&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Kn,{className:"w-3 h-3"}),M.phone]}),M.website&&s.jsxs("span",{className:"flex items-center gap-1 text-blue-500 hover:text-blue-600",children:[s.jsx(bs,{className:"w-3 h-3"}),"Web"]})]}),s.jsxs("div",{className:"pt-3 border-t border-gray-100 dark:border-gray-700/50 flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-400",children:M.distance?`${M.distance} km`:"Zona cercana"}),s.jsxs(Ne,{size:"sm",variant:M.ai_analysis?"default":"outline",className:M.ai_analysis?"bg-indigo-600 hover:bg-indigo-700 text-white":"",onClick:Te=>{Te.stopPropagation(),_r(M.id)},children:[M.ai_analysis?"Ver Anlisis":"Analizar IA",s.jsx(Fp,{className:"w-4 h-4 ml-1"})]})]})]},M.id)})})]})}),s.jsx(Dr,{isOpen:Ut,onClose:()=>br(!1),title:(V==null?void 0:V.name)||"Detalle del Prospecto",size:"6xl",children:V&&s.jsxs("div",{className:"flex flex-col h-[80vh]",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-600 text-white px-6 py-4 -mx-6 -mt-6 mb-4",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[s.jsx("h2",{className:"text-xl font-bold truncate max-w-[300px]",children:V.name}),V.processed&&s.jsxs("span",{className:"px-3 py-1 rounded-lg text-sm font-bold bg-green-500 text-white flex items-center gap-1 shadow-sm shrink-0",children:[s.jsx(gi,{className:"w-4 h-4"})," LEAD ID: #",V.lead_id||V.id.toString().slice(-4)]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-100 flex-wrap",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Xn,{className:"w-4 h-4"})," ",V.business_type||"Negocio"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Lc,{className:"w-4 h-4"})," ",V.city||((gc=(gn=V.address)==null?void 0:gn.split(",").slice(-3,-2)[0])==null?void 0:gc.trim())||"Ubicacin"]})]}),s.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm",children:[s.jsxs("span",{className:`flex items-center gap-1 ${V.phone?"text-green-300":"text-gray-300 opacity-60"}`,children:[s.jsx(Kn,{className:"w-4 h-4"})," ",V.phone||"Sin telfono"]}),s.jsxs("span",{className:`flex items-center gap-1 ${V.website?"text-green-300":"text-gray-300 opacity-60"}`,children:[s.jsx(bs,{className:"w-4 h-4"})," ",V.website?"Web":"Sin web"]}),$r(V).facebook&&s.jsx("a",{href:zr((Ko=V.social_media)==null?void 0:Ko.facebook),target:"_blank",rel:"noreferrer",className:"flex items-center gap-1 text-blue-300 hover:text-blue-100 transition-colors",children:s.jsx(um,{className:"w-4 h-4"})}),$r(V).instagram&&s.jsx("a",{href:zr((Yn=V.social_media)==null?void 0:Yn.instagram),target:"_blank",rel:"noreferrer",className:"flex items-center gap-1 text-pink-300 hover:text-pink-100 transition-colors",children:s.jsx(Cc,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"flex items-center gap-4 ml-4",children:[s.jsxs("div",{className:"text-right border-l border-white/20 pl-4",children:[s.jsxs("div",{className:"flex items-center gap-1 text-2xl font-black",children:[V.rating||"N/A",s.jsx(wn,{className:"w-5 h-5 text-yellow-300 fill-yellow-300"})]}),s.jsxs("span",{className:"text-xs text-orange-100",children:[V.reviews_count||0," reseas"]})]}),s.jsxs(Ne,{size:"sm",className:"bg-white text-orange-600 hover:bg-orange-50 font-bold px-4 rounded-xl shadow-lg transition-transform hover:scale-105",onClick:()=>_r(V.id),disabled:Gt===V.id,children:[s.jsx(ir,{className:`w-4 h-4 mr-2 ${Gt===V.id?"animate-spin":""}`}),"IA"]})]})]})}),s.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700 mb-4 overflow-x-auto no-scrollbar",children:[{id:"summary",label:"Resumen",icon:It},{id:"analysis",label:"Anlisis IA",icon:cm},{id:"audit",label:"Auditora Digital",icon:Dx},{id:"notes",label:"Notas + CRM",icon:Wr},{id:"inbox",label:"Inbox Demo",icon:Tt,badge:Cn.length>0?Cn.length:null},{id:"activity",label:"Actividad",icon:Ms},{id:"gallery",label:"Galera",icon:bu},{id:"reviews",label:"Reseas",icon:wn},{id:"contact",label:"Contacto",icon:Kn},{id:"demos",label:"Web Demo",icon:hm}].map(M=>s.jsxs("button",{onClick:()=>$a(M.id),className:`flex items-center gap-2 px-5 py-3 text-sm font-semibold transition-all border-b-2 whitespace-nowrap ${gt===M.id?"border-orange-500 text-orange-600 dark:text-orange-400 bg-orange-50/50 dark:bg-orange-900/10":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[s.jsx(M.icon,{className:"w-4 h-4"}),M.label,M.badge&&s.jsx("span",{className:"bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full animate-pulse",children:M.badge})]},M.id))}),s.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar p-6",children:[s.jsxs("div",{className:`grid ${gt==="summary"||gt==="analysis"?"lg:grid-cols-3":"grid-cols-1"} gap-6`,children:[s.jsxs("div",{className:gt==="summary"||gt==="analysis"?"lg:col-span-2":"col-span-1",children:[gt==="summary"&&s.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400 mb-2",children:[s.jsx(Lc,{className:"w-4 h-4 text-orange-500"}),s.jsx("span",{className:"text-sm font-bold uppercase tracking-wider text-[10px]",children:"Direccin Principal"})]}),s.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:V.address||"No disponible"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400 mb-2",children:[s.jsx(Kn,{className:"w-4 h-4 text-green-500"}),s.jsx("span",{className:"text-sm font-bold uppercase tracking-wider text-[10px]",children:"Telfono de Contacto"})]}),s.jsx("p",{className:"text-gray-900 dark:text-white font-mono font-bold",children:V.phone||"No disponible"})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400 mb-2",children:[s.jsx(wn,{className:"w-4 h-4 text-yellow-500"}),s.jsx("span",{className:"text-sm font-bold uppercase tracking-wider text-[10px]",children:"Reputacin en Google"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xl font-black text-gray-900 dark:text-white",children:V.rating||"N/A"}),s.jsx("div",{className:"flex",children:[1,2,3,4,5].map(M=>s.jsx(wn,{className:`w-3 h-3 ${M<=Math.round(V.rating||0)?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},M))}),s.jsxs("span",{className:"text-[10px] text-gray-400 font-bold ml-1",children:["(",V.reviews_count||0," reviews)"]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-sm",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(bs,{className:"w-5 h-5 text-indigo-500"})," Ecosistema Digital Detectado"]})}),(()=>{var ne,xe;const M=$r(V);return M.hasRealWeb||M.instagram||M.facebook?s.jsxs("div",{className:"flex flex-wrap gap-3",children:[M.hasRealWeb&&s.jsxs("a",{href:V.website,target:"_blank",rel:"noreferrer",className:"px-4 py-2 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 rounded-xl border border-indigo-200 dark:border-indigo-800 hover:bg-indigo-100 dark:hover:bg-indigo-900/30 transition-all flex items-center gap-2 text-xs font-bold shadow-sm",children:[s.jsx(bs,{className:"w-4 h-4"})," SITIO WEB"]}),M.instagram&&s.jsxs("a",{href:zr((ne=V.social_media)==null?void 0:ne.instagram),target:"_blank",rel:"noreferrer",className:"px-4 py-2 bg-pink-50 dark:bg-pink-900/20 text-pink-600 dark:text-pink-400 rounded-xl border border-pink-200 dark:border-pink-800 hover:bg-pink-100 dark:hover:bg-pink-900/30 transition-all flex items-center gap-2 text-xs font-bold shadow-sm",children:[s.jsx(Cc,{className:"w-4 h-4"})," INSTAGRAM"]}),M.facebook&&s.jsxs("a",{href:zr((xe=V.social_media)==null?void 0:xe.facebook),target:"_blank",rel:"noreferrer",className:"px-4 py-2 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400 rounded-xl border border-blue-200 dark:border-blue-800 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-all flex items-center gap-2 text-xs font-bold shadow-sm",children:[s.jsx(um,{className:"w-4 h-4"})," FACEBOOK"]})]}):s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/20 p-4 rounded-xl border border-dashed border-gray-200 dark:border-gray-700 text-center",children:[s.jsx(p4,{className:"w-6 h-6 text-orange-300 mx-auto mb-2"}),s.jsx("p",{className:"text-xs text-gray-500 italic font-medium",children:"No se detect presencia online. Oportunidad alta de venta Web!"})]})})()]}),V.processed&&s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-5 rounded-2xl border border-green-200 dark:border-green-800 flex items-center justify-between shadow-sm animate-pulse",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-green-500 rounded-full p-1",children:s.jsx(gi,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{children:[s.jsx("span",{className:"text-green-700 dark:text-green-400 font-bold text-sm",children:"Convertido en Lead"}),s.jsx("p",{className:"text-[10px] text-green-600/70",children:"Este prospecto ya est en tu cartera de CRM"})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:"text-[10px] uppercase font-bold text-green-600 block",children:"Lead ID"}),s.jsxs("span",{className:"text-xs font-black text-green-700 dark:text-green-400",children:["#",V.lead_id||V.id]})]})]})]}),gt==="analysis"&&s.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[s.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 p-6 rounded-2xl text-white shadow-lg overflow-hidden relative",children:[s.jsx("div",{className:"absolute -right-6 -bottom-6 opacity-10",children:s.jsx(dm,{className:"w-32 h-32 text-white"})}),s.jsx("div",{className:"relative z-10",children:s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold",children:"Central de Inteligencia Estratgica"}),s.jsx("p",{className:"text-indigo-100 text-sm opacity-90",children:"Anlisis metdico para la aproximacin comercial de xito"})]}),s.jsxs(Ne,{size:"sm",onClick:()=>_r(V.id),disabled:Gt===V.id,className:"bg-white/20 hover:bg-white/30 text-white border-0 backdrop-blur-md font-bold px-4",children:[Gt===V.id?s.jsx(Lt,{className:"w-4 h-4 animate-spin"}):s.jsx(ir,{className:"w-4 h-4 mr-2"}),V.ai_analysis?"Regenerar":"Generar"]})]})})]}),V.ai_analysis?s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 pb-6",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-sm relative overflow-hidden transition-all hover:shadow-md",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b border-gray-100 dark:border-gray-700 pb-3",children:[s.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg text-indigo-600",children:s.jsx(To,{className:"w-5 h-5"})}),s.jsx("h4",{className:"text-sm font-bold text-gray-900 dark:text-white uppercase tracking-wider",children:"Mapa de Oportunidad"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-indigo-50/50 dark:bg-indigo-900/10 p-4 rounded-xl border border-indigo-100 dark:border-indigo-800",children:[s.jsx("p",{className:"text-xs font-black text-indigo-700 dark:text-indigo-400 uppercase mb-2",children:"Diagnstico IA:"}),s.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed italic",children:['"',((Jo=(Xo=V.ai_analysis.opportunity_map)==null?void 0:Xo.pain_points)==null?void 0:Jo[0])||V.ai_reasoning||"El negocio presenta una falta de infraestructura digital moderna, lo que impacta en su visibilidad local.",'"']})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-3 bg-emerald-50 dark:bg-emerald-900/10 rounded-xl border border-emerald-100 dark:border-emerald-800",children:[s.jsx("span",{className:"text-[10px] font-black text-emerald-600 uppercase mb-1 block",children:"Fortalezas"}),s.jsxs("ul",{className:"text-[10px] text-emerald-800 dark:text-emerald-300 list-disc list-inside",children:[s.jsx("li",{children:"Ubicacin Prime"}),s.jsx("li",{children:"Buen Trfico"})]})]}),s.jsxs("div",{className:"p-3 bg-rose-50 dark:bg-rose-900/10 rounded-xl border border-rose-100 dark:border-rose-800",children:[s.jsx("span",{className:"text-[10px] font-black text-rose-600 uppercase mb-1 block",children:"Debilidades"}),s.jsxs("ul",{className:"text-[10px] text-rose-800 dark:text-rose-300 list-disc list-inside",children:[s.jsx("li",{children:"Sin Web TPV"}),s.jsx("li",{children:"Bajo SEO"})]})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-sm relative overflow-hidden transition-all hover:shadow-md",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b border-gray-100 dark:border-gray-700 pb-3",children:[s.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg text-orange-600",children:s.jsx(qL,{className:"w-5 h-5"})}),s.jsx("h4",{className:"text-sm font-bold text-gray-900 dark:text-white uppercase tracking-wider",children:"Solucin Tctica NoahPro"})]}),s.jsx("div",{className:"space-y-3",children:(V.ai_analysis.recommended_actions||["Implementar TPV Cloud","Landing Page Mvil","Estrategia de Reseas"]).map((M,H)=>s.jsxs("div",{className:"flex items-start gap-2 text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("div",{className:"mt-1 bg-orange-500 rounded-full p-0.5",children:s.jsx(gi,{className:"w-2 h-2 text-white"})}),s.jsx("span",{children:M})]},H))})]})]}),s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-900/10 dark:to-purple-900/10 p-5 rounded-2xl border border-indigo-100 dark:border-indigo-800 shadow-sm relative overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h4",{className:"text-sm font-black text-indigo-900 dark:text-indigo-300 uppercase flex items-center gap-2",children:[s.jsx(hm,{className:"w-4 h-4"})," Generador de Landing Demo"]}),s.jsx("div",{className:"bg-white/50 dark:bg-black/20 p-1 rounded-lg",children:s.jsx(ir,{className:"w-4 h-4 text-indigo-500"})})]}),s.jsx("div",{className:"flex-1",children:ha.length>0?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-purple-200/50 shadow-inner",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3 text-xs font-bold text-gray-500 uppercase",children:[s.jsx("span",{children:"ltima Demo Activa"}),s.jsxs("span",{className:"text-green-600 flex items-center gap-1 bg-green-50 px-2 py-0.5 rounded-full",children:[s.jsx(ln,{className:"w-3 h-3"})," ",((Gi=ha[0])==null?void 0:Gi.clicks)||0," CLICKS"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Ne,{size:"sm",className:"flex-1 bg-indigo-600 text-white",onClick:()=>{var M;return window.open(`${Y.replace("/api","")}/api/hunter/public/demo/${(M=ha[0])==null?void 0:M.public_token}`,"_blank")},children:[s.jsx(Iu,{className:"w-4 h-4 mr-2"})," VER"]}),s.jsxs(Ne,{size:"sm",variant:"outline",className:"flex-1 text-indigo-600",onClick:()=>{var H;const M=Y.replace("/api","");navigator.clipboard.writeText(`${M}/api/hunter/public/demo/${(H=ha[0])==null?void 0:H.public_token}`),je.success("Enlace copiado")},children:[s.jsx(kl,{className:"w-4 h-4 mr-2"})," COPIAR"]})]})]}),Cn.length>0&&s.jsxs("div",{className:"bg-orange-500 p-3 rounded-xl text-white flex justify-between items-center shadow-md animate-bounce",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Tt,{className:"w-4 h-4"}),s.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:[Cn.length," Leads Nuevos"]})]}),s.jsx(Ne,{size:"xs",className:"bg-white text-orange-600 font-bold",onClick:()=>$a("inbox"),children:"VER HOY"})]})]}):s.jsxs("div",{className:"text-center py-10 bg-white/50 dark:bg-gray-800/50 rounded-2xl border-2 border-dashed border-purple-200 dark:border-purple-800/50",children:[s.jsx(hm,{className:"w-12 h-12 text-purple-200 mx-auto mb-3"}),s.jsxs("p",{className:"text-sm text-gray-500 font-medium px-6 mb-4",children:["- [x] Bsqueda Personalizada: aadida opcin para escribir manualmente el tipo de negocio.",s.jsx("br",{}),"- [ ] Ayuda Visual: aadir iconos de interrogacin con instrucciones en el formulario.",s.jsx("br",{}),"- [ ] Estrategias Personalizadas: permitir definir un prompt manual para la IA."]}),s.jsx(Ne,{size:"sm",className:"bg-purple-600 text-white shadow-lg",onClick:()=>ur(!0),children:"CREAR LANDING IA"})]})}),s.jsx("div",{className:"mt-6",children:s.jsxs(Ne,{className:"w-full h-12 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white font-bold rounded-xl shadow-lg transition-all active:scale-95",onClick:()=>qa(V.id),disabled:zi===V.id,children:[zi===V.id?s.jsx(Lt,{className:"w-5 h-5 animate-spin mr-2"}):s.jsx(It,{className:"w-5 h-5 mr-2"}),"GENERAR PROPUESTA COMERCIAL"]})})]})})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-gray-50/50 dark:bg-gray-800/50 rounded-3xl border-2 border-dashed border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"w-20 h-20 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mb-6 shadow-inner",children:s.jsx(dm,{className:"w-10 h-10 text-gray-300 dark:text-gray-600"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Sin Anlisis Estratgico"}),s.jsx("p",{className:"text-gray-500 max-w-sm text-center mb-8 px-4 text-sm leading-relaxed",children:"Activa el potencial de venta de este prospecto permitiendo que nuestra IA genere estrategias personalizadas."}),s.jsxs(Ne,{size:"lg",onClick:()=>_r(V.id),className:"bg-purple-600 hover:bg-purple-700 text-white px-8 rounded-2xl shadow-xl shadow-purple-500/20 active:scale-95 transition-all",disabled:Gt===V.id,children:[Gt===V.id?s.jsx(Lt,{className:"w-5 h-5 animate-spin mr-2"}):s.jsx(ir,{className:"w-5 h-5 mr-2"}),"EJECUTAR ANLISIS DE LA IA"]})]})]}),gt==="notes"&&s.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("h4",{className:"font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[s.jsx(wA,{className:"w-4 h-4"})," Notas Internas"]}),s.jsxs(Ne,{size:"sm",variant:"ghost",onClick:dc,disabled:Ii,children:[Ii?s.jsx(Lt,{className:"w-3 h-3 animate-spin mr-1"}):s.jsx(xv,{className:"w-3 h-3 mr-1"}),"Mejorar con IA"]})]}),s.jsx("div",{className:"space-y-3 max-h-[300px] overflow-y-auto",children:Hn.length>0?Hn.map(M=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm group relative",children:[s.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:M.content}),s.jsxs("div",{className:"flex justify-between items-center mt-2 pt-2 border-t border-gray-100 dark:border-gray-700/50 text-xs text-gray-400",children:[s.jsx("span",{children:new Date(M.created_at).toLocaleString()}),s.jsx("button",{onClick:()=>Vi(M.id),className:"opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-700 p-1",children:s.jsx(Ar,{className:"w-3 h-3"})})]})]},M.id)):s.jsx("div",{className:"text-center py-8 text-gray-400 italic",children:"No hay notas registradas"})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:fs,onChange:M=>$i(M.target.value),onKeyDown:M=>M.key==="Enter"&&qo(),placeholder:"Aadir nota rpida...",className:"flex-1 text-sm rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white"}),s.jsx(Ne,{size:"sm",onClick:qo,disabled:!fs.trim(),children:s.jsx($d,{className:"w-4 h-4"})})]})]}),gt==="inbox"&&s.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[s.jsxs("div",{className:"flex justify-between items-center bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 p-4 rounded-xl border border-orange-100 dark:border-orange-800",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-800/50 rounded-lg",children:s.jsx(Tt,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-900 dark:text-white",children:"Solicitudes de Contacto"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Mensajes recibidos desde las landing pages de demo"})]})]}),s.jsx("span",{className:"text-2xl font-bold text-orange-600",children:Cn.length})]}),Cn.length>0?s.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:Cn.map((M,H)=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold",children:(M.name||"A").charAt(0).toUpperCase()}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-semibold text-gray-900 dark:text-white",children:M.name||"Sin nombre"}),s.jsx("p",{className:"text-xs text-gray-500",children:M.email||"Sin email"})]})]}),s.jsx("span",{className:"text-xs text-gray-400",children:M.created_at?new Date(M.created_at).toLocaleDateString():"Fecha desconocida"})]}),M.phone&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 mb-2",children:[s.jsx(Kn,{className:"w-3 h-3"}),s.jsx("span",{children:M.phone})]}),M.message&&s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg text-sm text-gray-700 dark:text-gray-300 italic",children:['"',M.message,'"']})]},M.id||H))}):s.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl",children:[s.jsx(Tt,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-500 mb-2",children:"Sin mensajes an"})]})]}),gt==="activity"&&s.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(Ms,{className:"w-5 h-5 text-indigo-500"})," Historial de Actividad"]})}),Hn&&Hn.length>0?s.jsx("div",{className:"relative border-l-2 border-gray-200 dark:border-gray-700 pl-6 space-y-6 ml-2",children:Hn.map((M,H)=>s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute -left-[31px] w-4 h-4 bg-indigo-500 rounded-full border-4 border-white dark:border-gray-900"}),s.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:M.content})})]},M.id||H))}):s.jsx("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800/50 rounded-xl",children:s.jsx("p",{className:"text-gray-500",children:"Sin actividad registrada"})})]}),gt==="gallery"&&s.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(bu,{className:"w-5 h-5 text-purple-500"})," Galera de Fotos"]}),s.jsxs(Ne,{size:"sm",variant:"outline",onClick:()=>_r(V.id),children:[s.jsx(Lt,{className:"w-4 h-4 mr-1"})," Buscar ms fotos"]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:V.photos&&V.photos.length>0?V.photos.map((M,H)=>s.jsx("div",{className:"aspect-video rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800",children:s.jsx("img",{src:typeof M=="string"?M:M==null?void 0:M.url,alt:`Foto ${H+1}`,className:"w-full h-full object-cover hover:scale-105 transition-transform cursor-pointer"})},H)):s.jsxs("div",{className:"col-span-full text-center py-12 text-gray-400",children:[s.jsx(bu,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"Sin imgenes disponibles"})]})})]}),gt==="reviews"&&s.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(wn,{className:"w-5 h-5 text-yellow-500"})," Reseas de Google"]}),s.jsxs(Ne,{size:"sm",variant:"outline",onClick:()=>_r(V.id),children:[s.jsx(Lt,{className:"w-4 h-4 mr-1"})," Actualizar"]})]}),V.reviews&&V.reviews.length>0?V.reviews.map((M,H)=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"flex",children:[1,2,3,4,5].map(ne=>s.jsx(wn,{className:`w-4 h-4 ${ne<=M.rating?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},ne))}),s.jsx("span",{className:"text-xs text-gray-500",children:M.author})]}),s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:M.text})]},H)):s.jsxs("div",{className:"text-center py-12 text-gray-400",children:[s.jsx(wn,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"Sin reseas disponibles"})]})]}),gt==="contact"&&s.jsx("div",{className:"space-y-4 animate-fadeIn",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(Ne,{size:"lg",variant:"outline",className:"h-20",onClick:()=>V.phone&&window.open(`tel:${V.phone}`),disabled:!V.phone,children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(Kn,{className:"w-6 h-6 mb-1 text-green-500"}),s.jsx("span",{children:"Llamar"})]})}),s.jsx(Ne,{size:"lg",variant:"outline",className:"h-20",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(Tt,{className:"w-6 h-6 mb-1 text-indigo-500"}),s.jsx("span",{children:"Email Pitch"})]})}),s.jsx(Ne,{size:"lg",variant:"outline",className:"h-20",onClick:()=>{var M;return((M=V.social_media)==null?void 0:M.instagram)&&window.open(zr(V.social_media.instagram),"_blank")},disabled:!((xc=V.social_media)!=null&&xc.instagram),children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(Cc,{className:"w-6 h-6 mb-1 text-pink-500"}),s.jsx("span",{children:"DM Instagram"})]})}),s.jsx(Ne,{size:"lg",variant:"outline",className:"h-20",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(Al,{className:"w-6 h-6 mb-1 text-orange-500"}),s.jsx("span",{children:"Agendar"})]})})]})}),gt==="audit"&&s.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[s.jsxs("div",{className:"flex justify-between items-center bg-gray-50 dark:bg-gray-800/50 p-4 rounded-xl",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(Dx,{className:"w-5 h-5 text-indigo-600"}),"Auditora Digital 360"]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Anlisis completo de presencia digital"})]}),V.digital_audit&&s.jsx(Ne,{size:"sm",onClick:()=>ma(V.id),disabled:Gt===V.id,className:"bg-indigo-600 hover:bg-indigo-700 text-white",children:Gt===V.id?s.jsxs(s.Fragment,{children:[s.jsx(Lt,{className:"w-4 h-4 mr-2 animate-spin"})," Regenerando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Lt,{className:"w-4 h-4 mr-2"})," Regenerar"]})})]}),V.quality_score!==void 0&&s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-cyan-600 p-6 rounded-2xl text-white shadow-xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-white/20 p-3 rounded-xl",children:s.jsx(Dx,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-lg",children:"Quality Score"}),s.jsx("p",{className:"text-emerald-100 text-xs",children:"Puntuacin de calidad del prospecto"})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-4xl font-black",children:V.quality_score}),s.jsx("div",{className:"text-xs text-emerald-100",children:"/ 100"})]})]}),s.jsx("div",{className:"bg-white/10 rounded-full h-3 overflow-hidden",children:s.jsx("div",{className:"bg-white h-full transition-all duration-1000 ease-out rounded-full",style:{width:`${V.quality_score}%`}})})]}),V.social_handle&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl border-2 border-gray-200 dark:border-gray-700 shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-purple-600 p-3 rounded-xl",children:s.jsx(Cc,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white",children:["@",V.social_handle]}),s.jsx("p",{className:"text-xs text-gray-500 capitalize",children:V.social_platform||"instagram"})]})]}),((Qo=V.social_stats)==null?void 0:Qo.is_active)!==void 0&&s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${V.social_stats.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:V.social_stats.is_active?" Activa":" Inactiva"})]}),V.social_stats&&s.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[V.social_stats.followers_count!==void 0&&s.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-900/50 rounded-xl",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:V.social_stats.followers_count.toLocaleString()}),s.jsx("div",{className:"text-xs text-gray-500",children:"Seguidores"})]}),V.social_stats.media_count!==void 0&&s.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-900/50 rounded-xl",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:V.social_stats.media_count}),s.jsx("div",{className:"text-xs text-gray-500",children:"Publicaciones"})]}),V.social_stats.engagement_rate!==void 0&&s.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-900/50 rounded-xl",children:[s.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[V.social_stats.engagement_rate,"%"]}),s.jsx("div",{className:"text-xs text-gray-500",children:"Engagement"})]}),V.social_stats.last_post_date&&s.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-900/50 rounded-xl",children:[s.jsx("div",{className:"text-sm font-bold text-gray-900 dark:text-white",children:V.social_stats.last_post_date}),s.jsx("div",{className:"text-xs text-gray-500",children:"ltimo post"})]})]}),((Zt=V.social_stats)==null?void 0:Zt.fetch_method)&&s.jsx("div",{className:"mt-3 text-xs text-gray-400 flex items-center gap-2",children:s.jsxs("span",{children:["Mtodo: ",V.social_stats.fetch_method==="api"?"Instagram Graph API":"Web Scraping"]})})]}),V.digital_audit&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl border-2 border-indigo-200 dark:border-indigo-800 shadow-lg",children:[s.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx(To,{className:"w-5 h-5 text-indigo-600"}),"Madurez Digital"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Score Total"}),s.jsxs("span",{className:"text-2xl font-black text-indigo-600",children:[V.digital_audit.score,"/100"]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[s.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Web"}),s.jsxs("div",{className:`font-bold text-sm ${V.digital_audit.web_status==="modern"?"text-green-600":V.digital_audit.web_status==="outdated"?"text-orange-600":"text-red-600"}`,children:[V.digital_audit.web_status==="modern"&&" Moderna",V.digital_audit.web_status==="outdated"&&" Obsoleta",V.digital_audit.web_status==="missing"&&" Sin web"]})]}),s.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Redes Sociales"}),s.jsxs("div",{className:`font-bold text-sm ${V.digital_audit.social_health==="healthy"?"text-green-600":V.digital_audit.social_health==="inactive"?"text-orange-600":V.digital_audit.social_health==="critical"?"text-red-600":"text-gray-500"}`,children:[V.digital_audit.social_health==="healthy"&&" Activas",V.digital_audit.social_health==="inactive"&&" Inactivas",V.digital_audit.social_health==="critical"&&" Crtico",V.digital_audit.social_health==="missing"&&" Ausente"]})]}),s.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Reputacin"}),s.jsxs("div",{className:`font-bold text-sm ${V.digital_audit.reputation==="excellent"?"text-green-600":V.digital_audit.reputation==="good"?"text-blue-600":V.digital_audit.reputation==="fair"?"text-yellow-600":"text-red-600"}`,children:[V.digital_audit.reputation==="excellent"&&" Excelente",V.digital_audit.reputation==="good"&&" Buena",V.digital_audit.reputation==="fair"&&" Regular",V.digital_audit.reputation==="poor"&&" Pobre"]})]}),s.jsxs("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"E-commerce"}),s.jsxs("div",{className:"font-bold text-sm text-gray-700 dark:text-gray-300",children:[((Zi=V.digital_audit.details)==null?void 0:Zi.ecommerce_score)||0," pts"]})]})]})]})]}),V.sales_intelligence&&s.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 p-6 rounded-2xl border-2 border-orange-200 dark:border-orange-800",children:[s.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx(fr,{className:"w-5 h-5 text-orange-600"}),"Sales Intelligence"]}),s.jsxs("div",{className:"mb-4 p-4 bg-white dark:bg-gray-800 rounded-xl border border-orange-200 dark:border-orange-700",children:[s.jsxs("div",{className:"text-xs text-gray-500 mb-2 flex items-center gap-2",children:[s.jsx(xi,{className:"w-3 h-3"}),"Punto de Dolor Principal"]}),s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:V.sales_intelligence.primary_pain_point})]}),s.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-xl shadow-lg",children:[s.jsxs("div",{className:"text-xs text-orange-100 mb-2 flex items-center gap-2",children:[s.jsx(l4,{className:"w-3 h-3"}),"Mensaje de Apertura"]}),s.jsxs("p",{className:"text-sm font-medium italic mb-3",children:['"',V.sales_intelligence.opening_message,'"']}),s.jsxs(Ne,{size:"xs",className:"bg-white text-orange-600 hover:bg-orange-50 font-bold",onClick:()=>{navigator.clipboard.writeText(V.sales_intelligence.opening_message),je.success("Mensaje copiado al portapapeles")},children:[s.jsx(kl,{className:"w-3 h-3 mr-1"}),"Copiar"]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-lg",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Estrategia"}),s.jsx("div",{className:"font-bold text-sm text-orange-600",children:V.sales_intelligence.recommended_strategy})]}),s.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-lg",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Producto"}),s.jsx("div",{className:"font-bold text-sm text-gray-900 dark:text-white",children:V.sales_intelligence.suggested_product})]})]}),(V.sales_intelligence.estimated_value||V.sales_intelligence.close_probability)&&s.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[V.sales_intelligence.estimated_value&&s.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-lg",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Valor Estimado"}),s.jsxs("div",{className:"font-bold text-lg text-green-600",children:["",V.sales_intelligence.estimated_value.toLocaleString()]})]}),V.sales_intelligence.close_probability&&s.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-lg",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Prob. Cierre"}),s.jsxs("div",{className:"font-bold text-lg text-blue-600",children:[(V.sales_intelligence.close_probability*100).toFixed(0),"%"]})]})]})]}),!V.digital_audit&&!V.sales_intelligence&&s.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl",children:[s.jsx(cm,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"Auditora digital no disponible"}),s.jsx("p",{className:"text-xs text-gray-400 mb-4",children:'Ejecuta un "Anlisis Profundo" para generar la auditora'}),s.jsxs(Ne,{onClick:()=>ma(V.id),children:[s.jsx(ir,{className:"w-4 h-4 mr-2"}),"Anlisis Profundo"]})]})]}),gt==="demos"&&s.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[s.jsxs("div",{className:"flex justify-between items-center bg-gray-50 dark:bg-gray-800/50 p-4 rounded-xl",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-900 dark:text-white",children:"Demos Generadas"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Landing pages creadas para este prospecto"})]}),s.jsxs(Ne,{size:"sm",onClick:()=>ur(!0),children:[s.jsx(xr,{className:"w-4 h-4 mr-2"})," Nueva Demo"]})]}),nu?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(Lt,{className:"animate-spin text-gray-400"})}):ha.length>0?s.jsx("div",{className:"grid gap-3",children:ha.map(M=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-2.5 rounded-lg",children:s.jsx(hm,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),s.jsxs("div",{children:[s.jsxs("h5",{className:"font-medium text-gray-900 dark:text-white text-sm",children:["Demo: ",M.type||"Web Corporativa"]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[s.jsx("span",{children:new Date(M.created_at).toLocaleDateString()}),s.jsx("span",{children:""}),s.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[s.jsx(ln,{className:"w-3 h-3"})," ",M.clicks||0," visitas"]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Ne,{size:"sm",variant:"outline",onClick:()=>{const H=Y.replace("/api","");window.open(M.public_url||`${H}/api/hunter/public/demo/${M.public_token}`,"_blank")},children:[s.jsx(Iu,{className:"w-4 h-4 mr-2"})," Ver"]}),s.jsx("button",{onClick:()=>Hi(M.id),className:"p-2 text-gray-400 hover:text-red-500",children:s.jsx(Ar,{className:"w-4 h-4"})})]})]},M.id))}):s.jsxs("div",{className:"text-center py-10 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl",children:[s.jsx(ir,{className:"w-8 h-8 text-gray-400 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"Sin demos generadas"}),s.jsx(Ne,{onClick:()=>ur(!0),children:"Generar Primera Demo"})]})]}),gt==="instagram"&&zr((yc=V.social_media)==null?void 0:yc.instagram)&&s.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[s.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-purple-600 text-white p-5 rounded-xl",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Cc,{className:"w-8 h-8"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold",children:"Instagram Detectado"}),s.jsx("p",{className:"text-pink-100 text-xs text-opacity-80",children:"Perfil de negocio"})]})]})}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Enlace oficial"}),s.jsxs("a",{href:zr(V.social_media.instagram),target:"_blank",rel:"noreferrer",className:"text-pink-600 font-bold flex items-center gap-1 hover:underline",children:["Ver Perfil ",s.jsx(Iu,{className:"w-3 h-3"})]})]})]}),gt==="facebook"&&zr((D=V.social_media)==null?void 0:D.facebook)&&s.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[s.jsx("div",{className:"bg-blue-600 text-white p-5 rounded-xl",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(um,{className:"w-8 h-8"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold",children:"Facebook Detectado"}),s.jsx("p",{className:"text-blue-100 text-xs text-opacity-80",children:"Pgina de empresa"})]})]})}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Enlace oficial"}),s.jsxs("a",{href:zr(V.social_media.facebook),target:"_blank",rel:"noreferrer",className:"text-blue-600 font-bold flex items-center gap-1 hover:underline",children:["Ver Pgina ",s.jsx(Iu,{className:"w-3 h-3"})]})]})]})]}),s.jsx("div",{className:gt==="summary"||gt==="analysis"||gt==="audit"?"lg:col-span-1":"hidden",children:s.jsxs("div",{className:"space-y-6 animate-fadeIn sticky top-0",children:[s.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 p-5 rounded-2xl text-white shadow-lg relative overflow-hidden",children:[s.jsx("div",{className:"absolute -right-4 -bottom-4 opacity-10",children:s.jsx(dm,{className:"w-24 h-24"})}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("h4",{className:"font-bold flex items-center gap-2 mb-1",children:[s.jsx(ir,{className:"w-4 h-4"})," Inteligencia de Venta"]}),s.jsx("p",{className:"text-indigo-100 text-xs",children:"Anlisis personalizado con IA"})]})]}),V.sales_intelligence?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-orange-200 dark:border-orange-700 shadow-sm",children:[s.jsx("span",{className:"text-[10px] font-bold text-orange-600 uppercase tracking-widest",children:"Punto de Dolor"}),s.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-300 mt-2 font-medium",children:V.sales_intelligence.primary_pain_point})]}),s.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/10 p-4 rounded-xl border border-indigo-100 dark:border-indigo-800",children:[s.jsx("span",{className:"text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-widest",children:"Estrategia Recomendada"}),s.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white mt-2",children:V.sales_intelligence.recommended_strategy}),s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:V.sales_intelligence.suggested_product})]}),s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-4 rounded-xl border border-green-200 dark:border-green-800",children:[s.jsx("span",{className:"text-[10px] font-bold text-green-600 dark:text-green-400 uppercase tracking-widest",children:"Primer Contacto"}),s.jsxs("p",{className:"text-xs text-gray-700 dark:text-gray-300 mt-2 italic leading-relaxed",children:['"',V.sales_intelligence.opening_message,'"']}),s.jsxs(Ne,{size:"xs",className:"mt-3 bg-green-600 hover:bg-green-700 text-white w-full font-bold",onClick:()=>{navigator.clipboard.writeText(V.sales_intelligence.opening_message),je.success("Mensaje copiado")},children:[s.jsx(kl,{className:"w-3 h-3 mr-1"}),"Copiar Mensaje"]})]}),(V.sales_intelligence.estimated_value||V.sales_intelligence.close_probability)&&s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[V.sales_intelligence.estimated_value&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg border border-gray-200 dark:border-gray-700 text-center",children:[s.jsx("div",{className:"text-[10px] text-gray-500 mb-1",children:"Valor"}),s.jsxs("div",{className:"font-bold text-sm text-green-600",children:["",V.sales_intelligence.estimated_value.toLocaleString()]})]}),V.sales_intelligence.close_probability&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg border border-gray-200 dark:border-gray-700 text-center",children:[s.jsx("div",{className:"text-[10px] text-gray-500 mb-1",children:"Prob. Cierre"}),s.jsxs("div",{className:"font-bold text-sm text-blue-600",children:[(V.sales_intelligence.close_probability*100).toFixed(0),"%"]})]})]})]}):V.ai_analysis?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm",children:[s.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Oportunidad"}),s.jsxs("p",{className:"text-xs text-gray-700 dark:text-gray-300 mt-2 font-medium italic",children:['"',(I=(T=(j=V.ai_analysis.opportunity_map)==null?void 0:j.pain_points)==null?void 0:T[0])==null?void 0:I.substring(0,150),'..."']})]}),s.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/10 p-4 rounded-xl border border-indigo-100 dark:border-indigo-800",children:[s.jsx("span",{className:"text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-widest",children:"Estrategia"}),s.jsxs("p",{className:"text-xs text-gray-700 dark:text-gray-300 mt-2 leading-relaxed",children:[(U=V.ai_analysis.approach_strategy)==null?void 0:U.substring(0,200),"..."]})]})]}):s.jsxs("div",{className:"text-center py-10 bg-gray-50 dark:bg-gray-800/50 rounded-2xl border-2 border-dashed border-gray-200 dark:border-gray-700",children:[s.jsx(cm,{className:"w-10 h-10 text-gray-300 mx-auto mb-3"}),s.jsx("p",{className:"text-xs text-gray-400 px-4 leading-relaxed mb-4",children:"Ejecuta un anlisis profundo para obtener insights de venta"}),s.jsx(Ne,{size:"sm",className:"bg-indigo-600 hover:bg-indigo-700 text-white",onClick:()=>ma(V.id),disabled:Gt===V.id,children:Gt===V.id?s.jsxs(s.Fragment,{children:[s.jsx(Lt,{className:"w-4 h-4 mr-2 animate-spin"})," Analizando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ir,{className:"w-4 h-4 mr-2"})," Anlisis Profundo"]})})]})]})})]}),s.jsxs("div",{className:"mt-8 pt-4 border-t border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[s.jsxs(Ne,{variant:"ghost",onClick:()=>window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(V.address)}`,"_blank"),className:"text-gray-500 hover:text-orange-600",children:[s.jsx(Lc,{className:"w-4 h-4 mr-2"})," Google Maps"]}),s.jsx(Ne,{onClick:()=>br(!1),className:"bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 px-8 rounded-xl font-bold",children:"Cerrar Detalle"})]})]})]})}),s.jsx(Dr,{isOpen:Ia,onClose:()=>ur(!1),title:"Configurar Demo Web",size:"lg",children:V&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo de Demo"}),s.jsxs(Ne,{size:"sm",variant:"ghost",onClick:()=>Fa(!0),className:"text-indigo-600 hover:text-indigo-700",children:[s.jsx(xr,{className:"w-4 h-4 mr-1"})," Nuevo Tipo"]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-[220px] overflow-y-auto p-1",children:Bo.map(M=>s.jsxs("div",{className:"relative group",children:[s.jsxs("button",{onClick:()=>Ql(M.id),className:`w-full p-3 rounded-lg border-2 text-left transition-all h-full dark:bg-gray-800 ${Bs===M.id?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 shadow-sm":"border-gray-200 dark:border-gray-700 hover:border-indigo-200 dark:hover:border-indigo-700"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("div",{className:`${Bs===M.id?"text-indigo-600":"text-gray-400"}`,children:Kr(M.icon,"w-5 h-5")}),s.jsx("span",{className:"font-bold text-sm text-gray-900 dark:text-white",children:M.label})]}),s.jsx("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 line-clamp-2 leading-tight",children:M.desc})]}),M.isCustom&&s.jsx("button",{onClick:H=>{H.stopPropagation(),Bi(M.id)},className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(Rr,{className:"w-3 h-3"})})]},M.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:Bs==="custom"?"Escribe tu prompt":"Instrucciones adicionales (opcional)"}),s.jsx("textarea",{value:Ri,onChange:M=>ec(M.target.value),placeholder:Bs==="custom"?"Describe exactamente cmo quieres la landing page...":"Aade instrucciones especficas para mejorar la demo...",className:"w-full px-3 py-2 border rounded-lg text-sm h-24 resize-none bg-white dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:placeholder-gray-500"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Imgenes para la Demo"}),s.jsxs(Ne,{size:"sm",variant:"outline",onClick:Ui,disabled:ds==="images",children:[ds==="images"?s.jsx(Lt,{className:"w-4 h-4 animate-spin mr-1"}):s.jsx(bu,{className:"w-4 h-4 mr-1"}),Re.length>0?"Recargar":"Ver Imgenes"]})]}),Re.length>0?s.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 gap-2 max-h-[180px] overflow-y-auto p-1 border rounded-lg dark:border-gray-700",children:Re.map((M,H)=>s.jsxs("div",{className:"relative group aspect-square",children:[s.jsx("img",{src:M.url,alt:M.label,className:"w-full h-full object-cover rounded-md border",loading:"lazy",onError:ne=>{console.log("Error loading image:",M.url),ne.target.src="https://via.placeholder.com/200x200?text=Error+Loading&bg=f3f4f6&fg=9ca3af"}}),s.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-black/60 text-white text-[8px] p-0.5 rounded-b-md opacity-0 group-hover:opacity-100 transition-opacity truncate text-center",children:M.label}),s.jsx("span",{className:`absolute top-0.5 right-0.5 text-[8px] px-1 rounded shadow-sm ${M.source==="Google Places"?"bg-blue-500 text-white":"bg-green-500 text-white"}`,children:M.source==="Google Places"?"":""})]},H))}):s.jsxs("div",{className:"text-center py-6 bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-dashed dark:border-gray-700",children:[s.jsx(bu,{className:"w-8 h-8 text-gray-300 dark:text-gray-600 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:'Haz clic en "Ver Imgenes" para previsualizar'})]})]}),ds&&s.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 p-4 rounded-xl border border-indigo-100 dark:border-indigo-800",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Lt,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400 animate-spin"}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-indigo-900 dark:text-indigo-200",children:[ds==="analyzing"&&" Analizando datos del prospecto...",ds==="images"&&" Preparando imgenes de alta calidad...",ds==="generating"&&" Generando landing page espectacular...",ds==="done"&&" Demo lista!"]}),s.jsx("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 mt-1",children:"Esto puede tardar unos segundos"})]})]})}),s.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsx(Ne,{variant:"outline",className:"flex-1",onClick:()=>ur(!1),children:"Cancelar"}),s.jsx(Ne,{className:"flex-1 bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700",onClick:()=>Ya(V.id),disabled:He===V.id,children:He===V.id?s.jsxs(s.Fragment,{children:[s.jsx(Lt,{className:"w-4 h-4 animate-spin mr-2"})," Generando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ir,{className:"w-4 h-4 mr-2"})," Generar Demo"]})})]})]})}),s.jsx(Dr,{isOpen:nc,onClose:()=>Fa(!1),title:"Nuevo Tipo de Demo",size:"sm",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre del Tipo"}),s.jsx("input",{type:"text",className:"w-full px-3 py-2 border rounded-lg text-sm bg-white dark:bg-gray-800 dark:border-gray-700 dark:text-white",placeholder:"Ej: Odontologa, Gimnasio...",value:Tr.label,onChange:M=>Ws({...Tr,label:M.target.value,id:M.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Icono Visual"}),s.jsx("div",{className:"grid grid-cols-6 gap-2",children:[{n:"Zap",i:fr},{n:"Utensils",i:Mh},{n:"Store",i:Xn},{n:"Briefcase",i:Po},{n:"Sparkles",i:ir},{n:"MessageSquare",i:Wr},{n:"ShoppingBag",i:Gp},{n:"Coffee",i:Bp},{n:"Hotel",i:Vp},{n:"Dumbbell",i:Hp},{n:"Scissors",i:Yp},{n:"Stethoscope",i:Zp}].map(M=>s.jsx("button",{onClick:()=>Ws({...Tr,icon:M.n}),className:`p-2 flex items-center justify-center rounded-lg border-2 transition-all ${Tr.icon===M.n?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-100 dark:border-gray-700 hover:border-indigo-200 dark:hover:border-indigo-700"}`,title:M.n,children:s.jsx(M.i,{className:`w-5 h-5 ${Tr.icon===M.n?"text-indigo-600 dark:text-indigo-400":"text-gray-400"}`})},M.n))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Descripcin corta"}),s.jsx("input",{type:"text",className:"w-full px-3 py-2 border rounded-lg text-sm bg-white dark:bg-gray-800 dark:border-gray-700 dark:text-white",placeholder:"Breve descripcin del estilo...",value:Tr.desc,onChange:M=>Ws({...Tr,desc:M.target.value})})]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsx(Ne,{className:"flex-1",onClick:Ha,children:"Aadir tipo"}),s.jsx(Ne,{variant:"outline",onClick:()=>Fa(!1),children:"Cancelar"})]})]})}),s.jsx(Dr,{isOpen:un,onClose:()=>Pr(!1),title:"Estrategias de Venta IA",size:"xl",children:s.jsx(Pv,{API_URL:Y,token:ke,onClose:()=>Pr(!1)})}),s.jsx(Dr,{isOpen:w,onClose:()=>{b(!1),Va()},title:"Gestionar Estrategias IA",size:"xl",children:s.jsx(Pv,{API_URL:Y,token:ke,onClose:()=>{b(!1),Va()}})}),s.jsx(Dr,{isOpen:Se,onClose:()=>dr(!1),title:"Configuracin Avanzada",size:"xl",children:s.jsx(yP,{API_URL:Y,token:ke,onClose:()=>dr(!1)})}),s.jsx(Dr,{isOpen:vt,onClose:()=>se(!1),title:"Gestionar Tipos de Negocio",size:"xl",children:s.jsx(vP,{API_URL:Y,token:ke,onClose:()=>se(!1)})}),s.jsx(Yl,{isOpen:tr.isOpen,onClose:()=>wr(M=>({...M,isOpen:!1})),onConfirm:tr.onConfirm,title:tr.title,message:tr.message,type:tr.variant||"danger"})]})]}):s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-xl p-8 text-center",children:[s.jsx(xi,{className:"w-16 h-16 mx-auto text-red-500 mb-4"}),s.jsx("h3",{className:"text-xl font-bold text-red-700 dark:text-red-300 mb-2",children:"Acceso Restringido"}),s.jsx("p",{className:"text-red-600 dark:text-red-400",children:(t==null?void 0:t.error)||"No tienes acceso al mdulo Lead Hunter. Contacta con el administrador."}),(t==null?void 0:t.error)==="Usuario no encontrado"&&s.jsx("p",{className:"text-sm mt-4 text-gray-500",children:"Intenta cerrar sesin y volver a entrar."})]})},the=({activeSection:e})=>{const[t,r]=E.useState([]),[n,a]=E.useState(!0),[i,o]=E.useState("kanban"),[c,d]=E.useState(null),[u,f]=E.useState(null),[m,p]=E.useState("all"),[x,v]=E.useState(""),[y,_]=E.useState([]),[w,b]=E.useState(""),[N,S]=E.useState(null),[C,O]=E.useState(null),[A,z]=E.useState(!1),[$,W]=E.useState(!1),[F,G]=E.useState(null),[ee,K]=E.useState({isOpen:!1,title:"",message:"",onConfirm:null}),[oe,Z]=E.useState(!1),[pe,Q]=E.useState(!1),[ce,le]=E.useState([]),[B,X]=E.useState([]),[ae,fe]=E.useState([]),re=Ht();E.useEffect(()=>{ge()},[]);const ge=async()=>{try{const de=await fetch(`${Y}/settings/lead-statuses`,{headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}});if(de.ok){const Ie=await de.json();fe(Ie)}}catch(de){console.error("Error fetching statuses:",de)}};E.useEffect(()=>{A&&fetch(`${Y}/proposal-templates`,{headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}}).then(de=>de.json()).then(de=>X(de)).catch(de=>console.error("Error loading templates:",de))},[A]);const[Oe,me]=E.useState({title:"",price:"",description:""}),[_e,$e]=E.useState({name:"",email:"",phone:"",businessName:"",message:""}),[Pe,Le]=E.useState(null),[Ge,et]=E.useState([]),[ue,Ae]=E.useState(""),[lt,Ke]=E.useState([]);E.useEffect(()=>{const de=He=>{var mt;(He.ctrlKey||He.metaKey)&&He.key==="k"&&(He.preventDefault(),(mt=document.querySelector('input[placeholder*="Buscar"]'))==null||mt.focus()),(He.ctrlKey||He.metaKey)&&He.key==="n"&&(He.preventDefault(),Z(!0)),He.key==="Escape"&&(d(null),Z(!1),z(!1))};window.addEventListener("keydown",de);const Ie=He=>{const{action:mt}=He.detail;mt==="new_lead"?Z(!0):mt==="new_meeting"&&re.info("Prximamente: Crear reunin")};return window.addEventListener("crm_quick_action",Ie),()=>{window.removeEventListener("keydown",de),window.removeEventListener("crm_quick_action",Ie)}},[]),E.useEffect(()=>{e==="leads"&&(st(),V())},[e]);const V=async()=>{try{const de=localStorage.getItem("crm_token"),Ie=await fetch(`${Y}/leads/stats`,{headers:{Authorization:`Bearer ${de}`}});if(Ie.ok){const He=await Ie.json();O(He)}}catch(de){console.error("Error fetching lead stats:",de)}},st=async()=>{try{const de=localStorage.getItem("crm_token"),Ie=await fetch(`${Y}/leads`,{headers:{Authorization:`Bearer ${de}`}});if(!Ie.ok)throw new Error("Error al cargar leads");const He=await Ie.json();r(He)}catch(de){b("No se pudo conectar con el servidor de leads"),console.error(de),re.error("No se pudo conectar con el servidor de leads")}finally{a(!1)}},Ut=async de=>{try{const Ie=localStorage.getItem("crm_token"),He=await fetch(`${Y}/proposals/lead/${de}`,{headers:{Authorization:`Bearer ${Ie}`}});if(He.ok){const mt=await He.json();if(mt.length>0){const Ia=mt[0];Le(Ia);const ur=await fetch(`${Y}/proposals/${Ia.id}/comments`,{headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}});ur.ok&&et(await ur.json())}else Le(null),et([])}}catch(Ie){console.error("Error fetching proposal details:",Ie),re.error("Error al cargar detalles de la propuesta")}};E.useEffect(()=>{c?(Ut(c.id),Ke([{id:1,type:"created",description:"Lead creado",date:c.created_at,icon:"plus"},{id:2,type:"status",description:`Estado cambiado a ${$a(c.status)}`,date:c.created_at,icon:"refresh"}])):(Le(null),et([]),Ke([]))},[c]);const br=async de=>{if(de.preventDefault(),!(!ue.trim()||!Pe))try{if((await fetch(`${Y}/proposals/${Pe.id}/comments`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`},body:JSON.stringify({author:"Equipo NoahPro",authorType:"internal",comment:ue})})).ok){Ae("");const He=await fetch(`${Y}/proposals/${Pe.id}/comments`,{headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}});He.ok&&et(await He.json()),re.success("Comentario enviado correctamente")}else throw new Error("Error al enviar comentario")}catch(Ie){console.error("Error adding comment:",Ie),re.error("Error al enviar comentario")}},vt=async(de,Ie)=>{try{if(!(await fetch(`${Y}/leads/${de}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`},body:JSON.stringify({status:Ie})})).ok)throw new Error("Error al actualizar estado");r(t.map(mt=>mt.id===de?{...mt,status:Ie}:mt)),c&&c.id===de&&d({...c,status:Ie}),re.success("Estado del lead actualizado correctamente")}catch(He){console.error("Error updating status:",He),re.error("Error al actualizar el estado")}},se=async de=>{de.preventDefault();try{const Ie=await fetch(`${Y}/leads`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`},body:JSON.stringify({..._e,source:"manual"})});if(Ie.ok)re.success("Lead creado correctamente"),Z(!1),$e({name:"",email:"",phone:"",businessName:"",message:""}),st();else{const He=await Ie.json();throw new Error(He.error||"Error al crear lead")}}catch(Ie){re.error(Ie.message),console.error(Ie)}},Se=async de=>{de.preventDefault(),c&&(G({leadId:c.id,title:Oe.title,description:Oe.description,totalPrice:parseFloat(Oe.price)}),z(!1),W(!0))},dr=async()=>{if(F)try{if(!(await fetch(`${Y}/proposals`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("crm_token")}`},body:JSON.stringify(F)})).ok)throw new Error("Error al crear propuesta");re.success("Propuesta creada y enviada al lead"),W(!1),G(null),me({title:"",price:"",description:""}),vt(c.id,"proposal_sent"),Ut(c.id)}catch(de){re.error("Error al crear la propuesta"),console.error(de)}},un=async()=>{Pe&&K({isOpen:!0,title:"Eliminar Propuesta",message:"Ests seguro de eliminar esta propuesta? Esta accin no se puede deshacer.",onConfirm:async()=>{try{if(!(await fetch(`${Y}/proposals/${Pe.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("crm_token")}`}})).ok)throw new Error("Error al eliminar propuesta");re.success("Propuesta eliminada correctamente"),Le(null),et([]),Ut(c.id)}catch(de){re.error("Error al eliminar la propuesta"),console.error(de)}}})},Pr=de=>{r(Ie=>Ie.filter(He=>He.id!==de)),le(Ie=>Ie.filter(He=>He!==de)),st()},ls=de=>{le(Ie=>Ie.includes(de)?Ie.filter(He=>He!==de):[...Ie,de])},cs=()=>{le([])},gt=async(de,Ie)=>{const He=localStorage.getItem("crm_token");try{if((await fetch(`${Y}/leads/bulk/${de}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${He}`},body:JSON.stringify({leadIds:ce,value:Ie})})).ok)re.success(`Accin aplicada a ${ce.length} leads`),cs(),st();else throw new Error("Error en accin masiva")}catch(mt){console.error("Bulk action error:",mt),re.error("Error al realizar la accin")}},$a=de=>({new:"Nuevo",contacted:"Contactado",qualified:"Cualificado",proposal_sent:"Propuesta Enviada",won:"Ganado",lost:"Perdido"})[de]||de,tr=t.filter(de=>{if(m!=="all"&&de.status!==m)return!1;if(x){const Ie=x.toLowerCase();if(!(de.name.toLowerCase().includes(Ie)||de.email&&de.email.toLowerCase().includes(Ie)||de.business_name&&de.business_name.toLowerCase().includes(Ie)))return!1}return y.length>0,!0}),wr={new:tr.filter(de=>de.status==="new"),contacted:tr.filter(de=>de.status==="contacted"),qualified:tr.filter(de=>de.status==="qualified"),proposal_sent:tr.filter(de=>de.status==="proposal_sent"),won:tr.filter(de=>de.status==="won"),lost:tr.filter(de=>de.status==="lost")},Gt=t.length,Ai=[{label:"Total Leads",value:Gt,icon:s.jsx(ts,{className:"w-6 h-6"}),progress:100,subtitle:C?`${C.last_30_days} ltimos 30 das`:""},{label:"Nuevos",value:wr.new.length,icon:s.jsx(To,{className:"w-6 h-6"}),progress:Gt?wr.new.length/Gt*100:0,subtitle:C?`${C.new||0} en total`:""},{label:"En Proceso",value:wr.contacted.length+wr.qualified.length,icon:s.jsx(fr,{className:"w-6 h-6"}),progress:Gt?(wr.contacted.length+wr.qualified.length)/Gt*100:0,subtitle:C?`${(C.contacted||0)+(C.qualified||0)} en total`:""},{label:"Ganados",value:wr.won.length,icon:s.jsx(Rt,{className:"w-6 h-6"}),progress:Gt?wr.won.length/Gt*100:0,subtitle:C?`${C.won||0} en total`:""}];return e==="home"?s.jsx(oH,{}):e==="chat"?s.jsx(k9,{}):e==="analytics"?s.jsx(b8,{}):e==="proposals"?s.jsx(lH,{}):e==="invoices"?s.jsx(Eue,{}):e==="email_templates"?s.jsx(cH,{}):e==="settings"?s.jsx(P8,{}):e==="commercials"?s.jsx(Pue,{}):e==="clients"?u?s.jsx(Q3,{clientId:u,onBack:()=>f(null)}):s.jsx(X3,{onClientSelect:f}):e==="hunter"?s.jsx(cM,{}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx("span",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg text-orange-600 dark:text-orange-400",children:s.jsx(hf,{className:"w-5 h-5"})}),"Pipeline de Ventas"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 ml-11",children:"Gestiona tus leads y oportunidades"})]})}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:Ai.map((de,Ie)=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:de.label}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:de.value})]}),s.jsx("div",{className:"p-2 bg-orange-50 dark:bg-orange-900/20 rounded-lg text-orange-600 dark:text-orange-400 text-xl",children:de.icon})]}),s.jsx("div",{className:"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-1.5 mt-4",children:s.jsx("div",{className:"h-1.5 rounded-full bg-gradient-to-r from-orange-500 to-red-600 transition-all duration-500",style:{width:`${de.progress}%`}})}),s.jsx("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:de.subtitle})]},Ie))}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:[s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:" Buscar por nombre, email o empresa... (K)",className:"w-full pl-4 pr-10 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm focus:ring-2 focus:ring-orange-500 dark:text-white",value:x,onChange:de=>v(de.target.value)}),x&&s.jsx("button",{onClick:()=>v(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:""})]})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("button",{onClick:()=>{o("kanban"),Q(!1)},className:`px-4 py-2.5 rounded-lg text-sm font-medium transition-all ${i==="kanban"&&!pe?"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[s.jsx(HL,{className:"w-4 h-4 inline mr-1.5"}),"Kanban"]}),s.jsxs("button",{onClick:()=>{o("list"),Q(!1)},className:`px-4 py-2.5 rounded-lg text-sm font-medium transition-all ${i==="list"&&!pe?"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[s.jsx(gv,{className:"w-4 h-4 inline mr-1.5"}),"Lista"]}),s.jsxs("button",{onClick:()=>Q(!0),className:`px-4 py-2.5 rounded-lg text-sm font-medium transition-all ${pe?"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[s.jsx(Al,{className:"w-4 h-4 inline mr-1.5"}),"Calendar"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(Ne,{variant:"secondary",onClick:()=>{const de=`${Y}/export/leads/excel?status=${m}&search=${x}`;window.open(de,"_blank")},size:"sm",children:[s.jsx(n4,{className:"w-4 h-4 inline mr-1.5"}),"Exportar"]}),s.jsx(Ne,{variant:"primary",onClick:()=>Z(!0),size:"sm",children:"+ Nuevo Lead"})]})]}),x&&s.jsx("div",{className:"flex flex-wrap gap-2 mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1.5 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 rounded-full text-sm",children:[s.jsxs("span",{children:['Bsqueda: "',x,'"']}),s.jsx("button",{onClick:()=>v(""),className:"hover:text-blue-900",children:""})]})})]}),i==="kanban"&&!pe&&s.jsx(uH,{leads:tr,onLeadClick:d,onStatusChange:vt,statuses:ae,onDeleteLead:Pr,selectedLeads:ce,onToggleSelect:ls}),i==="list"&&!pe&&s.jsx(v5,{leads:tr,onLeadClick:d,onStatusChange:vt,onDeleteLead:Pr,selectedLeads:ce,onToggleSelect:ls}),pe&&s.jsx(Qde,{leads:tr,onLeadClick:d,statuses:ae}),c&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden shadow-2xl",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-600 p-6",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:c.name}),s.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg px-3 py-2 flex items-center gap-2",children:[s.jsx(Tt,{className:"w-4 h-4 text-white"}),s.jsx("span",{className:"text-white text-sm",children:c.email})]}),c.phone&&s.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg px-3 py-2 flex items-center gap-2",children:[s.jsx(Kn,{className:"w-4 h-4 text-white"}),s.jsx("span",{className:"text-white text-sm",children:c.phone})]}),c.business_name&&s.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg px-3 py-2 flex items-center gap-2",children:[s.jsx(nd,{className:"w-4 h-4 text-white"}),s.jsx("span",{className:"text-white text-sm",children:c.business_name})]})]})]}),s.jsx("button",{onClick:()=>d(null),className:"p-2 hover:bg-white/20 rounded-lg transition-colors ml-4",children:s.jsx(Rr,{className:"w-6 h-6 text-white"})})]})}),s.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:s.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[s.jsxs("div",{className:"col-span-2 space-y-6",children:[c.message&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-5 shadow-sm",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Descripcin"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed whitespace-pre-wrap",children:c.message})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-5 shadow-sm",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Propuesta Comercial"}),!Pe&&s.jsx(Ne,{size:"sm",onClick:()=>z(!0),children:"+ Nueva Propuesta"})]}),Pe?s.jsx("div",{children:s.jsxs("div",{className:"flex justify-between items-start mb-4 pb-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-lg",children:Pe.title}),s.jsx("p",{className:"text-3xl font-bold text-orange-600 mt-2",children:parseFloat(Pe.total_price).toLocaleString("es-ES",{style:"currency",currency:"EUR"})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("a",{href:`/proposal/${Pe.token}`,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 rounded-lg hover:bg-orange-100 dark:hover:bg-orange-900/30 transition-colors text-sm font-medium",children:"Ver Pblica "}),s.jsx("button",{onClick:un,className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Eliminar propuesta",children:s.jsx(Ar,{className:"w-4 h-4"})})]})]})}):s.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-900/50 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-700",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4 font-medium",children:"No hay propuesta para este lead"}),s.jsx(Ne,{size:"sm",onClick:()=>z(!0),children:"+ Crear Propuesta"})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-5 shadow-sm",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Facturas"}),s.jsx(bue,{leadId:c.id,leadName:c.name})]})]}),s.jsxs("div",{className:"col-span-1 space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-5 shadow-sm",children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Estado del Lead"}),s.jsxs("select",{value:c.status,onChange:de=>vt(c.id,de.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-medium focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all",children:[s.jsx("option",{value:"new",children:"Nuevo"}),s.jsx("option",{value:"contacted",children:"Contactado"}),s.jsx("option",{value:"qualified",children:"Cualificado"}),s.jsx("option",{value:"proposal_sent",children:"Propuesta Enviada"}),s.jsx("option",{value:"won",children:"Ganado"}),s.jsx("option",{value:"lost",children:"Perdido"})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-5 shadow-sm",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Actividad Reciente"}),s.jsx("div",{className:"space-y-4",children:lt.map((de,Ie)=>s.jsxs("div",{className:"relative",children:[Ie!==lt.length-1&&s.jsx("div",{className:"absolute left-4 top-10 bottom-0 w-px bg-gray-200 dark:bg-gray-700"}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsxs("div",{className:"w-8 h-8 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center flex-shrink-0 relative z-10",children:[de.icon==="plus"&&s.jsx(xr,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),de.icon==="refresh"&&s.jsx(Lt,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),de.icon==="message"&&s.jsx(Wr,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"})]}),s.jsxs("div",{className:"flex-1 pt-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white leading-snug",children:de.description}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:new Date(de.date).toLocaleDateString("es-ES",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})]})]})]},de.id))})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-5 shadow-sm",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Comentarios"}),s.jsx("div",{className:"space-y-3 mb-4 max-h-60 overflow-y-auto",children:Ge.length===0?s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic text-center py-4",children:"No hay comentarios"}):Ge.map(de=>s.jsx("div",{className:`flex ${de.author_type==="internal"?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-[90%] rounded-lg p-3 ${de.author_type==="internal"?"bg-orange-50 dark:bg-orange-900/30 text-orange-900 dark:text-orange-100":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white"}`,children:[s.jsx("div",{className:"text-xs font-medium opacity-75 mb-1",children:de.author}),s.jsx("div",{className:"text-sm",children:de.comment})]})},de.id))}),s.jsxs("form",{onSubmit:br,className:"flex gap-2",children:[s.jsx("input",{type:"text",value:ue,onChange:de=>Ae(de.target.value),placeholder:"Escribir comentario...",className:"flex-1 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),s.jsx(Ne,{type:"submit",size:"sm",disabled:!ue.trim(),children:"Enviar"})]})]})]})]})})]})}),oe&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full p-6 shadow-2xl",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Nuevo Lead Manual"}),s.jsxs("form",{onSubmit:se,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre Completo"}),s.jsx("input",{type:"text",required:!0,className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all",value:_e.name,onChange:de=>$e({..._e,name:de.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),s.jsx("input",{type:"email",required:!0,className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all",value:_e.email,onChange:de=>$e({..._e,email:de.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Telfono"}),s.jsx("input",{type:"tel",className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all",value:_e.phone,onChange:de=>$e({..._e,phone:de.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre del Negocio"}),s.jsx("input",{type:"text",className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all",value:_e.businessName,onChange:de=>$e({..._e,businessName:de.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notas Iniciales"}),s.jsx("textarea",{className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all",rows:"3",value:_e.message,onChange:de=>$e({..._e,message:de.target.value})})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx(Ne,{type:"button",variant:"secondary",onClick:()=>Z(!1),children:"Cancelar"}),s.jsx(Ne,{type:"submit",children:"Crear Lead"})]})]})]})}),A&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full p-6 shadow-2xl",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Nueva Propuesta"}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cargar Plantilla"}),s.jsxs("select",{className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all",onChange:de=>{const Ie=de.target.value;if(!Ie)return;const He=B.find(mt=>mt.id===parseInt(Ie));He&&me({title:He.content_json.title,price:He.content_json.totalPrice,description:He.content_json.description||He.description})},children:[s.jsx("option",{value:"",children:"-- Seleccionar Plantilla --"}),B.map(de=>s.jsx("option",{value:de.id,children:de.name},de.id))]})]}),s.jsxs("form",{onSubmit:Se,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Ttulo"}),s.jsx("input",{type:"text",required:!0,className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all",value:Oe.title,onChange:de=>me({...Oe,title:de.target.value}),placeholder:"Ej: Propuesta TPV Completo"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Precio Total ()"}),s.jsx("input",{type:"number",required:!0,className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all",value:Oe.price,onChange:de=>me({...Oe,price:de.target.value}),placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Descripcin"}),s.jsx("textarea",{className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition-all",rows:"3",value:Oe.description,onChange:de=>me({...Oe,description:de.target.value}),placeholder:"Detalles de la propuesta..."})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx(Ne,{type:"button",variant:"secondary",onClick:()=>z(!1),children:"Cancelar"}),s.jsx(Ne,{type:"submit",children:"Crear Propuesta"})]})]})]})}),$&&F&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-lg w-full p-6 shadow-2xl",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Confirmar y Enviar Propuesta"}),s.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 mb-6 border border-orange-200 dark:border-orange-800",children:s.jsxs("p",{className:"text-sm text-orange-800 dark:text-orange-200 mb-2",children:["Esta propuesta se enviar al lead: ",s.jsx("strong",{children:c==null?void 0:c.name})]})}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4",children:[s.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Ttulo"}),s.jsx("p",{className:"text-gray-900 dark:text-white font-semibold mt-1",children:F.title})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4",children:[s.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Precio Total"}),s.jsx("p",{className:"text-2xl font-bold text-orange-600 mt-1",children:F.totalPrice.toLocaleString("es-ES",{style:"currency",currency:"EUR"})})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4",children:[s.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Descripcin"}),s.jsx("p",{className:"text-gray-900 dark:text-white mt-1 whitespace-pre-wrap text-sm",children:F.description||"Sin descripcin"})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(Ne,{variant:"secondary",onClick:()=>{W(!1),G(null),z(!0)},className:"flex-1",children:"Editar"}),s.jsx(Ne,{onClick:dr,className:"flex-1",children:"Confirmar y Enviar"})]})]})}),s.jsx(Tue,{selectedCount:ce.length,onUpdateStatus:de=>gt("update-status",de),onAddTag:()=>re.info("Funcin de tags masivos prximamente"),onDelete:()=>gt("delete"),onCancel:cs}),s.jsx(Yl,{isOpen:ee.isOpen,onClose:()=>K({...ee,isOpen:!1}),onConfirm:ee.onConfirm,title:ee.title,message:ee.message,type:"danger"})]})},rhe=()=>{const[e,t]=E.useState([]),[r,n]=E.useState(0),[a,i]=E.useState(!1);E.useEffect(()=>{o(),c();const x=()=>{o(),c()};return window.addEventListener("crm_notification_update",x),()=>{window.removeEventListener("crm_notification_update",x)}},[]);const o=async()=>{try{const x=await fetch(`${Y}/notifications?limit=10`);if(x.ok){const v=await x.json();t(v)}}catch(x){console.error("Error fetching notifications:",x)}},c=async()=>{try{const x=await fetch(`${Y}/notifications/unread-count`);if(x.ok){const v=await x.json();n(v.count)}}catch(x){console.error("Error fetching unread count:",x)}},d=async x=>{try{await fetch(`${Y}/notifications/${x}/read`,{method:"PUT"}),t(v=>v.map(y=>y.id===x?{...y,is_read:!0}:y)),n(v=>Math.max(0,v-1))}catch(v){console.error("Error marking as read:",v)}},u=async()=>{try{await fetch(`${Y}/notifications/mark-all-read`,{method:"PUT"}),t(x=>x.map(v=>({...v,is_read:!0}))),n(0)}catch(x){console.error("Error marking all as read:",x)}},f=x=>{d(x.id),x.link&&(window.location.href=x.link),i(!1)},m=x=>({new_lead:"",proposal_viewed:"",proposal_accepted:"",new_comment:"",chat_message:""})[x]||"",p=x=>{const v=new Date(x),_=new Date-v,w=Math.floor(_/6e4),b=Math.floor(_/36e5),N=Math.floor(_/864e5);return w<1?"Ahora":w<60?`Hace ${w}m`:b<24?`Hace ${b}h`:`Hace ${N}d`};return s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>i(!a),className:"relative p-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),r>0&&s.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full",children:r>99?"99+":r})]}),a&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>i(!1)}),s.jsxs("div",{className:"fixed md:absolute left-2 right-2 md:left-auto md:right-0 top-16 md:top-auto md:mt-2 w-auto md:w-96 bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 z-50 max-h-[70vh] md:max-h-[500px] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Notificaciones"}),r>0&&s.jsx("button",{onClick:u,className:"text-xs text-primary-600 hover:text-primary-700",children:"Marcar todas como ledas"})]}),s.jsx("div",{className:"overflow-y-auto flex-1",children:e.length===0?s.jsx("div",{className:"p-8 text-center text-gray-500",children:"No hay notificaciones"}):e.map(x=>s.jsx("div",{onClick:()=>f(x),className:`p-4 border-b border-gray-100 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors ${x.is_read?"":"bg-primary-50 dark:bg-primary-900/10"}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("span",{className:"text-2xl flex-shrink-0",children:m(x.type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:`text-sm font-medium text-gray-900 dark:text-white ${x.is_read?"":"font-bold"}`,children:x.title}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:x.message}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:p(x.created_at)})]}),!x.is_read&&s.jsx("span",{className:"w-2 h-2 bg-primary-600 rounded-full flex-shrink-0 mt-2"})]})},x.id))})]})]})]})},nhe=()=>{const[e,t]=E.useState(!1),[r,n]=E.useState(!1),[a,i]=E.useState([]),[o,c]=E.useState(null),[d,u]=E.useState([]),[f,m]=E.useState(""),[p,x]=E.useState(0),v=E.useRef(null),y=ZE();E.useEffect(()=>{if(y){const N=y.subscribe("admin_notifications");return N.bind("new_chat_message",S=>{_(),o&&o.session_id===S.sessionId?u(C=>[...C,{senderType:"visitor",message:S.message,created_at:S.timestamp||new Date().toISOString()}]):x(C=>C+1)}),()=>{N.unbind_all(),N.unsubscribe()}}},[y,o]),E.useEffect(()=>{_()},[]),E.useEffect(()=>{o&&w(o.session_id)},[o]),E.useEffect(()=>{var N;(N=v.current)==null||N.scrollIntoView({behavior:"smooth"})},[d,e]);const _=async()=>{try{const N=await fetch(`${Y}/chat/conversations`);if(N.ok){const S=await N.json();i(S);const C=S.reduce((O,A)=>O+(A.unread_count||0),0);x(C)}}catch(N){console.error("Error fetching conversations:",N)}},w=async N=>{try{const S=await fetch(`${Y}/chat/conversations/${N}/messages`);if(S.ok){const C=await S.json();u(C)}}catch(S){console.error("Error fetching messages:",S)}},b=async N=>{if(N.preventDefault(),!f.trim()||!o)return;const S={sessionId:o.session_id,senderType:"admin",senderName:"Agente",message:f};try{(await fetch(`${Y}/chat/message`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)})).ok&&(u(O=>[...O,{senderType:"admin",message:f,created_at:new Date().toISOString()}]),m(""))}catch(C){console.error("Error sending message:",C)}};return e?s.jsxs("div",{className:`fixed bottom-6 right-6 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden z-50 flex flex-col transition-all duration-300 ${r?"w-72 h-14":"w-80 md:w-96 h-[500px]"}`,children:[s.jsxs("div",{className:"p-4 bg-gradient-to-r from-orange-500 to-red-600 text-white flex justify-between items-center cursor-pointer",onClick:()=>n(!r),children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Wr,{className:"w-5 h-5"}),s.jsx("span",{className:"font-semibold",children:"Chat Soporte"})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:N=>{N.stopPropagation(),n(!r)},className:"p-1 hover:bg-white/20 rounded transition-colors",children:r?s.jsx(aA,{className:"w-4 h-4"}):s.jsx(dA,{className:"w-4 h-4"})}),s.jsx("button",{onClick:N=>{N.stopPropagation(),t(!1)},className:"p-1 hover:bg-white/20 rounded transition-colors",children:s.jsx(Rr,{className:"w-4 h-4"})})]})]}),!r&&s.jsx(s.Fragment,{children:o?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-2 bg-gray-50 dark:bg-gray-700 flex justify-between items-center border-b border-gray-200 dark:border-gray-600",children:[s.jsx("button",{onClick:()=>c(null),className:"text-xs text-orange-600 dark:text-orange-400 hover:underline font-medium",children:" Volver"}),s.jsxs("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:["Visitante ",o.session_id.substring(0,6)]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50 dark:bg-gray-900/50",children:[d.map((N,S)=>s.jsx("div",{className:`flex ${N.senderType==="admin"?"justify-end":"justify-start"}`,children:s.jsx("div",{className:`p-3 rounded-2xl max-w-[85%] text-sm shadow-sm ${N.senderType==="admin"?"bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-tr-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border border-gray-200 dark:border-gray-700 rounded-tl-none"}`,children:N.message})},S)),s.jsx("div",{ref:v})]}),s.jsx("form",{onSubmit:b,className:"p-3 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"text",value:f,onChange:N=>m(N.target.value),placeholder:"Escribe...",className:"flex-1 px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"}),s.jsx("button",{type:"submit",disabled:!f.trim(),className:"p-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 disabled:opacity-50 transition-all",children:s.jsx($d,{className:"w-4 h-4"})})]})})]}):s.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:a.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500 text-sm",children:"No hay chats activos"}):a.map(N=>s.jsxs("div",{onClick:()=>c(N),className:"p-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[s.jsxs("div",{className:"flex justify-between items-start mb-1",children:[s.jsxs("span",{className:"font-medium text-sm text-gray-900 dark:text-white",children:["Visitante ",N.session_id.substring(0,6)]}),s.jsx("span",{className:"text-[10px] text-gray-400",children:new Date(N.updated_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:N.last_message})]},N.id))})})]}):s.jsxs("button",{onClick:()=>t(!0),className:"fixed bottom-6 right-6 w-14 h-14 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-full shadow-lg hover:shadow-orange-500/40 hover:scale-105 transition-all flex items-center justify-center z-50",children:[s.jsx(Wr,{className:"w-6 h-6"}),p>0&&s.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-white text-red-600 text-xs font-bold rounded-full flex items-center justify-center border-2 border-red-600",children:p})]})},she=({isOpen:e,onClose:t,onUpdate:r})=>{const n=Ht(),[a,i]=E.useState(!1),[o,c]=E.useState(!1),[d,u]=E.useState({username:"",role:"",full_name:"",email:"",password:"",notifications_enabled:!0,avatar_url:null}),[f,m]=E.useState(null),p=E.useRef(null),[x,v]=E.useState(!1);E.useEffect(()=>{e&&y()},[e]);const y=async()=>{i(!0);try{const N=localStorage.getItem("crm_token"),S=await fetch(`${Y}/users/profile`,{headers:{Authorization:`Bearer ${N}`}});if(S.ok){const C=await S.json();u({username:C.username||"",role:C.role||"",full_name:C.full_name||"",email:C.email||"",password:"",notifications_enabled:C.notifications_enabled,avatar_url:C.avatar_url}),m(C.avatar_url)}}catch(N){console.error("Error cargando perfil:",N)}finally{i(!1)}},_=N=>{const S=N.target.files[0];if(S){if(S.size>5*1024*1024){n.error("La imagen no debe superar los 5MB");return}u(C=>({...C,avatarFile:S})),m(URL.createObjectURL(S)),v(!1)}},w=N=>{N.stopPropagation(),m(null),u(S=>({...S,avatarFile:null})),v(!0),p.current&&(p.current.value="")},b=async N=>{N.preventDefault(),c(!0);try{const S=new FormData;S.append("full_name",d.full_name),S.append("email",d.email),d.password&&S.append("password",d.password),S.append("notifications_enabled",d.notifications_enabled),x?S.append("delete_avatar","true"):d.avatarFile&&S.append("avatar",d.avatarFile);const C=localStorage.getItem("crm_token"),O=await fetch(`${Y}/users/profile`,{method:"PUT",headers:{Authorization:`Bearer ${C}`},body:S});if(O.ok){const A=await O.json(),$={...JSON.parse(localStorage.getItem("user")||"{}"),...A.user};localStorage.setItem("user",JSON.stringify($)),r&&r($),n.success("Perfil actualizado correctamente"),t()}else n.error("Error al actualizar perfil")}catch(S){console.error("Error saving profile:",S),n.error("Error al guardar los cambios")}finally{c(!1)}};return s.jsx(Dr,{isOpen:e,onClose:t,title:"Mi Perfil",children:s.jsxs("form",{onSubmit:b,className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>{var N;return(N=p.current)==null?void 0:N.click()},children:[s.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden border-4 border-white shadow-lg bg-gray-100",children:f?s.jsx("img",{src:f,alt:"Profile",className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200 text-gray-400",children:s.jsx(pr,{className:"w-12 h-12"})})}),s.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(V6,{className:"w-8 h-8 text-white"})})]}),f&&s.jsx("button",{type:"button",onClick:w,className:"absolute -right-2 -bottom-2 p-2 bg-white rounded-full shadow-md text-red-500 hover:text-red-600 hover:bg-red-50 transition-colors",title:"Eliminar foto",children:s.jsx(Ar,{className:"w-4 h-4"})})]}),s.jsx("input",{type:"file",ref:p,className:"hidden",accept:"image/*",onChange:_}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Click para cambiar foto"})]}),a?s.jsx("div",{className:"flex justify-center p-4",children:s.jsx(i4,{className:"w-6 h-6 animate-spin text-orange-500"})}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Usuario"}),s.jsxs("div",{className:"relative",children:[s.jsx(pr,{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",value:d.username,readOnly:!0,className:"w-full pl-10 pr-4 py-2 border rounded-xl bg-gray-100 text-gray-500 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 cursor-not-allowed"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Rol"}),s.jsx("input",{type:"text",value:d.role==="admin"?"Administrador":"Comercial",readOnly:!0,className:"w-full px-4 py-2 border rounded-xl bg-gray-100 text-gray-500 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 cursor-not-allowed uppercase text-xs font-bold"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre Completo"}),s.jsxs("div",{className:"relative",children:[s.jsx(pr,{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",value:d.full_name,onChange:N=>u({...d,full_name:N.target.value}),className:"w-full pl-10 pr-4 py-2 border rounded-xl focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),s.jsxs("div",{className:"relative",children:[s.jsx(Tt,{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"email",value:d.email,onChange:N=>u({...d,email:N.target.value}),className:"w-full pl-10 pr-4 py-2 border rounded-xl focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nueva Contrasea (Opcional)"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400",children:""}),s.jsx("input",{type:"password",value:d.password,onChange:N=>u({...d,password:N.target.value}),placeholder:"Dejar en blanco para no cambiar",className:"w-full pl-10 pr-4 py-2 border rounded-xl focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:s.jsx(t4,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Notificaciones"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Recibir alertas en tiempo real"})]})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:d.notifications_enabled,onChange:N=>u({...d,notifications_enabled:N.target.checked}),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 dark:peer-focus:ring-orange-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-orange-500"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors disabled:opacity-50",children:o?"Guardando...":"Guardar Cambios"})]})]})})},OS=({children:e,onLogout:t,activeSection:r="leads",onSectionChange:n,onQuickAction:a})=>{const[i,o]=E.useState("light"),[c,d]=E.useState(!1),[u,f]=E.useState(!1),[m,p]=E.useState(!1),[x,v]=E.useState(!1),[y,_]=E.useState(!1),w=E.useRef(null),[b,N]=E.useState(()=>JSON.parse(localStorage.getItem("user")||"{}"));E.useEffect(()=>{const $=W=>{w.current&&!w.current.contains(W.target)&&p(!1)};return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[]);const S=ZE(),C=Ht();E.useEffect(()=>{if(S&&b.notifications_enabled!==!1){const $=b.id||b.userId;if(!$)return;const W=S.subscribe(`user_${$}`);W.bind("new_notification",G=>{C.info(G.message||"Nueva notificacin"),window.dispatchEvent(new Event("crm_notification_update"))});let F;return b.role==="admin"&&(F=S.subscribe("admin_notifications"),F.bind("new_chat_message",G=>{C.info(`Nuevo mensaje de chat: ${G.message}`)})),()=>{W.unbind_all(),W.unsubscribe(),F&&(F.unbind_all(),F.unsubscribe())}}},[S,C,b.notifications_enabled,b.id,b.userId,b.role]),E.useEffect(()=>{const $=localStorage.getItem("theme")||"light";o($),document.documentElement.classList.toggle("dark",$==="dark")},[]);const O=()=>{const $=i==="light"?"dark":"light";o($),localStorage.setItem("theme",$),document.documentElement.classList.toggle("dark",$==="dark")},z=[{id:"home",label:"Dashboard",icon:s.jsx(gw,{className:"w-5 h-5"}),description:"Panel principal"},{id:"leads",label:"Leads",icon:s.jsx(ts,{className:"w-5 h-5"}),description:"Gestin de leads"},{id:"clients",label:"Clientes",icon:s.jsx(ts,{className:"w-5 h-5"}),description:"Cartera de clientes"},{id:"hunter",label:"Lead Hunter",icon:s.jsx(Ls,{className:"w-5 h-5"}),description:"Prospeccin con IA"},{id:"training",label:"Formacin",icon:s.jsx(_l,{className:"w-5 h-5"}),description:"Material educativo",roles:["commercial"]},{id:"support",label:"Soporte",icon:s.jsx(Ph,{className:"w-5 h-5"}),description:"Ayuda y tickets",roles:["commercial"]},{id:"proposals",label:"Propuestas",icon:s.jsx(It,{className:"w-5 h-5"}),description:"Gestin de propuestas",roles:["admin"]},{id:"invoices",label:"Facturas",icon:s.jsx(It,{className:"w-5 h-5"}),description:"Facturacin y pagos",roles:["admin"]},{id:"chat",label:"Chat",icon:s.jsx(Wr,{className:"w-5 h-5"}),description:"Conversaciones",roles:["admin"]},{id:"analytics",label:"Analytics",icon:s.jsx(hf,{className:"w-5 h-5"}),description:"Mtricas y reportes",roles:["admin"]},{id:"commercials",label:"Comerciales",icon:s.jsx(ts,{className:"w-5 h-5"}),description:"Gestin de equipo",roles:["admin"]},{id:"settings",label:"Configuracin",icon:s.jsx(Wg,{className:"w-5 h-5"}),description:"Ajustes del sistema",roles:["admin"]}].filter($=>!$.roles||$.roles.includes(b.role||"admin"));return s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex",children:[y&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>_(!1)}),s.jsxs("aside",{className:`fixed left-0 top-0 h-full bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300 z-50 ${c?"w-20":"w-64"} hidden md:flex md:flex-col`,children:[s.jsxs("div",{className:"h-16 flex items-center justify-between px-4 border-b border-gray-200 dark:border-gray-700",children:[!c&&s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl flex items-center justify-center shadow-lg shadow-orange-500/20",children:s.jsx("span",{className:"text-white font-bold text-lg",children:"N"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-sm font-bold text-gray-900 dark:text-white",children:"NoahPro"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"CRM Pro"})]})]}),s.jsx("button",{onClick:()=>d(!c),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx("svg",{className:`w-5 h-5 text-gray-600 dark:text-gray-300 transition-transform ${c?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})})]}),s.jsx("nav",{className:"flex-1 overflow-y-auto p-3 space-y-1 pb-20",children:z.map($=>s.jsxs("button",{onClick:()=>$.onClick?$.onClick():n&&n($.id),className:`w-full flex items-center space-x-3 px-3 py-3 rounded-xl transition-all group ${r===$.id?"bg-gradient-to-r from-orange-500 to-red-600 text-white shadow-lg shadow-orange-500/30":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[s.jsx("span",{className:"text-2xl",children:$.icon}),!c&&s.jsxs("div",{className:"flex-1 text-left",children:[s.jsx("p",{className:"font-medium text-sm",children:$.label}),s.jsx("p",{className:`text-xs ${r===$.id?"text-orange-100":"text-gray-500 dark:text-gray-400"}`,children:$.description})]}),$.badge&&!c&&s.jsx("span",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:$.badge})]},$.id))})]}),s.jsxs("aside",{className:`fixed left-0 top-0 h-full w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 z-50 transform transition-transform duration-300 md:hidden flex flex-col ${y?"translate-x-0":"-translate-x-full"}`,children:[s.jsxs("div",{className:"h-16 flex items-center justify-between px-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl flex items-center justify-center shadow-lg shadow-orange-500/20",children:s.jsx("span",{className:"text-white font-bold text-lg",children:"N"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-sm font-bold text-gray-900 dark:text-white",children:"NoahPro"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"CRM Pro"})]})]}),s.jsx("button",{onClick:()=>_(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(Rr,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})})]}),s.jsx("nav",{className:"flex-1 overflow-y-auto p-3 space-y-1 pb-20",children:z.map($=>s.jsxs("button",{onClick:()=>{$.onClick?$.onClick():n&&n($.id),_(!1)},className:`w-full flex items-center space-x-3 px-3 py-3 rounded-xl transition-all group ${r===$.id?"bg-gradient-to-r from-orange-500 to-red-600 text-white shadow-lg shadow-orange-500/30":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[s.jsx("span",{className:"text-2xl",children:$.icon}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsx("p",{className:"font-medium text-sm",children:$.label}),s.jsx("p",{className:`text-xs ${r===$.id?"text-orange-100":"text-gray-500 dark:text-gray-400"}`,children:$.description})]})]},$.id))})]}),s.jsxs("div",{className:`flex-1 min-w-0 transition-all duration-300 ml-0 ${c?"md:ml-20":"md:ml-64"}`,children:[s.jsx("header",{className:`h-16 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 fixed top-0 right-0 z-30 shadow-sm transition-all duration-300 left-0 ${c?"md:left-20":"md:left-64"}`,children:s.jsxs("div",{className:"h-full px-3 md:px-6 flex items-center justify-between",children:[s.jsx("button",{onClick:()=>_(!0),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors md:hidden",children:s.jsx(o4,{className:"w-6 h-6 text-gray-600 dark:text-gray-300"})}),s.jsx("div",{className:"flex-1 max-w-2xl hidden md:block",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Buscar leads, propuestas, contactos...",className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-gray-700 border-0 rounded-xl text-sm focus:ring-2 focus:ring-orange-500 dark:text-white placeholder-gray-500 transition-all"}),s.jsx("svg",{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),s.jsxs("div",{className:"flex items-center space-x-4 ml-6",children:[s.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Ayuda",children:s.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx(rhe,{}),s.jsx("button",{onClick:O,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors text-gray-600 dark:text-gray-300",title:i==="light"?"Modo Oscuro":"Modo Claro",children:i==="light"?s.jsx(fA,{className:"w-5 h-5"}):s.jsx(aR,{className:"w-5 h-5"})}),b.role!=="commercial"&&s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>f(!u),className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-xl hover:shadow-lg hover:shadow-orange-500/30 transition-all font-medium text-sm flex items-center space-x-1",children:[s.jsx("span",{children:"+ Nuevo"}),s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>f(!1)}),s.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 z-50 overflow-hidden",children:s.jsxs("div",{className:"py-2",children:[s.jsxs("button",{onClick:()=>{f(!1),a==null||a("lead")},className:"w-full text-left px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-orange-100 dark:bg-orange-900/30 rounded-xl flex items-center justify-center",children:s.jsx(yw,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Nuevo Lead"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Crear contacto manual"})]})]}),s.jsxs("button",{onClick:()=>{f(!1),a==null||a("proposal")},className:"w-full text-left px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center",children:s.jsx(It,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Nueva Propuesta"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Crear oferta comercial"})]})]}),s.jsxs("button",{onClick:()=>{f(!1),a==null||a("meeting")},className:"w-full text-left px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center",children:s.jsx(H6,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Nueva Reunin"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Agendar videollamada"})]})]})]})})]})]}),s.jsxs("div",{className:"relative",ref:w,children:[s.jsxs("button",{onClick:()=>p(!m),className:"flex items-center space-x-2 pl-4 border-l border-gray-200 dark:border-gray-700",children:[b.avatar_url?s.jsx("img",{src:b.avatar_url,alt:"Profile",className:"w-8 h-8 rounded-full object-cover shadow-md"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center text-white font-semibold shadow-md",children:b.username?b.username.charAt(0).toUpperCase():"U"}),s.jsxs("div",{className:"hidden md:block text-left",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white leading-none",children:b.full_name||b.username||"Usuario"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:b.email||"Sin email"})]}),s.jsx(mv,{className:`w-4 h-4 text-gray-500 transition-transform ${m?"rotate-180":""}`})]}),m&&s.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 z-50 overflow-hidden",children:s.jsxs("div",{className:"py-1",children:[s.jsxs("button",{onClick:()=>{p(!1),v(!0)},className:"w-full text-left px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center space-x-2 text-gray-700 dark:text-gray-300",children:[s.jsx(pr,{className:"w-4 h-4"}),s.jsx("span",{children:"Ver Perfil"})]}),s.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700 my-1"}),s.jsxs("button",{onClick:()=>{p(!1),t()},className:"w-full text-left px-4 py-2 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors flex items-center space-x-2 text-red-600 dark:text-red-400",children:[s.jsx(QL,{className:"w-4 h-4"}),s.jsx("span",{children:"Cerrar Sesin"})]})]})})]})]})]})}),s.jsx("main",{className:"transition-all duration-300 mt-16 p-3 md:p-6 pb-24",children:e})]}),b.role==="admin"&&s.jsx(nhe,{}),s.jsx(she,{isOpen:x,onClose:()=>v(!1),onUpdate:$=>{N($),localStorage.setItem("user",JSON.stringify($))}})]})},ahe=()=>{var v,y;const e=window.location.pathname.split("/"),t=e[e.length-1],[r,n]=E.useState(null),[a,i]=E.useState(!0),[o,c]=E.useState(null);E.useEffect(()=>{d()},[t]);const d=async()=>{var _;try{i(!0);const w=await oue(t);n(w)}catch(w){c(((_=w.response)==null?void 0:_.status)===404?"Factura no encontrada":"Error al cargar factura")}finally{i(!1)}},u=_=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(_),f=_=>_?new Date(_).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}):"-",m=_=>{const w={pending:{label:"Pendiente de Pago",color:"bg-red-100 text-red-800 border-red-200",icon:af},partial:{label:"Pago Parcial",color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:ud},paid:{label:"Pagada",color:"bg-green-100 text-green-800 border-green-200",icon:Md}},b=w[_]||w.pending,N=b.icon;return s.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-lg border-2 ${b.color} font-semibold`,children:[s.jsx(N,{className:"w-5 h-5"}),b.label]})},p=_=>({transfer:"Transferencia",cash:"Efectivo",card:"Tarjeta",check:"Cheque",other:"Otro"})[_]||_;if(a)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 text-lg",children:"Cargando factura..."})]})});if(o)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(ud,{className:"w-8 h-8 text-red-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error"}),s.jsx("p",{className:"text-gray-600",children:o})]})});if(!r)return null;const x=r.due_date&&new Date(r.due_date)<new Date&&r.payment_status!=="paid";return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-red-50 py-8 px-4",children:[s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden mb-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-600 text-white p-8",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[(v=r.company)!=null&&v.company_logo?s.jsx("img",{src:r.company.company_logo,alt:"Logo",className:"h-12 w-auto bg-white rounded-lg p-1"}):s.jsx("div",{className:"p-2 bg-white/10 rounded-lg",children:s.jsx(So,{className:"w-8 h-8"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Factura"}),((y=r.company)==null?void 0:y.company_name)&&s.jsx("p",{className:"text-orange-100 text-sm font-medium",children:r.company.company_name})]})]}),s.jsx("p",{className:"text-orange-100 text-lg opacity-90",children:r.invoice_number})]}),s.jsx("div",{className:"flex flex-col items-end gap-2",children:m(r.payment_status)})]})}),s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-sm font-semibold text-gray-500 uppercase mb-2",children:"Facturado a"}),s.jsx("p",{className:"text-xl font-bold text-gray-900",children:r.client_name||r.lead_name}),r.business_name&&s.jsxs("p",{className:"text-gray-600 font-medium mb-1",children:["NIF/CIF: ",r.business_name]}),s.jsxs("div",{className:"text-gray-600 text-sm mt-2 space-y-0.5",children:[r.client_address&&s.jsx("p",{children:r.client_address}),(r.client_city||r.client_postal_code)&&s.jsxs("p",{children:[r.client_postal_code," ",r.client_city]}),(r.client_province||r.client_country)&&s.jsxs("p",{children:[r.client_province," ",r.client_country&&`(${r.client_country})`]}),r.client_phone&&s.jsxs("p",{className:"pt-1",children:["Telf: ",r.client_phone]}),r.client_email&&s.jsxs("p",{children:["Email: ",r.client_email]})]})]}),s.jsxs("div",{className:"text-left md:text-right space-y-6",children:[r.company&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-sm font-semibold text-gray-500 uppercase mb-2",children:"Emisor"}),s.jsx("p",{className:"text-xl font-bold text-gray-900",children:r.company.company_name}),s.jsxs("div",{className:"text-gray-600 text-sm mt-1 space-y-0.5",children:[r.company.company_nif&&s.jsxs("p",{children:["NIF: ",r.company.company_nif]}),r.company.company_address&&s.jsx("p",{children:r.company.company_address}),(r.company.company_postal_code||r.company.company_city)&&s.jsxs("p",{children:[r.company.company_postal_code," ",r.company.company_city]}),r.company.company_phone&&s.jsxs("p",{children:["Telf: ",r.company.company_phone]}),r.company.company_email&&s.jsx("p",{children:r.company.company_email})]})]}),s.jsxs("div",{className:"space-y-3 pt-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Fecha Emisin"}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:f(r.issue_date)})]}),r.due_date&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Vencimiento"}),s.jsxs("p",{className:`text-sm font-medium ${x?"text-red-600":"text-gray-900"}`,children:[f(r.due_date),x&&s.jsx("span",{className:"font-normal ml-1",children:"(Vencida)"})]})]})]})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:r.title}),r.description&&s.jsx("p",{className:"text-gray-600",children:r.description})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Detalle"}),s.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descripcin"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cantidad"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Precio"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.items.map((_,w)=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:_.description}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 text-right",children:_.quantity}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 text-right",children:u(_.price)}),s.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 text-right",children:u(_.total)})]},w))})]})})]}),s.jsx("div",{className:"flex justify-end mb-8",children:s.jsxs("div",{className:"w-full md:w-1/2 space-y-3",children:[s.jsxs("div",{className:"flex justify-between text-gray-600",children:[s.jsx("span",{children:"Subtotal:"}),s.jsx("span",{className:"font-semibold",children:u(r.subtotal)})]}),s.jsxs("div",{className:"flex justify-between text-gray-600",children:[s.jsxs("span",{children:["IVA (",r.tax_rate,"%):"]}),s.jsx("span",{className:"font-semibold",children:u(r.tax_amount)})]}),s.jsxs("div",{className:"border-t-2 border-gray-300 pt-3 flex justify-between text-xl font-bold text-gray-900",children:[s.jsx("span",{children:"Total:"}),s.jsx("span",{className:"text-blue-600",children:u(r.total_amount)})]})]})}),r.payment_status!=="pending"&&s.jsxs("div",{className:`rounded-lg p-6 mb-8 ${r.payment_status==="paid"?"bg-green-50 border-2 border-green-200":"bg-yellow-50 border-2 border-yellow-200"}`,children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:r.payment_status==="paid"?s.jsxs(s.Fragment,{children:[s.jsx(Md,{className:"w-5 h-5 text-green-600"}),s.jsx("span",{className:"text-green-900",children:"Estado de Pago"})]}):s.jsxs(s.Fragment,{children:[s.jsx(ud,{className:"w-5 h-5 text-yellow-600"}),s.jsx("span",{className:"text-yellow-900",children:"Estado de Pago"})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Factura"}),s.jsx("p",{className:"text-xl font-bold text-gray-900",children:u(r.total_amount)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Pagado"}),s.jsx("p",{className:"text-xl font-bold text-green-600",children:u(r.paid_amount)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Pendiente"}),s.jsx("p",{className:"text-xl font-bold text-red-600",children:u(r.remaining_amount)})]})]}),r.payments&&r.payments.length>0&&s.jsxs("div",{className:"mt-6",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Historial de Pagos"}),s.jsx("div",{className:"space-y-2",children:r.payments.map((_,w)=>s.jsxs("div",{className:"flex justify-between items-center bg-white rounded-lg p-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-900",children:f(_.payment_date)}),s.jsxs("span",{className:"text-gray-500 ml-2",children:["(",p(_.payment_method),")"]})]}),s.jsx("span",{className:"font-semibold text-green-600",children:u(_.amount)})]},w))})]})]}),r.notes&&s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Notas"}),s.jsx("p",{className:"text-gray-600 text-sm",children:r.notes})]}),s.jsx("div",{className:"flex justify-center gap-4",children:s.jsxs("button",{onClick:()=>window.print(),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:shadow-lg hover:shadow-orange-500/30 transition-all font-semibold no-print",children:[s.jsx(q3,{className:"w-5 h-5"}),"Descargar / Imprimir"]})})]})]}),s.jsxs("div",{className:"text-center text-gray-500 text-sm",children:[s.jsx("p",{children:"Esta es una factura generada electrnicamente."}),s.jsx("p",{className:"mt-1",children:"Para cualquier consulta, por favor contacte con nosotros."})]})]}),s.jsx("style",{children:`
                @media print {
                    * {
                        -webkit-print-color-adjust: exact !important;
                        print-color-adjust: exact !important;
                    }
                    
                    html, body {
                        background: white !important;
                        margin: 0 !important;
                        padding: 0 !important;
                        font-size: 12px !important;
                    }
                    
                    .min-h-screen {
                        min-height: auto !important;
                        background: white !important;
                        padding: 0 !important;
                    }
                    
                    .max-w-4xl {
                        max-width: 100% !important;
                        margin: 0 !important;
                        padding: 0 !important;
                    }
                    
                    .bg-white {
                        box-shadow: none !important;
                    }
                    
                    .rounded-2xl, .rounded-xl, .rounded-lg {
                        border-radius: 0 !important;
                    }
                    
                    .shadow-2xl, .shadow-xl, .shadow-lg, .shadow-sm {
                        box-shadow: none !important;
                    }
                    
                    /* Header color print */
                    .bg-gradient-to-r {
                        background: #f97316 !important;
                        -webkit-print-color-adjust: exact !important;
                    }
                    
                    /* Grid layout for print */
                    .grid-cols-1 {
                        display: flex !important;
                        flex-direction: row !important;
                        justify-content: space-between !important;
                    }
                    
                    .md\\:grid-cols-2 > div {
                        width: 48% !important;
                    }
                    
                    .md\\:text-right {
                        text-align: right !important;
                    }
                    
                    /* Table styles */
                    table {
                        width: 100% !important;
                        border-collapse: collapse !important;
                        page-break-inside: avoid !important;
                    }
                    
                    th, td {
                        padding: 8px !important;
                        border: 1px solid #e5e7eb !important;
                    }
                    
                    thead {
                        background: #f9fafb !important;
                        -webkit-print-color-adjust: exact !important;
                    }
                    
                    /* Hide non-print elements */
                    .no-print,
                    button,
                    .flex.justify-center.gap-4 {
                        display: none !important;
                    }
                    
                    /* Footer in print */
                    .text-center.text-gray-500 {
                        margin-top: 20px !important;
                        padding-top: 10px !important;
                        border-top: 1px solid #e5e7eb !important;
                    }
                    
                    /* Page break control */
                    .mb-8 {
                        page-break-inside: avoid !important;
                    }
                    
                    /* Ensure text colors are visible */
                    .text-gray-900, .text-gray-800, .text-gray-700 {
                        color: #111827 !important;
                    }
                    
                    .text-gray-600, .text-gray-500 {
                        color: #4b5563 !important;
                    }
                    
                    /* Status badge colors */
                    .bg-green-100 {
                        background-color: #d1fae5 !important;
                    }
                    .bg-red-100 {
                        background-color: #fee2e2 !important;
                    }
                    .bg-yellow-100 {
                        background-color: #fef3c7 !important;
                    }
                    
                    /* Header text in white */
                    .text-white {
                        color: white !important;
                    }
                    
                    .text-orange-100 {
                        color: #ffedd5 !important;
                    }
                }
                
                @page {
                    size: A4;
                    margin: 15mm;
                }
            `})]})},ihe=({activeSection:e="home"})=>{var Oe,me,_e,$e,Pe,Le,Ge,et;const[t,r]=E.useState("dashboard");E.useEffect(()=>{r(e==="training"?"training":e==="support"?"support":e==="leads"?"leads":e==="clients"?"clients":e==="hunter"?"hunter":"dashboard")},[e]);const[n,a]=E.useState({leads:{total:0,won:0},commissions:{current_month:0,total_earned:0},profile:{},recent_leads:[]}),[i,o]=E.useState([]),[c,d]=E.useState([]),[u,f]=E.useState(!1),[m,p]=E.useState(!1),[x,v]=E.useState(null),[y,_]=E.useState([]),[w,b]=E.useState({subject:"",message:"",priority:"normal"}),[N,S]=E.useState(""),[C]=E.useState(JSON.parse(localStorage.getItem("user")||"{}")),O=Ht(),[A,z]=E.useState([]),[$,W]=E.useState(null),[F,G]=E.useState(null);E.useEffect(()=>{t==="leads"&&ee()},[t]);const ee=async()=>{try{const ue=await fetch(`${Y}/leads`,{headers:{Authorization:`Bearer ${Z}`}});ue.ok&&z(await ue.json())}catch(ue){console.error("Error fetching leads:",ue)}},K=(ue,Ae)=>{z(A.map(lt=>lt.id===ue?{...lt,status:Ae}:lt)),pe()},oe=ue=>{z(A.filter(Ae=>Ae.id!==ue)),pe()},Z=localStorage.getItem("crm_token");E.useEffect(()=>{pe(),Q(),ce();const ue=Ae=>{const{action:lt}=Ae.detail;lt==="new_lead"?(r("leads"),setTimeout(()=>{const Ke=document.querySelector('[data-action="new-lead"]');Ke&&Ke.click()},100)):lt==="new_meeting"&&O.info("Prximamente: Crear reunin")};return window.addEventListener("crm_quick_action",ue),()=>{window.removeEventListener("crm_quick_action",ue)}},[]);const pe=async()=>{try{const ue=await fetch(`${Y}/commercials/stats`,{headers:{Authorization:`Bearer ${Z}`}});ue.ok&&a(await ue.json())}catch(ue){console.error("Error:",ue)}},Q=async()=>{try{const ue=await fetch(`${Y}/training/my`,{headers:{Authorization:`Bearer ${Z}`}});ue.ok&&o(await ue.json())}catch(ue){console.error("Error:",ue)}},ce=async()=>{try{const ue=await fetch(`${Y}/support/my`,{headers:{Authorization:`Bearer ${Z}`}});ue.ok&&d(await ue.json())}catch(ue){console.error("Error:",ue)}},le=async ue=>{ue.preventDefault();try{if(!(await fetch(`${Y}/support`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Z}`},body:JSON.stringify(w)})).ok)throw new Error("Error al crear ticket");O.success("Ticket creado. Te responderemos pronto."),f(!1),b({subject:"",message:"",priority:"normal"}),ce()}catch(Ae){O.error(Ae.message)}},B=async ue=>{try{const Ae=await fetch(`${Y}/support/${ue.id}`,{headers:{Authorization:`Bearer ${Z}`}});if(Ae.ok){const lt=await Ae.json();v(lt),_(lt.messages||[]),p(!0)}}catch{O.error("Error")}},X=async()=>{if(N.trim())try{await fetch(`${Y}/support/${x.id}/reply`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Z}`},body:JSON.stringify({message:N})}),S(""),B(x)}catch{O.error("Error")}},ae=ue=>{ue.external_url?window.open(ue.external_url,"_blank"):ue.video_url?window.open(ue.video_url,"_blank"):ue.file_url&&window.open(`${Y}${ue.file_url}`,"_blank")},fe=[{id:"dashboard",label:"Mi Panel",icon:pr},{id:"hunter",label:"Lead Hunter",icon:Ls},{id:"training",label:"Formacin",icon:_l},{id:"support",label:"Soporte",icon:Ph}],re={video:x4,document:It,tutorial:_l,link:a4},ge={open:"bg-yellow-100 text-yellow-800",in_progress:"bg-blue-100 text-blue-800",resolved:"bg-green-100 text-green-800",closed:"bg-gray-100 text-gray-800"};return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t==="dashboard"?`Hola, ${C.full_name||"Comercial"}`:t==="hunter"?"Lead Hunter AI":t==="training"?"Formacin":t==="support"?"Soporte":t==="leads"?"Mis Leads":t==="clients"?"Mis Clientes":"Dashboard"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Bienvenido a tu panel comercial"})]}),["dashboard","hunter","training","support"].includes(t)&&s.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-700 rounded-xl p-1",children:fe.map(ue=>s.jsxs("button",{onClick:()=>r(ue.id),className:`flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-all ${t===ue.id?"bg-white dark:bg-gray-600 text-indigo-600 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900"}`,children:[s.jsx(ue.icon,{className:"w-4 h-4 mr-2"}),ue.label,ue.id==="support"&&c.filter(Ae=>Ae.unread_count>0).length>0&&s.jsx("span",{className:"ml-2 bg-red-500 text-white text-xs rounded-full px-2 py-0.5",children:c.filter(Ae=>Ae.unread_count>0).length})]},ue.id))})]}),t==="dashboard"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Leads Asignados"}),s.jsx("h3",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:((Oe=n.leads)==null?void 0:Oe.total)||0})]}),s.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-blue-600",children:s.jsx(pr,{className:"w-6 h-6"})})]}),s.jsx("div",{className:"mt-4 flex items-center text-sm",children:s.jsxs("span",{className:"text-green-600 font-medium flex items-center",children:[s.jsx(vd,{className:"w-4 h-4 mr-1"}),((me=n.leads)==null?void 0:me.won)||0," convertidos"]})})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Comisiones (Mes)"}),s.jsxs("h3",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:[((_e=n.commissions)==null?void 0:_e.current_month)||0," "]})]}),s.jsx("div",{className:"p-2 bg-green-50 dark:bg-green-900/20 rounded-lg text-green-600",children:s.jsx(vd,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:["Total: ",s.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[(($e=n.commissions)==null?void 0:$e.total_earned)||0," "]})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 to-purple-700 p-6 rounded-xl shadow-lg text-white",children:[s.jsx("h3",{className:"text-lg font-bold mb-2",children:"Mi Cdigo QR"}),s.jsx("p",{className:"text-indigo-100 text-sm mb-4",children:"Los clientes que escaneen este cdigo quedarn asignados a ti."}),((Pe=n.profile)==null?void 0:Pe.qr_code_url)&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"bg-white p-2 rounded-lg",children:s.jsx("img",{src:n.profile.qr_code_url,alt:"QR",className:"w-20 h-20"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-indigo-200",children:"Tu cdigo:"}),s.jsx("p",{className:"font-mono font-bold text-lg",children:((Le=n.profile)==null?void 0:Le.commercial_code)||"N/A"})]})]}),s.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[s.jsx("p",{className:"text-xs text-indigo-200 mb-2",children:"Tu enlace de referido:"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",readOnly:!0,value:`${window.location.origin}/demo?ref=${(Ge=n.profile)==null?void 0:Ge.commercial_code}`,className:"flex-1 bg-white/20 text-white text-sm font-mono px-3 py-2 rounded-lg border border-white/30 focus:outline-none"}),s.jsx("button",{onClick:()=>{var Ae;const ue=`${window.location.origin}/demo?ref=${(Ae=n.profile)==null?void 0:Ae.commercial_code}`;navigator.clipboard.writeText(ue),O.success("Enlace copiado al portapapeles!")},className:"p-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",title:"Copiar enlace",children:s.jsx(kl,{className:"w-5 h-5"})})]})]})]})]})]}),((et=n.recent_leads)==null?void 0:et.length)>0&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Leads Recientes"})}),s.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:n.recent_leads.map(ue=>s.jsxs("div",{className:"px-6 py-4 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:ue.name}),s.jsx("p",{className:"text-sm text-gray-500",children:ue.email})]}),s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${ue.status==="won"?"bg-green-100 text-green-800":ue.status==="new"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:ue.status})]},ue.id))})]})]}),t==="hunter"&&s.jsx(cM,{}),t==="training"&&s.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.map(ue=>{const Ae=re[ue.type]||It;return s.jsxs("div",{onClick:()=>ae(ue),className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg transition-shadow cursor-pointer",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-10 w-10 rounded-lg bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center",children:s.jsx(Ae,{className:"w-5 h-5 text-indigo-600"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:ue.title}),s.jsx("span",{className:"text-xs text-gray-500 capitalize",children:ue.type})]})]}),s.jsx(Iu,{className:"w-4 h-4 text-gray-400"})]}),ue.description&&s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:ue.description})]},ue.id)}),i.length===0&&s.jsxs("div",{className:"col-span-full text-center py-12 text-gray-500",children:[s.jsx(_l,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"No hay materiales de formacin disponibles"})]})]}),t==="support"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex justify-end",children:s.jsxs(Ne,{onClick:()=>f(!0),children:[s.jsx(xr,{className:"w-4 h-4 mr-2"}),"Nuevo Ticket"]})}),c.map(ue=>s.jsx("div",{onClick:()=>B(ue),className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg transition-shadow cursor-pointer",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${ge[ue.status]}`,children:ue.status==="open"?"Abierto":ue.status==="in_progress"?"En progreso":ue.status==="resolved"?"Resuelto":"Cerrado"}),ue.unread_count>0&&s.jsxs("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-0.5",children:[ue.unread_count," nuevo"]})]}),s.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:ue.subject})]}),s.jsxs("span",{className:"text-xs text-gray-400 flex items-center",children:[s.jsx(Ms,{className:"w-3 h-3 mr-1"}),new Date(ue.created_at).toLocaleDateString()]})]})},ue.id)),c.length===0&&s.jsxs("div",{className:"text-center py-12 text-gray-500",children:[s.jsx(Rt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"No tienes tickets de soporte"}),s.jsx("p",{className:"text-sm mt-1",children:"Necesitas ayuda? Crea un nuevo ticket"})]})]}),t==="leads"&&s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:s.jsx(v5,{leads:A,onLeadClick:ue=>W(ue),onStatusChange:K,onDeleteLead:oe})}),t==="clients"&&!F&&s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:s.jsx(X3,{onClientSelect:ue=>G(ue)})}),t==="clients"&&F&&s.jsx(Q3,{clientId:F,onBack:()=>G(null)}),$&&s.jsx(Dr,{isOpen:!!$,onClose:()=>W(null),title:"Detalle del Lead",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-indigo-600 dark:text-indigo-400",children:$.name}),s.jsx("p",{className:"text-sm text-gray-500",children:$.business_name})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg",children:[s.jsx("label",{className:"text-xs text-gray-400 uppercase font-semibold",children:"Email"}),s.jsx("p",{className:"dark:text-white truncate",title:$.email,children:$.email})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg",children:[s.jsx("label",{className:"text-xs text-gray-400 uppercase font-semibold",children:"Telfono"}),s.jsx("p",{className:"dark:text-white",children:$.phone||"-"})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg",children:[s.jsx("label",{className:"text-xs text-gray-400 uppercase font-semibold",children:"Estado"}),s.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs mt-1 ${$.status==="won"?"bg-green-100 text-green-800":$.status==="new"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"}`,children:$.status})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg",children:[s.jsx("label",{className:"text-xs text-gray-400 uppercase font-semibold",children:"Origen"}),s.jsx("p",{className:"dark:text-white",children:$.source||"-"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 uppercase font-semibold",children:"Notas"}),s.jsx("p",{className:"text-sm bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg mt-1 dark:text-gray-300 min-h-[60px]",children:$.message||$.notes||"Sin notas"})]})]})}),s.jsx(Dr,{isOpen:u,onClose:()=>f(!1),title:"Nuevo Ticket de Soporte",children:s.jsxs("form",{onSubmit:le,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Asunto"}),s.jsx("input",{value:w.subject,onChange:ue=>b({...w,subject:ue.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Prioridad"}),s.jsxs("select",{value:w.priority,onChange:ue=>b({...w,priority:ue.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",children:[s.jsx("option",{value:"low",children:"Baja"}),s.jsx("option",{value:"normal",children:"Normal"}),s.jsx("option",{value:"high",children:"Alta"}),s.jsx("option",{value:"urgent",children:"Urgente"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Mensaje"}),s.jsx("textarea",{value:w.message,onChange:ue=>b({...w,message:ue.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",rows:4,required:!0})]}),s.jsxs("div",{className:"pt-4 flex justify-end space-x-3",children:[s.jsx(Ne,{variant:"ghost",onClick:()=>f(!1),children:"Cancelar"}),s.jsx(Ne,{type:"submit",children:"Enviar Ticket"})]})]})}),s.jsx(Dr,{isOpen:m,onClose:()=>p(!1),title:(x==null?void 0:x.subject)||"Ticket",children:x&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${ge[x.status]}`,children:x.status==="open"?"Abierto":x.status==="in_progress"?"En progreso":x.status==="resolved"?"Resuelto":"Cerrado"})}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4 max-h-80 overflow-y-auto space-y-3",children:y.map(ue=>s.jsx("div",{className:`flex ${ue.sender_role!=="commercial"?"justify-start":"justify-end"}`,children:s.jsxs("div",{className:`max-w-[80%] rounded-xl px-4 py-2 ${ue.sender_role!=="commercial"?"bg-indigo-600 text-white":"bg-white dark:bg-gray-600 text-gray-900 dark:text-white border"}`,children:[s.jsx("p",{className:"text-sm",children:ue.message}),s.jsxs("p",{className:`text-xs mt-1 ${ue.sender_role!=="commercial"?"text-indigo-200":"text-gray-400"}`,children:[ue.sender_name,"  ",new Date(ue.created_at).toLocaleTimeString()]})]})},ue.id))}),x.status!=="closed"&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{value:N,onChange:ue=>S(ue.target.value),placeholder:"Escribe tu mensaje...",className:"flex-1 px-4 py-2 border rounded-xl dark:bg-gray-700 dark:border-gray-600",onKeyPress:ue=>ue.key==="Enter"&&X()}),s.jsx(Ne,{onClick:X,children:s.jsx(Wr,{className:"w-4 h-4"})})]})]})})]})},ohe=()=>{const e=window.location.pathname.split("/demo/")[1],[t,r]=E.useState(null),[n,a]=E.useState(!0),[i,o]=E.useState(null),c="http://localhost:3002/api";return E.useEffect(()=>{e&&(async()=>{try{const u=await fetch(`${c}/hunter/public/demo/${e}`);if(!u.ok)throw new Error("Demo no encontrada o expirada");const f=await u.json();r(f.html_content)}catch(u){o(u.message)}finally{a(!1)}})()},[e]),n?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx(i4,{className:"w-12 h-12 text-blue-600 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500 font-medium",children:"Cargando experiencia..."})]})}):i?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center max-w-md mx-auto p-8",children:[s.jsx("div",{className:"bg-red-100 text-red-600 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-6",children:s.jsx(xi,{className:"w-8 h-8"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No pudimos cargar la demo"}),s.jsx("p",{className:"text-gray-600 mb-6",children:i}),s.jsx("a",{href:"/",className:"text-blue-600 hover:underline font-medium",children:"Volver al inicio"})]})}):s.jsx("div",{className:"w-full h-screen bg-white",children:s.jsx("iframe",{srcDoc:t,title:"Demo Preview",className:"w-full h-full border-0",sandbox:"allow-scripts allow-same-origin allow-forms"})})};function lhe(){const[e,t]=E.useState("/"),[r,n]=E.useState(!0),[a,i]=E.useState("home"),[o,c]=E.useState(null),d=f=>{f==="lead"?(i("leads"),window.dispatchEvent(new CustomEvent("crm_quick_action",{detail:{action:"new_lead"}}))):f==="proposal"?i("proposals"):f==="meeting"&&window.dispatchEvent(new CustomEvent("crm_quick_action",{detail:{action:"new_meeting"}}))};E.useEffect(()=>{const f=()=>{const p=window.location.pathname;t(p),n(!1)};f(),window.addEventListener("popstate",f);const m=()=>{f()};return window.addEventListener("navigate",m),()=>{window.removeEventListener("popstate",f),window.removeEventListener("navigate",m)}},[]);const u=()=>{if(r)return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-dark-900",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-primary-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500 dark:text-dark-300",children:"Cargando..."})]})});if(e==="/"||e==="/landing")return s.jsx(ij,{});if(e.startsWith("/invoice/"))return s.jsx(ahe,{});if(e.startsWith("/proposal/"))return s.jsx(FR,{});if(e.startsWith("/demo/"))return s.jsx(ohe,{});if(e==="/crm"||e==="/crm/login")return s.jsx(BR,{});const f=localStorage.getItem("crm_token");return(e.startsWith("/crm/")||e.startsWith("/invoices"))&&!f?(window.location.href="/crm/login",null):e==="/crm/dashboard"?JSON.parse(localStorage.getItem("user")||"{}").role==="commercial"?s.jsx(OS,{onLogout:()=>{localStorage.removeItem("crm_token"),localStorage.removeItem("user"),window.location.href="/crm/login"},activeSection:a,onSectionChange:i,onQuickAction:d,children:s.jsx(ihe,{activeSection:a})}):s.jsx(OS,{onLogout:()=>{localStorage.removeItem("crm_token"),localStorage.removeItem("user"),window.location.href="/crm/login"},activeSection:a,onSectionChange:i,onQuickAction:d,children:s.jsx(the,{activeSection:a})}):s.jsx(ij,{})};return s.jsx(p6,{children:s.jsx(c6,{children:u()})})}wy.createRoot(document.getElementById("root")).render(s.jsx(J.StrictMode,{children:s.jsx(lhe,{})}))});export default che();
